var Wce=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var qEt=Wce((Qs,Zs)=>{function qce(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var mu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ur(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function XP(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var rQ={exports:{}},YP={},nQ={exports:{}},Rr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fS=Symbol.for("react.element"),Kce=Symbol.for("react.portal"),Xce=Symbol.for("react.fragment"),Yce=Symbol.for("react.strict_mode"),Qce=Symbol.for("react.profiler"),Zce=Symbol.for("react.provider"),Jce=Symbol.for("react.context"),ede=Symbol.for("react.forward_ref"),tde=Symbol.for("react.suspense"),rde=Symbol.for("react.memo"),nde=Symbol.for("react.lazy"),p5=Symbol.iterator;function ide(e){return e===null||typeof e!="object"?null:(e=p5&&e[p5]||e["@@iterator"],typeof e=="function"?e:null)}var iQ={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oQ=Object.assign,aQ={};function k0(e,t,r){this.props=e,this.context=t,this.refs=aQ,this.updater=r||iQ}k0.prototype.isReactComponent={};k0.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};k0.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function sQ(){}sQ.prototype=k0.prototype;function uB(e,t,r){this.props=e,this.context=t,this.refs=aQ,this.updater=r||iQ}var cB=uB.prototype=new sQ;cB.constructor=uB;oQ(cB,k0.prototype);cB.isPureReactComponent=!0;var m5=Array.isArray,lQ=Object.prototype.hasOwnProperty,dB={current:null},uQ={key:!0,ref:!0,__self:!0,__source:!0};function cQ(e,t,r){var n,i={},o=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)lQ.call(t,n)&&!uQ.hasOwnProperty(n)&&(i[n]=t[n]);var s=arguments.length-2;if(s===1)i.children=r;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(n in s=e.defaultProps,s)i[n]===void 0&&(i[n]=s[n]);return{$$typeof:fS,type:e,key:o,ref:a,props:i,_owner:dB.current}}function ode(e,t){return{$$typeof:fS,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function hB(e){return typeof e=="object"&&e!==null&&e.$$typeof===fS}function ade(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var g5=/\/+/g;function RO(e,t){return typeof e=="object"&&e!==null&&e.key!=null?ade(""+e.key):t.toString(36)}function SA(e,t,r,n,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case fS:case Kce:a=!0}}if(a)return a=e,i=i(a),e=n===""?"."+RO(a,0):n,m5(i)?(r="",e!=null&&(r=e.replace(g5,"$&/")+"/"),SA(i,t,r,"",function(u){return u})):i!=null&&(hB(i)&&(i=ode(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(g5,"$&/")+"/")+e)),t.push(i)),1;if(a=0,n=n===""?".":n+":",m5(e))for(var s=0;s<e.length;s++){o=e[s];var l=n+RO(o,s);a+=SA(o,t,r,l,i)}else if(l=ide(e),typeof l=="function")for(e=l.call(e),s=0;!(o=e.next()).done;)o=o.value,l=n+RO(o,s++),a+=SA(o,t,r,l,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function g_(e,t,r){if(e==null)return e;var n=[],i=0;return SA(e,n,"","",function(o){return t.call(r,o,i++)}),n}function sde(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Xa={current:null},_A={transition:null},lde={ReactCurrentDispatcher:Xa,ReactCurrentBatchConfig:_A,ReactCurrentOwner:dB};Rr.Children={map:g_,forEach:function(e,t,r){g_(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return g_(e,function(){t++}),t},toArray:function(e){return g_(e,function(t){return t})||[]},only:function(e){if(!hB(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Rr.Component=k0;Rr.Fragment=Xce;Rr.Profiler=Qce;Rr.PureComponent=uB;Rr.StrictMode=Yce;Rr.Suspense=tde;Rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lde;Rr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=oQ({},e.props),i=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=dB.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)lQ.call(t,l)&&!uQ.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];n.children=s}return{$$typeof:fS,type:e.type,key:i,ref:o,props:n,_owner:a}};Rr.createContext=function(e){return e={$$typeof:Jce,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Zce,_context:e},e.Consumer=e};Rr.createElement=cQ;Rr.createFactory=function(e){var t=cQ.bind(null,e);return t.type=e,t};Rr.createRef=function(){return{current:null}};Rr.forwardRef=function(e){return{$$typeof:ede,render:e}};Rr.isValidElement=hB;Rr.lazy=function(e){return{$$typeof:nde,_payload:{_status:-1,_result:e},_init:sde}};Rr.memo=function(e,t){return{$$typeof:rde,type:e,compare:t===void 0?null:t}};Rr.startTransition=function(e){var t=_A.transition;_A.transition={};try{e()}finally{_A.transition=t}};Rr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Rr.useCallback=function(e,t){return Xa.current.useCallback(e,t)};Rr.useContext=function(e){return Xa.current.useContext(e)};Rr.useDebugValue=function(){};Rr.useDeferredValue=function(e){return Xa.current.useDeferredValue(e)};Rr.useEffect=function(e,t){return Xa.current.useEffect(e,t)};Rr.useId=function(){return Xa.current.useId()};Rr.useImperativeHandle=function(e,t,r){return Xa.current.useImperativeHandle(e,t,r)};Rr.useInsertionEffect=function(e,t){return Xa.current.useInsertionEffect(e,t)};Rr.useLayoutEffect=function(e,t){return Xa.current.useLayoutEffect(e,t)};Rr.useMemo=function(e,t){return Xa.current.useMemo(e,t)};Rr.useReducer=function(e,t,r){return Xa.current.useReducer(e,t,r)};Rr.useRef=function(e){return Xa.current.useRef(e)};Rr.useState=function(e){return Xa.current.useState(e)};Rr.useSyncExternalStore=function(e,t,r){return Xa.current.useSyncExternalStore(e,t,r)};Rr.useTransition=function(){return Xa.current.useTransition()};Rr.version="18.2.0";nQ.exports=Rr;var P=nQ.exports;const le=Ur(P),R1=qce({__proto__:null,default:le},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ude=P,cde=Symbol.for("react.element"),dde=Symbol.for("react.fragment"),hde=Object.prototype.hasOwnProperty,fde=ude.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pde={key:!0,ref:!0,__self:!0,__source:!0};function dQ(e,t,r){var n,i={},o=null,a=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)hde.call(t,n)&&!pde.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:cde,type:e,key:o,ref:a,props:i,_owner:fde.current}}YP.Fragment=dde;YP.jsx=dQ;YP.jsxs=dQ;rQ.exports=YP;var B=rQ.exports,bk={},hQ={exports:{}},il={},fQ={exports:{}},pQ={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,z){var j=R.length;R.push(z);e:for(;0<j;){var $=j-1>>>1,U=R[$];if(0<i(U,z))R[$]=z,R[j]=U,j=$;else break e}}function r(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var z=R[0],j=R.pop();if(j!==z){R[0]=j;e:for(var $=0,U=R.length,H=U>>>1;$<H;){var V=2*($+1)-1,Q=R[V],X=V+1,ne=R[X];if(0>i(Q,j))X<U&&0>i(ne,Q)?(R[$]=ne,R[X]=j,$=X):(R[$]=Q,R[V]=j,$=V);else if(X<U&&0>i(ne,j))R[$]=ne,R[X]=j,$=X;else break e}}return z}function i(R,z){var j=R.sortIndex-z.sortIndex;return j!==0?j:R.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var l=[],u=[],d=1,c=null,h=3,f=!1,m=!1,p=!1,g=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(R){for(var z=r(u);z!==null;){if(z.callback===null)n(u);else if(z.startTime<=R)n(u),z.sortIndex=z.expirationTime,t(l,z);else break;z=r(u)}}function x(R){if(p=!1,y(R),!m)if(r(l)!==null)m=!0,N(S);else{var z=r(u);z!==null&&k(x,z.startTime-R)}}function S(R,z){m=!1,p&&(p=!1,v(C),C=-1),f=!0;var j=h;try{for(y(z),c=r(l);c!==null&&(!(c.expirationTime>z)||R&&!M());){var $=c.callback;if(typeof $=="function"){c.callback=null,h=c.priorityLevel;var U=$(c.expirationTime<=z);z=e.unstable_now(),typeof U=="function"?c.callback=U:c===r(l)&&n(l),y(z)}else n(l);c=r(l)}if(c!==null)var H=!0;else{var V=r(u);V!==null&&k(x,V.startTime-z),H=!1}return H}finally{c=null,h=j,f=!1}}var w=!1,_=null,C=-1,E=5,A=-1;function M(){return!(e.unstable_now()-A<E)}function I(){if(_!==null){var R=e.unstable_now();A=R;var z=!0;try{z=_(!0,R)}finally{z?O():(w=!1,_=null)}}else w=!1}var O;if(typeof b=="function")O=function(){b(I)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,D=T.port2;T.port1.onmessage=I,O=function(){D.postMessage(null)}}else O=function(){g(I,0)};function N(R){_=R,w||(w=!0,O())}function k(R,z){C=g(function(){R(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){m||f||(m=!0,N(S))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(R){switch(h){case 1:case 2:case 3:var z=3;break;default:z=h}var j=h;h=z;try{return R()}finally{h=j}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,z){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var j=h;h=R;try{return z()}finally{h=j}},e.unstable_scheduleCallback=function(R,z,j){var $=e.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?$+j:$):j=$,R){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=j+U,R={id:d++,callback:z,priorityLevel:R,startTime:j,expirationTime:U,sortIndex:-1},j>$?(R.sortIndex=j,t(u,R),r(l)===null&&R===r(u)&&(p?(v(C),C=-1):p=!0,k(x,j-$))):(R.sortIndex=U,t(l,R),m||f||(m=!0,N(S))),R},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(R){var z=h;return function(){var j=h;h=z;try{return R.apply(this,arguments)}finally{h=j}}}})(pQ);fQ.exports=pQ;var mde=fQ.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mQ=P,tl=mde;function Qe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gQ=new Set,k1={};function tg(e,t){Ty(e,t),Ty(e+"Capture",t)}function Ty(e,t){for(k1[e]=t,e=0;e<t.length;e++)gQ.add(t[e])}var th=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xk=Object.prototype.hasOwnProperty,gde=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v5={},y5={};function vde(e){return xk.call(y5,e)?!0:xk.call(v5,e)?!1:gde.test(e)?y5[e]=!0:(v5[e]=!0,!1)}function yde(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function bde(e,t,r,n){if(t===null||typeof t>"u"||yde(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ya(e,t,r,n,i,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var Wo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Wo[e]=new Ya(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Wo[t]=new Ya(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Wo[e]=new Ya(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Wo[e]=new Ya(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Wo[e]=new Ya(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Wo[e]=new Ya(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Wo[e]=new Ya(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Wo[e]=new Ya(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Wo[e]=new Ya(e,5,!1,e.toLowerCase(),null,!1,!1)});var fB=/[\-:]([a-z])/g;function pB(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(fB,pB);Wo[t]=new Ya(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(fB,pB);Wo[t]=new Ya(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(fB,pB);Wo[t]=new Ya(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Wo[e]=new Ya(e,1,!1,e.toLowerCase(),null,!1,!1)});Wo.xlinkHref=new Ya("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Wo[e]=new Ya(e,1,!1,e.toLowerCase(),null,!0,!0)});function mB(e,t,r,n){var i=Wo.hasOwnProperty(t)?Wo[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(bde(t,r,i,n)&&(r=null),n||i===null?vde(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var vh=mQ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,v_=Symbol.for("react.element"),Sv=Symbol.for("react.portal"),_v=Symbol.for("react.fragment"),gB=Symbol.for("react.strict_mode"),wk=Symbol.for("react.profiler"),vQ=Symbol.for("react.provider"),yQ=Symbol.for("react.context"),vB=Symbol.for("react.forward_ref"),Sk=Symbol.for("react.suspense"),_k=Symbol.for("react.suspense_list"),yB=Symbol.for("react.memo"),Kh=Symbol.for("react.lazy"),bQ=Symbol.for("react.offscreen"),b5=Symbol.iterator;function _b(e){return e===null||typeof e!="object"?null:(e=b5&&e[b5]||e["@@iterator"],typeof e=="function"?e:null)}var ui=Object.assign,kO;function Mx(e){if(kO===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);kO=t&&t[1]||""}return`
`+kO+e}var LO=!1;function NO(e,t){if(!e||LO)return"";LO=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=n.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var l=`
`+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=a&&0<=s);break}}}finally{LO=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Mx(e):""}function xde(e){switch(e.tag){case 5:return Mx(e.type);case 16:return Mx("Lazy");case 13:return Mx("Suspense");case 19:return Mx("SuspenseList");case 0:case 2:case 15:return e=NO(e.type,!1),e;case 11:return e=NO(e.type.render,!1),e;case 1:return e=NO(e.type,!0),e;default:return""}}function Ck(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _v:return"Fragment";case Sv:return"Portal";case wk:return"Profiler";case gB:return"StrictMode";case Sk:return"Suspense";case _k:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case yQ:return(e.displayName||"Context")+".Consumer";case vQ:return(e._context.displayName||"Context")+".Provider";case vB:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case yB:return t=e.displayName||null,t!==null?t:Ck(e.type)||"Memo";case Kh:t=e._payload,e=e._init;try{return Ck(e(t))}catch{}}return null}function wde(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ck(t);case 8:return t===gB?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function qf(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function xQ(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Sde(e){var t=xQ(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function y_(e){e._valueTracker||(e._valueTracker=Sde(e))}function wQ(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=xQ(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function aE(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ak(e,t){var r=t.checked;return ui({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function x5(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=qf(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function SQ(e,t){t=t.checked,t!=null&&mB(e,"checked",t,!1)}function Ek(e,t){SQ(e,t);var r=qf(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Mk(e,t.type,r):t.hasOwnProperty("defaultValue")&&Mk(e,t.type,qf(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function w5(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Mk(e,t,r){(t!=="number"||aE(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Px=Array.isArray;function Wv(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+qf(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Pk(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Qe(91));return ui({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function S5(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Qe(92));if(Px(r)){if(1<r.length)throw Error(Qe(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:qf(r)}}function _Q(e,t){var r=qf(t.value),n=qf(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function _5(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function CQ(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tk(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?CQ(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var b_,AQ=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(b_=b_||document.createElement("div"),b_.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=b_.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function L1(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Xx={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_de=["Webkit","ms","Moz","O"];Object.keys(Xx).forEach(function(e){_de.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Xx[t]=Xx[e]})});function EQ(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Xx.hasOwnProperty(e)&&Xx[e]?(""+t).trim():t+"px"}function MQ(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=EQ(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var Cde=ui({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ok(e,t){if(t){if(Cde[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Qe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Qe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Qe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Qe(62))}}function Ik(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dk=null;function bB(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Rk=null,qv=null,Kv=null;function C5(e){if(e=gS(e)){if(typeof Rk!="function")throw Error(Qe(280));var t=e.stateNode;t&&(t=tT(t),Rk(e.stateNode,e.type,t))}}function PQ(e){qv?Kv?Kv.push(e):Kv=[e]:qv=e}function TQ(){if(qv){var e=qv,t=Kv;if(Kv=qv=null,C5(e),t)for(e=0;e<t.length;e++)C5(t[e])}}function OQ(e,t){return e(t)}function IQ(){}var zO=!1;function DQ(e,t,r){if(zO)return e(t,r);zO=!0;try{return OQ(e,t,r)}finally{zO=!1,(qv!==null||Kv!==null)&&(IQ(),TQ())}}function N1(e,t){var r=e.stateNode;if(r===null)return null;var n=tT(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Qe(231,t,typeof r));return r}var kk=!1;if(th)try{var Cb={};Object.defineProperty(Cb,"passive",{get:function(){kk=!0}}),window.addEventListener("test",Cb,Cb),window.removeEventListener("test",Cb,Cb)}catch{kk=!1}function Ade(e,t,r,n,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Yx=!1,sE=null,lE=!1,Lk=null,Ede={onError:function(e){Yx=!0,sE=e}};function Mde(e,t,r,n,i,o,a,s,l){Yx=!1,sE=null,Ade.apply(Ede,arguments)}function Pde(e,t,r,n,i,o,a,s,l){if(Mde.apply(this,arguments),Yx){if(Yx){var u=sE;Yx=!1,sE=null}else throw Error(Qe(198));lE||(lE=!0,Lk=u)}}function rg(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function RQ(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function A5(e){if(rg(e)!==e)throw Error(Qe(188))}function Tde(e){var t=e.alternate;if(!t){if(t=rg(e),t===null)throw Error(Qe(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return A5(i),e;if(o===n)return A5(i),t;o=o.sibling}throw Error(Qe(188))}if(r.return!==n.return)r=i,n=o;else{for(var a=!1,s=i.child;s;){if(s===r){a=!0,r=i,n=o;break}if(s===n){a=!0,n=i,r=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===r){a=!0,r=o,n=i;break}if(s===n){a=!0,n=o,r=i;break}s=s.sibling}if(!a)throw Error(Qe(189))}}if(r.alternate!==n)throw Error(Qe(190))}if(r.tag!==3)throw Error(Qe(188));return r.stateNode.current===r?e:t}function kQ(e){return e=Tde(e),e!==null?LQ(e):null}function LQ(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=LQ(e);if(t!==null)return t;e=e.sibling}return null}var NQ=tl.unstable_scheduleCallback,E5=tl.unstable_cancelCallback,Ode=tl.unstable_shouldYield,Ide=tl.unstable_requestPaint,Pi=tl.unstable_now,Dde=tl.unstable_getCurrentPriorityLevel,xB=tl.unstable_ImmediatePriority,zQ=tl.unstable_UserBlockingPriority,uE=tl.unstable_NormalPriority,Rde=tl.unstable_LowPriority,BQ=tl.unstable_IdlePriority,QP=null,Lc=null;function kde(e){if(Lc&&typeof Lc.onCommitFiberRoot=="function")try{Lc.onCommitFiberRoot(QP,e,void 0,(e.current.flags&128)===128)}catch{}}var Pu=Math.clz32?Math.clz32:zde,Lde=Math.log,Nde=Math.LN2;function zde(e){return e>>>=0,e===0?32:31-(Lde(e)/Nde|0)|0}var x_=64,w_=4194304;function Tx(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function cE(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,o=e.pingedLanes,a=r&268435455;if(a!==0){var s=a&~i;s!==0?n=Tx(s):(o&=a,o!==0&&(n=Tx(o)))}else a=r&~i,a!==0?n=Tx(a):o!==0&&(n=Tx(o));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Pu(t),i=1<<r,n|=e[r],t&=~i;return n}function Bde(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fde(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-Pu(o),s=1<<a,l=i[a];l===-1?(!(s&r)||s&n)&&(i[a]=Bde(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}function Nk(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function FQ(){var e=x_;return x_<<=1,!(x_&4194240)&&(x_=64),e}function BO(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function pS(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Pu(t),e[t]=r}function jde(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-Pu(r),o=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~o}}function wB(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Pu(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var dn=0;function jQ(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var UQ,SB,$Q,VQ,HQ,zk=!1,S_=[],Af=null,Ef=null,Mf=null,z1=new Map,B1=new Map,ef=[],Ude="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function M5(e,t){switch(e){case"focusin":case"focusout":Af=null;break;case"dragenter":case"dragleave":Ef=null;break;case"mouseover":case"mouseout":Mf=null;break;case"pointerover":case"pointerout":z1.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":B1.delete(t.pointerId)}}function Ab(e,t,r,n,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},t!==null&&(t=gS(t),t!==null&&SB(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function $de(e,t,r,n,i){switch(t){case"focusin":return Af=Ab(Af,e,t,r,n,i),!0;case"dragenter":return Ef=Ab(Ef,e,t,r,n,i),!0;case"mouseover":return Mf=Ab(Mf,e,t,r,n,i),!0;case"pointerover":var o=i.pointerId;return z1.set(o,Ab(z1.get(o)||null,e,t,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,B1.set(o,Ab(B1.get(o)||null,e,t,r,n,i)),!0}return!1}function GQ(e){var t=em(e.target);if(t!==null){var r=rg(t);if(r!==null){if(t=r.tag,t===13){if(t=RQ(r),t!==null){e.blockedOn=t,HQ(e.priority,function(){$Q(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function CA(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Bk(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Dk=n,r.target.dispatchEvent(n),Dk=null}else return t=gS(r),t!==null&&SB(t),e.blockedOn=r,!1;t.shift()}return!0}function P5(e,t,r){CA(e)&&r.delete(t)}function Vde(){zk=!1,Af!==null&&CA(Af)&&(Af=null),Ef!==null&&CA(Ef)&&(Ef=null),Mf!==null&&CA(Mf)&&(Mf=null),z1.forEach(P5),B1.forEach(P5)}function Eb(e,t){e.blockedOn===t&&(e.blockedOn=null,zk||(zk=!0,tl.unstable_scheduleCallback(tl.unstable_NormalPriority,Vde)))}function F1(e){function t(i){return Eb(i,e)}if(0<S_.length){Eb(S_[0],e);for(var r=1;r<S_.length;r++){var n=S_[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Af!==null&&Eb(Af,e),Ef!==null&&Eb(Ef,e),Mf!==null&&Eb(Mf,e),z1.forEach(t),B1.forEach(t),r=0;r<ef.length;r++)n=ef[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<ef.length&&(r=ef[0],r.blockedOn===null);)GQ(r),r.blockedOn===null&&ef.shift()}var Xv=vh.ReactCurrentBatchConfig,dE=!0;function Hde(e,t,r,n){var i=dn,o=Xv.transition;Xv.transition=null;try{dn=1,_B(e,t,r,n)}finally{dn=i,Xv.transition=o}}function Gde(e,t,r,n){var i=dn,o=Xv.transition;Xv.transition=null;try{dn=4,_B(e,t,r,n)}finally{dn=i,Xv.transition=o}}function _B(e,t,r,n){if(dE){var i=Bk(e,t,r,n);if(i===null)KO(e,t,n,hE,r),M5(e,n);else if($de(i,e,t,r,n))n.stopPropagation();else if(M5(e,n),t&4&&-1<Ude.indexOf(e)){for(;i!==null;){var o=gS(i);if(o!==null&&UQ(o),o=Bk(e,t,r,n),o===null&&KO(e,t,n,hE,r),o===i)break;i=o}i!==null&&n.stopPropagation()}else KO(e,t,n,null,r)}}var hE=null;function Bk(e,t,r,n){if(hE=null,e=bB(n),e=em(e),e!==null)if(t=rg(e),t===null)e=null;else if(r=t.tag,r===13){if(e=RQ(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return hE=e,null}function WQ(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Dde()){case xB:return 1;case zQ:return 4;case uE:case Rde:return 16;case BQ:return 536870912;default:return 16}default:return 16}}var lf=null,CB=null,AA=null;function qQ(){if(AA)return AA;var e,t=CB,r=t.length,n,i="value"in lf?lf.value:lf.textContent,o=i.length;for(e=0;e<r&&t[e]===i[e];e++);var a=r-e;for(n=1;n<=a&&t[r-n]===i[o-n];n++);return AA=i.slice(e,1<n?1-n:void 0)}function EA(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function __(){return!0}function T5(){return!1}function ol(e){function t(r,n,i,o,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(r=e[s],this[s]=r?r(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?__:T5,this.isPropagationStopped=T5,this}return ui(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=__)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=__)},persist:function(){},isPersistent:__}),t}var L0={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},AB=ol(L0),mS=ui({},L0,{view:0,detail:0}),Wde=ol(mS),FO,jO,Mb,ZP=ui({},mS,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:EB,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Mb&&(Mb&&e.type==="mousemove"?(FO=e.screenX-Mb.screenX,jO=e.screenY-Mb.screenY):jO=FO=0,Mb=e),FO)},movementY:function(e){return"movementY"in e?e.movementY:jO}}),O5=ol(ZP),qde=ui({},ZP,{dataTransfer:0}),Kde=ol(qde),Xde=ui({},mS,{relatedTarget:0}),UO=ol(Xde),Yde=ui({},L0,{animationName:0,elapsedTime:0,pseudoElement:0}),Qde=ol(Yde),Zde=ui({},L0,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jde=ol(Zde),ehe=ui({},L0,{data:0}),I5=ol(ehe),the={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rhe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nhe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ihe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=nhe[e])?!!t[e]:!1}function EB(){return ihe}var ohe=ui({},mS,{key:function(e){if(e.key){var t=the[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=EA(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?rhe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:EB,charCode:function(e){return e.type==="keypress"?EA(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?EA(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ahe=ol(ohe),she=ui({},ZP,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),D5=ol(she),lhe=ui({},mS,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:EB}),uhe=ol(lhe),che=ui({},L0,{propertyName:0,elapsedTime:0,pseudoElement:0}),dhe=ol(che),hhe=ui({},ZP,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),fhe=ol(hhe),phe=[9,13,27,32],MB=th&&"CompositionEvent"in window,Qx=null;th&&"documentMode"in document&&(Qx=document.documentMode);var mhe=th&&"TextEvent"in window&&!Qx,KQ=th&&(!MB||Qx&&8<Qx&&11>=Qx),R5=String.fromCharCode(32),k5=!1;function XQ(e,t){switch(e){case"keyup":return phe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function YQ(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Cv=!1;function ghe(e,t){switch(e){case"compositionend":return YQ(t);case"keypress":return t.which!==32?null:(k5=!0,R5);case"textInput":return e=t.data,e===R5&&k5?null:e;default:return null}}function vhe(e,t){if(Cv)return e==="compositionend"||!MB&&XQ(e,t)?(e=qQ(),AA=CB=lf=null,Cv=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return KQ&&t.locale!=="ko"?null:t.data;default:return null}}var yhe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function L5(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!yhe[e.type]:t==="textarea"}function QQ(e,t,r,n){PQ(n),t=fE(t,"onChange"),0<t.length&&(r=new AB("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Zx=null,j1=null;function bhe(e){lZ(e,0)}function JP(e){var t=Mv(e);if(wQ(t))return e}function xhe(e,t){if(e==="change")return t}var ZQ=!1;if(th){var $O;if(th){var VO="oninput"in document;if(!VO){var N5=document.createElement("div");N5.setAttribute("oninput","return;"),VO=typeof N5.oninput=="function"}$O=VO}else $O=!1;ZQ=$O&&(!document.documentMode||9<document.documentMode)}function z5(){Zx&&(Zx.detachEvent("onpropertychange",JQ),j1=Zx=null)}function JQ(e){if(e.propertyName==="value"&&JP(j1)){var t=[];QQ(t,j1,e,bB(e)),DQ(bhe,t)}}function whe(e,t,r){e==="focusin"?(z5(),Zx=t,j1=r,Zx.attachEvent("onpropertychange",JQ)):e==="focusout"&&z5()}function She(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return JP(j1)}function _he(e,t){if(e==="click")return JP(t)}function Che(e,t){if(e==="input"||e==="change")return JP(t)}function Ahe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ku=typeof Object.is=="function"?Object.is:Ahe;function U1(e,t){if(ku(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!xk.call(t,i)||!ku(e[i],t[i]))return!1}return!0}function B5(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function F5(e,t){var r=B5(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=B5(r)}}function eZ(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?eZ(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function tZ(){for(var e=window,t=aE();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=aE(e.document)}return t}function PB(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ehe(e){var t=tZ(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&eZ(r.ownerDocument.documentElement,r)){if(n!==null&&PB(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=n.end===void 0?o:Math.min(n.end,i),!e.extend&&o>n&&(i=n,n=o,o=i),i=F5(r,o);var a=F5(r,n);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Mhe=th&&"documentMode"in document&&11>=document.documentMode,Av=null,Fk=null,Jx=null,jk=!1;function j5(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;jk||Av==null||Av!==aE(n)||(n=Av,"selectionStart"in n&&PB(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Jx&&U1(Jx,n)||(Jx=n,n=fE(Fk,"onSelect"),0<n.length&&(t=new AB("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Av)))}function C_(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ev={animationend:C_("Animation","AnimationEnd"),animationiteration:C_("Animation","AnimationIteration"),animationstart:C_("Animation","AnimationStart"),transitionend:C_("Transition","TransitionEnd")},HO={},rZ={};th&&(rZ=document.createElement("div").style,"AnimationEvent"in window||(delete Ev.animationend.animation,delete Ev.animationiteration.animation,delete Ev.animationstart.animation),"TransitionEvent"in window||delete Ev.transitionend.transition);function eT(e){if(HO[e])return HO[e];if(!Ev[e])return e;var t=Ev[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in rZ)return HO[e]=t[r];return e}var nZ=eT("animationend"),iZ=eT("animationiteration"),oZ=eT("animationstart"),aZ=eT("transitionend"),sZ=new Map,U5="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ap(e,t){sZ.set(e,t),tg(t,[e])}for(var GO=0;GO<U5.length;GO++){var WO=U5[GO],Phe=WO.toLowerCase(),The=WO[0].toUpperCase()+WO.slice(1);ap(Phe,"on"+The)}ap(nZ,"onAnimationEnd");ap(iZ,"onAnimationIteration");ap(oZ,"onAnimationStart");ap("dblclick","onDoubleClick");ap("focusin","onFocus");ap("focusout","onBlur");ap(aZ,"onTransitionEnd");Ty("onMouseEnter",["mouseout","mouseover"]);Ty("onMouseLeave",["mouseout","mouseover"]);Ty("onPointerEnter",["pointerout","pointerover"]);Ty("onPointerLeave",["pointerout","pointerover"]);tg("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));tg("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));tg("onBeforeInput",["compositionend","keypress","textInput","paste"]);tg("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));tg("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));tg("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ox="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ohe=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ox));function $5(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Pde(n,t,void 0,e),e.currentTarget=null}function lZ(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var a=n.length-1;0<=a;a--){var s=n[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;$5(i,s,u),o=l}else for(a=0;a<n.length;a++){if(s=n[a],l=s.instance,u=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;$5(i,s,u),o=l}}}if(lE)throw e=Lk,lE=!1,Lk=null,e}function jn(e,t){var r=t[Gk];r===void 0&&(r=t[Gk]=new Set);var n=e+"__bubble";r.has(n)||(uZ(t,e,2,!1),r.add(n))}function qO(e,t,r){var n=0;t&&(n|=4),uZ(r,e,n,t)}var A_="_reactListening"+Math.random().toString(36).slice(2);function $1(e){if(!e[A_]){e[A_]=!0,gQ.forEach(function(r){r!=="selectionchange"&&(Ohe.has(r)||qO(r,!1,e),qO(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[A_]||(t[A_]=!0,qO("selectionchange",!1,t))}}function uZ(e,t,r,n){switch(WQ(t)){case 1:var i=Hde;break;case 4:i=Gde;break;default:i=_B}r=i.bind(null,t,r,e),i=void 0,!kk||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function KO(e,t,r,n,i){var o=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var s=n.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;s!==null;){if(a=em(s),a===null)return;if(l=a.tag,l===5||l===6){n=o=a;continue e}s=s.parentNode}}n=n.return}DQ(function(){var u=o,d=bB(r),c=[];e:{var h=sZ.get(e);if(h!==void 0){var f=AB,m=e;switch(e){case"keypress":if(EA(r)===0)break e;case"keydown":case"keyup":f=ahe;break;case"focusin":m="focus",f=UO;break;case"focusout":m="blur",f=UO;break;case"beforeblur":case"afterblur":f=UO;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=O5;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Kde;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=uhe;break;case nZ:case iZ:case oZ:f=Qde;break;case aZ:f=dhe;break;case"scroll":f=Wde;break;case"wheel":f=fhe;break;case"copy":case"cut":case"paste":f=Jde;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=D5}var p=(t&4)!==0,g=!p&&e==="scroll",v=p?h!==null?h+"Capture":null:h;p=[];for(var b=u,y;b!==null;){y=b;var x=y.stateNode;if(y.tag===5&&x!==null&&(y=x,v!==null&&(x=N1(b,v),x!=null&&p.push(V1(b,x,y)))),g)break;b=b.return}0<p.length&&(h=new f(h,m,null,r,d),c.push({event:h,listeners:p}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",h&&r!==Dk&&(m=r.relatedTarget||r.fromElement)&&(em(m)||m[rh]))break e;if((f||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,f?(m=r.relatedTarget||r.toElement,f=u,m=m?em(m):null,m!==null&&(g=rg(m),m!==g||m.tag!==5&&m.tag!==6)&&(m=null)):(f=null,m=u),f!==m)){if(p=O5,x="onMouseLeave",v="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(p=D5,x="onPointerLeave",v="onPointerEnter",b="pointer"),g=f==null?h:Mv(f),y=m==null?h:Mv(m),h=new p(x,b+"leave",f,r,d),h.target=g,h.relatedTarget=y,x=null,em(d)===u&&(p=new p(v,b+"enter",m,r,d),p.target=y,p.relatedTarget=g,x=p),g=x,f&&m)t:{for(p=f,v=m,b=0,y=p;y;y=bg(y))b++;for(y=0,x=v;x;x=bg(x))y++;for(;0<b-y;)p=bg(p),b--;for(;0<y-b;)v=bg(v),y--;for(;b--;){if(p===v||v!==null&&p===v.alternate)break t;p=bg(p),v=bg(v)}p=null}else p=null;f!==null&&V5(c,h,f,p,!1),m!==null&&g!==null&&V5(c,g,m,p,!0)}}e:{if(h=u?Mv(u):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var S=xhe;else if(L5(h))if(ZQ)S=Che;else{S=She;var w=whe}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=_he);if(S&&(S=S(e,u))){QQ(c,S,r,d);break e}w&&w(e,h,u),e==="focusout"&&(w=h._wrapperState)&&w.controlled&&h.type==="number"&&Mk(h,"number",h.value)}switch(w=u?Mv(u):window,e){case"focusin":(L5(w)||w.contentEditable==="true")&&(Av=w,Fk=u,Jx=null);break;case"focusout":Jx=Fk=Av=null;break;case"mousedown":jk=!0;break;case"contextmenu":case"mouseup":case"dragend":jk=!1,j5(c,r,d);break;case"selectionchange":if(Mhe)break;case"keydown":case"keyup":j5(c,r,d)}var _;if(MB)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Cv?XQ(e,r)&&(C="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(KQ&&r.locale!=="ko"&&(Cv||C!=="onCompositionStart"?C==="onCompositionEnd"&&Cv&&(_=qQ()):(lf=d,CB="value"in lf?lf.value:lf.textContent,Cv=!0)),w=fE(u,C),0<w.length&&(C=new I5(C,e,null,r,d),c.push({event:C,listeners:w}),_?C.data=_:(_=YQ(r),_!==null&&(C.data=_)))),(_=mhe?ghe(e,r):vhe(e,r))&&(u=fE(u,"onBeforeInput"),0<u.length&&(d=new I5("onBeforeInput","beforeinput",null,r,d),c.push({event:d,listeners:u}),d.data=_))}lZ(c,t)})}function V1(e,t,r){return{instance:e,listener:t,currentTarget:r}}function fE(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=N1(e,r),o!=null&&n.unshift(V1(e,o,i)),o=N1(e,t),o!=null&&n.push(V1(e,o,i))),e=e.return}return n}function bg(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function V5(e,t,r,n,i){for(var o=t._reactName,a=[];r!==null&&r!==n;){var s=r,l=s.alternate,u=s.stateNode;if(l!==null&&l===n)break;s.tag===5&&u!==null&&(s=u,i?(l=N1(r,o),l!=null&&a.unshift(V1(r,l,s))):i||(l=N1(r,o),l!=null&&a.push(V1(r,l,s)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var Ihe=/\r\n?/g,Dhe=/\u0000|\uFFFD/g;function H5(e){return(typeof e=="string"?e:""+e).replace(Ihe,`
`).replace(Dhe,"")}function E_(e,t,r){if(t=H5(t),H5(e)!==t&&r)throw Error(Qe(425))}function pE(){}var Uk=null,$k=null;function Vk(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Hk=typeof setTimeout=="function"?setTimeout:void 0,Rhe=typeof clearTimeout=="function"?clearTimeout:void 0,G5=typeof Promise=="function"?Promise:void 0,khe=typeof queueMicrotask=="function"?queueMicrotask:typeof G5<"u"?function(e){return G5.resolve(null).then(e).catch(Lhe)}:Hk;function Lhe(e){setTimeout(function(){throw e})}function XO(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),F1(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);F1(t)}function Pf(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function W5(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var N0=Math.random().toString(36).slice(2),Sc="__reactFiber$"+N0,H1="__reactProps$"+N0,rh="__reactContainer$"+N0,Gk="__reactEvents$"+N0,Nhe="__reactListeners$"+N0,zhe="__reactHandles$"+N0;function em(e){var t=e[Sc];if(t)return t;for(var r=e.parentNode;r;){if(t=r[rh]||r[Sc]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=W5(e);e!==null;){if(r=e[Sc])return r;e=W5(e)}return t}e=r,r=e.parentNode}return null}function gS(e){return e=e[Sc]||e[rh],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Mv(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Qe(33))}function tT(e){return e[H1]||null}var Wk=[],Pv=-1;function sp(e){return{current:e}}function Hn(e){0>Pv||(e.current=Wk[Pv],Wk[Pv]=null,Pv--)}function Nn(e,t){Pv++,Wk[Pv]=e.current,e.current=t}var Kf={},fa=sp(Kf),ys=sp(!1),Rm=Kf;function Oy(e,t){var r=e.type.contextTypes;if(!r)return Kf;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function bs(e){return e=e.childContextTypes,e!=null}function mE(){Hn(ys),Hn(fa)}function q5(e,t,r){if(fa.current!==Kf)throw Error(Qe(168));Nn(fa,t),Nn(ys,r)}function cZ(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(Qe(108,wde(e)||"Unknown",i));return ui({},r,n)}function gE(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Kf,Rm=fa.current,Nn(fa,e),Nn(ys,ys.current),!0}function K5(e,t,r){var n=e.stateNode;if(!n)throw Error(Qe(169));r?(e=cZ(e,t,Rm),n.__reactInternalMemoizedMergedChildContext=e,Hn(ys),Hn(fa),Nn(fa,e)):Hn(ys),Nn(ys,r)}var Ld=null,rT=!1,YO=!1;function dZ(e){Ld===null?Ld=[e]:Ld.push(e)}function Bhe(e){rT=!0,dZ(e)}function lp(){if(!YO&&Ld!==null){YO=!0;var e=0,t=dn;try{var r=Ld;for(dn=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Ld=null,rT=!1}catch(i){throw Ld!==null&&(Ld=Ld.slice(e+1)),NQ(xB,lp),i}finally{dn=t,YO=!1}}return null}var Tv=[],Ov=0,vE=null,yE=0,Tl=[],Ol=0,km=null,Ud=1,$d="";function Dp(e,t){Tv[Ov++]=yE,Tv[Ov++]=vE,vE=e,yE=t}function hZ(e,t,r){Tl[Ol++]=Ud,Tl[Ol++]=$d,Tl[Ol++]=km,km=e;var n=Ud;e=$d;var i=32-Pu(n)-1;n&=~(1<<i),r+=1;var o=32-Pu(t)+i;if(30<o){var a=i-i%5;o=(n&(1<<a)-1).toString(32),n>>=a,i-=a,Ud=1<<32-Pu(t)+i|r<<i|n,$d=o+e}else Ud=1<<o|r<<i|n,$d=e}function TB(e){e.return!==null&&(Dp(e,1),hZ(e,1,0))}function OB(e){for(;e===vE;)vE=Tv[--Ov],Tv[Ov]=null,yE=Tv[--Ov],Tv[Ov]=null;for(;e===km;)km=Tl[--Ol],Tl[Ol]=null,$d=Tl[--Ol],Tl[Ol]=null,Ud=Tl[--Ol],Tl[Ol]=null}var Js=null,Ks=null,Qn=!1,gu=null;function fZ(e,t){var r=Ll(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function X5(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Js=e,Ks=Pf(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Js=e,Ks=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=km!==null?{id:Ud,overflow:$d}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ll(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Js=e,Ks=null,!0):!1;default:return!1}}function qk(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Kk(e){if(Qn){var t=Ks;if(t){var r=t;if(!X5(e,t)){if(qk(e))throw Error(Qe(418));t=Pf(r.nextSibling);var n=Js;t&&X5(e,t)?fZ(n,r):(e.flags=e.flags&-4097|2,Qn=!1,Js=e)}}else{if(qk(e))throw Error(Qe(418));e.flags=e.flags&-4097|2,Qn=!1,Js=e}}}function Y5(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Js=e}function M_(e){if(e!==Js)return!1;if(!Qn)return Y5(e),Qn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Vk(e.type,e.memoizedProps)),t&&(t=Ks)){if(qk(e))throw pZ(),Error(Qe(418));for(;t;)fZ(e,t),t=Pf(t.nextSibling)}if(Y5(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Qe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ks=Pf(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ks=null}}else Ks=Js?Pf(e.stateNode.nextSibling):null;return!0}function pZ(){for(var e=Ks;e;)e=Pf(e.nextSibling)}function Iy(){Ks=Js=null,Qn=!1}function IB(e){gu===null?gu=[e]:gu.push(e)}var Fhe=vh.ReactCurrentBatchConfig;function hu(e,t){if(e&&e.defaultProps){t=ui({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var bE=sp(null),xE=null,Iv=null,DB=null;function RB(){DB=Iv=xE=null}function kB(e){var t=bE.current;Hn(bE),e._currentValue=t}function Xk(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Yv(e,t){xE=e,DB=Iv=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(cs=!0),e.firstContext=null)}function Gl(e){var t=e._currentValue;if(DB!==e)if(e={context:e,memoizedValue:t,next:null},Iv===null){if(xE===null)throw Error(Qe(308));Iv=e,xE.dependencies={lanes:0,firstContext:e}}else Iv=Iv.next=e;return t}var tm=null;function LB(e){tm===null?tm=[e]:tm.push(e)}function mZ(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,LB(t)):(r.next=i.next,i.next=r),t.interleaved=r,nh(e,n)}function nh(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Xh=!1;function NB(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gZ(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Xd(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Tf(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Hr&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,nh(e,r)}return i=n.interleaved,i===null?(t.next=t,LB(n)):(t.next=i.next,i.next=t),n.interleaved=t,nh(e,r)}function MA(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,wB(e,r)}}function Q5(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=a:o=o.next=a,r=r.next}while(r!==null);o===null?i=o=t:o=o.next=t}else i=o=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function wE(e,t,r,n){var i=e.updateQueue;Xh=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,u=l.next;l.next=null,a===null?o=u:a.next=u,a=l;var d=e.alternate;d!==null&&(d=d.updateQueue,s=d.lastBaseUpdate,s!==a&&(s===null?d.firstBaseUpdate=u:s.next=u,d.lastBaseUpdate=l))}if(o!==null){var c=i.baseState;a=0,d=u=l=null,s=o;do{var h=s.lane,f=s.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var m=e,p=s;switch(h=t,f=r,p.tag){case 1:if(m=p.payload,typeof m=="function"){c=m.call(f,c,h);break e}c=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=p.payload,h=typeof m=="function"?m.call(f,c,h):m,h==null)break e;c=ui({},c,h);break e;case 2:Xh=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[s]:h.push(s))}else f={eventTime:f,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},d===null?(u=d=f,l=c):d=d.next=f,a|=h;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;h=s,s=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(d===null&&(l=c),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);Nm|=a,e.lanes=a,e.memoizedState=c}}function Z5(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Qe(191,i));i.call(n)}}}var vZ=new mQ.Component().refs;function Yk(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ui({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var nT={isMounted:function(e){return(e=e._reactInternals)?rg(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=$a(),i=If(e),o=Xd(n,i);o.payload=t,r!=null&&(o.callback=r),t=Tf(e,o,i),t!==null&&(Tu(t,e,i,n),MA(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=$a(),i=If(e),o=Xd(n,i);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=Tf(e,o,i),t!==null&&(Tu(t,e,i,n),MA(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=$a(),n=If(e),i=Xd(r,n);i.tag=2,t!=null&&(i.callback=t),t=Tf(e,i,n),t!==null&&(Tu(t,e,n,r),MA(t,e,n))}};function J5(e,t,r,n,i,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,a):t.prototype&&t.prototype.isPureReactComponent?!U1(r,n)||!U1(i,o):!0}function yZ(e,t,r){var n=!1,i=Kf,o=t.contextType;return typeof o=="object"&&o!==null?o=Gl(o):(i=bs(t)?Rm:fa.current,n=t.contextTypes,o=(n=n!=null)?Oy(e,i):Kf),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=nT,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function e$(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&nT.enqueueReplaceState(t,t.state,null)}function Qk(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=vZ,NB(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=Gl(o):(o=bs(t)?Rm:fa.current,i.context=Oy(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Yk(e,t,o,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&nT.enqueueReplaceState(i,i.state,null),wE(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Pb(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Qe(309));var n=r.stateNode}if(!n)throw Error(Qe(147,e));var i=n,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var s=i.refs;s===vZ&&(s=i.refs={}),a===null?delete s[o]:s[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(Qe(284));if(!r._owner)throw Error(Qe(290,e))}return e}function P_(e,t){throw e=Object.prototype.toString.call(t),Error(Qe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function t$(e){var t=e._init;return t(e._payload)}function bZ(e){function t(v,b){if(e){var y=v.deletions;y===null?(v.deletions=[b],v.flags|=16):y.push(b)}}function r(v,b){if(!e)return null;for(;b!==null;)t(v,b),b=b.sibling;return null}function n(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function i(v,b){return v=Df(v,b),v.index=0,v.sibling=null,v}function o(v,b,y){return v.index=y,e?(y=v.alternate,y!==null?(y=y.index,y<b?(v.flags|=2,b):y):(v.flags|=2,b)):(v.flags|=1048576,b)}function a(v){return e&&v.alternate===null&&(v.flags|=2),v}function s(v,b,y,x){return b===null||b.tag!==6?(b=nI(y,v.mode,x),b.return=v,b):(b=i(b,y),b.return=v,b)}function l(v,b,y,x){var S=y.type;return S===_v?d(v,b,y.props.children,x,y.key):b!==null&&(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Kh&&t$(S)===b.type)?(x=i(b,y.props),x.ref=Pb(v,b,y),x.return=v,x):(x=RA(y.type,y.key,y.props,null,v.mode,x),x.ref=Pb(v,b,y),x.return=v,x)}function u(v,b,y,x){return b===null||b.tag!==4||b.stateNode.containerInfo!==y.containerInfo||b.stateNode.implementation!==y.implementation?(b=iI(y,v.mode,x),b.return=v,b):(b=i(b,y.children||[]),b.return=v,b)}function d(v,b,y,x,S){return b===null||b.tag!==7?(b=vm(y,v.mode,x,S),b.return=v,b):(b=i(b,y),b.return=v,b)}function c(v,b,y){if(typeof b=="string"&&b!==""||typeof b=="number")return b=nI(""+b,v.mode,y),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case v_:return y=RA(b.type,b.key,b.props,null,v.mode,y),y.ref=Pb(v,null,b),y.return=v,y;case Sv:return b=iI(b,v.mode,y),b.return=v,b;case Kh:var x=b._init;return c(v,x(b._payload),y)}if(Px(b)||_b(b))return b=vm(b,v.mode,y,null),b.return=v,b;P_(v,b)}return null}function h(v,b,y,x){var S=b!==null?b.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return S!==null?null:s(v,b,""+y,x);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case v_:return y.key===S?l(v,b,y,x):null;case Sv:return y.key===S?u(v,b,y,x):null;case Kh:return S=y._init,h(v,b,S(y._payload),x)}if(Px(y)||_b(y))return S!==null?null:d(v,b,y,x,null);P_(v,y)}return null}function f(v,b,y,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return v=v.get(y)||null,s(b,v,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case v_:return v=v.get(x.key===null?y:x.key)||null,l(b,v,x,S);case Sv:return v=v.get(x.key===null?y:x.key)||null,u(b,v,x,S);case Kh:var w=x._init;return f(v,b,y,w(x._payload),S)}if(Px(x)||_b(x))return v=v.get(y)||null,d(b,v,x,S,null);P_(b,x)}return null}function m(v,b,y,x){for(var S=null,w=null,_=b,C=b=0,E=null;_!==null&&C<y.length;C++){_.index>C?(E=_,_=null):E=_.sibling;var A=h(v,_,y[C],x);if(A===null){_===null&&(_=E);break}e&&_&&A.alternate===null&&t(v,_),b=o(A,b,C),w===null?S=A:w.sibling=A,w=A,_=E}if(C===y.length)return r(v,_),Qn&&Dp(v,C),S;if(_===null){for(;C<y.length;C++)_=c(v,y[C],x),_!==null&&(b=o(_,b,C),w===null?S=_:w.sibling=_,w=_);return Qn&&Dp(v,C),S}for(_=n(v,_);C<y.length;C++)E=f(_,v,C,y[C],x),E!==null&&(e&&E.alternate!==null&&_.delete(E.key===null?C:E.key),b=o(E,b,C),w===null?S=E:w.sibling=E,w=E);return e&&_.forEach(function(M){return t(v,M)}),Qn&&Dp(v,C),S}function p(v,b,y,x){var S=_b(y);if(typeof S!="function")throw Error(Qe(150));if(y=S.call(y),y==null)throw Error(Qe(151));for(var w=S=null,_=b,C=b=0,E=null,A=y.next();_!==null&&!A.done;C++,A=y.next()){_.index>C?(E=_,_=null):E=_.sibling;var M=h(v,_,A.value,x);if(M===null){_===null&&(_=E);break}e&&_&&M.alternate===null&&t(v,_),b=o(M,b,C),w===null?S=M:w.sibling=M,w=M,_=E}if(A.done)return r(v,_),Qn&&Dp(v,C),S;if(_===null){for(;!A.done;C++,A=y.next())A=c(v,A.value,x),A!==null&&(b=o(A,b,C),w===null?S=A:w.sibling=A,w=A);return Qn&&Dp(v,C),S}for(_=n(v,_);!A.done;C++,A=y.next())A=f(_,v,C,A.value,x),A!==null&&(e&&A.alternate!==null&&_.delete(A.key===null?C:A.key),b=o(A,b,C),w===null?S=A:w.sibling=A,w=A);return e&&_.forEach(function(I){return t(v,I)}),Qn&&Dp(v,C),S}function g(v,b,y,x){if(typeof y=="object"&&y!==null&&y.type===_v&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case v_:e:{for(var S=y.key,w=b;w!==null;){if(w.key===S){if(S=y.type,S===_v){if(w.tag===7){r(v,w.sibling),b=i(w,y.props.children),b.return=v,v=b;break e}}else if(w.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Kh&&t$(S)===w.type){r(v,w.sibling),b=i(w,y.props),b.ref=Pb(v,w,y),b.return=v,v=b;break e}r(v,w);break}else t(v,w);w=w.sibling}y.type===_v?(b=vm(y.props.children,v.mode,x,y.key),b.return=v,v=b):(x=RA(y.type,y.key,y.props,null,v.mode,x),x.ref=Pb(v,b,y),x.return=v,v=x)}return a(v);case Sv:e:{for(w=y.key;b!==null;){if(b.key===w)if(b.tag===4&&b.stateNode.containerInfo===y.containerInfo&&b.stateNode.implementation===y.implementation){r(v,b.sibling),b=i(b,y.children||[]),b.return=v,v=b;break e}else{r(v,b);break}else t(v,b);b=b.sibling}b=iI(y,v.mode,x),b.return=v,v=b}return a(v);case Kh:return w=y._init,g(v,b,w(y._payload),x)}if(Px(y))return m(v,b,y,x);if(_b(y))return p(v,b,y,x);P_(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,b!==null&&b.tag===6?(r(v,b.sibling),b=i(b,y),b.return=v,v=b):(r(v,b),b=nI(y,v.mode,x),b.return=v,v=b),a(v)):r(v,b)}return g}var Dy=bZ(!0),xZ=bZ(!1),vS={},Nc=sp(vS),G1=sp(vS),W1=sp(vS);function rm(e){if(e===vS)throw Error(Qe(174));return e}function zB(e,t){switch(Nn(W1,t),Nn(G1,e),Nn(Nc,vS),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Tk(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Tk(t,e)}Hn(Nc),Nn(Nc,t)}function Ry(){Hn(Nc),Hn(G1),Hn(W1)}function wZ(e){rm(W1.current);var t=rm(Nc.current),r=Tk(t,e.type);t!==r&&(Nn(G1,e),Nn(Nc,r))}function BB(e){G1.current===e&&(Hn(Nc),Hn(G1))}var ni=sp(0);function SE(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var QO=[];function FB(){for(var e=0;e<QO.length;e++)QO[e]._workInProgressVersionPrimary=null;QO.length=0}var PA=vh.ReactCurrentDispatcher,ZO=vh.ReactCurrentBatchConfig,Lm=0,ai=null,so=null,_o=null,_E=!1,e1=!1,q1=0,jhe=0;function Xo(){throw Error(Qe(321))}function jB(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ku(e[r],t[r]))return!1;return!0}function UB(e,t,r,n,i,o){if(Lm=o,ai=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,PA.current=e===null||e.memoizedState===null?Hhe:Ghe,e=r(n,i),e1){o=0;do{if(e1=!1,q1=0,25<=o)throw Error(Qe(301));o+=1,_o=so=null,t.updateQueue=null,PA.current=Whe,e=r(n,i)}while(e1)}if(PA.current=CE,t=so!==null&&so.next!==null,Lm=0,_o=so=ai=null,_E=!1,t)throw Error(Qe(300));return e}function $B(){var e=q1!==0;return q1=0,e}function lc(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _o===null?ai.memoizedState=_o=e:_o=_o.next=e,_o}function Wl(){if(so===null){var e=ai.alternate;e=e!==null?e.memoizedState:null}else e=so.next;var t=_o===null?ai.memoizedState:_o.next;if(t!==null)_o=t,so=e;else{if(e===null)throw Error(Qe(310));so=e,e={memoizedState:so.memoizedState,baseState:so.baseState,baseQueue:so.baseQueue,queue:so.queue,next:null},_o===null?ai.memoizedState=_o=e:_o=_o.next=e}return _o}function K1(e,t){return typeof t=="function"?t(e):t}function JO(e){var t=Wl(),r=t.queue;if(r===null)throw Error(Qe(311));r.lastRenderedReducer=e;var n=so,i=n.baseQueue,o=r.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}n.baseQueue=i=o,r.pending=null}if(i!==null){o=i.next,n=n.baseState;var s=a=null,l=null,u=o;do{var d=u.lane;if((Lm&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var c={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=c,a=n):l=l.next=c,ai.lanes|=d,Nm|=d}u=u.next}while(u!==null&&u!==o);l===null?a=n:l.next=s,ku(n,t.memoizedState)||(cs=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do o=i.lane,ai.lanes|=o,Nm|=o,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function eI(e){var t=Wl(),r=t.queue;if(r===null)throw Error(Qe(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,o=t.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do o=e(o,a.action),a=a.next;while(a!==i);ku(o,t.memoizedState)||(cs=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function SZ(){}function _Z(e,t){var r=ai,n=Wl(),i=t(),o=!ku(n.memoizedState,i);if(o&&(n.memoizedState=i,cs=!0),n=n.queue,VB(EZ.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||_o!==null&&_o.memoizedState.tag&1){if(r.flags|=2048,X1(9,AZ.bind(null,r,n,i,t),void 0,null),Oo===null)throw Error(Qe(349));Lm&30||CZ(r,t,i)}return i}function CZ(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ai.updateQueue,t===null?(t={lastEffect:null,stores:null},ai.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function AZ(e,t,r,n){t.value=r,t.getSnapshot=n,MZ(t)&&PZ(e)}function EZ(e,t,r){return r(function(){MZ(t)&&PZ(e)})}function MZ(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ku(e,r)}catch{return!0}}function PZ(e){var t=nh(e,1);t!==null&&Tu(t,e,1,-1)}function r$(e){var t=lc();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:K1,lastRenderedState:e},t.queue=e,e=e.dispatch=Vhe.bind(null,ai,e),[t.memoizedState,e]}function X1(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=ai.updateQueue,t===null?(t={lastEffect:null,stores:null},ai.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function TZ(){return Wl().memoizedState}function TA(e,t,r,n){var i=lc();ai.flags|=e,i.memoizedState=X1(1|t,r,void 0,n===void 0?null:n)}function iT(e,t,r,n){var i=Wl();n=n===void 0?null:n;var o=void 0;if(so!==null){var a=so.memoizedState;if(o=a.destroy,n!==null&&jB(n,a.deps)){i.memoizedState=X1(t,r,o,n);return}}ai.flags|=e,i.memoizedState=X1(1|t,r,o,n)}function n$(e,t){return TA(8390656,8,e,t)}function VB(e,t){return iT(2048,8,e,t)}function OZ(e,t){return iT(4,2,e,t)}function IZ(e,t){return iT(4,4,e,t)}function DZ(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function RZ(e,t,r){return r=r!=null?r.concat([e]):null,iT(4,4,DZ.bind(null,t,e),r)}function HB(){}function kZ(e,t){var r=Wl();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&jB(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function LZ(e,t){var r=Wl();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&jB(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function NZ(e,t,r){return Lm&21?(ku(r,t)||(r=FQ(),ai.lanes|=r,Nm|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,cs=!0),e.memoizedState=r)}function Uhe(e,t){var r=dn;dn=r!==0&&4>r?r:4,e(!0);var n=ZO.transition;ZO.transition={};try{e(!1),t()}finally{dn=r,ZO.transition=n}}function zZ(){return Wl().memoizedState}function $he(e,t,r){var n=If(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},BZ(e))FZ(t,r);else if(r=mZ(e,t,r,n),r!==null){var i=$a();Tu(r,e,n,i),jZ(r,t,n)}}function Vhe(e,t,r){var n=If(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(BZ(e))FZ(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,s=o(a,r);if(i.hasEagerState=!0,i.eagerState=s,ku(s,a)){var l=t.interleaved;l===null?(i.next=i,LB(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}r=mZ(e,t,i,n),r!==null&&(i=$a(),Tu(r,e,n,i),jZ(r,t,n))}}function BZ(e){var t=e.alternate;return e===ai||t!==null&&t===ai}function FZ(e,t){e1=_E=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function jZ(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,wB(e,r)}}var CE={readContext:Gl,useCallback:Xo,useContext:Xo,useEffect:Xo,useImperativeHandle:Xo,useInsertionEffect:Xo,useLayoutEffect:Xo,useMemo:Xo,useReducer:Xo,useRef:Xo,useState:Xo,useDebugValue:Xo,useDeferredValue:Xo,useTransition:Xo,useMutableSource:Xo,useSyncExternalStore:Xo,useId:Xo,unstable_isNewReconciler:!1},Hhe={readContext:Gl,useCallback:function(e,t){return lc().memoizedState=[e,t===void 0?null:t],e},useContext:Gl,useEffect:n$,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,TA(4194308,4,DZ.bind(null,t,e),r)},useLayoutEffect:function(e,t){return TA(4194308,4,e,t)},useInsertionEffect:function(e,t){return TA(4,2,e,t)},useMemo:function(e,t){var r=lc();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=lc();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=$he.bind(null,ai,e),[n.memoizedState,e]},useRef:function(e){var t=lc();return e={current:e},t.memoizedState=e},useState:r$,useDebugValue:HB,useDeferredValue:function(e){return lc().memoizedState=e},useTransition:function(){var e=r$(!1),t=e[0];return e=Uhe.bind(null,e[1]),lc().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ai,i=lc();if(Qn){if(r===void 0)throw Error(Qe(407));r=r()}else{if(r=t(),Oo===null)throw Error(Qe(349));Lm&30||CZ(n,t,r)}i.memoizedState=r;var o={value:r,getSnapshot:t};return i.queue=o,n$(EZ.bind(null,n,o,e),[e]),n.flags|=2048,X1(9,AZ.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=lc(),t=Oo.identifierPrefix;if(Qn){var r=$d,n=Ud;r=(n&~(1<<32-Pu(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=q1++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=jhe++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ghe={readContext:Gl,useCallback:kZ,useContext:Gl,useEffect:VB,useImperativeHandle:RZ,useInsertionEffect:OZ,useLayoutEffect:IZ,useMemo:LZ,useReducer:JO,useRef:TZ,useState:function(){return JO(K1)},useDebugValue:HB,useDeferredValue:function(e){var t=Wl();return NZ(t,so.memoizedState,e)},useTransition:function(){var e=JO(K1)[0],t=Wl().memoizedState;return[e,t]},useMutableSource:SZ,useSyncExternalStore:_Z,useId:zZ,unstable_isNewReconciler:!1},Whe={readContext:Gl,useCallback:kZ,useContext:Gl,useEffect:VB,useImperativeHandle:RZ,useInsertionEffect:OZ,useLayoutEffect:IZ,useMemo:LZ,useReducer:eI,useRef:TZ,useState:function(){return eI(K1)},useDebugValue:HB,useDeferredValue:function(e){var t=Wl();return so===null?t.memoizedState=e:NZ(t,so.memoizedState,e)},useTransition:function(){var e=eI(K1)[0],t=Wl().memoizedState;return[e,t]},useMutableSource:SZ,useSyncExternalStore:_Z,useId:zZ,unstable_isNewReconciler:!1};function ky(e,t){try{var r="",n=t;do r+=xde(n),n=n.return;while(n);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function tI(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Zk(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var qhe=typeof WeakMap=="function"?WeakMap:Map;function UZ(e,t,r){r=Xd(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){EE||(EE=!0,l3=n),Zk(e,t)},r}function $Z(e,t,r){r=Xd(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){Zk(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Zk(e,t),typeof n!="function"&&(Of===null?Of=new Set([this]):Of.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function i$(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new qhe;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=sfe.bind(null,e,t,r),t.then(e,e))}function o$(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function a$(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Xd(-1,1),t.tag=2,Tf(r,t,1))),r.lanes|=1),e)}var Khe=vh.ReactCurrentOwner,cs=!1;function Ea(e,t,r,n){t.child=e===null?xZ(t,null,r,n):Dy(t,e.child,r,n)}function s$(e,t,r,n,i){r=r.render;var o=t.ref;return Yv(t,i),n=UB(e,t,r,n,o,i),r=$B(),e!==null&&!cs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ih(e,t,i)):(Qn&&r&&TB(t),t.flags|=1,Ea(e,t,n,i),t.child)}function l$(e,t,r,n,i){if(e===null){var o=r.type;return typeof o=="function"&&!ZB(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,VZ(e,t,o,n,i)):(e=RA(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var a=o.memoizedProps;if(r=r.compare,r=r!==null?r:U1,r(a,n)&&e.ref===t.ref)return ih(e,t,i)}return t.flags|=1,e=Df(o,n),e.ref=t.ref,e.return=t,t.child=e}function VZ(e,t,r,n,i){if(e!==null){var o=e.memoizedProps;if(U1(o,n)&&e.ref===t.ref)if(cs=!1,t.pendingProps=n=o,(e.lanes&i)!==0)e.flags&131072&&(cs=!0);else return t.lanes=e.lanes,ih(e,t,i)}return Jk(e,t,r,n,i)}function HZ(e,t,r){var n=t.pendingProps,i=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Nn(Rv,js),js|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Nn(Rv,js),js|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,Nn(Rv,js),js|=n}else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,Nn(Rv,js),js|=n;return Ea(e,t,i,r),t.child}function GZ(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Jk(e,t,r,n,i){var o=bs(r)?Rm:fa.current;return o=Oy(t,o),Yv(t,i),r=UB(e,t,r,n,o,i),n=$B(),e!==null&&!cs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ih(e,t,i)):(Qn&&n&&TB(t),t.flags|=1,Ea(e,t,r,i),t.child)}function u$(e,t,r,n,i){if(bs(r)){var o=!0;gE(t)}else o=!1;if(Yv(t,i),t.stateNode===null)OA(e,t),yZ(t,r,n),Qk(t,r,n,i),n=!0;else if(e===null){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=Gl(u):(u=bs(r)?Rm:fa.current,u=Oy(t,u));var d=r.getDerivedStateFromProps,c=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";c||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==n||l!==u)&&e$(t,a,n,u),Xh=!1;var h=t.memoizedState;a.state=h,wE(t,n,a,i),l=t.memoizedState,s!==n||h!==l||ys.current||Xh?(typeof d=="function"&&(Yk(t,r,d,n),l=t.memoizedState),(s=Xh||J5(t,r,s,n,h,l,u))?(c||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),a.props=n,a.state=l,a.context=u,n=s):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,gZ(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:hu(t.type,s),a.props=u,c=t.pendingProps,h=a.context,l=r.contextType,typeof l=="object"&&l!==null?l=Gl(l):(l=bs(r)?Rm:fa.current,l=Oy(t,l));var f=r.getDerivedStateFromProps;(d=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==c||h!==l)&&e$(t,a,n,l),Xh=!1,h=t.memoizedState,a.state=h,wE(t,n,a,i);var m=t.memoizedState;s!==c||h!==m||ys.current||Xh?(typeof f=="function"&&(Yk(t,r,f,n),m=t.memoizedState),(u=Xh||J5(t,r,u,n,h,m,l)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,m,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,m,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=m),a.props=n,a.state=m,a.context=l,n=u):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return e3(e,t,r,n,o,i)}function e3(e,t,r,n,i,o){GZ(e,t);var a=(t.flags&128)!==0;if(!n&&!a)return i&&K5(t,r,!1),ih(e,t,o);n=t.stateNode,Khe.current=t;var s=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&a?(t.child=Dy(t,e.child,null,o),t.child=Dy(t,null,s,o)):Ea(e,t,s,o),t.memoizedState=n.state,i&&K5(t,r,!0),t.child}function WZ(e){var t=e.stateNode;t.pendingContext?q5(e,t.pendingContext,t.pendingContext!==t.context):t.context&&q5(e,t.context,!1),zB(e,t.containerInfo)}function c$(e,t,r,n,i){return Iy(),IB(i),t.flags|=256,Ea(e,t,r,n),t.child}var t3={dehydrated:null,treeContext:null,retryLane:0};function r3(e){return{baseLanes:e,cachePool:null,transitions:null}}function qZ(e,t,r){var n=t.pendingProps,i=ni.current,o=!1,a=(t.flags&128)!==0,s;if((s=a)||(s=e!==null&&e.memoizedState===null?!1:(i&2)!==0),s?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Nn(ni,i&1),e===null)return Kk(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=n.children,e=n.fallback,o?(n=t.mode,o=t.child,a={mode:"hidden",children:a},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=sT(a,n,0,null),e=vm(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=r3(r),t.memoizedState=t3,e):GB(t,a));if(i=e.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return Xhe(e,t,a,n,s,i,r);if(o){o=n.fallback,a=t.mode,i=e.child,s=i.sibling;var l={mode:"hidden",children:n.children};return!(a&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=Df(i,l),n.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=Df(s,o):(o=vm(o,a,r,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,a=e.child.memoizedState,a=a===null?r3(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~r,t.memoizedState=t3,n}return o=e.child,e=o.sibling,n=Df(o,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function GB(e,t){return t=sT({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function T_(e,t,r,n){return n!==null&&IB(n),Dy(t,e.child,null,r),e=GB(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Xhe(e,t,r,n,i,o,a){if(r)return t.flags&256?(t.flags&=-257,n=tI(Error(Qe(422))),T_(e,t,a,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=n.fallback,i=t.mode,n=sT({mode:"visible",children:n.children},i,0,null),o=vm(o,i,a,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,t.mode&1&&Dy(t,e.child,null,a),t.child.memoizedState=r3(a),t.memoizedState=t3,o);if(!(t.mode&1))return T_(e,t,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var s=n.dgst;return n=s,o=Error(Qe(419)),n=tI(o,n,void 0),T_(e,t,a,n)}if(s=(a&e.childLanes)!==0,cs||s){if(n=Oo,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,nh(e,i),Tu(n,e,i,-1))}return QB(),n=tI(Error(Qe(421))),T_(e,t,a,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=lfe.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Ks=Pf(i.nextSibling),Js=t,Qn=!0,gu=null,e!==null&&(Tl[Ol++]=Ud,Tl[Ol++]=$d,Tl[Ol++]=km,Ud=e.id,$d=e.overflow,km=t),t=GB(t,n.children),t.flags|=4096,t)}function d$(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Xk(e.return,t,r)}function rI(e,t,r,n,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function KZ(e,t,r){var n=t.pendingProps,i=n.revealOrder,o=n.tail;if(Ea(e,t,n.children,r),n=ni.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&d$(e,r,t);else if(e.tag===19)d$(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Nn(ni,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&SE(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),rI(t,!1,i,r,o);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&SE(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}rI(t,!0,r,null,o);break;case"together":rI(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function OA(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ih(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Nm|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Qe(153));if(t.child!==null){for(e=t.child,r=Df(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Df(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Yhe(e,t,r){switch(t.tag){case 3:WZ(t),Iy();break;case 5:wZ(t);break;case 1:bs(t.type)&&gE(t);break;case 4:zB(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Nn(bE,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Nn(ni,ni.current&1),t.flags|=128,null):r&t.child.childLanes?qZ(e,t,r):(Nn(ni,ni.current&1),e=ih(e,t,r),e!==null?e.sibling:null);Nn(ni,ni.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return KZ(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Nn(ni,ni.current),n)break;return null;case 22:case 23:return t.lanes=0,HZ(e,t,r)}return ih(e,t,r)}var XZ,n3,YZ,QZ;XZ=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};n3=function(){};YZ=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,rm(Nc.current);var o=null;switch(r){case"input":i=Ak(e,i),n=Ak(e,n),o=[];break;case"select":i=ui({},i,{value:void 0}),n=ui({},n,{value:void 0}),o=[];break;case"textarea":i=Pk(e,i),n=Pk(e,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=pE)}Ok(r,n);var a;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var s=i[u];for(a in s)s.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(k1.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in n){var l=n[u];if(s=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(a in s)!s.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in l)l.hasOwnProperty(a)&&s[a]!==l[a]&&(r||(r={}),r[a]=l[a])}else r||(o||(o=[]),o.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(k1.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&jn("scroll",e),o||s===l||(o=[])):(o=o||[]).push(u,l))}r&&(o=o||[]).push("style",r);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};QZ=function(e,t,r,n){r!==n&&(t.flags|=4)};function Tb(e,t){if(!Qn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Yo(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Qhe(e,t,r){var n=t.pendingProps;switch(OB(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yo(t),null;case 1:return bs(t.type)&&mE(),Yo(t),null;case 3:return n=t.stateNode,Ry(),Hn(ys),Hn(fa),FB(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(M_(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,gu!==null&&(d3(gu),gu=null))),n3(e,t),Yo(t),null;case 5:BB(t);var i=rm(W1.current);if(r=t.type,e!==null&&t.stateNode!=null)YZ(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Qe(166));return Yo(t),null}if(e=rm(Nc.current),M_(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[Sc]=t,n[H1]=o,e=(t.mode&1)!==0,r){case"dialog":jn("cancel",n),jn("close",n);break;case"iframe":case"object":case"embed":jn("load",n);break;case"video":case"audio":for(i=0;i<Ox.length;i++)jn(Ox[i],n);break;case"source":jn("error",n);break;case"img":case"image":case"link":jn("error",n),jn("load",n);break;case"details":jn("toggle",n);break;case"input":x5(n,o),jn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},jn("invalid",n);break;case"textarea":S5(n,o),jn("invalid",n)}Ok(r,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?n.textContent!==s&&(o.suppressHydrationWarning!==!0&&E_(n.textContent,s,e),i=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&E_(n.textContent,s,e),i=["children",""+s]):k1.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&jn("scroll",n)}switch(r){case"input":y_(n),w5(n,o,!0);break;case"textarea":y_(n),_5(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=pE)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=CQ(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[Sc]=t,e[H1]=n,XZ(e,t,!1,!1),t.stateNode=e;e:{switch(a=Ik(r,n),r){case"dialog":jn("cancel",e),jn("close",e),i=n;break;case"iframe":case"object":case"embed":jn("load",e),i=n;break;case"video":case"audio":for(i=0;i<Ox.length;i++)jn(Ox[i],e);i=n;break;case"source":jn("error",e),i=n;break;case"img":case"image":case"link":jn("error",e),jn("load",e),i=n;break;case"details":jn("toggle",e),i=n;break;case"input":x5(e,n),i=Ak(e,n),jn("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=ui({},n,{value:void 0}),jn("invalid",e);break;case"textarea":S5(e,n),i=Pk(e,n),jn("invalid",e);break;default:i=n}Ok(r,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="style"?MQ(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&AQ(e,l)):o==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&L1(e,l):typeof l=="number"&&L1(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(k1.hasOwnProperty(o)?l!=null&&o==="onScroll"&&jn("scroll",e):l!=null&&mB(e,o,l,a))}switch(r){case"input":y_(e),w5(e,n,!1);break;case"textarea":y_(e),_5(e);break;case"option":n.value!=null&&e.setAttribute("value",""+qf(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?Wv(e,!!n.multiple,o,!1):n.defaultValue!=null&&Wv(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=pE)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Yo(t),null;case 6:if(e&&t.stateNode!=null)QZ(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Qe(166));if(r=rm(W1.current),rm(Nc.current),M_(t)){if(n=t.stateNode,r=t.memoizedProps,n[Sc]=t,(o=n.nodeValue!==r)&&(e=Js,e!==null))switch(e.tag){case 3:E_(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&E_(n.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Sc]=t,t.stateNode=n}return Yo(t),null;case 13:if(Hn(ni),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Qn&&Ks!==null&&t.mode&1&&!(t.flags&128))pZ(),Iy(),t.flags|=98560,o=!1;else if(o=M_(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(Qe(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Qe(317));o[Sc]=t}else Iy(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Yo(t),o=!1}else gu!==null&&(d3(gu),gu=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ni.current&1?lo===0&&(lo=3):QB())),t.updateQueue!==null&&(t.flags|=4),Yo(t),null);case 4:return Ry(),n3(e,t),e===null&&$1(t.stateNode.containerInfo),Yo(t),null;case 10:return kB(t.type._context),Yo(t),null;case 17:return bs(t.type)&&mE(),Yo(t),null;case 19:if(Hn(ni),o=t.memoizedState,o===null)return Yo(t),null;if(n=(t.flags&128)!==0,a=o.rendering,a===null)if(n)Tb(o,!1);else{if(lo!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=SE(e),a!==null){for(t.flags|=128,Tb(o,!1),n=a.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Nn(ni,ni.current&1|2),t.child}e=e.sibling}o.tail!==null&&Pi()>Ly&&(t.flags|=128,n=!0,Tb(o,!1),t.lanes=4194304)}else{if(!n)if(e=SE(a),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Tb(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Qn)return Yo(t),null}else 2*Pi()-o.renderingStartTime>Ly&&r!==1073741824&&(t.flags|=128,n=!0,Tb(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(r=o.last,r!==null?r.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Pi(),t.sibling=null,r=ni.current,Nn(ni,n?r&1|2:r&1),t):(Yo(t),null);case 22:case 23:return YB(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?js&1073741824&&(Yo(t),t.subtreeFlags&6&&(t.flags|=8192)):Yo(t),null;case 24:return null;case 25:return null}throw Error(Qe(156,t.tag))}function Zhe(e,t){switch(OB(t),t.tag){case 1:return bs(t.type)&&mE(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ry(),Hn(ys),Hn(fa),FB(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return BB(t),null;case 13:if(Hn(ni),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Qe(340));Iy()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Hn(ni),null;case 4:return Ry(),null;case 10:return kB(t.type._context),null;case 22:case 23:return YB(),null;case 24:return null;default:return null}}var O_=!1,na=!1,Jhe=typeof WeakSet=="function"?WeakSet:Set,_t=null;function Dv(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){gi(e,t,n)}else r.current=null}function i3(e,t,r){try{r()}catch(n){gi(e,t,n)}}var h$=!1;function efe(e,t){if(Uk=dE,e=tZ(),PB(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var a=0,s=-1,l=-1,u=0,d=0,c=e,h=null;t:for(;;){for(var f;c!==r||i!==0&&c.nodeType!==3||(s=a+i),c!==o||n!==0&&c.nodeType!==3||(l=a+n),c.nodeType===3&&(a+=c.nodeValue.length),(f=c.firstChild)!==null;)h=c,c=f;for(;;){if(c===e)break t;if(h===r&&++u===i&&(s=a),h===o&&++d===n&&(l=a),(f=c.nextSibling)!==null)break;c=h,h=c.parentNode}c=f}r=s===-1||l===-1?null:{start:s,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for($k={focusedElem:e,selectionRange:r},dE=!1,_t=t;_t!==null;)if(t=_t,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,_t=e;else for(;_t!==null;){t=_t;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var p=m.memoizedProps,g=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?p:hu(t.type,p),g);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Qe(163))}}catch(x){gi(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,_t=e;break}_t=t.return}return m=h$,h$=!1,m}function t1(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&i3(t,r,o)}i=i.next}while(i!==n)}}function oT(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function o3(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function ZZ(e){var t=e.alternate;t!==null&&(e.alternate=null,ZZ(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Sc],delete t[H1],delete t[Gk],delete t[Nhe],delete t[zhe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function JZ(e){return e.tag===5||e.tag===3||e.tag===4}function f$(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||JZ(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function a3(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=pE));else if(n!==4&&(e=e.child,e!==null))for(a3(e,t,r),e=e.sibling;e!==null;)a3(e,t,r),e=e.sibling}function s3(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(s3(e,t,r),e=e.sibling;e!==null;)s3(e,t,r),e=e.sibling}var Uo=null,fu=!1;function Ah(e,t,r){for(r=r.child;r!==null;)eJ(e,t,r),r=r.sibling}function eJ(e,t,r){if(Lc&&typeof Lc.onCommitFiberUnmount=="function")try{Lc.onCommitFiberUnmount(QP,r)}catch{}switch(r.tag){case 5:na||Dv(r,t);case 6:var n=Uo,i=fu;Uo=null,Ah(e,t,r),Uo=n,fu=i,Uo!==null&&(fu?(e=Uo,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Uo.removeChild(r.stateNode));break;case 18:Uo!==null&&(fu?(e=Uo,r=r.stateNode,e.nodeType===8?XO(e.parentNode,r):e.nodeType===1&&XO(e,r),F1(e)):XO(Uo,r.stateNode));break;case 4:n=Uo,i=fu,Uo=r.stateNode.containerInfo,fu=!0,Ah(e,t,r),Uo=n,fu=i;break;case 0:case 11:case 14:case 15:if(!na&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&i3(r,t,a),i=i.next}while(i!==n)}Ah(e,t,r);break;case 1:if(!na&&(Dv(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){gi(r,t,s)}Ah(e,t,r);break;case 21:Ah(e,t,r);break;case 22:r.mode&1?(na=(n=na)||r.memoizedState!==null,Ah(e,t,r),na=n):Ah(e,t,r);break;default:Ah(e,t,r)}}function p$(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Jhe),t.forEach(function(n){var i=ufe.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function eu(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var o=e,a=t,s=a;e:for(;s!==null;){switch(s.tag){case 5:Uo=s.stateNode,fu=!1;break e;case 3:Uo=s.stateNode.containerInfo,fu=!0;break e;case 4:Uo=s.stateNode.containerInfo,fu=!0;break e}s=s.return}if(Uo===null)throw Error(Qe(160));eJ(o,a,i),Uo=null,fu=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){gi(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)tJ(t,e),t=t.sibling}function tJ(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(eu(t,e),qu(e),n&4){try{t1(3,e,e.return),oT(3,e)}catch(p){gi(e,e.return,p)}try{t1(5,e,e.return)}catch(p){gi(e,e.return,p)}}break;case 1:eu(t,e),qu(e),n&512&&r!==null&&Dv(r,r.return);break;case 5:if(eu(t,e),qu(e),n&512&&r!==null&&Dv(r,r.return),e.flags&32){var i=e.stateNode;try{L1(i,"")}catch(p){gi(e,e.return,p)}}if(n&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,a=r!==null?r.memoizedProps:o,s=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&SQ(i,o),Ik(s,a);var u=Ik(s,o);for(a=0;a<l.length;a+=2){var d=l[a],c=l[a+1];d==="style"?MQ(i,c):d==="dangerouslySetInnerHTML"?AQ(i,c):d==="children"?L1(i,c):mB(i,d,c,u)}switch(s){case"input":Ek(i,o);break;case"textarea":_Q(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var f=o.value;f!=null?Wv(i,!!o.multiple,f,!1):h!==!!o.multiple&&(o.defaultValue!=null?Wv(i,!!o.multiple,o.defaultValue,!0):Wv(i,!!o.multiple,o.multiple?[]:"",!1))}i[H1]=o}catch(p){gi(e,e.return,p)}}break;case 6:if(eu(t,e),qu(e),n&4){if(e.stateNode===null)throw Error(Qe(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(p){gi(e,e.return,p)}}break;case 3:if(eu(t,e),qu(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{F1(t.containerInfo)}catch(p){gi(e,e.return,p)}break;case 4:eu(t,e),qu(e);break;case 13:eu(t,e),qu(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(KB=Pi())),n&4&&p$(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(na=(u=na)||d,eu(t,e),na=u):eu(t,e),qu(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(_t=e,d=e.child;d!==null;){for(c=_t=d;_t!==null;){switch(h=_t,f=h.child,h.tag){case 0:case 11:case 14:case 15:t1(4,h,h.return);break;case 1:Dv(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(p){gi(n,r,p)}}break;case 5:Dv(h,h.return);break;case 22:if(h.memoizedState!==null){g$(c);continue}}f!==null?(f.return=h,_t=f):g$(c)}d=d.sibling}e:for(d=null,c=e;;){if(c.tag===5){if(d===null){d=c;try{i=c.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=c.stateNode,l=c.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=EQ("display",a))}catch(p){gi(e,e.return,p)}}}else if(c.tag===6){if(d===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(p){gi(e,e.return,p)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===e)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===e)break e;for(;c.sibling===null;){if(c.return===null||c.return===e)break e;d===c&&(d=null),c=c.return}d===c&&(d=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:eu(t,e),qu(e),n&4&&p$(e);break;case 21:break;default:eu(t,e),qu(e)}}function qu(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(JZ(r)){var n=r;break e}r=r.return}throw Error(Qe(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(L1(i,""),n.flags&=-33);var o=f$(e);s3(e,o,i);break;case 3:case 4:var a=n.stateNode.containerInfo,s=f$(e);a3(e,s,a);break;default:throw Error(Qe(161))}}catch(l){gi(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function tfe(e,t,r){_t=e,rJ(e)}function rJ(e,t,r){for(var n=(e.mode&1)!==0;_t!==null;){var i=_t,o=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||O_;if(!a){var s=i.alternate,l=s!==null&&s.memoizedState!==null||na;s=O_;var u=na;if(O_=a,(na=l)&&!u)for(_t=i;_t!==null;)a=_t,l=a.child,a.tag===22&&a.memoizedState!==null?v$(i):l!==null?(l.return=a,_t=l):v$(i);for(;o!==null;)_t=o,rJ(o),o=o.sibling;_t=i,O_=s,na=u}m$(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,_t=o):m$(e)}}function m$(e){for(;_t!==null;){var t=_t;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:na||oT(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!na)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:hu(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Z5(t,o,n);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Z5(t,a,r)}break;case 5:var s=t.stateNode;if(r===null&&t.flags&4){r=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var c=d.dehydrated;c!==null&&F1(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Qe(163))}na||t.flags&512&&o3(t)}catch(h){gi(t,t.return,h)}}if(t===e){_t=null;break}if(r=t.sibling,r!==null){r.return=t.return,_t=r;break}_t=t.return}}function g$(e){for(;_t!==null;){var t=_t;if(t===e){_t=null;break}var r=t.sibling;if(r!==null){r.return=t.return,_t=r;break}_t=t.return}}function v$(e){for(;_t!==null;){var t=_t;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{oT(4,t)}catch(l){gi(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(l){gi(t,i,l)}}var o=t.return;try{o3(t)}catch(l){gi(t,o,l)}break;case 5:var a=t.return;try{o3(t)}catch(l){gi(t,a,l)}}}catch(l){gi(t,t.return,l)}if(t===e){_t=null;break}var s=t.sibling;if(s!==null){s.return=t.return,_t=s;break}_t=t.return}}var rfe=Math.ceil,AE=vh.ReactCurrentDispatcher,WB=vh.ReactCurrentOwner,Bl=vh.ReactCurrentBatchConfig,Hr=0,Oo=null,Hi=null,Go=0,js=0,Rv=sp(0),lo=0,Y1=null,Nm=0,aT=0,qB=0,r1=null,ns=null,KB=0,Ly=1/0,Pd=null,EE=!1,l3=null,Of=null,I_=!1,uf=null,ME=0,n1=0,u3=null,IA=-1,DA=0;function $a(){return Hr&6?Pi():IA!==-1?IA:IA=Pi()}function If(e){return e.mode&1?Hr&2&&Go!==0?Go&-Go:Fhe.transition!==null?(DA===0&&(DA=FQ()),DA):(e=dn,e!==0||(e=window.event,e=e===void 0?16:WQ(e.type)),e):1}function Tu(e,t,r,n){if(50<n1)throw n1=0,u3=null,Error(Qe(185));pS(e,r,n),(!(Hr&2)||e!==Oo)&&(e===Oo&&(!(Hr&2)&&(aT|=r),lo===4&&tf(e,Go)),xs(e,n),r===1&&Hr===0&&!(t.mode&1)&&(Ly=Pi()+500,rT&&lp()))}function xs(e,t){var r=e.callbackNode;Fde(e,t);var n=cE(e,e===Oo?Go:0);if(n===0)r!==null&&E5(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&E5(r),t===1)e.tag===0?Bhe(y$.bind(null,e)):dZ(y$.bind(null,e)),khe(function(){!(Hr&6)&&lp()}),r=null;else{switch(jQ(n)){case 1:r=xB;break;case 4:r=zQ;break;case 16:r=uE;break;case 536870912:r=BQ;break;default:r=uE}r=cJ(r,nJ.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function nJ(e,t){if(IA=-1,DA=0,Hr&6)throw Error(Qe(327));var r=e.callbackNode;if(Qv()&&e.callbackNode!==r)return null;var n=cE(e,e===Oo?Go:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=PE(e,n);else{t=n;var i=Hr;Hr|=2;var o=oJ();(Oo!==e||Go!==t)&&(Pd=null,Ly=Pi()+500,gm(e,t));do try{ofe();break}catch(s){iJ(e,s)}while(1);RB(),AE.current=o,Hr=i,Hi!==null?t=0:(Oo=null,Go=0,t=lo)}if(t!==0){if(t===2&&(i=Nk(e),i!==0&&(n=i,t=c3(e,i))),t===1)throw r=Y1,gm(e,0),tf(e,n),xs(e,Pi()),r;if(t===6)tf(e,n);else{if(i=e.current.alternate,!(n&30)&&!nfe(i)&&(t=PE(e,n),t===2&&(o=Nk(e),o!==0&&(n=o,t=c3(e,o))),t===1))throw r=Y1,gm(e,0),tf(e,n),xs(e,Pi()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(Qe(345));case 2:Rp(e,ns,Pd);break;case 3:if(tf(e,n),(n&130023424)===n&&(t=KB+500-Pi(),10<t)){if(cE(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){$a(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Hk(Rp.bind(null,e,ns,Pd),t);break}Rp(e,ns,Pd);break;case 4:if(tf(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var a=31-Pu(n);o=1<<a,a=t[a],a>i&&(i=a),n&=~o}if(n=i,n=Pi()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*rfe(n/1960))-n,10<n){e.timeoutHandle=Hk(Rp.bind(null,e,ns,Pd),n);break}Rp(e,ns,Pd);break;case 5:Rp(e,ns,Pd);break;default:throw Error(Qe(329))}}}return xs(e,Pi()),e.callbackNode===r?nJ.bind(null,e):null}function c3(e,t){var r=r1;return e.current.memoizedState.isDehydrated&&(gm(e,t).flags|=256),e=PE(e,t),e!==2&&(t=ns,ns=r,t!==null&&d3(t)),e}function d3(e){ns===null?ns=e:ns.push.apply(ns,e)}function nfe(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!ku(o(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function tf(e,t){for(t&=~qB,t&=~aT,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Pu(t),n=1<<r;e[r]=-1,t&=~n}}function y$(e){if(Hr&6)throw Error(Qe(327));Qv();var t=cE(e,0);if(!(t&1))return xs(e,Pi()),null;var r=PE(e,t);if(e.tag!==0&&r===2){var n=Nk(e);n!==0&&(t=n,r=c3(e,n))}if(r===1)throw r=Y1,gm(e,0),tf(e,t),xs(e,Pi()),r;if(r===6)throw Error(Qe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Rp(e,ns,Pd),xs(e,Pi()),null}function XB(e,t){var r=Hr;Hr|=1;try{return e(t)}finally{Hr=r,Hr===0&&(Ly=Pi()+500,rT&&lp())}}function zm(e){uf!==null&&uf.tag===0&&!(Hr&6)&&Qv();var t=Hr;Hr|=1;var r=Bl.transition,n=dn;try{if(Bl.transition=null,dn=1,e)return e()}finally{dn=n,Bl.transition=r,Hr=t,!(Hr&6)&&lp()}}function YB(){js=Rv.current,Hn(Rv)}function gm(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Rhe(r)),Hi!==null)for(r=Hi.return;r!==null;){var n=r;switch(OB(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&mE();break;case 3:Ry(),Hn(ys),Hn(fa),FB();break;case 5:BB(n);break;case 4:Ry();break;case 13:Hn(ni);break;case 19:Hn(ni);break;case 10:kB(n.type._context);break;case 22:case 23:YB()}r=r.return}if(Oo=e,Hi=e=Df(e.current,null),Go=js=t,lo=0,Y1=null,qB=aT=Nm=0,ns=r1=null,tm!==null){for(t=0;t<tm.length;t++)if(r=tm[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,o=r.pending;if(o!==null){var a=o.next;o.next=i,n.next=a}r.pending=n}tm=null}return e}function iJ(e,t){do{var r=Hi;try{if(RB(),PA.current=CE,_E){for(var n=ai.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}_E=!1}if(Lm=0,_o=so=ai=null,e1=!1,q1=0,WB.current=null,r===null||r.return===null){lo=1,Y1=t,Hi=null;break}e:{var o=e,a=r.return,s=r,l=t;if(t=Go,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=s,c=d.tag;if(!(d.mode&1)&&(c===0||c===11||c===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=o$(a);if(f!==null){f.flags&=-257,a$(f,a,s,o,t),f.mode&1&&i$(o,u,t),t=f,l=u;var m=t.updateQueue;if(m===null){var p=new Set;p.add(l),t.updateQueue=p}else m.add(l);break e}else{if(!(t&1)){i$(o,u,t),QB();break e}l=Error(Qe(426))}}else if(Qn&&s.mode&1){var g=o$(a);if(g!==null){!(g.flags&65536)&&(g.flags|=256),a$(g,a,s,o,t),IB(ky(l,s));break e}}o=l=ky(l,s),lo!==4&&(lo=2),r1===null?r1=[o]:r1.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var v=UZ(o,l,t);Q5(o,v);break e;case 1:s=l;var b=o.type,y=o.stateNode;if(!(o.flags&128)&&(typeof b.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Of===null||!Of.has(y)))){o.flags|=65536,t&=-t,o.lanes|=t;var x=$Z(o,s,t);Q5(o,x);break e}}o=o.return}while(o!==null)}sJ(r)}catch(S){t=S,Hi===r&&r!==null&&(Hi=r=r.return);continue}break}while(1)}function oJ(){var e=AE.current;return AE.current=CE,e===null?CE:e}function QB(){(lo===0||lo===3||lo===2)&&(lo=4),Oo===null||!(Nm&268435455)&&!(aT&268435455)||tf(Oo,Go)}function PE(e,t){var r=Hr;Hr|=2;var n=oJ();(Oo!==e||Go!==t)&&(Pd=null,gm(e,t));do try{ife();break}catch(i){iJ(e,i)}while(1);if(RB(),Hr=r,AE.current=n,Hi!==null)throw Error(Qe(261));return Oo=null,Go=0,lo}function ife(){for(;Hi!==null;)aJ(Hi)}function ofe(){for(;Hi!==null&&!Ode();)aJ(Hi)}function aJ(e){var t=uJ(e.alternate,e,js);e.memoizedProps=e.pendingProps,t===null?sJ(e):Hi=t,WB.current=null}function sJ(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Zhe(r,t),r!==null){r.flags&=32767,Hi=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{lo=6,Hi=null;return}}else if(r=Qhe(r,t,js),r!==null){Hi=r;return}if(t=t.sibling,t!==null){Hi=t;return}Hi=t=e}while(t!==null);lo===0&&(lo=5)}function Rp(e,t,r){var n=dn,i=Bl.transition;try{Bl.transition=null,dn=1,afe(e,t,r,n)}finally{Bl.transition=i,dn=n}return null}function afe(e,t,r,n){do Qv();while(uf!==null);if(Hr&6)throw Error(Qe(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Qe(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(jde(e,o),e===Oo&&(Hi=Oo=null,Go=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||I_||(I_=!0,cJ(uE,function(){return Qv(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Bl.transition,Bl.transition=null;var a=dn;dn=1;var s=Hr;Hr|=4,WB.current=null,efe(e,r),tJ(r,e),Ehe($k),dE=!!Uk,$k=Uk=null,e.current=r,tfe(r),Ide(),Hr=s,dn=a,Bl.transition=o}else e.current=r;if(I_&&(I_=!1,uf=e,ME=i),o=e.pendingLanes,o===0&&(Of=null),kde(r.stateNode),xs(e,Pi()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(EE)throw EE=!1,e=l3,l3=null,e;return ME&1&&e.tag!==0&&Qv(),o=e.pendingLanes,o&1?e===u3?n1++:(n1=0,u3=e):n1=0,lp(),null}function Qv(){if(uf!==null){var e=jQ(ME),t=Bl.transition,r=dn;try{if(Bl.transition=null,dn=16>e?16:e,uf===null)var n=!1;else{if(e=uf,uf=null,ME=0,Hr&6)throw Error(Qe(331));var i=Hr;for(Hr|=4,_t=e.current;_t!==null;){var o=_t,a=o.child;if(_t.flags&16){var s=o.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(_t=u;_t!==null;){var d=_t;switch(d.tag){case 0:case 11:case 15:t1(8,d,o)}var c=d.child;if(c!==null)c.return=d,_t=c;else for(;_t!==null;){d=_t;var h=d.sibling,f=d.return;if(ZZ(d),d===u){_t=null;break}if(h!==null){h.return=f,_t=h;break}_t=f}}}var m=o.alternate;if(m!==null){var p=m.child;if(p!==null){m.child=null;do{var g=p.sibling;p.sibling=null,p=g}while(p!==null)}}_t=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,_t=a;else e:for(;_t!==null;){if(o=_t,o.flags&2048)switch(o.tag){case 0:case 11:case 15:t1(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,_t=v;break e}_t=o.return}}var b=e.current;for(_t=b;_t!==null;){a=_t;var y=a.child;if(a.subtreeFlags&2064&&y!==null)y.return=a,_t=y;else e:for(a=b;_t!==null;){if(s=_t,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:oT(9,s)}}catch(S){gi(s,s.return,S)}if(s===a){_t=null;break e}var x=s.sibling;if(x!==null){x.return=s.return,_t=x;break e}_t=s.return}}if(Hr=i,lp(),Lc&&typeof Lc.onPostCommitFiberRoot=="function")try{Lc.onPostCommitFiberRoot(QP,e)}catch{}n=!0}return n}finally{dn=r,Bl.transition=t}}return!1}function b$(e,t,r){t=ky(r,t),t=UZ(e,t,1),e=Tf(e,t,1),t=$a(),e!==null&&(pS(e,1,t),xs(e,t))}function gi(e,t,r){if(e.tag===3)b$(e,e,r);else for(;t!==null;){if(t.tag===3){b$(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Of===null||!Of.has(n))){e=ky(r,e),e=$Z(t,e,1),t=Tf(t,e,1),e=$a(),t!==null&&(pS(t,1,e),xs(t,e));break}}t=t.return}}function sfe(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=$a(),e.pingedLanes|=e.suspendedLanes&r,Oo===e&&(Go&r)===r&&(lo===4||lo===3&&(Go&130023424)===Go&&500>Pi()-KB?gm(e,0):qB|=r),xs(e,t)}function lJ(e,t){t===0&&(e.mode&1?(t=w_,w_<<=1,!(w_&130023424)&&(w_=4194304)):t=1);var r=$a();e=nh(e,t),e!==null&&(pS(e,t,r),xs(e,r))}function lfe(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),lJ(e,r)}function ufe(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Qe(314))}n!==null&&n.delete(t),lJ(e,r)}var uJ;uJ=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ys.current)cs=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return cs=!1,Yhe(e,t,r);cs=!!(e.flags&131072)}else cs=!1,Qn&&t.flags&1048576&&hZ(t,yE,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;OA(e,t),e=t.pendingProps;var i=Oy(t,fa.current);Yv(t,r),i=UB(null,t,n,e,i,r);var o=$B();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,bs(n)?(o=!0,gE(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,NB(t),i.updater=nT,t.stateNode=i,i._reactInternals=t,Qk(t,n,e,r),t=e3(null,t,n,!0,o,r)):(t.tag=0,Qn&&o&&TB(t),Ea(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(OA(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=dfe(n),e=hu(n,e),i){case 0:t=Jk(null,t,n,e,r);break e;case 1:t=u$(null,t,n,e,r);break e;case 11:t=s$(null,t,n,e,r);break e;case 14:t=l$(null,t,n,hu(n.type,e),r);break e}throw Error(Qe(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:hu(n,i),Jk(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:hu(n,i),u$(e,t,n,i,r);case 3:e:{if(WZ(t),e===null)throw Error(Qe(387));n=t.pendingProps,o=t.memoizedState,i=o.element,gZ(e,t),wE(t,n,null,r);var a=t.memoizedState;if(n=a.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=ky(Error(Qe(423)),t),t=c$(e,t,n,r,i);break e}else if(n!==i){i=ky(Error(Qe(424)),t),t=c$(e,t,n,r,i);break e}else for(Ks=Pf(t.stateNode.containerInfo.firstChild),Js=t,Qn=!0,gu=null,r=xZ(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Iy(),n===i){t=ih(e,t,r);break e}Ea(e,t,n,r)}t=t.child}return t;case 5:return wZ(t),e===null&&Kk(t),n=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,a=i.children,Vk(n,i)?a=null:o!==null&&Vk(n,o)&&(t.flags|=32),GZ(e,t),Ea(e,t,a,r),t.child;case 6:return e===null&&Kk(t),null;case 13:return qZ(e,t,r);case 4:return zB(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Dy(t,null,n,r):Ea(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:hu(n,i),s$(e,t,n,i,r);case 7:return Ea(e,t,t.pendingProps,r),t.child;case 8:return Ea(e,t,t.pendingProps.children,r),t.child;case 12:return Ea(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Nn(bE,n._currentValue),n._currentValue=a,o!==null)if(ku(o.value,a)){if(o.children===i.children&&!ys.current){t=ih(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var l=s.firstContext;l!==null;){if(l.context===n){if(o.tag===1){l=Xd(-1,r&-r),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Xk(o.return,r,t),s.lanes|=r;break}l=l.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(Qe(341));a.lanes|=r,s=a.alternate,s!==null&&(s.lanes|=r),Xk(a,r,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Ea(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Yv(t,r),i=Gl(i),n=n(i),t.flags|=1,Ea(e,t,n,r),t.child;case 14:return n=t.type,i=hu(n,t.pendingProps),i=hu(n.type,i),l$(e,t,n,i,r);case 15:return VZ(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:hu(n,i),OA(e,t),t.tag=1,bs(n)?(e=!0,gE(t)):e=!1,Yv(t,r),yZ(t,n,i),Qk(t,n,i,r),e3(null,t,n,!0,e,r);case 19:return KZ(e,t,r);case 22:return HZ(e,t,r)}throw Error(Qe(156,t.tag))};function cJ(e,t){return NQ(e,t)}function cfe(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ll(e,t,r,n){return new cfe(e,t,r,n)}function ZB(e){return e=e.prototype,!(!e||!e.isReactComponent)}function dfe(e){if(typeof e=="function")return ZB(e)?1:0;if(e!=null){if(e=e.$$typeof,e===vB)return 11;if(e===yB)return 14}return 2}function Df(e,t){var r=e.alternate;return r===null?(r=Ll(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function RA(e,t,r,n,i,o){var a=2;if(n=e,typeof e=="function")ZB(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case _v:return vm(r.children,i,o,t);case gB:a=8,i|=8;break;case wk:return e=Ll(12,r,t,i|2),e.elementType=wk,e.lanes=o,e;case Sk:return e=Ll(13,r,t,i),e.elementType=Sk,e.lanes=o,e;case _k:return e=Ll(19,r,t,i),e.elementType=_k,e.lanes=o,e;case bQ:return sT(r,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case vQ:a=10;break e;case yQ:a=9;break e;case vB:a=11;break e;case yB:a=14;break e;case Kh:a=16,n=null;break e}throw Error(Qe(130,e==null?e:typeof e,""))}return t=Ll(a,r,t,i),t.elementType=e,t.type=n,t.lanes=o,t}function vm(e,t,r,n){return e=Ll(7,e,n,t),e.lanes=r,e}function sT(e,t,r,n){return e=Ll(22,e,n,t),e.elementType=bQ,e.lanes=r,e.stateNode={isHidden:!1},e}function nI(e,t,r){return e=Ll(6,e,null,t),e.lanes=r,e}function iI(e,t,r){return t=Ll(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function hfe(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=BO(0),this.expirationTimes=BO(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=BO(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function JB(e,t,r,n,i,o,a,s,l){return e=new hfe(e,t,r,s,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Ll(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},NB(o),e}function ffe(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Sv,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function dJ(e){if(!e)return Kf;e=e._reactInternals;e:{if(rg(e)!==e||e.tag!==1)throw Error(Qe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(bs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Qe(171))}if(e.tag===1){var r=e.type;if(bs(r))return cZ(e,r,t)}return t}function hJ(e,t,r,n,i,o,a,s,l){return e=JB(r,n,!0,e,i,o,a,s,l),e.context=dJ(null),r=e.current,n=$a(),i=If(r),o=Xd(n,i),o.callback=t??null,Tf(r,o,i),e.current.lanes=i,pS(e,i,n),xs(e,n),e}function lT(e,t,r,n){var i=t.current,o=$a(),a=If(i);return r=dJ(r),t.context===null?t.context=r:t.pendingContext=r,t=Xd(o,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Tf(i,t,a),e!==null&&(Tu(e,i,a,o),MA(e,i,a)),a}function TE(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function x$(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function eF(e,t){x$(e,t),(e=e.alternate)&&x$(e,t)}function pfe(){return null}var fJ=typeof reportError=="function"?reportError:function(e){console.error(e)};function tF(e){this._internalRoot=e}uT.prototype.render=tF.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Qe(409));lT(e,t,null,null)};uT.prototype.unmount=tF.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;zm(function(){lT(null,e,null,null)}),t[rh]=null}};function uT(e){this._internalRoot=e}uT.prototype.unstable_scheduleHydration=function(e){if(e){var t=VQ();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ef.length&&t!==0&&t<ef[r].priority;r++);ef.splice(r,0,e),r===0&&GQ(e)}};function rF(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function cT(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function w$(){}function mfe(e,t,r,n,i){if(i){if(typeof n=="function"){var o=n;n=function(){var u=TE(a);o.call(u)}}var a=hJ(t,n,e,0,null,!1,!1,"",w$);return e._reactRootContainer=a,e[rh]=a.current,$1(e.nodeType===8?e.parentNode:e),zm(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var s=n;n=function(){var u=TE(l);s.call(u)}}var l=JB(e,0,!1,null,null,!1,!1,"",w$);return e._reactRootContainer=l,e[rh]=l.current,$1(e.nodeType===8?e.parentNode:e),zm(function(){lT(t,l,r,n)}),l}function dT(e,t,r,n,i){var o=r._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var l=TE(a);s.call(l)}}lT(t,a,e,i)}else a=mfe(r,t,e,i,n);return TE(a)}UQ=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Tx(t.pendingLanes);r!==0&&(wB(t,r|1),xs(t,Pi()),!(Hr&6)&&(Ly=Pi()+500,lp()))}break;case 13:zm(function(){var n=nh(e,1);if(n!==null){var i=$a();Tu(n,e,1,i)}}),eF(e,1)}};SB=function(e){if(e.tag===13){var t=nh(e,134217728);if(t!==null){var r=$a();Tu(t,e,134217728,r)}eF(e,134217728)}};$Q=function(e){if(e.tag===13){var t=If(e),r=nh(e,t);if(r!==null){var n=$a();Tu(r,e,t,n)}eF(e,t)}};VQ=function(){return dn};HQ=function(e,t){var r=dn;try{return dn=e,t()}finally{dn=r}};Rk=function(e,t,r){switch(t){case"input":if(Ek(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=tT(n);if(!i)throw Error(Qe(90));wQ(n),Ek(n,i)}}}break;case"textarea":_Q(e,r);break;case"select":t=r.value,t!=null&&Wv(e,!!r.multiple,t,!1)}};OQ=XB;IQ=zm;var gfe={usingClientEntryPoint:!1,Events:[gS,Mv,tT,PQ,TQ,XB]},Ob={findFiberByHostInstance:em,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vfe={bundleType:Ob.bundleType,version:Ob.version,rendererPackageName:Ob.rendererPackageName,rendererConfig:Ob.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vh.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=kQ(e),e===null?null:e.stateNode},findFiberByHostInstance:Ob.findFiberByHostInstance||pfe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var D_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!D_.isDisabled&&D_.supportsFiber)try{QP=D_.inject(vfe),Lc=D_}catch{}}il.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gfe;il.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rF(t))throw Error(Qe(200));return ffe(e,t,null,r)};il.createRoot=function(e,t){if(!rF(e))throw Error(Qe(299));var r=!1,n="",i=fJ;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=JB(e,1,!1,null,null,r,!1,n,i),e[rh]=t.current,$1(e.nodeType===8?e.parentNode:e),new tF(t)};il.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Qe(188)):(e=Object.keys(e).join(","),Error(Qe(268,e)));return e=kQ(t),e=e===null?null:e.stateNode,e};il.flushSync=function(e){return zm(e)};il.hydrate=function(e,t,r){if(!cT(t))throw Error(Qe(200));return dT(null,e,t,!0,r)};il.hydrateRoot=function(e,t,r){if(!rF(e))throw Error(Qe(405));var n=r!=null&&r.hydratedSources||null,i=!1,o="",a=fJ;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),t=hJ(t,null,e,1,r??null,i,!1,o,a),e[rh]=t.current,$1(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new uT(t)};il.render=function(e,t,r){if(!cT(t))throw Error(Qe(200));return dT(null,e,t,!1,r)};il.unmountComponentAtNode=function(e){if(!cT(e))throw Error(Qe(40));return e._reactRootContainer?(zm(function(){dT(null,null,e,!1,function(){e._reactRootContainer=null,e[rh]=null})}),!0):!1};il.unstable_batchedUpdates=XB;il.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!cT(r))throw Error(Qe(200));if(e==null||e._reactInternals===void 0)throw Error(Qe(38));return dT(e,t,r,!1,n)};il.version="18.2.0-next-9e3b772b8-20220608";function pJ(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pJ)}catch(e){console.error(e)}}pJ(),hQ.exports=il;var yh=hQ.exports;const R_=Ur(yh);var S$=yh;bk.createRoot=S$.createRoot,bk.hydrateRoot=S$.hydrateRoot;const es={grey:{100:"#f0f0f3",200:"#e1e2e7",300:"#d1d3da",400:"#c2c5ce",500:"#b3b6c2",600:"#8f929b",700:"#6b6d74",800:"#48494e",900:"#242427"},primary:{100:"#d0fcf4",200:"#a0f9e9",300:"#71f5de",400:"#41f2d3",500:"#12efc8",600:"#0ebfa0",700:"#0b8f78",800:"#076050",900:"#043028"},secondary:{100:"#fcf0dd",200:"#fae1bb",300:"#f7d299",400:"#f5c377",500:"#f2b455",600:"#c29044",700:"#916c33",800:"#614822",900:"#302411"},tertiary:{500:"#8884d8"},background:{light:"#2d2d34",main:"#1f2026",login:"#000203"}},yfe={palette:{primary:{...es.primary,main:es.primary[500],light:es.primary[400]},secondary:{...es.secondary,main:es.secondary[500]},tertiary:{...es.tertiary},grey:{...es.grey,main:es.grey[500]},background:{default:es.background.main,light:es.background.light}},typography:{fontFamily:["Inter","sans-serif"].join(","),fontSize:12,h1:{fontFamily:["Inter","sans-serif"].join(","),fontSize:32},h2:{fontFamily:["Inter","sans-serif"].join(","),fontSize:24},h3:{fontFamily:["Inter","sans-serif"].join(","),fontSize:20,fontWeight:800,color:es.grey[200]},h4:{fontFamily:["Inter","sans-serif"].join(","),fontSize:14,fontWeight:600,color:es.grey[300]},h5:{fontFamily:["Inter","sans-serif"].join(","),fontSize:12,fontWeight:400,color:es.grey[500]},h6:{fontFamily:["Inter","sans-serif"].join(","),fontSize:10,color:es.grey[700]}}},bfe={black:"#000",white:"#fff"},Q1=bfe,xfe={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},xg=xfe,wfe={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},wg=wfe,Sfe={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Sg=Sfe,_fe={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},_g=_fe,Cfe={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Cg=Cfe,Afe={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Ib=Afe,Efe={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Mfe=Efe;function Pfe(e,t){return()=>null}function L(){return L=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},L.apply(this,arguments)}function Wp(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function mJ(e){if(!Wp(e))return e;const t={};return Object.keys(e).forEach(r=>{t[r]=mJ(e[r])}),t}function ws(e,t,r={clone:!0}){const n=r.clone?L({},e):e;return Wp(e)&&Wp(t)&&Object.keys(t).forEach(i=>{i!=="__proto__"&&(Wp(t[i])&&i in e&&Wp(e[i])?n[i]=ws(e[i],t[i],r):r.clone?n[i]=Wp(t[i])?mJ(t[i]):t[i]:n[i]=t[i])}),n}var gJ={exports:{}},Tfe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Ofe=Tfe,Ife=Ofe;function vJ(){}function yJ(){}yJ.resetWarningCache=vJ;var Dfe=function(){function e(n,i,o,a,s,l){if(l!==Ife){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:yJ,resetWarningCache:vJ};return r.PropTypes=r,r};gJ.exports=Dfe();var Rfe=gJ.exports;const ve=Ur(Rfe);function Xf(e){let t="https://mui.com/production-error/?code="+e;for(let r=1;r<arguments.length;r+=1)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}var _n={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nF=Symbol.for("react.element"),iF=Symbol.for("react.portal"),hT=Symbol.for("react.fragment"),fT=Symbol.for("react.strict_mode"),pT=Symbol.for("react.profiler"),mT=Symbol.for("react.provider"),gT=Symbol.for("react.context"),kfe=Symbol.for("react.server_context"),vT=Symbol.for("react.forward_ref"),yT=Symbol.for("react.suspense"),bT=Symbol.for("react.suspense_list"),xT=Symbol.for("react.memo"),wT=Symbol.for("react.lazy"),Lfe=Symbol.for("react.offscreen"),bJ;bJ=Symbol.for("react.module.reference");function Zl(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case nF:switch(e=e.type,e){case hT:case pT:case fT:case yT:case bT:return e;default:switch(e=e&&e.$$typeof,e){case kfe:case gT:case vT:case wT:case xT:case mT:return e;default:return t}}case iF:return t}}}_n.ContextConsumer=gT;_n.ContextProvider=mT;_n.Element=nF;_n.ForwardRef=vT;_n.Fragment=hT;_n.Lazy=wT;_n.Memo=xT;_n.Portal=iF;_n.Profiler=pT;_n.StrictMode=fT;_n.Suspense=yT;_n.SuspenseList=bT;_n.isAsyncMode=function(){return!1};_n.isConcurrentMode=function(){return!1};_n.isContextConsumer=function(e){return Zl(e)===gT};_n.isContextProvider=function(e){return Zl(e)===mT};_n.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===nF};_n.isForwardRef=function(e){return Zl(e)===vT};_n.isFragment=function(e){return Zl(e)===hT};_n.isLazy=function(e){return Zl(e)===wT};_n.isMemo=function(e){return Zl(e)===xT};_n.isPortal=function(e){return Zl(e)===iF};_n.isProfiler=function(e){return Zl(e)===pT};_n.isStrictMode=function(e){return Zl(e)===fT};_n.isSuspense=function(e){return Zl(e)===yT};_n.isSuspenseList=function(e){return Zl(e)===bT};_n.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===hT||e===pT||e===fT||e===yT||e===bT||e===Lfe||typeof e=="object"&&e!==null&&(e.$$typeof===wT||e.$$typeof===xT||e.$$typeof===mT||e.$$typeof===gT||e.$$typeof===vT||e.$$typeof===bJ||e.getModuleId!==void 0)};_n.typeOf=Zl;function $e(e){if(typeof e!="string")throw new Error(Xf(7));return e.charAt(0).toUpperCase()+e.slice(1)}function h3(...e){return e.reduce((t,r)=>r==null?t:function(...i){t.apply(this,i),r.apply(this,i)},()=>{})}function yS(e,t=166){let r;function n(...i){const o=()=>{e.apply(this,i)};clearTimeout(r),r=setTimeout(o,t)}return n.clear=()=>{clearTimeout(r)},n}function Nfe(e,t){return()=>null}function kA(e,t){return P.isValidElement(e)&&t.indexOf(e.type.muiName)!==-1}function si(e){return e&&e.ownerDocument||document}function qc(e){return si(e).defaultView||window}function zfe(e,t){return()=>null}function Z1(e,t){typeof e=="function"?e(t):e&&(e.current=t)}const Bfe=typeof window<"u"?P.useLayoutEffect:P.useEffect,li=Bfe;let _$=0;function Ffe(e){const[t,r]=P.useState(e),n=e||t;return P.useEffect(()=>{t==null&&(_$+=1,r(`mui-${_$}`))},[t]),n}const C$=R1["useId".toString()];function Oi(e){if(C$!==void 0){const t=C$();return e??t}return Ffe(e)}function jfe(e,t,r,n,i){return null}function Rf({controlled:e,default:t,name:r,state:n="value"}){const{current:i}=P.useRef(e!==void 0),[o,a]=P.useState(t),s=i?e:o,l=P.useCallback(u=>{i||a(u)},[]);return[s,l]}function Wi(e){const t=P.useRef(e);return li(()=>{t.current=e}),P.useCallback((...r)=>(0,t.current)(...r),[])}function nn(...e){return P.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(r=>{Z1(r,t)})},e)}let ST=!0,f3=!1,A$;const Ufe={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function $fe(e){const{type:t,tagName:r}=e;return!!(r==="INPUT"&&Ufe[t]&&!e.readOnly||r==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function Vfe(e){e.metaKey||e.altKey||e.ctrlKey||(ST=!0)}function oI(){ST=!1}function Hfe(){this.visibilityState==="hidden"&&f3&&(ST=!0)}function Gfe(e){e.addEventListener("keydown",Vfe,!0),e.addEventListener("mousedown",oI,!0),e.addEventListener("pointerdown",oI,!0),e.addEventListener("touchstart",oI,!0),e.addEventListener("visibilitychange",Hfe,!0)}function Wfe(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return ST||$fe(t)}function oF(){const e=P.useCallback(i=>{i!=null&&Gfe(i.ownerDocument)},[]),t=P.useRef(!1);function r(){return t.current?(f3=!0,window.clearTimeout(A$),A$=window.setTimeout(()=>{f3=!1},100),t.current=!1,!0):!1}function n(i){return Wfe(i)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:n,onBlur:r,ref:e}}function xJ(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}const qfe=e=>{const t=P.useRef({});return P.useEffect(()=>{t.current=e}),t.current},aF=qfe;function sF(e,t){const r=L({},t);return Object.keys(e).forEach(n=>{if(n.toString().match(/^(components|slots)$/))r[n]=L({},e[n],r[n]);else if(n.toString().match(/^(componentsProps|slotProps)$/)){const i=e[n]||{},o=t[n];r[n]={},!o||!Object.keys(o)?r[n]=i:!i||!Object.keys(i)?r[n]=o:(r[n]=L({},o),Object.keys(i).forEach(a=>{r[n][a]=sF(i[a],o[a])}))}else r[n]===void 0&&(r[n]=e[n])}),r}function lt(e,t,r=void 0){const n={};return Object.keys(e).forEach(i=>{n[i]=e[i].reduce((o,a)=>{if(a){const s=t(a);s!==""&&o.push(s),r&&r[a]&&o.push(r[a])}return o},[]).join(" ")}),n}const E$=e=>e,Kfe=()=>{let e=E$;return{configure(t){e=t},generate(t){return e(t)},reset(){e=E$}}},Xfe=Kfe(),lF=Xfe,Yfe={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function ur(e,t,r="Mui"){const n=Yfe[t];return n?`${r}-${n}`:`${lF.generate(e)}-${t}`}function cr(e,t,r="Mui"){const n={};return t.forEach(i=>{n[i]=ur(e,i,r)}),n}const Bm="$$material";function Ie(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function wJ(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var Qfe=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Zfe=wJ(function(e){return Qfe.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function Jfe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function epe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var tpe=function(){function e(r){var n=this;this._insertTag=function(i){var o;n.tags.length===0?n.insertionPoint?o=n.insertionPoint.nextSibling:n.prepend?o=n.container.firstChild:o=n.before:o=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(i,o),n.tags.push(i)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(epe(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=Jfe(i);try{o.insertRule(n,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){return n.parentNode&&n.parentNode.removeChild(n)}),this.tags=[],this.ctr=0},e}(),Zo="-ms-",OE="-moz-",Jr="-webkit-",SJ="comm",uF="rule",cF="decl",rpe="@import",_J="@keyframes",npe="@layer",ipe=Math.abs,_T=String.fromCharCode,ope=Object.assign;function ape(e,t){return Ho(e,0)^45?(((t<<2^Ho(e,0))<<2^Ho(e,1))<<2^Ho(e,2))<<2^Ho(e,3):0}function CJ(e){return e.trim()}function spe(e,t){return(e=t.exec(e))?e[0]:e}function en(e,t,r){return e.replace(t,r)}function p3(e,t){return e.indexOf(t)}function Ho(e,t){return e.charCodeAt(t)|0}function J1(e,t,r){return e.slice(t,r)}function pc(e){return e.length}function dF(e){return e.length}function k_(e,t){return t.push(e),e}function lpe(e,t){return e.map(t).join("")}var CT=1,Ny=1,AJ=0,Es=0,Ui=0,z0="";function AT(e,t,r,n,i,o,a){return{value:e,root:t,parent:r,type:n,props:i,children:o,line:CT,column:Ny,length:a,return:""}}function Db(e,t){return ope(AT("",null,null,"",null,null,0),e,{length:-e.length},t)}function upe(){return Ui}function cpe(){return Ui=Es>0?Ho(z0,--Es):0,Ny--,Ui===10&&(Ny=1,CT--),Ui}function el(){return Ui=Es<AJ?Ho(z0,Es++):0,Ny++,Ui===10&&(Ny=1,CT++),Ui}function zc(){return Ho(z0,Es)}function LA(){return Es}function bS(e,t){return J1(z0,e,t)}function ew(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function EJ(e){return CT=Ny=1,AJ=pc(z0=e),Es=0,[]}function MJ(e){return z0="",e}function NA(e){return CJ(bS(Es-1,m3(e===91?e+2:e===40?e+1:e)))}function dpe(e){for(;(Ui=zc())&&Ui<33;)el();return ew(e)>2||ew(Ui)>3?"":" "}function hpe(e,t){for(;--t&&el()&&!(Ui<48||Ui>102||Ui>57&&Ui<65||Ui>70&&Ui<97););return bS(e,LA()+(t<6&&zc()==32&&el()==32))}function m3(e){for(;el();)switch(Ui){case e:return Es;case 34:case 39:e!==34&&e!==39&&m3(Ui);break;case 40:e===41&&m3(e);break;case 92:el();break}return Es}function fpe(e,t){for(;el()&&e+Ui!==47+10;)if(e+Ui===42+42&&zc()===47)break;return"/*"+bS(t,Es-1)+"*"+_T(e===47?e:el())}function ppe(e){for(;!ew(zc());)el();return bS(e,Es)}function mpe(e){return MJ(zA("",null,null,null,[""],e=EJ(e),0,[0],e))}function zA(e,t,r,n,i,o,a,s,l){for(var u=0,d=0,c=a,h=0,f=0,m=0,p=1,g=1,v=1,b=0,y="",x=i,S=o,w=n,_=y;g;)switch(m=b,b=el()){case 40:if(m!=108&&Ho(_,c-1)==58){p3(_+=en(NA(b),"&","&\f"),"&\f")!=-1&&(v=-1);break}case 34:case 39:case 91:_+=NA(b);break;case 9:case 10:case 13:case 32:_+=dpe(m);break;case 92:_+=hpe(LA()-1,7);continue;case 47:switch(zc()){case 42:case 47:k_(gpe(fpe(el(),LA()),t,r),l);break;default:_+="/"}break;case 123*p:s[u++]=pc(_)*v;case 125*p:case 59:case 0:switch(b){case 0:case 125:g=0;case 59+d:v==-1&&(_=en(_,/\f/g,"")),f>0&&pc(_)-c&&k_(f>32?P$(_+";",n,r,c-1):P$(en(_," ","")+";",n,r,c-2),l);break;case 59:_+=";";default:if(k_(w=M$(_,t,r,u,d,i,s,y,x=[],S=[],c),o),b===123)if(d===0)zA(_,t,w,w,x,o,c,s,S);else switch(h===99&&Ho(_,3)===110?100:h){case 100:case 108:case 109:case 115:zA(e,w,w,n&&k_(M$(e,w,w,0,0,i,s,y,i,x=[],c),S),i,S,c,s,n?x:S);break;default:zA(_,w,w,w,[""],S,0,s,S)}}u=d=f=0,p=v=1,y=_="",c=a;break;case 58:c=1+pc(_),f=m;default:if(p<1){if(b==123)--p;else if(b==125&&p++==0&&cpe()==125)continue}switch(_+=_T(b),b*p){case 38:v=d>0?1:(_+="\f",-1);break;case 44:s[u++]=(pc(_)-1)*v,v=1;break;case 64:zc()===45&&(_+=NA(el())),h=zc(),d=c=pc(y=_+=ppe(LA())),b++;break;case 45:m===45&&pc(_)==2&&(p=0)}}return o}function M$(e,t,r,n,i,o,a,s,l,u,d){for(var c=i-1,h=i===0?o:[""],f=dF(h),m=0,p=0,g=0;m<n;++m)for(var v=0,b=J1(e,c+1,c=ipe(p=a[m])),y=e;v<f;++v)(y=CJ(p>0?h[v]+" "+b:en(b,/&\f/g,h[v])))&&(l[g++]=y);return AT(e,t,r,i===0?uF:s,l,u,d)}function gpe(e,t,r){return AT(e,t,r,SJ,_T(upe()),J1(e,2,-2),0)}function P$(e,t,r,n){return AT(e,t,r,cF,J1(e,0,n),J1(e,n+1,-1),n)}function Zv(e,t){for(var r="",n=dF(e),i=0;i<n;i++)r+=t(e[i],i,e,t)||"";return r}function vpe(e,t,r,n){switch(e.type){case npe:if(e.children.length)break;case rpe:case cF:return e.return=e.return||e.value;case SJ:return"";case _J:return e.return=e.value+"{"+Zv(e.children,n)+"}";case uF:e.value=e.props.join(",")}return pc(r=Zv(e.children,n))?e.return=e.value+"{"+r+"}":""}function ype(e){var t=dF(e);return function(r,n,i,o){for(var a="",s=0;s<t;s++)a+=e[s](r,n,i,o)||"";return a}}function bpe(e){return function(t){t.root||(t=t.return)&&e(t)}}var xpe=function(t,r,n){for(var i=0,o=0;i=o,o=zc(),i===38&&o===12&&(r[n]=1),!ew(o);)el();return bS(t,Es)},wpe=function(t,r){var n=-1,i=44;do switch(ew(i)){case 0:i===38&&zc()===12&&(r[n]=1),t[n]+=xpe(Es-1,r,n);break;case 2:t[n]+=NA(i);break;case 4:if(i===44){t[++n]=zc()===58?"&\f":"",r[n]=t[n].length;break}default:t[n]+=_T(i)}while(i=el());return t},Spe=function(t,r){return MJ(wpe(EJ(t),r))},T$=new WeakMap,_pe=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,n=t.parent,i=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!T$.get(n))&&!i){T$.set(t,!0);for(var o=[],a=Spe(r,o),s=n.props,l=0,u=0;l<a.length;l++)for(var d=0;d<s.length;d++,u++)t.props[u]=o[l]?a[l].replace(/&\f/g,s[d]):s[d]+" "+a[l]}}},Cpe=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function PJ(e,t){switch(ape(e,t)){case 5103:return Jr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Jr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Jr+e+OE+e+Zo+e+e;case 6828:case 4268:return Jr+e+Zo+e+e;case 6165:return Jr+e+Zo+"flex-"+e+e;case 5187:return Jr+e+en(e,/(\w+).+(:[^]+)/,Jr+"box-$1$2"+Zo+"flex-$1$2")+e;case 5443:return Jr+e+Zo+"flex-item-"+en(e,/flex-|-self/,"")+e;case 4675:return Jr+e+Zo+"flex-line-pack"+en(e,/align-content|flex-|-self/,"")+e;case 5548:return Jr+e+Zo+en(e,"shrink","negative")+e;case 5292:return Jr+e+Zo+en(e,"basis","preferred-size")+e;case 6060:return Jr+"box-"+en(e,"-grow","")+Jr+e+Zo+en(e,"grow","positive")+e;case 4554:return Jr+en(e,/([^-])(transform)/g,"$1"+Jr+"$2")+e;case 6187:return en(en(en(e,/(zoom-|grab)/,Jr+"$1"),/(image-set)/,Jr+"$1"),e,"")+e;case 5495:case 3959:return en(e,/(image-set\([^]*)/,Jr+"$1$`$1");case 4968:return en(en(e,/(.+:)(flex-)?(.*)/,Jr+"box-pack:$3"+Zo+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Jr+e+e;case 4095:case 3583:case 4068:case 2532:return en(e,/(.+)-inline(.+)/,Jr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(pc(e)-1-t>6)switch(Ho(e,t+1)){case 109:if(Ho(e,t+4)!==45)break;case 102:return en(e,/(.+:)(.+)-([^]+)/,"$1"+Jr+"$2-$3$1"+OE+(Ho(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~p3(e,"stretch")?PJ(en(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Ho(e,t+1)!==115)break;case 6444:switch(Ho(e,pc(e)-3-(~p3(e,"!important")&&10))){case 107:return en(e,":",":"+Jr)+e;case 101:return en(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Jr+(Ho(e,14)===45?"inline-":"")+"box$3$1"+Jr+"$2$3$1"+Zo+"$2box$3")+e}break;case 5936:switch(Ho(e,t+11)){case 114:return Jr+e+Zo+en(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Jr+e+Zo+en(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Jr+e+Zo+en(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Jr+e+Zo+e+e}return e}var Ape=function(t,r,n,i){if(t.length>-1&&!t.return)switch(t.type){case cF:t.return=PJ(t.value,t.length);break;case _J:return Zv([Db(t,{value:en(t.value,"@","@"+Jr)})],i);case uF:if(t.length)return lpe(t.props,function(o){switch(spe(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Zv([Db(t,{props:[en(o,/:(read-\w+)/,":"+OE+"$1")]})],i);case"::placeholder":return Zv([Db(t,{props:[en(o,/:(plac\w+)/,":"+Jr+"input-$1")]}),Db(t,{props:[en(o,/:(plac\w+)/,":"+OE+"$1")]}),Db(t,{props:[en(o,/:(plac\w+)/,Zo+"input-$1")]})],i)}return""})}},Epe=[Ape],Mpe=function(t){var r=t.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(p){var g=p.getAttribute("data-emotion");g.indexOf(" ")!==-1&&(document.head.appendChild(p),p.setAttribute("data-s",""))})}var i=t.stylisPlugins||Epe,o={},a,s=[];a=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(p){for(var g=p.getAttribute("data-emotion").split(" "),v=1;v<g.length;v++)o[g[v]]=!0;s.push(p)});var l,u=[_pe,Cpe];{var d,c=[vpe,bpe(function(p){d.insert(p)})],h=ype(u.concat(i,c)),f=function(g){return Zv(mpe(g),h)};l=function(g,v,b,y){d=b,f(g?g+"{"+v.styles+"}":v.styles),y&&(m.inserted[v.name]=!0)}}var m={key:r,sheet:new tpe({key:r,container:a,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:o,registered:{},insert:l};return m.sheet.hydrate(s),m},TJ={exports:{}},fn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Do=typeof Symbol=="function"&&Symbol.for,hF=Do?Symbol.for("react.element"):60103,fF=Do?Symbol.for("react.portal"):60106,ET=Do?Symbol.for("react.fragment"):60107,MT=Do?Symbol.for("react.strict_mode"):60108,PT=Do?Symbol.for("react.profiler"):60114,TT=Do?Symbol.for("react.provider"):60109,OT=Do?Symbol.for("react.context"):60110,pF=Do?Symbol.for("react.async_mode"):60111,IT=Do?Symbol.for("react.concurrent_mode"):60111,DT=Do?Symbol.for("react.forward_ref"):60112,RT=Do?Symbol.for("react.suspense"):60113,Ppe=Do?Symbol.for("react.suspense_list"):60120,kT=Do?Symbol.for("react.memo"):60115,LT=Do?Symbol.for("react.lazy"):60116,Tpe=Do?Symbol.for("react.block"):60121,Ope=Do?Symbol.for("react.fundamental"):60117,Ipe=Do?Symbol.for("react.responder"):60118,Dpe=Do?Symbol.for("react.scope"):60119;function al(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case hF:switch(e=e.type,e){case pF:case IT:case ET:case PT:case MT:case RT:return e;default:switch(e=e&&e.$$typeof,e){case OT:case DT:case LT:case kT:case TT:return e;default:return t}}case fF:return t}}}function OJ(e){return al(e)===IT}fn.AsyncMode=pF;fn.ConcurrentMode=IT;fn.ContextConsumer=OT;fn.ContextProvider=TT;fn.Element=hF;fn.ForwardRef=DT;fn.Fragment=ET;fn.Lazy=LT;fn.Memo=kT;fn.Portal=fF;fn.Profiler=PT;fn.StrictMode=MT;fn.Suspense=RT;fn.isAsyncMode=function(e){return OJ(e)||al(e)===pF};fn.isConcurrentMode=OJ;fn.isContextConsumer=function(e){return al(e)===OT};fn.isContextProvider=function(e){return al(e)===TT};fn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===hF};fn.isForwardRef=function(e){return al(e)===DT};fn.isFragment=function(e){return al(e)===ET};fn.isLazy=function(e){return al(e)===LT};fn.isMemo=function(e){return al(e)===kT};fn.isPortal=function(e){return al(e)===fF};fn.isProfiler=function(e){return al(e)===PT};fn.isStrictMode=function(e){return al(e)===MT};fn.isSuspense=function(e){return al(e)===RT};fn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===ET||e===IT||e===PT||e===MT||e===RT||e===Ppe||typeof e=="object"&&e!==null&&(e.$$typeof===LT||e.$$typeof===kT||e.$$typeof===TT||e.$$typeof===OT||e.$$typeof===DT||e.$$typeof===Ope||e.$$typeof===Ipe||e.$$typeof===Dpe||e.$$typeof===Tpe)};fn.typeOf=al;TJ.exports=fn;var Rpe=TJ.exports,IJ=Rpe,kpe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Lpe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},DJ={};DJ[IJ.ForwardRef]=kpe;DJ[IJ.Memo]=Lpe;var Npe=!0;function zpe(e,t,r){var n="";return r.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):n+=i+" "}),n}var RJ=function(t,r,n){var i=t.key+"-"+r.name;(n===!1||Npe===!1)&&t.registered[i]===void 0&&(t.registered[i]=r.styles)},kJ=function(t,r,n){RJ(t,r,n);var i=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var o=r;do t.insert(r===o?"."+i:"",o,t.sheet,!0),o=o.next;while(o!==void 0)}};function Bpe(e){for(var t=0,r,n=0,i=e.length;i>=4;++n,i-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Fpe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},jpe=/[A-Z]|^ms/g,Upe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,LJ=function(t){return t.charCodeAt(1)===45},O$=function(t){return t!=null&&typeof t!="boolean"},aI=wJ(function(e){return LJ(e)?e:e.replace(jpe,"-$&").toLowerCase()}),I$=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(Upe,function(n,i,o){return mc={name:i,styles:o,next:mc},i})}return Fpe[t]!==1&&!LJ(t)&&typeof r=="number"&&r!==0?r+"px":r};function tw(e,t,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":{if(r.anim===1)return mc={name:r.name,styles:r.styles,next:mc},r.name;if(r.styles!==void 0){var n=r.next;if(n!==void 0)for(;n!==void 0;)mc={name:n.name,styles:n.styles,next:mc},n=n.next;var i=r.styles+";";return i}return $pe(e,t,r)}case"function":{if(e!==void 0){var o=mc,a=r(e);return mc=o,tw(e,t,a)}break}}if(t==null)return r;var s=t[r];return s!==void 0?s:r}function $pe(e,t,r){var n="";if(Array.isArray(r))for(var i=0;i<r.length;i++)n+=tw(e,t,r[i])+";";else for(var o in r){var a=r[o];if(typeof a!="object")t!=null&&t[a]!==void 0?n+=o+"{"+t[a]+"}":O$(a)&&(n+=aI(o)+":"+I$(o,a)+";");else if(Array.isArray(a)&&typeof a[0]=="string"&&(t==null||t[a[0]]===void 0))for(var s=0;s<a.length;s++)O$(a[s])&&(n+=aI(o)+":"+I$(o,a[s])+";");else{var l=tw(e,t,a);switch(o){case"animation":case"animationName":{n+=aI(o)+":"+l+";";break}default:n+=o+"{"+l+"}"}}}return n}var D$=/label:\s*([^\s;\n{]+)\s*(;|$)/g,mc,mF=function(t,r,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var i=!0,o="";mc=void 0;var a=t[0];a==null||a.raw===void 0?(i=!1,o+=tw(n,r,a)):o+=a[0];for(var s=1;s<t.length;s++)o+=tw(n,r,t[s]),i&&(o+=a[s]);D$.lastIndex=0;for(var l="",u;(u=D$.exec(o))!==null;)l+="-"+u[1];var d=Bpe(o)+l;return{name:d,styles:o,next:mc}},Vpe=function(t){return t()},NJ=R1["useInsertionEffect"]?R1["useInsertionEffect"]:!1,Hpe=NJ||Vpe,R$=NJ||P.useLayoutEffect,zJ=P.createContext(typeof HTMLElement<"u"?Mpe({key:"css"}):null);zJ.Provider;var BJ=function(t){return P.forwardRef(function(r,n){var i=P.useContext(zJ);return t(r,i,n)})},NT=P.createContext({}),Gpe=BJ(function(e,t){var r=e.styles,n=mF([r],void 0,P.useContext(NT)),i=P.useRef();return R$(function(){var o=t.key+"-global",a=new t.sheet.constructor({key:o,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),s=!1,l=document.querySelector('style[data-emotion="'+o+" "+n.name+'"]');return t.sheet.tags.length&&(a.before=t.sheet.tags[0]),l!==null&&(s=!0,l.setAttribute("data-emotion",o),a.hydrate([l])),i.current=[a,s],function(){a.flush()}},[t]),R$(function(){var o=i.current,a=o[0],s=o[1];if(s){o[1]=!1;return}if(n.next!==void 0&&kJ(t,n.next,!0),a.tags.length){var l=a.tags[a.tags.length-1].nextElementSibling;a.before=l,a.flush()}t.insert("",n,a,!1)},[t,n.name]),null});function rw(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return mF(t)}var ng=function(){var t=rw.apply(void 0,arguments),r="animation-"+t.name;return{name:r,styles:"@keyframes "+r+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},Wpe=Zfe,qpe=function(t){return t!=="theme"},k$=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?Wpe:qpe},L$=function(t,r,n){var i;if(r){var o=r.shouldForwardProp;i=t.__emotion_forwardProp&&o?function(a){return t.__emotion_forwardProp(a)&&o(a)}:o}return typeof i!="function"&&n&&(i=t.__emotion_forwardProp),i},Kpe=function(t){var r=t.cache,n=t.serialized,i=t.isStringTag;return RJ(r,n,i),Hpe(function(){return kJ(r,n,i)}),null},Xpe=function e(t,r){var n=t.__emotion_real===t,i=n&&t.__emotion_base||t,o,a;r!==void 0&&(o=r.label,a=r.target);var s=L$(t,r,n),l=s||k$(i),u=!l("as");return function(){var d=arguments,c=n&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(o!==void 0&&c.push("label:"+o+";"),d[0]==null||d[0].raw===void 0)c.push.apply(c,d);else{c.push(d[0][0]);for(var h=d.length,f=1;f<h;f++)c.push(d[f],d[0][f])}var m=BJ(function(p,g,v){var b=u&&p.as||i,y="",x=[],S=p;if(p.theme==null){S={};for(var w in p)S[w]=p[w];S.theme=P.useContext(NT)}typeof p.className=="string"?y=zpe(g.registered,x,p.className):p.className!=null&&(y=p.className+" ");var _=mF(c.concat(x),g.registered,S);y+=g.key+"-"+_.name,a!==void 0&&(y+=" "+a);var C=u&&s===void 0?k$(b):l,E={};for(var A in p)u&&A==="as"||C(A)&&(E[A]=p[A]);return E.className=y,E.ref=v,P.createElement(P.Fragment,null,P.createElement(Kpe,{cache:g,serialized:_,isStringTag:typeof b=="string"}),P.createElement(b,E))});return m.displayName=o!==void 0?o:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",m.defaultProps=t.defaultProps,m.__emotion_real=m,m.__emotion_base=i,m.__emotion_styles=c,m.__emotion_forwardProp=s,Object.defineProperty(m,"toString",{value:function(){return"."+a}}),m.withComponent=function(p,g){return e(p,L({},r,g,{shouldForwardProp:L$(m,g,!0)})).apply(void 0,c)},m}},Ype=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],g3=Xpe.bind();Ype.forEach(function(e){g3[e]=g3(e)});function Qpe(e){return e==null||Object.keys(e).length===0}function Zpe(e){const{styles:t,defaultTheme:r={}}=e,n=typeof t=="function"?i=>t(Qpe(i)?r:i):t;return B.jsx(Gpe,{styles:n})}/**
 * @mui/styled-engine v5.14.7
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function FJ(e,t){return g3(e,t)}const Jpe=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},eme=["values","unit","step"],tme=e=>{const t=Object.keys(e).map(r=>({key:r,val:e[r]}))||[];return t.sort((r,n)=>r.val-n.val),t.reduce((r,n)=>L({},r,{[n.key]:n.val}),{})};function rme(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:n=5}=e,i=Ie(e,eme),o=tme(t),a=Object.keys(o);function s(h){return`@media (min-width:${typeof t[h]=="number"?t[h]:h}${r})`}function l(h){return`@media (max-width:${(typeof t[h]=="number"?t[h]:h)-n/100}${r})`}function u(h,f){const m=a.indexOf(f);return`@media (min-width:${typeof t[h]=="number"?t[h]:h}${r}) and (max-width:${(m!==-1&&typeof t[a[m]]=="number"?t[a[m]]:f)-n/100}${r})`}function d(h){return a.indexOf(h)+1<a.length?u(h,a[a.indexOf(h)+1]):s(h)}function c(h){const f=a.indexOf(h);return f===0?s(a[1]):f===a.length-1?l(a[f]):u(h,a[a.indexOf(h)+1]).replace("@media","@media not all and")}return L({keys:a,values:o,up:s,down:l,between:u,only:d,not:c,unit:r},i)}const nme={borderRadius:4},ime=nme;function i1(e,t){return t?ws(e,t,{clone:!1}):e}const gF={xs:0,sm:600,md:900,lg:1200,xl:1536},N$={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${gF[e]}px)`};function Lu(e,t,r){const n=e.theme||{};if(Array.isArray(t)){const o=n.breakpoints||N$;return t.reduce((a,s,l)=>(a[o.up(o.keys[l])]=r(t[l]),a),{})}if(typeof t=="object"){const o=n.breakpoints||N$;return Object.keys(t).reduce((a,s)=>{if(Object.keys(o.values||gF).indexOf(s)!==-1){const l=o.up(s);a[l]=r(t[s],s)}else{const l=s;a[l]=t[l]}return a},{})}return r(t)}function jJ(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((n,i)=>{const o=e.up(i);return n[o]={},n},{}))||{}}function UJ(e,t){return e.reduce((r,n)=>{const i=r[n];return(!i||Object.keys(i).length===0)&&delete r[n],r},t)}function ome(e,...t){const r=jJ(e),n=[r,...t].reduce((i,o)=>ws(i,o),{});return UJ(Object.keys(r),n)}function ame(e,t){if(typeof e!="object")return{};const r={},n=Object.keys(t);return Array.isArray(e)?n.forEach((i,o)=>{o<e.length&&(r[i]=!0)}):n.forEach(i=>{e[i]!=null&&(r[i]=!0)}),r}function sI({values:e,breakpoints:t,base:r}){const n=r||ame(e,t),i=Object.keys(n);if(i.length===0)return e;let o;return i.reduce((a,s,l)=>(Array.isArray(e)?(a[s]=e[l]!=null?e[l]:e[o],o=l):typeof e=="object"?(a[s]=e[s]!=null?e[s]:e[o],o=s):a[s]=e,a),{})}function zT(e,t,r=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&r){const n=`vars.${t}`.split(".").reduce((i,o)=>i&&i[o]?i[o]:null,e);if(n!=null)return n}return t.split(".").reduce((n,i)=>n&&n[i]!=null?n[i]:null,e)}function IE(e,t,r,n=r){let i;return typeof e=="function"?i=e(r):Array.isArray(e)?i=e[r]||n:i=zT(e,r)||n,t&&(i=t(i,n,e)),i}function on(e){const{prop:t,cssProperty:r=e.prop,themeKey:n,transform:i}=e,o=a=>{if(a[t]==null)return null;const s=a[t],l=a.theme,u=zT(l,n)||{};return Lu(a,s,c=>{let h=IE(u,i,c);return c===h&&typeof c=="string"&&(h=IE(u,i,`${t}${c==="default"?"":$e(c)}`,c)),r===!1?h:{[r]:h}})};return o.propTypes={},o.filterProps=[t],o}function sme(e){const t={};return r=>(t[r]===void 0&&(t[r]=e(r)),t[r])}const lme={m:"margin",p:"padding"},ume={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},z$={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},cme=sme(e=>{if(e.length>2)if(z$[e])e=z$[e];else return[e];const[t,r]=e.split(""),n=lme[t],i=ume[r]||"";return Array.isArray(i)?i.map(o=>n+o):[n+i]}),vF=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],yF=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...vF,...yF];function xS(e,t,r,n){var i;const o=(i=zT(e,t,!1))!=null?i:r;return typeof o=="number"?a=>typeof a=="string"?a:o*a:Array.isArray(o)?a=>typeof a=="string"?a:o[a]:typeof o=="function"?o:()=>{}}function bF(e){return xS(e,"spacing",8)}function Fm(e,t){if(typeof t=="string"||t==null)return t;const r=Math.abs(t),n=e(r);return t>=0?n:typeof n=="number"?-n:`-${n}`}function dme(e,t){return r=>e.reduce((n,i)=>(n[i]=Fm(t,r),n),{})}function hme(e,t,r,n){if(t.indexOf(r)===-1)return null;const i=cme(r),o=dme(i,n),a=e[r];return Lu(e,a,o)}function $J(e,t){const r=bF(e.theme);return Object.keys(e).map(n=>hme(e,t,n,r)).reduce(i1,{})}function hi(e){return $J(e,vF)}hi.propTypes={};hi.filterProps=vF;function fi(e){return $J(e,yF)}fi.propTypes={};fi.filterProps=yF;function fme(e=8){if(e.mui)return e;const t=bF({spacing:e}),r=(...n)=>(n.length===0?[1]:n).map(o=>{const a=t(o);return typeof a=="number"?`${a}px`:a}).join(" ");return r.mui=!0,r}function BT(...e){const t=e.reduce((n,i)=>(i.filterProps.forEach(o=>{n[o]=i}),n),{}),r=n=>Object.keys(n).reduce((i,o)=>t[o]?i1(i,t[o](n)):i,{});return r.propTypes={},r.filterProps=e.reduce((n,i)=>n.concat(i.filterProps),[]),r}function _c(e){return typeof e!="number"?e:`${e}px solid`}const pme=on({prop:"border",themeKey:"borders",transform:_c}),mme=on({prop:"borderTop",themeKey:"borders",transform:_c}),gme=on({prop:"borderRight",themeKey:"borders",transform:_c}),vme=on({prop:"borderBottom",themeKey:"borders",transform:_c}),yme=on({prop:"borderLeft",themeKey:"borders",transform:_c}),bme=on({prop:"borderColor",themeKey:"palette"}),xme=on({prop:"borderTopColor",themeKey:"palette"}),wme=on({prop:"borderRightColor",themeKey:"palette"}),Sme=on({prop:"borderBottomColor",themeKey:"palette"}),_me=on({prop:"borderLeftColor",themeKey:"palette"}),FT=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=xS(e.theme,"shape.borderRadius",4),r=n=>({borderRadius:Fm(t,n)});return Lu(e,e.borderRadius,r)}return null};FT.propTypes={};FT.filterProps=["borderRadius"];BT(pme,mme,gme,vme,yme,bme,xme,wme,Sme,_me,FT);const jT=e=>{if(e.gap!==void 0&&e.gap!==null){const t=xS(e.theme,"spacing",8),r=n=>({gap:Fm(t,n)});return Lu(e,e.gap,r)}return null};jT.propTypes={};jT.filterProps=["gap"];const UT=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=xS(e.theme,"spacing",8),r=n=>({columnGap:Fm(t,n)});return Lu(e,e.columnGap,r)}return null};UT.propTypes={};UT.filterProps=["columnGap"];const $T=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=xS(e.theme,"spacing",8),r=n=>({rowGap:Fm(t,n)});return Lu(e,e.rowGap,r)}return null};$T.propTypes={};$T.filterProps=["rowGap"];const Cme=on({prop:"gridColumn"}),Ame=on({prop:"gridRow"}),Eme=on({prop:"gridAutoFlow"}),Mme=on({prop:"gridAutoColumns"}),Pme=on({prop:"gridAutoRows"}),Tme=on({prop:"gridTemplateColumns"}),Ome=on({prop:"gridTemplateRows"}),Ime=on({prop:"gridTemplateAreas"}),Dme=on({prop:"gridArea"});BT(jT,UT,$T,Cme,Ame,Eme,Mme,Pme,Tme,Ome,Ime,Dme);function Jv(e,t){return t==="grey"?t:e}const Rme=on({prop:"color",themeKey:"palette",transform:Jv}),kme=on({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Jv}),Lme=on({prop:"backgroundColor",themeKey:"palette",transform:Jv});BT(Rme,kme,Lme);function Gs(e){return e<=1&&e!==0?`${e*100}%`:e}const Nme=on({prop:"width",transform:Gs}),xF=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=r=>{var n;return{maxWidth:((n=e.theme)==null||(n=n.breakpoints)==null||(n=n.values)==null?void 0:n[r])||gF[r]||Gs(r)}};return Lu(e,e.maxWidth,t)}return null};xF.filterProps=["maxWidth"];const zme=on({prop:"minWidth",transform:Gs}),Bme=on({prop:"height",transform:Gs}),Fme=on({prop:"maxHeight",transform:Gs}),jme=on({prop:"minHeight",transform:Gs});on({prop:"size",cssProperty:"width",transform:Gs});on({prop:"size",cssProperty:"height",transform:Gs});const Ume=on({prop:"boxSizing"});BT(Nme,xF,zme,Bme,Fme,jme,Ume);const $me={border:{themeKey:"borders",transform:_c},borderTop:{themeKey:"borders",transform:_c},borderRight:{themeKey:"borders",transform:_c},borderBottom:{themeKey:"borders",transform:_c},borderLeft:{themeKey:"borders",transform:_c},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:FT},color:{themeKey:"palette",transform:Jv},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Jv},backgroundColor:{themeKey:"palette",transform:Jv},p:{style:fi},pt:{style:fi},pr:{style:fi},pb:{style:fi},pl:{style:fi},px:{style:fi},py:{style:fi},padding:{style:fi},paddingTop:{style:fi},paddingRight:{style:fi},paddingBottom:{style:fi},paddingLeft:{style:fi},paddingX:{style:fi},paddingY:{style:fi},paddingInline:{style:fi},paddingInlineStart:{style:fi},paddingInlineEnd:{style:fi},paddingBlock:{style:fi},paddingBlockStart:{style:fi},paddingBlockEnd:{style:fi},m:{style:hi},mt:{style:hi},mr:{style:hi},mb:{style:hi},ml:{style:hi},mx:{style:hi},my:{style:hi},margin:{style:hi},marginTop:{style:hi},marginRight:{style:hi},marginBottom:{style:hi},marginLeft:{style:hi},marginX:{style:hi},marginY:{style:hi},marginInline:{style:hi},marginInlineStart:{style:hi},marginInlineEnd:{style:hi},marginBlock:{style:hi},marginBlockStart:{style:hi},marginBlockEnd:{style:hi},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:jT},rowGap:{style:$T},columnGap:{style:UT},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Gs},maxWidth:{style:xF},minWidth:{transform:Gs},height:{transform:Gs},maxHeight:{transform:Gs},minHeight:{transform:Gs},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},VT=$me;function Vme(...e){const t=e.reduce((n,i)=>n.concat(Object.keys(i)),[]),r=new Set(t);return e.every(n=>r.size===Object.keys(n).length)}function Hme(e,t){return typeof e=="function"?e(t):e}function Gme(){function e(r,n,i,o){const a={[r]:n,theme:i},s=o[r];if(!s)return{[r]:n};const{cssProperty:l=r,themeKey:u,transform:d,style:c}=s;if(n==null)return null;if(u==="typography"&&n==="inherit")return{[r]:n};const h=zT(i,u)||{};return c?c(a):Lu(a,n,m=>{let p=IE(h,d,m);return m===p&&typeof m=="string"&&(p=IE(h,d,`${r}${m==="default"?"":$e(m)}`,m)),l===!1?p:{[l]:p}})}function t(r){var n;const{sx:i,theme:o={}}=r||{};if(!i)return null;const a=(n=o.unstable_sxConfig)!=null?n:VT;function s(l){let u=l;if(typeof l=="function")u=l(o);else if(typeof l!="object")return l;if(!u)return null;const d=jJ(o.breakpoints),c=Object.keys(d);let h=d;return Object.keys(u).forEach(f=>{const m=Hme(u[f],o);if(m!=null)if(typeof m=="object")if(a[f])h=i1(h,e(f,m,o,a));else{const p=Lu({theme:o},m,g=>({[f]:g}));Vme(p,m)?h[f]=t({sx:m,theme:o}):h=i1(h,p)}else h=i1(h,e(f,m,o,a))}),UJ(c,h)}return Array.isArray(i)?i.map(s):s(i)}return t}const VJ=Gme();VJ.filterProps=["sx"];const HT=VJ,Wme=["breakpoints","palette","spacing","shape"];function GT(e={},...t){const{breakpoints:r={},palette:n={},spacing:i,shape:o={}}=e,a=Ie(e,Wme),s=rme(r),l=fme(i);let u=ws({breakpoints:s,direction:"ltr",components:{},palette:L({mode:"light"},n),spacing:l,shape:L({},ime,o)},a);return u=t.reduce((d,c)=>ws(d,c),u),u.unstable_sxConfig=L({},VT,a==null?void 0:a.unstable_sxConfig),u.unstable_sx=function(c){return HT({sx:c,theme:this})},u}function qme(e){return Object.keys(e).length===0}function WT(e=null){const t=P.useContext(NT);return!t||qme(t)?e:t}const Kme=GT();function wS(e=Kme){return WT(e)}function Xme({styles:e,themeId:t,defaultTheme:r={}}){const n=wS(r),i=typeof e=="function"?e(t&&n[t]||n):e;return B.jsx(Zpe,{styles:i})}const Yme=["sx"],Qme=e=>{var t,r;const n={systemProps:{},otherProps:{}},i=(t=e==null||(r=e.theme)==null?void 0:r.unstable_sxConfig)!=null?t:VT;return Object.keys(e).forEach(o=>{i[o]?n.systemProps[o]=e[o]:n.otherProps[o]=e[o]}),n};function wF(e){const{sx:t}=e,r=Ie(e,Yme),{systemProps:n,otherProps:i}=Qme(r);let o;return Array.isArray(t)?o=[n,...t]:typeof t=="function"?o=(...a)=>{const s=t(...a);return Wp(s)?L({},n,s):n}:o=L({},n,t),L({},i,{sx:o})}function HJ(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=HJ(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function ht(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=HJ(e))&&(n&&(n+=" "),n+=t);return n}const Zme=["className","component"];function Jme(e={}){const{themeId:t,defaultTheme:r,defaultClassName:n="MuiBox-root",generateClassName:i}=e,o=FJ("div",{shouldForwardProp:s=>s!=="theme"&&s!=="sx"&&s!=="as"})(HT);return P.forwardRef(function(l,u){const d=wS(r),c=wF(l),{className:h,component:f="div"}=c,m=Ie(c,Zme);return B.jsx(o,L({as:f,ref:u,className:ht(h,i?i(n):n),theme:t&&d[t]||d},m))})}const ege=["variant"];function B$(e){return e.length===0}function GJ(e){const{variant:t}=e,r=Ie(e,ege);let n=t||"";return Object.keys(r).sort().forEach(i=>{i==="color"?n+=B$(n)?e[i]:$e(e[i]):n+=`${B$(n)?i:$e(i)}${$e(e[i].toString())}`}),n}const tge=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function rge(e){return Object.keys(e).length===0}function nge(e){return typeof e=="string"&&e.charCodeAt(0)>96}const ige=(e,t)=>t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null,oge=(e,t)=>{let r=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(r=t.components[e].variants);const n={};return r.forEach(i=>{const o=GJ(i.props);n[o]=i.style}),n},age=(e,t,r,n)=>{var i;const{ownerState:o={}}=e,a=[],s=r==null||(i=r.components)==null||(i=i[n])==null?void 0:i.variants;return s&&s.forEach(l=>{let u=!0;Object.keys(l.props).forEach(d=>{o[d]!==l.props[d]&&e[d]!==l.props[d]&&(u=!1)}),u&&a.push(t[GJ(l.props)])}),a};function o1(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const sge=GT(),lge=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function Rb({defaultTheme:e,theme:t,themeId:r}){return rge(t)?e:t[r]||t}function uge(e){return e?(t,r)=>r[e]:null}function WJ(e={}){const{themeId:t,defaultTheme:r=sge,rootShouldForwardProp:n=o1,slotShouldForwardProp:i=o1}=e,o=a=>HT(L({},a,{theme:Rb(L({},a,{defaultTheme:r,themeId:t}))}));return o.__mui_systemSx=!0,(a,s={})=>{Jpe(a,x=>x.filter(S=>!(S!=null&&S.__mui_systemSx)));const{name:l,slot:u,skipVariantsResolver:d,skipSx:c,overridesResolver:h=uge(lge(u))}=s,f=Ie(s,tge),m=d!==void 0?d:u&&u!=="Root"&&u!=="root"||!1,p=c||!1;let g,v=o1;u==="Root"||u==="root"?v=n:u?v=i:nge(a)&&(v=void 0);const b=FJ(a,L({shouldForwardProp:v,label:g},f)),y=(x,...S)=>{const w=S?S.map(A=>typeof A=="function"&&A.__emotion_real!==A?M=>A(L({},M,{theme:Rb(L({},M,{defaultTheme:r,themeId:t}))})):A):[];let _=x;l&&h&&w.push(A=>{const M=Rb(L({},A,{defaultTheme:r,themeId:t})),I=ige(l,M);if(I){const O={};return Object.entries(I).forEach(([T,D])=>{O[T]=typeof D=="function"?D(L({},A,{theme:M})):D}),h(A,O)}return null}),l&&!m&&w.push(A=>{const M=Rb(L({},A,{defaultTheme:r,themeId:t}));return age(A,oge(l,M),M,l)}),p||w.push(o);const C=w.length-S.length;if(Array.isArray(x)&&C>0){const A=new Array(C).fill("");_=[...x,...A],_.raw=[...x.raw,...A]}else typeof x=="function"&&x.__emotion_real!==x&&(_=A=>x(L({},A,{theme:Rb(L({},A,{defaultTheme:r,themeId:t}))})));const E=b(_,...w);return a.muiName&&(E.muiName=a.muiName),E};return b.withConfig&&(y.withConfig=b.withConfig),y}}const cge=WJ(),wi=cge;function qJ(e){const{theme:t,name:r,props:n}=e;return!t||!t.components||!t.components[r]||!t.components[r].defaultProps?n:sF(t.components[r].defaultProps,n)}function KJ({props:e,name:t,defaultTheme:r,themeId:n}){let i=wS(r);return n&&(i=i[n]||i),qJ({theme:i,name:t,props:e})}function SF(e,t=0,r=1){return Math.min(Math.max(t,e),r)}function dge(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(n=>n+n)),r?`rgb${r.length===4?"a":""}(${r.map((n,i)=>i<3?parseInt(n,16):Math.round(parseInt(n,16)/255*1e3)/1e3).join(", ")})`:""}function jm(e){if(e.type)return e;if(e.charAt(0)==="#")return jm(dge(e));const t=e.indexOf("("),r=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(r)===-1)throw new Error(Xf(9,e));let n=e.substring(t+1,e.length-1),i;if(r==="color"){if(n=n.split(" "),i=n.shift(),n.length===4&&n[3].charAt(0)==="/"&&(n[3]=n[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error(Xf(10,i))}else n=n.split(",");return n=n.map(o=>parseFloat(o)),{type:r,values:n,colorSpace:i}}function qT(e){const{type:t,colorSpace:r}=e;let{values:n}=e;return t.indexOf("rgb")!==-1?n=n.map((i,o)=>o<3?parseInt(i,10):i):t.indexOf("hsl")!==-1&&(n[1]=`${n[1]}%`,n[2]=`${n[2]}%`),t.indexOf("color")!==-1?n=`${r} ${n.join(" ")}`:n=`${n.join(", ")}`,`${t}(${n})`}function hge(e){e=jm(e);const{values:t}=e,r=t[0],n=t[1]/100,i=t[2]/100,o=n*Math.min(i,1-i),a=(u,d=(u+r/30)%12)=>i-o*Math.max(Math.min(d-3,9-d,1),-1);let s="rgb";const l=[Math.round(a(0)*255),Math.round(a(8)*255),Math.round(a(4)*255)];return e.type==="hsla"&&(s+="a",l.push(t[3])),qT({type:s,values:l})}function F$(e){e=jm(e);let t=e.type==="hsl"||e.type==="hsla"?jm(hge(e)).values:e.values;return t=t.map(r=>(e.type!=="color"&&(r/=255),r<=.03928?r/12.92:((r+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function fge(e,t){const r=F$(e),n=F$(t);return(Math.max(r,n)+.05)/(Math.min(r,n)+.05)}function lr(e,t){return e=jm(e),t=SF(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,qT(e)}function KT(e,t){if(e=jm(e),t=SF(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]*=1-t;return qT(e)}function XT(e,t){if(e=jm(e),t=SF(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;else if(e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return qT(e)}const pge=P.createContext(null),XJ=pge;function YJ(){return P.useContext(XJ)}const mge=typeof Symbol=="function"&&Symbol.for,gge=mge?Symbol.for("mui.nested"):"__THEME_NESTED__";function vge(e,t){return typeof t=="function"?t(e):L({},e,t)}function yge(e){const{children:t,theme:r}=e,n=YJ(),i=P.useMemo(()=>{const o=n===null?r:vge(n,r);return o!=null&&(o[gge]=n!==null),o},[r,n]);return B.jsx(XJ.Provider,{value:i,children:t})}const j$={};function U$(e,t,r,n=!1){return P.useMemo(()=>{const i=e&&t[e]||t;if(typeof r=="function"){const o=r(i),a=e?L({},t,{[e]:o}):o;return n?()=>a:a}return e?L({},t,{[e]:r}):L({},t,r)},[e,t,r,n])}function bge(e){const{children:t,theme:r,themeId:n}=e,i=WT(j$),o=YJ()||j$,a=U$(n,i,r),s=U$(n,o,r,!0);return B.jsx(yge,{theme:s,children:B.jsx(NT.Provider,{value:a,children:t})})}const xge=["component","direction","spacing","divider","children","className","useFlexGap"],wge=GT(),Sge=wi("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function _ge(e){return KJ({props:e,name:"MuiStack",defaultTheme:wge})}function Cge(e,t){const r=P.Children.toArray(e).filter(Boolean);return r.reduce((n,i,o)=>(n.push(i),o<r.length-1&&n.push(P.cloneElement(t,{key:`separator-${o}`})),n),[])}const Age=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],Ege=({ownerState:e,theme:t})=>{let r=L({display:"flex",flexDirection:"column"},Lu({theme:t},sI({values:e.direction,breakpoints:t.breakpoints.values}),n=>({flexDirection:n})));if(e.spacing){const n=bF(t),i=Object.keys(t.breakpoints.values).reduce((l,u)=>((typeof e.spacing=="object"&&e.spacing[u]!=null||typeof e.direction=="object"&&e.direction[u]!=null)&&(l[u]=!0),l),{}),o=sI({values:e.direction,base:i}),a=sI({values:e.spacing,base:i});typeof o=="object"&&Object.keys(o).forEach((l,u,d)=>{if(!o[l]){const h=u>0?o[d[u-1]]:"column";o[l]=h}}),r=ws(r,Lu({theme:t},a,(l,u)=>e.useFlexGap?{gap:Fm(n,l)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${Age(u?o[u]:e.direction)}`]:Fm(n,l)}}))}return r=ome(t.breakpoints,r),r};function Mge(e={}){const{createStyledComponent:t=Sge,useThemeProps:r=_ge,componentName:n="MuiStack"}=e,i=()=>lt({root:["root"]},l=>ur(n,l),{}),o=t(Ege);return P.forwardRef(function(l,u){const d=r(l),c=wF(d),{component:h="div",direction:f="column",spacing:m=0,divider:p,children:g,className:v,useFlexGap:b=!1}=c,y=Ie(c,xge),x={direction:f,spacing:m,useFlexGap:b},S=i();return B.jsx(o,L({as:h,ownerState:x,ref:u,className:ht(S.root,v)},y,{children:p?Cge(g,p):g}))})}function Pge(e,t){return L({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}const Tge=["mode","contrastThreshold","tonalOffset"],$$={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Q1.white,default:Q1.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},lI={text:{primary:Q1.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Q1.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function V$(e,t,r,n){const i=n.light||n,o=n.dark||n*1.5;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:t==="light"?e.light=XT(e.main,i):t==="dark"&&(e.dark=KT(e.main,o)))}function Oge(e="light"){return e==="dark"?{main:Sg[200],light:Sg[50],dark:Sg[400]}:{main:Sg[700],light:Sg[400],dark:Sg[800]}}function Ige(e="light"){return e==="dark"?{main:wg[200],light:wg[50],dark:wg[400]}:{main:wg[500],light:wg[300],dark:wg[700]}}function Dge(e="light"){return e==="dark"?{main:xg[500],light:xg[300],dark:xg[700]}:{main:xg[700],light:xg[400],dark:xg[800]}}function Rge(e="light"){return e==="dark"?{main:_g[400],light:_g[300],dark:_g[700]}:{main:_g[700],light:_g[500],dark:_g[900]}}function kge(e="light"){return e==="dark"?{main:Cg[400],light:Cg[300],dark:Cg[700]}:{main:Cg[800],light:Cg[500],dark:Cg[900]}}function Lge(e="light"){return e==="dark"?{main:Ib[400],light:Ib[300],dark:Ib[700]}:{main:"#ed6c02",light:Ib[500],dark:Ib[900]}}function Nge(e){const{mode:t="light",contrastThreshold:r=3,tonalOffset:n=.2}=e,i=Ie(e,Tge),o=e.primary||Oge(t),a=e.secondary||Ige(t),s=e.error||Dge(t),l=e.info||Rge(t),u=e.success||kge(t),d=e.warning||Lge(t);function c(p){return fge(p,lI.text.primary)>=r?lI.text.primary:$$.text.primary}const h=({color:p,name:g,mainShade:v=500,lightShade:b=300,darkShade:y=700})=>{if(p=L({},p),!p.main&&p[v]&&(p.main=p[v]),!p.hasOwnProperty("main"))throw new Error(Xf(11,g?` (${g})`:"",v));if(typeof p.main!="string")throw new Error(Xf(12,g?` (${g})`:"",JSON.stringify(p.main)));return V$(p,"light",b,n),V$(p,"dark",y,n),p.contrastText||(p.contrastText=c(p.main)),p},f={dark:lI,light:$$};return ws(L({common:L({},Q1),mode:t,primary:h({color:o,name:"primary"}),secondary:h({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:h({color:s,name:"error"}),warning:h({color:d,name:"warning"}),info:h({color:l,name:"info"}),success:h({color:u,name:"success"}),grey:Mfe,contrastThreshold:r,getContrastText:c,augmentColor:h,tonalOffset:n},f[t]),i)}const zge=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function Bge(e){return Math.round(e*1e5)/1e5}const H$={textTransform:"uppercase"},G$='"Roboto", "Helvetica", "Arial", sans-serif';function Fge(e,t){const r=typeof t=="function"?t(e):t,{fontFamily:n=G$,fontSize:i=14,fontWeightLight:o=300,fontWeightRegular:a=400,fontWeightMedium:s=500,fontWeightBold:l=700,htmlFontSize:u=16,allVariants:d,pxToRem:c}=r,h=Ie(r,zge),f=i/14,m=c||(v=>`${v/u*f}rem`),p=(v,b,y,x,S)=>L({fontFamily:n,fontWeight:v,fontSize:m(b),lineHeight:y},n===G$?{letterSpacing:`${Bge(x/b)}em`}:{},S,d),g={h1:p(o,96,1.167,-1.5),h2:p(o,60,1.2,-.5),h3:p(a,48,1.167,0),h4:p(a,34,1.235,.25),h5:p(a,24,1.334,0),h6:p(s,20,1.6,.15),subtitle1:p(a,16,1.75,.15),subtitle2:p(s,14,1.57,.1),body1:p(a,16,1.5,.15),body2:p(a,14,1.43,.15),button:p(s,14,1.75,.4,H$),caption:p(a,12,1.66,.4),overline:p(a,12,2.66,1,H$),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return ws(L({htmlFontSize:u,pxToRem:m,fontFamily:n,fontSize:i,fontWeightLight:o,fontWeightRegular:a,fontWeightMedium:s,fontWeightBold:l},g),h,{clone:!1})}const jge=.2,Uge=.14,$ge=.12;function qn(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${jge})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${Uge})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${$ge})`].join(",")}const Vge=["none",qn(0,2,1,-1,0,1,1,0,0,1,3,0),qn(0,3,1,-2,0,2,2,0,0,1,5,0),qn(0,3,3,-2,0,3,4,0,0,1,8,0),qn(0,2,4,-1,0,4,5,0,0,1,10,0),qn(0,3,5,-1,0,5,8,0,0,1,14,0),qn(0,3,5,-1,0,6,10,0,0,1,18,0),qn(0,4,5,-2,0,7,10,1,0,2,16,1),qn(0,5,5,-3,0,8,10,1,0,3,14,2),qn(0,5,6,-3,0,9,12,1,0,3,16,2),qn(0,6,6,-3,0,10,14,1,0,4,18,3),qn(0,6,7,-4,0,11,15,1,0,4,20,3),qn(0,7,8,-4,0,12,17,2,0,5,22,4),qn(0,7,8,-4,0,13,19,2,0,5,24,4),qn(0,7,9,-4,0,14,21,2,0,5,26,4),qn(0,8,9,-5,0,15,22,2,0,6,28,5),qn(0,8,10,-5,0,16,24,2,0,6,30,5),qn(0,8,11,-5,0,17,26,2,0,6,32,5),qn(0,9,11,-5,0,18,28,2,0,7,34,6),qn(0,9,12,-6,0,19,29,2,0,7,36,6),qn(0,10,13,-6,0,20,31,3,0,8,38,7),qn(0,10,13,-6,0,21,33,3,0,8,40,7),qn(0,10,14,-6,0,22,35,3,0,8,42,7),qn(0,11,14,-7,0,23,36,3,0,9,44,8),qn(0,11,15,-7,0,24,38,3,0,9,46,8)],Hge=Vge,Gge=["duration","easing","delay"],Wge={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},qge={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function W$(e){return`${Math.round(e)}ms`}function Kge(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function Xge(e){const t=L({},Wge,e.easing),r=L({},qge,e.duration);return L({getAutoHeightDuration:Kge,create:(i=["all"],o={})=>{const{duration:a=r.standard,easing:s=t.easeInOut,delay:l=0}=o;return Ie(o,Gge),(Array.isArray(i)?i:[i]).map(u=>`${u} ${typeof a=="string"?a:W$(a)} ${s} ${typeof l=="string"?l:W$(l)}`).join(",")}},e,{easing:t,duration:r})}const Yge={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},Qge=Yge,Zge=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function _F(e={},...t){const{mixins:r={},palette:n={},transitions:i={},typography:o={}}=e,a=Ie(e,Zge);if(e.vars)throw new Error(Xf(18));const s=Nge(n),l=GT(e);let u=ws(l,{mixins:Pge(l.breakpoints,r),palette:s,shadows:Hge.slice(),typography:Fge(s,o),transitions:Xge(i),zIndex:L({},Qge)});return u=ws(u,a),u=t.reduce((d,c)=>ws(d,c),u),u.unstable_sxConfig=L({},VT,a==null?void 0:a.unstable_sxConfig),u.unstable_sx=function(c){return HT({sx:c,theme:this})},u}function Jge(e){return String(e).match(/[\d.\-+]*\s*(.*)/)[1]||""}function eve(e){return parseFloat(e)}const tve=_F(),YT=tve;function Qa(){const e=wS(YT);return e[Bm]||e}function pr({props:e,name:t}){return KJ({props:e,name:t,defaultTheme:YT,themeId:Bm})}const ju=e=>o1(e)&&e!=="classes",rve=o1,nve=WJ({themeId:Bm,defaultTheme:YT,rootShouldForwardProp:ju}),He=nve,ive=["theme"];function ove(e){let{theme:t}=e,r=Ie(e,ive);const n=t[Bm];return B.jsx(bge,L({},r,{themeId:n?Bm:void 0,theme:n||t}))}const ave=e=>{let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,(t/100).toFixed(2)},q$=ave;function sve(e){return ur("MuiSvgIcon",e)}cr("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const lve=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],uve=e=>{const{color:t,fontSize:r,classes:n}=e,i={root:["root",t!=="inherit"&&`color${$e(t)}`,`fontSize${$e(r)}`]};return lt(i,sve,n)},cve=He("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color!=="inherit"&&t[`color${$e(r.color)}`],t[`fontSize${$e(r.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var r,n,i,o,a,s,l,u,d,c,h,f,m;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(r=e.transitions)==null||(n=r.create)==null?void 0:n.call(r,"fill",{duration:(i=e.transitions)==null||(i=i.duration)==null?void 0:i.shorter}),fontSize:{inherit:"inherit",small:((o=e.typography)==null||(a=o.pxToRem)==null?void 0:a.call(o,20))||"1.25rem",medium:((s=e.typography)==null||(l=s.pxToRem)==null?void 0:l.call(s,24))||"1.5rem",large:((u=e.typography)==null||(d=u.pxToRem)==null?void 0:d.call(u,35))||"2.1875rem"}[t.fontSize],color:(c=(h=(e.vars||e).palette)==null||(h=h[t.color])==null?void 0:h.main)!=null?c:{action:(f=(e.vars||e).palette)==null||(f=f.action)==null?void 0:f.active,disabled:(m=(e.vars||e).palette)==null||(m=m.action)==null?void 0:m.disabled,inherit:void 0}[t.color]}}),QJ=P.forwardRef(function(t,r){const n=pr({props:t,name:"MuiSvgIcon"}),{children:i,className:o,color:a="inherit",component:s="svg",fontSize:l="medium",htmlColor:u,inheritViewBox:d=!1,titleAccess:c,viewBox:h="0 0 24 24"}=n,f=Ie(n,lve),m=P.isValidElement(i)&&i.type==="svg",p=L({},n,{color:a,component:s,fontSize:l,instanceFontSize:t.fontSize,inheritViewBox:d,viewBox:h,hasSvgAsChild:m}),g={};d||(g.viewBox=h);const v=uve(p);return B.jsxs(cve,L({as:s,className:ht(v.root,o),focusable:"false",color:u,"aria-hidden":c?void 0:!0,role:c?"img":void 0,ref:r},g,f,m&&i.props,{ownerState:p,children:[m?i.props.children:i,c?B.jsx("title",{children:c}):null]}))});QJ.muiName="SvgIcon";const K$=QJ;function _r(e,t){function r(n,i){return B.jsx(K$,L({"data-testid":`${t}Icon`,ref:i},n,{children:e}))}return r.muiName=K$.muiName,P.memo(P.forwardRef(r))}const dve={configure:e=>{lF.configure(e)}},hve=Object.freeze(Object.defineProperty({__proto__:null,capitalize:$e,createChainedFunction:h3,createSvgIcon:_r,debounce:yS,deprecatedPropType:Nfe,isMuiElement:kA,ownerDocument:si,ownerWindow:qc,requirePropFactory:zfe,setRef:Z1,unstable_ClassNameGenerator:dve,unstable_useEnhancedEffect:li,unstable_useId:Oi,unsupportedProp:jfe,useControlled:Rf,useEventCallback:Wi,useForkRef:nn,useIsFocusVisible:oF},Symbol.toStringTag,{value:"Module"}));function v3(e,t){return v3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},v3(e,t)}function ZJ(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,v3(e,t)}const X$={disabled:!1},DE=le.createContext(null);var fve=function(t){return t.scrollTop},Ix="unmounted",kp="exited",Lp="entering",fv="entered",y3="exiting",bh=function(e){ZJ(t,e);function t(n,i){var o;o=e.call(this,n,i)||this;var a=i,s=a&&!a.isMounting?n.enter:n.appear,l;return o.appearStatus=null,n.in?s?(l=kp,o.appearStatus=Lp):l=fv:n.unmountOnExit||n.mountOnEnter?l=Ix:l=kp,o.state={status:l},o.nextCallback=null,o}t.getDerivedStateFromProps=function(i,o){var a=i.in;return a&&o.status===Ix?{status:kp}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(i){var o=null;if(i!==this.props){var a=this.state.status;this.props.in?a!==Lp&&a!==fv&&(o=Lp):(a===Lp||a===fv)&&(o=y3)}this.updateStatus(!1,o)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var i=this.props.timeout,o,a,s;return o=a=s=i,i!=null&&typeof i!="number"&&(o=i.exit,a=i.enter,s=i.appear!==void 0?i.appear:a),{exit:o,enter:a,appear:s}},r.updateStatus=function(i,o){if(i===void 0&&(i=!1),o!==null)if(this.cancelNextCallback(),o===Lp){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:R_.findDOMNode(this);a&&fve(a)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===kp&&this.setState({status:Ix})},r.performEnter=function(i){var o=this,a=this.props.enter,s=this.context?this.context.isMounting:i,l=this.props.nodeRef?[s]:[R_.findDOMNode(this),s],u=l[0],d=l[1],c=this.getTimeouts(),h=s?c.appear:c.enter;if(!i&&!a||X$.disabled){this.safeSetState({status:fv},function(){o.props.onEntered(u)});return}this.props.onEnter(u,d),this.safeSetState({status:Lp},function(){o.props.onEntering(u,d),o.onTransitionEnd(h,function(){o.safeSetState({status:fv},function(){o.props.onEntered(u,d)})})})},r.performExit=function(){var i=this,o=this.props.exit,a=this.getTimeouts(),s=this.props.nodeRef?void 0:R_.findDOMNode(this);if(!o||X$.disabled){this.safeSetState({status:kp},function(){i.props.onExited(s)});return}this.props.onExit(s),this.safeSetState({status:y3},function(){i.props.onExiting(s),i.onTransitionEnd(a.exit,function(){i.safeSetState({status:kp},function(){i.props.onExited(s)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(i,o){o=this.setNextCallback(o),this.setState(i,o)},r.setNextCallback=function(i){var o=this,a=!0;return this.nextCallback=function(s){a&&(a=!1,o.nextCallback=null,i(s))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},r.onTransitionEnd=function(i,o){this.setNextCallback(o);var a=this.props.nodeRef?this.props.nodeRef.current:R_.findDOMNode(this),s=i==null&&!this.props.addEndListener;if(!a||s){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],u=l[0],d=l[1];this.props.addEndListener(u,d)}i!=null&&setTimeout(this.nextCallback,i)},r.render=function(){var i=this.state.status;if(i===Ix)return null;var o=this.props,a=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var s=Ie(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return le.createElement(DE.Provider,{value:null},typeof a=="function"?a(i,s):le.cloneElement(le.Children.only(a),s))},t}(le.Component);bh.contextType=DE;bh.propTypes={};function Ag(){}bh.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ag,onEntering:Ag,onEntered:Ag,onExit:Ag,onExiting:Ag,onExited:Ag};bh.UNMOUNTED=Ix;bh.EXITED=kp;bh.ENTERING=Lp;bh.ENTERED=fv;bh.EXITING=y3;const JJ=bh;function pve(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CF(e,t){var r=function(o){return t&&P.isValidElement(o)?t(o):o},n=Object.create(null);return e&&P.Children.map(e,function(i){return i}).forEach(function(i){n[i.key]=r(i)}),n}function mve(e,t){e=e||{},t=t||{};function r(d){return d in t?t[d]:e[d]}var n=Object.create(null),i=[];for(var o in e)o in t?i.length&&(n[o]=i,i=[]):i.push(o);var a,s={};for(var l in t){if(n[l])for(a=0;a<n[l].length;a++){var u=n[l][a];s[n[l][a]]=r(u)}s[l]=r(l)}for(a=0;a<i.length;a++)s[i[a]]=r(i[a]);return s}function nm(e,t,r){return r[t]!=null?r[t]:e.props[t]}function gve(e,t){return CF(e.children,function(r){return P.cloneElement(r,{onExited:t.bind(null,r),in:!0,appear:nm(r,"appear",e),enter:nm(r,"enter",e),exit:nm(r,"exit",e)})})}function vve(e,t,r){var n=CF(e.children),i=mve(t,n);return Object.keys(i).forEach(function(o){var a=i[o];if(P.isValidElement(a)){var s=o in t,l=o in n,u=t[o],d=P.isValidElement(u)&&!u.props.in;l&&(!s||d)?i[o]=P.cloneElement(a,{onExited:r.bind(null,a),in:!0,exit:nm(a,"exit",e),enter:nm(a,"enter",e)}):!l&&s&&!d?i[o]=P.cloneElement(a,{in:!1}):l&&s&&P.isValidElement(u)&&(i[o]=P.cloneElement(a,{onExited:r.bind(null,a),in:u.props.in,exit:nm(a,"exit",e),enter:nm(a,"enter",e)}))}}),i}var yve=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},bve={component:"div",childFactory:function(t){return t}},AF=function(e){ZJ(t,e);function t(n,i){var o;o=e.call(this,n,i)||this;var a=o.handleExited.bind(pve(o));return o.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},o}var r=t.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,o){var a=o.children,s=o.handleExited,l=o.firstRender;return{children:l?gve(i,s):vve(i,a,s),firstRender:!1}},r.handleExited=function(i,o){var a=CF(this.props.children);i.key in a||(i.props.onExited&&i.props.onExited(o),this.mounted&&this.setState(function(s){var l=L({},s.children);return delete l[i.key],{children:l}}))},r.render=function(){var i=this.props,o=i.component,a=i.childFactory,s=Ie(i,["component","childFactory"]),l=this.state.contextValue,u=yve(this.state.children).map(a);return delete s.appear,delete s.enter,delete s.exit,o===null?le.createElement(DE.Provider,{value:l},u):le.createElement(DE.Provider,{value:l},le.createElement(o,s,u))},t}(le.Component);AF.propTypes={};AF.defaultProps=bve;const xve=AF,eee=e=>e.scrollTop;function RE(e,t){var r,n;const{timeout:i,easing:o,style:a={}}=e;return{duration:(r=a.transitionDuration)!=null?r:typeof i=="number"?i:i[t.mode]||0,easing:(n=a.transitionTimingFunction)!=null?n:typeof o=="object"?o[t.mode]:o,delay:a.transitionDelay}}function wve(e){return ur("MuiPaper",e)}cr("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const Sve=["className","component","elevation","square","variant"],_ve=e=>{const{square:t,elevation:r,variant:n,classes:i}=e,o={root:["root",n,!t&&"rounded",n==="elevation"&&`elevation${r}`]};return lt(o,wve,i)},Cve=He("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],!r.square&&t.rounded,r.variant==="elevation"&&t[`elevation${r.elevation}`]]}})(({theme:e,ownerState:t})=>{var r;return L({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!t.square&&{borderRadius:e.shape.borderRadius},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.divider}`},t.variant==="elevation"&&L({boxShadow:(e.vars||e).shadows[t.elevation]},!e.vars&&e.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${lr("#fff",q$(t.elevation))}, ${lr("#fff",q$(t.elevation))})`},e.vars&&{backgroundImage:(r=e.vars.overlays)==null?void 0:r[t.elevation]}))}),Ave=P.forwardRef(function(t,r){const n=pr({props:t,name:"MuiPaper"}),{className:i,component:o="div",elevation:a=1,square:s=!1,variant:l="elevation"}=n,u=Ie(n,Sve),d=L({},n,{component:o,elevation:a,square:s,variant:l}),c=_ve(d);return B.jsx(Cve,L({as:o,ownerState:d,className:ht(c.root,i),ref:r},u))}),SS=Ave;function Eve(e){const{className:t,classes:r,pulsate:n=!1,rippleX:i,rippleY:o,rippleSize:a,in:s,onExited:l,timeout:u}=e,[d,c]=P.useState(!1),h=ht(t,r.ripple,r.rippleVisible,n&&r.ripplePulsate),f={width:a,height:a,top:-(a/2)+o,left:-(a/2)+i},m=ht(r.child,d&&r.childLeaving,n&&r.childPulsate);return!s&&!d&&c(!0),P.useEffect(()=>{if(!s&&l!=null){const p=setTimeout(l,u);return()=>{clearTimeout(p)}}},[l,s,u]),B.jsx("span",{className:h,style:f,children:B.jsx("span",{className:m})})}const Mve=cr("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Ml=Mve,Pve=["center","classes","className"];let QT=e=>e,Y$,Q$,Z$,J$;const b3=550,Tve=80,Ove=ng(Y$||(Y$=QT`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),Ive=ng(Q$||(Q$=QT`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),Dve=ng(Z$||(Z$=QT`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),Rve=He("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),kve=He(Eve,{name:"MuiTouchRipple",slot:"Ripple"})(J$||(J$=QT`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),Ml.rippleVisible,Ove,b3,({theme:e})=>e.transitions.easing.easeInOut,Ml.ripplePulsate,({theme:e})=>e.transitions.duration.shorter,Ml.child,Ml.childLeaving,Ive,b3,({theme:e})=>e.transitions.easing.easeInOut,Ml.childPulsate,Dve,({theme:e})=>e.transitions.easing.easeInOut),Lve=P.forwardRef(function(t,r){const n=pr({props:t,name:"MuiTouchRipple"}),{center:i=!1,classes:o={},className:a}=n,s=Ie(n,Pve),[l,u]=P.useState([]),d=P.useRef(0),c=P.useRef(null);P.useEffect(()=>{c.current&&(c.current(),c.current=null)},[l]);const h=P.useRef(!1),f=P.useRef(0),m=P.useRef(null),p=P.useRef(null);P.useEffect(()=>()=>{f.current&&clearTimeout(f.current)},[]);const g=P.useCallback(x=>{const{pulsate:S,rippleX:w,rippleY:_,rippleSize:C,cb:E}=x;u(A=>[...A,B.jsx(kve,{classes:{ripple:ht(o.ripple,Ml.ripple),rippleVisible:ht(o.rippleVisible,Ml.rippleVisible),ripplePulsate:ht(o.ripplePulsate,Ml.ripplePulsate),child:ht(o.child,Ml.child),childLeaving:ht(o.childLeaving,Ml.childLeaving),childPulsate:ht(o.childPulsate,Ml.childPulsate)},timeout:b3,pulsate:S,rippleX:w,rippleY:_,rippleSize:C},d.current)]),d.current+=1,c.current=E},[o]),v=P.useCallback((x={},S={},w=()=>{})=>{const{pulsate:_=!1,center:C=i||S.pulsate,fakeElement:E=!1}=S;if((x==null?void 0:x.type)==="mousedown"&&h.current){h.current=!1;return}(x==null?void 0:x.type)==="touchstart"&&(h.current=!0);const A=E?null:p.current,M=A?A.getBoundingClientRect():{width:0,height:0,left:0,top:0};let I,O,T;if(C||x===void 0||x.clientX===0&&x.clientY===0||!x.clientX&&!x.touches)I=Math.round(M.width/2),O=Math.round(M.height/2);else{const{clientX:D,clientY:N}=x.touches&&x.touches.length>0?x.touches[0]:x;I=Math.round(D-M.left),O=Math.round(N-M.top)}if(C)T=Math.sqrt((2*M.width**2+M.height**2)/3),T%2===0&&(T+=1);else{const D=Math.max(Math.abs((A?A.clientWidth:0)-I),I)*2+2,N=Math.max(Math.abs((A?A.clientHeight:0)-O),O)*2+2;T=Math.sqrt(D**2+N**2)}x!=null&&x.touches?m.current===null&&(m.current=()=>{g({pulsate:_,rippleX:I,rippleY:O,rippleSize:T,cb:w})},f.current=setTimeout(()=>{m.current&&(m.current(),m.current=null)},Tve)):g({pulsate:_,rippleX:I,rippleY:O,rippleSize:T,cb:w})},[i,g]),b=P.useCallback(()=>{v({},{pulsate:!0})},[v]),y=P.useCallback((x,S)=>{if(clearTimeout(f.current),(x==null?void 0:x.type)==="touchend"&&m.current){m.current(),m.current=null,f.current=setTimeout(()=>{y(x,S)});return}m.current=null,u(w=>w.length>0?w.slice(1):w),c.current=S},[]);return P.useImperativeHandle(r,()=>({pulsate:b,start:v,stop:y}),[b,v,y]),B.jsx(Rve,L({className:ht(Ml.root,o.root,a),ref:p},s,{children:B.jsx(xve,{component:null,exit:!0,children:l})}))}),Nve=Lve;function zve(e){return ur("MuiButtonBase",e)}const Bve=cr("MuiButtonBase",["root","disabled","focusVisible"]),Fve=Bve,jve=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],Uve=e=>{const{disabled:t,focusVisible:r,focusVisibleClassName:n,classes:i}=e,a=lt({root:["root",t&&"disabled",r&&"focusVisible"]},zve,i);return r&&n&&(a.root+=` ${n}`),a},$ve=He("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Fve.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Vve=P.forwardRef(function(t,r){const n=pr({props:t,name:"MuiButtonBase"}),{action:i,centerRipple:o=!1,children:a,className:s,component:l="button",disabled:u=!1,disableRipple:d=!1,disableTouchRipple:c=!1,focusRipple:h=!1,LinkComponent:f="a",onBlur:m,onClick:p,onContextMenu:g,onDragLeave:v,onFocus:b,onFocusVisible:y,onKeyDown:x,onKeyUp:S,onMouseDown:w,onMouseLeave:_,onMouseUp:C,onTouchEnd:E,onTouchMove:A,onTouchStart:M,tabIndex:I=0,TouchRippleProps:O,touchRippleRef:T,type:D}=n,N=Ie(n,jve),k=P.useRef(null),R=P.useRef(null),z=nn(R,T),{isFocusVisibleRef:j,onFocus:$,onBlur:U,ref:H}=oF(),[V,Q]=P.useState(!1);u&&V&&Q(!1),P.useImperativeHandle(i,()=>({focusVisible:()=>{Q(!0),k.current.focus()}}),[]);const[X,ne]=P.useState(!1);P.useEffect(()=>{ne(!0)},[]);const J=X&&!d&&!u;P.useEffect(()=>{V&&h&&!d&&X&&R.current.pulsate()},[d,h,V,X]);function W(Ce,pe,Ge=c){return Wi(Ke=>(pe&&pe(Ke),!Ge&&R.current&&R.current[Ce](Ke),!0))}const te=W("start",w),Z=W("stop",g),q=W("stop",v),ie=W("stop",C),he=W("stop",Ce=>{V&&Ce.preventDefault(),_&&_(Ce)}),ae=W("start",M),be=W("stop",E),ye=W("stop",A),Se=W("stop",Ce=>{U(Ce),j.current===!1&&Q(!1),m&&m(Ce)},!1),me=Wi(Ce=>{k.current||(k.current=Ce.currentTarget),$(Ce),j.current===!0&&(Q(!0),y&&y(Ce)),b&&b(Ce)}),Pe=()=>{const Ce=k.current;return l&&l!=="button"&&!(Ce.tagName==="A"&&Ce.href)},Ae=P.useRef(!1),K=Wi(Ce=>{h&&!Ae.current&&V&&R.current&&Ce.key===" "&&(Ae.current=!0,R.current.stop(Ce,()=>{R.current.start(Ce)})),Ce.target===Ce.currentTarget&&Pe()&&Ce.key===" "&&Ce.preventDefault(),x&&x(Ce),Ce.target===Ce.currentTarget&&Pe()&&Ce.key==="Enter"&&!u&&(Ce.preventDefault(),p&&p(Ce))}),G=Wi(Ce=>{h&&Ce.key===" "&&R.current&&V&&!Ce.defaultPrevented&&(Ae.current=!1,R.current.stop(Ce,()=>{R.current.pulsate(Ce)})),S&&S(Ce),p&&Ce.target===Ce.currentTarget&&Pe()&&Ce.key===" "&&!Ce.defaultPrevented&&p(Ce)});let de=l;de==="button"&&(N.href||N.to)&&(de=f);const Ee={};de==="button"?(Ee.type=D===void 0?"button":D,Ee.disabled=u):(!N.href&&!N.to&&(Ee.role="button"),u&&(Ee["aria-disabled"]=u));const Me=nn(r,H,k),Le=L({},n,{centerRipple:o,component:l,disabled:u,disableRipple:d,disableTouchRipple:c,focusRipple:h,tabIndex:I,focusVisible:V}),De=Uve(Le);return B.jsxs($ve,L({as:de,className:ht(De.root,s),ownerState:Le,onBlur:Se,onClick:p,onContextMenu:Z,onFocus:me,onKeyDown:K,onKeyUp:G,onMouseDown:te,onMouseLeave:he,onMouseUp:ie,onDragLeave:q,onTouchEnd:be,onTouchMove:ye,onTouchStart:ae,ref:Me,tabIndex:u?-1:I,type:D},Ee,N,{children:[a,J?B.jsx(Nve,L({ref:z,center:o},O)):null]}))}),zy=Vve;function Hve(e){return ur("MuiIconButton",e)}const Gve=cr("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),Wve=Gve,qve=["edge","children","className","color","disabled","disableFocusRipple","size"],Kve=e=>{const{classes:t,disabled:r,color:n,edge:i,size:o}=e,a={root:["root",r&&"disabled",n!=="default"&&`color${$e(n)}`,i&&`edge${$e(i)}`,`size${$e(o)}`]};return lt(a,Hve,t)},Xve=He(zy,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color!=="default"&&t[`color${$e(r.color)}`],r.edge&&t[`edge${$e(r.edge)}`],t[`size${$e(r.size)}`]]}})(({theme:e,ownerState:t})=>L({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:lr(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12}),({theme:e,ownerState:t})=>{var r;const n=(r=(e.vars||e).palette)==null?void 0:r[t.color];return L({},t.color==="inherit"&&{color:"inherit"},t.color!=="inherit"&&t.color!=="default"&&L({color:n==null?void 0:n.main},!t.disableRipple&&{"&:hover":L({},n&&{backgroundColor:e.vars?`rgba(${n.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:lr(n.main,e.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),t.size==="small"&&{padding:5,fontSize:e.typography.pxToRem(18)},t.size==="large"&&{padding:12,fontSize:e.typography.pxToRem(28)},{[`&.${Wve.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}})}),Yve=P.forwardRef(function(t,r){const n=pr({props:t,name:"MuiIconButton"}),{edge:i=!1,children:o,className:a,color:s="default",disabled:l=!1,disableFocusRipple:u=!1,size:d="medium"}=n,c=Ie(n,qve),h=L({},n,{edge:i,color:s,disabled:l,disableFocusRipple:u,size:d}),f=Kve(h);return B.jsx(Xve,L({className:ht(f.root,a),centerRipple:!0,focusRipple:!u,disabled:l,ref:r,ownerState:h},c,{children:o}))}),cf=Yve,Qve=_r(B.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");function Zve(e){return ur("MuiTypography",e)}cr("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const Jve=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],eye=e=>{const{align:t,gutterBottom:r,noWrap:n,paragraph:i,variant:o,classes:a}=e,s={root:["root",o,e.align!=="inherit"&&`align${$e(t)}`,r&&"gutterBottom",n&&"noWrap",i&&"paragraph"]};return lt(s,Zve,a)},tye=He("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.variant&&t[r.variant],r.align!=="inherit"&&t[`align${$e(r.align)}`],r.noWrap&&t.noWrap,r.gutterBottom&&t.gutterBottom,r.paragraph&&t.paragraph]}})(({theme:e,ownerState:t})=>L({margin:0},t.variant==="inherit"&&{font:"inherit"},t.variant!=="inherit"&&e.typography[t.variant],t.align!=="inherit"&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16})),eV={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},rye={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},nye=e=>rye[e]||e,iye=P.forwardRef(function(t,r){const n=pr({props:t,name:"MuiTypography"}),i=nye(n.color),o=wF(L({},n,{color:i})),{align:a="inherit",className:s,component:l,gutterBottom:u=!1,noWrap:d=!1,paragraph:c=!1,variant:h="body1",variantMapping:f=eV}=o,m=Ie(o,Jve),p=L({},o,{align:a,color:i,className:s,component:l,gutterBottom:u,noWrap:d,paragraph:c,variant:h,variantMapping:f}),g=l||(c?"p":f[h]||eV[h])||"span",v=eye(p);return B.jsx(tye,L({as:g,ref:r,ownerState:p,className:ht(v.root,s)},m))}),vi=iye;function nw(e){return typeof e=="string"}function Dx(e,t,r){return e===void 0||nw(e)?t:L({},t,{ownerState:L({},t.ownerState,r)})}const oye={disableDefaultClasses:!1},aye=P.createContext(oye);function sye(e){const{disableDefaultClasses:t}=P.useContext(aye);return r=>t?"":e(r)}function tee(e,t=[]){if(e===void 0)return{};const r={};return Object.keys(e).filter(n=>n.match(/^on[A-Z]/)&&typeof e[n]=="function"&&!t.includes(n)).forEach(n=>{r[n]=e[n]}),r}function lye(e,t,r){return typeof e=="function"?e(t,r):e}function tV(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(r=>!(r.match(/^on[A-Z]/)&&typeof e[r]=="function")).forEach(r=>{t[r]=e[r]}),t}function uye(e){const{getSlotProps:t,additionalProps:r,externalSlotProps:n,externalForwardedProps:i,className:o}=e;if(!t){const f=ht(i==null?void 0:i.className,n==null?void 0:n.className,o,r==null?void 0:r.className),m=L({},r==null?void 0:r.style,i==null?void 0:i.style,n==null?void 0:n.style),p=L({},r,i,n);return f.length>0&&(p.className=f),Object.keys(m).length>0&&(p.style=m),{props:p,internalRef:void 0}}const a=tee(L({},i,n)),s=tV(n),l=tV(i),u=t(a),d=ht(u==null?void 0:u.className,r==null?void 0:r.className,o,i==null?void 0:i.className,n==null?void 0:n.className),c=L({},u==null?void 0:u.style,r==null?void 0:r.style,i==null?void 0:i.style,n==null?void 0:n.style),h=L({},u,r,l,s);return d.length>0&&(h.className=d),Object.keys(c).length>0&&(h.style=c),{props:h,internalRef:u.ref}}const cye=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function oh(e){var t;const{elementType:r,externalSlotProps:n,ownerState:i,skipResolvingSlotProps:o=!1}=e,a=Ie(e,cye),s=o?{}:lye(n,i),{props:l,internalRef:u}=uye(L({},a,{externalSlotProps:s})),d=nn(u,s==null?void 0:s.ref,(t=e.additionalProps)==null?void 0:t.ref);return Dx(r,L({},l,{ref:d}),i)}function dye(e){const{badgeContent:t,invisible:r=!1,max:n=99,showZero:i=!1}=e,o=aF({badgeContent:t,max:n});let a=r;r===!1&&t===0&&!i&&(a=!0);const{badgeContent:s,max:l=n}=a?o:e,u=s&&Number(s)>l?`${l}+`:s;return{badgeContent:s,invisible:a,max:l,displayValue:u}}function rV(e){return e.substring(2).toLowerCase()}function hye(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function ree(e){const{children:t,disableReactTree:r=!1,mouseEvent:n="onClick",onClickAway:i,touchEvent:o="onTouchEnd"}=e,a=P.useRef(!1),s=P.useRef(null),l=P.useRef(!1),u=P.useRef(!1);P.useEffect(()=>(setTimeout(()=>{l.current=!0},0),()=>{l.current=!1}),[]);const d=nn(t.ref,s),c=Wi(m=>{const p=u.current;u.current=!1;const g=si(s.current);if(!l.current||!s.current||"clientX"in m&&hye(m,g))return;if(a.current){a.current=!1;return}let v;m.composedPath?v=m.composedPath().indexOf(s.current)>-1:v=!g.documentElement.contains(m.target)||s.current.contains(m.target),!v&&(r||!p)&&i(m)}),h=m=>p=>{u.current=!0;const g=t.props[m];g&&g(p)},f={ref:d};return o!==!1&&(f[o]=h(o)),P.useEffect(()=>{if(o!==!1){const m=rV(o),p=si(s.current),g=()=>{a.current=!0};return p.addEventListener(m,c),p.addEventListener("touchmove",g),()=>{p.removeEventListener(m,c),p.removeEventListener("touchmove",g)}}},[c,o]),n!==!1&&(f[n]=h(n)),P.useEffect(()=>{if(n!==!1){const m=rV(n),p=si(s.current);return p.addEventListener(m,c),()=>{p.removeEventListener(m,c)}}},[c,n]),B.jsx(P.Fragment,{children:P.cloneElement(t,f)})}const fye=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function pye(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function mye(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=n=>e.ownerDocument.querySelector(`input[type="radio"]${n}`);let r=t(`[name="${e.name}"]:checked`);return r||(r=t(`[name="${e.name}"]`)),r!==e}function gye(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||mye(e))}function vye(e){const t=[],r=[];return Array.from(e.querySelectorAll(fye)).forEach((n,i)=>{const o=pye(n);o===-1||!gye(n)||(o===0?t.push(n):r.push({documentOrder:i,tabIndex:o,node:n}))}),r.sort((n,i)=>n.tabIndex===i.tabIndex?n.documentOrder-i.documentOrder:n.tabIndex-i.tabIndex).map(n=>n.node).concat(t)}function yye(){return!0}function nee(e){const{children:t,disableAutoFocus:r=!1,disableEnforceFocus:n=!1,disableRestoreFocus:i=!1,getTabbable:o=vye,isEnabled:a=yye,open:s}=e,l=P.useRef(!1),u=P.useRef(null),d=P.useRef(null),c=P.useRef(null),h=P.useRef(null),f=P.useRef(!1),m=P.useRef(null),p=nn(t.ref,m),g=P.useRef(null);P.useEffect(()=>{!s||!m.current||(f.current=!r)},[r,s]),P.useEffect(()=>{if(!s||!m.current)return;const y=si(m.current);return m.current.contains(y.activeElement)||(m.current.hasAttribute("tabIndex")||m.current.setAttribute("tabIndex","-1"),f.current&&m.current.focus()),()=>{i||(c.current&&c.current.focus&&(l.current=!0,c.current.focus()),c.current=null)}},[s]),P.useEffect(()=>{if(!s||!m.current)return;const y=si(m.current),x=_=>{const{current:C}=m;if(C!==null){if(!y.hasFocus()||n||!a()||l.current){l.current=!1;return}if(!C.contains(y.activeElement)){if(_&&h.current!==_.target||y.activeElement!==h.current)h.current=null;else if(h.current!==null)return;if(!f.current)return;let M=[];if((y.activeElement===u.current||y.activeElement===d.current)&&(M=o(m.current)),M.length>0){var E,A;const I=!!((E=g.current)!=null&&E.shiftKey&&((A=g.current)==null?void 0:A.key)==="Tab"),O=M[0],T=M[M.length-1];typeof O!="string"&&typeof T!="string"&&(I?T.focus():O.focus())}else C.focus()}}},S=_=>{g.current=_,!(n||!a()||_.key!=="Tab")&&y.activeElement===m.current&&_.shiftKey&&(l.current=!0,d.current&&d.current.focus())};y.addEventListener("focusin",x),y.addEventListener("keydown",S,!0);const w=setInterval(()=>{y.activeElement&&y.activeElement.tagName==="BODY"&&x(null)},50);return()=>{clearInterval(w),y.removeEventListener("focusin",x),y.removeEventListener("keydown",S,!0)}},[r,n,i,a,s,o]);const v=y=>{c.current===null&&(c.current=y.relatedTarget),f.current=!0,h.current=y.target;const x=t.props.onFocus;x&&x(y)},b=y=>{c.current===null&&(c.current=y.relatedTarget),f.current=!0};return B.jsxs(P.Fragment,{children:[B.jsx("div",{tabIndex:s?0:-1,onFocus:b,ref:u,"data-testid":"sentinelStart"}),P.cloneElement(t,{ref:p,onFocus:v}),B.jsx("div",{tabIndex:s?0:-1,onFocus:b,ref:d,"data-testid":"sentinelEnd"})]})}var Ss="top",ql="bottom",Kl="right",_s="left",EF="auto",_S=[Ss,ql,Kl,_s],By="start",iw="end",bye="clippingParents",iee="viewport",kb="popper",xye="reference",nV=_S.reduce(function(e,t){return e.concat([t+"-"+By,t+"-"+iw])},[]),oee=[].concat(_S,[EF]).reduce(function(e,t){return e.concat([t,t+"-"+By,t+"-"+iw])},[]),wye="beforeRead",Sye="read",_ye="afterRead",Cye="beforeMain",Aye="main",Eye="afterMain",Mye="beforeWrite",Pye="write",Tye="afterWrite",Oye=[wye,Sye,_ye,Cye,Aye,Eye,Mye,Pye,Tye];function Kc(e){return e?(e.nodeName||"").toLowerCase():null}function rl(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Um(e){var t=rl(e).Element;return e instanceof t||e instanceof Element}function Fl(e){var t=rl(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function MF(e){if(typeof ShadowRoot>"u")return!1;var t=rl(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Iye(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var n=t.styles[r]||{},i=t.attributes[r]||{},o=t.elements[r];!Fl(o)||!Kc(o)||(Object.assign(o.style,n),Object.keys(i).forEach(function(a){var s=i[a];s===!1?o.removeAttribute(a):o.setAttribute(a,s===!0?"":s)}))})}function Dye(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(n){var i=t.elements[n],o=t.attributes[n]||{},a=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:r[n]),s=a.reduce(function(l,u){return l[u]="",l},{});!Fl(i)||!Kc(i)||(Object.assign(i.style,s),Object.keys(o).forEach(function(l){i.removeAttribute(l)}))})}}const Rye={name:"applyStyles",enabled:!0,phase:"write",fn:Iye,effect:Dye,requires:["computeStyles"]};function Bc(e){return e.split("-")[0]}var ym=Math.max,kE=Math.min,Fy=Math.round;function x3(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function aee(){return!/^((?!chrome|android).)*safari/i.test(x3())}function jy(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),i=1,o=1;t&&Fl(e)&&(i=e.offsetWidth>0&&Fy(n.width)/e.offsetWidth||1,o=e.offsetHeight>0&&Fy(n.height)/e.offsetHeight||1);var a=Um(e)?rl(e):window,s=a.visualViewport,l=!aee()&&r,u=(n.left+(l&&s?s.offsetLeft:0))/i,d=(n.top+(l&&s?s.offsetTop:0))/o,c=n.width/i,h=n.height/o;return{width:c,height:h,top:d,right:u+c,bottom:d+h,left:u,x:u,y:d}}function PF(e){var t=jy(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function see(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&MF(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function ah(e){return rl(e).getComputedStyle(e)}function kye(e){return["table","td","th"].indexOf(Kc(e))>=0}function up(e){return((Um(e)?e.ownerDocument:e.document)||window.document).documentElement}function ZT(e){return Kc(e)==="html"?e:e.assignedSlot||e.parentNode||(MF(e)?e.host:null)||up(e)}function iV(e){return!Fl(e)||ah(e).position==="fixed"?null:e.offsetParent}function Lye(e){var t=/firefox/i.test(x3()),r=/Trident/i.test(x3());if(r&&Fl(e)){var n=ah(e);if(n.position==="fixed")return null}var i=ZT(e);for(MF(i)&&(i=i.host);Fl(i)&&["html","body"].indexOf(Kc(i))<0;){var o=ah(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function CS(e){for(var t=rl(e),r=iV(e);r&&kye(r)&&ah(r).position==="static";)r=iV(r);return r&&(Kc(r)==="html"||Kc(r)==="body"&&ah(r).position==="static")?t:r||Lye(e)||t}function TF(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function a1(e,t,r){return ym(e,kE(t,r))}function Nye(e,t,r){var n=a1(e,t,r);return n>r?r:n}function lee(){return{top:0,right:0,bottom:0,left:0}}function uee(e){return Object.assign({},lee(),e)}function cee(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var zye=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,uee(typeof t!="number"?t:cee(t,_S))};function Bye(e){var t,r=e.state,n=e.name,i=e.options,o=r.elements.arrow,a=r.modifiersData.popperOffsets,s=Bc(r.placement),l=TF(s),u=[_s,Kl].indexOf(s)>=0,d=u?"height":"width";if(!(!o||!a)){var c=zye(i.padding,r),h=PF(o),f=l==="y"?Ss:_s,m=l==="y"?ql:Kl,p=r.rects.reference[d]+r.rects.reference[l]-a[l]-r.rects.popper[d],g=a[l]-r.rects.reference[l],v=CS(o),b=v?l==="y"?v.clientHeight||0:v.clientWidth||0:0,y=p/2-g/2,x=c[f],S=b-h[d]-c[m],w=b/2-h[d]/2+y,_=a1(x,w,S),C=l;r.modifiersData[n]=(t={},t[C]=_,t.centerOffset=_-w,t)}}function Fye(e){var t=e.state,r=e.options,n=r.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||see(t.elements.popper,i)&&(t.elements.arrow=i))}const jye={name:"arrow",enabled:!0,phase:"main",fn:Bye,effect:Fye,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Uy(e){return e.split("-")[1]}var Uye={top:"auto",right:"auto",bottom:"auto",left:"auto"};function $ye(e,t){var r=e.x,n=e.y,i=t.devicePixelRatio||1;return{x:Fy(r*i)/i||0,y:Fy(n*i)/i||0}}function oV(e){var t,r=e.popper,n=e.popperRect,i=e.placement,o=e.variation,a=e.offsets,s=e.position,l=e.gpuAcceleration,u=e.adaptive,d=e.roundOffsets,c=e.isFixed,h=a.x,f=h===void 0?0:h,m=a.y,p=m===void 0?0:m,g=typeof d=="function"?d({x:f,y:p}):{x:f,y:p};f=g.x,p=g.y;var v=a.hasOwnProperty("x"),b=a.hasOwnProperty("y"),y=_s,x=Ss,S=window;if(u){var w=CS(r),_="clientHeight",C="clientWidth";if(w===rl(r)&&(w=up(r),ah(w).position!=="static"&&s==="absolute"&&(_="scrollHeight",C="scrollWidth")),w=w,i===Ss||(i===_s||i===Kl)&&o===iw){x=ql;var E=c&&w===S&&S.visualViewport?S.visualViewport.height:w[_];p-=E-n.height,p*=l?1:-1}if(i===_s||(i===Ss||i===ql)&&o===iw){y=Kl;var A=c&&w===S&&S.visualViewport?S.visualViewport.width:w[C];f-=A-n.width,f*=l?1:-1}}var M=Object.assign({position:s},u&&Uye),I=d===!0?$ye({x:f,y:p},rl(r)):{x:f,y:p};if(f=I.x,p=I.y,l){var O;return Object.assign({},M,(O={},O[x]=b?"0":"",O[y]=v?"0":"",O.transform=(S.devicePixelRatio||1)<=1?"translate("+f+"px, "+p+"px)":"translate3d("+f+"px, "+p+"px, 0)",O))}return Object.assign({},M,(t={},t[x]=b?p+"px":"",t[y]=v?f+"px":"",t.transform="",t))}function Vye(e){var t=e.state,r=e.options,n=r.gpuAcceleration,i=n===void 0?!0:n,o=r.adaptive,a=o===void 0?!0:o,s=r.roundOffsets,l=s===void 0?!0:s,u={placement:Bc(t.placement),variation:Uy(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,oV(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,oV(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Hye={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Vye,data:{}};var L_={passive:!0};function Gye(e){var t=e.state,r=e.instance,n=e.options,i=n.scroll,o=i===void 0?!0:i,a=n.resize,s=a===void 0?!0:a,l=rl(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&u.forEach(function(d){d.addEventListener("scroll",r.update,L_)}),s&&l.addEventListener("resize",r.update,L_),function(){o&&u.forEach(function(d){d.removeEventListener("scroll",r.update,L_)}),s&&l.removeEventListener("resize",r.update,L_)}}const Wye={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Gye,data:{}};var qye={left:"right",right:"left",bottom:"top",top:"bottom"};function BA(e){return e.replace(/left|right|bottom|top/g,function(t){return qye[t]})}var Kye={start:"end",end:"start"};function aV(e){return e.replace(/start|end/g,function(t){return Kye[t]})}function OF(e){var t=rl(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function IF(e){return jy(up(e)).left+OF(e).scrollLeft}function Xye(e,t){var r=rl(e),n=up(e),i=r.visualViewport,o=n.clientWidth,a=n.clientHeight,s=0,l=0;if(i){o=i.width,a=i.height;var u=aee();(u||!u&&t==="fixed")&&(s=i.offsetLeft,l=i.offsetTop)}return{width:o,height:a,x:s+IF(e),y:l}}function Yye(e){var t,r=up(e),n=OF(e),i=(t=e.ownerDocument)==null?void 0:t.body,o=ym(r.scrollWidth,r.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=ym(r.scrollHeight,r.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-n.scrollLeft+IF(e),l=-n.scrollTop;return ah(i||r).direction==="rtl"&&(s+=ym(r.clientWidth,i?i.clientWidth:0)-o),{width:o,height:a,x:s,y:l}}function DF(e){var t=ah(e),r=t.overflow,n=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+i+n)}function dee(e){return["html","body","#document"].indexOf(Kc(e))>=0?e.ownerDocument.body:Fl(e)&&DF(e)?e:dee(ZT(e))}function s1(e,t){var r;t===void 0&&(t=[]);var n=dee(e),i=n===((r=e.ownerDocument)==null?void 0:r.body),o=rl(n),a=i?[o].concat(o.visualViewport||[],DF(n)?n:[]):n,s=t.concat(a);return i?s:s.concat(s1(ZT(a)))}function w3(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Qye(e,t){var r=jy(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function sV(e,t,r){return t===iee?w3(Xye(e,r)):Um(t)?Qye(t,r):w3(Yye(up(e)))}function Zye(e){var t=s1(ZT(e)),r=["absolute","fixed"].indexOf(ah(e).position)>=0,n=r&&Fl(e)?CS(e):e;return Um(n)?t.filter(function(i){return Um(i)&&see(i,n)&&Kc(i)!=="body"}):[]}function Jye(e,t,r,n){var i=t==="clippingParents"?Zye(e):[].concat(t),o=[].concat(i,[r]),a=o[0],s=o.reduce(function(l,u){var d=sV(e,u,n);return l.top=ym(d.top,l.top),l.right=kE(d.right,l.right),l.bottom=kE(d.bottom,l.bottom),l.left=ym(d.left,l.left),l},sV(e,a,n));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function hee(e){var t=e.reference,r=e.element,n=e.placement,i=n?Bc(n):null,o=n?Uy(n):null,a=t.x+t.width/2-r.width/2,s=t.y+t.height/2-r.height/2,l;switch(i){case Ss:l={x:a,y:t.y-r.height};break;case ql:l={x:a,y:t.y+t.height};break;case Kl:l={x:t.x+t.width,y:s};break;case _s:l={x:t.x-r.width,y:s};break;default:l={x:t.x,y:t.y}}var u=i?TF(i):null;if(u!=null){var d=u==="y"?"height":"width";switch(o){case By:l[u]=l[u]-(t[d]/2-r[d]/2);break;case iw:l[u]=l[u]+(t[d]/2-r[d]/2);break}}return l}function ow(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=n===void 0?e.placement:n,o=r.strategy,a=o===void 0?e.strategy:o,s=r.boundary,l=s===void 0?bye:s,u=r.rootBoundary,d=u===void 0?iee:u,c=r.elementContext,h=c===void 0?kb:c,f=r.altBoundary,m=f===void 0?!1:f,p=r.padding,g=p===void 0?0:p,v=uee(typeof g!="number"?g:cee(g,_S)),b=h===kb?xye:kb,y=e.rects.popper,x=e.elements[m?b:h],S=Jye(Um(x)?x:x.contextElement||up(e.elements.popper),l,d,a),w=jy(e.elements.reference),_=hee({reference:w,element:y,strategy:"absolute",placement:i}),C=w3(Object.assign({},y,_)),E=h===kb?C:w,A={top:S.top-E.top+v.top,bottom:E.bottom-S.bottom+v.bottom,left:S.left-E.left+v.left,right:E.right-S.right+v.right},M=e.modifiersData.offset;if(h===kb&&M){var I=M[i];Object.keys(A).forEach(function(O){var T=[Kl,ql].indexOf(O)>=0?1:-1,D=[Ss,ql].indexOf(O)>=0?"y":"x";A[O]+=I[D]*T})}return A}function e0e(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=r.boundary,o=r.rootBoundary,a=r.padding,s=r.flipVariations,l=r.allowedAutoPlacements,u=l===void 0?oee:l,d=Uy(n),c=d?s?nV:nV.filter(function(m){return Uy(m)===d}):_S,h=c.filter(function(m){return u.indexOf(m)>=0});h.length===0&&(h=c);var f=h.reduce(function(m,p){return m[p]=ow(e,{placement:p,boundary:i,rootBoundary:o,padding:a})[Bc(p)],m},{});return Object.keys(f).sort(function(m,p){return f[m]-f[p]})}function t0e(e){if(Bc(e)===EF)return[];var t=BA(e);return[aV(e),t,aV(t)]}function r0e(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var i=r.mainAxis,o=i===void 0?!0:i,a=r.altAxis,s=a===void 0?!0:a,l=r.fallbackPlacements,u=r.padding,d=r.boundary,c=r.rootBoundary,h=r.altBoundary,f=r.flipVariations,m=f===void 0?!0:f,p=r.allowedAutoPlacements,g=t.options.placement,v=Bc(g),b=v===g,y=l||(b||!m?[BA(g)]:t0e(g)),x=[g].concat(y).reduce(function(V,Q){return V.concat(Bc(Q)===EF?e0e(t,{placement:Q,boundary:d,rootBoundary:c,padding:u,flipVariations:m,allowedAutoPlacements:p}):Q)},[]),S=t.rects.reference,w=t.rects.popper,_=new Map,C=!0,E=x[0],A=0;A<x.length;A++){var M=x[A],I=Bc(M),O=Uy(M)===By,T=[Ss,ql].indexOf(I)>=0,D=T?"width":"height",N=ow(t,{placement:M,boundary:d,rootBoundary:c,altBoundary:h,padding:u}),k=T?O?Kl:_s:O?ql:Ss;S[D]>w[D]&&(k=BA(k));var R=BA(k),z=[];if(o&&z.push(N[I]<=0),s&&z.push(N[k]<=0,N[R]<=0),z.every(function(V){return V})){E=M,C=!1;break}_.set(M,z)}if(C)for(var j=m?3:1,$=function(Q){var X=x.find(function(ne){var J=_.get(ne);if(J)return J.slice(0,Q).every(function(W){return W})});if(X)return E=X,"break"},U=j;U>0;U--){var H=$(U);if(H==="break")break}t.placement!==E&&(t.modifiersData[n]._skip=!0,t.placement=E,t.reset=!0)}}const n0e={name:"flip",enabled:!0,phase:"main",fn:r0e,requiresIfExists:["offset"],data:{_skip:!1}};function lV(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function uV(e){return[Ss,Kl,ql,_s].some(function(t){return e[t]>=0})}function i0e(e){var t=e.state,r=e.name,n=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,a=ow(t,{elementContext:"reference"}),s=ow(t,{altBoundary:!0}),l=lV(a,n),u=lV(s,i,o),d=uV(l),c=uV(u);t.modifiersData[r]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:d,hasPopperEscaped:c},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":c})}const o0e={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:i0e};function a0e(e,t,r){var n=Bc(e),i=[_s,Ss].indexOf(n)>=0?-1:1,o=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,a=o[0],s=o[1];return a=a||0,s=(s||0)*i,[_s,Kl].indexOf(n)>=0?{x:s,y:a}:{x:a,y:s}}function s0e(e){var t=e.state,r=e.options,n=e.name,i=r.offset,o=i===void 0?[0,0]:i,a=oee.reduce(function(d,c){return d[c]=a0e(c,t.rects,o),d},{}),s=a[t.placement],l=s.x,u=s.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[n]=a}const l0e={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:s0e};function u0e(e){var t=e.state,r=e.name;t.modifiersData[r]=hee({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const c0e={name:"popperOffsets",enabled:!0,phase:"read",fn:u0e,data:{}};function d0e(e){return e==="x"?"y":"x"}function h0e(e){var t=e.state,r=e.options,n=e.name,i=r.mainAxis,o=i===void 0?!0:i,a=r.altAxis,s=a===void 0?!1:a,l=r.boundary,u=r.rootBoundary,d=r.altBoundary,c=r.padding,h=r.tether,f=h===void 0?!0:h,m=r.tetherOffset,p=m===void 0?0:m,g=ow(t,{boundary:l,rootBoundary:u,padding:c,altBoundary:d}),v=Bc(t.placement),b=Uy(t.placement),y=!b,x=TF(v),S=d0e(x),w=t.modifiersData.popperOffsets,_=t.rects.reference,C=t.rects.popper,E=typeof p=="function"?p(Object.assign({},t.rects,{placement:t.placement})):p,A=typeof E=="number"?{mainAxis:E,altAxis:E}:Object.assign({mainAxis:0,altAxis:0},E),M=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,I={x:0,y:0};if(w){if(o){var O,T=x==="y"?Ss:_s,D=x==="y"?ql:Kl,N=x==="y"?"height":"width",k=w[x],R=k+g[T],z=k-g[D],j=f?-C[N]/2:0,$=b===By?_[N]:C[N],U=b===By?-C[N]:-_[N],H=t.elements.arrow,V=f&&H?PF(H):{width:0,height:0},Q=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:lee(),X=Q[T],ne=Q[D],J=a1(0,_[N],V[N]),W=y?_[N]/2-j-J-X-A.mainAxis:$-J-X-A.mainAxis,te=y?-_[N]/2+j+J+ne+A.mainAxis:U+J+ne+A.mainAxis,Z=t.elements.arrow&&CS(t.elements.arrow),q=Z?x==="y"?Z.clientTop||0:Z.clientLeft||0:0,ie=(O=M==null?void 0:M[x])!=null?O:0,he=k+W-ie-q,ae=k+te-ie,be=a1(f?kE(R,he):R,k,f?ym(z,ae):z);w[x]=be,I[x]=be-k}if(s){var ye,Se=x==="x"?Ss:_s,me=x==="x"?ql:Kl,Pe=w[S],Ae=S==="y"?"height":"width",K=Pe+g[Se],G=Pe-g[me],de=[Ss,_s].indexOf(v)!==-1,Ee=(ye=M==null?void 0:M[S])!=null?ye:0,Me=de?K:Pe-_[Ae]-C[Ae]-Ee+A.altAxis,Le=de?Pe+_[Ae]+C[Ae]-Ee-A.altAxis:G,De=f&&de?Nye(Me,Pe,Le):a1(f?Me:K,Pe,f?Le:G);w[S]=De,I[S]=De-Pe}t.modifiersData[n]=I}}const f0e={name:"preventOverflow",enabled:!0,phase:"main",fn:h0e,requiresIfExists:["offset"]};function p0e(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function m0e(e){return e===rl(e)||!Fl(e)?OF(e):p0e(e)}function g0e(e){var t=e.getBoundingClientRect(),r=Fy(t.width)/e.offsetWidth||1,n=Fy(t.height)/e.offsetHeight||1;return r!==1||n!==1}function v0e(e,t,r){r===void 0&&(r=!1);var n=Fl(t),i=Fl(t)&&g0e(t),o=up(t),a=jy(e,i,r),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!r)&&((Kc(t)!=="body"||DF(o))&&(s=m0e(t)),Fl(t)?(l=jy(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):o&&(l.x=IF(o))),{x:a.left+s.scrollLeft-l.x,y:a.top+s.scrollTop-l.y,width:a.width,height:a.height}}function y0e(e){var t=new Map,r=new Set,n=[];e.forEach(function(o){t.set(o.name,o)});function i(o){r.add(o.name);var a=[].concat(o.requires||[],o.requiresIfExists||[]);a.forEach(function(s){if(!r.has(s)){var l=t.get(s);l&&i(l)}}),n.push(o)}return e.forEach(function(o){r.has(o.name)||i(o)}),n}function b0e(e){var t=y0e(e);return Oye.reduce(function(r,n){return r.concat(t.filter(function(i){return i.phase===n}))},[])}function x0e(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function w0e(e){var t=e.reduce(function(r,n){var i=r[n.name];return r[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var cV={placement:"bottom",modifiers:[],strategy:"absolute"};function dV(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function S0e(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,i=t.defaultOptions,o=i===void 0?cV:i;return function(s,l,u){u===void 0&&(u=o);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},cV,o),modifiersData:{},elements:{reference:s,popper:l},attributes:{},styles:{}},c=[],h=!1,f={state:d,setOptions:function(v){var b=typeof v=="function"?v(d.options):v;p(),d.options=Object.assign({},o,d.options,b),d.scrollParents={reference:Um(s)?s1(s):s.contextElement?s1(s.contextElement):[],popper:s1(l)};var y=b0e(w0e([].concat(n,d.options.modifiers)));return d.orderedModifiers=y.filter(function(x){return x.enabled}),m(),f.update()},forceUpdate:function(){if(!h){var v=d.elements,b=v.reference,y=v.popper;if(dV(b,y)){d.rects={reference:v0e(b,CS(y),d.options.strategy==="fixed"),popper:PF(y)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(A){return d.modifiersData[A.name]=Object.assign({},A.data)});for(var x=0;x<d.orderedModifiers.length;x++){if(d.reset===!0){d.reset=!1,x=-1;continue}var S=d.orderedModifiers[x],w=S.fn,_=S.options,C=_===void 0?{}:_,E=S.name;typeof w=="function"&&(d=w({state:d,options:C,name:E,instance:f})||d)}}}},update:x0e(function(){return new Promise(function(g){f.forceUpdate(),g(d)})}),destroy:function(){p(),h=!0}};if(!dV(s,l))return f;f.setOptions(u).then(function(g){!h&&u.onFirstUpdate&&u.onFirstUpdate(g)});function m(){d.orderedModifiers.forEach(function(g){var v=g.name,b=g.options,y=b===void 0?{}:b,x=g.effect;if(typeof x=="function"){var S=x({state:d,name:v,instance:f,options:y}),w=function(){};c.push(S||w)}})}function p(){c.forEach(function(g){return g()}),c=[]}return f}}var _0e=[Wye,c0e,Hye,Rye,l0e,n0e,f0e,jye,o0e],C0e=S0e({defaultModifiers:_0e});function A0e(e){return typeof e=="function"?e():e}const fee=P.forwardRef(function(t,r){const{children:n,container:i,disablePortal:o=!1}=t,[a,s]=P.useState(null),l=nn(P.isValidElement(n)?n.ref:null,r);if(li(()=>{o||s(A0e(i)||document.body)},[i,o]),li(()=>{if(a&&!o)return Z1(r,a),()=>{Z1(r,null)}},[r,a,o]),o){if(P.isValidElement(n)){const u={ref:l};return P.cloneElement(n,u)}return B.jsx(P.Fragment,{children:n})}return B.jsx(P.Fragment,{children:a&&yh.createPortal(n,a)})});function E0e(e){return ur("MuiPopper",e)}cr("MuiPopper",["root"]);const M0e=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],P0e=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function T0e(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function S3(e){return typeof e=="function"?e():e}function O0e(e){return e.nodeType!==void 0}const I0e=()=>lt({root:["root"]},sye(E0e)),D0e={},R0e=P.forwardRef(function(t,r){var n;const{anchorEl:i,children:o,direction:a,disablePortal:s,modifiers:l,open:u,placement:d,popperOptions:c,popperRef:h,slotProps:f={},slots:m={},TransitionProps:p}=t,g=Ie(t,M0e),v=P.useRef(null),b=nn(v,r),y=P.useRef(null),x=nn(y,h),S=P.useRef(x);li(()=>{S.current=x},[x]),P.useImperativeHandle(h,()=>y.current,[]);const w=T0e(d,a),[_,C]=P.useState(w),[E,A]=P.useState(S3(i));P.useEffect(()=>{y.current&&y.current.forceUpdate()}),P.useEffect(()=>{i&&A(S3(i))},[i]),li(()=>{if(!E||!u)return;const D=R=>{C(R.placement)};let N=[{name:"preventOverflow",options:{altBoundary:s}},{name:"flip",options:{altBoundary:s}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:R})=>{D(R)}}];l!=null&&(N=N.concat(l)),c&&c.modifiers!=null&&(N=N.concat(c.modifiers));const k=C0e(E,v.current,L({placement:w},c,{modifiers:N}));return S.current(k),()=>{k.destroy(),S.current(null)}},[E,s,l,u,c,w]);const M={placement:_};p!==null&&(M.TransitionProps=p);const I=I0e(),O=(n=m.root)!=null?n:"div",T=oh({elementType:O,externalSlotProps:f.root,externalForwardedProps:g,additionalProps:{role:"tooltip",ref:b},ownerState:t,className:I.root});return B.jsx(O,L({},T,{children:typeof o=="function"?o(M):o}))}),k0e=P.forwardRef(function(t,r){const{anchorEl:n,children:i,container:o,direction:a="ltr",disablePortal:s=!1,keepMounted:l=!1,modifiers:u,open:d,placement:c="bottom",popperOptions:h=D0e,popperRef:f,style:m,transition:p=!1,slotProps:g={},slots:v={}}=t,b=Ie(t,P0e),[y,x]=P.useState(!0),S=()=>{x(!1)},w=()=>{x(!0)};if(!l&&!d&&(!p||y))return null;let _;if(o)_=o;else if(n){const A=S3(n);_=A&&O0e(A)?si(A).body:si(null).body}const C=!d&&l&&(!p||y)?"none":void 0,E=p?{in:d,onEnter:S,onExited:w}:void 0;return B.jsx(fee,{disablePortal:s,container:_,children:B.jsx(R0e,L({anchorEl:n,direction:a,disablePortal:s,modifiers:u,ref:r,open:p?!y:d,placement:c,popperOptions:h,popperRef:f,slotProps:g,slots:v},b,{style:L({position:"fixed",top:0,left:0,display:C},m),TransitionProps:E,children:i}))})});function L0e(e){const t=si(e);return t.body===e?qc(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function l1(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function hV(e){return parseInt(qc(e).getComputedStyle(e).paddingRight,10)||0}function N0e(e){const r=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName)!==-1,n=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return r||n}function fV(e,t,r,n,i){const o=[t,r,...n];[].forEach.call(e.children,a=>{const s=o.indexOf(a)===-1,l=!N0e(a);s&&l&&l1(a,i)})}function uI(e,t){let r=-1;return e.some((n,i)=>t(n)?(r=i,!0):!1),r}function z0e(e,t){const r=[],n=e.container;if(!t.disableScrollLock){if(L0e(n)){const a=xJ(si(n));r.push({value:n.style.paddingRight,property:"padding-right",el:n}),n.style.paddingRight=`${hV(n)+a}px`;const s=si(n).querySelectorAll(".mui-fixed");[].forEach.call(s,l=>{r.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${hV(l)+a}px`})}let o;if(n.parentNode instanceof DocumentFragment)o=si(n).body;else{const a=n.parentElement,s=qc(n);o=(a==null?void 0:a.nodeName)==="HTML"&&s.getComputedStyle(a).overflowY==="scroll"?a:n}r.push({value:o.style.overflow,property:"overflow",el:o},{value:o.style.overflowX,property:"overflow-x",el:o},{value:o.style.overflowY,property:"overflow-y",el:o}),o.style.overflow="hidden"}return()=>{r.forEach(({value:o,el:a,property:s})=>{o?a.style.setProperty(s,o):a.style.removeProperty(s)})}}function B0e(e){const t=[];return[].forEach.call(e.children,r=>{r.getAttribute("aria-hidden")==="true"&&t.push(r)}),t}class F0e{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,r){let n=this.modals.indexOf(t);if(n!==-1)return n;n=this.modals.length,this.modals.push(t),t.modalRef&&l1(t.modalRef,!1);const i=B0e(r);fV(r,t.mount,t.modalRef,i,!0);const o=uI(this.containers,a=>a.container===r);return o!==-1?(this.containers[o].modals.push(t),n):(this.containers.push({modals:[t],container:r,restore:null,hiddenSiblings:i}),n)}mount(t,r){const n=uI(this.containers,o=>o.modals.indexOf(t)!==-1),i=this.containers[n];i.restore||(i.restore=z0e(i,r))}remove(t,r=!0){const n=this.modals.indexOf(t);if(n===-1)return n;const i=uI(this.containers,a=>a.modals.indexOf(t)!==-1),o=this.containers[i];if(o.modals.splice(o.modals.indexOf(t),1),this.modals.splice(n,1),o.modals.length===0)o.restore&&o.restore(),t.modalRef&&l1(t.modalRef,r),fV(o.container,t.mount,t.modalRef,o.hiddenSiblings,!1),this.containers.splice(i,1);else{const a=o.modals[o.modals.length-1];a.modalRef&&l1(a.modalRef,!1)}return n}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}function j0e(e){return typeof e=="function"?e():e}function U0e(e){return e?e.props.hasOwnProperty("in"):!1}const $0e=new F0e;function V0e(e){const{container:t,disableEscapeKeyDown:r=!1,disableScrollLock:n=!1,manager:i=$0e,closeAfterTransition:o=!1,onTransitionEnter:a,onTransitionExited:s,children:l,onClose:u,open:d,rootRef:c}=e,h=P.useRef({}),f=P.useRef(null),m=P.useRef(null),p=nn(m,c),[g,v]=P.useState(!d),b=U0e(l);let y=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(y=!1);const x=()=>si(f.current),S=()=>(h.current.modalRef=m.current,h.current.mount=f.current,h.current),w=()=>{i.mount(S(),{disableScrollLock:n}),m.current&&(m.current.scrollTop=0)},_=Wi(()=>{const N=j0e(t)||x().body;i.add(S(),N),m.current&&w()}),C=P.useCallback(()=>i.isTopModal(S()),[i]),E=Wi(N=>{f.current=N,N&&(d&&C()?w():m.current&&l1(m.current,y))}),A=P.useCallback(()=>{i.remove(S(),y)},[y,i]);P.useEffect(()=>()=>{A()},[A]),P.useEffect(()=>{d?_():(!b||!o)&&A()},[d,A,b,o,_]);const M=N=>k=>{var R;(R=N.onKeyDown)==null||R.call(N,k),!(k.key!=="Escape"||!C())&&(r||(k.stopPropagation(),u&&u(k,"escapeKeyDown")))},I=N=>k=>{var R;(R=N.onClick)==null||R.call(N,k),k.target===k.currentTarget&&u&&u(k,"backdropClick")};return{getRootProps:(N={})=>{const k=tee(e);delete k.onTransitionEnter,delete k.onTransitionExited;const R=L({},k,N);return L({role:"presentation"},R,{onKeyDown:M(R),ref:p})},getBackdropProps:(N={})=>{const k=N;return L({"aria-hidden":!0},k,{onClick:I(k),open:d})},getTransitionProps:()=>{const N=()=>{v(!1),a&&a()},k=()=>{v(!0),s&&s(),o&&A()};return{onEnter:h3(N,l.props.onEnter),onExited:h3(k,l.props.onExited)}},rootRef:p,portalRef:E,isTopModal:C,exited:g,hasTransition:b}}const H0e=["onChange","maxRows","minRows","style","value"];function N_(e){return parseInt(e,10)||0}const G0e={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function pV(e){return e==null||Object.keys(e).length===0||e.outerHeightStyle===0&&!e.overflow}const W0e=P.forwardRef(function(t,r){const{onChange:n,maxRows:i,minRows:o=1,style:a,value:s}=t,l=Ie(t,H0e),{current:u}=P.useRef(s!=null),d=P.useRef(null),c=nn(r,d),h=P.useRef(null),f=P.useRef(0),[m,p]=P.useState({outerHeightStyle:0}),g=P.useCallback(()=>{const S=d.current,_=qc(S).getComputedStyle(S);if(_.width==="0px")return{outerHeightStyle:0};const C=h.current;C.style.width=_.width,C.value=S.value||t.placeholder||"x",C.value.slice(-1)===`
`&&(C.value+=" ");const E=_.boxSizing,A=N_(_.paddingBottom)+N_(_.paddingTop),M=N_(_.borderBottomWidth)+N_(_.borderTopWidth),I=C.scrollHeight;C.value="x";const O=C.scrollHeight;let T=I;o&&(T=Math.max(Number(o)*O,T)),i&&(T=Math.min(Number(i)*O,T)),T=Math.max(T,O);const D=T+(E==="border-box"?A+M:0),N=Math.abs(T-I)<=1;return{outerHeightStyle:D,overflow:N}},[i,o,t.placeholder]),v=(S,w)=>{const{outerHeightStyle:_,overflow:C}=w;return f.current<20&&(_>0&&Math.abs((S.outerHeightStyle||0)-_)>1||S.overflow!==C)?(f.current+=1,{overflow:C,outerHeightStyle:_}):S},b=P.useCallback(()=>{const S=g();pV(S)||p(w=>v(w,S))},[g]),y=()=>{const S=g();pV(S)||yh.flushSync(()=>{p(w=>v(w,S))})};P.useEffect(()=>{const S=yS(()=>{f.current=0,d.current&&y()});let w;const _=d.current,C=qc(_);return C.addEventListener("resize",S),typeof ResizeObserver<"u"&&(w=new ResizeObserver(S),w.observe(_)),()=>{S.clear(),C.removeEventListener("resize",S),w&&w.disconnect()}}),li(()=>{b()}),P.useEffect(()=>{f.current=0},[s]);const x=S=>{f.current=0,u||b(),n&&n(S)};return B.jsxs(P.Fragment,{children:[B.jsx("textarea",L({value:s,onChange:x,ref:c,rows:o,style:L({height:m.outerHeightStyle,overflow:m.overflow?"hidden":void 0},a)},l)),B.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:h,tabIndex:-1,style:L({},G0e.shadow,a,{paddingTop:0,paddingBottom:0})})]})});function mV(e){return typeof e.normalize<"u"?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function pee(e={}){const{ignoreAccents:t=!0,ignoreCase:r=!0,limit:n,matchFrom:i="any",stringify:o,trim:a=!1}=e;return(s,{inputValue:l,getOptionLabel:u})=>{let d=a?l.trim():l;r&&(d=d.toLowerCase()),t&&(d=mV(d));const c=d?s.filter(h=>{let f=(o||u)(h);return r&&(f=f.toLowerCase()),t&&(f=mV(f)),i==="start"?f.indexOf(d)===0:f.indexOf(d)>-1}):s;return typeof n=="number"?c.slice(0,n):c}}function cI(e,t){for(let r=0;r<e.length;r+=1)if(t(e[r]))return r;return-1}const q0e=pee(),gV=5,K0e=e=>{var t;return e.current!==null&&((t=e.current.parentElement)==null?void 0:t.contains(document.activeElement))};function X0e(e){const{unstable_isActiveElementInListbox:t=K0e,unstable_classNamePrefix:r="Mui",autoComplete:n=!1,autoHighlight:i=!1,autoSelect:o=!1,blurOnSelect:a=!1,clearOnBlur:s=!e.freeSolo,clearOnEscape:l=!1,componentName:u="useAutocomplete",defaultValue:d=e.multiple?[]:null,disableClearable:c=!1,disableCloseOnSelect:h=!1,disabled:f,disabledItemsFocusable:m=!1,disableListWrap:p=!1,filterOptions:g=q0e,filterSelectedOptions:v=!1,freeSolo:b=!1,getOptionDisabled:y,getOptionLabel:x=re=>{var oe;return(oe=re.label)!=null?oe:re},groupBy:S,handleHomeEndKeys:w=!e.freeSolo,id:_,includeInputInList:C=!1,inputValue:E,isOptionEqualToValue:A=(re,oe)=>re===oe,multiple:M=!1,onChange:I,onClose:O,onHighlightChange:T,onInputChange:D,onOpen:N,open:k,openOnFocus:R=!1,options:z,readOnly:j=!1,selectOnFocus:$=!e.freeSolo,value:U}=e,H=Oi(_);let V=x;V=re=>{const oe=x(re);return typeof oe!="string"?String(oe):oe};const Q=P.useRef(!1),X=P.useRef(!0),ne=P.useRef(null),J=P.useRef(null),[W,te]=P.useState(null),[Z,q]=P.useState(-1),ie=i?0:-1,he=P.useRef(ie),[ae,be]=Rf({controlled:U,default:d,name:u}),[ye,Se]=Rf({controlled:E,default:"",name:u,state:"inputValue"}),[me,Pe]=P.useState(!1),Ae=P.useCallback((re,oe)=>{if(!(M?ae.length<oe.length:oe!==null)&&!s)return;let we;if(M)we="";else if(oe==null)we="";else{const Be=V(oe);we=typeof Be=="string"?Be:""}ye!==we&&(Se(we),D&&D(re,we,"reset"))},[V,ye,M,D,Se,s,ae]),[K,G]=Rf({controlled:k,default:!1,name:u,state:"open"}),[de,Ee]=P.useState(!0),Me=!M&&ae!=null&&ye===V(ae),Le=K&&!j,De=Le?g(z.filter(re=>!(v&&(M?ae:[ae]).some(oe=>oe!==null&&A(re,oe)))),{inputValue:Me&&de?"":ye,getOptionLabel:V}):[],Ce=aF({filteredOptions:De,value:ae,inputValue:ye});P.useEffect(()=>{const re=ae!==Ce.value;me&&!re||b&&!re||Ae(null,ae)},[ae,Ae,me,Ce.value,b]);const pe=K&&De.length>0&&!j,Ge=Wi(re=>{re===-1?ne.current.focus():W.querySelector(`[data-tag-index="${re}"]`).focus()});P.useEffect(()=>{M&&Z>ae.length-1&&(q(-1),Ge(-1))},[ae,M,Z,Ge]);function Ke(re,oe){if(!J.current||re===-1)return-1;let ce=re;for(;;){if(oe==="next"&&ce===De.length||oe==="previous"&&ce===-1)return-1;const we=J.current.querySelector(`[data-option-index="${ce}"]`),Be=m?!1:!we||we.disabled||we.getAttribute("aria-disabled")==="true";if(we&&!we.hasAttribute("tabindex")||Be)ce+=oe==="next"?1:-1;else return ce}}const Xe=Wi(({event:re,index:oe,reason:ce="auto"})=>{if(he.current=oe,oe===-1?ne.current.removeAttribute("aria-activedescendant"):ne.current.setAttribute("aria-activedescendant",`${H}-option-${oe}`),T&&T(re,oe===-1?null:De[oe],ce),!J.current)return;const we=J.current.querySelector(`[role="option"].${r}-focused`);we&&(we.classList.remove(`${r}-focused`),we.classList.remove(`${r}-focusVisible`));let Be=J.current;if(J.current.getAttribute("role")!=="listbox"&&(Be=J.current.parentElement.querySelector('[role="listbox"]')),!Be)return;if(oe===-1){Be.scrollTop=0;return}const Ye=J.current.querySelector(`[data-option-index="${oe}"]`);if(Ye&&(Ye.classList.add(`${r}-focused`),ce==="keyboard"&&Ye.classList.add(`${r}-focusVisible`),Be.scrollHeight>Be.clientHeight&&ce!=="mouse"&&ce!=="touch")){const Fe=Ye,tt=Be.clientHeight+Be.scrollTop,je=Fe.offsetTop+Fe.offsetHeight;je>tt?Be.scrollTop=je-Be.clientHeight:Fe.offsetTop-Fe.offsetHeight*(S?1.3:0)<Be.scrollTop&&(Be.scrollTop=Fe.offsetTop-Fe.offsetHeight*(S?1.3:0))}}),et=Wi(({event:re,diff:oe,direction:ce="next",reason:we="auto"})=>{if(!Le)return;const Ye=Ke((()=>{const Fe=De.length-1;if(oe==="reset")return ie;if(oe==="start")return 0;if(oe==="end")return Fe;const tt=he.current+oe;return tt<0?tt===-1&&C?-1:p&&he.current!==-1||Math.abs(oe)>1?0:Fe:tt>Fe?tt===Fe+1&&C?-1:p||Math.abs(oe)>1?Fe:0:tt})(),ce);if(Xe({index:Ye,reason:we,event:re}),n&&oe!=="reset")if(Ye===-1)ne.current.value=ye;else{const Fe=V(De[Ye]);ne.current.value=Fe,Fe.toLowerCase().indexOf(ye.toLowerCase())===0&&ye.length>0&&ne.current.setSelectionRange(ye.length,Fe.length)}}),st=()=>{const re=(oe,ce)=>{const we=oe?V(oe):"",Be=ce?V(ce):"";return we===Be};if(he.current!==-1&&Ce.filteredOptions&&Ce.filteredOptions.length!==De.length&&Ce.inputValue===ye&&(M?ae.length===Ce.value.length&&Ce.value.every((oe,ce)=>V(ae[ce])===V(oe)):re(Ce.value,ae))){const oe=Ce.filteredOptions[he.current];if(oe&&De.some(we=>V(we)===V(oe)))return!0}return!1},Ut=P.useCallback(()=>{if(!Le||st())return;const re=M?ae[0]:ae;if(De.length===0||re==null){et({diff:"reset"});return}if(J.current){if(re!=null){const oe=De[he.current];if(M&&oe&&cI(ae,we=>A(oe,we))!==-1)return;const ce=cI(De,we=>A(we,re));ce===-1?et({diff:"reset"}):Xe({index:ce});return}if(he.current>=De.length-1){Xe({index:De.length-1});return}Xe({index:he.current})}},[De.length,M?!1:ae,v,et,Xe,Le,ye,M]),Cr=Wi(re=>{Z1(J,re),re&&Ut()});P.useEffect(()=>{Ut()},[Ut]);const Mr=re=>{K||(G(!0),Ee(!0),N&&N(re))},fe=(re,oe)=>{K&&(G(!1),O&&O(re,oe))},Oe=(re,oe,ce,we)=>{if(M){if(ae.length===oe.length&&ae.every((Be,Ye)=>Be===oe[Ye]))return}else if(ae===oe)return;I&&I(re,oe,ce,we),be(oe)},ze=P.useRef(!1),Je=(re,oe,ce="selectOption",we="options")=>{let Be=ce,Ye=oe;if(M){Ye=Array.isArray(ae)?ae.slice():[];const Fe=cI(Ye,tt=>A(oe,tt));Fe===-1?Ye.push(oe):we!=="freeSolo"&&(Ye.splice(Fe,1),Be="removeOption")}Ae(re,Ye),Oe(re,Ye,Be,{option:oe}),!h&&(!re||!re.ctrlKey&&!re.metaKey)&&fe(re,Be),(a===!0||a==="touch"&&ze.current||a==="mouse"&&!ze.current)&&ne.current.blur()};function Tt(re,oe){if(re===-1)return-1;let ce=re;for(;;){if(oe==="next"&&ce===ae.length||oe==="previous"&&ce===-1)return-1;const we=W.querySelector(`[data-tag-index="${ce}"]`);if(!we||!we.hasAttribute("tabindex")||we.disabled||we.getAttribute("aria-disabled")==="true")ce+=oe==="next"?1:-1;else return ce}}const Zt=(re,oe)=>{if(!M)return;ye===""&&fe(re,"toggleInput");let ce=Z;Z===-1?ye===""&&oe==="previous"&&(ce=ae.length-1):(ce+=oe==="next"?1:-1,ce<0&&(ce=0),ce===ae.length&&(ce=-1)),ce=Tt(ce,oe),q(ce),Ge(ce)},$r=re=>{Q.current=!0,Se(""),D&&D(re,"","clear"),Oe(re,M?[]:null,"clear")},On=re=>oe=>{if(re.onKeyDown&&re.onKeyDown(oe),!oe.defaultMuiPrevented&&(Z!==-1&&["ArrowLeft","ArrowRight"].indexOf(oe.key)===-1&&(q(-1),Ge(-1)),oe.which!==229))switch(oe.key){case"Home":Le&&w&&(oe.preventDefault(),et({diff:"start",direction:"next",reason:"keyboard",event:oe}));break;case"End":Le&&w&&(oe.preventDefault(),et({diff:"end",direction:"previous",reason:"keyboard",event:oe}));break;case"PageUp":oe.preventDefault(),et({diff:-gV,direction:"previous",reason:"keyboard",event:oe}),Mr(oe);break;case"PageDown":oe.preventDefault(),et({diff:gV,direction:"next",reason:"keyboard",event:oe}),Mr(oe);break;case"ArrowDown":oe.preventDefault(),et({diff:1,direction:"next",reason:"keyboard",event:oe}),Mr(oe);break;case"ArrowUp":oe.preventDefault(),et({diff:-1,direction:"previous",reason:"keyboard",event:oe}),Mr(oe);break;case"ArrowLeft":Zt(oe,"previous");break;case"ArrowRight":Zt(oe,"next");break;case"Enter":if(he.current!==-1&&Le){const ce=De[he.current],we=y?y(ce):!1;if(oe.preventDefault(),we)return;Je(oe,ce,"selectOption"),n&&ne.current.setSelectionRange(ne.current.value.length,ne.current.value.length)}else b&&ye!==""&&Me===!1&&(M&&oe.preventDefault(),Je(oe,ye,"createOption","freeSolo"));break;case"Escape":Le?(oe.preventDefault(),oe.stopPropagation(),fe(oe,"escape")):l&&(ye!==""||M&&ae.length>0)&&(oe.preventDefault(),oe.stopPropagation(),$r(oe));break;case"Backspace":if(M&&!j&&ye===""&&ae.length>0){const ce=Z===-1?ae.length-1:Z,we=ae.slice();we.splice(ce,1),Oe(oe,we,"removeOption",{option:ae[ce]})}break;case"Delete":if(M&&!j&&ye===""&&ae.length>0&&Z!==-1){const ce=Z,we=ae.slice();we.splice(ce,1),Oe(oe,we,"removeOption",{option:ae[ce]})}break}},Ko=re=>{Pe(!0),R&&!Q.current&&Mr(re)},Br=re=>{if(t(J)){ne.current.focus();return}Pe(!1),X.current=!0,Q.current=!1,o&&he.current!==-1&&Le?Je(re,De[he.current],"blur"):o&&b&&ye!==""?Je(re,ye,"blur","freeSolo"):s&&Ae(re,ae),fe(re,"blur")},Zi=re=>{const oe=re.target.value;ye!==oe&&(Se(oe),Ee(!1),D&&D(re,oe,"input")),oe===""?!c&&!M&&Oe(re,null,"clear"):Mr(re)},Vr=re=>{const oe=Number(re.currentTarget.getAttribute("data-option-index"));he.current!==oe&&Xe({event:re,index:oe,reason:"mouse"})},Cn=re=>{Xe({event:re,index:Number(re.currentTarget.getAttribute("data-option-index")),reason:"touch"}),ze.current=!0},No=re=>{const oe=Number(re.currentTarget.getAttribute("data-option-index"));Je(re,De[oe],"selectOption"),ze.current=!1},Ji=re=>oe=>{const ce=ae.slice();ce.splice(re,1),Oe(oe,ce,"removeOption",{option:ae[re]})},ll=re=>{K?fe(re,"toggleInput"):Mr(re)},ee=re=>{re.currentTarget.contains(re.target)&&re.target.getAttribute("id")!==H&&re.preventDefault()},_e=re=>{re.currentTarget.contains(re.target)&&(ne.current.focus(),$&&X.current&&ne.current.selectionEnd-ne.current.selectionStart===0&&ne.current.select(),X.current=!1)},ke=re=>{!f&&(ye===""||!K)&&ll(re)};let Y=b&&ye.length>0;Y=Y||(M?ae.length>0:ae!==null);let se=De;return S&&(se=De.reduce((re,oe,ce)=>{const we=S(oe);return re.length>0&&re[re.length-1].group===we?re[re.length-1].options.push(oe):re.push({key:ce,index:ce,group:we,options:[oe]}),re},[])),f&&me&&Br(),{getRootProps:(re={})=>L({"aria-owns":pe?`${H}-listbox`:null},re,{onKeyDown:On(re),onMouseDown:ee,onClick:_e}),getInputLabelProps:()=>({id:`${H}-label`,htmlFor:H}),getInputProps:()=>({id:H,value:ye,onBlur:Br,onFocus:Ko,onChange:Zi,onMouseDown:ke,"aria-activedescendant":Le?"":null,"aria-autocomplete":n?"both":"list","aria-controls":pe?`${H}-listbox`:void 0,"aria-expanded":pe,autoComplete:"off",ref:ne,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:f}),getClearProps:()=>({tabIndex:-1,onClick:$r}),getPopupIndicatorProps:()=>({tabIndex:-1,onClick:ll}),getTagProps:({index:re})=>L({key:re,"data-tag-index":re,tabIndex:-1},!j&&{onDelete:Ji(re)}),getListboxProps:()=>({role:"listbox",id:`${H}-listbox`,"aria-labelledby":`${H}-label`,ref:Cr,onMouseDown:re=>{re.preventDefault()}}),getOptionProps:({index:re,option:oe})=>{const ce=(M?ae:[ae]).some(Be=>Be!=null&&A(oe,Be)),we=y?y(oe):!1;return{key:V(oe),tabIndex:-1,role:"option",id:`${H}-option-${re}`,onMouseMove:Vr,onClick:No,onTouchStart:Cn,"data-option-index":re,"aria-disabled":we,"aria-selected":ce}},id:H,inputValue:ye,value:ae,dirty:Y,expanded:Le&&W,popupOpen:Le,focused:me||Z!==-1,anchorEl:W,setAnchorEl:te,focusedTag:Z,groupedOptions:se}}const Y0e=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],Q0e=He(k0e,{name:"MuiPopper",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Z0e=P.forwardRef(function(t,r){var n;const i=WT(),o=pr({props:t,name:"MuiPopper"}),{anchorEl:a,component:s,components:l,componentsProps:u,container:d,disablePortal:c,keepMounted:h,modifiers:f,open:m,placement:p,popperOptions:g,popperRef:v,transition:b,slots:y,slotProps:x}=o,S=Ie(o,Y0e),w=(n=y==null?void 0:y.root)!=null?n:l==null?void 0:l.Root,_=L({anchorEl:a,container:d,disablePortal:c,keepMounted:h,modifiers:f,open:m,placement:p,popperOptions:g,popperRef:v,transition:b},S);return B.jsx(Q0e,L({as:s,direction:i==null?void 0:i.direction,slots:{root:w},slotProps:x??u},_,{ref:r}))}),ig=Z0e;function J0e(e){return ur("MuiListSubheader",e)}cr("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const ebe=["className","color","component","disableGutters","disableSticky","inset"],tbe=e=>{const{classes:t,color:r,disableGutters:n,inset:i,disableSticky:o}=e,a={root:["root",r!=="default"&&`color${$e(r)}`,!n&&"gutters",i&&"inset",!o&&"sticky"]};return lt(a,J0e,t)},rbe=He("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color!=="default"&&t[`color${$e(r.color)}`],!r.disableGutters&&t.gutters,r.inset&&t.inset,!r.disableSticky&&t.sticky]}})(({theme:e,ownerState:t})=>L({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(e.vars||e).palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14)},t.color==="primary"&&{color:(e.vars||e).palette.primary.main},t.color==="inherit"&&{color:"inherit"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.inset&&{paddingLeft:72},!t.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(e.vars||e).palette.background.paper})),mee=P.forwardRef(function(t,r){const n=pr({props:t,name:"MuiListSubheader"}),{className:i,color:o="default",component:a="li",disableGutters:s=!1,disableSticky:l=!1,inset:u=!1}=n,d=Ie(n,ebe),c=L({},n,{color:o,component:a,disableGutters:s,disableSticky:l,inset:u}),h=tbe(c);return B.jsx(rbe,L({as:a,className:ht(h.root,i),ref:r,ownerState:c},d))});mee.muiSkipListHighlight=!0;const nbe=mee,ibe=_r(B.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function obe(e){return ur("MuiChip",e)}const abe=cr("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),Wr=abe,sbe=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],lbe=e=>{const{classes:t,disabled:r,size:n,color:i,iconColor:o,onDelete:a,clickable:s,variant:l}=e,u={root:["root",l,r&&"disabled",`size${$e(n)}`,`color${$e(i)}`,s&&"clickable",s&&`clickableColor${$e(i)}`,a&&"deletable",a&&`deletableColor${$e(i)}`,`${l}${$e(i)}`],label:["label",`label${$e(n)}`],avatar:["avatar",`avatar${$e(n)}`,`avatarColor${$e(i)}`],icon:["icon",`icon${$e(n)}`,`iconColor${$e(o)}`],deleteIcon:["deleteIcon",`deleteIcon${$e(n)}`,`deleteIconColor${$e(i)}`,`deleteIcon${$e(l)}Color${$e(i)}`]};return lt(u,obe,t)},ube=He("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e,{color:n,iconColor:i,clickable:o,onDelete:a,size:s,variant:l}=r;return[{[`& .${Wr.avatar}`]:t.avatar},{[`& .${Wr.avatar}`]:t[`avatar${$e(s)}`]},{[`& .${Wr.avatar}`]:t[`avatarColor${$e(n)}`]},{[`& .${Wr.icon}`]:t.icon},{[`& .${Wr.icon}`]:t[`icon${$e(s)}`]},{[`& .${Wr.icon}`]:t[`iconColor${$e(i)}`]},{[`& .${Wr.deleteIcon}`]:t.deleteIcon},{[`& .${Wr.deleteIcon}`]:t[`deleteIcon${$e(s)}`]},{[`& .${Wr.deleteIcon}`]:t[`deleteIconColor${$e(n)}`]},{[`& .${Wr.deleteIcon}`]:t[`deleteIcon${$e(l)}Color${$e(n)}`]},t.root,t[`size${$e(s)}`],t[`color${$e(n)}`],o&&t.clickable,o&&n!=="default"&&t[`clickableColor${$e(n)})`],a&&t.deletable,a&&n!=="default"&&t[`deletableColor${$e(n)}`],t[l],t[`${l}${$e(n)}`]]}})(({theme:e,ownerState:t})=>{const r=e.palette.mode==="light"?e.palette.grey[700]:e.palette.grey[300];return L({maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${Wr.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${Wr.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:r,fontSize:e.typography.pxToRem(12)},[`& .${Wr.avatarColorPrimary}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},[`& .${Wr.avatarColorSecondary}`]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},[`& .${Wr.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${Wr.icon}`]:L({marginLeft:5,marginRight:-6},t.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},t.iconColor===t.color&&L({color:e.vars?e.vars.palette.Chip.defaultIconColor:r},t.color!=="default"&&{color:"inherit"})),[`& .${Wr.deleteIcon}`]:L({WebkitTapHighlightColor:"transparent",color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.26)`:lr(e.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:lr(e.palette.text.primary,.4)}},t.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},t.color!=="default"&&{color:e.vars?`rgba(${e.vars.palette[t.color].contrastTextChannel} / 0.7)`:lr(e.palette[t.color].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[t.color].contrastText}})},t.size==="small"&&{height:24},t.color!=="default"&&{backgroundColor:(e.vars||e).palette[t.color].main,color:(e.vars||e).palette[t.color].contrastText},t.onDelete&&{[`&.${Wr.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:lr(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},t.onDelete&&t.color!=="default"&&{[`&.${Wr.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}})},({theme:e,ownerState:t})=>L({},t.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:lr(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)},[`&.${Wr.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:lr(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},"&:active":{boxShadow:(e.vars||e).shadows[1]}},t.clickable&&t.color!=="default"&&{[`&:hover, &.${Wr.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}}),({theme:e,ownerState:t})=>L({},t.variant==="outlined"&&{backgroundColor:"transparent",border:e.vars?`1px solid ${e.vars.palette.Chip.defaultBorder}`:`1px solid ${e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${Wr.clickable}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${Wr.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`& .${Wr.avatar}`]:{marginLeft:4},[`& .${Wr.avatarSmall}`]:{marginLeft:2},[`& .${Wr.icon}`]:{marginLeft:4},[`& .${Wr.iconSmall}`]:{marginLeft:2},[`& .${Wr.deleteIcon}`]:{marginRight:5},[`& .${Wr.deleteIconSmall}`]:{marginRight:3}},t.variant==="outlined"&&t.color!=="default"&&{color:(e.vars||e).palette[t.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.7)`:lr(e.palette[t.color].main,.7)}`,[`&.${Wr.clickable}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:lr(e.palette[t.color].main,e.palette.action.hoverOpacity)},[`&.${Wr.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.focusOpacity})`:lr(e.palette[t.color].main,e.palette.action.focusOpacity)},[`& .${Wr.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.7)`:lr(e.palette[t.color].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[t.color].main}}})),cbe=He("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:r}=e,{size:n}=r;return[t.label,t[`label${$e(n)}`]]}})(({ownerState:e})=>L({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},e.size==="small"&&{paddingLeft:8,paddingRight:8}));function vV(e){return e.key==="Backspace"||e.key==="Delete"}const dbe=P.forwardRef(function(t,r){const n=pr({props:t,name:"MuiChip"}),{avatar:i,className:o,clickable:a,color:s="default",component:l,deleteIcon:u,disabled:d=!1,icon:c,label:h,onClick:f,onDelete:m,onKeyDown:p,onKeyUp:g,size:v="medium",variant:b="filled",tabIndex:y,skipFocusWhenDisabled:x=!1}=n,S=Ie(n,sbe),w=P.useRef(null),_=nn(w,r),C=z=>{z.stopPropagation(),m&&m(z)},E=z=>{z.currentTarget===z.target&&vV(z)&&z.preventDefault(),p&&p(z)},A=z=>{z.currentTarget===z.target&&(m&&vV(z)?m(z):z.key==="Escape"&&w.current&&w.current.blur()),g&&g(z)},M=a!==!1&&f?!0:a,I=M||m?zy:l||"div",O=L({},n,{component:I,disabled:d,size:v,color:s,iconColor:P.isValidElement(c)&&c.props.color||s,onDelete:!!m,clickable:M,variant:b}),T=lbe(O),D=I===zy?L({component:l||"div",focusVisibleClassName:T.focusVisible},m&&{disableRipple:!0}):{};let N=null;m&&(N=u&&P.isValidElement(u)?P.cloneElement(u,{className:ht(u.props.className,T.deleteIcon),onClick:C}):B.jsx(ibe,{className:ht(T.deleteIcon),onClick:C}));let k=null;i&&P.isValidElement(i)&&(k=P.cloneElement(i,{className:ht(T.avatar,i.props.className)}));let R=null;return c&&P.isValidElement(c)&&(R=P.cloneElement(c,{className:ht(T.icon,c.props.className)})),B.jsxs(ube,L({as:I,className:ht(T.root,o),disabled:M&&d?!0:void 0,onClick:f,onKeyDown:E,onKeyUp:A,ref:_,tabIndex:x&&d?-1:y,ownerState:O},D,S,{children:[k||R,B.jsx(cbe,{className:ht(T.label),ownerState:O,children:h}),N]}))}),RF=dbe;function og({props:e,states:t,muiFormControl:r}){return t.reduce((n,i)=>(n[i]=e[i],r&&typeof e[i]>"u"&&(n[i]=r[i]),n),{})}const hbe=P.createContext(void 0),kF=hbe;function cp(){return P.useContext(kF)}function gee(e){return B.jsx(Xme,L({},e,{defaultTheme:YT,themeId:Bm}))}function yV(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function LE(e,t=!1){return e&&(yV(e.value)&&e.value!==""||t&&yV(e.defaultValue)&&e.defaultValue!=="")}function fbe(e){return e.startAdornment}function pbe(e){return ur("MuiInputBase",e)}const mbe=cr("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),Us=mbe,gbe=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],JT=(e,t)=>{const{ownerState:r}=e;return[t.root,r.formControl&&t.formControl,r.startAdornment&&t.adornedStart,r.endAdornment&&t.adornedEnd,r.error&&t.error,r.size==="small"&&t.sizeSmall,r.multiline&&t.multiline,r.color&&t[`color${$e(r.color)}`],r.fullWidth&&t.fullWidth,r.hiddenLabel&&t.hiddenLabel]},e2=(e,t)=>{const{ownerState:r}=e;return[t.input,r.size==="small"&&t.inputSizeSmall,r.multiline&&t.inputMultiline,r.type==="search"&&t.inputTypeSearch,r.startAdornment&&t.inputAdornedStart,r.endAdornment&&t.inputAdornedEnd,r.hiddenLabel&&t.inputHiddenLabel]},vbe=e=>{const{classes:t,color:r,disabled:n,error:i,endAdornment:o,focused:a,formControl:s,fullWidth:l,hiddenLabel:u,multiline:d,readOnly:c,size:h,startAdornment:f,type:m}=e,p={root:["root",`color${$e(r)}`,n&&"disabled",i&&"error",l&&"fullWidth",a&&"focused",s&&"formControl",h==="small"&&"sizeSmall",d&&"multiline",f&&"adornedStart",o&&"adornedEnd",u&&"hiddenLabel",c&&"readOnly"],input:["input",n&&"disabled",m==="search"&&"inputTypeSearch",d&&"inputMultiline",h==="small"&&"inputSizeSmall",u&&"inputHiddenLabel",f&&"inputAdornedStart",o&&"inputAdornedEnd",c&&"readOnly"]};return lt(p,pbe,t)},t2=He("div",{name:"MuiInputBase",slot:"Root",overridesResolver:JT})(({theme:e,ownerState:t})=>L({},e.typography.body1,{color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Us.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"}},t.multiline&&L({padding:"4px 0 5px"},t.size==="small"&&{paddingTop:1}),t.fullWidth&&{width:"100%"})),r2=He("input",{name:"MuiInputBase",slot:"Input",overridesResolver:e2})(({theme:e,ownerState:t})=>{const r=e.palette.mode==="light",n=L({color:"currentColor"},e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:r?.42:.5},{transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})}),i={opacity:"0 !important"},o=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:r?.42:.5};return L({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&:-ms-input-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Us.formControl} &`]:{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":o,"&:focus::-moz-placeholder":o,"&:focus:-ms-input-placeholder":o,"&:focus::-ms-input-placeholder":o},[`&.${Us.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},t.size==="small"&&{paddingTop:1},t.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},t.type==="search"&&{MozAppearance:"textfield"})}),ybe=B.jsx(gee,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),bbe=P.forwardRef(function(t,r){var n;const i=pr({props:t,name:"MuiInputBase"}),{"aria-describedby":o,autoComplete:a,autoFocus:s,className:l,components:u={},componentsProps:d={},defaultValue:c,disabled:h,disableInjectingGlobalStyles:f,endAdornment:m,fullWidth:p=!1,id:g,inputComponent:v="input",inputProps:b={},inputRef:y,maxRows:x,minRows:S,multiline:w=!1,name:_,onBlur:C,onChange:E,onClick:A,onFocus:M,onKeyDown:I,onKeyUp:O,placeholder:T,readOnly:D,renderSuffix:N,rows:k,slotProps:R={},slots:z={},startAdornment:j,type:$="text",value:U}=i,H=Ie(i,gbe),V=b.value!=null?b.value:U,{current:Q}=P.useRef(V!=null),X=P.useRef(),ne=P.useCallback(De=>{},[]),J=nn(X,y,b.ref,ne),[W,te]=P.useState(!1),Z=cp(),q=og({props:i,muiFormControl:Z,states:["color","disabled","error","hiddenLabel","size","required","filled"]});q.focused=Z?Z.focused:W,P.useEffect(()=>{!Z&&h&&W&&(te(!1),C&&C())},[Z,h,W,C]);const ie=Z&&Z.onFilled,he=Z&&Z.onEmpty,ae=P.useCallback(De=>{LE(De)?ie&&ie():he&&he()},[ie,he]);li(()=>{Q&&ae({value:V})},[V,ae,Q]);const be=De=>{if(q.disabled){De.stopPropagation();return}M&&M(De),b.onFocus&&b.onFocus(De),Z&&Z.onFocus?Z.onFocus(De):te(!0)},ye=De=>{C&&C(De),b.onBlur&&b.onBlur(De),Z&&Z.onBlur?Z.onBlur(De):te(!1)},Se=(De,...Ce)=>{if(!Q){const pe=De.target||X.current;if(pe==null)throw new Error(Xf(1));ae({value:pe.value})}b.onChange&&b.onChange(De,...Ce),E&&E(De,...Ce)};P.useEffect(()=>{ae(X.current)},[]);const me=De=>{X.current&&De.currentTarget===De.target&&X.current.focus(),A&&A(De)};let Pe=v,Ae=b;w&&Pe==="input"&&(k?Ae=L({type:void 0,minRows:k,maxRows:k},Ae):Ae=L({type:void 0,maxRows:x,minRows:S},Ae),Pe=W0e);const K=De=>{ae(De.animationName==="mui-auto-fill-cancel"?X.current:{value:"x"})};P.useEffect(()=>{Z&&Z.setAdornedStart(!!j)},[Z,j]);const G=L({},i,{color:q.color||"primary",disabled:q.disabled,endAdornment:m,error:q.error,focused:q.focused,formControl:Z,fullWidth:p,hiddenLabel:q.hiddenLabel,multiline:w,size:q.size,startAdornment:j,type:$}),de=vbe(G),Ee=z.root||u.Root||t2,Me=R.root||d.root||{},Le=z.input||u.Input||r2;return Ae=L({},Ae,(n=R.input)!=null?n:d.input),B.jsxs(P.Fragment,{children:[!f&&ybe,B.jsxs(Ee,L({},Me,!nw(Ee)&&{ownerState:L({},G,Me.ownerState)},{ref:r,onClick:me},H,{className:ht(de.root,Me.className,l,D&&"MuiInputBase-readOnly"),children:[j,B.jsx(kF.Provider,{value:null,children:B.jsx(Le,L({ownerState:G,"aria-invalid":q.error,"aria-describedby":o,autoComplete:a,autoFocus:s,defaultValue:c,disabled:q.disabled,id:g,onAnimationStart:K,name:_,placeholder:T,readOnly:D,required:q.required,rows:k,value:V,onKeyDown:I,onKeyUp:O,type:$},Ae,!nw(Le)&&{as:Pe,ownerState:L({},G,Ae.ownerState)},{ref:J,className:ht(de.input,Ae.className,D&&"MuiInputBase-readOnly"),onBlur:ye,onChange:Se,onFocus:be}))}),m,N?N(L({},q,{startAdornment:j})):null]}))]})}),B0=bbe;function xbe(e){return ur("MuiInput",e)}const wbe=L({},Us,cr("MuiInput",["root","underline","input"])),rf=wbe;function Sbe(e){return ur("MuiOutlinedInput",e)}const _be=L({},Us,cr("MuiOutlinedInput",["root","notchedOutline","input"])),uc=_be;function Cbe(e){return ur("MuiFilledInput",e)}const Abe=L({},Us,cr("MuiFilledInput",["root","underline","input"])),$s=Abe,vee=_r(B.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown");function Ebe(e){return ur("MuiAutocomplete",e)}const Mbe=cr("MuiAutocomplete",["root","expanded","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]),Or=Mbe;var bV,xV;const Pbe=["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","className","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","componentsProps","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionLabel","isOptionEqualToValue","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","readOnly","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","slotProps","value"],Tbe=["ref"],Obe=e=>{const{classes:t,disablePortal:r,expanded:n,focused:i,fullWidth:o,hasClearIcon:a,hasPopupIcon:s,inputFocused:l,popupOpen:u,size:d}=e,c={root:["root",n&&"expanded",i&&"focused",o&&"fullWidth",a&&"hasClearIcon",s&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",l&&"inputFocused"],tag:["tag",`tagSize${$e(d)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",u&&"popupIndicatorOpen"],popper:["popper",r&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return lt(c,Ebe,t)},Ibe=He("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e,{fullWidth:n,hasClearIcon:i,hasPopupIcon:o,inputFocused:a,size:s}=r;return[{[`& .${Or.tag}`]:t.tag},{[`& .${Or.tag}`]:t[`tagSize${$e(s)}`]},{[`& .${Or.inputRoot}`]:t.inputRoot},{[`& .${Or.input}`]:t.input},{[`& .${Or.input}`]:a&&t.inputFocused},t.root,n&&t.fullWidth,o&&t.hasPopupIcon,i&&t.hasClearIcon]}})(({ownerState:e})=>L({[`&.${Or.focused} .${Or.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${Or.clearIndicator}`]:{visibility:"visible"}}},e.fullWidth&&{width:"100%"},{[`& .${Or.tag}`]:L({margin:3,maxWidth:"calc(100% - 6px)"},e.size==="small"&&{margin:2,maxWidth:"calc(100% - 4px)"}),[`& .${Or.inputRoot}`]:{flexWrap:"wrap",[`.${Or.hasPopupIcon}&, .${Or.hasClearIcon}&`]:{paddingRight:26+4},[`.${Or.hasPopupIcon}.${Or.hasClearIcon}&`]:{paddingRight:52+4},[`& .${Or.input}`]:{width:0,minWidth:30}},[`& .${rf.root}`]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},[`& .${rf.root}.${Us.sizeSmall}`]:{[`& .${rf.input}`]:{padding:"2px 4px 3px 0"}},[`& .${uc.root}`]:{padding:9,[`.${Or.hasPopupIcon}&, .${Or.hasClearIcon}&`]:{paddingRight:26+4+9},[`.${Or.hasPopupIcon}.${Or.hasClearIcon}&`]:{paddingRight:52+4+9},[`& .${Or.input}`]:{padding:"7.5px 4px 7.5px 5px"},[`& .${Or.endAdornment}`]:{right:9}},[`& .${uc.root}.${Us.sizeSmall}`]:{paddingTop:6,paddingBottom:6,paddingLeft:6,[`& .${Or.input}`]:{padding:"2.5px 4px 2.5px 8px"}},[`& .${$s.root}`]:{paddingTop:19,paddingLeft:8,[`.${Or.hasPopupIcon}&, .${Or.hasClearIcon}&`]:{paddingRight:26+4+9},[`.${Or.hasPopupIcon}.${Or.hasClearIcon}&`]:{paddingRight:52+4+9},[`& .${$s.input}`]:{padding:"7px 4px"},[`& .${Or.endAdornment}`]:{right:9}},[`& .${$s.root}.${Us.sizeSmall}`]:{paddingBottom:1,[`& .${$s.input}`]:{padding:"2.5px 4px"}},[`& .${Us.hiddenLabel}`]:{paddingTop:8},[`& .${$s.root}.${Us.hiddenLabel}`]:{paddingTop:0,paddingBottom:0,[`& .${Or.input}`]:{paddingTop:16,paddingBottom:17}},[`& .${$s.root}.${Us.hiddenLabel}.${Us.sizeSmall}`]:{[`& .${Or.input}`]:{paddingTop:8,paddingBottom:9}},[`& .${Or.input}`]:L({flexGrow:1,textOverflow:"ellipsis",opacity:0},e.inputFocused&&{opacity:1})})),Dbe=He("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:(e,t)=>t.endAdornment})({position:"absolute",right:0,top:"calc(50% - 14px)"}),Rbe=He(cf,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:(e,t)=>t.clearIndicator})({marginRight:-2,padding:4,visibility:"hidden"}),kbe=He(cf,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:({ownerState:e},t)=>L({},t.popupIndicator,e.popupOpen&&t.popupIndicatorOpen)})(({ownerState:e})=>L({padding:2,marginRight:-2},e.popupOpen&&{transform:"rotate(180deg)"})),Lbe=He(ig,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${Or.option}`]:t.option},t.popper,r.disablePortal&&t.popperDisablePortal]}})(({theme:e,ownerState:t})=>L({zIndex:(e.vars||e).zIndex.modal},t.disablePortal&&{position:"absolute"})),Nbe=He(SS,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:(e,t)=>t.paper})(({theme:e})=>L({},e.typography.body1,{overflow:"auto"})),zbe=He("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:(e,t)=>t.loading})(({theme:e})=>({color:(e.vars||e).palette.text.secondary,padding:"14px 16px"})),Bbe=He("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})(({theme:e})=>({color:(e.vars||e).palette.text.secondary,padding:"14px 16px"})),Fbe=He("div",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})(({theme:e})=>({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",[`& .${Or.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[e.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${Or.focused}`]:{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${Or.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:lr(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${Or.focused}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:lr(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${Or.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:lr(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}}}})),jbe=He(nbe,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:(e,t)=>t.groupLabel})(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,top:-8})),Ube=He("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:(e,t)=>t.groupUl})({padding:0,[`& .${Or.option}`]:{paddingLeft:24}}),$be=P.forwardRef(function(t,r){var n,i,o,a;const s=pr({props:t,name:"MuiAutocomplete"}),{autoComplete:l=!1,autoHighlight:u=!1,autoSelect:d=!1,blurOnSelect:c=!1,ChipProps:h,className:f,clearIcon:m=bV||(bV=B.jsx(Qve,{fontSize:"small"})),clearOnBlur:p=!s.freeSolo,clearOnEscape:g=!1,clearText:v="Clear",closeText:b="Close",componentsProps:y={},defaultValue:x=s.multiple?[]:null,disableClearable:S=!1,disableCloseOnSelect:w=!1,disabled:_=!1,disabledItemsFocusable:C=!1,disableListWrap:E=!1,disablePortal:A=!1,filterSelectedOptions:M=!1,forcePopupIcon:I="auto",freeSolo:O=!1,fullWidth:T=!1,getLimitTagsText:D=ce=>`+${ce}`,getOptionLabel:N,groupBy:k,handleHomeEndKeys:R=!s.freeSolo,includeInputInList:z=!1,limitTags:j=-1,ListboxComponent:$="ul",ListboxProps:U,loading:H=!1,loadingText:V="Loading",multiple:Q=!1,noOptionsText:X="No options",openOnFocus:ne=!1,openText:J="Open",PaperComponent:W=SS,PopperComponent:te=ig,popupIcon:Z=xV||(xV=B.jsx(vee,{})),readOnly:q=!1,renderGroup:ie,renderInput:he,renderOption:ae,renderTags:be,selectOnFocus:ye=!s.freeSolo,size:Se="medium",slotProps:me={}}=s,Pe=Ie(s,Pbe),{getRootProps:Ae,getInputProps:K,getInputLabelProps:G,getPopupIndicatorProps:de,getClearProps:Ee,getTagProps:Me,getListboxProps:Le,getOptionProps:De,value:Ce,dirty:pe,expanded:Ge,id:Ke,popupOpen:Xe,focused:et,focusedTag:st,anchorEl:Ut,setAnchorEl:Cr,inputValue:Mr,groupedOptions:fe}=X0e(L({},s,{componentName:"Autocomplete"})),Oe=!S&&!_&&pe&&!q,ze=(!O||I===!0)&&I!==!1,{onMouseDown:Je}=K(),{ref:Tt}=U??{},Zt=Le(),{ref:$r}=Zt,On=Ie(Zt,Tbe),Ko=nn($r,Tt),Zi=N||(ce=>{var we;return(we=ce.label)!=null?we:ce}),Vr=L({},s,{disablePortal:A,expanded:Ge,focused:et,fullWidth:T,getOptionLabel:Zi,hasClearIcon:Oe,hasPopupIcon:ze,inputFocused:st===-1,popupOpen:Xe,size:Se}),Cn=Obe(Vr);let No;if(Q&&Ce.length>0){const ce=we=>L({className:Cn.tag,disabled:_},Me(we));be?No=be(Ce,ce,Vr):No=Ce.map((we,Be)=>B.jsx(RF,L({label:Zi(we),size:Se},ce({index:Be}),h)))}if(j>-1&&Array.isArray(No)){const ce=No.length-j;!et&&ce>0&&(No=No.splice(0,j),No.push(B.jsx("span",{className:Cn.tag,children:D(ce)},No.length)))}const ll=ie||(ce=>B.jsxs("li",{children:[B.jsx(jbe,{className:Cn.groupLabel,ownerState:Vr,component:"div",children:ce.group}),B.jsx(Ube,{className:Cn.groupUl,ownerState:Vr,children:ce.children})]},ce.key)),_e=ae||((ce,we)=>B.jsx("li",L({},ce,{children:Zi(we)}))),ke=(ce,we)=>{const Be=De({option:ce,index:we});return _e(L({},Be,{className:Cn.option}),ce,{selected:Be["aria-selected"],index:we,inputValue:Mr},Vr)},Y=(n=me.clearIndicator)!=null?n:y.clearIndicator,se=(i=me.paper)!=null?i:y.paper,re=(o=me.popper)!=null?o:y.popper,oe=(a=me.popupIndicator)!=null?a:y.popupIndicator;return B.jsxs(P.Fragment,{children:[B.jsx(Ibe,L({ref:r,className:ht(Cn.root,f),ownerState:Vr},Ae(Pe),{children:he({id:Ke,disabled:_,fullWidth:!0,size:Se==="small"?"small":void 0,InputLabelProps:G(),InputProps:L({ref:Cr,className:Cn.inputRoot,startAdornment:No,onClick:ce=>{ce.target===ce.currentTarget&&Je(ce)}},(Oe||ze)&&{endAdornment:B.jsxs(Dbe,{className:Cn.endAdornment,ownerState:Vr,children:[Oe?B.jsx(Rbe,L({},Ee(),{"aria-label":v,title:v,ownerState:Vr},Y,{className:ht(Cn.clearIndicator,Y==null?void 0:Y.className),children:m})):null,ze?B.jsx(kbe,L({},de(),{disabled:_,"aria-label":Xe?b:J,title:Xe?b:J,ownerState:Vr},oe,{className:ht(Cn.popupIndicator,oe==null?void 0:oe.className),children:Z})):null]})}),inputProps:L({className:Cn.input,disabled:_,readOnly:q},K())})})),Ut?B.jsx(Lbe,L({as:te,disablePortal:A,style:{width:Ut?Ut.clientWidth:null},ownerState:Vr,role:"presentation",anchorEl:Ut,open:Xe},re,{className:ht(Cn.popper,re==null?void 0:re.className),children:B.jsxs(Nbe,L({ownerState:Vr,as:W},se,{className:ht(Cn.paper,se==null?void 0:se.className),children:[H&&fe.length===0?B.jsx(zbe,{className:Cn.loading,ownerState:Vr,children:V}):null,fe.length===0&&!O&&!H?B.jsx(Bbe,{className:Cn.noOptions,ownerState:Vr,role:"presentation",onMouseDown:ce=>{ce.preventDefault()},children:X}):null,fe.length>0?B.jsx(Fbe,L({as:$,className:Cn.listbox,ownerState:Vr},On,U,{ref:Ko,children:fe.map((ce,we)=>k?ll({key:ce.key,group:ce.group,children:ce.options.map((Be,Ye)=>ke(Be,ce.index+Ye))}):ke(ce,we))})):null]}))})):null]})}),yee=$be,Vbe=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],Hbe={entering:{opacity:1},entered:{opacity:1}},Gbe=P.forwardRef(function(t,r){const n=Qa(),i={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:o,appear:a=!0,children:s,easing:l,in:u,onEnter:d,onEntered:c,onEntering:h,onExit:f,onExited:m,onExiting:p,style:g,timeout:v=i,TransitionComponent:b=JJ}=t,y=Ie(t,Vbe),x=P.useRef(null),S=nn(x,s.ref,r),w=T=>D=>{if(T){const N=x.current;D===void 0?T(N):T(N,D)}},_=w(h),C=w((T,D)=>{eee(T);const N=RE({style:g,timeout:v,easing:l},{mode:"enter"});T.style.webkitTransition=n.transitions.create("opacity",N),T.style.transition=n.transitions.create("opacity",N),d&&d(T,D)}),E=w(c),A=w(p),M=w(T=>{const D=RE({style:g,timeout:v,easing:l},{mode:"exit"});T.style.webkitTransition=n.transitions.create("opacity",D),T.style.transition=n.transitions.create("opacity",D),f&&f(T)}),I=w(m),O=T=>{o&&o(x.current,T)};return B.jsx(b,L({appear:a,in:u,nodeRef:x,onEnter:C,onEntered:E,onEntering:_,onExit:M,onExited:I,onExiting:A,addEndListener:O,timeout:v},y,{children:(T,D)=>P.cloneElement(s,L({style:L({opacity:0,visibility:T==="exited"&&!u?"hidden":void 0},Hbe[T],g,s.props.style),ref:S},D))}))}),Wbe=Gbe;function qbe(e){return ur("MuiBackdrop",e)}cr("MuiBackdrop",["root","invisible"]);const Kbe=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],Xbe=e=>{const{classes:t,invisible:r}=e;return lt({root:["root",r&&"invisible"]},qbe,t)},Ybe=He("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.invisible&&t.invisible]}})(({ownerState:e})=>L({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.invisible&&{backgroundColor:"transparent"})),Qbe=P.forwardRef(function(t,r){var n,i,o;const a=pr({props:t,name:"MuiBackdrop"}),{children:s,className:l,component:u="div",components:d={},componentsProps:c={},invisible:h=!1,open:f,slotProps:m={},slots:p={},TransitionComponent:g=Wbe,transitionDuration:v}=a,b=Ie(a,Kbe),y=L({},a,{component:u,invisible:h}),x=Xbe(y),S=(n=m.root)!=null?n:c.root;return B.jsx(g,L({in:f,timeout:v},b,{children:B.jsx(Ybe,L({"aria-hidden":!0},S,{as:(i=(o=p.root)!=null?o:d.Root)!=null?i:u,className:ht(x.root,l,S==null?void 0:S.className),ownerState:L({},y,S==null?void 0:S.ownerState),classes:x,ref:r,children:s}))}))}),Zbe=Qbe;function Jbe(e){return ur("MuiBadge",e)}const exe=cr("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),Eh=exe,txe=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],dI=10,hI=4,rxe=e=>{const{color:t,anchorOrigin:r,invisible:n,overlap:i,variant:o,classes:a={}}=e,s={root:["root"],badge:["badge",o,n&&"invisible",`anchorOrigin${$e(r.vertical)}${$e(r.horizontal)}`,`anchorOrigin${$e(r.vertical)}${$e(r.horizontal)}${$e(i)}`,`overlap${$e(i)}`,t!=="default"&&`color${$e(t)}`]};return lt(s,Jbe,a)},nxe=He("span",{name:"MuiBadge",slot:"Root",overridesResolver:(e,t)=>t.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),ixe=He("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.badge,t[r.variant],t[`anchorOrigin${$e(r.anchorOrigin.vertical)}${$e(r.anchorOrigin.horizontal)}${$e(r.overlap)}`],r.color!=="default"&&t[`color${$e(r.color)}`],r.invisible&&t.invisible]}})(({theme:e,ownerState:t})=>L({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(12),minWidth:dI*2,lineHeight:1,padding:"0 6px",height:dI*2,borderRadius:dI,zIndex:1,transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen})},t.color!=="default"&&{backgroundColor:(e.vars||e).palette[t.color].main,color:(e.vars||e).palette[t.color].contrastText},t.variant==="dot"&&{borderRadius:hI,height:hI*2,minWidth:hI*2,padding:0},t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="rectangular"&&{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${Eh.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="rectangular"&&{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${Eh.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="rectangular"&&{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${Eh.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="rectangular"&&{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${Eh.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="circular"&&{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${Eh.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="circular"&&{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${Eh.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="circular"&&{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${Eh.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="circular"&&{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${Eh.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},t.invisible&&{transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.leavingScreen})})),oxe=P.forwardRef(function(t,r){var n,i,o,a,s,l;const u=pr({props:t,name:"MuiBadge"}),{anchorOrigin:d={vertical:"top",horizontal:"right"},className:c,component:h,components:f={},componentsProps:m={},children:p,overlap:g="rectangular",color:v="default",invisible:b=!1,max:y=99,badgeContent:x,slots:S,slotProps:w,showZero:_=!1,variant:C="standard"}=u,E=Ie(u,txe),{badgeContent:A,invisible:M,max:I,displayValue:O}=dye({max:y,invisible:b,badgeContent:x,showZero:_}),T=aF({anchorOrigin:d,color:v,overlap:g,variant:C,badgeContent:x}),D=M||A==null&&C!=="dot",{color:N=v,overlap:k=g,anchorOrigin:R=d,variant:z=C}=D?T:u,j=z!=="dot"?O:void 0,$=L({},u,{badgeContent:A,invisible:D,max:I,displayValue:j,showZero:_,anchorOrigin:R,color:N,overlap:k,variant:z}),U=rxe($),H=(n=(i=S==null?void 0:S.root)!=null?i:f.Root)!=null?n:nxe,V=(o=(a=S==null?void 0:S.badge)!=null?a:f.Badge)!=null?o:ixe,Q=(s=w==null?void 0:w.root)!=null?s:m.root,X=(l=w==null?void 0:w.badge)!=null?l:m.badge,ne=oh({elementType:H,externalSlotProps:Q,externalForwardedProps:E,additionalProps:{ref:r,as:h},ownerState:$,className:ht(Q==null?void 0:Q.className,U.root,c)}),J=oh({elementType:V,externalSlotProps:X,ownerState:$,className:ht(U.badge,X==null?void 0:X.className)});return B.jsxs(H,L({},ne,{children:[p,B.jsx(V,L({},J,{children:j}))]}))}),bee=oxe,axe=_F(),sxe=Jme({themeId:Bm,defaultTheme:axe,defaultClassName:"MuiBox-root",generateClassName:lF.generate}),Na=sxe;function lxe(e){return ur("MuiButton",e)}const uxe=cr("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),z_=uxe,cxe=P.createContext({}),dxe=cxe,hxe=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],fxe=e=>{const{color:t,disableElevation:r,fullWidth:n,size:i,variant:o,classes:a}=e,s={root:["root",o,`${o}${$e(t)}`,`size${$e(i)}`,`${o}Size${$e(i)}`,t==="inherit"&&"colorInherit",r&&"disableElevation",n&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${$e(i)}`],endIcon:["endIcon",`iconSize${$e(i)}`]},l=lt(s,lxe,a);return L({},a,l)},xee=e=>L({},e.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},e.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},e.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),pxe=He(zy,{shouldForwardProp:e=>ju(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`${r.variant}${$e(r.color)}`],t[`size${$e(r.size)}`],t[`${r.variant}Size${$e(r.size)}`],r.color==="inherit"&&t.colorInherit,r.disableElevation&&t.disableElevation,r.fullWidth&&t.fullWidth]}})(({theme:e,ownerState:t})=>{var r,n;const i=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],o=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return L({},e.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":L({textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:lr(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="text"&&t.color!=="inherit"&&{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:lr(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="outlined"&&t.color!=="inherit"&&{border:`1px solid ${(e.vars||e).palette[t.color].main}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:lr(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="contained"&&{backgroundColor:e.vars?e.vars.palette.Button.inheritContainedHoverBg:o,boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2],backgroundColor:(e.vars||e).palette.grey[300]}},t.variant==="contained"&&t.color!=="inherit"&&{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}}),"&:active":L({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[8]}),[`&.${z_.focusVisible}`]:L({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[6]}),[`&.${z_.disabled}`]:L({color:(e.vars||e).palette.action.disabled},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},t.variant==="contained"&&{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground})},t.variant==="text"&&{padding:"6px 8px"},t.variant==="text"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main},t.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},t.variant==="outlined"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main,border:e.vars?`1px solid rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:`1px solid ${lr(e.palette[t.color].main,.5)}`},t.variant==="contained"&&{color:e.vars?e.vars.palette.text.primary:(r=(n=e.palette).getContrastText)==null?void 0:r.call(n,e.palette.grey[300]),backgroundColor:e.vars?e.vars.palette.Button.inheritContainedBg:i,boxShadow:(e.vars||e).shadows[2]},t.variant==="contained"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main},t.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},t.size==="small"&&t.variant==="text"&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="text"&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="outlined"&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="outlined"&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="contained"&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="contained"&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},t.fullWidth&&{width:"100%"})},({ownerState:e})=>e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${z_.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${z_.disabled}`]:{boxShadow:"none"}}),mxe=He("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.startIcon,t[`iconSize${$e(r.size)}`]]}})(({ownerState:e})=>L({display:"inherit",marginRight:8,marginLeft:-4},e.size==="small"&&{marginLeft:-2},xee(e))),gxe=He("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.endIcon,t[`iconSize${$e(r.size)}`]]}})(({ownerState:e})=>L({display:"inherit",marginRight:-4,marginLeft:8},e.size==="small"&&{marginRight:-2},xee(e))),vxe=P.forwardRef(function(t,r){const n=P.useContext(dxe),i=sF(n,t),o=pr({props:i,name:"MuiButton"}),{children:a,color:s="primary",component:l="button",className:u,disabled:d=!1,disableElevation:c=!1,disableFocusRipple:h=!1,endIcon:f,focusVisibleClassName:m,fullWidth:p=!1,size:g="medium",startIcon:v,type:b,variant:y="text"}=o,x=Ie(o,hxe),S=L({},o,{color:s,component:l,disabled:d,disableElevation:c,disableFocusRipple:h,fullWidth:p,size:g,type:b,variant:y}),w=fxe(S),_=v&&B.jsx(mxe,{className:w.startIcon,ownerState:S,children:v}),C=f&&B.jsx(gxe,{className:w.endIcon,ownerState:S,children:f});return B.jsxs(pxe,L({ownerState:S,className:ht(n.className,w.root,u),component:l,disabled:d,focusRipple:!h,focusVisibleClassName:ht(w.focusVisible,m),ref:r,type:b},x,{classes:w,children:[_,a,C]}))}),LF=vxe;function yxe(e){return ur("PrivateSwitchBase",e)}cr("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const bxe=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],xxe=e=>{const{classes:t,checked:r,disabled:n,edge:i}=e,o={root:["root",r&&"checked",n&&"disabled",i&&`edge${$e(i)}`],input:["input"]};return lt(o,yxe,t)},wxe=He(zy)(({ownerState:e})=>L({padding:9,borderRadius:"50%"},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12})),Sxe=He("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),_xe=P.forwardRef(function(t,r){const{autoFocus:n,checked:i,checkedIcon:o,className:a,defaultChecked:s,disabled:l,disableFocusRipple:u=!1,edge:d=!1,icon:c,id:h,inputProps:f,inputRef:m,name:p,onBlur:g,onChange:v,onFocus:b,readOnly:y,required:x=!1,tabIndex:S,type:w,value:_}=t,C=Ie(t,bxe),[E,A]=Rf({controlled:i,default:!!s,name:"SwitchBase",state:"checked"}),M=cp(),I=z=>{b&&b(z),M&&M.onFocus&&M.onFocus(z)},O=z=>{g&&g(z),M&&M.onBlur&&M.onBlur(z)},T=z=>{if(z.nativeEvent.defaultPrevented)return;const j=z.target.checked;A(j),v&&v(z,j)};let D=l;M&&typeof D>"u"&&(D=M.disabled);const N=w==="checkbox"||w==="radio",k=L({},t,{checked:E,disabled:D,disableFocusRipple:u,edge:d}),R=xxe(k);return B.jsxs(wxe,L({component:"span",className:ht(R.root,a),centerRipple:!0,focusRipple:!u,disabled:D,tabIndex:null,role:void 0,onFocus:I,onBlur:O,ownerState:k,ref:r},C,{children:[B.jsx(Sxe,L({autoFocus:n,checked:i,defaultChecked:s,className:R.input,disabled:D,id:N?h:void 0,name:p,onChange:T,readOnly:y,ref:m,required:x,ownerState:k,tabIndex:S,type:w},w==="checkbox"&&_===void 0?{}:{value:_},f)),E?o:c]}))}),wee=_xe,Cxe=_r(B.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),Axe=_r(B.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),Exe=_r(B.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function Mxe(e){return ur("MuiCheckbox",e)}const Pxe=cr("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),fI=Pxe,Txe=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],Oxe=e=>{const{classes:t,indeterminate:r,color:n,size:i}=e,o={root:["root",r&&"indeterminate",`color${$e(n)}`,`size${$e(i)}`]},a=lt(o,Mxe,t);return L({},t,a)},Ixe=He(wee,{shouldForwardProp:e=>ju(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.indeterminate&&t.indeterminate,r.color!=="default"&&t[`color${$e(r.color)}`]]}})(({theme:e,ownerState:t})=>L({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${t.color==="default"?e.vars.palette.action.activeChannel:e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:lr(t.color==="default"?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${fI.checked}, &.${fI.indeterminate}`]:{color:(e.vars||e).palette[t.color].main},[`&.${fI.disabled}`]:{color:(e.vars||e).palette.action.disabled}})),Dxe=B.jsx(Axe,{}),Rxe=B.jsx(Cxe,{}),kxe=B.jsx(Exe,{}),Lxe=P.forwardRef(function(t,r){var n,i;const o=pr({props:t,name:"MuiCheckbox"}),{checkedIcon:a=Dxe,color:s="primary",icon:l=Rxe,indeterminate:u=!1,indeterminateIcon:d=kxe,inputProps:c,size:h="medium",className:f}=o,m=Ie(o,Txe),p=u?d:l,g=u?d:a,v=L({},o,{color:s,indeterminate:u,size:h}),b=Oxe(v);return B.jsx(Ixe,L({type:"checkbox",inputProps:L({"data-indeterminate":u},c),icon:P.cloneElement(p,{fontSize:(n=p.props.fontSize)!=null?n:h}),checkedIcon:P.cloneElement(g,{fontSize:(i=g.props.fontSize)!=null?i:h}),ownerState:v,ref:r,className:ht(b.root,f)},m,{classes:b}))}),Nxe=Lxe;function zxe(e){return ur("MuiCircularProgress",e)}cr("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Bxe=["className","color","disableShrink","size","style","thickness","value","variant"];let n2=e=>e,wV,SV,_V,CV;const Mh=44,Fxe=ng(wV||(wV=n2`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),jxe=ng(SV||(SV=n2`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),Uxe=e=>{const{classes:t,variant:r,color:n,disableShrink:i}=e,o={root:["root",r,`color${$e(n)}`],svg:["svg"],circle:["circle",`circle${$e(r)}`,i&&"circleDisableShrink"]};return lt(o,zxe,t)},$xe=He("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`color${$e(r.color)}`]]}})(({ownerState:e,theme:t})=>L({display:"inline-block"},e.variant==="determinate"&&{transition:t.transitions.create("transform")},e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main}),({ownerState:e})=>e.variant==="indeterminate"&&rw(_V||(_V=n2`
      animation: ${0} 1.4s linear infinite;
    `),Fxe)),Vxe=He("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),Hxe=He("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.circle,t[`circle${$e(r.variant)}`],r.disableShrink&&t.circleDisableShrink]}})(({ownerState:e,theme:t})=>L({stroke:"currentColor"},e.variant==="determinate"&&{transition:t.transitions.create("stroke-dashoffset")},e.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink&&rw(CV||(CV=n2`
      animation: ${0} 1.4s ease-in-out infinite;
    `),jxe)),Gxe=P.forwardRef(function(t,r){const n=pr({props:t,name:"MuiCircularProgress"}),{className:i,color:o="primary",disableShrink:a=!1,size:s=40,style:l,thickness:u=3.6,value:d=0,variant:c="indeterminate"}=n,h=Ie(n,Bxe),f=L({},n,{color:o,disableShrink:a,size:s,thickness:u,value:d,variant:c}),m=Uxe(f),p={},g={},v={};if(c==="determinate"){const b=2*Math.PI*((Mh-u)/2);p.strokeDasharray=b.toFixed(3),v["aria-valuenow"]=Math.round(d),p.strokeDashoffset=`${((100-d)/100*b).toFixed(3)}px`,g.transform="rotate(-90deg)"}return B.jsx($xe,L({className:ht(m.root,i),style:L({width:s,height:s},g,l),ownerState:f,ref:r,role:"progressbar"},v,h,{children:B.jsx(Vxe,{className:m.svg,ownerState:f,viewBox:`${Mh/2} ${Mh/2} ${Mh} ${Mh}`,children:B.jsx(Hxe,{className:m.circle,style:p,ownerState:f,cx:Mh,cy:Mh,r:(Mh-u)/2,fill:"none",strokeWidth:u})})}))}),Wxe=Gxe,qxe=(e,t)=>L({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},t&&!e.vars&&{colorScheme:e.palette.mode}),Kxe=e=>L({color:(e.vars||e).palette.text.primary},e.typography.body1,{backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}}),Xxe=(e,t=!1)=>{var r;const n={};t&&e.colorSchemes&&Object.entries(e.colorSchemes).forEach(([a,s])=>{var l;n[e.getColorSchemeSelector(a).replace(/\s*&/,"")]={colorScheme:(l=s.palette)==null?void 0:l.mode}});let i=L({html:qxe(e,t),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:L({margin:0},Kxe(e),{"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}})},n);const o=(r=e.components)==null||(r=r.MuiCssBaseline)==null?void 0:r.styleOverrides;return o&&(i=[i,o]),i};function Yxe(e){const t=pr({props:e,name:"MuiCssBaseline"}),{children:r,enableColorScheme:n=!1}=t;return B.jsxs(P.Fragment,{children:[B.jsx(gee,{styles:i=>Xxe(i,n)}),r]})}function Qxe(e){return ur("MuiModal",e)}cr("MuiModal",["root","hidden","backdrop"]);const Zxe=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","open","slotProps","slots","theme"],Jxe=e=>{const{open:t,exited:r,classes:n}=e;return lt({root:["root",!t&&r&&"hidden"],backdrop:["backdrop"]},Qxe,n)},e1e=He("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.open&&r.exited&&t.hidden]}})(({theme:e,ownerState:t})=>L({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0},!t.open&&t.exited&&{visibility:"hidden"})),t1e=He(Zbe,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),r1e=P.forwardRef(function(t,r){var n,i,o,a,s,l;const u=pr({name:"MuiModal",props:t}),{BackdropComponent:d=t1e,BackdropProps:c,className:h,closeAfterTransition:f=!1,children:m,container:p,component:g,components:v={},componentsProps:b={},disableAutoFocus:y=!1,disableEnforceFocus:x=!1,disableEscapeKeyDown:S=!1,disablePortal:w=!1,disableRestoreFocus:_=!1,disableScrollLock:C=!1,hideBackdrop:E=!1,keepMounted:A=!1,onBackdropClick:M,open:I,slotProps:O,slots:T}=u,D=Ie(u,Zxe),N=L({},u,{closeAfterTransition:f,disableAutoFocus:y,disableEnforceFocus:x,disableEscapeKeyDown:S,disablePortal:w,disableRestoreFocus:_,disableScrollLock:C,hideBackdrop:E,keepMounted:A}),{getRootProps:k,getBackdropProps:R,getTransitionProps:z,portalRef:j,isTopModal:$,exited:U,hasTransition:H}=V0e(L({},N,{rootRef:r})),V=L({},N,{exited:U}),Q=Jxe(V),X={};if(m.props.tabIndex===void 0&&(X.tabIndex="-1"),H){const{onEnter:ie,onExited:he}=z();X.onEnter=ie,X.onExited=he}const ne=(n=(i=T==null?void 0:T.root)!=null?i:v.Root)!=null?n:e1e,J=(o=(a=T==null?void 0:T.backdrop)!=null?a:v.Backdrop)!=null?o:d,W=(s=O==null?void 0:O.root)!=null?s:b.root,te=(l=O==null?void 0:O.backdrop)!=null?l:b.backdrop,Z=oh({elementType:ne,externalSlotProps:W,externalForwardedProps:D,getSlotProps:k,additionalProps:{ref:r,as:g},ownerState:V,className:ht(h,W==null?void 0:W.className,Q==null?void 0:Q.root,!V.open&&V.exited&&(Q==null?void 0:Q.hidden))}),q=oh({elementType:J,externalSlotProps:te,additionalProps:c,getSlotProps:ie=>R(L({},ie,{onClick:he=>{M&&M(he),ie!=null&&ie.onClick&&ie.onClick(he)}})),className:ht(te==null?void 0:te.className,c==null?void 0:c.className,Q==null?void 0:Q.backdrop),ownerState:V});return!A&&!I&&(!H||U)?null:B.jsx(fee,{ref:j,container:p,disablePortal:w,children:B.jsxs(ne,L({},Z,{children:[!E&&d?B.jsx(J,L({},q)):null,B.jsx(nee,{disableEnforceFocus:x,disableAutoFocus:y,disableRestoreFocus:_,isEnabled:$,open:I,children:P.cloneElement(m,X)})]}))})}),n1e=r1e;function i1e(e){return ur("MuiDivider",e)}const o1e=cr("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),AV=o1e,a1e=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],s1e=e=>{const{absolute:t,children:r,classes:n,flexItem:i,light:o,orientation:a,textAlign:s,variant:l}=e;return lt({root:["root",t&&"absolute",l,o&&"light",a==="vertical"&&"vertical",i&&"flexItem",r&&"withChildren",r&&a==="vertical"&&"withChildrenVertical",s==="right"&&a!=="vertical"&&"textAlignRight",s==="left"&&a!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",a==="vertical"&&"wrapperVertical"]},i1e,n)},l1e=He("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.absolute&&t.absolute,t[r.variant],r.light&&t.light,r.orientation==="vertical"&&t.vertical,r.flexItem&&t.flexItem,r.children&&t.withChildren,r.children&&r.orientation==="vertical"&&t.withChildrenVertical,r.textAlign==="right"&&r.orientation!=="vertical"&&t.textAlignRight,r.textAlign==="left"&&r.orientation!=="vertical"&&t.textAlignLeft]}})(({theme:e,ownerState:t})=>L({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin"},t.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},t.light&&{borderColor:e.vars?`rgba(${e.vars.palette.dividerChannel} / 0.08)`:lr(e.palette.divider,.08)},t.variant==="inset"&&{marginLeft:72},t.variant==="middle"&&t.orientation==="horizontal"&&{marginLeft:e.spacing(2),marginRight:e.spacing(2)},t.variant==="middle"&&t.orientation==="vertical"&&{marginTop:e.spacing(1),marginBottom:e.spacing(1)},t.orientation==="vertical"&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},t.flexItem&&{alignSelf:"stretch",height:"auto"}),({ownerState:e})=>L({},e.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{content:'""',alignSelf:"center"}}),({theme:e,ownerState:t})=>L({},t.children&&t.orientation!=="vertical"&&{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`}}),({theme:e,ownerState:t})=>L({},t.children&&t.orientation==="vertical"&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(e.vars||e).palette.divider}`}}),({ownerState:e})=>L({},e.textAlign==="right"&&e.orientation!=="vertical"&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},e.textAlign==="left"&&e.orientation!=="vertical"&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})),u1e=He("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.wrapper,r.orientation==="vertical"&&t.wrapperVertical]}})(({theme:e,ownerState:t})=>L({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`},t.orientation==="vertical"&&{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`})),See=P.forwardRef(function(t,r){const n=pr({props:t,name:"MuiDivider"}),{absolute:i=!1,children:o,className:a,component:s=o?"div":"hr",flexItem:l=!1,light:u=!1,orientation:d="horizontal",role:c=s!=="hr"?"separator":void 0,textAlign:h="center",variant:f="fullWidth"}=n,m=Ie(n,a1e),p=L({},n,{absolute:i,component:s,flexItem:l,light:u,orientation:d,role:c,textAlign:h,variant:f}),g=s1e(p);return B.jsx(l1e,L({as:s,className:ht(g.root,a),role:c,ref:r,ownerState:p},m,{children:o?B.jsx(u1e,{className:g.wrapper,ownerState:p,children:o}):null}))});See.muiSkipListHighlight=!0;const c1e=See,d1e=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],h1e=e=>{const{classes:t,disableUnderline:r}=e,i=lt({root:["root",!r&&"underline"],input:["input"]},Cbe,t);return L({},t,i)},f1e=He(t2,{shouldForwardProp:e=>ju(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[...JT(e,t),!r.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{var r;const n=e.palette.mode==="light",i=n?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",o=n?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",a=n?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",s=n?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return L({position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:o,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:a,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:o}},[`&.${$s.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:o},[`&.${$s.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:s}},!t.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(r=(e.vars||e).palette[t.color||"primary"])==null?void 0:r.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${$s.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${$s.error}`]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&:before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:i}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${$s.disabled}, .${$s.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${$s.disabled}:before`]:{borderBottomStyle:"dotted"}},t.startAdornment&&{paddingLeft:12},t.endAdornment&&{paddingRight:12},t.multiline&&L({padding:"25px 12px 8px"},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17}))}),p1e=He(r2,{name:"MuiFilledInput",slot:"Input",overridesResolver:e2})(({theme:e,ownerState:t})=>L({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17},t.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0},t.hiddenLabel&&t.size==="small"&&{paddingTop:8,paddingBottom:9})),_ee=P.forwardRef(function(t,r){var n,i,o,a;const s=pr({props:t,name:"MuiFilledInput"}),{components:l={},componentsProps:u,fullWidth:d=!1,inputComponent:c="input",multiline:h=!1,slotProps:f,slots:m={},type:p="text"}=s,g=Ie(s,d1e),v=L({},s,{fullWidth:d,inputComponent:c,multiline:h,type:p}),b=h1e(s),y={root:{ownerState:v},input:{ownerState:v}},x=f??u?ws(f??u,y):y,S=(n=(i=m.root)!=null?i:l.Root)!=null?n:f1e,w=(o=(a=m.input)!=null?a:l.Input)!=null?o:p1e;return B.jsx(B0,L({slots:{root:S,input:w},componentsProps:x,fullWidth:d,inputComponent:c,multiline:h,ref:r,type:p},g,{classes:b}))});_ee.muiName="Input";const Cee=_ee;function m1e(e){return ur("MuiFormControl",e)}cr("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const g1e=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],v1e=e=>{const{classes:t,margin:r,fullWidth:n}=e,i={root:["root",r!=="none"&&`margin${$e(r)}`,n&&"fullWidth"]};return lt(i,m1e,t)},y1e=He("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:e},t)=>L({},t.root,t[`margin${$e(e.margin)}`],e.fullWidth&&t.fullWidth)})(({ownerState:e})=>L({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},e.margin==="normal"&&{marginTop:16,marginBottom:8},e.margin==="dense"&&{marginTop:8,marginBottom:4},e.fullWidth&&{width:"100%"})),b1e=P.forwardRef(function(t,r){const n=pr({props:t,name:"MuiFormControl"}),{children:i,className:o,color:a="primary",component:s="div",disabled:l=!1,error:u=!1,focused:d,fullWidth:c=!1,hiddenLabel:h=!1,margin:f="none",required:m=!1,size:p="medium",variant:g="outlined"}=n,v=Ie(n,g1e),b=L({},n,{color:a,component:s,disabled:l,error:u,fullWidth:c,hiddenLabel:h,margin:f,required:m,size:p,variant:g}),y=v1e(b),[x,S]=P.useState(()=>{let O=!1;return i&&P.Children.forEach(i,T=>{if(!kA(T,["Input","Select"]))return;const D=kA(T,["Select"])?T.props.input:T;D&&fbe(D.props)&&(O=!0)}),O}),[w,_]=P.useState(()=>{let O=!1;return i&&P.Children.forEach(i,T=>{kA(T,["Input","Select"])&&(LE(T.props,!0)||LE(T.props.inputProps,!0))&&(O=!0)}),O}),[C,E]=P.useState(!1);l&&C&&E(!1);const A=d!==void 0&&!l?d:C;let M;const I=P.useMemo(()=>({adornedStart:x,setAdornedStart:S,color:a,disabled:l,error:u,filled:w,focused:A,fullWidth:c,hiddenLabel:h,size:p,onBlur:()=>{E(!1)},onEmpty:()=>{_(!1)},onFilled:()=>{_(!0)},onFocus:()=>{E(!0)},registerEffect:M,required:m,variant:g}),[x,a,l,u,w,A,c,h,M,m,p,g]);return B.jsx(kF.Provider,{value:I,children:B.jsx(y1e,L({as:s,ownerState:b,className:ht(y.root,o),ref:r},v,{children:i}))})}),Aee=b1e,x1e=Mge({createStyledComponent:He("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>pr({props:e,name:"MuiStack"})}),Eee=x1e;function w1e(e){return ur("MuiFormControlLabel",e)}const S1e=cr("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Rx=S1e,_1e=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],C1e=e=>{const{classes:t,disabled:r,labelPlacement:n,error:i,required:o}=e,a={root:["root",r&&"disabled",`labelPlacement${$e(n)}`,i&&"error",o&&"required"],label:["label",r&&"disabled"],asterisk:["asterisk",i&&"error"]};return lt(a,w1e,t)},A1e=He("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${Rx.label}`]:t.label},t.root,t[`labelPlacement${$e(r.labelPlacement)}`]]}})(({theme:e,ownerState:t})=>L({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Rx.disabled}`]:{cursor:"default"}},t.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},t.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},t.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${Rx.label}`]:{[`&.${Rx.disabled}`]:{color:(e.vars||e).palette.text.disabled}}})),E1e=He("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${Rx.error}`]:{color:(e.vars||e).palette.error.main}})),M1e=P.forwardRef(function(t,r){var n,i;const o=pr({props:t,name:"MuiFormControlLabel"}),{className:a,componentsProps:s={},control:l,disabled:u,disableTypography:d,label:c,labelPlacement:h="end",required:f,slotProps:m={}}=o,p=Ie(o,_1e),g=cp(),v=(n=u??l.props.disabled)!=null?n:g==null?void 0:g.disabled,b=f??l.props.required,y={disabled:v,required:b};["checked","name","onChange","value","inputRef"].forEach(E=>{typeof l.props[E]>"u"&&typeof o[E]<"u"&&(y[E]=o[E])});const x=og({props:o,muiFormControl:g,states:["error"]}),S=L({},o,{disabled:v,labelPlacement:h,required:b,error:x.error}),w=C1e(S),_=(i=m.typography)!=null?i:s.typography;let C=c;return C!=null&&C.type!==vi&&!d&&(C=B.jsx(vi,L({component:"span"},_,{className:ht(w.label,_==null?void 0:_.className),children:C}))),B.jsxs(A1e,L({className:ht(w.root,a),ownerState:S,ref:r},p,{children:[P.cloneElement(l,y),b?B.jsxs(Eee,{direction:"row",alignItems:"center",children:[C,B.jsxs(E1e,{ownerState:S,"aria-hidden":!0,className:w.asterisk,children:["","*"]})]}):C]}))}),P1e=M1e;function T1e(e){return ur("MuiFormHelperText",e)}const O1e=cr("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),EV=O1e;var MV;const I1e=["children","className","component","disabled","error","filled","focused","margin","required","variant"],D1e=e=>{const{classes:t,contained:r,size:n,disabled:i,error:o,filled:a,focused:s,required:l}=e,u={root:["root",i&&"disabled",o&&"error",n&&`size${$e(n)}`,r&&"contained",s&&"focused",a&&"filled",l&&"required"]};return lt(u,T1e,t)},R1e=He("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.size&&t[`size${$e(r.size)}`],r.contained&&t.contained,r.filled&&t.filled]}})(({theme:e,ownerState:t})=>L({color:(e.vars||e).palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${EV.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${EV.error}`]:{color:(e.vars||e).palette.error.main}},t.size==="small"&&{marginTop:4},t.contained&&{marginLeft:14,marginRight:14})),k1e=P.forwardRef(function(t,r){const n=pr({props:t,name:"MuiFormHelperText"}),{children:i,className:o,component:a="p"}=n,s=Ie(n,I1e),l=cp(),u=og({props:n,muiFormControl:l,states:["variant","size","disabled","error","filled","focused","required"]}),d=L({},n,{component:a,contained:u.variant==="filled"||u.variant==="outlined",variant:u.variant,size:u.size,disabled:u.disabled,error:u.error,filled:u.filled,focused:u.focused,required:u.required}),c=D1e(d);return B.jsx(R1e,L({as:a,ownerState:d,className:ht(c.root,o),ref:r},s,{children:i===" "?MV||(MV=B.jsx("span",{className:"notranslate",children:""})):i}))}),L1e=k1e;function N1e(e){return ur("MuiFormLabel",e)}const z1e=cr("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),u1=z1e,B1e=["children","className","color","component","disabled","error","filled","focused","required"],F1e=e=>{const{classes:t,color:r,focused:n,disabled:i,error:o,filled:a,required:s}=e,l={root:["root",`color${$e(r)}`,i&&"disabled",o&&"error",a&&"filled",n&&"focused",s&&"required"],asterisk:["asterisk",o&&"error"]};return lt(l,N1e,t)},j1e=He("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:e},t)=>L({},t.root,e.color==="secondary"&&t.colorSecondary,e.filled&&t.filled)})(({theme:e,ownerState:t})=>L({color:(e.vars||e).palette.text.secondary},e.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${u1.focused}`]:{color:(e.vars||e).palette[t.color].main},[`&.${u1.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${u1.error}`]:{color:(e.vars||e).palette.error.main}})),U1e=He("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${u1.error}`]:{color:(e.vars||e).palette.error.main}})),$1e=P.forwardRef(function(t,r){const n=pr({props:t,name:"MuiFormLabel"}),{children:i,className:o,component:a="label"}=n,s=Ie(n,B1e),l=cp(),u=og({props:n,muiFormControl:l,states:["color","required","focused","disabled","error","filled"]}),d=L({},n,{color:u.color||"primary",component:a,disabled:u.disabled,error:u.error,filled:u.filled,focused:u.focused,required:u.required}),c=F1e(d);return B.jsxs(j1e,L({as:a,ownerState:d,className:ht(c.root,o),ref:r},s,{children:[i,u.required&&B.jsxs(U1e,{ownerState:d,"aria-hidden":!0,className:c.asterisk,children:["","*"]})]}))}),V1e=$1e,H1e=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function _3(e){return`scale(${e}, ${e**2})`}const G1e={entering:{opacity:1,transform:_3(1)},entered:{opacity:1,transform:"none"}},pI=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Mee=P.forwardRef(function(t,r){const{addEndListener:n,appear:i=!0,children:o,easing:a,in:s,onEnter:l,onEntered:u,onEntering:d,onExit:c,onExited:h,onExiting:f,style:m,timeout:p="auto",TransitionComponent:g=JJ}=t,v=Ie(t,H1e),b=P.useRef(),y=P.useRef(),x=Qa(),S=P.useRef(null),w=nn(S,o.ref,r),_=D=>N=>{if(D){const k=S.current;N===void 0?D(k):D(k,N)}},C=_(d),E=_((D,N)=>{eee(D);const{duration:k,delay:R,easing:z}=RE({style:m,timeout:p,easing:a},{mode:"enter"});let j;p==="auto"?(j=x.transitions.getAutoHeightDuration(D.clientHeight),y.current=j):j=k,D.style.transition=[x.transitions.create("opacity",{duration:j,delay:R}),x.transitions.create("transform",{duration:pI?j:j*.666,delay:R,easing:z})].join(","),l&&l(D,N)}),A=_(u),M=_(f),I=_(D=>{const{duration:N,delay:k,easing:R}=RE({style:m,timeout:p,easing:a},{mode:"exit"});let z;p==="auto"?(z=x.transitions.getAutoHeightDuration(D.clientHeight),y.current=z):z=N,D.style.transition=[x.transitions.create("opacity",{duration:z,delay:k}),x.transitions.create("transform",{duration:pI?z:z*.666,delay:pI?k:k||z*.333,easing:R})].join(","),D.style.opacity=0,D.style.transform=_3(.75),c&&c(D)}),O=_(h),T=D=>{p==="auto"&&(b.current=setTimeout(D,y.current||0)),n&&n(S.current,D)};return P.useEffect(()=>()=>{clearTimeout(b.current)},[]),B.jsx(g,L({appear:i,in:s,nodeRef:S,onEnter:E,onEntered:A,onEntering:C,onExit:I,onExited:O,onExiting:M,addEndListener:T,timeout:p==="auto"?null:p},v,{children:(D,N)=>P.cloneElement(o,L({style:L({opacity:0,transform:_3(.75),visibility:D==="exited"&&!s?"hidden":void 0},G1e[D],m,o.props.style),ref:w},N))}))});Mee.muiSupportAuto=!0;const NE=Mee;function W1e(e,t,r,n,i){const[o,a]=P.useState(()=>i&&r?r(e).matches:n?n(e).matches:t);return li(()=>{let s=!0;if(!r)return;const l=r(e),u=()=>{s&&a(l.matches)};return u(),l.addListener(u),()=>{s=!1,l.removeListener(u)}},[e,r]),o}const Pee=R1["useSyncExternalStore"];function q1e(e,t,r,n,i){const o=P.useCallback(()=>t,[t]),a=P.useMemo(()=>{if(i&&r)return()=>r(e).matches;if(n!==null){const{matches:d}=n(e);return()=>d}return o},[o,e,n,i,r]),[s,l]=P.useMemo(()=>{if(r===null)return[o,()=>()=>{}];const d=r(e);return[()=>d.matches,c=>(d.addListener(c),()=>{d.removeListener(c)})]},[o,r,e]);return Pee(l,s,a)}function K1e(e,t={}){const r=WT(),n=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:i=!1,matchMedia:o=n?window.matchMedia:null,ssrMatchMedia:a=null,noSsr:s=!1}=qJ({name:"MuiUseMediaQuery",props:t,theme:r});let l=typeof e=="function"?e(r):e;return l=l.replace(/^@media( ?)/m,""),(Pee!==void 0?q1e:W1e)(l,i,o,a,s)}const X1e=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],Y1e=e=>{const{classes:t,disableUnderline:r}=e,i=lt({root:["root",!r&&"underline"],input:["input"]},xbe,t);return L({},t,i)},Q1e=He(t2,{shouldForwardProp:e=>ju(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[...JT(e,t),!r.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{let n=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(n=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),L({position:"relative"},t.formControl&&{"label + &":{marginTop:16}},!t.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(e.vars||e).palette[t.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${rf.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${rf.error}`]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&:before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${rf.disabled}, .${rf.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${rf.disabled}:before`]:{borderBottomStyle:"dotted"}})}),Z1e=He(r2,{name:"MuiInput",slot:"Input",overridesResolver:e2})({}),Tee=P.forwardRef(function(t,r){var n,i,o,a;const s=pr({props:t,name:"MuiInput"}),{disableUnderline:l,components:u={},componentsProps:d,fullWidth:c=!1,inputComponent:h="input",multiline:f=!1,slotProps:m,slots:p={},type:g="text"}=s,v=Ie(s,X1e),b=Y1e(s),x={root:{ownerState:{disableUnderline:l}}},S=m??d?ws(m??d,x):x,w=(n=(i=p.root)!=null?i:u.Root)!=null?n:Q1e,_=(o=(a=p.input)!=null?a:u.Input)!=null?o:Z1e;return B.jsx(B0,L({slots:{root:w,input:_},slotProps:S,fullWidth:c,inputComponent:h,multiline:f,ref:r,type:g},v,{classes:b}))});Tee.muiName="Input";const Oee=Tee;function J1e(e){return ur("MuiInputLabel",e)}cr("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const ewe=["disableAnimation","margin","shrink","variant","className"],twe=e=>{const{classes:t,formControl:r,size:n,shrink:i,disableAnimation:o,variant:a,required:s}=e,u=lt({root:["root",r&&"formControl",!o&&"animated",i&&"shrink",n==="small"&&"sizeSmall",a],asterisk:[s&&"asterisk"]},J1e,t);return L({},t,u)},rwe=He(V1e,{shouldForwardProp:e=>ju(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${u1.asterisk}`]:t.asterisk},t.root,r.formControl&&t.formControl,r.size==="small"&&t.sizeSmall,r.shrink&&t.shrink,!r.disableAnimation&&t.animated,t[r.variant]]}})(({theme:e,ownerState:t})=>L({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},t.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},t.size==="small"&&{transform:"translate(0, 17px) scale(1)"},t.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!t.disableAnimation&&{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},t.variant==="filled"&&L({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},t.shrink&&L({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},t.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),t.variant==="outlined"&&L({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},t.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),nwe=P.forwardRef(function(t,r){const n=pr({name:"MuiInputLabel",props:t}),{disableAnimation:i=!1,shrink:o,className:a}=n,s=Ie(n,ewe),l=cp();let u=o;typeof u>"u"&&l&&(u=l.filled||l.focused||l.adornedStart);const d=og({props:n,muiFormControl:l,states:["size","variant","required"]}),c=L({},n,{disableAnimation:i,formControl:l,shrink:u,size:d.size,variant:d.variant,required:d.required}),h=twe(c);return B.jsx(rwe,L({"data-shrink":u,ownerState:c,ref:r,className:ht(h.root,a)},s,{classes:h}))}),Iee=nwe,iwe=P.createContext({}),aw=iwe;function owe(e){return ur("MuiList",e)}cr("MuiList",["root","padding","dense","subheader"]);const awe=["children","className","component","dense","disablePadding","subheader"],swe=e=>{const{classes:t,disablePadding:r,dense:n,subheader:i}=e;return lt({root:["root",!r&&"padding",n&&"dense",i&&"subheader"]},owe,t)},lwe=He("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disablePadding&&t.padding,r.dense&&t.dense,r.subheader&&t.subheader]}})(({ownerState:e})=>L({listStyle:"none",margin:0,padding:0,position:"relative"},!e.disablePadding&&{paddingTop:8,paddingBottom:8},e.subheader&&{paddingTop:0})),uwe=P.forwardRef(function(t,r){const n=pr({props:t,name:"MuiList"}),{children:i,className:o,component:a="ul",dense:s=!1,disablePadding:l=!1,subheader:u}=n,d=Ie(n,awe),c=P.useMemo(()=>({dense:s}),[s]),h=L({},n,{component:a,dense:s,disablePadding:l}),f=swe(h);return B.jsx(aw.Provider,{value:c,children:B.jsxs(lwe,L({as:a,className:ht(f.root,o),ref:r,ownerState:h},d,{children:[u,i]}))})}),cwe=uwe;function dwe(e){return ur("MuiListItemIcon",e)}const hwe=cr("MuiListItemIcon",["root","alignItemsFlexStart"]),PV=hwe,fwe=["className"],pwe=e=>{const{alignItems:t,classes:r}=e;return lt({root:["root",t==="flex-start"&&"alignItemsFlexStart"]},dwe,r)},mwe=He("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.alignItems==="flex-start"&&t.alignItemsFlexStart]}})(({theme:e,ownerState:t})=>L({minWidth:56,color:(e.vars||e).palette.action.active,flexShrink:0,display:"inline-flex"},t.alignItems==="flex-start"&&{marginTop:8})),gwe=P.forwardRef(function(t,r){const n=pr({props:t,name:"MuiListItemIcon"}),{className:i}=n,o=Ie(n,fwe),a=P.useContext(aw),s=L({},n,{alignItems:a.alignItems}),l=pwe(s);return B.jsx(mwe,L({className:ht(l.root,i),ownerState:s,ref:r},o))}),ey=gwe;function vwe(e){return ur("MuiListItemText",e)}const ywe=cr("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),zE=ywe,bwe=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],xwe=e=>{const{classes:t,inset:r,primary:n,secondary:i,dense:o}=e;return lt({root:["root",r&&"inset",o&&"dense",n&&i&&"multiline"],primary:["primary"],secondary:["secondary"]},vwe,t)},wwe=He("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${zE.primary}`]:t.primary},{[`& .${zE.secondary}`]:t.secondary},t.root,r.inset&&t.inset,r.primary&&r.secondary&&t.multiline,r.dense&&t.dense]}})(({ownerState:e})=>L({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},e.primary&&e.secondary&&{marginTop:6,marginBottom:6},e.inset&&{paddingLeft:56})),Swe=P.forwardRef(function(t,r){const n=pr({props:t,name:"MuiListItemText"}),{children:i,className:o,disableTypography:a=!1,inset:s=!1,primary:l,primaryTypographyProps:u,secondary:d,secondaryTypographyProps:c}=n,h=Ie(n,bwe),{dense:f}=P.useContext(aw);let m=l??i,p=d;const g=L({},n,{disableTypography:a,inset:s,primary:!!m,secondary:!!p,dense:f}),v=xwe(g);return m!=null&&m.type!==vi&&!a&&(m=B.jsx(vi,L({variant:f?"body2":"body1",className:v.primary,component:u!=null&&u.variant?void 0:"span",display:"block"},u,{children:m}))),p!=null&&p.type!==vi&&!a&&(p=B.jsx(vi,L({variant:"body2",className:v.secondary,color:"text.secondary",display:"block"},c,{children:p}))),B.jsxs(wwe,L({className:ht(v.root,o),ownerState:g,ref:r},h,{children:[m,p]}))}),ty=Swe,_we=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function mI(e,t,r){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:r?null:e.firstChild}function TV(e,t,r){return e===t?r?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:r?null:e.lastChild}function Dee(e,t){if(t===void 0)return!0;let r=e.innerText;return r===void 0&&(r=e.textContent),r=r.trim().toLowerCase(),r.length===0?!1:t.repeating?r[0]===t.keys[0]:r.indexOf(t.keys.join(""))===0}function Lb(e,t,r,n,i,o){let a=!1,s=i(e,t,t?r:!1);for(;s;){if(s===e.firstChild){if(a)return!1;a=!0}const l=n?!1:s.disabled||s.getAttribute("aria-disabled")==="true";if(!s.hasAttribute("tabindex")||!Dee(s,o)||l)s=i(e,s,r);else return s.focus(),!0}return!1}const Cwe=P.forwardRef(function(t,r){const{actions:n,autoFocus:i=!1,autoFocusItem:o=!1,children:a,className:s,disabledItemsFocusable:l=!1,disableListWrap:u=!1,onKeyDown:d,variant:c="selectedMenu"}=t,h=Ie(t,_we),f=P.useRef(null),m=P.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});li(()=>{i&&f.current.focus()},[i]),P.useImperativeHandle(n,()=>({adjustStyleForScrollbar:(y,x)=>{const S=!f.current.style.width;if(y.clientHeight<f.current.clientHeight&&S){const w=`${xJ(si(y))}px`;f.current.style[x.direction==="rtl"?"paddingLeft":"paddingRight"]=w,f.current.style.width=`calc(100% + ${w})`}return f.current}}),[]);const p=y=>{const x=f.current,S=y.key,w=si(x).activeElement;if(S==="ArrowDown")y.preventDefault(),Lb(x,w,u,l,mI);else if(S==="ArrowUp")y.preventDefault(),Lb(x,w,u,l,TV);else if(S==="Home")y.preventDefault(),Lb(x,null,u,l,mI);else if(S==="End")y.preventDefault(),Lb(x,null,u,l,TV);else if(S.length===1){const _=m.current,C=S.toLowerCase(),E=performance.now();_.keys.length>0&&(E-_.lastTime>500?(_.keys=[],_.repeating=!0,_.previousKeyMatched=!0):_.repeating&&C!==_.keys[0]&&(_.repeating=!1)),_.lastTime=E,_.keys.push(C);const A=w&&!_.repeating&&Dee(w,_);_.previousKeyMatched&&(A||Lb(x,w,!1,l,mI,_))?y.preventDefault():_.previousKeyMatched=!1}d&&d(y)},g=nn(f,r);let v=-1;P.Children.forEach(a,(y,x)=>{if(!P.isValidElement(y)){v===x&&(v+=1,v>=a.length&&(v=-1));return}y.props.disabled||(c==="selectedMenu"&&y.props.selected||v===-1)&&(v=x),v===x&&(y.props.disabled||y.props.muiSkipListHighlight||y.type.muiSkipListHighlight)&&(v+=1,v>=a.length&&(v=-1))});const b=P.Children.map(a,(y,x)=>{if(x===v){const S={};return o&&(S.autoFocus=!0),y.props.tabIndex===void 0&&c==="selectedMenu"&&(S.tabIndex=0),P.cloneElement(y,S)}return y});return B.jsx(cwe,L({role:"menu",ref:g,className:s,onKeyDown:p,tabIndex:i?0:-1},h,{children:b}))}),NF=Cwe;function Awe(e){return ur("MuiPopover",e)}cr("MuiPopover",["root","paper"]);const Ewe=["onEntering"],Mwe=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],Pwe=["slotProps"];function OV(e,t){let r=0;return typeof t=="number"?r=t:t==="center"?r=e.height/2:t==="bottom"&&(r=e.height),r}function IV(e,t){let r=0;return typeof t=="number"?r=t:t==="center"?r=e.width/2:t==="right"&&(r=e.width),r}function DV(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function gI(e){return typeof e=="function"?e():e}const Twe=e=>{const{classes:t}=e;return lt({root:["root"],paper:["paper"]},Awe,t)},Owe=He(n1e,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Ree=He(SS,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Iwe=P.forwardRef(function(t,r){var n,i,o;const a=pr({props:t,name:"MuiPopover"}),{action:s,anchorEl:l,anchorOrigin:u={vertical:"top",horizontal:"left"},anchorPosition:d,anchorReference:c="anchorEl",children:h,className:f,container:m,elevation:p=8,marginThreshold:g=16,open:v,PaperProps:b={},slots:y,slotProps:x,transformOrigin:S={vertical:"top",horizontal:"left"},TransitionComponent:w=NE,transitionDuration:_="auto",TransitionProps:{onEntering:C}={},disableScrollLock:E=!1}=a,A=Ie(a.TransitionProps,Ewe),M=Ie(a,Mwe),I=(n=x==null?void 0:x.paper)!=null?n:b,O=P.useRef(),T=nn(O,I.ref),D=L({},a,{anchorOrigin:u,anchorReference:c,elevation:p,marginThreshold:g,externalPaperSlotProps:I,transformOrigin:S,TransitionComponent:w,transitionDuration:_,TransitionProps:A}),N=Twe(D),k=P.useCallback(()=>{if(c==="anchorPosition")return d;const ie=gI(l),ae=(ie&&ie.nodeType===1?ie:si(O.current).body).getBoundingClientRect();return{top:ae.top+OV(ae,u.vertical),left:ae.left+IV(ae,u.horizontal)}},[l,u.horizontal,u.vertical,d,c]),R=P.useCallback(ie=>({vertical:OV(ie,S.vertical),horizontal:IV(ie,S.horizontal)}),[S.horizontal,S.vertical]),z=P.useCallback(ie=>{const he={width:ie.offsetWidth,height:ie.offsetHeight},ae=R(he);if(c==="none")return{top:null,left:null,transformOrigin:DV(ae)};const be=k();let ye=be.top-ae.vertical,Se=be.left-ae.horizontal;const me=ye+he.height,Pe=Se+he.width,Ae=qc(gI(l)),K=Ae.innerHeight-g,G=Ae.innerWidth-g;if(g!==null&&ye<g){const de=ye-g;ye-=de,ae.vertical+=de}else if(g!==null&&me>K){const de=me-K;ye-=de,ae.vertical+=de}if(g!==null&&Se<g){const de=Se-g;Se-=de,ae.horizontal+=de}else if(Pe>G){const de=Pe-G;Se-=de,ae.horizontal+=de}return{top:`${Math.round(ye)}px`,left:`${Math.round(Se)}px`,transformOrigin:DV(ae)}},[l,c,k,R,g]),[j,$]=P.useState(v),U=P.useCallback(()=>{const ie=O.current;if(!ie)return;const he=z(ie);he.top!==null&&(ie.style.top=he.top),he.left!==null&&(ie.style.left=he.left),ie.style.transformOrigin=he.transformOrigin,$(!0)},[z]);P.useEffect(()=>(E&&window.addEventListener("scroll",U),()=>window.removeEventListener("scroll",U)),[l,E,U]);const H=(ie,he)=>{C&&C(ie,he),U()},V=()=>{$(!1)};P.useEffect(()=>{v&&U()}),P.useImperativeHandle(s,()=>v?{updatePosition:()=>{U()}}:null,[v,U]),P.useEffect(()=>{if(!v)return;const ie=yS(()=>{U()}),he=qc(l);return he.addEventListener("resize",ie),()=>{ie.clear(),he.removeEventListener("resize",ie)}},[l,v,U]);let Q=_;_==="auto"&&!w.muiSupportAuto&&(Q=void 0);const X=m||(l?si(gI(l)).body:void 0),ne=(i=y==null?void 0:y.root)!=null?i:Owe,J=(o=y==null?void 0:y.paper)!=null?o:Ree,W=oh({elementType:J,externalSlotProps:L({},I,{style:j?I.style:L({},I.style,{opacity:0})}),additionalProps:{elevation:p,ref:T},ownerState:D,className:ht(N.paper,I==null?void 0:I.className)}),te=oh({elementType:ne,externalSlotProps:(x==null?void 0:x.root)||{},externalForwardedProps:M,additionalProps:{ref:r,slotProps:{backdrop:{invisible:!0}},container:X,open:v},ownerState:D,className:ht(N.root,f)}),{slotProps:Z}=te,q=Ie(te,Pwe);return B.jsx(ne,L({},q,!nw(ne)&&{slotProps:Z,disableScrollLock:E},{children:B.jsx(w,L({appear:!0,in:v,onEntering:H,onExited:V,timeout:Q},A,{children:B.jsx(J,L({},W,{children:h}))}))}))}),Dwe=Iwe;function Rwe(e){return ur("MuiMenu",e)}cr("MuiMenu",["root","paper","list"]);const kwe=["onEntering"],Lwe=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],Nwe={vertical:"top",horizontal:"right"},zwe={vertical:"top",horizontal:"left"},Bwe=e=>{const{classes:t}=e;return lt({root:["root"],paper:["paper"],list:["list"]},Rwe,t)},Fwe=He(Dwe,{shouldForwardProp:e=>ju(e)||e==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),jwe=He(Ree,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Uwe=He(NF,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),$we=P.forwardRef(function(t,r){var n,i;const o=pr({props:t,name:"MuiMenu"}),{autoFocus:a=!0,children:s,className:l,disableAutoFocusItem:u=!1,MenuListProps:d={},onClose:c,open:h,PaperProps:f={},PopoverClasses:m,transitionDuration:p="auto",TransitionProps:{onEntering:g}={},variant:v="selectedMenu",slots:b={},slotProps:y={}}=o,x=Ie(o.TransitionProps,kwe),S=Ie(o,Lwe),w=Qa(),_=w.direction==="rtl",C=L({},o,{autoFocus:a,disableAutoFocusItem:u,MenuListProps:d,onEntering:g,PaperProps:f,transitionDuration:p,TransitionProps:x,variant:v}),E=Bwe(C),A=a&&!u&&h,M=P.useRef(null),I=(z,j)=>{M.current&&M.current.adjustStyleForScrollbar(z,w),g&&g(z,j)},O=z=>{z.key==="Tab"&&(z.preventDefault(),c&&c(z,"tabKeyDown"))};let T=-1;P.Children.map(s,(z,j)=>{P.isValidElement(z)&&(z.props.disabled||(v==="selectedMenu"&&z.props.selected||T===-1)&&(T=j))});const D=(n=b.paper)!=null?n:jwe,N=(i=y.paper)!=null?i:f,k=oh({elementType:b.root,externalSlotProps:y.root,ownerState:C,className:[E.root,l]}),R=oh({elementType:D,externalSlotProps:N,ownerState:C,className:E.paper});return B.jsx(Fwe,L({onClose:c,anchorOrigin:{vertical:"bottom",horizontal:_?"right":"left"},transformOrigin:_?Nwe:zwe,slots:{paper:D,root:b.root},slotProps:{root:k,paper:R},open:h,ref:r,transitionDuration:p,TransitionProps:L({onEntering:I},x),ownerState:C},S,{classes:m,children:B.jsx(Uwe,L({onKeyDown:O,actions:M,autoFocus:a&&(T===-1||u),autoFocusItem:A,variant:v},d,{className:ht(E.list,d.className),children:s}))}))}),Vwe=$we;function Hwe(e){return ur("MuiMenuItem",e)}const Gwe=cr("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),Nb=Gwe,Wwe=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],qwe=(e,t)=>{const{ownerState:r}=e;return[t.root,r.dense&&t.dense,r.divider&&t.divider,!r.disableGutters&&t.gutters]},Kwe=e=>{const{disabled:t,dense:r,divider:n,disableGutters:i,selected:o,classes:a}=e,l=lt({root:["root",r&&"dense",t&&"disabled",!i&&"gutters",n&&"divider",o&&"selected"]},Hwe,a);return L({},a,l)},Xwe=He(zy,{shouldForwardProp:e=>ju(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:qwe})(({theme:e,ownerState:t})=>L({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Nb.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:lr(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${Nb.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:lr(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${Nb.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:lr(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:lr(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${Nb.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Nb.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${AV.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${AV.inset}`]:{marginLeft:52},[`& .${zE.root}`]:{marginTop:0,marginBottom:0},[`& .${zE.inset}`]:{paddingLeft:36},[`& .${PV.root}`]:{minWidth:36}},!t.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},t.dense&&L({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,{[`& .${PV.root} svg`]:{fontSize:"1.25rem"}}))),Ywe=P.forwardRef(function(t,r){const n=pr({props:t,name:"MuiMenuItem"}),{autoFocus:i=!1,component:o="li",dense:a=!1,divider:s=!1,disableGutters:l=!1,focusVisibleClassName:u,role:d="menuitem",tabIndex:c,className:h}=n,f=Ie(n,Wwe),m=P.useContext(aw),p=P.useMemo(()=>({dense:a||m.dense||!1,disableGutters:l}),[m.dense,a,l]),g=P.useRef(null);li(()=>{i&&g.current&&g.current.focus()},[i]);const v=L({},n,{dense:p.dense,divider:s,disableGutters:l}),b=Kwe(n),y=nn(g,r);let x;return n.disabled||(x=c!==void 0?c:-1),B.jsx(aw.Provider,{value:p,children:B.jsx(Xwe,L({ref:y,role:d,tabIndex:x,component:o,focusVisibleClassName:ht(b.focusVisible,u),className:ht(b.root,h)},f,{ownerState:v,classes:b}))})}),Fc=Ywe;function Qwe(e){return ur("MuiNativeSelect",e)}const Zwe=cr("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),zF=Zwe,Jwe=["className","disabled","error","IconComponent","inputRef","variant"],eSe=e=>{const{classes:t,variant:r,disabled:n,multiple:i,open:o,error:a}=e,s={select:["select",r,n&&"disabled",i&&"multiple",a&&"error"],icon:["icon",`icon${$e(r)}`,o&&"iconOpen",n&&"disabled"]};return lt(s,Qwe,t)},kee=({ownerState:e,theme:t})=>L({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":L({},t.vars?{backgroundColor:`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:t.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${zF.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},e.variant==="filled"&&{"&&&":{paddingRight:32}},e.variant==="outlined"&&{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}),tSe=He("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:ju,overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.select,t[r.variant],r.error&&t.error,{[`&.${zF.multiple}`]:t.multiple}]}})(kee),Lee=({ownerState:e,theme:t})=>L({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${zF.disabled}`]:{color:(t.vars||t).palette.action.disabled}},e.open&&{transform:"rotate(180deg)"},e.variant==="filled"&&{right:7},e.variant==="outlined"&&{right:7}),rSe=He("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.icon,r.variant&&t[`icon${$e(r.variant)}`],r.open&&t.iconOpen]}})(Lee),nSe=P.forwardRef(function(t,r){const{className:n,disabled:i,error:o,IconComponent:a,inputRef:s,variant:l="standard"}=t,u=Ie(t,Jwe),d=L({},t,{disabled:i,variant:l,error:o}),c=eSe(d);return B.jsxs(P.Fragment,{children:[B.jsx(tSe,L({ownerState:d,className:ht(c.select,n),disabled:i,ref:s||r},u)),t.multiple?null:B.jsx(rSe,{as:a,ownerState:d,className:c.icon})]})}),iSe=nSe;var RV;const oSe=["children","classes","className","label","notched"],aSe=He("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),sSe=He("legend")(({ownerState:e,theme:t})=>L({float:"unset",width:"auto",overflow:"hidden"},!e.withLabel&&{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})},e.withLabel&&L({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},e.notched&&{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})})));function lSe(e){const{className:t,label:r,notched:n}=e,i=Ie(e,oSe),o=r!=null&&r!=="",a=L({},e,{notched:n,withLabel:o});return B.jsx(aSe,L({"aria-hidden":!0,className:t,ownerState:a},i,{children:B.jsx(sSe,{ownerState:a,children:o?B.jsx("span",{children:r}):RV||(RV=B.jsx("span",{className:"notranslate",children:""}))})}))}const uSe=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],cSe=e=>{const{classes:t}=e,n=lt({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Sbe,t);return L({},t,n)},dSe=He(t2,{shouldForwardProp:e=>ju(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:JT})(({theme:e,ownerState:t})=>{const r=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return L({position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${uc.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${uc.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:r}},[`&.${uc.focused} .${uc.notchedOutline}`]:{borderColor:(e.vars||e).palette[t.color].main,borderWidth:2},[`&.${uc.error} .${uc.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${uc.disabled} .${uc.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}},t.startAdornment&&{paddingLeft:14},t.endAdornment&&{paddingRight:14},t.multiline&&L({padding:"16.5px 14px"},t.size==="small"&&{padding:"8.5px 14px"}))}),hSe=He(lSe,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}}),fSe=He(r2,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:e2})(({theme:e,ownerState:t})=>L({padding:"16.5px 14px"},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{padding:"8.5px 14px"},t.multiline&&{padding:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0})),Nee=P.forwardRef(function(t,r){var n,i,o,a,s;const l=pr({props:t,name:"MuiOutlinedInput"}),{components:u={},fullWidth:d=!1,inputComponent:c="input",label:h,multiline:f=!1,notched:m,slots:p={},type:g="text"}=l,v=Ie(l,uSe),b=cSe(l),y=cp(),x=og({props:l,muiFormControl:y,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),S=L({},l,{color:x.color||"primary",disabled:x.disabled,error:x.error,focused:x.focused,formControl:y,fullWidth:d,hiddenLabel:x.hiddenLabel,multiline:f,size:x.size,type:g}),w=(n=(i=p.root)!=null?i:u.Root)!=null?n:dSe,_=(o=(a=p.input)!=null?a:u.Input)!=null?o:fSe;return B.jsx(B0,L({slots:{root:w,input:_},renderSuffix:C=>B.jsx(hSe,{ownerState:S,className:b.notchedOutline,label:h!=null&&h!==""&&x.required?s||(s=B.jsxs(P.Fragment,{children:[h,"","*"]})):h,notched:typeof m<"u"?m:!!(C.startAdornment||C.filled||C.focused)}),fullWidth:d,inputComponent:c,multiline:f,ref:r,type:g},v,{classes:L({},b,{notchedOutline:null})}))});Nee.muiName="Input";const zee=Nee,kV=_r(B.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),LV=_r(B.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage");function pSe(e){return ur("MuiSelect",e)}const mSe=cr("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),zb=mSe;var NV;const gSe=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],vSe=He("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`&.${zb.select}`]:t.select},{[`&.${zb.select}`]:t[r.variant]},{[`&.${zb.error}`]:t.error},{[`&.${zb.multiple}`]:t.multiple}]}})(kee,{[`&.${zb.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),ySe=He("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.icon,r.variant&&t[`icon${$e(r.variant)}`],r.open&&t.iconOpen]}})(Lee),bSe=He("input",{shouldForwardProp:e=>rve(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function zV(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function xSe(e){return e==null||typeof e=="string"&&!e.trim()}const wSe=e=>{const{classes:t,variant:r,disabled:n,multiple:i,open:o,error:a}=e,s={select:["select",r,n&&"disabled",i&&"multiple",a&&"error"],icon:["icon",`icon${$e(r)}`,o&&"iconOpen",n&&"disabled"],nativeInput:["nativeInput"]};return lt(s,pSe,t)},SSe=P.forwardRef(function(t,r){const{"aria-describedby":n,"aria-label":i,autoFocus:o,autoWidth:a,children:s,className:l,defaultOpen:u,defaultValue:d,disabled:c,displayEmpty:h,error:f=!1,IconComponent:m,inputRef:p,labelId:g,MenuProps:v={},multiple:b,name:y,onBlur:x,onChange:S,onClose:w,onFocus:_,onOpen:C,open:E,readOnly:A,renderValue:M,SelectDisplayProps:I={},tabIndex:O,value:T,variant:D="standard"}=t,N=Ie(t,gSe),[k,R]=Rf({controlled:T,default:d,name:"Select"}),[z,j]=Rf({controlled:E,default:u,name:"Select"}),$=P.useRef(null),U=P.useRef(null),[H,V]=P.useState(null),{current:Q}=P.useRef(E!=null),[X,ne]=P.useState(),J=nn(r,p),W=P.useCallback(pe=>{U.current=pe,pe&&V(pe)},[]),te=H==null?void 0:H.parentNode;P.useImperativeHandle(J,()=>({focus:()=>{U.current.focus()},node:$.current,value:k}),[k]),P.useEffect(()=>{u&&z&&H&&!Q&&(ne(a?null:te.clientWidth),U.current.focus())},[H,a]),P.useEffect(()=>{o&&U.current.focus()},[o]),P.useEffect(()=>{if(!g)return;const pe=si(U.current).getElementById(g);if(pe){const Ge=()=>{getSelection().isCollapsed&&U.current.focus()};return pe.addEventListener("click",Ge),()=>{pe.removeEventListener("click",Ge)}}},[g]);const Z=(pe,Ge)=>{pe?C&&C(Ge):w&&w(Ge),Q||(ne(a?null:te.clientWidth),j(pe))},q=pe=>{pe.button===0&&(pe.preventDefault(),U.current.focus(),Z(!0,pe))},ie=pe=>{Z(!1,pe)},he=P.Children.toArray(s),ae=pe=>{const Ge=he.find(Ke=>Ke.props.value===pe.target.value);Ge!==void 0&&(R(Ge.props.value),S&&S(pe,Ge))},be=pe=>Ge=>{let Ke;if(Ge.currentTarget.hasAttribute("tabindex")){if(b){Ke=Array.isArray(k)?k.slice():[];const Xe=k.indexOf(pe.props.value);Xe===-1?Ke.push(pe.props.value):Ke.splice(Xe,1)}else Ke=pe.props.value;if(pe.props.onClick&&pe.props.onClick(Ge),k!==Ke&&(R(Ke),S)){const Xe=Ge.nativeEvent||Ge,et=new Xe.constructor(Xe.type,Xe);Object.defineProperty(et,"target",{writable:!0,value:{value:Ke,name:y}}),S(et,pe)}b||Z(!1,Ge)}},ye=pe=>{A||[" ","ArrowUp","ArrowDown","Enter"].indexOf(pe.key)!==-1&&(pe.preventDefault(),Z(!0,pe))},Se=H!==null&&z,me=pe=>{!Se&&x&&(Object.defineProperty(pe,"target",{writable:!0,value:{value:k,name:y}}),x(pe))};delete N["aria-invalid"];let Pe,Ae;const K=[];let G=!1;(LE({value:k})||h)&&(M?Pe=M(k):G=!0);const de=he.map(pe=>{if(!P.isValidElement(pe))return null;let Ge;if(b){if(!Array.isArray(k))throw new Error(Xf(2));Ge=k.some(Ke=>zV(Ke,pe.props.value)),Ge&&G&&K.push(pe.props.children)}else Ge=zV(k,pe.props.value),Ge&&G&&(Ae=pe.props.children);return P.cloneElement(pe,{"aria-selected":Ge?"true":"false",onClick:be(pe),onKeyUp:Ke=>{Ke.key===" "&&Ke.preventDefault(),pe.props.onKeyUp&&pe.props.onKeyUp(Ke)},role:"option",selected:Ge,value:void 0,"data-value":pe.props.value})});G&&(b?K.length===0?Pe=null:Pe=K.reduce((pe,Ge,Ke)=>(pe.push(Ge),Ke<K.length-1&&pe.push(", "),pe),[]):Pe=Ae);let Ee=X;!a&&Q&&H&&(Ee=te.clientWidth);let Me;typeof O<"u"?Me=O:Me=c?null:0;const Le=I.id||(y?`mui-component-select-${y}`:void 0),De=L({},t,{variant:D,value:k,open:Se,error:f}),Ce=wSe(De);return B.jsxs(P.Fragment,{children:[B.jsx(vSe,L({ref:W,tabIndex:Me,role:"button","aria-disabled":c?"true":void 0,"aria-expanded":Se?"true":"false","aria-haspopup":"listbox","aria-label":i,"aria-labelledby":[g,Le].filter(Boolean).join(" ")||void 0,"aria-describedby":n,onKeyDown:ye,onMouseDown:c||A?null:q,onBlur:me,onFocus:_},I,{ownerState:De,className:ht(I.className,Ce.select,l),id:Le,children:xSe(Pe)?NV||(NV=B.jsx("span",{className:"notranslate",children:""})):Pe})),B.jsx(bSe,L({"aria-invalid":f,value:Array.isArray(k)?k.join(","):k,name:y,ref:$,"aria-hidden":!0,onChange:ae,tabIndex:-1,disabled:c,className:Ce.nativeInput,autoFocus:o,ownerState:De},N)),B.jsx(ySe,{as:m,className:Ce.icon,ownerState:De}),B.jsx(Vwe,L({id:`menu-${y||""}`,anchorEl:te,open:Se,onClose:ie,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},v,{MenuListProps:L({"aria-labelledby":g,role:"listbox",disableListWrap:!0},v.MenuListProps),PaperProps:L({},v.PaperProps,{style:L({minWidth:Ee},v.PaperProps!=null?v.PaperProps.style:null)}),children:de}))]})}),_Se=SSe,CSe=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],ASe=["root"],ESe=e=>{const{classes:t}=e;return t},BF={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>ju(e)&&e!=="variant",slot:"Root"},MSe=He(Oee,BF)(""),PSe=He(zee,BF)(""),TSe=He(Cee,BF)(""),Bee=P.forwardRef(function(t,r){const n=pr({name:"MuiSelect",props:t}),{autoWidth:i=!1,children:o,classes:a={},className:s,defaultOpen:l=!1,displayEmpty:u=!1,IconComponent:d=vee,id:c,input:h,inputProps:f,label:m,labelId:p,MenuProps:g,multiple:v=!1,native:b=!1,onClose:y,onOpen:x,open:S,renderValue:w,SelectDisplayProps:_,variant:C="outlined"}=n,E=Ie(n,CSe),A=b?iSe:_Se,M=cp(),I=og({props:n,muiFormControl:M,states:["variant","error"]}),O=I.variant||C,T=L({},n,{variant:O,classes:a}),D=ESe(T),N=Ie(D,ASe),k=h||{standard:B.jsx(MSe,{ownerState:T}),outlined:B.jsx(PSe,{label:m,ownerState:T}),filled:B.jsx(TSe,{ownerState:T})}[O],R=nn(r,k.ref);return B.jsx(P.Fragment,{children:P.cloneElement(k,L({inputComponent:A,inputProps:L({children:o,error:I.error,IconComponent:d,variant:O,type:void 0,multiple:v},b?{id:c}:{autoWidth:i,defaultOpen:l,displayEmpty:u,labelId:p,MenuProps:g,onClose:y,onOpen:x,open:S,renderValue:w,SelectDisplayProps:L({id:c},_)},f,{classes:f?ws(N,f.classes):N},h?h.props.inputProps:{})},v&&b&&O==="outlined"?{notched:!0}:{},{ref:R,className:ht(k.props.className,s,D.root)},!h&&{variant:O},E))})});Bee.muiName="Select";const FF=Bee;function OSe(e){return ur("MuiSkeleton",e)}cr("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);const ISe=["animation","className","component","height","style","variant","width"];let BE=e=>e,BV,FV,jV,UV;const DSe=e=>{const{classes:t,variant:r,animation:n,hasChildren:i,width:o,height:a}=e;return lt({root:["root",r,n,i&&"withChildren",i&&!o&&"fitContent",i&&!a&&"heightAuto"]},OSe,t)},RSe=ng(BV||(BV=BE`
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
`)),kSe=ng(FV||(FV=BE`
  0% {
    transform: translateX(-100%);
  }

  50% {
    /* +0.5s of delay between each loop */
    transform: translateX(100%);
  }

  100% {
    transform: translateX(100%);
  }
`)),LSe=He("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],r.animation!==!1&&t[r.animation],r.hasChildren&&t.withChildren,r.hasChildren&&!r.width&&t.fitContent,r.hasChildren&&!r.height&&t.heightAuto]}})(({theme:e,ownerState:t})=>{const r=Jge(e.shape.borderRadius)||"px",n=eve(e.shape.borderRadius);return L({display:"block",backgroundColor:e.vars?e.vars.palette.Skeleton.bg:lr(e.palette.text.primary,e.palette.mode==="light"?.11:.13),height:"1.2em"},t.variant==="text"&&{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${n}${r}/${Math.round(n/.6*10)/10}${r}`,"&:empty:before":{content:'"\\00a0"'}},t.variant==="circular"&&{borderRadius:"50%"},t.variant==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius},t.hasChildren&&{"& > *":{visibility:"hidden"}},t.hasChildren&&!t.width&&{maxWidth:"fit-content"},t.hasChildren&&!t.height&&{height:"auto"})},({ownerState:e})=>e.animation==="pulse"&&rw(jV||(jV=BE`
      animation: ${0} 2s ease-in-out 0.5s infinite;
    `),RSe),({ownerState:e,theme:t})=>e.animation==="wave"&&rw(UV||(UV=BE`
      position: relative;
      overflow: hidden;

      /* Fix bug in Safari https://bugs.webkit.org/show_bug.cgi?id=68196 */
      -webkit-mask-image: -webkit-radial-gradient(white, black);

      &::after {
        animation: ${0} 2s linear 0.5s infinite;
        background: linear-gradient(
          90deg,
          transparent,
          ${0},
          transparent
        );
        content: '';
        position: absolute;
        transform: translateX(-100%); /* Avoid flash during server-side hydration */
        bottom: 0;
        left: 0;
        right: 0;
        top: 0;
      }
    `),kSe,(t.vars||t).palette.action.hover)),NSe=P.forwardRef(function(t,r){const n=pr({props:t,name:"MuiSkeleton"}),{animation:i="pulse",className:o,component:a="span",height:s,style:l,variant:u="text",width:d}=n,c=Ie(n,ISe),h=L({},n,{animation:i,component:a,variant:u,hasChildren:!!c.children}),f=DSe(h);return B.jsx(LSe,L({as:a,ref:r,className:ht(f.root,o),ownerState:h},c,{style:L({width:d,height:s},l)}))}),zSe=NSe;function BSe(e){return ur("MuiTooltip",e)}const FSe=cr("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),df=FSe,jSe=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];function USe(e){return Math.round(e*1e5)/1e5}const $Se=e=>{const{classes:t,disableInteractive:r,arrow:n,touch:i,placement:o}=e,a={popper:["popper",!r&&"popperInteractive",n&&"popperArrow"],tooltip:["tooltip",n&&"tooltipArrow",i&&"touch",`tooltipPlacement${$e(o.split("-")[0])}`],arrow:["arrow"]};return lt(a,BSe,t)},VSe=He(ig,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.popper,!r.disableInteractive&&t.popperInteractive,r.arrow&&t.popperArrow,!r.open&&t.popperClose]}})(({theme:e,ownerState:t,open:r})=>L({zIndex:(e.vars||e).zIndex.tooltip,pointerEvents:"none"},!t.disableInteractive&&{pointerEvents:"auto"},!r&&{pointerEvents:"none"},t.arrow&&{[`&[data-popper-placement*="bottom"] .${df.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${df.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${df.arrow}`]:L({},t.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${df.arrow}`]:L({},t.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})),HSe=He("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.tooltip,r.touch&&t.touch,r.arrow&&t.tooltipArrow,t[`tooltipPlacement${$e(r.placement.split("-")[0])}`]]}})(({theme:e,ownerState:t})=>L({backgroundColor:e.vars?e.vars.palette.Tooltip.bg:lr(e.palette.grey[700],.92),borderRadius:(e.vars||e).shape.borderRadius,color:(e.vars||e).palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium},t.arrow&&{position:"relative",margin:0},t.touch&&{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:`${USe(16/14)}em`,fontWeight:e.typography.fontWeightRegular},{[`.${df.popper}[data-popper-placement*="left"] &`]:L({transformOrigin:"right center"},t.isRtl?L({marginLeft:"14px"},t.touch&&{marginLeft:"24px"}):L({marginRight:"14px"},t.touch&&{marginRight:"24px"})),[`.${df.popper}[data-popper-placement*="right"] &`]:L({transformOrigin:"left center"},t.isRtl?L({marginRight:"14px"},t.touch&&{marginRight:"24px"}):L({marginLeft:"14px"},t.touch&&{marginLeft:"24px"})),[`.${df.popper}[data-popper-placement*="top"] &`]:L({transformOrigin:"center bottom",marginBottom:"14px"},t.touch&&{marginBottom:"24px"}),[`.${df.popper}[data-popper-placement*="bottom"] &`]:L({transformOrigin:"center top",marginTop:"14px"},t.touch&&{marginTop:"24px"})})),GSe=He("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(e,t)=>t.arrow})(({theme:e})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:e.vars?e.vars.palette.Tooltip.bg:lr(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}));let B_=!1,vI=null,Bb={x:0,y:0};function F_(e,t){return r=>{t&&t(r),e(r)}}const WSe=P.forwardRef(function(t,r){var n,i,o,a,s,l,u,d,c,h,f,m,p,g,v,b,y,x,S;const w=pr({props:t,name:"MuiTooltip"}),{arrow:_=!1,children:C,components:E={},componentsProps:A={},describeChild:M=!1,disableFocusListener:I=!1,disableHoverListener:O=!1,disableInteractive:T=!1,disableTouchListener:D=!1,enterDelay:N=100,enterNextDelay:k=0,enterTouchDelay:R=700,followCursor:z=!1,id:j,leaveDelay:$=0,leaveTouchDelay:U=1500,onClose:H,onOpen:V,open:Q,placement:X="bottom",PopperComponent:ne,PopperProps:J={},slotProps:W={},slots:te={},title:Z,TransitionComponent:q=NE,TransitionProps:ie}=w,he=Ie(w,jSe),ae=P.isValidElement(C)?C:B.jsx("span",{children:C}),be=Qa(),ye=be.direction==="rtl",[Se,me]=P.useState(),[Pe,Ae]=P.useState(null),K=P.useRef(!1),G=T||z,de=P.useRef(),Ee=P.useRef(),Me=P.useRef(),Le=P.useRef(),[De,Ce]=Rf({controlled:Q,default:!1,name:"Tooltip",state:"open"});let pe=De;const Ge=Oi(j),Ke=P.useRef(),Xe=P.useCallback(()=>{Ke.current!==void 0&&(document.body.style.WebkitUserSelect=Ke.current,Ke.current=void 0),clearTimeout(Le.current)},[]);P.useEffect(()=>()=>{clearTimeout(de.current),clearTimeout(Ee.current),clearTimeout(Me.current),Xe()},[Xe]);const et=je=>{clearTimeout(vI),B_=!0,Ce(!0),V&&!pe&&V(je)},st=Wi(je=>{clearTimeout(vI),vI=setTimeout(()=>{B_=!1},800+$),Ce(!1),H&&pe&&H(je),clearTimeout(de.current),de.current=setTimeout(()=>{K.current=!1},be.transitions.duration.shortest)}),Ut=je=>{K.current&&je.type!=="touchstart"||(Se&&Se.removeAttribute("title"),clearTimeout(Ee.current),clearTimeout(Me.current),N||B_&&k?Ee.current=setTimeout(()=>{et(je)},B_?k:N):et(je))},Cr=je=>{clearTimeout(Ee.current),clearTimeout(Me.current),Me.current=setTimeout(()=>{st(je)},$)},{isFocusVisibleRef:Mr,onBlur:fe,onFocus:Oe,ref:ze}=oF(),[,Je]=P.useState(!1),Tt=je=>{fe(je),Mr.current===!1&&(Je(!1),Cr(je))},Zt=je=>{Se||me(je.currentTarget),Oe(je),Mr.current===!0&&(Je(!0),Ut(je))},$r=je=>{K.current=!0;const Ne=ae.props;Ne.onTouchStart&&Ne.onTouchStart(je)},On=Ut,Ko=Cr,Br=je=>{$r(je),clearTimeout(Me.current),clearTimeout(de.current),Xe(),Ke.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Le.current=setTimeout(()=>{document.body.style.WebkitUserSelect=Ke.current,Ut(je)},R)},Zi=je=>{ae.props.onTouchEnd&&ae.props.onTouchEnd(je),Xe(),clearTimeout(Me.current),Me.current=setTimeout(()=>{st(je)},U)};P.useEffect(()=>{if(!pe)return;function je(Ne){(Ne.key==="Escape"||Ne.key==="Esc")&&st(Ne)}return document.addEventListener("keydown",je),()=>{document.removeEventListener("keydown",je)}},[st,pe]);const Vr=nn(ae.ref,ze,me,r);!Z&&Z!==0&&(pe=!1);const Cn=P.useRef(),No=je=>{const Ne=ae.props;Ne.onMouseMove&&Ne.onMouseMove(je),Bb={x:je.clientX,y:je.clientY},Cn.current&&Cn.current.update()},Ji={},ll=typeof Z=="string";M?(Ji.title=!pe&&ll&&!O?Z:null,Ji["aria-describedby"]=pe?Ge:null):(Ji["aria-label"]=ll?Z:null,Ji["aria-labelledby"]=pe&&!ll?Ge:null);const ee=L({},Ji,he,ae.props,{className:ht(he.className,ae.props.className),onTouchStart:$r,ref:Vr},z?{onMouseMove:No}:{}),_e={};D||(ee.onTouchStart=Br,ee.onTouchEnd=Zi),O||(ee.onMouseOver=F_(On,ee.onMouseOver),ee.onMouseLeave=F_(Ko,ee.onMouseLeave),G||(_e.onMouseOver=On,_e.onMouseLeave=Ko)),I||(ee.onFocus=F_(Zt,ee.onFocus),ee.onBlur=F_(Tt,ee.onBlur),G||(_e.onFocus=Zt,_e.onBlur=Tt));const ke=P.useMemo(()=>{var je;let Ne=[{name:"arrow",enabled:!!Pe,options:{element:Pe,padding:4}}];return(je=J.popperOptions)!=null&&je.modifiers&&(Ne=Ne.concat(J.popperOptions.modifiers)),L({},J.popperOptions,{modifiers:Ne})},[Pe,J]),Y=L({},w,{isRtl:ye,arrow:_,disableInteractive:G,placement:X,PopperComponentProp:ne,touch:K.current}),se=$Se(Y),re=(n=(i=te.popper)!=null?i:E.Popper)!=null?n:VSe,oe=(o=(a=(s=te.transition)!=null?s:E.Transition)!=null?a:q)!=null?o:NE,ce=(l=(u=te.tooltip)!=null?u:E.Tooltip)!=null?l:HSe,we=(d=(c=te.arrow)!=null?c:E.Arrow)!=null?d:GSe,Be=Dx(re,L({},J,(h=W.popper)!=null?h:A.popper,{className:ht(se.popper,J==null?void 0:J.className,(f=(m=W.popper)!=null?m:A.popper)==null?void 0:f.className)}),Y),Ye=Dx(oe,L({},ie,(p=W.transition)!=null?p:A.transition),Y),Fe=Dx(ce,L({},(g=W.tooltip)!=null?g:A.tooltip,{className:ht(se.tooltip,(v=(b=W.tooltip)!=null?b:A.tooltip)==null?void 0:v.className)}),Y),tt=Dx(we,L({},(y=W.arrow)!=null?y:A.arrow,{className:ht(se.arrow,(x=(S=W.arrow)!=null?S:A.arrow)==null?void 0:x.className)}),Y);return B.jsxs(P.Fragment,{children:[P.cloneElement(ae,ee),B.jsx(re,L({as:ne??ig,placement:X,anchorEl:z?{getBoundingClientRect:()=>({top:Bb.y,left:Bb.x,right:Bb.x,bottom:Bb.y,width:0,height:0})}:Se,popperRef:Cn,open:Se?pe:!1,id:Ge,transition:!0},_e,Be,{popperOptions:ke,children:({TransitionProps:je})=>B.jsx(oe,L({timeout:be.transitions.duration.shorter},je,Ye,{children:B.jsxs(ce,L({},Fe,{children:[Z,_?B.jsx(we,L({},tt,{ref:Ae})):null]}))}))}))]})}),qSe=WSe;function KSe(e){return ur("MuiSwitch",e)}const XSe=cr("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),Jo=XSe,YSe=["className","color","edge","size","sx"],QSe=e=>{const{classes:t,edge:r,size:n,color:i,checked:o,disabled:a}=e,s={root:["root",r&&`edge${$e(r)}`,`size${$e(n)}`],switchBase:["switchBase",`color${$e(i)}`,o&&"checked",a&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},l=lt(s,KSe,t);return L({},t,l)},ZSe=He("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.edge&&t[`edge${$e(r.edge)}`],t[`size${$e(r.size)}`]]}})(({ownerState:e})=>L({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},e.edge==="start"&&{marginLeft:-8},e.edge==="end"&&{marginRight:-8},e.size==="small"&&{width:40,height:24,padding:7,[`& .${Jo.thumb}`]:{width:16,height:16},[`& .${Jo.switchBase}`]:{padding:4,[`&.${Jo.checked}`]:{transform:"translateX(16px)"}}})),JSe=He(wee,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.switchBase,{[`& .${Jo.input}`]:t.input},r.color!=="default"&&t[`color${$e(r.color)}`]]}})(({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:e.vars?e.vars.palette.Switch.defaultColor:`${e.palette.mode==="light"?e.palette.common.white:e.palette.grey[300]}`,transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),[`&.${Jo.checked}`]:{transform:"translateX(20px)"},[`&.${Jo.disabled}`]:{color:e.vars?e.vars.palette.Switch.defaultDisabledColor:`${e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[600]}`},[`&.${Jo.checked} + .${Jo.track}`]:{opacity:.5},[`&.${Jo.disabled} + .${Jo.track}`]:{opacity:e.vars?e.vars.opacity.switchTrackDisabled:`${e.palette.mode==="light"?.12:.2}`},[`& .${Jo.input}`]:{left:"-100%",width:"300%"}}),({theme:e,ownerState:t})=>L({"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:lr(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${Jo.checked}`]:{color:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:lr(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Jo.disabled}`]:{color:e.vars?e.vars.palette.Switch[`${t.color}DisabledColor`]:`${e.palette.mode==="light"?XT(e.palette[t.color].main,.62):KT(e.palette[t.color].main,.55)}`}},[`&.${Jo.checked} + .${Jo.track}`]:{backgroundColor:(e.vars||e).palette[t.color].main}})),e_e=He("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})(({theme:e})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.vars?e.vars.palette.common.onBackground:`${e.palette.mode==="light"?e.palette.common.black:e.palette.common.white}`,opacity:e.vars?e.vars.opacity.switchTrack:`${e.palette.mode==="light"?.38:.3}`})),t_e=He("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})(({theme:e})=>({boxShadow:(e.vars||e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"})),r_e=P.forwardRef(function(t,r){const n=pr({props:t,name:"MuiSwitch"}),{className:i,color:o="primary",edge:a=!1,size:s="medium",sx:l}=n,u=Ie(n,YSe),d=L({},n,{color:o,edge:a,size:s}),c=QSe(d),h=B.jsx(t_e,{className:c.thumb,ownerState:d});return B.jsxs(ZSe,{className:ht(c.root,i),sx:l,ownerState:d,children:[B.jsx(JSe,L({type:"checkbox",icon:h,checkedIcon:h,ref:r,ownerState:d},u,{classes:L({},c,{root:c.switchBase})})),B.jsx(e_e,{className:c.track,ownerState:d})]})}),n_e=r_e,i_e=P.createContext(),o_e=i_e,a_e=P.createContext(),s_e=a_e;function l_e(e){return ur("MuiTableCell",e)}const u_e=cr("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),c_e=u_e,d_e=["align","className","component","padding","scope","size","sortDirection","variant"],h_e=e=>{const{classes:t,variant:r,align:n,padding:i,size:o,stickyHeader:a}=e,s={root:["root",r,a&&"stickyHeader",n!=="inherit"&&`align${$e(n)}`,i!=="normal"&&`padding${$e(i)}`,`size${$e(o)}`]};return lt(s,l_e,t)},f_e=He("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`size${$e(r.size)}`],r.padding!=="normal"&&t[`padding${$e(r.padding)}`],r.align!=="inherit"&&t[`align${$e(r.align)}`],r.stickyHeader&&t.stickyHeader]}})(({theme:e,ownerState:t})=>L({},e.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:e.vars?`1px solid ${e.vars.palette.TableCell.border}`:`1px solid
    ${e.palette.mode==="light"?XT(lr(e.palette.divider,1),.88):KT(lr(e.palette.divider,1),.68)}`,textAlign:"left",padding:16},t.variant==="head"&&{color:(e.vars||e).palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium},t.variant==="body"&&{color:(e.vars||e).palette.text.primary},t.variant==="footer"&&{color:(e.vars||e).palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)},t.size==="small"&&{padding:"6px 16px",[`&.${c_e.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},t.padding==="checkbox"&&{width:48,padding:"0 0 0 4px"},t.padding==="none"&&{padding:0},t.align==="left"&&{textAlign:"left"},t.align==="center"&&{textAlign:"center"},t.align==="right"&&{textAlign:"right",flexDirection:"row-reverse"},t.align==="justify"&&{textAlign:"justify"},t.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(e.vars||e).palette.background.default})),p_e=P.forwardRef(function(t,r){const n=pr({props:t,name:"MuiTableCell"}),{align:i="inherit",className:o,component:a,padding:s,scope:l,size:u,sortDirection:d,variant:c}=n,h=Ie(n,d_e),f=P.useContext(o_e),m=P.useContext(s_e),p=m&&m.variant==="head";let g;a?g=a:g=p?"th":"td";let v=l;g==="td"?v=void 0:!v&&p&&(v="col");const b=c||m&&m.variant,y=L({},n,{align:i,component:g,padding:s||(f&&f.padding?f.padding:"normal"),size:u||(f&&f.size?f.size:"medium"),sortDirection:d,stickyHeader:b==="head"&&f&&f.stickyHeader,variant:b}),x=h_e(y);let S=null;return d&&(S=d==="asc"?"ascending":"descending"),B.jsx(f_e,L({as:g,ref:r,className:ht(x.root,o),"aria-sort":S,scope:v,ownerState:y},h))}),C3=p_e;function m_e(e){return ur("MuiToolbar",e)}cr("MuiToolbar",["root","gutters","regular","dense"]);const g_e=["className","component","disableGutters","variant"],v_e=e=>{const{classes:t,disableGutters:r,variant:n}=e;return lt({root:["root",!r&&"gutters",n]},m_e,t)},y_e=He("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disableGutters&&t.gutters,t[r.variant]]}})(({theme:e,ownerState:t})=>L({position:"relative",display:"flex",alignItems:"center"},!t.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}},t.variant==="dense"&&{minHeight:48}),({theme:e,ownerState:t})=>t.variant==="regular"&&e.mixins.toolbar),b_e=P.forwardRef(function(t,r){const n=pr({props:t,name:"MuiToolbar"}),{className:i,component:o="div",disableGutters:a=!1,variant:s="regular"}=n,l=Ie(n,g_e),u=L({},n,{component:o,disableGutters:a,variant:s}),d=v_e(u);return B.jsx(y_e,L({as:o,className:ht(d.root,i),ref:r,ownerState:u},l))}),x_e=b_e,$V=_r(B.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),VV=_r(B.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");var HV,GV,WV,qV,KV,XV,YV,QV;const w_e=["backIconButtonProps","count","getItemAriaLabel","nextIconButtonProps","onPageChange","page","rowsPerPage","showFirstButton","showLastButton"],S_e=P.forwardRef(function(t,r){const{backIconButtonProps:n,count:i,getItemAriaLabel:o,nextIconButtonProps:a,onPageChange:s,page:l,rowsPerPage:u,showFirstButton:d,showLastButton:c}=t,h=Ie(t,w_e),f=Qa(),m=b=>{s(b,0)},p=b=>{s(b,l-1)},g=b=>{s(b,l+1)},v=b=>{s(b,Math.max(0,Math.ceil(i/u)-1))};return B.jsxs("div",L({ref:r},h,{children:[d&&B.jsx(cf,{onClick:m,disabled:l===0,"aria-label":o("first",l),title:o("first",l),children:f.direction==="rtl"?HV||(HV=B.jsx(LV,{})):GV||(GV=B.jsx(kV,{}))}),B.jsx(cf,L({onClick:p,disabled:l===0,color:"inherit","aria-label":o("previous",l),title:o("previous",l)},n,{children:f.direction==="rtl"?WV||(WV=B.jsx(VV,{})):qV||(qV=B.jsx($V,{}))})),B.jsx(cf,L({onClick:g,disabled:i!==-1?l>=Math.ceil(i/u)-1:!1,color:"inherit","aria-label":o("next",l),title:o("next",l)},a,{children:f.direction==="rtl"?KV||(KV=B.jsx($V,{})):XV||(XV=B.jsx(VV,{}))})),c&&B.jsx(cf,{onClick:v,disabled:l>=Math.ceil(i/u)-1,"aria-label":o("last",l),title:o("last",l),children:f.direction==="rtl"?YV||(YV=B.jsx(kV,{})):QV||(QV=B.jsx(LV,{}))})]}))}),__e=S_e;function C_e(e){return ur("MuiTablePagination",e)}const A_e=cr("MuiTablePagination",["root","toolbar","spacer","selectLabel","selectRoot","select","selectIcon","input","menuItem","displayedRows","actions"]),bm=A_e;var ZV;const E_e=["ActionsComponent","backIconButtonProps","className","colSpan","component","count","getItemAriaLabel","labelDisplayedRows","labelRowsPerPage","nextIconButtonProps","onPageChange","onRowsPerPageChange","page","rowsPerPage","rowsPerPageOptions","SelectProps","showFirstButton","showLastButton"],M_e=He(C3,{name:"MuiTablePagination",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({overflow:"auto",color:(e.vars||e).palette.text.primary,fontSize:e.typography.pxToRem(14),"&:last-child":{padding:0}})),P_e=He(x_e,{name:"MuiTablePagination",slot:"Toolbar",overridesResolver:(e,t)=>L({[`& .${bm.actions}`]:t.actions},t.toolbar)})(({theme:e})=>({minHeight:52,paddingRight:2,[`${e.breakpoints.up("xs")} and (orientation: landscape)`]:{minHeight:52},[e.breakpoints.up("sm")]:{minHeight:52,paddingRight:2},[`& .${bm.actions}`]:{flexShrink:0,marginLeft:20}})),T_e=He("div",{name:"MuiTablePagination",slot:"Spacer",overridesResolver:(e,t)=>t.spacer})({flex:"1 1 100%"}),O_e=He("p",{name:"MuiTablePagination",slot:"SelectLabel",overridesResolver:(e,t)=>t.selectLabel})(({theme:e})=>L({},e.typography.body2,{flexShrink:0})),I_e=He(FF,{name:"MuiTablePagination",slot:"Select",overridesResolver:(e,t)=>L({[`& .${bm.selectIcon}`]:t.selectIcon,[`& .${bm.select}`]:t.select},t.input,t.selectRoot)})({color:"inherit",fontSize:"inherit",flexShrink:0,marginRight:32,marginLeft:8,[`& .${bm.select}`]:{paddingLeft:8,paddingRight:24,textAlign:"right",textAlignLast:"right"}}),D_e=He(Fc,{name:"MuiTablePagination",slot:"MenuItem",overridesResolver:(e,t)=>t.menuItem})({}),R_e=He("p",{name:"MuiTablePagination",slot:"DisplayedRows",overridesResolver:(e,t)=>t.displayedRows})(({theme:e})=>L({},e.typography.body2,{flexShrink:0}));function k_e({from:e,to:t,count:r}){return`${e}${t} of ${r!==-1?r:`more than ${t}`}`}function L_e(e){return`Go to ${e} page`}const N_e=e=>{const{classes:t}=e;return lt({root:["root"],toolbar:["toolbar"],spacer:["spacer"],selectLabel:["selectLabel"],select:["select"],input:["input"],selectIcon:["selectIcon"],menuItem:["menuItem"],displayedRows:["displayedRows"],actions:["actions"]},C_e,t)},z_e=P.forwardRef(function(t,r){const n=pr({props:t,name:"MuiTablePagination"}),{ActionsComponent:i=__e,backIconButtonProps:o,className:a,colSpan:s,component:l=C3,count:u,getItemAriaLabel:d=L_e,labelDisplayedRows:c=k_e,labelRowsPerPage:h="Rows per page:",nextIconButtonProps:f,onPageChange:m,onRowsPerPageChange:p,page:g,rowsPerPage:v,rowsPerPageOptions:b=[10,25,50,100],SelectProps:y={},showFirstButton:x=!1,showLastButton:S=!1}=n,w=Ie(n,E_e),_=n,C=N_e(_),E=y.native?"option":D_e;let A;(l===C3||l==="td")&&(A=s||1e3);const M=Oi(y.id),I=Oi(y.labelId),O=()=>u===-1?(g+1)*v:v===-1?u:Math.min(u,(g+1)*v);return B.jsx(M_e,L({colSpan:A,ref:r,as:l,ownerState:_,className:ht(C.root,a)},w,{children:B.jsxs(P_e,{className:C.toolbar,children:[B.jsx(T_e,{className:C.spacer}),b.length>1&&B.jsx(O_e,{className:C.selectLabel,id:I,children:h}),b.length>1&&B.jsx(I_e,L({variant:"standard"},!y.variant&&{input:ZV||(ZV=B.jsx(B0,{}))},{value:v,onChange:p,id:M,labelId:I},y,{classes:L({},y.classes,{root:ht(C.input,C.selectRoot,(y.classes||{}).root),select:ht(C.select,(y.classes||{}).select),icon:ht(C.selectIcon,(y.classes||{}).icon)}),children:b.map(T=>P.createElement(E,L({},!nw(E)&&{ownerState:_},{className:C.menuItem,key:T.label?T.label:T,value:T.value?T.value:T}),T.label?T.label:T))})),B.jsx(R_e,{className:C.displayedRows,children:c({from:u===0?0:g*v+1,to:O(),count:u===-1?-1:u,page:g})}),B.jsx(i,{className:C.actions,backIconButtonProps:o,count:u,nextIconButtonProps:f,onPageChange:m,page:g,rowsPerPage:v,showFirstButton:x,showLastButton:S,getItemAriaLabel:d})]})}))}),B_e=z_e;function F_e(e){return ur("MuiTextField",e)}cr("MuiTextField",["root"]);const j_e=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],U_e={standard:Oee,filled:Cee,outlined:zee},$_e=e=>{const{classes:t}=e;return lt({root:["root"]},F_e,t)},V_e=He(Aee,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),H_e=P.forwardRef(function(t,r){const n=pr({props:t,name:"MuiTextField"}),{autoComplete:i,autoFocus:o=!1,children:a,className:s,color:l="primary",defaultValue:u,disabled:d=!1,error:c=!1,FormHelperTextProps:h,fullWidth:f=!1,helperText:m,id:p,InputLabelProps:g,inputProps:v,InputProps:b,inputRef:y,label:x,maxRows:S,minRows:w,multiline:_=!1,name:C,onBlur:E,onChange:A,onFocus:M,placeholder:I,required:O=!1,rows:T,select:D=!1,SelectProps:N,type:k,value:R,variant:z="outlined"}=n,j=Ie(n,j_e),$=L({},n,{autoFocus:o,color:l,disabled:d,error:c,fullWidth:f,multiline:_,required:O,select:D,variant:z}),U=$_e($),H={};z==="outlined"&&(g&&typeof g.shrink<"u"&&(H.notched=g.shrink),H.label=x),D&&((!N||!N.native)&&(H.id=void 0),H["aria-describedby"]=void 0);const V=Oi(p),Q=m&&V?`${V}-helper-text`:void 0,X=x&&V?`${V}-label`:void 0,ne=U_e[z],J=B.jsx(ne,L({"aria-describedby":Q,autoComplete:i,autoFocus:o,defaultValue:u,fullWidth:f,multiline:_,name:C,rows:T,maxRows:S,minRows:w,type:k,value:R,id:V,inputRef:y,onBlur:E,onChange:A,onFocus:M,placeholder:I,inputProps:v},H,b));return B.jsxs(V_e,L({className:ht(U.root,s),disabled:d,error:c,fullWidth:f,ref:r,required:O,color:l,variant:z,ownerState:$},j,{children:[x!=null&&x!==""&&B.jsx(Iee,L({htmlFor:V,id:X},g,{children:x})),D?B.jsx(FF,L({"aria-describedby":Q,id:V,labelId:X,value:R,input:J},N,{children:a})):J,m&&B.jsx(L1e,L({id:Q},h,{children:m}))]}))}),G_e=H_e;/**
 * @remix-run/router v1.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $y(){return $y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$y.apply(this,arguments)}var hf;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(hf||(hf={}));const JV="popstate";function W_e(e){e===void 0&&(e={});function t(n,i){let{pathname:o,search:a,hash:s}=n.location;return A3("",{pathname:o,search:a,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:FE(i)}return K_e(t,r,null,e)}function Di(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function jF(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function q_e(){return Math.random().toString(36).substr(2,8)}function eH(e,t){return{usr:e.state,key:e.key,idx:t}}function A3(e,t,r,n){return r===void 0&&(r=null),$y({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?F0(t):t,{state:r,key:t&&t.key||n||q_e()})}function FE(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function F0(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function K_e(e,t,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:o=!1}=n,a=i.history,s=hf.Pop,l=null,u=d();u==null&&(u=0,a.replaceState($y({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function c(){s=hf.Pop;let g=d(),v=g==null?null:g-u;u=g,l&&l({action:s,location:p.location,delta:v})}function h(g,v){s=hf.Push;let b=A3(p.location,g,v);r&&r(b,g),u=d()+1;let y=eH(b,u),x=p.createHref(b);try{a.pushState(y,"",x)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(x)}o&&l&&l({action:s,location:p.location,delta:1})}function f(g,v){s=hf.Replace;let b=A3(p.location,g,v);r&&r(b,g),u=d();let y=eH(b,u),x=p.createHref(b);a.replaceState(y,"",x),o&&l&&l({action:s,location:p.location,delta:0})}function m(g){let v=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof g=="string"?g:FE(g);return Di(v,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,v)}let p={get action(){return s},get location(){return e(i,a)},listen(g){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(JV,c),l=g,()=>{i.removeEventListener(JV,c),l=null}},createHref(g){return t(i,g)},createURL:m,encodeLocation(g){let v=m(g);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:f,go(g){return a.go(g)}};return p}var tH;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(tH||(tH={}));function X_e(e,t,r){r===void 0&&(r="/");let n=typeof t=="string"?F0(t):t,i=UF(n.pathname||"/",r);if(i==null)return null;let o=Fee(e);Y_e(o);let a=null;for(let s=0;a==null&&s<o.length;++s)a=oCe(o[s],lCe(i));return a}function Fee(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(o,a,s)=>{let l={relativePath:s===void 0?o.path||"":s,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};l.relativePath.startsWith("/")&&(Di(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let u=kf([n,l.relativePath]),d=r.concat(l);o.children&&o.children.length>0&&(Di(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Fee(o.children,t,d,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:nCe(u,o.index),routesMeta:d})};return e.forEach((o,a)=>{var s;if(o.path===""||!((s=o.path)!=null&&s.includes("?")))i(o,a);else for(let l of jee(o.path))i(o,a,l)}),t}function jee(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return i?[o,""]:[o];let a=jee(n.join("/")),s=[];return s.push(...a.map(l=>l===""?o:[o,l].join("/"))),i&&s.push(...a),s.map(l=>e.startsWith("/")&&l===""?"/":l)}function Y_e(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:iCe(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Q_e=/^:\w+$/,Z_e=3,J_e=2,eCe=1,tCe=10,rCe=-2,rH=e=>e==="*";function nCe(e,t){let r=e.split("/"),n=r.length;return r.some(rH)&&(n+=rCe),t&&(n+=J_e),r.filter(i=>!rH(i)).reduce((i,o)=>i+(Q_e.test(o)?Z_e:o===""?eCe:tCe),n)}function iCe(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function oCe(e,t){let{routesMeta:r}=e,n={},i="/",o=[];for(let a=0;a<r.length;++a){let s=r[a],l=a===r.length-1,u=i==="/"?t:t.slice(i.length)||"/",d=aCe({path:s.relativePath,caseSensitive:s.caseSensitive,end:l},u);if(!d)return null;Object.assign(n,d.params);let c=s.route;o.push({params:n,pathname:kf([i,d.pathname]),pathnameBase:hCe(kf([i,d.pathnameBase])),route:c}),d.pathnameBase!=="/"&&(i=kf([i,d.pathnameBase]))}return o}function aCe(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=sCe(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:n.reduce((u,d,c)=>{if(d==="*"){let h=s[c]||"";a=o.slice(0,o.length-h.length).replace(/(.)\/+$/,"$1")}return u[d]=uCe(s[c]||"",d),u},{}),pathname:o,pathnameBase:a,pattern:e}}function sCe(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),jF(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(a,s)=>(n.push(s),"/([^\\/]+)"));return e.endsWith("*")?(n.push("*"),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function lCe(e){try{return decodeURI(e)}catch(t){return jF(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function uCe(e,t){try{return decodeURIComponent(e)}catch(r){return jF(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+r+").")),e}}function UF(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function cCe(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?F0(e):e;return{pathname:r?r.startsWith("/")?r:dCe(r,t):t,search:fCe(n),hash:pCe(i)}}function dCe(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function yI(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $F(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function VF(e,t,r,n){n===void 0&&(n=!1);let i;typeof e=="string"?i=F0(e):(i=$y({},e),Di(!i.pathname||!i.pathname.includes("?"),yI("?","pathname","search",i)),Di(!i.pathname||!i.pathname.includes("#"),yI("#","pathname","hash",i)),Di(!i.search||!i.search.includes("#"),yI("#","search","hash",i)));let o=e===""||i.pathname==="",a=o?"/":i.pathname,s;if(n||a==null)s=r;else{let c=t.length-1;if(a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),c-=1;i.pathname=h.join("/")}s=c>=0?t[c]:"/"}let l=cCe(i,s),u=a&&a!=="/"&&a.endsWith("/"),d=(o||a===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const kf=e=>e.join("/").replace(/\/\/+/g,"/"),hCe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),fCe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,pCe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,mCe=function(t,r){r===void 0&&(r=302);let n=r;typeof n=="number"?n={status:n}:typeof n.status>"u"&&(n.status=302);let i=new Headers(n.headers);return i.set("Location",t),new Response(null,$y({},n,{headers:i}))};function gCe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Uee=["post","put","patch","delete"];new Set(Uee);const vCe=["get",...Uee];new Set(vCe);/**
 * React Router v6.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jE(){return jE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jE.apply(this,arguments)}const HF=P.createContext(null),yCe=P.createContext(null),j0=P.createContext(null),i2=P.createContext(null),dp=P.createContext({outlet:null,matches:[],isDataRoute:!1}),$ee=P.createContext(null);function bCe(e,t){let{relative:r}=t===void 0?{}:t;U0()||Di(!1);let{basename:n,navigator:i}=P.useContext(j0),{hash:o,pathname:a,search:s}=Gee(e,{relative:r}),l=a;return n!=="/"&&(l=a==="/"?n:kf([n,a])),i.createHref({pathname:l,search:s,hash:o})}function U0(){return P.useContext(i2)!=null}function AS(){return U0()||Di(!1),P.useContext(i2).location}function Vee(e){P.useContext(j0).static||P.useLayoutEffect(e)}function Hee(){let{isDataRoute:e}=P.useContext(dp);return e?DCe():xCe()}function xCe(){U0()||Di(!1);let e=P.useContext(HF),{basename:t,navigator:r}=P.useContext(j0),{matches:n}=P.useContext(dp),{pathname:i}=AS(),o=JSON.stringify($F(n).map(l=>l.pathnameBase)),a=P.useRef(!1);return Vee(()=>{a.current=!0}),P.useCallback(function(l,u){if(u===void 0&&(u={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=VF(l,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:kf([t,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[t,r,o,i,e])}function Gee(e,t){let{relative:r}=t===void 0?{}:t,{matches:n}=P.useContext(dp),{pathname:i}=AS(),o=JSON.stringify($F(n).map(a=>a.pathnameBase));return P.useMemo(()=>VF(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function wCe(e,t){return SCe(e,t)}function SCe(e,t,r){U0()||Di(!1);let{navigator:n}=P.useContext(j0),{matches:i}=P.useContext(dp),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let s=o?o.pathnameBase:"/";o&&o.route;let l=AS(),u;if(t){var d;let p=typeof t=="string"?F0(t):t;s==="/"||(d=p.pathname)!=null&&d.startsWith(s)||Di(!1),u=p}else u=l;let c=u.pathname||"/",h=s==="/"?c:c.slice(s.length)||"/",f=X_e(e,{pathname:h}),m=MCe(f&&f.map(p=>Object.assign({},p,{params:Object.assign({},a,p.params),pathname:kf([s,n.encodeLocation?n.encodeLocation(p.pathname).pathname:p.pathname]),pathnameBase:p.pathnameBase==="/"?s:kf([s,n.encodeLocation?n.encodeLocation(p.pathnameBase).pathname:p.pathnameBase])})),i,r);return t&&m?P.createElement(i2.Provider,{value:{location:jE({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:hf.Pop}},m):m}function _Ce(){let e=ICe(),t=gCe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},t),r?P.createElement("pre",{style:i},r):null,o)}const CCe=P.createElement(_Ce,null);class ACe extends P.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error?P.createElement(dp.Provider,{value:this.props.routeContext},P.createElement($ee.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ECe(e){let{routeContext:t,match:r,children:n}=e,i=P.useContext(HF);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),P.createElement(dp.Provider,{value:t},n)}function MCe(e,t,r){var n;if(t===void 0&&(t=[]),r===void 0&&(r=null),e==null){var i;if((i=r)!=null&&i.errors)e=r.matches;else return null}let o=e,a=(n=r)==null?void 0:n.errors;if(a!=null){let s=o.findIndex(l=>l.route.id&&(a==null?void 0:a[l.route.id]));s>=0||Di(!1),o=o.slice(0,Math.min(o.length,s+1))}return o.reduceRight((s,l,u)=>{let d=l.route.id?a==null?void 0:a[l.route.id]:null,c=null;r&&(c=l.route.errorElement||CCe);let h=t.concat(o.slice(0,u+1)),f=()=>{let m;return d?m=c:l.route.Component?m=P.createElement(l.route.Component,null):l.route.element?m=l.route.element:m=s,P.createElement(ECe,{match:l,routeContext:{outlet:s,matches:h,isDataRoute:r!=null},children:m})};return r&&(l.route.ErrorBoundary||l.route.errorElement||u===0)?P.createElement(ACe,{location:r.location,revalidation:r.revalidation,component:c,error:d,children:f(),routeContext:{outlet:null,matches:h,isDataRoute:!0}}):f()},null)}var Wee=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Wee||{}),UE=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(UE||{});function PCe(e){let t=P.useContext(HF);return t||Di(!1),t}function TCe(e){let t=P.useContext(yCe);return t||Di(!1),t}function OCe(e){let t=P.useContext(dp);return t||Di(!1),t}function qee(e){let t=OCe(),r=t.matches[t.matches.length-1];return r.route.id||Di(!1),r.route.id}function ICe(){var e;let t=P.useContext($ee),r=TCe(UE.UseRouteError),n=qee(UE.UseRouteError);return t||((e=r.errors)==null?void 0:e[n])}function DCe(){let{router:e}=PCe(Wee.UseNavigateStable),t=qee(UE.UseNavigateStable),r=P.useRef(!1);return Vee(()=>{r.current=!0}),P.useCallback(function(i,o){o===void 0&&(o={}),r.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,jE({fromRouteId:t},o)))},[e,t])}function bI(e){let{to:t,replace:r,state:n,relative:i}=e;U0()||Di(!1);let{matches:o}=P.useContext(dp),{pathname:a}=AS(),s=Hee(),l=VF(t,$F(o).map(d=>d.pathnameBase),a,i==="path"),u=JSON.stringify(l);return P.useEffect(()=>s(JSON.parse(u),{replace:r,state:n,relative:i}),[s,u,i,r,n]),null}function FA(e){Di(!1)}function RCe(e){let{basename:t="/",children:r=null,location:n,navigationType:i=hf.Pop,navigator:o,static:a=!1}=e;U0()&&Di(!1);let s=t.replace(/^\/*/,"/"),l=P.useMemo(()=>({basename:s,navigator:o,static:a}),[s,o,a]);typeof n=="string"&&(n=F0(n));let{pathname:u="/",search:d="",hash:c="",state:h=null,key:f="default"}=n,m=P.useMemo(()=>{let p=UF(u,s);return p==null?null:{location:{pathname:p,search:d,hash:c,state:h,key:f},navigationType:i}},[s,u,d,c,h,f,i]);return m==null?null:P.createElement(j0.Provider,{value:l},P.createElement(i2.Provider,{children:r,value:m}))}function kCe(e){let{children:t,location:r}=e;return wCe(E3(t),r)}new Promise(()=>{});function E3(e,t){t===void 0&&(t=[]);let r=[];return P.Children.forEach(e,(n,i)=>{if(!P.isValidElement(n))return;let o=[...t,i];if(n.type===P.Fragment){r.push.apply(r,E3(n.props.children,o));return}n.type!==FA&&Di(!1),!n.props.index||!n.props.children||Di(!1);let a={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=E3(n.props.children,o)),r.push(a)}),r}/**
 * React Router DOM v6.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function M3(){return M3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},M3.apply(this,arguments)}function LCe(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function NCe(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function zCe(e,t){return e.button===0&&(!t||t==="_self")&&!NCe(e)}const BCe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],FCe="startTransition",nH=R1[FCe];function jCe(e){let{basename:t,children:r,future:n,window:i}=e,o=P.useRef();o.current==null&&(o.current=W_e({window:i,v5Compat:!0}));let a=o.current,[s,l]=P.useState({action:a.action,location:a.location}),{v7_startTransition:u}=n||{},d=P.useCallback(c=>{u&&nH?nH(()=>l(c)):l(c)},[l,u]);return P.useLayoutEffect(()=>a.listen(d),[a,d]),P.createElement(RCe,{basename:t,children:r,location:s.location,navigationType:s.action,navigator:a})}const UCe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$Ce=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,j_=P.forwardRef(function(t,r){let{onClick:n,relative:i,reloadDocument:o,replace:a,state:s,target:l,to:u,preventScrollReset:d}=t,c=LCe(t,BCe),{basename:h}=P.useContext(j0),f,m=!1;if(typeof u=="string"&&$Ce.test(u)&&(f=u,UCe))try{let b=new URL(window.location.href),y=u.startsWith("//")?new URL(b.protocol+u):new URL(u),x=UF(y.pathname,h);y.origin===b.origin&&x!=null?u=x+y.search+y.hash:m=!0}catch{}let p=bCe(u,{relative:i}),g=VCe(u,{replace:a,state:s,target:l,preventScrollReset:d,relative:i});function v(b){n&&n(b),b.defaultPrevented||g(b)}return P.createElement("a",M3({},c,{href:f||p,onClick:m||o?n:v,ref:r,target:l}))});var iH;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(iH||(iH={}));var oH;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(oH||(oH={}));function VCe(e,t){let{target:r,replace:n,state:i,preventScrollReset:o,relative:a}=t===void 0?{}:t,s=Hee(),l=AS(),u=Gee(e,{relative:a});return P.useCallback(d=>{if(zCe(d,r)){d.preventDefault();let c=n!==void 0?n:FE(l)===FE(u);s(e,{replace:c,state:i,preventScrollReset:o,relative:a})}},[l,s,u,n,i,r,e,o,a])}const Lf=wi(Na)({display:"flex",justifyContent:"space-between",alignItems:"center"});var GF={},Kee={exports:{}};(function(e){function t(r){return r&&r.__esModule?r:{default:r}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(Kee);var HCe=Kee.exports,xI={};const GCe=XP(hve);var aH;function WCe(){return aH||(aH=1,function(e){"use client";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.createSvgIcon}});var t=GCe}(xI)),xI}var qCe=HCe;Object.defineProperty(GF,"__esModule",{value:!0});var Xee=GF.default=void 0,KCe=qCe(WCe()),XCe=B,YCe=(0,KCe.default)((0,XCe.jsx)("path",{d:"m14 12-2 2-2-2 2-2 2 2zm-2-6 2.12 2.12 2.5-2.5L12 1 7.38 5.62l2.5 2.5L12 6zm-6 6 2.12-2.12-2.5-2.5L1 12l4.62 4.62 2.5-2.5L6 12zm12 0-2.12 2.12 2.5 2.5L23 12l-4.62-4.62-2.5 2.5L18 12zm-6 6-2.12-2.12-2.5 2.5L12 23l4.62-4.62-2.5-2.5L12 18z"}),"Api");Xee=GF.default=YCe;const QCe=()=>{const{palette:e}=Qa(),[t,r]=P.useState("dashboard"),n=o=>{r(o.currentTarget.id)},i=o=>{r(o.currentTarget.id),localStorage.removeItem("user77"),location.reload()};return B.jsxs(Lf,{mb:"0.25rem",p:"0.5rem 0rem",color:e.grey[300],children:[B.jsx(Lf,{gap:"0.75rem",children:B.jsxs(j_,{to:"/",style:{textDecoration:"none",color:"inherit"},children:[B.jsx(Xee,{sx:{fontSize:"35px"}}),B.jsx(vi,{variant:"h4",fontSize:"16px",children:"Deep API"})]})}),B.jsxs(Lf,{gap:"2rem",children:[B.jsx(Na,{sx:{"&: hover":{color:e.primary[100]}},children:B.jsx(j_,{id:"dashboard",to:"/",onClick:n,style:{color:t==="dashboard"?"inherit":e.grey[700],textDecoration:"inherit"},children:"Dashboard"})}),B.jsx(Na,{sx:{"&: hover":{color:e.primary[100]}},children:B.jsx(j_,{id:"predictions",to:"/predictions",onClick:n,style:{color:t==="predictions"?"inherit":e.grey[700],textDecoration:"inherit"},children:"Predictions"})}),B.jsx(Na,{sx:{"&: hover":{color:e.primary[100]}},children:B.jsx(j_,{id:"logout",to:"/",onClick:i,style:{color:t==="logout"?"inherit":e.grey[700],textDecoration:"inherit"},children:"Logout"})})]})]})},Tc=({icon:e,title:t,subtitle:r,sideText:n})=>{const{palette:i}=Qa();return B.jsxs(Lf,{color:i.grey[400],margin:"1.5rem 1rem 0 1rem",children:[B.jsxs(Lf,{children:[e,B.jsxs(Na,{width:"100%",display:"flex",flexDirection:"column",justifyContent:"start",alignItems:"start",children:[B.jsx(vi,{variant:"h4",mb:"-0.1rem",children:t}),B.jsx(vi,{variant:"h6",children:r})]})]}),B.jsx(vi,{variant:"h5",fontWeight:"700",color:i.secondary[500],children:n})]})},xu=wi(Na)(({theme:e})=>({backgroundColor:e.palette.background.light,borderRadius:"1rem",boxShadow:"0.15rem 0.2rem 0.15rem 0.1rem rgba(0, 0, 0, .8)"}));function Co(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Wa(e){return!!e&&!!e[gr]}function Ms(e){var t;return!!e&&(function(r){if(!r||typeof r!="object")return!1;var n=Object.getPrototypeOf(r);if(n===null)return!0;var i=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===oAe}(e)||Array.isArray(e)||!!e[ry]||!!(!((t=e.constructor)===null||t===void 0)&&t[ry])||o2(e)||a2(e))}function WF(e){return Wa(e)||Co(23,e),e[gr].t}function sh(e,t,r){r===void 0&&(r=!1),Yf(e)===0?(r?Object.keys:ny)(e).forEach(function(n){r&&typeof n=="symbol"||t(n,e[n],e)}):e.forEach(function(n,i){return t(i,n,e)})}function Yf(e){var t=e[gr];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:o2(e)?2:a2(e)?3:0}function Nf(e,t){return Yf(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function jA(e,t){return Yf(e)===2?e.get(t):e[t]}function Yee(e,t,r){var n=Yf(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function Qee(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function o2(e){return nAe&&e instanceof Map}function a2(e){return iAe&&e instanceof Set}function wo(e){return e.o||e.t}function qF(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Jee(e);delete t[gr];for(var r=ny(t),n=0;n<r.length;n++){var i=r[n],o=t[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function ES(e,t){return t===void 0&&(t=!1),KF(e)||Wa(e)||!Ms(e)||(Yf(e)>1&&(e.set=e.add=e.clear=e.delete=ZCe),Object.freeze(e),t&&sh(e,function(r,n){return ES(n,!0)},!0)),e}function ZCe(){Co(2)}function KF(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function jc(e){var t=T3[e];return t||Co(18,e),t}function XF(e,t){T3[e]||(T3[e]=t)}function sw(){return uw}function wI(e,t){t&&(jc("Patches"),e.u=[],e.s=[],e.v=t)}function $E(e){P3(e),e.p.forEach(JCe),e.p=null}function P3(e){e===uw&&(uw=e.l)}function sH(e){return uw={p:[],l:uw,h:e,m:!0,_:0}}function JCe(e){var t=e[gr];t.i===0||t.i===1?t.j():t.g=!0}function SI(e,t){t._=t.p.length;var r=t.p[0],n=e!==void 0&&e!==r;return t.h.O||jc("ES5").S(t,e,n),n?(r[gr].P&&($E(t),Co(4)),Ms(e)&&(e=VE(t,e),t.l||HE(t,e)),t.u&&jc("Patches").M(r[gr].t,e,t.u,t.s)):e=VE(t,r,[]),$E(t),t.u&&t.v(t.u,t.s),e!==l2?e:void 0}function VE(e,t,r){if(KF(t))return t;var n=t[gr];if(!n)return sh(t,function(s,l){return lH(e,n,t,s,l,r)},!0),t;if(n.A!==e)return t;if(!n.P)return HE(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var i=n.i===4||n.i===5?n.o=qF(n.k):n.o,o=i,a=!1;n.i===3&&(o=new Set(i),i.clear(),a=!0),sh(o,function(s,l){return lH(e,n,i,s,l,r,a)}),HE(e,i,!1),r&&e.u&&jc("Patches").N(n,r,e.u,e.s)}return n.o}function lH(e,t,r,n,i,o,a){if(Wa(i)){var s=VE(e,i,o&&t&&t.i!==3&&!Nf(t.R,n)?o.concat(n):void 0);if(Yee(r,n,s),!Wa(s))return;e.m=!1}else a&&r.add(i);if(Ms(i)&&!KF(i)){if(!e.h.D&&e._<1)return;VE(e,i),t&&t.A.l||HE(e,i)}}function HE(e,t,r){r===void 0&&(r=!1),!e.l&&e.h.D&&e.m&&ES(t,r)}function _I(e,t){var r=e[gr];return(r?wo(r):e)[t]}function uH(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function is(e){e.P||(e.P=!0,e.l&&is(e.l))}function CI(e){e.o||(e.o=qF(e.t))}function lw(e,t,r){var n=o2(t)?jc("MapSet").F(t,r):a2(t)?jc("MapSet").T(t,r):e.O?function(i,o){var a=Array.isArray(i),s={i:a?1:0,A:o?o.A:sw(),P:!1,I:!1,R:{},l:o,t:i,k:null,o:null,j:null,C:!1},l=s,u=cw;a&&(l=[s],u=kx);var d=Proxy.revocable(l,u),c=d.revoke,h=d.proxy;return s.k=h,s.j=c,h}(t,r):jc("ES5").J(t,r);return(r?r.A:sw()).p.push(n),n}function s2(e){return Wa(e)||Co(22,e),function t(r){if(!Ms(r))return r;var n,i=r[gr],o=Yf(r);if(i){if(!i.P&&(i.i<4||!jc("ES5").K(i)))return i.t;i.I=!0,n=cH(r,o),i.I=!1}else n=cH(r,o);return sh(n,function(a,s){i&&jA(i.t,a)===s||Yee(n,a,t(s))}),o===3?new Set(n):n}(e)}function cH(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return qF(e)}function YF(){function e(o,a){var s=i[o];return s?s.enumerable=a:i[o]=s={configurable:!0,enumerable:a,get:function(){var l=this[gr];return cw.get(l,o)},set:function(l){var u=this[gr];cw.set(u,o,l)}},s}function t(o){for(var a=o.length-1;a>=0;a--){var s=o[a][gr];if(!s.P)switch(s.i){case 5:n(s)&&is(s);break;case 4:r(s)&&is(s)}}}function r(o){for(var a=o.t,s=o.k,l=ny(s),u=l.length-1;u>=0;u--){var d=l[u];if(d!==gr){var c=a[d];if(c===void 0&&!Nf(a,d))return!0;var h=s[d],f=h&&h[gr];if(f?f.t!==c:!Qee(h,c))return!0}}var m=!!a[gr];return l.length!==ny(a).length+(m?0:1)}function n(o){var a=o.k;if(a.length!==o.t.length)return!0;var s=Object.getOwnPropertyDescriptor(a,a.length-1);if(s&&!s.get)return!0;for(var l=0;l<a.length;l++)if(!a.hasOwnProperty(l))return!0;return!1}var i={};XF("ES5",{J:function(o,a){var s=Array.isArray(o),l=function(d,c){if(d){for(var h=Array(c.length),f=0;f<c.length;f++)Object.defineProperty(h,""+f,e(f,!0));return h}var m=Jee(c);delete m[gr];for(var p=ny(m),g=0;g<p.length;g++){var v=p[g];m[v]=e(v,d||!!m[v].enumerable)}return Object.create(Object.getPrototypeOf(c),m)}(s,o),u={i:s?5:4,A:a?a.A:sw(),P:!1,I:!1,R:{},l:a,t:o,k:l,o:null,g:!1,C:!1};return Object.defineProperty(l,gr,{value:u,writable:!0}),l},S:function(o,a,s){s?Wa(a)&&a[gr].A===o&&t(o.p):(o.u&&function l(u){if(u&&typeof u=="object"){var d=u[gr];if(d){var c=d.t,h=d.k,f=d.R,m=d.i;if(m===4)sh(h,function(y){y!==gr&&(c[y]!==void 0||Nf(c,y)?f[y]||l(h[y]):(f[y]=!0,is(d)))}),sh(c,function(y){h[y]!==void 0||Nf(h,y)||(f[y]=!1,is(d))});else if(m===5){if(n(d)&&(is(d),f.length=!0),h.length<c.length)for(var p=h.length;p<c.length;p++)f[p]=!1;else for(var g=c.length;g<h.length;g++)f[g]=!0;for(var v=Math.min(h.length,c.length),b=0;b<v;b++)h.hasOwnProperty(b)||(f[b]=!0),f[b]===void 0&&l(h[b])}}}}(o.p[0]),t(o.p))},K:function(o){return o.i===4?r(o):n(o)}})}function QF(){function e(n){if(!Ms(n))return n;if(Array.isArray(n))return n.map(e);if(o2(n))return new Map(Array.from(n.entries()).map(function(a){return[a[0],e(a[1])]}));if(a2(n))return new Set(Array.from(n).map(e));var i=Object.create(Object.getPrototypeOf(n));for(var o in n)i[o]=e(n[o]);return Nf(n,ry)&&(i[ry]=n[ry]),i}function t(n){return Wa(n)?e(n):n}var r="add";XF("Patches",{$:function(n,i){return i.forEach(function(o){for(var a=o.path,s=o.op,l=n,u=0;u<a.length-1;u++){var d=Yf(l),c=a[u];typeof c!="string"&&typeof c!="number"&&(c=""+c),d!==0&&d!==1||c!=="__proto__"&&c!=="constructor"||Co(24),typeof l=="function"&&c==="prototype"&&Co(24),typeof(l=jA(l,c))!="object"&&Co(15,a.join("/"))}var h=Yf(l),f=e(o.value),m=a[a.length-1];switch(s){case"replace":switch(h){case 2:return l.set(m,f);case 3:Co(16);default:return l[m]=f}case r:switch(h){case 1:return m==="-"?l.push(f):l.splice(m,0,f);case 2:return l.set(m,f);case 3:return l.add(f);default:return l[m]=f}case"remove":switch(h){case 1:return l.splice(m,1);case 2:return l.delete(m);case 3:return l.delete(o.value);default:return delete l[m]}default:Co(17,s)}}),n},N:function(n,i,o,a){switch(n.i){case 0:case 4:case 2:return function(s,l,u,d){var c=s.t,h=s.o;sh(s.R,function(f,m){var p=jA(c,f),g=jA(h,f),v=m?Nf(c,f)?"replace":r:"remove";if(p!==g||v!=="replace"){var b=l.concat(f);u.push(v==="remove"?{op:v,path:b}:{op:v,path:b,value:g}),d.push(v===r?{op:"remove",path:b}:v==="remove"?{op:r,path:b,value:t(p)}:{op:"replace",path:b,value:t(p)})}})}(n,i,o,a);case 5:case 1:return function(s,l,u,d){var c=s.t,h=s.R,f=s.o;if(f.length<c.length){var m=[f,c];c=m[0],f=m[1];var p=[d,u];u=p[0],d=p[1]}for(var g=0;g<c.length;g++)if(h[g]&&f[g]!==c[g]){var v=l.concat([g]);u.push({op:"replace",path:v,value:t(f[g])}),d.push({op:"replace",path:v,value:t(c[g])})}for(var b=c.length;b<f.length;b++){var y=l.concat([b]);u.push({op:r,path:y,value:t(f[b])})}c.length<f.length&&d.push({op:"replace",path:l.concat(["length"]),value:c.length})}(n,i,o,a);case 3:return function(s,l,u,d){var c=s.t,h=s.o,f=0;c.forEach(function(m){if(!h.has(m)){var p=l.concat([f]);u.push({op:"remove",path:p,value:m}),d.unshift({op:r,path:p,value:m})}f++}),f=0,h.forEach(function(m){if(!c.has(m)){var p=l.concat([f]);u.push({op:r,path:p,value:m}),d.unshift({op:"remove",path:p,value:m})}f++})}(n,i,o,a)}},M:function(n,i,o,a){o.push({op:"replace",path:[],value:i===l2?void 0:i}),a.push({op:"replace",path:[],value:n})}})}function Zee(){function e(s,l){function u(){this.constructor=s}i(s,l),s.prototype=(u.prototype=l.prototype,new u)}function t(s){s.o||(s.R=new Map,s.o=new Map(s.t))}function r(s){s.o||(s.o=new Set,s.t.forEach(function(l){if(Ms(l)){var u=lw(s.A.h,l,s);s.p.set(l,u),s.o.add(u)}else s.o.add(l)}))}function n(s){s.g&&Co(3,JSON.stringify(wo(s)))}var i=function(s,l){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var c in d)d.hasOwnProperty(c)&&(u[c]=d[c])})(s,l)},o=function(){function s(u,d){return this[gr]={i:2,l:d,A:d?d.A:sw(),P:!1,I:!1,o:void 0,R:void 0,t:u,k:this,C:!1,g:!1},this}e(s,Map);var l=s.prototype;return Object.defineProperty(l,"size",{get:function(){return wo(this[gr]).size}}),l.has=function(u){return wo(this[gr]).has(u)},l.set=function(u,d){var c=this[gr];return n(c),wo(c).has(u)&&wo(c).get(u)===d||(t(c),is(c),c.R.set(u,!0),c.o.set(u,d),c.R.set(u,!0)),this},l.delete=function(u){if(!this.has(u))return!1;var d=this[gr];return n(d),t(d),is(d),d.t.has(u)?d.R.set(u,!1):d.R.delete(u),d.o.delete(u),!0},l.clear=function(){var u=this[gr];n(u),wo(u).size&&(t(u),is(u),u.R=new Map,sh(u.t,function(d){u.R.set(d,!1)}),u.o.clear())},l.forEach=function(u,d){var c=this;wo(this[gr]).forEach(function(h,f){u.call(d,c.get(f),f,c)})},l.get=function(u){var d=this[gr];n(d);var c=wo(d).get(u);if(d.I||!Ms(c)||c!==d.t.get(u))return c;var h=lw(d.A.h,c,d);return t(d),d.o.set(u,h),h},l.keys=function(){return wo(this[gr]).keys()},l.values=function(){var u,d=this,c=this.keys();return(u={})[U_]=function(){return d.values()},u.next=function(){var h=c.next();return h.done?h:{done:!1,value:d.get(h.value)}},u},l.entries=function(){var u,d=this,c=this.keys();return(u={})[U_]=function(){return d.entries()},u.next=function(){var h=c.next();if(h.done)return h;var f=d.get(h.value);return{done:!1,value:[h.value,f]}},u},l[U_]=function(){return this.entries()},s}(),a=function(){function s(u,d){return this[gr]={i:3,l:d,A:d?d.A:sw(),P:!1,I:!1,o:void 0,t:u,k:this,p:new Map,g:!1,C:!1},this}e(s,Set);var l=s.prototype;return Object.defineProperty(l,"size",{get:function(){return wo(this[gr]).size}}),l.has=function(u){var d=this[gr];return n(d),d.o?!!d.o.has(u)||!(!d.p.has(u)||!d.o.has(d.p.get(u))):d.t.has(u)},l.add=function(u){var d=this[gr];return n(d),this.has(u)||(r(d),is(d),d.o.add(u)),this},l.delete=function(u){if(!this.has(u))return!1;var d=this[gr];return n(d),r(d),is(d),d.o.delete(u)||!!d.p.has(u)&&d.o.delete(d.p.get(u))},l.clear=function(){var u=this[gr];n(u),wo(u).size&&(r(u),is(u),u.o.clear())},l.values=function(){var u=this[gr];return n(u),r(u),u.o.values()},l.entries=function(){var u=this[gr];return n(u),r(u),u.o.entries()},l.keys=function(){return this.values()},l[U_]=function(){return this.values()},l.forEach=function(u,d){for(var c=this.values(),h=c.next();!h.done;)u.call(d,h.value,h.value,this),h=c.next()},s}();XF("MapSet",{F:function(s,l){return new o(s,l)},T:function(s,l){return new a(s,l)}})}function eAe(){YF(),Zee(),QF()}function tAe(e){return e}function rAe(e){return e}var dH,uw,ZF=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",nAe=typeof Map<"u",iAe=typeof Set<"u",hH=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",l2=ZF?Symbol.for("immer-nothing"):((dH={})["immer-nothing"]=!0,dH),ry=ZF?Symbol.for("immer-draftable"):"__$immer_draftable",gr=ZF?Symbol.for("immer-state"):"__$immer_state",U_=typeof Symbol<"u"&&Symbol.iterator||"@@iterator",oAe=""+Object.prototype.constructor,ny=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Jee=Object.getOwnPropertyDescriptors||function(e){var t={};return ny(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},T3={},cw={get:function(e,t){if(t===gr)return e;var r=wo(e);if(!Nf(r,t))return function(i,o,a){var s,l=uH(o,a);return l?"value"in l?l.value:(s=l.get)===null||s===void 0?void 0:s.call(i.k):void 0}(e,r,t);var n=r[t];return e.I||!Ms(n)?n:n===_I(e.t,t)?(CI(e),e.o[t]=lw(e.A.h,n,e)):n},has:function(e,t){return t in wo(e)},ownKeys:function(e){return Reflect.ownKeys(wo(e))},set:function(e,t,r){var n=uH(wo(e),t);if(n!=null&&n.set)return n.set.call(e.k,r),!0;if(!e.P){var i=_I(wo(e),t),o=i==null?void 0:i[gr];if(o&&o.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(Qee(r,i)&&(r!==void 0||Nf(e.t,t)))return!0;CI(e),is(e)}return e.o[t]===r&&(r!==void 0||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return _I(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,CI(e),is(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=wo(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty:function(){Co(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Co(12)}},kx={};sh(cw,function(e,t){kx[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),kx.deleteProperty=function(e,t){return kx.set.call(this,e,t,void 0)},kx.set=function(e,t,r){return cw.set.call(this,e[0],t,r,e[0])};var ete=function(){function e(r){var n=this;this.O=hH,this.D=!0,this.produce=function(i,o,a){if(typeof i=="function"&&typeof o!="function"){var s=o;o=i;var l=n;return function(p){var g=this;p===void 0&&(p=s);for(var v=arguments.length,b=Array(v>1?v-1:0),y=1;y<v;y++)b[y-1]=arguments[y];return l.produce(p,function(x){var S;return(S=o).call.apply(S,[g,x].concat(b))})}}var u;if(typeof o!="function"&&Co(6),a!==void 0&&typeof a!="function"&&Co(7),Ms(i)){var d=sH(n),c=lw(n,i,void 0),h=!0;try{u=o(c),h=!1}finally{h?$E(d):P3(d)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(p){return wI(d,a),SI(p,d)},function(p){throw $E(d),p}):(wI(d,a),SI(u,d))}if(!i||typeof i!="object"){if((u=o(i))===void 0&&(u=i),u===l2&&(u=void 0),n.D&&ES(u,!0),a){var f=[],m=[];jc("Patches").M(i,u,f,m),a(f,m)}return u}Co(21,i)},this.produceWithPatches=function(i,o){if(typeof i=="function")return function(u){for(var d=arguments.length,c=Array(d>1?d-1:0),h=1;h<d;h++)c[h-1]=arguments[h];return n.produceWithPatches(u,function(f){return i.apply(void 0,[f].concat(c))})};var a,s,l=n.produce(i,o,function(u,d){a=u,s=d});return typeof Promise<"u"&&l instanceof Promise?l.then(function(u){return[u,a,s]}):[l,a,s]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){Ms(r)||Co(8),Wa(r)&&(r=s2(r));var n=sH(this),i=lw(this,r,void 0);return i[gr].C=!0,P3(n),i},t.finishDraft=function(r,n){var i=r&&r[gr],o=i.A;return wI(o,n),SI(void 0,o)},t.setAutoFreeze=function(r){this.D=r},t.setUseProxies=function(r){r&&!hH&&Co(20),this.O=r},t.applyPatches=function(r,n){var i;for(i=n.length-1;i>=0;i--){var o=n[i];if(o.path.length===0&&o.op==="replace"){r=o.value;break}}i>-1&&(n=n.slice(i+1));var a=jc("Patches").$;return Wa(r)?a(r,n):this.produce(r,function(s){return a(s,n)})},e}(),nl=new ete,lh=nl.produce,JF=nl.produceWithPatches.bind(nl),aAe=nl.setAutoFreeze.bind(nl),sAe=nl.setUseProxies.bind(nl),O3=nl.applyPatches.bind(nl),lAe=nl.createDraft.bind(nl),uAe=nl.finishDraft.bind(nl);const cAe=Object.freeze(Object.defineProperty({__proto__:null,Immer:ete,applyPatches:O3,castDraft:tAe,castImmutable:rAe,createDraft:lAe,current:s2,default:lh,enableAllPlugins:eAe,enableES5:YF,enableMapSet:Zee,enablePatches:QF,finishDraft:uAe,freeze:ES,immerable:ry,isDraft:Wa,isDraftable:Ms,nothing:l2,original:WF,produce:lh,produceWithPatches:JF,setAutoFreeze:aAe,setUseProxies:sAe},Symbol.toStringTag,{value:"Module"}));function dw(e){"@babel/helpers - typeof";return dw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dw(e)}function dAe(e,t){if(dw(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(dw(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vy(e){var t=dAe(e,"string");return dw(t)==="symbol"?t:String(t)}function hAe(e,t,r){return t=Vy(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function pH(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fH(Object(r),!0).forEach(function(n){hAe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $o(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var mH=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),AI=function(){return Math.random().toString(36).substring(7).split("").join(".")},hw={INIT:"@@redux/INIT"+AI(),REPLACE:"@@redux/REPLACE"+AI(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+AI()}};function fAe(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function u2(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error($o(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error($o(1));return r(u2)(e,t)}if(typeof e!="function")throw new Error($o(2));var i=e,o=t,a=[],s=a,l=!1;function u(){s===a&&(s=a.slice())}function d(){if(l)throw new Error($o(3));return o}function c(p){if(typeof p!="function")throw new Error($o(4));if(l)throw new Error($o(5));var g=!0;return u(),s.push(p),function(){if(g){if(l)throw new Error($o(6));g=!1,u();var b=s.indexOf(p);s.splice(b,1),a=null}}}function h(p){if(!fAe(p))throw new Error($o(7));if(typeof p.type>"u")throw new Error($o(8));if(l)throw new Error($o(9));try{l=!0,o=i(o,p)}finally{l=!1}for(var g=a=s,v=0;v<g.length;v++){var b=g[v];b()}return p}function f(p){if(typeof p!="function")throw new Error($o(10));i=p,h({type:hw.REPLACE})}function m(){var p,g=c;return p={subscribe:function(b){if(typeof b!="object"||b===null)throw new Error($o(11));function y(){b.next&&b.next(d())}y();var x=g(y);return{unsubscribe:x}}},p[mH]=function(){return this},p}return h({type:hw.INIT}),n={dispatch:h,subscribe:c,getState:d,replaceReducer:f},n[mH]=m,n}var pAe=u2;function mAe(e){Object.keys(e).forEach(function(t){var r=e[t],n=r(void 0,{type:hw.INIT});if(typeof n>"u")throw new Error($o(12));if(typeof r(void 0,{type:hw.PROBE_UNKNOWN_ACTION()})>"u")throw new Error($o(13))})}function ej(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var i=t[n];typeof e[i]=="function"&&(r[i]=e[i])}var o=Object.keys(r),a;try{mAe(r)}catch(s){a=s}return function(l,u){if(l===void 0&&(l={}),a)throw a;for(var d=!1,c={},h=0;h<o.length;h++){var f=o[h],m=r[f],p=l[f],g=m(p,u);if(typeof g>"u")throw u&&u.type,new Error($o(14));c[f]=g,d=d||g!==p}return d=d||o.length!==Object.keys(l).length,d?c:l}}function gH(e,t){return function(){return t(e.apply(this,arguments))}}function gAe(e,t){if(typeof e=="function")return gH(e,t);if(typeof e!="object"||e===null)throw new Error($o(16));var r={};for(var n in e){var i=e[n];typeof i=="function"&&(r[n]=gH(i,t))}return r}function fw(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,i){return function(){return n(i.apply(void 0,arguments))}})}function tte(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return function(){var i=n.apply(void 0,arguments),o=function(){throw new Error($o(15))},a={getState:i.getState,dispatch:function(){return o.apply(void 0,arguments)}},s=t.map(function(l){return l(a)});return o=fw.apply(void 0,s)(i.dispatch),pH(pH({},i),{},{dispatch:o})}}}var GE="NOT_FOUND";function vAe(e){var t;return{get:function(n){return t&&e(t.key,n)?t.value:GE},put:function(n,i){t={key:n,value:i}},getEntries:function(){return t?[t]:[]},clear:function(){t=void 0}}}function yAe(e,t){var r=[];function n(s){var l=r.findIndex(function(d){return t(s,d.key)});if(l>-1){var u=r[l];return l>0&&(r.splice(l,1),r.unshift(u)),u.value}return GE}function i(s,l){n(s)===GE&&(r.unshift({key:s,value:l}),r.length>e&&r.pop())}function o(){return r}function a(){r=[]}return{get:n,put:i,getEntries:o,clear:a}}var rte=function(t,r){return t===r};function bAe(e){return function(r,n){if(r===null||n===null||r.length!==n.length)return!1;for(var i=r.length,o=0;o<i;o++)if(!e(r[o],n[o]))return!1;return!0}}function Hy(e,t){var r=typeof t=="object"?t:{equalityCheck:t},n=r.equalityCheck,i=n===void 0?rte:n,o=r.maxSize,a=o===void 0?1:o,s=r.resultEqualityCheck,l=bAe(i),u=a===1?vAe(l):yAe(a,l);function d(){var c=u.get(arguments);if(c===GE){if(c=e.apply(null,arguments),s){var h=u.getEntries(),f=h.find(function(m){return s(m.value,c)});f&&(c=f.value)}u.put(arguments,c)}return c}return d.clearCache=function(){return u.clear()},d}function xAe(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(n){return typeof n=="function"})){var r=t.map(function(n){return typeof n=="function"?"function "+(n.name||"unnamed")+"()":typeof n}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+r+"]")}return t}function nte(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=function(){for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];var u=0,d,c={memoizeOptions:void 0},h=s.pop();if(typeof h=="object"&&(c=h,h=s.pop()),typeof h!="function")throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof h+"]");var f=c,m=f.memoizeOptions,p=m===void 0?r:m,g=Array.isArray(p)?p:[p],v=xAe(s),b=e.apply(void 0,[function(){return u++,h.apply(null,arguments)}].concat(g)),y=e(function(){for(var S=[],w=v.length,_=0;_<w;_++)S.push(v[_].apply(null,arguments));return d=b.apply(null,S),d});return Object.assign(y,{resultFunc:h,memoizedResultFunc:b,dependencies:v,lastResult:function(){return d},recomputations:function(){return u},resetRecomputations:function(){return u=0}}),y};return i}var Uc=nte(Hy),wAe=function(t,r){if(r===void 0&&(r=Uc),typeof t!="object")throw new Error("createStructuredSelector expects first argument to be an object "+("where each property is a selector, instead received a "+typeof t));var n=Object.keys(t),i=r(n.map(function(o){return t[o]}),function(){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return a.reduce(function(l,u,d){return l[n[d]]=u,l},{})});return i};const SAe=Object.freeze(Object.defineProperty({__proto__:null,createSelector:Uc,createSelectorCreator:nte,createStructuredSelector:wAe,defaultEqualityCheck:rte,defaultMemoize:Hy},Symbol.toStringTag,{value:"Module"}));function ite(e){var t=function(n){var i=n.dispatch,o=n.getState;return function(a){return function(s){return typeof s=="function"?s(i,o,e):a(s)}}};return t}var ote=ite();ote.withExtraArgument=ite;const vH=ote;var ate=globalThis&&globalThis.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),MS=globalThis&&globalThis.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(d){return l([u,d])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Qf=globalThis&&globalThis.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},_Ae=Object.defineProperty,CAe=Object.defineProperties,AAe=Object.getOwnPropertyDescriptors,yH=Object.getOwnPropertySymbols,EAe=Object.prototype.hasOwnProperty,MAe=Object.prototype.propertyIsEnumerable,bH=function(e,t,r){return t in e?_Ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},ds=function(e,t){for(var r in t||(t={}))EAe.call(t,r)&&bH(e,r,t[r]);if(yH)for(var n=0,i=yH(t);n<i.length;n++){var r=i[n];MAe.call(t,r)&&bH(e,r,t[r])}return e},EI=function(e,t){return CAe(e,AAe(t))},PS=function(e,t,r){return new Promise(function(n,i){var o=function(l){try{s(r.next(l))}catch(u){i(u)}},a=function(l){try{s(r.throw(l))}catch(u){i(u)}},s=function(l){return l.done?n(l.value):Promise.resolve(l.value).then(o,a)};s((r=r.apply(e,t)).next())})},_d=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Uc.apply(void 0,e),n=function(i){for(var o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];return r.apply(void 0,Qf([Wa(i)?s2(i):i],o))};return n},PAe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?fw:fw.apply(null,arguments)};function Nu(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var r=t;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return t===r}var ste=function(e){ate(t,e);function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=e.apply(this,r)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,Qf([void 0],r[0].concat(this)))):new(t.bind.apply(t,Qf([void 0],r.concat(this))))},t}(Array),lte=function(e){ate(t,e);function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=e.apply(this,r)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,Qf([void 0],r[0].concat(this)))):new(t.bind.apply(t,Qf([void 0],r.concat(this))))},t}(Array);function I3(e){return Ms(e)?lh(e,function(){}):e}function TAe(e){return typeof e!="object"||e==null||Object.isFrozen(e)}function OAe(e){return function(){return function(t){return function(r){return t(r)}}}}function ute(e){var t=typeof e;return e==null||t==="string"||t==="boolean"||t==="number"||Array.isArray(e)||Nu(e)}function cte(e,t,r,n,i,o){t===void 0&&(t=""),r===void 0&&(r=ute),i===void 0&&(i=[]);var a;if(!r(e))return{keyPath:t||"<root>",value:e};if(typeof e!="object"||e===null||o!=null&&o.has(e))return!1;for(var s=n!=null?n(e):Object.entries(e),l=i.length>0,u=function(g,v){var b=t?t+"."+g:g;if(l){var y=i.some(function(x){return x instanceof RegExp?x.test(b):b===x});if(y)return"continue"}if(!r(v))return{value:{keyPath:b,value:v}};if(typeof v=="object"&&(a=cte(v,b,r,n,i,o),a))return{value:a}},d=0,c=s;d<c.length;d++){var h=c[d],f=h[0],m=h[1],p=u(f,m);if(typeof p=="object")return p.value}return o&&dte(e)&&o.add(e),!1}function dte(e){if(!Object.isFrozen(e))return!1;for(var t=0,r=Object.values(e);t<r.length;t++){var n=r[t];if(!(typeof n!="object"||n===null)&&!dte(n))return!1}return!0}function IAe(e){return function(){return function(t){return function(r){return t(r)}}}}function DAe(e){return typeof e=="boolean"}function RAe(){return function(t){return hte(t)}}function hte(e){e===void 0&&(e={});var t=e.thunk,r=t===void 0?!0:t;e.immutableCheck,e.serializableCheck;var n=new ste;return r&&(DAe(r)?n.push(vH):n.push(vH.withExtraArgument(r.extraArgument))),n}var kAe=!0;function fte(e){var t=RAe(),r=e||{},n=r.reducer,i=n===void 0?void 0:n,o=r.middleware,a=o===void 0?t():o,s=r.devTools,l=s===void 0?!0:s,u=r.preloadedState,d=u===void 0?void 0:u,c=r.enhancers,h=c===void 0?void 0:c,f;if(typeof i=="function")f=i;else if(Nu(i))f=ej(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var m=a;typeof m=="function"&&(m=m(t));var p=tte.apply(void 0,m),g=fw;l&&(g=PAe(ds({trace:!kAe},typeof l=="object"&&l)));var v=new lte(p),b=v;Array.isArray(h)?b=Qf([p],h):typeof h=="function"&&(b=h(v));var y=g.apply(void 0,b);return u2(f,d,y)}function ca(e,t){function r(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(t){var o=t.apply(void 0,n);if(!o)throw new Error("prepareAction did not return an object");return ds(ds({type:e,payload:o.payload},"meta"in o&&{meta:o.meta}),"error"in o&&{error:o.error})}return{type:e,payload:n[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(n){return n.type===e},r}function tj(e){return Nu(e)&&"type"in e}function pte(e){return tj(e)&&typeof e.type=="string"&&Object.keys(e).every(LAe)}function LAe(e){return["type","payload","error","meta"].indexOf(e)>-1}function NAe(e){return""+e}function mte(e){var t={},r=[],n,i={addCase:function(o,a){var s=typeof o=="string"?o:o.type;if(s in t)throw new Error("addCase cannot be called with two reducers for the same action type");return t[s]=a,i},addMatcher:function(o,a){return r.push({matcher:o,reducer:a}),i},addDefaultCase:function(o){return n=o,i}};return e(i),[t,r,n]}function zAe(e){return typeof e=="function"}function gte(e,t,r,n){r===void 0&&(r=[]);var i=typeof t=="function"?mte(t):[t,r,n],o=i[0],a=i[1],s=i[2],l;if(zAe(e))l=function(){return I3(e())};else{var u=I3(e);l=function(){return u}}function d(c,h){c===void 0&&(c=l());var f=Qf([o[h.type]],a.filter(function(m){var p=m.matcher;return p(h)}).map(function(m){var p=m.reducer;return p}));return f.filter(function(m){return!!m}).length===0&&(f=[s]),f.reduce(function(m,p){if(p)if(Wa(m)){var g=m,v=p(g,h);return v===void 0?m:v}else{if(Ms(m))return lh(m,function(b){return p(b,h)});var v=p(m,h);if(v===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}return m},c)}return d.getInitialState=l,d}function BAe(e,t){return e+"/"+t}function Np(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var r=typeof e.initialState=="function"?e.initialState:I3(e.initialState),n=e.reducers||{},i=Object.keys(n),o={},a={},s={};i.forEach(function(d){var c=n[d],h=BAe(t,d),f,m;"reducer"in c?(f=c.reducer,m=c.prepare):f=c,o[d]=f,a[h]=f,s[d]=m?ca(h,m):ca(h)});function l(){var d=typeof e.extraReducers=="function"?mte(e.extraReducers):[e.extraReducers],c=d[0],h=c===void 0?{}:c,f=d[1],m=f===void 0?[]:f,p=d[2],g=p===void 0?void 0:p,v=ds(ds({},h),a);return gte(r,function(b){for(var y in v)b.addCase(y,v[y]);for(var x=0,S=m;x<S.length;x++){var w=S[x];b.addMatcher(w.matcher,w.reducer)}g&&b.addDefaultCase(g)})}var u;return{name:t,reducer:function(d,c){return u||(u=l()),u(d,c)},actions:s,caseReducers:o,getInitialState:function(){return u||(u=l()),u.getInitialState()}}}function FAe(){return{ids:[],entities:{}}}function jAe(){function e(t){return t===void 0&&(t={}),Object.assign(FAe(),t)}return{getInitialState:e}}function UAe(){function e(t){var r=function(u){return u.ids},n=function(u){return u.entities},i=_d(r,n,function(u,d){return u.map(function(c){return d[c]})}),o=function(u,d){return d},a=function(u,d){return u[d]},s=_d(r,function(u){return u.length});if(!t)return{selectIds:r,selectEntities:n,selectAll:i,selectTotal:s,selectById:_d(n,o,a)};var l=_d(t,n);return{selectIds:_d(t,r),selectEntities:l,selectAll:_d(t,i),selectTotal:_d(t,s),selectById:_d(l,o,a)}}return{getSelectors:e}}function $Ae(e){var t=Ei(function(r,n){return e(n)});return function(n){return t(n,void 0)}}function Ei(e){return function(r,n){function i(a){return pte(a)}var o=function(a){i(n)?e(n.payload,a):e(n,a)};return Wa(r)?(o(r),r):lh(r,o)}}function c1(e,t){var r=t(e);return r}function xm(e){return Array.isArray(e)||(e=Object.values(e)),e}function vte(e,t,r){e=xm(e);for(var n=[],i=[],o=0,a=e;o<a.length;o++){var s=a[o],l=c1(s,t);l in r.entities?i.push({id:l,changes:s}):n.push(s)}return[n,i]}function yte(e){function t(m,p){var g=c1(m,e);g in p.entities||(p.ids.push(g),p.entities[g]=m)}function r(m,p){m=xm(m);for(var g=0,v=m;g<v.length;g++){var b=v[g];t(b,p)}}function n(m,p){var g=c1(m,e);g in p.entities||p.ids.push(g),p.entities[g]=m}function i(m,p){m=xm(m);for(var g=0,v=m;g<v.length;g++){var b=v[g];n(b,p)}}function o(m,p){m=xm(m),p.ids=[],p.entities={},r(m,p)}function a(m,p){return s([m],p)}function s(m,p){var g=!1;m.forEach(function(v){v in p.entities&&(delete p.entities[v],g=!0)}),g&&(p.ids=p.ids.filter(function(v){return v in p.entities}))}function l(m){Object.assign(m,{ids:[],entities:{}})}function u(m,p,g){var v=g.entities[p.id],b=Object.assign({},v,p.changes),y=c1(b,e),x=y!==p.id;return x&&(m[p.id]=y,delete g.entities[p.id]),g.entities[y]=b,x}function d(m,p){return c([m],p)}function c(m,p){var g={},v={};m.forEach(function(x){x.id in p.entities&&(v[x.id]={id:x.id,changes:ds(ds({},v[x.id]?v[x.id].changes:null),x.changes)})}),m=Object.values(v);var b=m.length>0;if(b){var y=m.filter(function(x){return u(g,x,p)}).length>0;y&&(p.ids=Object.keys(p.entities))}}function h(m,p){return f([m],p)}function f(m,p){var g=vte(m,e,p),v=g[0],b=g[1];c(b,p),r(v,p)}return{removeAll:$Ae(l),addOne:Ei(t),addMany:Ei(r),setOne:Ei(n),setMany:Ei(i),setAll:Ei(o),updateOne:Ei(d),updateMany:Ei(c),upsertOne:Ei(h),upsertMany:Ei(f),removeOne:Ei(a),removeMany:Ei(s)}}function VAe(e,t){var r=yte(e),n=r.removeOne,i=r.removeMany,o=r.removeAll;function a(b,y){return s([b],y)}function s(b,y){b=xm(b);var x=b.filter(function(S){return!(c1(S,e)in y.entities)});x.length!==0&&g(x,y)}function l(b,y){return u([b],y)}function u(b,y){b=xm(b),b.length!==0&&g(b,y)}function d(b,y){b=xm(b),y.entities={},y.ids=[],s(b,y)}function c(b,y){return h([b],y)}function h(b,y){for(var x=!1,S=0,w=b;S<w.length;S++){var _=w[S],C=y.entities[_.id];if(C){x=!0,Object.assign(C,_.changes);var E=e(C);_.id!==E&&(delete y.entities[_.id],y.entities[E]=C)}}x&&v(y)}function f(b,y){return m([b],y)}function m(b,y){var x=vte(b,e,y),S=x[0],w=x[1];h(w,y),s(S,y)}function p(b,y){if(b.length!==y.length)return!1;for(var x=0;x<b.length&&x<y.length;x++)if(b[x]!==y[x])return!1;return!0}function g(b,y){b.forEach(function(x){y.entities[e(x)]=x}),v(y)}function v(b){var y=Object.values(b.entities);y.sort(t);var x=y.map(e),S=b.ids;p(S,x)||(b.ids=x)}return{removeOne:n,removeMany:i,removeAll:o,addOne:Ei(a),updateOne:Ei(c),upsertOne:Ei(f),setOne:Ei(l),setMany:Ei(u),setAll:Ei(d),addMany:Ei(s),updateMany:Ei(h),upsertMany:Ei(m)}}function HAe(e){e===void 0&&(e={});var t=ds({sortComparer:!1,selectId:function(s){return s.id}},e),r=t.selectId,n=t.sortComparer,i=jAe(),o=UAe(),a=n?VAe(r,n):yte(r);return ds(ds(ds({selectId:r,sortComparer:n},i),o),a)}var GAe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",c2=function(e){e===void 0&&(e=21);for(var t="",r=e;r--;)t+=GAe[Math.random()*64|0];return t},WAe=["name","message","stack","code"],MI=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),xH=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),bte=function(e){if(typeof e=="object"&&e!==null){for(var t={},r=0,n=WAe;r<n.length;r++){var i=n[r];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}},D3=function(){function e(t,r,n){var i=ca(t+"/fulfilled",function(u,d,c,h){return{payload:u,meta:EI(ds({},h||{}),{arg:c,requestId:d,requestStatus:"fulfilled"})}}),o=ca(t+"/pending",function(u,d,c){return{payload:void 0,meta:EI(ds({},c||{}),{arg:d,requestId:u,requestStatus:"pending"})}}),a=ca(t+"/rejected",function(u,d,c,h,f){return{payload:h,error:(n&&n.serializeError||bte)(u||"Rejected"),meta:EI(ds({},f||{}),{arg:c,requestId:d,rejectedWithValue:!!h,requestStatus:"rejected",aborted:(u==null?void 0:u.name)==="AbortError",condition:(u==null?void 0:u.name)==="ConditionError"})}}),s=typeof AbortController<"u"?AbortController:function(){function u(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return u.prototype.abort=function(){},u}();function l(u){return function(d,c,h){var f=n!=null&&n.idGenerator?n.idGenerator(u):c2(),m=new s,p;function g(b){p=b,m.abort()}var v=function(){return PS(this,null,function(){var b,y,x,S,w,_,C;return MS(this,function(E){switch(E.label){case 0:return E.trys.push([0,4,,5]),S=(b=n==null?void 0:n.condition)==null?void 0:b.call(n,u,{getState:c,extra:h}),qAe(S)?[4,S]:[3,2];case 1:S=E.sent(),E.label=2;case 2:if(S===!1||m.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return w=new Promise(function(A,M){return m.signal.addEventListener("abort",function(){return M({name:"AbortError",message:p||"Aborted"})})}),d(o(f,u,(y=n==null?void 0:n.getPendingMeta)==null?void 0:y.call(n,{requestId:f,arg:u},{getState:c,extra:h}))),[4,Promise.race([w,Promise.resolve(r(u,{dispatch:d,getState:c,extra:h,requestId:f,signal:m.signal,abort:g,rejectWithValue:function(A,M){return new MI(A,M)},fulfillWithValue:function(A,M){return new xH(A,M)}})).then(function(A){if(A instanceof MI)throw A;return A instanceof xH?i(A.payload,f,u,A.meta):i(A,f,u)})])];case 3:return x=E.sent(),[3,5];case 4:return _=E.sent(),x=_ instanceof MI?a(null,f,u,_.payload,_.meta):a(_,f,u),[3,5];case 5:return C=n&&!n.dispatchConditionRejection&&a.match(x)&&x.meta.condition,C||d(x),[2,x]}})})}();return Object.assign(v,{abort:g,requestId:f,arg:u,unwrap:function(){return v.then(xte)}})}}return Object.assign(l,{pending:o,rejected:a,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e}();function xte(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function qAe(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var KAe=function(e){return e&&typeof e.match=="function"},wte=function(e,t){return KAe(e)?e.match(t):e(t)};function ag(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(r){return e.some(function(n){return wte(n,r)})}}function iy(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(r){return e.every(function(n){return wte(n,r)})}}function d2(e,t){if(!e||!e.meta)return!1;var r=typeof e.meta.requestId=="string",n=t.indexOf(e.meta.requestStatus)>-1;return r&&n}function TS(e){return typeof e[0]=="function"&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function h2(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?function(r){return d2(r,["pending"])}:TS(e)?function(r){var n=e.map(function(o){return o.pending}),i=ag.apply(void 0,n);return i(r)}:h2()(e[0])}function Gy(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?function(r){return d2(r,["rejected"])}:TS(e)?function(r){var n=e.map(function(o){return o.rejected}),i=ag.apply(void 0,n);return i(r)}:Gy()(e[0])}function OS(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=function(n){return n&&n.meta&&n.meta.rejectedWithValue};return e.length===0?function(n){var i=iy(Gy.apply(void 0,e),r);return i(n)}:TS(e)?function(n){var i=iy(Gy.apply(void 0,e),r);return i(n)}:OS()(e[0])}function hp(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?function(r){return d2(r,["fulfilled"])}:TS(e)?function(r){var n=e.map(function(o){return o.fulfilled}),i=ag.apply(void 0,n);return i(r)}:hp()(e[0])}function WE(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?function(r){return d2(r,["pending","fulfilled","rejected"])}:TS(e)?function(r){for(var n=[],i=0,o=e;i<o.length;i++){var a=o[i];n.push(a.pending,a.rejected,a.fulfilled)}var s=ag.apply(void 0,n);return s(r)}:WE()(e[0])}var rj=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},R3=function(){},Ste=function(e,t){return t===void 0&&(t=R3),e.catch(t),e},_te=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},oy=function(e,t){var r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},XAe="task",Cte="listener",Ate="completed",nj="cancelled",YAe="task-"+nj,QAe="task-"+Ate,Ete=Cte+"-"+nj,ZAe=Cte+"-"+Ate,IS=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=XAe+" "+nj+" (reason: "+t+")"}return e}(),ay=function(e){if(e.aborted)throw new IS(e.reason)};function Mte(e,t){var r=R3;return new Promise(function(n,i){var o=function(){return i(new IS(e.reason))};if(e.aborted){o();return}r=_te(e,o),t.finally(function(){return r()}).then(n,i)}).finally(function(){r=R3})}var JAe=function(e,t){return PS(void 0,null,function(){var r,n;return MS(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return r=i.sent(),[2,{status:"ok",value:r}];case 3:return n=i.sent(),[2,{status:n instanceof IS?"cancelled":"rejected",error:n}];case 4:return t==null||t(),[7];case 5:return[2]}})})},qE=function(e){return function(t){return Ste(Mte(e,t).then(function(r){return ay(e),r}))}},Pte=function(e){var t=qE(e);return function(r){return t(new Promise(function(n){return setTimeout(n,r)}))}},eEe=Object.assign,wH={},DS="listenerMiddleware",tEe=function(e){var t=function(r){return _te(e,function(){return oy(r,e.reason)})};return function(r){rj(r,"taskExecutor");var n=new AbortController;t(n);var i=JAe(function(){return PS(void 0,null,function(){var o;return MS(this,function(a){switch(a.label){case 0:return ay(e),ay(n.signal),[4,r({pause:qE(n.signal),delay:Pte(n.signal),signal:n.signal})];case 1:return o=a.sent(),ay(n.signal),[2,o]}})})},function(){return oy(n,QAe)});return{result:qE(e)(i),cancel:function(){oy(n,YAe)}}}},rEe=function(e,t){var r=function(n,i){return PS(void 0,null,function(){var o,a,s,l;return MS(this,function(u){switch(u.label){case 0:ay(t),o=function(){},a=new Promise(function(d,c){var h=e({predicate:n,effect:function(f,m){m.unsubscribe(),d([f,m.getState(),m.getOriginalState()])}});o=function(){h(),c()}}),s=[a],i!=null&&s.push(new Promise(function(d){return setTimeout(d,i,null)})),u.label=1;case 1:return u.trys.push([1,,3,4]),[4,Mte(t,Promise.race(s))];case 2:return l=u.sent(),ay(t),[2,l];case 3:return o(),[7];case 4:return[2]}})})};return function(n,i){return Ste(r(n,i))}},Tte=function(e){var t=e.type,r=e.actionCreator,n=e.matcher,i=e.predicate,o=e.effect;if(t)i=ca(t).match;else if(r)t=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return rj(o,"options.listener"),{predicate:i,type:t,effect:o}},nEe=function(e){var t=Tte(e),r=t.type,n=t.predicate,i=t.effect,o=c2(),a={id:o,effect:i,type:r,predicate:n,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return a},k3=function(e){e.pending.forEach(function(t){oy(t,Ete)})},iEe=function(e){return function(){e.forEach(k3),e.clear()}},SH=function(e,t,r){try{e(t,r)}catch(n){setTimeout(function(){throw n},0)}},Ote=ca(DS+"/add"),Ite=ca(DS+"/removeAll"),Dte=ca(DS+"/remove"),oEe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,Qf([DS+"/error"],e))};function aEe(e){var t=this;e===void 0&&(e={});var r=new Map,n=e.extra,i=e.onError,o=i===void 0?oEe:i;rj(o,"onError");var a=function(f){return f.unsubscribe=function(){return r.delete(f.id)},r.set(f.id,f),function(m){f.unsubscribe(),m!=null&&m.cancelActive&&k3(f)}},s=function(f){for(var m=0,p=Array.from(r.values());m<p.length;m++){var g=p[m];if(f(g))return g}},l=function(f){var m=s(function(p){return p.effect===f.effect});return m||(m=nEe(f)),a(m)},u=function(f){var m=Tte(f),p=m.type,g=m.effect,v=m.predicate,b=s(function(y){var x=typeof p=="string"?y.type===p:y.predicate===v;return x&&y.effect===g});return b&&(b.unsubscribe(),f.cancelActive&&k3(b)),!!b},d=function(f,m,p,g){return PS(t,null,function(){var v,b,y;return MS(this,function(x){switch(x.label){case 0:v=new AbortController,b=rEe(l,v.signal),x.label=1;case 1:return x.trys.push([1,3,4,5]),f.pending.add(v),[4,Promise.resolve(f.effect(m,eEe({},p,{getOriginalState:g,condition:function(S,w){return b(S,w).then(Boolean)},take:b,delay:Pte(v.signal),pause:qE(v.signal),extra:n,signal:v.signal,fork:tEe(v.signal),unsubscribe:f.unsubscribe,subscribe:function(){r.set(f.id,f)},cancelActiveListeners:function(){f.pending.forEach(function(S,w,_){S!==v&&(oy(S,Ete),_.delete(S))})}})))];case 2:return x.sent(),[3,5];case 3:return y=x.sent(),y instanceof IS||SH(o,y,{raisedBy:"effect"}),[3,5];case 4:return oy(v,ZAe),f.pending.delete(v),[7];case 5:return[2]}})})},c=iEe(r),h=function(f){return function(m){return function(p){if(!tj(p))return m(p);if(Ote.match(p))return l(p.payload);if(Ite.match(p)){c();return}if(Dte.match(p))return u(p.payload);var g=f.getState(),v=function(){if(g===wH)throw new Error(DS+": getOriginalState can only be called synchronously");return g},b;try{if(b=m(p),r.size>0)for(var y=f.getState(),x=Array.from(r.values()),S=0,w=x;S<w.length;S++){var _=w[S],C=!1;try{C=_.predicate(p,y,g)}catch(E){C=!1,SH(o,E,{raisedBy:"predicate"})}C&&d(_,p,f,v)}}finally{g=wH}return b}}};return{middleware:h,startListening:l,stopListening:u,clearListeners:c}}var im="RTK_autoBatch",UA=function(){return function(e){var t;return{payload:e,meta:(t={},t[im]=!0,t)}}},_H,sEe=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis):function(e){return(_H||(_H=Promise.resolve())).then(e).catch(function(t){return setTimeout(function(){throw t},0)})},Rte=function(e){return function(t){setTimeout(t,e)}},lEe=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Rte(10),uEe=function(e){return e===void 0&&(e={type:"raf"}),function(t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=t.apply(void 0,r),o=!0,a=!1,s=!1,l=new Set,u=e.type==="tick"?sEe:e.type==="raf"?lEe:e.type==="callback"?e.queueNotification:Rte(e.timeout),d=function(){s=!1,a&&(a=!1,l.forEach(function(c){return c()}))};return Object.assign({},i,{subscribe:function(c){var h=function(){return o&&c()},f=i.subscribe(h);return l.add(c),function(){f(),l.delete(c)}},dispatch:function(c){var h;try{return o=!((h=c==null?void 0:c.meta)!=null&&h[im]),a=!o,a&&(s||(s=!0,u(d))),i.dispatch(c)}finally{o=!0}}})}}};YF();const cEe=Object.freeze(Object.defineProperty({__proto__:null,EnhancerArray:lte,MiddlewareArray:ste,SHOULD_AUTOBATCH:im,TaskAbortError:IS,__DO_NOT_USE__ActionTypes:hw,addListener:Ote,applyMiddleware:tte,autoBatchEnhancer:uEe,bindActionCreators:gAe,clearAllListeners:Ite,combineReducers:ej,compose:fw,configureStore:fte,createAction:ca,createAsyncThunk:D3,createDraftSafeSelector:_d,createEntityAdapter:HAe,createImmutableStateInvariantMiddleware:OAe,createListenerMiddleware:aEe,createNextState:lh,createReducer:gte,createSelector:Uc,createSerializableStateInvariantMiddleware:IAe,createSlice:Np,createStore:u2,current:s2,findNonSerializableValue:cte,freeze:ES,getDefaultMiddleware:hte,getType:NAe,isAction:tj,isAllOf:iy,isAnyOf:ag,isAsyncThunkAction:WE,isDraft:Wa,isFluxStandardAction:pte,isFulfilled:hp,isImmutableDefault:TAe,isPending:h2,isPlain:ute,isPlainObject:Nu,isRejected:Gy,isRejectedWithValue:OS,legacy_createStore:pAe,miniSerializeError:bte,nanoid:c2,original:WF,prepareAutoBatched:UA,removeListener:Dte,unwrapResult:xte},Symbol.toStringTag,{value:"Module"}));var KE=globalThis&&globalThis.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(d){return l([u,d])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},XE=globalThis&&globalThis.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},dEe=Object.defineProperty,hEe=Object.defineProperties,fEe=Object.getOwnPropertyDescriptors,YE=Object.getOwnPropertySymbols,kte=Object.prototype.hasOwnProperty,Lte=Object.prototype.propertyIsEnumerable,CH=function(e,t,r){return t in e?dEe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},Mi=function(e,t){for(var r in t||(t={}))kte.call(t,r)&&CH(e,r,t[r]);if(YE)for(var n=0,i=YE(t);n<i.length;n++){var r=i[n];Lte.call(t,r)&&CH(e,r,t[r])}return e},Oc=function(e,t){return hEe(e,fEe(t))},AH=function(e,t){var r={};for(var n in e)kte.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&YE)for(var i=0,o=YE(e);i<o.length;i++){var n=o[i];t.indexOf(n)<0&&Lte.call(e,n)&&(r[n]=e[n])}return r},QE=function(e,t,r){return new Promise(function(n,i){var o=function(l){try{s(r.next(l))}catch(u){i(u)}},a=function(l){try{s(r.throw(l))}catch(u){i(u)}},s=function(l){return l.done?n(l.value):Promise.resolve(l.value).then(o,a)};s((r=r.apply(e,t)).next())})},Yn;(function(e){e.uninitialized="uninitialized",e.pending="pending",e.fulfilled="fulfilled",e.rejected="rejected"})(Yn||(Yn={}));function pEe(e){return{status:e,isUninitialized:e===Yn.uninitialized,isLoading:e===Yn.pending,isSuccess:e===Yn.fulfilled,isError:e===Yn.rejected}}function mEe(e){return new RegExp("(^|:)//").test(e)}var gEe=function(e){return e.replace(/\/$/,"")},vEe=function(e){return e.replace(/^\//,"")};function yEe(e,t){if(!e)return t;if(!t)return e;if(mEe(t))return t;var r=e.endsWith("/")||!t.startsWith("?")?"/":"";return e=gEe(e),t=vEe(t),""+e+r+t}var EH=function(e){return[].concat.apply([],e)};function bEe(){return typeof navigator>"u"||navigator.onLine===void 0?!0:navigator.onLine}function xEe(){return typeof document>"u"?!0:document.visibilityState!=="hidden"}var MH=Nu;function Nte(e,t){if(e===t||!(MH(e)&&MH(t)||Array.isArray(e)&&Array.isArray(t)))return t;for(var r=Object.keys(t),n=Object.keys(e),i=r.length===n.length,o=Array.isArray(t)?[]:{},a=0,s=r;a<s.length;a++){var l=s[a];o[l]=Nte(e[l],t[l]),i&&(i=e[l]===o[l])}return i?e:o}var PH=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return fetch.apply(void 0,e)},wEe=function(e){return e.status>=200&&e.status<=299},SEe=function(e){return/ion\/(vnd\.api\+)?json/.test(e.get("content-type")||"")};function TH(e){if(!Nu(e))return e;for(var t=Mi({},e),r=0,n=Object.entries(t);r<n.length;r++){var i=n[r],o=i[0],a=i[1];a===void 0&&delete t[o]}return t}function _Ee(e){var t=this;e===void 0&&(e={});var r=e,n=r.baseUrl,i=r.prepareHeaders,o=i===void 0?function(y){return y}:i,a=r.fetchFn,s=a===void 0?PH:a,l=r.paramsSerializer,u=r.isJsonContentType,d=u===void 0?SEe:u,c=r.jsonContentType,h=c===void 0?"application/json":c,f=r.jsonReplacer,m=r.timeout,p=r.responseHandler,g=r.validateStatus,v=AH(r,["baseUrl","prepareHeaders","fetchFn","paramsSerializer","isJsonContentType","jsonContentType","jsonReplacer","timeout","responseHandler","validateStatus"]);return typeof fetch>"u"&&s===PH&&console.warn("Warning: `fetch` is not available. Please supply a custom `fetchFn` property to use `fetchBaseQuery` on SSR environments."),function(y,x){return QE(t,null,function(){var S,w,_,C,E,A,M,I,O,T,D,N,k,R,z,j,$,U,H,V,Q,X,ne,J,W,te,Z,q,ie,he,ae,be,ye,Se,me,Pe;return KE(this,function(Ae){switch(Ae.label){case 0:return S=x.signal,w=x.getState,_=x.extra,C=x.endpoint,E=x.forced,A=x.type,I=typeof y=="string"?{url:y}:y,O=I.url,T=I.headers,D=T===void 0?new Headers(v.headers):T,N=I.params,k=N===void 0?void 0:N,R=I.responseHandler,z=R===void 0?p??"json":R,j=I.validateStatus,$=j===void 0?g??wEe:j,U=I.timeout,H=U===void 0?m:U,V=AH(I,["url","headers","params","responseHandler","validateStatus","timeout"]),Q=Mi(Oc(Mi({},v),{signal:S}),V),D=new Headers(TH(D)),X=Q,[4,o(D,{getState:w,extra:_,endpoint:C,forced:E,type:A})];case 1:X.headers=Ae.sent()||D,ne=function(K){return typeof K=="object"&&(Nu(K)||Array.isArray(K)||typeof K.toJSON=="function")},!Q.headers.has("content-type")&&ne(Q.body)&&Q.headers.set("content-type",h),ne(Q.body)&&d(Q.headers)&&(Q.body=JSON.stringify(Q.body,f)),k&&(J=~O.indexOf("?")?"&":"?",W=l?l(k):new URLSearchParams(TH(k)),O+=J+W),O=yEe(n,O),te=new Request(O,Q),Z=te.clone(),M={request:Z},ie=!1,he=H&&setTimeout(function(){ie=!0,x.abort()},H),Ae.label=2;case 2:return Ae.trys.push([2,4,5,6]),[4,s(te)];case 3:return q=Ae.sent(),[3,6];case 4:return ae=Ae.sent(),[2,{error:{status:ie?"TIMEOUT_ERROR":"FETCH_ERROR",error:String(ae)},meta:M}];case 5:return he&&clearTimeout(he),[7];case 6:be=q.clone(),M.response=be,Se="",Ae.label=7;case 7:return Ae.trys.push([7,9,,10]),[4,Promise.all([b(q,z).then(function(K){return ye=K},function(K){return me=K}),be.text().then(function(K){return Se=K},function(){})])];case 8:if(Ae.sent(),me)throw me;return[3,10];case 9:return Pe=Ae.sent(),[2,{error:{status:"PARSING_ERROR",originalStatus:q.status,data:Se,error:String(Pe)},meta:M}];case 10:return[2,$(q,ye)?{data:ye,meta:M}:{error:{status:q.status,data:ye},meta:M}]}})})};function b(y,x){return QE(this,null,function(){var S;return KE(this,function(w){switch(w.label){case 0:return typeof x=="function"?[2,x(y)]:(x==="content-type"&&(x=d(y.headers)?"json":"text"),x!=="json"?[3,2]:[4,y.text()]);case 1:return S=w.sent(),[2,S.length?JSON.parse(S):null];case 2:return[2,y.text()]}})})}}var OH=function(){function e(t,r){r===void 0&&(r=void 0),this.value=t,this.meta=r}return e}(),ij=ca("__rtkq/focused"),zte=ca("__rtkq/unfocused"),oj=ca("__rtkq/online"),Bte=ca("__rtkq/offline"),Xc;(function(e){e.query="query",e.mutation="mutation"})(Xc||(Xc={}));function Fte(e){return e.type===Xc.query}function CEe(e){return e.type===Xc.mutation}function jte(e,t,r,n,i,o){return AEe(e)?e(t,r,n,i).map(L3).map(o):Array.isArray(e)?e.map(L3).map(o):[]}function AEe(e){return typeof e=="function"}function L3(e){return typeof e=="string"?{type:e}:e}function PI(e){return e!=null}var pw=Symbol("forceQueryFn"),N3=function(e){return typeof e[pw]=="function"};function EEe(e){var t=e.serializeQueryArgs,r=e.queryThunk,n=e.mutationThunk,i=e.api,o=e.context,a=new Map,s=new Map,l=i.internalActions,u=l.unsubscribeQueryResult,d=l.removeMutationResult,c=l.updateSubscriptionOptions;return{buildInitiateQuery:b,buildInitiateMutation:y,getRunningQueryThunk:m,getRunningMutationThunk:p,getRunningQueriesThunk:g,getRunningMutationsThunk:v,getRunningOperationPromises:f,removalWarning:h};function h(){throw new Error(`This method had to be removed due to a conceptual bug in RTK.
       Please see https://github.com/reduxjs/redux-toolkit/pull/2481 for details.
       See https://redux-toolkit.js.org/rtk-query/usage/server-side-rendering for new guidance on SSR.`)}function f(){typeof process<"u";var x=function(S){return Array.from(S.values()).flatMap(function(w){return w?Object.values(w):[]})};return XE(XE([],x(a)),x(s)).filter(PI)}function m(x,S){return function(w){var _,C=o.endpointDefinitions[x],E=t({queryArgs:S,endpointDefinition:C,endpointName:x});return(_=a.get(w))==null?void 0:_[E]}}function p(x,S){return function(w){var _;return(_=s.get(w))==null?void 0:_[S]}}function g(){return function(x){return Object.values(a.get(x)||{}).filter(PI)}}function v(){return function(x){return Object.values(s.get(x)||{}).filter(PI)}}function b(x,S){var w=function(_,C){var E=C===void 0?{}:C,A=E.subscribe,M=A===void 0?!0:A,I=E.forceRefetch,O=E.subscriptionOptions,T=pw,D=E[T];return function(N,k){var R,z,j=t({queryArgs:_,endpointDefinition:S,endpointName:x}),$=r((R={type:"query",subscribe:M,forceRefetch:I,subscriptionOptions:O,endpointName:x,originalArgs:_,queryCacheKey:j},R[pw]=D,R)),U=i.endpoints[x].select(_),H=N($),V=U(k()),Q=H.requestId,X=H.abort,ne=V.requestId!==Q,J=(z=a.get(N))==null?void 0:z[j],W=function(){return U(k())},te=Object.assign(D?H.then(W):ne&&!J?Promise.resolve(V):Promise.all([J,H]).then(W),{arg:_,requestId:Q,subscriptionOptions:O,queryCacheKey:j,abort:X,unwrap:function(){return QE(this,null,function(){var q;return KE(this,function(ie){switch(ie.label){case 0:return[4,te];case 1:if(q=ie.sent(),q.isError)throw q.error;return[2,q.data]}})})},refetch:function(){return N(w(_,{subscribe:!1,forceRefetch:!0}))},unsubscribe:function(){M&&N(u({queryCacheKey:j,requestId:Q}))},updateSubscriptionOptions:function(q){te.subscriptionOptions=q,N(c({endpointName:x,requestId:Q,queryCacheKey:j,options:q}))}});if(!J&&!ne&&!D){var Z=a.get(N)||{};Z[j]=te,a.set(N,Z),te.then(function(){delete Z[j],Object.keys(Z).length||a.delete(N)})}return te}};return w}function y(x){return function(S,w){var _=w===void 0?{}:w,C=_.track,E=C===void 0?!0:C,A=_.fixedCacheKey;return function(M,I){var O=n({type:"mutation",endpointName:x,originalArgs:S,track:E,fixedCacheKey:A}),T=M(O),D=T.requestId,N=T.abort,k=T.unwrap,R=T.unwrap().then(function(U){return{data:U}}).catch(function(U){return{error:U}}),z=function(){M(d({requestId:D,fixedCacheKey:A}))},j=Object.assign(R,{arg:T.arg,requestId:D,abort:N,unwrap:k,unsubscribe:z,reset:z}),$=s.get(M)||{};return s.set(M,$),$[D]=j,j.then(function(){delete $[D],Object.keys($).length||s.delete(M)}),A&&($[A]=j,j.then(function(){$[A]===j&&(delete $[A],Object.keys($).length||s.delete(M))})),j}}}}function IH(e){return e}function MEe(e){var t=this,r=e.reducerPath,n=e.baseQuery,i=e.context.endpointDefinitions,o=e.serializeQueryArgs,a=e.api,s=function(y,x,S){return function(w){var _=i[y];w(a.internalActions.queryResultPatched({queryCacheKey:o({queryArgs:x,endpointDefinition:_,endpointName:y}),patches:S}))}},l=function(y,x,S){return function(w,_){var C,E,A=a.endpoints[y].select(x)(_()),M={patches:[],inversePatches:[],undo:function(){return w(a.util.patchQueryData(y,x,M.inversePatches))}};if(A.status===Yn.uninitialized)return M;if("data"in A)if(Ms(A.data)){var I=JF(A.data,S),O=I[1],T=I[2];(C=M.patches).push.apply(C,O),(E=M.inversePatches).push.apply(E,T)}else{var D=S(A.data);M.patches.push({op:"replace",path:[],value:D}),M.inversePatches.push({op:"replace",path:[],value:A.data})}return w(a.util.patchQueryData(y,x,M.patches)),M}},u=function(y,x,S){return function(w){var _;return w(a.endpoints[y].initiate(x,(_={subscribe:!1,forceRefetch:!0},_[pw]=function(){return{data:S}},_)))}},d=function(y,x){return QE(t,[y,x],function(S,w){var _,C,E,A,M,I,O,T,D,N,k,R,z,j,$,U,H,V,Q=w.signal,X=w.abort,ne=w.rejectWithValue,J=w.fulfillWithValue,W=w.dispatch,te=w.getState,Z=w.extra;return KE(this,function(q){switch(q.label){case 0:_=i[S.endpointName],q.label=1;case 1:return q.trys.push([1,8,,13]),C=IH,E=void 0,A={signal:Q,abort:X,dispatch:W,getState:te,extra:Z,endpoint:S.endpointName,type:S.type,forced:S.type==="query"?c(S,te()):void 0},M=S.type==="query"?S[pw]:void 0,M?(E=M(),[3,6]):[3,2];case 2:return _.query?[4,n(_.query(S.originalArgs),A,_.extraOptions)]:[3,4];case 3:return E=q.sent(),_.transformResponse&&(C=_.transformResponse),[3,6];case 4:return[4,_.queryFn(S.originalArgs,A,_.extraOptions,function(ie){return n(ie,A,_.extraOptions)})];case 5:E=q.sent(),q.label=6;case 6:if(typeof process<"u",E.error)throw new OH(E.error,E.meta);return k=J,[4,C(E.data,E.meta,S.originalArgs)];case 7:return[2,k.apply(void 0,[q.sent(),(H={fulfilledTimeStamp:Date.now(),baseQueryMeta:E.meta},H[im]=!0,H)])];case 8:if(R=q.sent(),z=R,!(z instanceof OH))return[3,12];j=IH,_.query&&_.transformErrorResponse&&(j=_.transformErrorResponse),q.label=9;case 9:return q.trys.push([9,11,,12]),$=ne,[4,j(z.value,z.meta,S.originalArgs)];case 10:return[2,$.apply(void 0,[q.sent(),(V={baseQueryMeta:z.meta},V[im]=!0,V)])];case 11:return U=q.sent(),z=U,[3,12];case 12:throw typeof process<"u",console.error(z),z;case 13:return[2]}})})};function c(y,x){var S,w,_,C,E=(w=(S=x[r])==null?void 0:S.queries)==null?void 0:w[y.queryCacheKey],A=(_=x[r])==null?void 0:_.config.refetchOnMountOrArgChange,M=E==null?void 0:E.fulfilledTimeStamp,I=(C=y.forceRefetch)!=null?C:y.subscribe&&A;return I?I===!0||(Number(new Date)-Number(M))/1e3>=I:!1}var h=D3(r+"/executeQuery",d,{getPendingMeta:function(){var y;return y={startedTimeStamp:Date.now()},y[im]=!0,y},condition:function(y,x){var S=x.getState,w,_,C,E=S(),A=(_=(w=E[r])==null?void 0:w.queries)==null?void 0:_[y.queryCacheKey],M=A==null?void 0:A.fulfilledTimeStamp,I=y.originalArgs,O=A==null?void 0:A.originalArgs,T=i[y.endpointName];return N3(y)?!0:(A==null?void 0:A.status)==="pending"?!1:c(y,E)||Fte(T)&&((C=T==null?void 0:T.forceRefetch)!=null&&C.call(T,{currentArg:I,previousArg:O,endpointState:A,state:E}))?!0:!M},dispatchConditionRejection:!0}),f=D3(r+"/executeMutation",d,{getPendingMeta:function(){var y;return y={startedTimeStamp:Date.now()},y[im]=!0,y}}),m=function(y){return"force"in y},p=function(y){return"ifOlderThan"in y},g=function(y,x,S){return function(w,_){var C=m(S)&&S.force,E=p(S)&&S.ifOlderThan,A=function(T){return T===void 0&&(T=!0),a.endpoints[y].initiate(x,{forceRefetch:T})},M=a.endpoints[y].select(x)(_());if(C)w(A());else if(E){var I=M==null?void 0:M.fulfilledTimeStamp;if(!I){w(A());return}var O=(Number(new Date)-Number(new Date(I)))/1e3>=E;O&&w(A())}else w(A(!1))}};function v(y){return function(x){var S,w;return((w=(S=x==null?void 0:x.meta)==null?void 0:S.arg)==null?void 0:w.endpointName)===y}}function b(y,x){return{matchPending:iy(h2(y),v(x)),matchFulfilled:iy(hp(y),v(x)),matchRejected:iy(Gy(y),v(x))}}return{queryThunk:h,mutationThunk:f,prefetch:g,updateQueryData:l,upsertQueryData:u,patchQueryData:s,buildMatchThunkActions:b}}function Ute(e,t,r,n){return jte(r[e.meta.arg.endpointName][t],hp(e)?e.payload:void 0,OS(e)?e.payload:void 0,e.meta.arg.originalArgs,"baseQueryMeta"in e.meta?e.meta.baseQueryMeta:void 0,n)}function $_(e,t,r){var n=e[t];n&&r(n)}function mw(e){var t;return(t="arg"in e?e.arg.fixedCacheKey:e.fixedCacheKey)!=null?t:e.requestId}function DH(e,t,r){var n=e[mw(t)];n&&r(n)}var Fb={};function PEe(e){var t=e.reducerPath,r=e.queryThunk,n=e.mutationThunk,i=e.context,o=i.endpointDefinitions,a=i.apiUid,s=i.extractRehydrationInfo,l=i.hasRehydrationInfo,u=e.assertTagType,d=e.config,c=ca(t+"/resetApiState"),h=Np({name:t+"/queries",initialState:Fb,reducers:{removeQueryResult:{reducer:function(S,w){var _=w.payload.queryCacheKey;delete S[_]},prepare:UA()},queryResultPatched:function(S,w){var _=w.payload,C=_.queryCacheKey,E=_.patches;$_(S,C,function(A){A.data=O3(A.data,E.concat())})}},extraReducers:function(S){S.addCase(r.pending,function(w,_){var C=_.meta,E=_.meta.arg,A,M,I=N3(E);(E.subscribe||I)&&((M=w[A=E.queryCacheKey])!=null||(w[A]={status:Yn.uninitialized,endpointName:E.endpointName})),$_(w,E.queryCacheKey,function(O){O.status=Yn.pending,O.requestId=I&&O.requestId?O.requestId:C.requestId,E.originalArgs!==void 0&&(O.originalArgs=E.originalArgs),O.startedTimeStamp=C.startedTimeStamp})}).addCase(r.fulfilled,function(w,_){var C=_.meta,E=_.payload;$_(w,C.arg.queryCacheKey,function(A){var M;if(!(A.requestId!==C.requestId&&!N3(C.arg))){var I=o[C.arg.endpointName].merge;if(A.status=Yn.fulfilled,I)if(A.data!==void 0){var O=C.fulfilledTimeStamp,T=C.arg,D=C.baseQueryMeta,N=C.requestId,k=lh(A.data,function(R){return I(R,E,{arg:T.originalArgs,baseQueryMeta:D,fulfilledTimeStamp:O,requestId:N})});A.data=k}else A.data=E;else A.data=(M=o[C.arg.endpointName].structuralSharing)==null||M?Nte(Wa(A.data)?WF(A.data):A.data,E):E;delete A.error,A.fulfilledTimeStamp=C.fulfilledTimeStamp}})}).addCase(r.rejected,function(w,_){var C=_.meta,E=C.condition,A=C.arg,M=C.requestId,I=_.error,O=_.payload;$_(w,A.queryCacheKey,function(T){if(!E){if(T.requestId!==M)return;T.status=Yn.rejected,T.error=O??I}})}).addMatcher(l,function(w,_){for(var C=s(_).queries,E=0,A=Object.entries(C);E<A.length;E++){var M=A[E],I=M[0],O=M[1];((O==null?void 0:O.status)===Yn.fulfilled||(O==null?void 0:O.status)===Yn.rejected)&&(w[I]=O)}})}}),f=Np({name:t+"/mutations",initialState:Fb,reducers:{removeMutationResult:{reducer:function(S,w){var _=w.payload,C=mw(_);C in S&&delete S[C]},prepare:UA()}},extraReducers:function(S){S.addCase(n.pending,function(w,_){var C=_.meta,E=_.meta,A=E.requestId,M=E.arg,I=E.startedTimeStamp;M.track&&(w[mw(C)]={requestId:A,status:Yn.pending,endpointName:M.endpointName,startedTimeStamp:I})}).addCase(n.fulfilled,function(w,_){var C=_.payload,E=_.meta;E.arg.track&&DH(w,E,function(A){A.requestId===E.requestId&&(A.status=Yn.fulfilled,A.data=C,A.fulfilledTimeStamp=E.fulfilledTimeStamp)})}).addCase(n.rejected,function(w,_){var C=_.payload,E=_.error,A=_.meta;A.arg.track&&DH(w,A,function(M){M.requestId===A.requestId&&(M.status=Yn.rejected,M.error=C??E)})}).addMatcher(l,function(w,_){for(var C=s(_).mutations,E=0,A=Object.entries(C);E<A.length;E++){var M=A[E],I=M[0],O=M[1];((O==null?void 0:O.status)===Yn.fulfilled||(O==null?void 0:O.status)===Yn.rejected)&&I!==(O==null?void 0:O.requestId)&&(w[I]=O)}})}}),m=Np({name:t+"/invalidation",initialState:Fb,reducers:{},extraReducers:function(S){S.addCase(h.actions.removeQueryResult,function(w,_){for(var C=_.payload.queryCacheKey,E=0,A=Object.values(w);E<A.length;E++)for(var M=A[E],I=0,O=Object.values(M);I<O.length;I++){var T=O[I],D=T.indexOf(C);D!==-1&&T.splice(D,1)}}).addMatcher(l,function(w,_){for(var C,E,A,M,I=s(_).provided,O=0,T=Object.entries(I);O<T.length;O++)for(var D=T[O],N=D[0],k=D[1],R=0,z=Object.entries(k);R<z.length;R++)for(var j=z[R],$=j[0],U=j[1],H=(M=(E=(C=w[N])!=null?C:w[N]={})[A=$||"__internal_without_id"])!=null?M:E[A]=[],V=0,Q=U;V<Q.length;V++){var X=Q[V],ne=H.includes(X);ne||H.push(X)}}).addMatcher(ag(hp(r),OS(r)),function(w,_){for(var C,E,A,M,I=Ute(_,"providesTags",o,u),O=_.meta.arg.queryCacheKey,T=0,D=Object.values(w);T<D.length;T++)for(var N=D[T],k=0,R=Object.values(N);k<R.length;k++){var z=R[k],j=z.indexOf(O);j!==-1&&z.splice(j,1)}for(var $=0,U=I;$<U.length;$++){var H=U[$],V=H.type,Q=H.id,X=(M=(E=(C=w[V])!=null?C:w[V]={})[A=Q||"__internal_without_id"])!=null?M:E[A]=[],ne=X.includes(O);ne||X.push(O)}})}}),p=Np({name:t+"/subscriptions",initialState:Fb,reducers:{updateSubscriptionOptions:function(S,w){},unsubscribeQueryResult:function(S,w){},internal_probeSubscription:function(S,w){}}}),g=Np({name:t+"/internalSubscriptions",initialState:Fb,reducers:{subscriptionsUpdated:{reducer:function(S,w){return O3(S,w.payload)},prepare:UA()}}}),v=Np({name:t+"/config",initialState:Mi({online:bEe(),focused:xEe(),middlewareRegistered:!1},d),reducers:{middlewareRegistered:function(S,w){var _=w.payload;S.middlewareRegistered=S.middlewareRegistered==="conflict"||a!==_?"conflict":!0}},extraReducers:function(S){S.addCase(oj,function(w){w.online=!0}).addCase(Bte,function(w){w.online=!1}).addCase(ij,function(w){w.focused=!0}).addCase(zte,function(w){w.focused=!1}).addMatcher(l,function(w){return Mi({},w)})}}),b=ej({queries:h.reducer,mutations:f.reducer,provided:m.reducer,subscriptions:g.reducer,config:v.reducer}),y=function(S,w){return b(c.match(w)?void 0:S,w)},x=Oc(Mi(Mi(Mi(Mi(Mi({},v.actions),h.actions),p.actions),g.actions),f.actions),{unsubscribeMutationResult:f.actions.removeMutationResult,resetApiState:c});return{reducer:y,actions:x}}var om=Symbol.for("RTKQ/skipToken"),$te={status:Yn.uninitialized},RH=lh($te,function(){}),kH=lh($te,function(){});function TEe(e){var t=e.serializeQueryArgs,r=e.reducerPath,n=function(d){return RH},i=function(d){return kH};return{buildQuerySelector:s,buildMutationSelector:l,selectInvalidatedBy:u};function o(d){return Mi(Mi({},d),pEe(d.status))}function a(d){var c=d[r];return c}function s(d,c){return function(h){var f=t({queryArgs:h,endpointDefinition:c,endpointName:d}),m=function(g){var v,b,y;return(y=(b=(v=a(g))==null?void 0:v.queries)==null?void 0:b[f])!=null?y:RH},p=h===om?n:m;return Uc(p,o)}}function l(){return function(d){var c,h;typeof d=="object"?h=(c=mw(d))!=null?c:om:h=d;var f=function(p){var g,v,b;return(b=(v=(g=a(p))==null?void 0:g.mutations)==null?void 0:v[h])!=null?b:kH},m=h===om?i:f;return Uc(m,o)}}function u(d,c){for(var h,f=d[r],m=new Set,p=0,g=c.map(L3);p<g.length;p++){var v=g[p],b=f.provided[v.type];if(b)for(var y=(h=v.id!==void 0?b[v.id]:EH(Object.values(b)))!=null?h:[],x=0,S=y;x<S.length;x++){var w=S[x];m.add(w)}}return EH(Array.from(m.values()).map(function(_){var C=f.queries[_];return C?[{queryCacheKey:_,endpointName:C.endpointName,originalArgs:C.originalArgs}]:[]}))}}var V_=WeakMap?new WeakMap:void 0,LH=function(e){var t=e.endpointName,r=e.queryArgs,n="",i=V_==null?void 0:V_.get(r);if(typeof i=="string")n=i;else{var o=JSON.stringify(r,function(a,s){return Nu(s)?Object.keys(s).sort().reduce(function(l,u){return l[u]=s[u],l},{}):s});Nu(r)&&(V_==null||V_.set(r,o)),n=o}return t+"("+n+")"};function OEe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){var i=Hy(function(d){var c,h;return(h=n.extractRehydrationInfo)==null?void 0:h.call(n,d,{reducerPath:(c=n.reducerPath)!=null?c:"api"})}),o=Oc(Mi({reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1},n),{extractRehydrationInfo:i,serializeQueryArgs:function(d){var c=LH;if("serializeQueryArgs"in d.endpointDefinition){var h=d.endpointDefinition.serializeQueryArgs;c=function(f){var m=h(f);return typeof m=="string"?m:LH(Oc(Mi({},f),{queryArgs:m}))}}else n.serializeQueryArgs&&(c=n.serializeQueryArgs);return c(d)},tagTypes:XE([],n.tagTypes||[])}),a={endpointDefinitions:{},batch:function(d){d()},apiUid:c2(),extractRehydrationInfo:i,hasRehydrationInfo:Hy(function(d){return i(d)!=null})},s={injectEndpoints:u,enhanceEndpoints:function(d){var c=d.addTagTypes,h=d.endpoints;if(c)for(var f=0,m=c;f<m.length;f++){var p=m[f];o.tagTypes.includes(p)||o.tagTypes.push(p)}if(h)for(var g=0,v=Object.entries(h);g<v.length;g++){var b=v[g],y=b[0],x=b[1];typeof x=="function"?x(a.endpointDefinitions[y]):Object.assign(a.endpointDefinitions[y]||{},x)}return s}},l=e.map(function(d){return d.init(s,o,a)});function u(d){for(var c=d.endpoints({query:function(x){return Oc(Mi({},x),{type:Xc.query})},mutation:function(x){return Oc(Mi({},x),{type:Xc.mutation})}}),h=0,f=Object.entries(c);h<f.length;h++){var m=f[h],p=m[0],g=m[1];if(!d.overrideExisting&&p in a.endpointDefinitions){typeof process<"u";continue}a.endpointDefinitions[p]=g;for(var v=0,b=l;v<b.length;v++){var y=b[v];y.injectEndpoint(p,g)}}return s}return s.injectEndpoints({endpoints:n.endpoints})}}function IEe(e){for(var t in e)return!1;return!0}var DEe=2147483647/1e3-1,REe=function(e){var t=e.reducerPath,r=e.api,n=e.context,i=e.internalState,o=r.internalActions,a=o.removeQueryResult,s=o.unsubscribeQueryResult;function l(h){var f=i.currentSubscriptions[h];return!!f&&!IEe(f)}var u={},d=function(h,f,m){var p;if(s.match(h)){var g=f.getState()[t],v=h.payload.queryCacheKey;c(v,(p=g.queries[v])==null?void 0:p.endpointName,f,g.config)}if(r.util.resetApiState.match(h))for(var b=0,y=Object.entries(u);b<y.length;b++){var x=y[b],S=x[0],w=x[1];w&&clearTimeout(w),delete u[S]}if(n.hasRehydrationInfo(h))for(var g=f.getState()[t],_=n.extractRehydrationInfo(h).queries,C=0,E=Object.entries(_);C<E.length;C++){var A=E[C],v=A[0],M=A[1];c(v,M==null?void 0:M.endpointName,f,g.config)}};function c(h,f,m,p){var g,v=n.endpointDefinitions[f],b=(g=v==null?void 0:v.keepUnusedDataFor)!=null?g:p.keepUnusedDataFor;if(b!==1/0){var y=Math.max(0,Math.min(b,DEe));if(!l(h)){var x=u[h];x&&clearTimeout(x),u[h]=setTimeout(function(){l(h)||m.dispatch(a({queryCacheKey:h})),delete u[h]},y*1e3)}}}return d},kEe=function(e){var t=e.reducerPath,r=e.context,n=e.context.endpointDefinitions,i=e.mutationThunk,o=e.api,a=e.assertTagType,s=e.refetchQuery,l=o.internalActions.removeQueryResult,u=ag(hp(i),OS(i)),d=function(h,f){u(h)&&c(Ute(h,"invalidatesTags",n,a),f),o.util.invalidateTags.match(h)&&c(jte(h.payload,void 0,void 0,void 0,void 0,a),f)};function c(h,f){var m=f.getState(),p=m[t],g=o.util.selectInvalidatedBy(m,h);r.batch(function(){for(var v,b=Array.from(g.values()),y=0,x=b;y<x.length;y++){var S=x[y].queryCacheKey,w=p.queries[S],_=(v=p.subscriptions[S])!=null?v:{};w&&(Object.keys(_).length===0?f.dispatch(l({queryCacheKey:S})):w.status!==Yn.uninitialized&&f.dispatch(s(w,S)))}})}return d},LEe=function(e){var t=e.reducerPath,r=e.queryThunk,n=e.api,i=e.refetchQuery,o=e.internalState,a={},s=function(f,m){(n.internalActions.updateSubscriptionOptions.match(f)||n.internalActions.unsubscribeQueryResult.match(f))&&u(f.payload,m),(r.pending.match(f)||r.rejected.match(f)&&f.meta.condition)&&u(f.meta.arg,m),(r.fulfilled.match(f)||r.rejected.match(f)&&!f.meta.condition)&&l(f.meta.arg,m),n.util.resetApiState.match(f)&&c()};function l(f,m){var p=f.queryCacheKey,g=m.getState()[t],v=g.queries[p],b=o.currentSubscriptions[p];if(!(!v||v.status===Yn.uninitialized)){var y=h(b);if(Number.isFinite(y)){var x=a[p];x!=null&&x.timeout&&(clearTimeout(x.timeout),x.timeout=void 0);var S=Date.now()+y,w=a[p]={nextPollTimestamp:S,pollingInterval:y,timeout:setTimeout(function(){w.timeout=void 0,m.dispatch(i(v,p))},y)}}}}function u(f,m){var p=f.queryCacheKey,g=m.getState()[t],v=g.queries[p],b=o.currentSubscriptions[p];if(!(!v||v.status===Yn.uninitialized)){var y=h(b);if(!Number.isFinite(y)){d(p);return}var x=a[p],S=Date.now()+y;(!x||S<x.nextPollTimestamp)&&l({queryCacheKey:p},m)}}function d(f){var m=a[f];m!=null&&m.timeout&&clearTimeout(m.timeout),delete a[f]}function c(){for(var f=0,m=Object.keys(a);f<m.length;f++){var p=m[f];d(p)}}function h(f){f===void 0&&(f={});var m=Number.POSITIVE_INFINITY;for(var p in f)f[p].pollingInterval&&(m=Math.min(f[p].pollingInterval,m));return m}return s},NEe=function(e){var t=e.reducerPath,r=e.context,n=e.api,i=e.refetchQuery,o=e.internalState,a=n.internalActions.removeQueryResult,s=function(u,d){ij.match(u)&&l(d,"refetchOnFocus"),oj.match(u)&&l(d,"refetchOnReconnect")};function l(u,d){var c=u.getState()[t],h=c.queries,f=o.currentSubscriptions;r.batch(function(){for(var m=0,p=Object.keys(f);m<p.length;m++){var g=p[m],v=h[g],b=f[g];if(!(!b||!v)){var y=Object.values(b).some(function(x){return x[d]===!0})||Object.values(b).every(function(x){return x[d]===void 0})&&c.config[d];y&&(Object.keys(b).length===0?u.dispatch(a({queryCacheKey:g})):v.status!==Yn.uninitialized&&u.dispatch(i(v,g)))}}})}return s},NH=new Error("Promise never resolved before cacheEntryRemoved."),zEe=function(e){var t=e.api,r=e.reducerPath,n=e.context,i=e.queryThunk,o=e.mutationThunk;e.internalState;var a=WE(i),s=WE(o),l=hp(i,o),u={},d=function(f,m,p){var g=c(f);if(i.pending.match(f)){var v=p[r].queries[g],b=m.getState()[r].queries[g];!v&&b&&h(f.meta.arg.endpointName,f.meta.arg.originalArgs,g,m,f.meta.requestId)}else if(o.pending.match(f)){var b=m.getState()[r].mutations[g];b&&h(f.meta.arg.endpointName,f.meta.arg.originalArgs,g,m,f.meta.requestId)}else if(l(f)){var y=u[g];y!=null&&y.valueResolved&&(y.valueResolved({data:f.payload,meta:f.meta.baseQueryMeta}),delete y.valueResolved)}else if(t.internalActions.removeQueryResult.match(f)||t.internalActions.removeMutationResult.match(f)){var y=u[g];y&&(delete u[g],y.cacheEntryRemoved())}else if(t.util.resetApiState.match(f))for(var x=0,S=Object.entries(u);x<S.length;x++){var w=S[x],_=w[0],y=w[1];delete u[_],y.cacheEntryRemoved()}};function c(f){return a(f)?f.meta.arg.queryCacheKey:s(f)?f.meta.requestId:t.internalActions.removeQueryResult.match(f)?f.payload.queryCacheKey:t.internalActions.removeMutationResult.match(f)?mw(f.payload):""}function h(f,m,p,g,v){var b=n.endpointDefinitions[f],y=b==null?void 0:b.onCacheEntryAdded;if(y){var x={},S=new Promise(function(M){x.cacheEntryRemoved=M}),w=Promise.race([new Promise(function(M){x.valueResolved=M}),S.then(function(){throw NH})]);w.catch(function(){}),u[p]=x;var _=t.endpoints[f].select(b.type===Xc.query?m:p),C=g.dispatch(function(M,I,O){return O}),E=Oc(Mi({},g),{getCacheEntry:function(){return _(g.getState())},requestId:v,extra:C,updateCachedData:b.type===Xc.query?function(M){return g.dispatch(t.util.updateQueryData(f,m,M))}:void 0,cacheDataLoaded:w,cacheEntryRemoved:S}),A=y(m,E);Promise.resolve(A).catch(function(M){if(M!==NH)throw M})}}return d},BEe=function(e){var t=e.api,r=e.context,n=e.queryThunk,i=e.mutationThunk,o=h2(n,i),a=Gy(n,i),s=hp(n,i),l={},u=function(d,c){var h,f,m;if(o(d)){var p=d.meta,g=p.requestId,v=p.arg,b=v.endpointName,y=v.originalArgs,x=r.endpointDefinitions[b],S=x==null?void 0:x.onQueryStarted;if(S){var w={},_=new Promise(function(D,N){w.resolve=D,w.reject=N});_.catch(function(){}),l[g]=w;var C=t.endpoints[b].select(x.type===Xc.query?y:g),E=c.dispatch(function(D,N,k){return k}),A=Oc(Mi({},c),{getCacheEntry:function(){return C(c.getState())},requestId:g,extra:E,updateCachedData:x.type===Xc.query?function(D){return c.dispatch(t.util.updateQueryData(b,y,D))}:void 0,queryFulfilled:_});S(y,A)}}else if(s(d)){var M=d.meta,g=M.requestId,I=M.baseQueryMeta;(h=l[g])==null||h.resolve({data:d.payload,meta:I}),delete l[g]}else if(a(d)){var O=d.meta,g=O.requestId,T=O.rejectedWithValue,I=O.baseQueryMeta;(m=l[g])==null||m.reject({error:(f=d.payload)!=null?f:d.error,isUnhandledError:!T,meta:I}),delete l[g]}};return u},FEe=function(e){var t=e.api,r=e.context.apiUid,n=e.reducerPath;return function(i,o){var a,s;t.util.resetApiState.match(i)&&o.dispatch(t.internalActions.middlewareRegistered(r)),typeof process<"u"}},zH,jEe=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis):function(e){return(zH||(zH=Promise.resolve())).then(e).catch(function(t){return setTimeout(function(){throw t},0)})},UEe=function(e){var t=e.api,r=e.queryThunk,n=e.internalState,i=t.reducerPath+"/subscriptions",o=null,a=!1,s=t.internalActions,l=s.updateSubscriptionOptions,u=s.unsubscribeQueryResult,d=function(c,h){var f,m,p,g,v,b,y,x,S;if(l.match(h)){var w=h.payload,_=w.queryCacheKey,C=w.requestId,E=w.options;return(f=c==null?void 0:c[_])!=null&&f[C]&&(c[_][C]=E),!0}if(u.match(h)){var A=h.payload,_=A.queryCacheKey,C=A.requestId;return c[_]&&delete c[_][C],!0}if(t.internalActions.removeQueryResult.match(h))return delete c[h.payload.queryCacheKey],!0;if(r.pending.match(h)){var M=h.meta,I=M.arg,C=M.requestId;if(I.subscribe){var O=(p=c[m=I.queryCacheKey])!=null?p:c[m]={};return O[C]=(v=(g=I.subscriptionOptions)!=null?g:O[C])!=null?v:{},!0}}if(r.rejected.match(h)){var T=h.meta,D=T.condition,I=T.arg,C=T.requestId;if(D&&I.subscribe){var O=(y=c[b=I.queryCacheKey])!=null?y:c[b]={};return O[C]=(S=(x=I.subscriptionOptions)!=null?x:O[C])!=null?S:{},!0}}return!1};return function(c,h){var f,m;if(o||(o=JSON.parse(JSON.stringify(n.currentSubscriptions))),t.util.resetApiState.match(c))return o=n.currentSubscriptions={},[!0,!1];if(t.internalActions.internal_probeSubscription.match(c)){var p=c.payload,g=p.queryCacheKey,v=p.requestId,b=!!((f=n.currentSubscriptions[g])!=null&&f[v]);return[!1,b]}var y=d(n.currentSubscriptions,c);if(y){a||(jEe(function(){var _=JSON.parse(JSON.stringify(n.currentSubscriptions)),C=JF(o,function(){return _}),E=C[1];h.next(t.internalActions.subscriptionsUpdated(E)),o=_,a=!1}),a=!0);var x=!!((m=c.type)!=null&&m.startsWith(i)),S=r.rejected.match(c)&&c.meta.condition&&!!c.meta.arg.subscribe,w=!x&&!S;return[w,!1]}return[!0,!1]}};function $Ee(e){var t=e.reducerPath,r=e.queryThunk,n=e.api,i=e.context,o=i.apiUid,a={invalidateTags:ca(t+"/invalidateTags")},s=function(c){return!!c&&typeof c.type=="string"&&c.type.startsWith(t+"/")},l=[FEe,REe,kEe,LEe,zEe,BEe],u=function(c){var h=!1,f={currentSubscriptions:{}},m=Oc(Mi({},e),{internalState:f,refetchQuery:d}),p=l.map(function(b){return b(m)}),g=UEe(m),v=NEe(m);return function(b){return function(y){h||(h=!0,c.dispatch(n.internalActions.middlewareRegistered(o)));var x=Oc(Mi({},c),{next:b}),S=c.getState(),w=g(y,x,S),_=w[0],C=w[1],E;if(_?E=b(y):E=C,c.getState()[t]&&(v(y,x,S),s(y)||i.hasRehydrationInfo(y)))for(var A=0,M=p;A<M.length;A++){var I=M[A];I(y,x,S)}return E}}};return{middleware:u,actions:a};function d(c,h,f){return f===void 0&&(f={}),r(Mi({type:"query",endpointName:c.endpointName,originalArgs:c.originalArgs,subscribe:!1,forceRefetch:!0,queryCacheKey:h},f))}}function Ph(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];Object.assign.apply(Object,XE([e],t))}var BH=Symbol(),VEe=function(){return{name:BH,init:function(e,t,r){var n=t.baseQuery,i=t.tagTypes,o=t.reducerPath,a=t.serializeQueryArgs,s=t.keepUnusedDataFor,l=t.refetchOnMountOrArgChange,u=t.refetchOnFocus,d=t.refetchOnReconnect;QF();var c=function(H){return typeof process<"u",H};Object.assign(e,{reducerPath:o,endpoints:{},internalActions:{onOnline:oj,onOffline:Bte,onFocus:ij,onFocusLost:zte},util:{}});var h=MEe({baseQuery:n,reducerPath:o,context:r,api:e,serializeQueryArgs:a}),f=h.queryThunk,m=h.mutationThunk,p=h.patchQueryData,g=h.updateQueryData,v=h.upsertQueryData,b=h.prefetch,y=h.buildMatchThunkActions,x=PEe({context:r,queryThunk:f,mutationThunk:m,reducerPath:o,assertTagType:c,config:{refetchOnFocus:u,refetchOnReconnect:d,refetchOnMountOrArgChange:l,keepUnusedDataFor:s,reducerPath:o}}),S=x.reducer,w=x.actions;Ph(e.util,{patchQueryData:p,updateQueryData:g,upsertQueryData:v,prefetch:b,resetApiState:w.resetApiState}),Ph(e.internalActions,w);var _=$Ee({reducerPath:o,context:r,queryThunk:f,mutationThunk:m,api:e,assertTagType:c}),C=_.middleware,E=_.actions;Ph(e.util,E),Ph(e,{reducer:S,middleware:C});var A=TEe({serializeQueryArgs:a,reducerPath:o}),M=A.buildQuerySelector,I=A.buildMutationSelector,O=A.selectInvalidatedBy;Ph(e.util,{selectInvalidatedBy:O});var T=EEe({queryThunk:f,mutationThunk:m,api:e,serializeQueryArgs:a,context:r}),D=T.buildInitiateQuery,N=T.buildInitiateMutation,k=T.getRunningMutationThunk,R=T.getRunningMutationsThunk,z=T.getRunningQueriesThunk,j=T.getRunningQueryThunk,$=T.getRunningOperationPromises,U=T.removalWarning;return Ph(e.util,{getRunningOperationPromises:$,getRunningOperationPromise:U,getRunningMutationThunk:k,getRunningMutationsThunk:R,getRunningQueryThunk:j,getRunningQueriesThunk:z}),{name:BH,injectEndpoint:function(H,V){var Q,X,ne=e;(X=(Q=ne.endpoints)[H])!=null||(Q[H]={}),Fte(V)?Ph(ne.endpoints[H],{name:H,select:M(H,V),initiate:D(H,V)},y(f,H)):CEe(V)&&Ph(ne.endpoints[H],{name:H,select:I(),initiate:N(H)},y(m,H))}}}}},Vte={exports:{}},Hte={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wy=P;function HEe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var GEe=typeof Object.is=="function"?Object.is:HEe,WEe=Wy.useState,qEe=Wy.useEffect,KEe=Wy.useLayoutEffect,XEe=Wy.useDebugValue;function YEe(e,t){var r=t(),n=WEe({inst:{value:r,getSnapshot:t}}),i=n[0].inst,o=n[1];return KEe(function(){i.value=r,i.getSnapshot=t,TI(i)&&o({inst:i})},[e,r,t]),qEe(function(){return TI(i)&&o({inst:i}),e(function(){TI(i)&&o({inst:i})})},[e]),XEe(r),r}function TI(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!GEe(e,r)}catch{return!0}}function QEe(e,t){return t()}var ZEe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?QEe:YEe;Hte.useSyncExternalStore=Wy.useSyncExternalStore!==void 0?Wy.useSyncExternalStore:ZEe;Vte.exports=Hte;var JEe=Vte.exports,Gte={exports:{}},Wte={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f2=P,eMe=JEe;function tMe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var rMe=typeof Object.is=="function"?Object.is:tMe,nMe=eMe.useSyncExternalStore,iMe=f2.useRef,oMe=f2.useEffect,aMe=f2.useMemo,sMe=f2.useDebugValue;Wte.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var o=iMe(null);if(o.current===null){var a={hasValue:!1,value:null};o.current=a}else a=o.current;o=aMe(function(){function l(f){if(!u){if(u=!0,d=f,f=n(f),i!==void 0&&a.hasValue){var m=a.value;if(i(m,f))return c=m}return c=f}if(m=c,rMe(d,f))return m;var p=n(f);return i!==void 0&&i(m,p)?m:(d=f,c=p)}var u=!1,d,c,h=r===void 0?null:r;return[function(){return l(t())},h===null?void 0:function(){return l(h())}]},[t,r,n,i]);var s=nMe(e,o[0],o[1]);return oMe(function(){a.hasValue=!0,a.value=s},[s]),sMe(s),s};Gte.exports=Wte;var lMe=Gte.exports;function uMe(e){e()}let qte=uMe;const cMe=e=>qte=e,dMe=()=>qte,FH=Symbol.for("react-redux-context"),jH=typeof globalThis<"u"?globalThis:{};function hMe(){var e;if(!P.createContext)return{};const t=(e=jH[FH])!=null?e:jH[FH]=new Map;let r=t.get(P.createContext);return r||(r=P.createContext(null),t.set(P.createContext,r)),r}const Zf=hMe();function aj(e=Zf){return function(){return P.useContext(e)}}const Kte=aj(),fMe=()=>{throw new Error("uSES not initialized!")};let Xte=fMe;const pMe=e=>{Xte=e},mMe=(e,t)=>e===t;function gMe(e=Zf){const t=e===Zf?Kte:aj(e);return function(n,i={}){const{equalityFn:o=mMe,stabilityCheck:a=void 0,noopCheck:s=void 0}=typeof i=="function"?{equalityFn:i}:i,{store:l,subscription:u,getServerState:d,stabilityCheck:c,noopCheck:h}=t();P.useRef(!0);const f=P.useCallback({[n.name](p){return n(p)}}[n.name],[n,c,a]),m=Xte(u.addNestedSub,l.getState,d||l.getState,f,o);return P.useDebugValue(m),m}}const vMe=gMe();function yMe(){const e=dMe();let t=null,r=null;return{clear(){t=null,r=null},notify(){e(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){let n=[],i=t;for(;i;)n.push(i),i=i.next;return n},subscribe(n){let i=!0,o=r={callback:n,next:null,prev:r};return o.prev?o.prev.next=o:t=o,function(){!i||t===null||(i=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}const UH={notify(){},get:()=>[]};function bMe(e,t){let r,n=UH;function i(c){return l(),n.subscribe(c)}function o(){n.notify()}function a(){d.onStateChange&&d.onStateChange()}function s(){return!!r}function l(){r||(r=t?t.addNestedSub(a):e.subscribe(a),n=yMe())}function u(){r&&(r(),r=void 0,n.clear(),n=UH)}const d={addNestedSub:i,notifyNestedSubs:o,handleChangeWrapper:a,isSubscribed:s,trySubscribe:l,tryUnsubscribe:u,getListeners:()=>n};return d}const xMe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wMe=xMe?P.useLayoutEffect:P.useEffect;function $H(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function ZE(e,t){if($H(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(t,r[i])||!$H(e[r[i]],t[r[i]]))return!1;return!0}function SMe({store:e,context:t,children:r,serverState:n,stabilityCheck:i="once",noopCheck:o="once"}){const a=P.useMemo(()=>{const u=bMe(e);return{store:e,subscription:u,getServerState:n?()=>n:void 0,stabilityCheck:i,noopCheck:o}},[e,n,i,o]),s=P.useMemo(()=>e.getState(),[e]);wMe(()=>{const{subscription:u}=a;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),s!==e.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[a,s]);const l=t||Zf;return P.createElement(l.Provider,{value:a},r)}function Yte(e=Zf){const t=e===Zf?Kte:aj(e);return function(){const{store:n}=t();return n}}const Qte=Yte();function _Me(e=Zf){const t=e===Zf?Qte:Yte(e);return function(){return t().dispatch}}const CMe=_Me();pMe(lMe.useSyncExternalStoreWithSelector);cMe(yh.unstable_batchedUpdates);var AMe=globalThis&&globalThis.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},EMe=Object.defineProperty,MMe=Object.defineProperties,PMe=Object.getOwnPropertyDescriptors,VH=Object.getOwnPropertySymbols,TMe=Object.prototype.hasOwnProperty,OMe=Object.prototype.propertyIsEnumerable,HH=function(e,t,r){return t in e?EMe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},Cd=function(e,t){for(var r in t||(t={}))TMe.call(t,r)&&HH(e,r,t[r]);if(VH)for(var n=0,i=VH(t);n<i.length;n++){var r=i[n];OMe.call(t,r)&&HH(e,r,t[r])}return e},$A=function(e,t){return MMe(e,PMe(t))};function GH(e,t,r,n){var i=P.useMemo(function(){return{queryArgs:e,serialized:typeof e=="object"?t({queryArgs:e,endpointDefinition:r,endpointName:n}):e}},[e,t,r,n]),o=P.useRef(i);return P.useEffect(function(){o.current.serialized!==i.serialized&&(o.current=i)},[i]),o.current.serialized===i.serialized?o.current.queryArgs:e}var OI=Symbol();function II(e){var t=P.useRef(e);return P.useEffect(function(){ZE(t.current,e)||(t.current=e)},[e]),ZE(t.current,e)?t.current:e}var H_=WeakMap?new WeakMap:void 0,IMe=function(e){var t=e.endpointName,r=e.queryArgs,n="",i=H_==null?void 0:H_.get(r);if(typeof i=="string")n=i;else{var o=JSON.stringify(r,function(a,s){return Nu(s)?Object.keys(s).sort().reduce(function(l,u){return l[u]=s[u],l},{}):s});Nu(r)&&(H_==null||H_.set(r,o)),n=o}return t+"("+n+")"},DMe=typeof window<"u"&&window.document&&window.document.createElement?P.useLayoutEffect:P.useEffect,RMe=function(e){return e},kMe=function(e){return e.isUninitialized?$A(Cd({},e),{isUninitialized:!1,isFetching:!0,isLoading:e.data===void 0,status:Yn.pending}):e};function LMe(e){var t=e.api,r=e.moduleOptions,n=r.batch,i=r.useDispatch,o=r.useSelector,a=r.useStore,s=r.unstable__sideEffectsInRender,l=e.serializeQueryArgs,u=e.context,d=s?function(p){return p()}:P.useEffect;return{buildQueryHooks:f,buildMutationHook:m,usePrefetch:h};function c(p,g,v){if(g!=null&&g.endpointName&&p.isUninitialized){var b=g.endpointName,y=u.endpointDefinitions[b];l({queryArgs:g.originalArgs,endpointDefinition:y,endpointName:b})===l({queryArgs:v,endpointDefinition:y,endpointName:b})&&(g=void 0)}var x=p.isSuccess?p.data:g==null?void 0:g.data;x===void 0&&(x=p.data);var S=x!==void 0,w=p.isLoading,_=!S&&w,C=p.isSuccess||w&&S;return $A(Cd({},p),{data:x,currentData:p.data,isFetching:w,isLoading:_,isSuccess:C})}function h(p,g){var v=i(),b=II(g);return P.useCallback(function(y,x){return v(t.util.prefetch(p,y,Cd(Cd({},b),x)))},[p,v,b])}function f(p){var g=function(y,x){var S=x===void 0?{}:x,w=S.refetchOnReconnect,_=S.refetchOnFocus,C=S.refetchOnMountOrArgChange,E=S.skip,A=E===void 0?!1:E,M=S.pollingInterval,I=M===void 0?0:M,O=t.endpoints[p].initiate,T=i(),D=GH(A?om:y,IMe,u.endpointDefinitions[p],p),N=II({refetchOnReconnect:w,refetchOnFocus:_,pollingInterval:I}),k=P.useRef(!1),R=P.useRef(),z=R.current||{},j=z.queryCacheKey,$=z.requestId,U=!1;if(j&&$){var H=T(t.internalActions.internal_probeSubscription({queryCacheKey:j,requestId:$}));U=!!H}var V=!U&&k.current;return d(function(){k.current=U}),d(function(){V&&(R.current=void 0)},[V]),d(function(){var Q,X=R.current;if(typeof process<"u",D===om){X==null||X.unsubscribe(),R.current=void 0;return}var ne=(Q=R.current)==null?void 0:Q.subscriptionOptions;if(!X||X.arg!==D){X==null||X.unsubscribe();var J=T(O(D,{subscriptionOptions:N,forceRefetch:C}));R.current=J}else N!==ne&&X.updateSubscriptionOptions(N)},[T,O,C,D,N,V]),P.useEffect(function(){return function(){var Q;(Q=R.current)==null||Q.unsubscribe(),R.current=void 0}},[]),P.useMemo(function(){return{refetch:function(){var Q;if(!R.current)throw new Error("Cannot refetch a query that has not been started yet.");return(Q=R.current)==null?void 0:Q.refetch()}}},[])},v=function(y){var x=y===void 0?{}:y,S=x.refetchOnReconnect,w=x.refetchOnFocus,_=x.pollingInterval,C=_===void 0?0:_,E=t.endpoints[p].initiate,A=i(),M=P.useState(OI),I=M[0],O=M[1],T=P.useRef(),D=II({refetchOnReconnect:S,refetchOnFocus:w,pollingInterval:C});d(function(){var R,z,j=(R=T.current)==null?void 0:R.subscriptionOptions;D!==j&&((z=T.current)==null||z.updateSubscriptionOptions(D))},[D]);var N=P.useRef(D);d(function(){N.current=D},[D]);var k=P.useCallback(function(R,z){z===void 0&&(z=!1);var j;return n(function(){var $;($=T.current)==null||$.unsubscribe(),T.current=j=A(E(R,{subscriptionOptions:N.current,forceRefetch:!z})),O(R)}),j},[A,E]);return P.useEffect(function(){return function(){var R;(R=T==null?void 0:T.current)==null||R.unsubscribe()}},[]),P.useEffect(function(){I!==OI&&!T.current&&k(I,!0)},[I,k]),P.useMemo(function(){return[k,I]},[k,I])},b=function(y,x){var S=x===void 0?{}:x,w=S.skip,_=w===void 0?!1:w,C=S.selectFromResult,E=t.endpoints[p].select,A=GH(_?om:y,l,u.endpointDefinitions[p],p),M=P.useRef(),I=P.useMemo(function(){return Uc([E(A),function(k,R){return R},function(k){return A}],c)},[E,A]),O=P.useMemo(function(){return C?Uc([I],C):I},[I,C]),T=o(function(k){return O(k,M.current)},ZE),D=a(),N=I(D.getState(),M.current);return DMe(function(){M.current=N},[N]),T};return{useQueryState:b,useQuerySubscription:g,useLazyQuerySubscription:v,useLazyQuery:function(y){var x=v(y),S=x[0],w=x[1],_=b(w,$A(Cd({},y),{skip:w===OI})),C=P.useMemo(function(){return{lastArg:w}},[w]);return P.useMemo(function(){return[S,_,C]},[S,_,C])},useQuery:function(y,x){var S=g(y,x),w=b(y,Cd({selectFromResult:y===om||x!=null&&x.skip?void 0:kMe},x)),_=w.data,C=w.status,E=w.isLoading,A=w.isSuccess,M=w.isError,I=w.error;return P.useDebugValue({data:_,status:C,isLoading:E,isSuccess:A,isError:M,error:I}),P.useMemo(function(){return Cd(Cd({},w),S)},[w,S])}}}function m(p){return function(g){var v=g===void 0?{}:g,b=v.selectFromResult,y=b===void 0?RMe:b,x=v.fixedCacheKey,S=t.endpoints[p],w=S.select,_=S.initiate,C=i(),E=P.useState(),A=E[0],M=E[1];P.useEffect(function(){return function(){A!=null&&A.arg.fixedCacheKey||A==null||A.reset()}},[A]);var I=P.useCallback(function(X){var ne=C(_(X,{fixedCacheKey:x}));return M(ne),ne},[C,_,x]),O=(A||{}).requestId,T=P.useMemo(function(){return Uc([w({fixedCacheKey:x,requestId:A==null?void 0:A.requestId})],y)},[w,A,y,x]),D=o(T,ZE),N=x==null?A==null?void 0:A.arg.originalArgs:void 0,k=P.useCallback(function(){n(function(){A&&M(void 0),x&&C(t.internalActions.removeMutationResult({requestId:O,fixedCacheKey:x}))})},[C,x,A,O]),R=D.endpointName,z=D.data,j=D.status,$=D.isLoading,U=D.isSuccess,H=D.isError,V=D.error;P.useDebugValue({endpointName:R,data:z,status:j,isLoading:$,isSuccess:U,isError:H,error:V});var Q=P.useMemo(function(){return $A(Cd({},D),{originalArgs:N,reset:k})},[D,N,k]);return P.useMemo(function(){return[I,Q]},[I,Q])}}}var JE;(function(e){e.query="query",e.mutation="mutation"})(JE||(JE={}));function NMe(e){return e.type===JE.query}function zMe(e){return e.type===JE.mutation}function DI(e){return e.replace(e[0],e[0].toUpperCase())}function G_(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];Object.assign.apply(Object,AMe([e],t))}var BMe=Symbol(),FMe=function(e){var t=e===void 0?{}:e,r=t.batch,n=r===void 0?yh.unstable_batchedUpdates:r,i=t.useDispatch,o=i===void 0?CMe:i,a=t.useSelector,s=a===void 0?vMe:a,l=t.useStore,u=l===void 0?Qte:l,d=t.unstable__sideEffectsInRender,c=d===void 0?!1:d;return{name:BMe,init:function(h,f,m){var p=f.serializeQueryArgs,g=h,v=LMe({api:h,moduleOptions:{batch:n,useDispatch:o,useSelector:s,useStore:u,unstable__sideEffectsInRender:c},serializeQueryArgs:p,context:m}),b=v.buildQueryHooks,y=v.buildMutationHook,x=v.usePrefetch;return G_(g,{usePrefetch:x}),G_(m,{batch:n}),{injectEndpoint:function(S,w){if(NMe(w)){var _=b(S),C=_.useQuery,E=_.useLazyQuery,A=_.useLazyQuerySubscription,M=_.useQueryState,I=_.useQuerySubscription;G_(g.endpoints[S],{useQuery:C,useLazyQuery:E,useLazyQuerySubscription:A,useQueryState:M,useQuerySubscription:I}),h["use"+DI(S)+"Query"]=C,h["useLazy"+DI(S)+"Query"]=E}else if(zMe(w)){var O=y(S);G_(g.endpoints[S],{useMutation:O}),h["use"+DI(S)+"Mutation"]=O}}}}}},jMe=OEe(VEe(),FMe());const VA=jMe({baseQuery:_Ee({baseUrl:"http://enraniaga.site:1339"}),reducerPath:"main",tagTypes:["Kpis","Products","Transactions"],endpoints:e=>({getKpis:e.query({query:()=>"kpi/kpis/",providesTags:["Kpis"]}),getProducts:e.query({query:()=>"product/products/",providesTags:["Products"]}),getTransactions:e.query({query:()=>"transaction/transactions/",providesTags:["Transactions"]})})}),{useGetKpisQuery:sj,useGetProductsQuery:Zte,useGetTransactionsQuery:UMe}=VA;var Jte={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function r(){for(var n=[],i=0;i<arguments.length;i++){var o=arguments[i];if(o){var a=typeof o;if(a==="string"||a==="number")n.push(o);else if(Array.isArray(o)){if(o.length){var s=r.apply(null,o);s&&n.push(s)}}else if(a==="object"){if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]")){n.push(o.toString());continue}for(var l in o)t.call(o,l)&&o[l]&&n.push(l)}}}return n.join(" ")}e.exports?(r.default=r,e.exports=r):window.classNames=r})()})(Jte);var $Me=Jte.exports;const Kr=Ur($Me);function VMe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var fp=VMe;const $0=Ur(fp);var HMe=typeof mu=="object"&&mu&&mu.Object===Object&&mu,ere=HMe,GMe=ere,WMe=typeof self=="object"&&self&&self.Object===Object&&self,qMe=GMe||WMe||Function("return this")(),nd=qMe,KMe=nd,XMe=KMe.Symbol,RS=XMe,WH=RS,tre=Object.prototype,YMe=tre.hasOwnProperty,QMe=tre.toString,jb=WH?WH.toStringTag:void 0;function ZMe(e){var t=YMe.call(e,jb),r=e[jb];try{e[jb]=void 0;var n=!0}catch{}var i=QMe.call(e);return n&&(t?e[jb]=r:delete e[jb]),i}var JMe=ZMe,ePe=Object.prototype,tPe=ePe.toString;function rPe(e){return tPe.call(e)}var nPe=rPe,qH=RS,iPe=JMe,oPe=nPe,aPe="[object Null]",sPe="[object Undefined]",KH=qH?qH.toStringTag:void 0;function lPe(e){return e==null?e===void 0?sPe:aPe:KH&&KH in Object(e)?iPe(e):oPe(e)}var xh=lPe,uPe=xh,cPe=fp,dPe="[object AsyncFunction]",hPe="[object Function]",fPe="[object GeneratorFunction]",pPe="[object Proxy]";function mPe(e){if(!cPe(e))return!1;var t=uPe(e);return t==hPe||t==fPe||t==dPe||t==pPe}var lj=mPe;const kt=Ur(lj);var gPe=Array.isArray,Za=gPe;const qi=Ur(Za);function vPe(e){return e!=null&&typeof e=="object"}var wh=vPe,yPe=xh,bPe=Za,xPe=wh,wPe="[object String]";function SPe(e){return typeof e=="string"||!bPe(e)&&xPe(e)&&yPe(e)==wPe}var _Pe=SPe;const kS=Ur(_Pe);var CPe=xh,APe=wh,EPe="[object Symbol]";function MPe(e){return typeof e=="symbol"||APe(e)&&CPe(e)==EPe}var V0=MPe,PPe=Za,TPe=V0,OPe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,IPe=/^\w*$/;function DPe(e,t){if(PPe(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||TPe(e)?!0:IPe.test(e)||!OPe.test(e)||t!=null&&e in Object(t)}var uj=DPe,RPe=nd,kPe=RPe["__core-js_shared__"],LPe=kPe,RI=LPe,XH=function(){var e=/[^.]+$/.exec(RI&&RI.keys&&RI.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function NPe(e){return!!XH&&XH in e}var zPe=NPe,BPe=Function.prototype,FPe=BPe.toString;function jPe(e){if(e!=null){try{return FPe.call(e)}catch{}try{return e+""}catch{}}return""}var rre=jPe,UPe=lj,$Pe=zPe,VPe=fp,HPe=rre,GPe=/[\\^$.*+?()[\]{}|]/g,WPe=/^\[object .+?Constructor\]$/,qPe=Function.prototype,KPe=Object.prototype,XPe=qPe.toString,YPe=KPe.hasOwnProperty,QPe=RegExp("^"+XPe.call(YPe).replace(GPe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ZPe(e){if(!VPe(e)||$Pe(e))return!1;var t=UPe(e)?QPe:WPe;return t.test(HPe(e))}var JPe=ZPe;function eTe(e,t){return e==null?void 0:e[t]}var tTe=eTe,rTe=JPe,nTe=tTe;function iTe(e,t){var r=nTe(e,t);return rTe(r)?r:void 0}var sg=iTe,oTe=sg,aTe=oTe(Object,"create"),p2=aTe,YH=p2;function sTe(){this.__data__=YH?YH(null):{},this.size=0}var lTe=sTe;function uTe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var cTe=uTe,dTe=p2,hTe="__lodash_hash_undefined__",fTe=Object.prototype,pTe=fTe.hasOwnProperty;function mTe(e){var t=this.__data__;if(dTe){var r=t[e];return r===hTe?void 0:r}return pTe.call(t,e)?t[e]:void 0}var gTe=mTe,vTe=p2,yTe=Object.prototype,bTe=yTe.hasOwnProperty;function xTe(e){var t=this.__data__;return vTe?t[e]!==void 0:bTe.call(t,e)}var wTe=xTe,STe=p2,_Te="__lodash_hash_undefined__";function CTe(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=STe&&t===void 0?_Te:t,this}var ATe=CTe,ETe=lTe,MTe=cTe,PTe=gTe,TTe=wTe,OTe=ATe;function H0(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}H0.prototype.clear=ETe;H0.prototype.delete=MTe;H0.prototype.get=PTe;H0.prototype.has=TTe;H0.prototype.set=OTe;var ITe=H0;function DTe(){this.__data__=[],this.size=0}var RTe=DTe;function kTe(e,t){return e===t||e!==e&&t!==t}var cj=kTe,LTe=cj;function NTe(e,t){for(var r=e.length;r--;)if(LTe(e[r][0],t))return r;return-1}var m2=NTe,zTe=m2,BTe=Array.prototype,FTe=BTe.splice;function jTe(e){var t=this.__data__,r=zTe(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():FTe.call(t,r,1),--this.size,!0}var UTe=jTe,$Te=m2;function VTe(e){var t=this.__data__,r=$Te(t,e);return r<0?void 0:t[r][1]}var HTe=VTe,GTe=m2;function WTe(e){return GTe(this.__data__,e)>-1}var qTe=WTe,KTe=m2;function XTe(e,t){var r=this.__data__,n=KTe(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var YTe=XTe,QTe=RTe,ZTe=UTe,JTe=HTe,e2e=qTe,t2e=YTe;function G0(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}G0.prototype.clear=QTe;G0.prototype.delete=ZTe;G0.prototype.get=JTe;G0.prototype.has=e2e;G0.prototype.set=t2e;var g2=G0,r2e=sg,n2e=nd,i2e=r2e(n2e,"Map"),dj=i2e,QH=ITe,o2e=g2,a2e=dj;function s2e(){this.size=0,this.__data__={hash:new QH,map:new(a2e||o2e),string:new QH}}var l2e=s2e;function u2e(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var c2e=u2e,d2e=c2e;function h2e(e,t){var r=e.__data__;return d2e(t)?r[typeof t=="string"?"string":"hash"]:r.map}var v2=h2e,f2e=v2;function p2e(e){var t=f2e(this,e).delete(e);return this.size-=t?1:0,t}var m2e=p2e,g2e=v2;function v2e(e){return g2e(this,e).get(e)}var y2e=v2e,b2e=v2;function x2e(e){return b2e(this,e).has(e)}var w2e=x2e,S2e=v2;function _2e(e,t){var r=S2e(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var C2e=_2e,A2e=l2e,E2e=m2e,M2e=y2e,P2e=w2e,T2e=C2e;function W0(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}W0.prototype.clear=A2e;W0.prototype.delete=E2e;W0.prototype.get=M2e;W0.prototype.has=P2e;W0.prototype.set=T2e;var hj=W0,nre=hj,O2e="Expected a function";function fj(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(O2e);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=e.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(fj.Cache||nre),r}fj.Cache=nre;var I2e=fj,D2e=I2e,R2e=500;function k2e(e){var t=D2e(e,function(n){return r.size===R2e&&r.clear(),n}),r=t.cache;return t}var L2e=k2e,N2e=L2e,z2e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,B2e=/\\(\\)?/g,F2e=N2e(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(z2e,function(r,n,i,o){t.push(i?o.replace(B2e,"$1"):n||r)}),t}),j2e=F2e;function U2e(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var pj=U2e,ZH=RS,$2e=pj,V2e=Za,H2e=V0,G2e=1/0,JH=ZH?ZH.prototype:void 0,eG=JH?JH.toString:void 0;function ire(e){if(typeof e=="string")return e;if(V2e(e))return $2e(e,ire)+"";if(H2e(e))return eG?eG.call(e):"";var t=e+"";return t=="0"&&1/e==-G2e?"-0":t}var W2e=ire,q2e=W2e;function K2e(e){return e==null?"":q2e(e)}var ore=K2e,X2e=Za,Y2e=uj,Q2e=j2e,Z2e=ore;function J2e(e,t){return X2e(e)?e:Y2e(e,t)?[e]:Q2e(Z2e(e))}var are=J2e,eOe=V0,tOe=1/0;function rOe(e){if(typeof e=="string"||eOe(e))return e;var t=e+"";return t=="0"&&1/e==-tOe?"-0":t}var y2=rOe,nOe=are,iOe=y2;function oOe(e,t){t=nOe(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[iOe(t[r++])];return r&&r==n?e:void 0}var mj=oOe,aOe=mj;function sOe(e,t,r){var n=e==null?void 0:aOe(e,t);return n===void 0?r:n}var sre=sOe;const Ao=Ur(sre);function lOe(e){return e==null}var uOe=lOe;const bt=Ur(uOe);var lre={exports:{}},pn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ro=typeof Symbol=="function"&&Symbol.for,gj=Ro?Symbol.for("react.element"):60103,vj=Ro?Symbol.for("react.portal"):60106,b2=Ro?Symbol.for("react.fragment"):60107,x2=Ro?Symbol.for("react.strict_mode"):60108,w2=Ro?Symbol.for("react.profiler"):60114,S2=Ro?Symbol.for("react.provider"):60109,_2=Ro?Symbol.for("react.context"):60110,yj=Ro?Symbol.for("react.async_mode"):60111,C2=Ro?Symbol.for("react.concurrent_mode"):60111,A2=Ro?Symbol.for("react.forward_ref"):60112,E2=Ro?Symbol.for("react.suspense"):60113,cOe=Ro?Symbol.for("react.suspense_list"):60120,M2=Ro?Symbol.for("react.memo"):60115,P2=Ro?Symbol.for("react.lazy"):60116,dOe=Ro?Symbol.for("react.block"):60121,hOe=Ro?Symbol.for("react.fundamental"):60117,fOe=Ro?Symbol.for("react.responder"):60118,pOe=Ro?Symbol.for("react.scope"):60119;function sl(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case gj:switch(e=e.type,e){case yj:case C2:case b2:case w2:case x2:case E2:return e;default:switch(e=e&&e.$$typeof,e){case _2:case A2:case P2:case M2:case S2:return e;default:return t}}case vj:return t}}}function ure(e){return sl(e)===C2}pn.AsyncMode=yj;pn.ConcurrentMode=C2;pn.ContextConsumer=_2;pn.ContextProvider=S2;pn.Element=gj;pn.ForwardRef=A2;pn.Fragment=b2;pn.Lazy=P2;pn.Memo=M2;pn.Portal=vj;pn.Profiler=w2;pn.StrictMode=x2;pn.Suspense=E2;pn.isAsyncMode=function(e){return ure(e)||sl(e)===yj};pn.isConcurrentMode=ure;pn.isContextConsumer=function(e){return sl(e)===_2};pn.isContextProvider=function(e){return sl(e)===S2};pn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===gj};pn.isForwardRef=function(e){return sl(e)===A2};pn.isFragment=function(e){return sl(e)===b2};pn.isLazy=function(e){return sl(e)===P2};pn.isMemo=function(e){return sl(e)===M2};pn.isPortal=function(e){return sl(e)===vj};pn.isProfiler=function(e){return sl(e)===w2};pn.isStrictMode=function(e){return sl(e)===x2};pn.isSuspense=function(e){return sl(e)===E2};pn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===b2||e===C2||e===w2||e===x2||e===E2||e===cOe||typeof e=="object"&&e!==null&&(e.$$typeof===P2||e.$$typeof===M2||e.$$typeof===S2||e.$$typeof===_2||e.$$typeof===A2||e.$$typeof===hOe||e.$$typeof===fOe||e.$$typeof===pOe||e.$$typeof===dOe)};pn.typeOf=sl;lre.exports=pn;var mOe=lre.exports,gOe=xh,vOe=wh,yOe="[object Number]";function bOe(e){return typeof e=="number"||vOe(e)&&gOe(e)==yOe}var cre=bOe;const xOe=Ur(cre);var wOe=cre;function SOe(e){return wOe(e)&&e!=+e}var _Oe=SOe;const q0=Ur(_Oe);var la=function(t){return t===0?0:t>0?1:-1},am=function(t){return kS(t)&&t.indexOf("%")===t.length-1},Ze=function(t){return xOe(t)&&!q0(t)},uo=function(t){return Ze(t)||kS(t)},COe=0,pp=function(t){var r=++COe;return"".concat(t||"").concat(r)},hs=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ze(t)&&!kS(t))return n;var o;if(am(t)){var a=t.indexOf("%");o=r*parseFloat(t.slice(0,a))/100}else o=+t;return q0(o)&&(o=n),i&&o>r&&(o=r),o},Hh=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},AOe=function(t){if(!qi(t))return!1;for(var r=t.length,n={},i=0;i<r;i++)if(!n[t[i]])n[t[i]]=!0;else return!0;return!1},ii=function(t,r){return Ze(t)&&Ze(r)?function(n){return t+n*(r-t)}:function(){return r}};function eM(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):Ao(n,t))===r})}var EOe=function(t){if(!t||!t.length)return null;for(var r=t.length,n=0,i=0,o=0,a=0,s=1/0,l=-1/0,u=0,d=0,c=0;c<r;c++)u=t[c].cx||0,d=t[c].cy||0,n+=u,i+=d,o+=u*d,a+=u*u,s=Math.min(s,u),l=Math.max(l,u);var h=r*a!==n*n?(r*o-n*i)/(r*a-n*n):0;return{xmin:s,xmax:l,a:h,b:(i-h*n)/r}};function sy(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function z3(e){"@babel/helpers - typeof";return z3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z3(e)}var MOe=["viewBox","children"],POe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],tG=["points","pathLength"],kI={svg:MOe,polygon:tG,polyline:tG},bj=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],tM=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(P.isValidElement(t)&&(n=t.props),!$0(n))return null;var i={};return Object.keys(n).forEach(function(o){bj.includes(o)&&(i[o]=r||function(a){return n[o](n,a)})}),i},TOe=function(t,r,n){return function(i){return t(r,n,i),null}},Jf=function(t,r,n){if(!$0(t)||z3(t)!=="object")return null;var i=null;return Object.keys(t).forEach(function(o){var a=t[o];bj.includes(o)&&typeof a=="function"&&(i||(i={}),i[o]=TOe(a,r,n))}),i},OOe=["children"],IOe=["children"];function rG(e,t){if(e==null)return{};var r=DOe(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function DOe(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function B3(e){"@babel/helpers - typeof";return B3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B3(e)}var nG={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},zf=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},iG=null,LI=null,xj=function e(t){if(t===iG&&qi(LI))return LI;var r=[];return P.Children.forEach(t,function(n){bt(n)||(mOe.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),LI=r,iG=t,r};function Va(e,t){var r=[],n=[];return qi(t)?n=t.map(function(i){return zf(i)}):n=[zf(t)],xj(e).forEach(function(i){var o=Ao(i,"type.displayName")||Ao(i,"type.name");n.indexOf(o)!==-1&&r.push(i)}),r}function Vd(e,t){var r=Va(e,t);return r&&r[0]}var oG=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,i=r.height;return!(!Ze(n)||n<=0||!Ze(i)||i<=0)},ROe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],kOe=function(t){return t&&t.type&&kS(t.type)&&ROe.indexOf(t.type)>=0},dre=function(t){return t&&B3(t)==="object"&&"cx"in t&&"cy"in t&&"r"in t},LOe=function(t,r,n,i){var o,a=(o=kI==null?void 0:kI[i])!==null&&o!==void 0?o:[];return!kt(t)&&(i&&a.includes(r)||POe.includes(r))||n&&bj.includes(r)},Dt=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var i=t;if(P.isValidElement(t)&&(i=t.props),!$0(i))return null;var o={};return Object.keys(i).forEach(function(a){var s;LOe((s=i)===null||s===void 0?void 0:s[a],a,r,n)&&(o[a]=i[a])}),o},hre=function e(t,r){if(t===r)return!0;var n=P.Children.count(t);if(n!==P.Children.count(r))return!1;if(n===0)return!0;if(n===1)return aG(qi(t)?t[0]:t,qi(r)?r[0]:r);for(var i=0;i<n;i++){var o=t[i],a=r[i];if(qi(o)||qi(a)){if(!e(o,a))return!1}else if(!aG(o,a))return!1}return!0},aG=function(t,r){if(bt(t)&&bt(r))return!0;if(!bt(t)&&!bt(r)){var n=t.props||{},i=n.children,o=rG(n,OOe),a=r.props||{},s=a.children,l=rG(a,IOe);return i&&s?sy(o,l)&&hre(i,s):!i&&!s?sy(o,l):!1}return!1},sG=function(t,r){var n=[],i={};return xj(t).forEach(function(o,a){if(kOe(o))n.push(o);else if(o){var s=zf(o.type),l=r[s]||{},u=l.handler,d=l.once;if(u&&(!d||!i[s])){var c=u(o,s,a);n.push(c),i[s]=!0}}}),n},NOe=function(t){var r=t&&t.type;return r&&nG[r]?nG[r]:null},zOe=function(t,r){return xj(r).indexOf(t)},BOe=["children","width","height","viewBox","className","style"];function F3(){return F3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F3.apply(this,arguments)}function FOe(e,t){if(e==null)return{};var r=jOe(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function jOe(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function j3(e){var t=e.children,r=e.width,n=e.height,i=e.viewBox,o=e.className,a=e.style,s=FOe(e,BOe),l=i||{width:r,height:n,x:0,y:0},u=Kr("recharts-surface",o);return le.createElement("svg",F3({},Dt(s,!0,"svg"),{className:u,width:r,height:n,style:a,viewBox:"".concat(l.x," ").concat(l.y," ").concat(l.width," ").concat(l.height)}),le.createElement("title",null,e.title),le.createElement("desc",null,e.desc),t)}var UOe=["children","className"];function U3(){return U3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},U3.apply(this,arguments)}function $Oe(e,t){if(e==null)return{};var r=VOe(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function VOe(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}var xr=le.forwardRef(function(e,t){var r=e.children,n=e.className,i=$Oe(e,UOe),o=Kr("recharts-layer",n);return le.createElement("g",U3({className:o},Dt(i,!0),{ref:t}),r)}),HOe=g2;function GOe(){this.__data__=new HOe,this.size=0}var WOe=GOe;function qOe(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var KOe=qOe;function XOe(e){return this.__data__.get(e)}var YOe=XOe;function QOe(e){return this.__data__.has(e)}var ZOe=QOe,JOe=g2,eIe=dj,tIe=hj,rIe=200;function nIe(e,t){var r=this.__data__;if(r instanceof JOe){var n=r.__data__;if(!eIe||n.length<rIe-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new tIe(n)}return r.set(e,t),this.size=r.size,this}var iIe=nIe,oIe=g2,aIe=WOe,sIe=KOe,lIe=YOe,uIe=ZOe,cIe=iIe;function K0(e){var t=this.__data__=new oIe(e);this.size=t.size}K0.prototype.clear=aIe;K0.prototype.delete=sIe;K0.prototype.get=lIe;K0.prototype.has=uIe;K0.prototype.set=cIe;var fre=K0,dIe="__lodash_hash_undefined__";function hIe(e){return this.__data__.set(e,dIe),this}var fIe=hIe;function pIe(e){return this.__data__.has(e)}var mIe=pIe,gIe=hj,vIe=fIe,yIe=mIe;function rM(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new gIe;++t<r;)this.add(e[t])}rM.prototype.add=rM.prototype.push=vIe;rM.prototype.has=yIe;var pre=rM;function bIe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var mre=bIe;function xIe(e,t){return e.has(t)}var gre=xIe,wIe=pre,SIe=mre,_Ie=gre,CIe=1,AIe=2;function EIe(e,t,r,n,i,o){var a=r&CIe,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var u=o.get(e),d=o.get(t);if(u&&d)return u==t&&d==e;var c=-1,h=!0,f=r&AIe?new wIe:void 0;for(o.set(e,t),o.set(t,e);++c<s;){var m=e[c],p=t[c];if(n)var g=a?n(p,m,c,t,e,o):n(m,p,c,e,t,o);if(g!==void 0){if(g)continue;h=!1;break}if(f){if(!SIe(t,function(v,b){if(!_Ie(f,b)&&(m===v||i(m,v,r,n,o)))return f.push(b)})){h=!1;break}}else if(!(m===p||i(m,p,r,n,o))){h=!1;break}}return o.delete(e),o.delete(t),h}var vre=EIe,MIe=nd,PIe=MIe.Uint8Array,TIe=PIe;function OIe(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}var IIe=OIe;function DIe(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var wj=DIe,lG=RS,uG=TIe,RIe=cj,kIe=vre,LIe=IIe,NIe=wj,zIe=1,BIe=2,FIe="[object Boolean]",jIe="[object Date]",UIe="[object Error]",$Ie="[object Map]",VIe="[object Number]",HIe="[object RegExp]",GIe="[object Set]",WIe="[object String]",qIe="[object Symbol]",KIe="[object ArrayBuffer]",XIe="[object DataView]",cG=lG?lG.prototype:void 0,NI=cG?cG.valueOf:void 0;function YIe(e,t,r,n,i,o,a){switch(r){case XIe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case KIe:return!(e.byteLength!=t.byteLength||!o(new uG(e),new uG(t)));case FIe:case jIe:case VIe:return RIe(+e,+t);case UIe:return e.name==t.name&&e.message==t.message;case HIe:case WIe:return e==t+"";case $Ie:var s=LIe;case GIe:var l=n&zIe;if(s||(s=NIe),e.size!=t.size&&!l)return!1;var u=a.get(e);if(u)return u==t;n|=BIe,a.set(e,t);var d=kIe(s(e),s(t),n,i,o,a);return a.delete(e),d;case qIe:if(NI)return NI.call(e)==NI.call(t)}return!1}var QIe=YIe;function ZIe(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var yre=ZIe,JIe=yre,eDe=Za;function tDe(e,t,r){var n=t(e);return eDe(e)?n:JIe(n,r(e))}var rDe=tDe;function nDe(e,t){for(var r=-1,n=e==null?0:e.length,i=0,o=[];++r<n;){var a=e[r];t(a,r,e)&&(o[i++]=a)}return o}var iDe=nDe;function oDe(){return[]}var aDe=oDe,sDe=iDe,lDe=aDe,uDe=Object.prototype,cDe=uDe.propertyIsEnumerable,dG=Object.getOwnPropertySymbols,dDe=dG?function(e){return e==null?[]:(e=Object(e),sDe(dG(e),function(t){return cDe.call(e,t)}))}:lDe,hDe=dDe;function fDe(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var pDe=fDe,mDe=xh,gDe=wh,vDe="[object Arguments]";function yDe(e){return gDe(e)&&mDe(e)==vDe}var bDe=yDe,hG=bDe,xDe=wh,bre=Object.prototype,wDe=bre.hasOwnProperty,SDe=bre.propertyIsEnumerable,_De=hG(function(){return arguments}())?hG:function(e){return xDe(e)&&wDe.call(e,"callee")&&!SDe.call(e,"callee")},Sj=_De,nM={exports:{}};function CDe(){return!1}var ADe=CDe;nM.exports;(function(e,t){var r=nd,n=ADe,i=t&&!t.nodeType&&t,o=i&&!0&&e&&!e.nodeType&&e,a=o&&o.exports===i,s=a?r.Buffer:void 0,l=s?s.isBuffer:void 0,u=l||n;e.exports=u})(nM,nM.exports);var xre=nM.exports,EDe=9007199254740991,MDe=/^(?:0|[1-9]\d*)$/;function PDe(e,t){var r=typeof e;return t=t??EDe,!!t&&(r=="number"||r!="symbol"&&MDe.test(e))&&e>-1&&e%1==0&&e<t}var _j=PDe,TDe=9007199254740991;function ODe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=TDe}var Cj=ODe,IDe=xh,DDe=Cj,RDe=wh,kDe="[object Arguments]",LDe="[object Array]",NDe="[object Boolean]",zDe="[object Date]",BDe="[object Error]",FDe="[object Function]",jDe="[object Map]",UDe="[object Number]",$De="[object Object]",VDe="[object RegExp]",HDe="[object Set]",GDe="[object String]",WDe="[object WeakMap]",qDe="[object ArrayBuffer]",KDe="[object DataView]",XDe="[object Float32Array]",YDe="[object Float64Array]",QDe="[object Int8Array]",ZDe="[object Int16Array]",JDe="[object Int32Array]",eRe="[object Uint8Array]",tRe="[object Uint8ClampedArray]",rRe="[object Uint16Array]",nRe="[object Uint32Array]",Un={};Un[XDe]=Un[YDe]=Un[QDe]=Un[ZDe]=Un[JDe]=Un[eRe]=Un[tRe]=Un[rRe]=Un[nRe]=!0;Un[kDe]=Un[LDe]=Un[qDe]=Un[NDe]=Un[KDe]=Un[zDe]=Un[BDe]=Un[FDe]=Un[jDe]=Un[UDe]=Un[$De]=Un[VDe]=Un[HDe]=Un[GDe]=Un[WDe]=!1;function iRe(e){return RDe(e)&&DDe(e.length)&&!!Un[IDe(e)]}var oRe=iRe;function aRe(e){return function(t){return e(t)}}var wre=aRe,iM={exports:{}};iM.exports;(function(e,t){var r=ere,n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===n,a=o&&r.process,s=function(){try{var l=i&&i.require&&i.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();e.exports=s})(iM,iM.exports);var sRe=iM.exports,lRe=oRe,uRe=wre,fG=sRe,pG=fG&&fG.isTypedArray,cRe=pG?uRe(pG):lRe,Sre=cRe,dRe=pDe,hRe=Sj,fRe=Za,pRe=xre,mRe=_j,gRe=Sre,vRe=Object.prototype,yRe=vRe.hasOwnProperty;function bRe(e,t){var r=fRe(e),n=!r&&hRe(e),i=!r&&!n&&pRe(e),o=!r&&!n&&!i&&gRe(e),a=r||n||i||o,s=a?dRe(e.length,String):[],l=s.length;for(var u in e)(t||yRe.call(e,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||mRe(u,l)))&&s.push(u);return s}var xRe=bRe,wRe=Object.prototype;function SRe(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||wRe;return e===r}var _Re=SRe;function CRe(e,t){return function(r){return e(t(r))}}var _re=CRe,ARe=_re,ERe=ARe(Object.keys,Object),MRe=ERe,PRe=_Re,TRe=MRe,ORe=Object.prototype,IRe=ORe.hasOwnProperty;function DRe(e){if(!PRe(e))return TRe(e);var t=[];for(var r in Object(e))IRe.call(e,r)&&r!="constructor"&&t.push(r);return t}var RRe=DRe,kRe=lj,LRe=Cj;function NRe(e){return e!=null&&LRe(e.length)&&!kRe(e)}var LS=NRe,zRe=xRe,BRe=RRe,FRe=LS;function jRe(e){return FRe(e)?zRe(e):BRe(e)}var T2=jRe,URe=rDe,$Re=hDe,VRe=T2;function HRe(e){return URe(e,VRe,$Re)}var GRe=HRe,mG=GRe,WRe=1,qRe=Object.prototype,KRe=qRe.hasOwnProperty;function XRe(e,t,r,n,i,o){var a=r&WRe,s=mG(e),l=s.length,u=mG(t),d=u.length;if(l!=d&&!a)return!1;for(var c=l;c--;){var h=s[c];if(!(a?h in t:KRe.call(t,h)))return!1}var f=o.get(e),m=o.get(t);if(f&&m)return f==t&&m==e;var p=!0;o.set(e,t),o.set(t,e);for(var g=a;++c<l;){h=s[c];var v=e[h],b=t[h];if(n)var y=a?n(b,v,h,t,e,o):n(v,b,h,e,t,o);if(!(y===void 0?v===b||i(v,b,r,n,o):y)){p=!1;break}g||(g=h=="constructor")}if(p&&!g){var x=e.constructor,S=t.constructor;x!=S&&"constructor"in e&&"constructor"in t&&!(typeof x=="function"&&x instanceof x&&typeof S=="function"&&S instanceof S)&&(p=!1)}return o.delete(e),o.delete(t),p}var YRe=XRe,QRe=sg,ZRe=nd,JRe=QRe(ZRe,"DataView"),eke=JRe,tke=sg,rke=nd,nke=tke(rke,"Promise"),ike=nke,oke=sg,ake=nd,ske=oke(ake,"Set"),Cre=ske,lke=sg,uke=nd,cke=lke(uke,"WeakMap"),dke=cke,$3=eke,V3=dj,H3=ike,G3=Cre,W3=dke,Are=xh,X0=rre,gG="[object Map]",hke="[object Object]",vG="[object Promise]",yG="[object Set]",bG="[object WeakMap]",xG="[object DataView]",fke=X0($3),pke=X0(V3),mke=X0(H3),gke=X0(G3),vke=X0(W3),zp=Are;($3&&zp(new $3(new ArrayBuffer(1)))!=xG||V3&&zp(new V3)!=gG||H3&&zp(H3.resolve())!=vG||G3&&zp(new G3)!=yG||W3&&zp(new W3)!=bG)&&(zp=function(e){var t=Are(e),r=t==hke?e.constructor:void 0,n=r?X0(r):"";if(n)switch(n){case fke:return xG;case pke:return gG;case mke:return vG;case gke:return yG;case vke:return bG}return t});var yke=zp,zI=fre,bke=vre,xke=QIe,wke=YRe,wG=yke,SG=Za,_G=xre,Ske=Sre,_ke=1,CG="[object Arguments]",AG="[object Array]",W_="[object Object]",Cke=Object.prototype,EG=Cke.hasOwnProperty;function Ake(e,t,r,n,i,o){var a=SG(e),s=SG(t),l=a?AG:wG(e),u=s?AG:wG(t);l=l==CG?W_:l,u=u==CG?W_:u;var d=l==W_,c=u==W_,h=l==u;if(h&&_G(e)){if(!_G(t))return!1;a=!0,d=!1}if(h&&!d)return o||(o=new zI),a||Ske(e)?bke(e,t,r,n,i,o):xke(e,t,l,r,n,i,o);if(!(r&_ke)){var f=d&&EG.call(e,"__wrapped__"),m=c&&EG.call(t,"__wrapped__");if(f||m){var p=f?e.value():e,g=m?t.value():t;return o||(o=new zI),i(p,g,r,n,o)}}return h?(o||(o=new zI),wke(e,t,r,n,i,o)):!1}var Eke=Ake,Mke=Eke,MG=wh;function Ere(e,t,r,n,i){return e===t?!0:e==null||t==null||!MG(e)&&!MG(t)?e!==e&&t!==t:Mke(e,t,r,n,Ere,i)}var Aj=Ere,Pke=fre,Tke=Aj,Oke=1,Ike=2;function Dke(e,t,r,n){var i=r.length,o=i,a=!n;if(e==null)return!o;for(e=Object(e);i--;){var s=r[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){s=r[i];var l=s[0],u=e[l],d=s[1];if(a&&s[2]){if(u===void 0&&!(l in e))return!1}else{var c=new Pke;if(n)var h=n(u,d,l,e,t,c);if(!(h===void 0?Tke(d,u,Oke|Ike,n,c):h))return!1}}return!0}var Rke=Dke,kke=fp;function Lke(e){return e===e&&!kke(e)}var Mre=Lke,Nke=Mre,zke=T2;function Bke(e){for(var t=zke(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,Nke(i)]}return t}var Fke=Bke;function jke(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var Pre=jke,Uke=Rke,$ke=Fke,Vke=Pre;function Hke(e){var t=$ke(e);return t.length==1&&t[0][2]?Vke(t[0][0],t[0][1]):function(r){return r===e||Uke(r,e,t)}}var Gke=Hke;function Wke(e,t){return e!=null&&t in Object(e)}var qke=Wke,Kke=are,Xke=Sj,Yke=Za,Qke=_j,Zke=Cj,Jke=y2;function e3e(e,t,r){t=Kke(t,e);for(var n=-1,i=t.length,o=!1;++n<i;){var a=Jke(t[n]);if(!(o=e!=null&&r(e,a)))break;e=e[a]}return o||++n!=i?o:(i=e==null?0:e.length,!!i&&Zke(i)&&Qke(a,i)&&(Yke(e)||Xke(e)))}var t3e=e3e,r3e=qke,n3e=t3e;function i3e(e,t){return e!=null&&n3e(e,t,r3e)}var o3e=i3e,a3e=Aj,s3e=sre,l3e=o3e,u3e=uj,c3e=Mre,d3e=Pre,h3e=y2,f3e=1,p3e=2;function m3e(e,t){return u3e(e)&&c3e(t)?d3e(h3e(e),t):function(r){var n=s3e(r,e);return n===void 0&&n===t?l3e(r,e):a3e(t,n,f3e|p3e)}}var g3e=m3e;function v3e(e){return e}var Y0=v3e;function y3e(e){return function(t){return t==null?void 0:t[e]}}var b3e=y3e,x3e=mj;function w3e(e){return function(t){return x3e(t,e)}}var S3e=w3e,_3e=b3e,C3e=S3e,A3e=uj,E3e=y2;function M3e(e){return A3e(e)?_3e(E3e(e)):C3e(e)}var P3e=M3e,T3e=Gke,O3e=g3e,I3e=Y0,D3e=Za,R3e=P3e;function k3e(e){return typeof e=="function"?e:e==null?I3e:typeof e=="object"?D3e(e)?O3e(e[0],e[1]):T3e(e):R3e(e)}var id=k3e;function L3e(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}var Tre=L3e;function N3e(e){return e!==e}var z3e=N3e;function B3e(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}var F3e=B3e,j3e=Tre,U3e=z3e,$3e=F3e;function V3e(e,t,r){return t===t?$3e(e,t,r):j3e(e,U3e,r)}var H3e=V3e,G3e=H3e;function W3e(e,t){var r=e==null?0:e.length;return!!r&&G3e(e,t,0)>-1}var q3e=W3e;function K3e(e,t,r){for(var n=-1,i=e==null?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}var X3e=K3e;function Y3e(){}var Q3e=Y3e,BI=Cre,Z3e=Q3e,J3e=wj,eLe=1/0,tLe=BI&&1/J3e(new BI([,-0]))[1]==eLe?function(e){return new BI(e)}:Z3e,rLe=tLe,nLe=pre,iLe=q3e,oLe=X3e,aLe=gre,sLe=rLe,lLe=wj,uLe=200;function cLe(e,t,r){var n=-1,i=iLe,o=e.length,a=!0,s=[],l=s;if(r)a=!1,i=oLe;else if(o>=uLe){var u=t?null:sLe(e);if(u)return lLe(u);a=!1,i=aLe,l=new nLe}else l=t?[]:s;e:for(;++n<o;){var d=e[n],c=t?t(d):d;if(d=r||d!==0?d:0,a&&c===c){for(var h=l.length;h--;)if(l[h]===c)continue e;t&&l.push(c),s.push(d)}else i(l,c,r)||(l!==s&&l.push(c),s.push(d))}return s}var dLe=cLe,hLe=id,fLe=dLe;function pLe(e,t){return e&&e.length?fLe(e,hLe(t)):[]}var mLe=pLe;const oM=Ur(mLe);function gLe(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),r=r>i?i:r,r<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(i);++n<i;)o[n]=e[n+t];return o}var vLe=gLe,yLe=vLe;function bLe(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:yLe(e,t,r)}var xLe=bLe,wLe="\\ud800-\\udfff",SLe="\\u0300-\\u036f",_Le="\\ufe20-\\ufe2f",CLe="\\u20d0-\\u20ff",ALe=SLe+_Le+CLe,ELe="\\ufe0e\\ufe0f",MLe="\\u200d",PLe=RegExp("["+MLe+wLe+ALe+ELe+"]");function TLe(e){return PLe.test(e)}var Ore=TLe;function OLe(e){return e.split("")}var ILe=OLe,Ire="\\ud800-\\udfff",DLe="\\u0300-\\u036f",RLe="\\ufe20-\\ufe2f",kLe="\\u20d0-\\u20ff",LLe=DLe+RLe+kLe,NLe="\\ufe0e\\ufe0f",zLe="["+Ire+"]",q3="["+LLe+"]",K3="\\ud83c[\\udffb-\\udfff]",BLe="(?:"+q3+"|"+K3+")",Dre="[^"+Ire+"]",Rre="(?:\\ud83c[\\udde6-\\uddff]){2}",kre="[\\ud800-\\udbff][\\udc00-\\udfff]",FLe="\\u200d",Lre=BLe+"?",Nre="["+NLe+"]?",jLe="(?:"+FLe+"(?:"+[Dre,Rre,kre].join("|")+")"+Nre+Lre+")*",ULe=Nre+Lre+jLe,$Le="(?:"+[Dre+q3+"?",q3,Rre,kre,zLe].join("|")+")",VLe=RegExp(K3+"(?="+K3+")|"+$Le+ULe,"g");function HLe(e){return e.match(VLe)||[]}var GLe=HLe,WLe=ILe,qLe=Ore,KLe=GLe;function XLe(e){return qLe(e)?KLe(e):WLe(e)}var YLe=XLe,QLe=xLe,ZLe=Ore,JLe=YLe,eNe=ore;function tNe(e){return function(t){t=eNe(t);var r=ZLe(t)?JLe(t):void 0,n=r?r[0]:t.charAt(0),i=r?QLe(r,1).join(""):t.slice(1);return n[e]()+i}}var rNe=tNe,nNe=rNe,iNe=nNe("toUpperCase"),oNe=iNe;const O2=Ur(oNe);function kn(e){return function(){return e}}const zre=Math.cos,aM=Math.sin,Uu=Math.sqrt,sM=Math.PI,I2=2*sM,X3=Math.PI,Y3=2*X3,Bp=1e-6,aNe=Y3-Bp;function Bre(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function sNe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Bre;const r=10**t;return function(n){this._+=n[0];for(let i=1,o=n.length;i<o;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class lNe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Bre:sNe(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,i){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,r,n,i,o,a){this._append`C${+t},${+r},${+n},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(t,r,n,i,o){if(t=+t,r=+r,n=+n,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,l=n-t,u=i-r,d=a-t,c=s-r,h=d*d+c*c;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>Bp)if(!(Math.abs(c*l-u*d)>Bp)||!o)this._append`L${this._x1=t},${this._y1=r}`;else{let f=n-a,m=i-s,p=l*l+u*u,g=f*f+m*m,v=Math.sqrt(p),b=Math.sqrt(h),y=o*Math.tan((X3-Math.acos((p+h-g)/(2*v*b)))/2),x=y/b,S=y/v;Math.abs(x-1)>Bp&&this._append`L${t+x*d},${r+x*c}`,this._append`A${o},${o},0,0,${+(c*f>d*m)},${this._x1=t+S*l},${this._y1=r+S*u}`}}arc(t,r,n,i,o,a){if(t=+t,r=+r,n=+n,a=!!a,n<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(i),l=n*Math.sin(i),u=t+s,d=r+l,c=1^a,h=a?i-o:o-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Bp||Math.abs(this._y1-d)>Bp)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%Y3+Y3),h>aNe?this._append`A${n},${n},0,1,${c},${t-s},${r-l}A${n},${n},0,1,${c},${this._x1=u},${this._y1=d}`:h>Bp&&this._append`A${n},${n},0,${+(h>=X3)},${c},${this._x1=t+n*Math.cos(o)},${this._y1=r+n*Math.sin(o)}`)}rect(t,r,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function Ej(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new lNe(t)}function Mj(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Fre(e){this._context=e}Fre.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function D2(e){return new Fre(e)}function jre(e){return e[0]}function Ure(e){return e[1]}function $re(e,t){var r=kn(!0),n=null,i=D2,o=null,a=Ej(s);e=typeof e=="function"?e:e===void 0?jre:kn(e),t=typeof t=="function"?t:t===void 0?Ure:kn(t);function s(l){var u,d=(l=Mj(l)).length,c,h=!1,f;for(n==null&&(o=i(f=a())),u=0;u<=d;++u)!(u<d&&r(c=l[u],u,l))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+e(c,u,l),+t(c,u,l));if(f)return o=null,f+""||null}return s.x=function(l){return arguments.length?(e=typeof l=="function"?l:kn(+l),s):e},s.y=function(l){return arguments.length?(t=typeof l=="function"?l:kn(+l),s):t},s.defined=function(l){return arguments.length?(r=typeof l=="function"?l:kn(!!l),s):r},s.curve=function(l){return arguments.length?(i=l,n!=null&&(o=i(n)),s):i},s.context=function(l){return arguments.length?(l==null?n=o=null:o=i(n=l),s):n},s}function q_(e,t,r){var n=null,i=kn(!0),o=null,a=D2,s=null,l=Ej(u);e=typeof e=="function"?e:e===void 0?jre:kn(+e),t=typeof t=="function"?t:kn(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?Ure:kn(+r);function u(c){var h,f,m,p=(c=Mj(c)).length,g,v=!1,b,y=new Array(p),x=new Array(p);for(o==null&&(s=a(b=l())),h=0;h<=p;++h){if(!(h<p&&i(g=c[h],h,c))===v)if(v=!v)f=h,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),m=h-1;m>=f;--m)s.point(y[m],x[m]);s.lineEnd(),s.areaEnd()}v&&(y[h]=+e(g,h,c),x[h]=+t(g,h,c),s.point(n?+n(g,h,c):y[h],r?+r(g,h,c):x[h]))}if(b)return s=null,b+""||null}function d(){return $re().defined(i).curve(a).context(o)}return u.x=function(c){return arguments.length?(e=typeof c=="function"?c:kn(+c),n=null,u):e},u.x0=function(c){return arguments.length?(e=typeof c=="function"?c:kn(+c),u):e},u.x1=function(c){return arguments.length?(n=c==null?null:typeof c=="function"?c:kn(+c),u):n},u.y=function(c){return arguments.length?(t=typeof c=="function"?c:kn(+c),r=null,u):t},u.y0=function(c){return arguments.length?(t=typeof c=="function"?c:kn(+c),u):t},u.y1=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:kn(+c),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(c){return arguments.length?(i=typeof c=="function"?c:kn(!!c),u):i},u.curve=function(c){return arguments.length?(a=c,o!=null&&(s=a(o)),u):a},u.context=function(c){return arguments.length?(c==null?o=s=null:s=a(o=c),u):o},u}class Vre{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function uNe(e){return new Vre(e,!0)}function cNe(e){return new Vre(e,!1)}const Pj={draw(e,t){const r=Uu(t/sM);e.moveTo(r,0),e.arc(0,0,r,0,I2)}},dNe={draw(e,t){const r=Uu(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},Hre=Uu(1/3),hNe=Hre*2,fNe={draw(e,t){const r=Uu(t/hNe),n=r*Hre;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},pNe={draw(e,t){const r=Uu(t),n=-r/2;e.rect(n,n,r,r)}},mNe=.8908130915292852,Gre=aM(sM/10)/aM(7*sM/10),gNe=aM(I2/10)*Gre,vNe=-zre(I2/10)*Gre,yNe={draw(e,t){const r=Uu(t*mNe),n=gNe*r,i=vNe*r;e.moveTo(0,-r),e.lineTo(n,i);for(let o=1;o<5;++o){const a=I2*o/5,s=zre(a),l=aM(a);e.lineTo(l*r,-s*r),e.lineTo(s*n-l*i,l*n+s*i)}e.closePath()}},FI=Uu(3),bNe={draw(e,t){const r=-Uu(t/(FI*3));e.moveTo(0,r*2),e.lineTo(-FI*r,-r),e.lineTo(FI*r,-r),e.closePath()}},dl=-.5,hl=Uu(3)/2,Q3=1/Uu(12),xNe=(Q3/2+1)*3,wNe={draw(e,t){const r=Uu(t/xNe),n=r/2,i=r*Q3,o=n,a=r*Q3+r,s=-o,l=a;e.moveTo(n,i),e.lineTo(o,a),e.lineTo(s,l),e.lineTo(dl*n-hl*i,hl*n+dl*i),e.lineTo(dl*o-hl*a,hl*o+dl*a),e.lineTo(dl*s-hl*l,hl*s+dl*l),e.lineTo(dl*n+hl*i,dl*i-hl*n),e.lineTo(dl*o+hl*a,dl*a-hl*o),e.lineTo(dl*s+hl*l,dl*l-hl*s),e.closePath()}};function SNe(e,t){let r=null,n=Ej(i);e=typeof e=="function"?e:kn(e||Pj),t=typeof t=="function"?t:kn(t===void 0?64:+t);function i(){let o;if(r||(r=o=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),o)return r=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:kn(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:kn(+o),i):t},i.context=function(o){return arguments.length?(r=o??null,i):r},i}function lM(){}function uM(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function Wre(e){this._context=e}Wre.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:uM(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:uM(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function _Ne(e){return new Wre(e)}function qre(e){this._context=e}qre.prototype={areaStart:lM,areaEnd:lM,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:uM(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function CNe(e){return new qre(e)}function Kre(e){this._context=e}Kre.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:uM(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ANe(e){return new Kre(e)}function Xre(e){this._context=e}Xre.prototype={areaStart:lM,areaEnd:lM,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function ENe(e){return new Xre(e)}function PG(e){return e<0?-1:1}function TG(e,t,r){var n=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(n||i<0&&-0),a=(r-e._y1)/(i||n<0&&-0),s=(o*i+a*n)/(n+i);return(PG(o)+PG(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function OG(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function jI(e,t,r){var n=e._x0,i=e._y0,o=e._x1,a=e._y1,s=(o-n)/3;e._context.bezierCurveTo(n+s,i+s*t,o-s,a-s*r,o,a)}function cM(e){this._context=e}cM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:jI(this,this._t0,OG(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,jI(this,OG(this,r=TG(this,e,t)),r);break;default:jI(this,this._t0,r=TG(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function Yre(e){this._context=new Qre(e)}(Yre.prototype=Object.create(cM.prototype)).point=function(e,t){cM.prototype.point.call(this,t,e)};function Qre(e){this._context=e}Qre.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,o){this._context.bezierCurveTo(t,e,n,r,o,i)}};function MNe(e){return new cM(e)}function PNe(e){return new Yre(e)}function Zre(e){this._context=e}Zre.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=IG(e),i=IG(t),o=0,a=1;a<r;++o,++a)this._context.bezierCurveTo(n[0][o],i[0][o],n[1][o],i[1][o],e[a],t[a]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function IG(e){var t,r=e.length-1,n,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/o[t-1],o[t]-=n,a[t]-=n*a[t-1];for(i[r-1]=a[r-1]/o[r-1],t=r-2;t>=0;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function TNe(e){return new Zre(e)}function R2(e,t){this._context=e,this._t=t}R2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function ONe(e){return new R2(e,.5)}function INe(e){return new R2(e,0)}function DNe(e){return new R2(e,1)}function qy(e,t){if((a=e.length)>1)for(var r=1,n,i,o=e[t[0]],a,s=o.length;r<a;++r)for(i=o,o=e[t[r]],n=0;n<s;++n)o[n][1]+=o[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function Z3(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function RNe(e,t){return e[t]}function kNe(e){const t=[];return t.key=e,t}function LNe(){var e=kn([]),t=Z3,r=qy,n=RNe;function i(o){var a=Array.from(e.apply(this,arguments),kNe),s,l=a.length,u=-1,d;for(const c of o)for(s=0,++u;s<l;++s)(a[s][u]=[0,+n(c,a[s].key,u,o)]).data=c;for(s=0,d=Mj(t(a));s<l;++s)a[d[s]].index=s;return r(a,d),a}return i.keys=function(o){return arguments.length?(e=typeof o=="function"?o:kn(Array.from(o)),i):e},i.value=function(o){return arguments.length?(n=typeof o=="function"?o:kn(+o),i):n},i.order=function(o){return arguments.length?(t=o==null?Z3:typeof o=="function"?o:kn(Array.from(o)),i):t},i.offset=function(o){return arguments.length?(r=o??qy,i):r},i}function NNe(e,t){if((n=e.length)>0){for(var r,n,i=0,o=e[0].length,a;i<o;++i){for(a=r=0;r<n;++r)a+=e[r][i][1]||0;if(a)for(r=0;r<n;++r)e[r][i][1]/=a}qy(e,t)}}function zNe(e,t){if((i=e.length)>0){for(var r=0,n=e[t[0]],i,o=n.length;r<o;++r){for(var a=0,s=0;a<i;++a)s+=e[a][r][1]||0;n[r][1]+=n[r][0]=-s/2}qy(e,t)}}function BNe(e,t){if(!(!((a=e.length)>0)||!((o=(i=e[t[0]]).length)>0))){for(var r=0,n=1,i,o,a;n<o;++n){for(var s=0,l=0,u=0;s<a;++s){for(var d=e[t[s]],c=d[n][1]||0,h=d[n-1][1]||0,f=(c-h)/2,m=0;m<s;++m){var p=e[t[m]],g=p[n][1]||0,v=p[n-1][1]||0;f+=g-v}l+=c,u+=f*c}i[n-1][1]+=i[n-1][0]=r,l&&(r-=u/l)}i[n-1][1]+=i[n-1][0]=r,qy(e,t)}}function gw(e){"@babel/helpers - typeof";return gw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gw(e)}var FNe=["type","size","sizeType"];function J3(){return J3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},J3.apply(this,arguments)}function DG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function RG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DG(Object(r),!0).forEach(function(n){jNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jNe(e,t,r){return t=UNe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UNe(e){var t=$Ne(e,"string");return gw(t)==="symbol"?t:String(t)}function $Ne(e,t){if(gw(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(gw(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function VNe(e,t){if(e==null)return{};var r=HNe(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function HNe(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}var Jre={symbolCircle:Pj,symbolCross:dNe,symbolDiamond:fNe,symbolSquare:pNe,symbolStar:yNe,symbolTriangle:bNe,symbolWye:wNe},GNe=Math.PI/180,WNe=function(t){var r="symbol".concat(O2(t));return Jre[r]||Pj},qNe=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var i=18*GNe;return 1.25*t*t*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},KNe=function(t,r){Jre["symbol".concat(O2(t))]=r},Tj=function(t){var r=t.type,n=r===void 0?"circle":r,i=t.size,o=i===void 0?64:i,a=t.sizeType,s=a===void 0?"area":a,l=VNe(t,FNe),u=RG(RG({},l),{},{type:n,size:o,sizeType:s}),d=function(){var g=WNe(n),v=SNe().type(g).size(qNe(o,s,n));return v()},c=u.className,h=u.cx,f=u.cy,m=Dt(u,!0);return h===+h&&f===+f&&o===+o?le.createElement("path",J3({},m,{className:Kr("recharts-symbols",c),transform:"translate(".concat(h,", ").concat(f,")"),d:d()})):null};Tj.registerSymbol=KNe;function Ky(e){"@babel/helpers - typeof";return Ky=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ky(e)}function eL(){return eL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eL.apply(this,arguments)}function kG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function XNe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kG(Object(r),!0).forEach(function(n){vw(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YNe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function LG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ene(n.key),n)}}function QNe(e,t,r){return t&&LG(e.prototype,t),r&&LG(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ZNe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tL(e,t)}function tL(e,t){return tL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},tL(e,t)}function JNe(e){var t=rze();return function(){var n=dM(e),i;if(t){var o=dM(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return eze(this,i)}}function eze(e,t){if(t&&(Ky(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tze(e)}function tze(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rze(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function dM(e){return dM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},dM(e)}function vw(e,t,r){return t=ene(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ene(e){var t=nze(e,"string");return Ky(t)==="symbol"?t:String(t)}function nze(e,t){if(Ky(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ky(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fl=32,Oj=function(e){ZNe(r,e);var t=JNe(r);function r(){return YNe(this,r),t.apply(this,arguments)}return QNe(r,[{key:"renderIcon",value:function(i){var o=this.props.inactiveColor,a=fl/2,s=fl/6,l=fl/3,u=i.inactive?o:i.color;if(i.type==="plainline")return le.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:i.payload.strokeDasharray,x1:0,y1:a,x2:fl,y2:a,className:"recharts-legend-icon"});if(i.type==="line")return le.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(a,"h").concat(l,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*l,",").concat(a,`
            H`).concat(fl,"M").concat(2*l,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(l,",").concat(a),className:"recharts-legend-icon"});if(i.type==="rect")return le.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(fl/8,"h").concat(fl,"v").concat(fl*3/4,"h").concat(-fl,"z"),className:"recharts-legend-icon"});if(le.isValidElement(i.legendIcon)){var d=XNe({},i);return delete d.legendIcon,le.cloneElement(i.legendIcon,d)}return le.createElement(Tj,{fill:u,cx:a,cy:a,size:fl,sizeType:"diameter",type:i.type})}},{key:"renderItems",value:function(){var i=this,o=this.props,a=o.payload,s=o.iconSize,l=o.layout,u=o.formatter,d=o.inactiveColor,c={x:0,y:0,width:fl,height:fl},h={display:l==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(m,p){var g,v=m.formatter||u,b=Kr((g={"recharts-legend-item":!0},vw(g,"legend-item-".concat(p),!0),vw(g,"inactive",m.inactive),g));if(m.type==="none")return null;var y=m.inactive?d:m.color;return le.createElement("li",eL({className:b,style:h,key:"legend-item-".concat(p)},Jf(i.props,m,p)),le.createElement(j3,{width:s,height:s,viewBox:c,style:f},i.renderIcon(m)),le.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},v?v(m.value,m,p):m.value))})}},{key:"render",value:function(){var i=this.props,o=i.payload,a=i.layout,s=i.align;if(!o||!o.length)return null;var l={padding:0,margin:0,textAlign:a==="horizontal"?s:"left"};return le.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}]),r}(P.PureComponent);vw(Oj,"displayName","Legend");vw(Oj,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});function Xy(e){"@babel/helpers - typeof";return Xy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xy(e)}var ize=["ref"];function NG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Eg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NG(Object(r),!0).forEach(function(n){k2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rne(n.key),n)}}function aze(e,t,r){return t&&zG(e.prototype,t),r&&zG(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function sze(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rL(e,t)}function rL(e,t){return rL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},rL(e,t)}function lze(e){var t=cze();return function(){var n=hM(e),i;if(t){var o=hM(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return uze(this,i)}}function uze(e,t){if(t&&(Xy(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tne(e)}function tne(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cze(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function hM(e){return hM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},hM(e)}function k2(e,t,r){return t=rne(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rne(e){var t=dze(e,"string");return Xy(t)==="symbol"?t:String(t)}function dze(e,t){if(Xy(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Xy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hze(e,t){if(e==null)return{};var r=fze(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function fze(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function pze(e){return e.value}function mze(e,t){return e===!0?oM(t,pze):kt(e)?oM(t,e):t}function gze(e,t){if(le.isValidElement(e))return le.cloneElement(e,t);if(kt(e))return le.createElement(e,t);t.ref;var r=hze(t,ize);return le.createElement(Oj,r)}var BG=1,$m=function(e){sze(r,e);var t=lze(r);function r(){var n;oze(this,r);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=t.call.apply(t,[this].concat(o)),k2(tne(n),"state",{boxWidth:-1,boxHeight:-1}),n}return aze(r,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){return this.wrapperNode&&this.wrapperNode.getBoundingClientRect?this.wrapperNode.getBoundingClientRect():null}},{key:"getBBoxSnapshot",value:function(){var i=this.state,o=i.boxWidth,a=i.boxHeight;return o>=0&&a>=0?{width:o,height:a}:null}},{key:"getDefaultPosition",value:function(i){var o=this.props,a=o.layout,s=o.align,l=o.verticalAlign,u=o.margin,d=o.chartWidth,c=o.chartHeight,h,f;if(!i||(i.left===void 0||i.left===null)&&(i.right===void 0||i.right===null))if(s==="center"&&a==="vertical"){var m=this.getBBoxSnapshot()||{width:0};h={left:((d||0)-m.width)/2}}else h=s==="right"?{right:u&&u.right||0}:{left:u&&u.left||0};if(!i||(i.top===void 0||i.top===null)&&(i.bottom===void 0||i.bottom===null))if(l==="middle"){var p=this.getBBoxSnapshot()||{height:0};f={top:((c||0)-p.height)/2}}else f=l==="bottom"?{bottom:u&&u.bottom||0}:{top:u&&u.top||0};return Eg(Eg({},h),f)}},{key:"updateBBox",value:function(){var i=this.state,o=i.boxWidth,a=i.boxHeight,s=this.props.onBBoxUpdate;if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var l=this.wrapperNode.getBoundingClientRect();(Math.abs(l.width-o)>BG||Math.abs(l.height-a)>BG)&&this.setState({boxWidth:l.width,boxHeight:l.height},function(){s&&s(l)})}else(o!==-1||a!==-1)&&this.setState({boxWidth:-1,boxHeight:-1},function(){s&&s(null)})}},{key:"render",value:function(){var i=this,o=this.props,a=o.content,s=o.width,l=o.height,u=o.wrapperStyle,d=o.payloadUniqBy,c=o.payload,h=Eg(Eg({position:"absolute",width:s||"auto",height:l||"auto"},this.getDefaultPosition(u)),u);return le.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(m){i.wrapperNode=m}},gze(a,Eg(Eg({},this.props),{},{payload:mze(d,c)})))}}],[{key:"getWithHeight",value:function(i,o){var a=i.props.layout;return a==="vertical"&&Ze(i.props.height)?{height:i.props.height}:a==="horizontal"?{width:i.props.width||o}:null}}]),r}(P.PureComponent);k2($m,"displayName","Legend");k2($m,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var vze=Object.getOwnPropertyNames,yze=Object.getOwnPropertySymbols,bze=Object.prototype.hasOwnProperty;function FG(e,t){return function(n,i,o){return e(n,i,o)&&t(n,i,o)}}function K_(e){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,i);var o=i.cache,a=o.get(r),s=o.get(n);if(a&&s)return a===n&&s===r;o.set(r,n),o.set(n,r);var l=e(r,n,i);return o.delete(r),o.delete(n),l}}function jG(e){return vze(e).concat(yze(e))}var nne=Object.hasOwn||function(e,t){return bze.call(e,t)};function Q0(e,t){return e||t?e===t:e===t||e!==e&&t!==t}var ine="_owner",UG=Object.getOwnPropertyDescriptor,$G=Object.keys;function xze(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function wze(e,t){return Q0(e.getTime(),t.getTime())}function VG(e,t,r){if(e.size!==t.size)return!1;for(var n={},i=e.entries(),o=0,a,s;(a=i.next())&&!a.done;){for(var l=t.entries(),u=!1,d=0;(s=l.next())&&!s.done;){var c=a.value,h=c[0],f=c[1],m=s.value,p=m[0],g=m[1];!u&&!n[d]&&(u=r.equals(h,p,o,d,e,t,r)&&r.equals(f,g,h,p,e,t,r))&&(n[d]=!0),d++}if(!u)return!1;o++}return!0}function Sze(e,t,r){var n=$G(e),i=n.length;if($G(t).length!==i)return!1;for(var o;i-- >0;)if(o=n[i],o===ine&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!nne(t,o)||!r.equals(e[o],t[o],o,o,e,t,r))return!1;return!0}function Ub(e,t,r){var n=jG(e),i=n.length;if(jG(t).length!==i)return!1;for(var o,a,s;i-- >0;)if(o=n[i],o===ine&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!nne(t,o)||!r.equals(e[o],t[o],o,o,e,t,r)||(a=UG(e,o),s=UG(t,o),(a||s)&&(!a||!s||a.configurable!==s.configurable||a.enumerable!==s.enumerable||a.writable!==s.writable)))return!1;return!0}function _ze(e,t){return Q0(e.valueOf(),t.valueOf())}function Cze(e,t){return e.source===t.source&&e.flags===t.flags}function HG(e,t,r){if(e.size!==t.size)return!1;for(var n={},i=e.values(),o,a;(o=i.next())&&!o.done;){for(var s=t.values(),l=!1,u=0;(a=s.next())&&!a.done;)!l&&!n[u]&&(l=r.equals(o.value,a.value,o.value,a.value,e,t,r))&&(n[u]=!0),u++;if(!l)return!1}return!0}function Aze(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}var Eze="[object Arguments]",Mze="[object Boolean]",Pze="[object Date]",Tze="[object Map]",Oze="[object Number]",Ize="[object Object]",Dze="[object RegExp]",Rze="[object Set]",kze="[object String]",Lze=Array.isArray,GG=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,WG=Object.assign,Nze=Object.prototype.toString.call.bind(Object.prototype.toString);function zze(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areMapsEqual,i=e.areObjectsEqual,o=e.arePrimitiveWrappersEqual,a=e.areRegExpsEqual,s=e.areSetsEqual,l=e.areTypedArraysEqual;return function(d,c,h){if(d===c)return!0;if(d==null||c==null||typeof d!="object"||typeof c!="object")return d!==d&&c!==c;var f=d.constructor;if(f!==c.constructor)return!1;if(f===Object)return i(d,c,h);if(Lze(d))return t(d,c,h);if(GG!=null&&GG(d))return l(d,c,h);if(f===Date)return r(d,c,h);if(f===RegExp)return a(d,c,h);if(f===Map)return n(d,c,h);if(f===Set)return s(d,c,h);var m=Nze(d);return m===Pze?r(d,c,h):m===Dze?a(d,c,h):m===Tze?n(d,c,h):m===Rze?s(d,c,h):m===Ize?typeof d.then!="function"&&typeof c.then!="function"&&i(d,c,h):m===Eze?i(d,c,h):m===Mze||m===Oze||m===kze?o(d,c,h):!1}}function Bze(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,i={areArraysEqual:n?Ub:xze,areDatesEqual:wze,areMapsEqual:n?FG(VG,Ub):VG,areObjectsEqual:n?Ub:Sze,arePrimitiveWrappersEqual:_ze,areRegExpsEqual:Cze,areSetsEqual:n?FG(HG,Ub):HG,areTypedArraysEqual:n?Ub:Aze};if(r&&(i=WG({},i,r(i))),t){var o=K_(i.areArraysEqual),a=K_(i.areMapsEqual),s=K_(i.areObjectsEqual),l=K_(i.areSetsEqual);i=WG({},i,{areArraysEqual:o,areMapsEqual:a,areObjectsEqual:s,areSetsEqual:l})}return i}function Fze(e){return function(t,r,n,i,o,a,s){return e(t,r,s)}}function jze(e){var t=e.circular,r=e.comparator,n=e.createState,i=e.equals,o=e.strict;if(n)return function(l,u){var d=n(),c=d.cache,h=c===void 0?t?new WeakMap:void 0:c,f=d.meta;return r(l,u,{cache:h,equals:i,meta:f,strict:o})};if(t)return function(l,u){return r(l,u,{cache:new WeakMap,equals:i,meta:void 0,strict:o})};var a={cache:void 0,equals:i,meta:void 0,strict:o};return function(l,u){return r(l,u,a)}}var Uze=mp();mp({strict:!0});mp({circular:!0});mp({circular:!0,strict:!0});mp({createInternalComparator:function(){return Q0}});mp({strict:!0,createInternalComparator:function(){return Q0}});mp({circular:!0,createInternalComparator:function(){return Q0}});mp({circular:!0,createInternalComparator:function(){return Q0},strict:!0});function mp(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,i=e.createState,o=e.strict,a=o===void 0?!1:o,s=Bze(e),l=zze(s),u=n?n(l):Fze(l);return jze({circular:r,comparator:l,createState:i,equals:u,strict:a})}function qG(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function i(o){r<0&&(r=o),o-r>t?(e(o),r=-1):requestAnimationFrame(i)};requestAnimationFrame(n)}function nL(e){"@babel/helpers - typeof";return nL=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nL(e)}function $ze(e){return Wze(e)||Gze(e)||Hze(e)||Vze()}function Vze(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hze(e,t){if(e){if(typeof e=="string")return KG(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return KG(e,t)}}function KG(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Gze(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Wze(e){if(Array.isArray(e))return e}function qze(){var e={},t=function(){return null},r=!1,n=function i(o){if(!r){if(Array.isArray(o)){if(!o.length)return;var a=o,s=$ze(a),l=s[0],u=s.slice(1);if(typeof l=="number"){qG(i.bind(null,u),l);return}i(l),qG(i.bind(null,u));return}nL(o)==="object"&&(e=o,t(e)),typeof o=="function"&&o()}};return{stop:function(){r=!0},start:function(o){r=!1,n(o)},subscribe:function(o){return t=o,function(){t=function(){return null}}}}}function yw(e){"@babel/helpers - typeof";return yw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yw(e)}function XG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Yy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XG(Object(r),!0).forEach(function(n){fM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fM(e,t,r){return t=Kze(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kze(e){var t=Xze(e,"string");return yw(t)==="symbol"?t:String(t)}function Xze(e,t){if(yw(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(yw(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yze=["Webkit","Moz","O","ms"],Qze=["-webkit-","-moz-","-o-","-ms-"],Zze=["transform","transformOrigin","transition"],Jze=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,i){return n.filter(function(o){return i.includes(o)})})},eBe=function(t){return t},tBe=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},rBe=function(t,r){if(Zze.indexOf(t)===-1)return fM({},t,Number.isNaN(r)?0:r);var n=t==="transition",i=t.replace(/(\w)/,function(a){return a.toUpperCase()}),o=r;return Yze.reduce(function(a,s,l){return n&&(o=r.replace(/(transform|transform-origin)/gim,"".concat(Qze[l],"$1"))),Yy(Yy({},a),{},fM({},s+i,o))},{})},d1=function(t,r){return Object.keys(r).reduce(function(n,i){return Yy(Yy({},n),{},fM({},i,t(i,r[i])))},{})},iL=function(t){return Object.keys(t).reduce(function(r,n){return Yy(Yy({},r),rBe(n,r[n]))},t)},YG=function(t,r,n){return t.map(function(i){return"".concat(tBe(i)," ").concat(r,"ms ").concat(n)}).join(",")};function nBe(e,t){return aBe(e)||oBe(e,t)||one(e,t)||iBe()}function iBe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oBe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function aBe(e){if(Array.isArray(e))return e}function sBe(e){return cBe(e)||uBe(e)||one(e)||lBe()}function lBe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function one(e,t){if(e){if(typeof e=="string")return oL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oL(e,t)}}function uBe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function cBe(e){if(Array.isArray(e))return oL(e)}function oL(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var pM=1e-4,ane=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},sne=function(t,r){return t.map(function(n,i){return n*Math.pow(r,i)}).reduce(function(n,i){return n+i})},QG=function(t,r){return function(n){var i=ane(t,r);return sne(i,n)}},dBe=function(t,r){return function(n){var i=ane(t,r),o=[].concat(sBe(i.map(function(a,s){return a*s}).slice(1)),[0]);return sne(o,n)}},ZG=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[0],o=r[1],a=r[2],s=r[3];if(r.length===1)switch(r[0]){case"linear":i=0,o=0,a=1,s=1;break;case"ease":i=.25,o=.1,a=.25,s=1;break;case"ease-in":i=.42,o=0,a=1,s=1;break;case"ease-out":i=.42,o=0,a=.58,s=1;break;case"ease-in-out":i=0,o=0,a=.58,s=1;break;default:{var l=r[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),d=nBe(u,4);i=d[0],o=d[1],a=d[2],s=d[3]}}}var c=QG(i,a),h=QG(o,s),f=dBe(i,a),m=function(v){return v>1?1:v<0?0:v},p=function(v){for(var b=v>1?1:v,y=b,x=0;x<8;++x){var S=c(y)-b,w=f(y);if(Math.abs(S-b)<pM||w<pM)return h(y);y=m(y-S/w)}return h(y)};return p.isStepper=!1,p},hBe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,i=t.damping,o=i===void 0?8:i,a=t.dt,s=a===void 0?17:a,l=function(d,c,h){var f=-(d-c)*n,m=h*o,p=h+(f-m)*s/1e3,g=h*s/1e3+d;return Math.abs(g-c)<pM&&Math.abs(p)<pM?[c,0]:[g,p]};return l.isStepper=!0,l.dt=s,l},fBe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return ZG(i);case"spring":return hBe();default:if(i.split("(")[0]==="cubic-bezier")return ZG(i)}return typeof i=="function"?i:null};function bw(e){"@babel/helpers - typeof";return bw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bw(e)}function JG(e){return gBe(e)||mBe(e)||lne(e)||pBe()}function pBe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mBe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function gBe(e){if(Array.isArray(e))return sL(e)}function e6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function jo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e6(Object(r),!0).forEach(function(n){aL(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aL(e,t,r){return t=vBe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vBe(e){var t=yBe(e,"string");return bw(t)==="symbol"?t:String(t)}function yBe(e,t){if(bw(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(bw(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bBe(e,t){return SBe(e)||wBe(e,t)||lne(e,t)||xBe()}function xBe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lne(e,t){if(e){if(typeof e=="string")return sL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sL(e,t)}}function sL(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function wBe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function SBe(e){if(Array.isArray(e))return e}var mM=function(t,r,n){return t+(r-t)*n},lL=function(t){var r=t.from,n=t.to;return r!==n},_Be=function e(t,r,n){var i=d1(function(o,a){if(lL(a)){var s=t(a.from,a.to,a.velocity),l=bBe(s,2),u=l[0],d=l[1];return jo(jo({},a),{},{from:u,velocity:d})}return a},r);return n<1?d1(function(o,a){return lL(a)?jo(jo({},a),{},{velocity:mM(a.velocity,i[o].velocity,n),from:mM(a.from,i[o].from,n)}):a},r):e(t,i,n-1)};const CBe=function(e,t,r,n,i){var o=Jze(e,t),a=o.reduce(function(g,v){return jo(jo({},g),{},aL({},v,[e[v],t[v]]))},{}),s=o.reduce(function(g,v){return jo(jo({},g),{},aL({},v,{from:e[v],velocity:0,to:t[v]}))},{}),l=-1,u,d,c=function(){return null},h=function(){return d1(function(v,b){return b.from},s)},f=function(){return!Object.values(s).filter(lL).length},m=function(v){u||(u=v);var b=v-u,y=b/r.dt;s=_Be(r,s,y),i(jo(jo(jo({},e),t),h())),u=v,f()||(l=requestAnimationFrame(c))},p=function(v){d||(d=v);var b=(v-d)/n,y=d1(function(S,w){return mM.apply(void 0,JG(w).concat([r(b)]))},a);if(i(jo(jo(jo({},e),t),y)),b<1)l=requestAnimationFrame(c);else{var x=d1(function(S,w){return mM.apply(void 0,JG(w).concat([r(1)]))},a);i(jo(jo(jo({},e),t),x))}};return c=r.isStepper?m:p,function(){return requestAnimationFrame(c),function(){cancelAnimationFrame(l)}}};function Qy(e){"@babel/helpers - typeof";return Qy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qy(e)}var ABe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function EBe(e,t){if(e==null)return{};var r=MBe(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function MBe(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function UI(e){return IBe(e)||OBe(e)||TBe(e)||PBe()}function PBe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TBe(e,t){if(e){if(typeof e=="string")return uL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uL(e,t)}}function OBe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function IBe(e){if(Array.isArray(e))return uL(e)}function uL(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function t6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function tu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?t6(Object(r),!0).forEach(function(n){Lx(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lx(e,t,r){return t=une(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DBe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r6(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,une(n.key),n)}}function RBe(e,t,r){return t&&r6(e.prototype,t),r&&r6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function une(e){var t=kBe(e,"string");return Qy(t)==="symbol"?t:String(t)}function kBe(e,t){if(Qy(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Qy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LBe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cL(e,t)}function cL(e,t){return cL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},cL(e,t)}function NBe(e){var t=zBe();return function(){var n=gM(e),i;if(t){var o=gM(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return dL(this,i)}}function dL(e,t){if(t&&(Qy(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hL(e)}function hL(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zBe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function gM(e){return gM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},gM(e)}var Yc=function(e){LBe(r,e);var t=NBe(r);function r(n,i){var o;DBe(this,r),o=t.call(this,n,i);var a=o.props,s=a.isActive,l=a.attributeName,u=a.from,d=a.to,c=a.steps,h=a.children,f=a.duration;if(o.handleStyleChange=o.handleStyleChange.bind(hL(o)),o.changeStyle=o.changeStyle.bind(hL(o)),!s||f<=0)return o.state={style:{}},typeof h=="function"&&(o.state={style:d}),dL(o);if(c&&c.length)o.state={style:c[0].style};else if(u){if(typeof h=="function")return o.state={style:u},dL(o);o.state={style:l?Lx({},l,u):u}}else o.state={style:{}};return o}return RBe(r,[{key:"componentDidMount",value:function(){var i=this.props,o=i.isActive,a=i.canBegin;this.mounted=!0,!(!o||!a)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var o=this.props,a=o.isActive,s=o.canBegin,l=o.attributeName,u=o.shouldReAnimate,d=o.to,c=o.from,h=this.state.style;if(s){if(!a){var f={style:l?Lx({},l,d):d};this.state&&h&&(l&&h[l]!==d||!l&&h!==d)&&this.setState(f);return}if(!(Uze(i.to,d)&&i.canBegin&&i.isActive)){var m=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=m||u?c:i.to;if(this.state&&h){var g={style:l?Lx({},l,p):p};(l&&[l]!==p||!l&&h!==p)&&this.setState(g)}this.runAnimation(tu(tu({},this.props),{},{from:p,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var o=this,a=i.from,s=i.to,l=i.duration,u=i.easing,d=i.begin,c=i.onAnimationEnd,h=i.onAnimationStart,f=CBe(a,s,fBe(u),l,this.changeStyle),m=function(){o.stopJSAnimation=f()};this.manager.start([h,d,m,l,c])}},{key:"runStepAnimation",value:function(i){var o=this,a=i.steps,s=i.begin,l=i.onAnimationStart,u=a[0],d=u.style,c=u.duration,h=c===void 0?0:c,f=function(p,g,v){if(v===0)return p;var b=g.duration,y=g.easing,x=y===void 0?"ease":y,S=g.style,w=g.properties,_=g.onAnimationEnd,C=v>0?a[v-1]:g,E=w||Object.keys(S);if(typeof x=="function"||x==="spring")return[].concat(UI(p),[o.runJSAnimation.bind(o,{from:C.style,to:S,duration:b,easing:x}),b]);var A=YG(E,b,x),M=tu(tu(tu({},C.style),S),{},{transition:A});return[].concat(UI(p),[M,b,_]).filter(eBe)};return this.manager.start([l].concat(UI(a.reduce(f,[d,Math.max(h,s)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=qze());var o=i.begin,a=i.duration,s=i.attributeName,l=i.to,u=i.easing,d=i.onAnimationStart,c=i.onAnimationEnd,h=i.steps,f=i.children,m=this.manager;if(this.unSubscribe=m.subscribe(this.handleStyleChange),typeof u=="function"||typeof f=="function"||u==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var p=s?Lx({},s,l):l,g=YG(Object.keys(p),a,u);m.start([d,o,tu(tu({},p),{},{transition:g}),a,c])}},{key:"render",value:function(){var i=this.props,o=i.children;i.begin;var a=i.duration;i.attributeName,i.easing;var s=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=EBe(i,ABe),u=P.Children.count(o),d=iL(this.state.style);if(typeof o=="function")return o(d);if(!s||u===0||a<=0)return o;var c=function(f){var m=f.props,p=m.style,g=p===void 0?{}:p,v=m.className,b=P.cloneElement(f,tu(tu({},l),{},{style:tu(tu({},g),d),className:v}));return b};return u===1?c(P.Children.only(o)):le.createElement("div",null,P.Children.map(o,function(h){return c(h)}))}}]),r}(P.PureComponent);Yc.displayName="Animate";Yc.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Yc.propTypes={from:ve.oneOfType([ve.object,ve.string]),to:ve.oneOfType([ve.object,ve.string]),attributeName:ve.string,duration:ve.number,begin:ve.number,easing:ve.oneOfType([ve.string,ve.func]),steps:ve.arrayOf(ve.shape({duration:ve.number.isRequired,style:ve.object.isRequired,easing:ve.oneOfType([ve.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),ve.func]),properties:ve.arrayOf("string"),onAnimationEnd:ve.func})),children:ve.oneOfType([ve.node,ve.func]),isActive:ve.bool,canBegin:ve.bool,onAnimationEnd:ve.func,shouldReAnimate:ve.bool,onAnimationStart:ve.func,onAnimationReStart:ve.func};Number.isFinite===void 0&&(Number.isFinite=function(e){return typeof e=="number"&&isFinite(e)});ve.object,ve.object,ve.object,ve.element;ve.object,ve.object,ve.object,ve.oneOfType([ve.array,ve.element]),ve.any;var n6=RS,BBe=Sj,FBe=Za,i6=n6?n6.isConcatSpreadable:void 0;function jBe(e){return FBe(e)||BBe(e)||!!(i6&&e&&e[i6])}var UBe=jBe,$Be=yre,VBe=UBe;function cne(e,t,r,n,i){var o=-1,a=e.length;for(r||(r=VBe),i||(i=[]);++o<a;){var s=e[o];t>0&&r(s)?t>1?cne(s,t-1,r,n,i):$Be(i,s):n||(i[i.length]=s)}return i}var dne=cne;function HBe(e){return function(t,r,n){for(var i=-1,o=Object(t),a=n(t),s=a.length;s--;){var l=a[e?s:++i];if(r(o[l],l,o)===!1)break}return t}}var GBe=HBe,WBe=GBe,qBe=WBe(),KBe=qBe,XBe=KBe,YBe=T2;function QBe(e,t){return e&&XBe(e,t,YBe)}var hne=QBe,ZBe=LS;function JBe(e,t){return function(r,n){if(r==null)return r;if(!ZBe(r))return e(r,n);for(var i=r.length,o=t?i:-1,a=Object(r);(t?o--:++o<i)&&n(a[o],o,a)!==!1;);return r}}var eFe=JBe,tFe=hne,rFe=eFe,nFe=rFe(tFe),Ij=nFe,iFe=Ij,oFe=LS;function aFe(e,t){var r=-1,n=oFe(e)?Array(e.length):[];return iFe(e,function(i,o,a){n[++r]=t(i,o,a)}),n}var fne=aFe;function sFe(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var lFe=sFe,o6=V0;function uFe(e,t){if(e!==t){var r=e!==void 0,n=e===null,i=e===e,o=o6(e),a=t!==void 0,s=t===null,l=t===t,u=o6(t);if(!s&&!u&&!o&&e>t||o&&a&&l&&!s&&!u||n&&a&&l||!r&&l||!i)return 1;if(!n&&!o&&!u&&e<t||u&&r&&i&&!n&&!o||s&&r&&i||!a&&i||!l)return-1}return 0}var cFe=uFe,dFe=cFe;function hFe(e,t,r){for(var n=-1,i=e.criteria,o=t.criteria,a=i.length,s=r.length;++n<a;){var l=dFe(i[n],o[n]);if(l){if(n>=s)return l;var u=r[n];return l*(u=="desc"?-1:1)}}return e.index-t.index}var fFe=hFe,$I=pj,pFe=mj,mFe=id,gFe=fne,vFe=lFe,yFe=wre,bFe=fFe,xFe=Y0,wFe=Za;function SFe(e,t,r){t.length?t=$I(t,function(o){return wFe(o)?function(a){return pFe(a,o.length===1?o[0]:o)}:o}):t=[xFe];var n=-1;t=$I(t,yFe(mFe));var i=gFe(e,function(o,a,s){var l=$I(t,function(u){return u(o)});return{criteria:l,index:++n,value:o}});return vFe(i,function(o,a){return bFe(o,a,r)})}var _Fe=SFe;function CFe(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var AFe=CFe,EFe=AFe,a6=Math.max;function MFe(e,t,r){return t=a6(t===void 0?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=a6(n.length-t,0),a=Array(o);++i<o;)a[i]=n[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=n[i];return s[t]=r(a),EFe(e,this,s)}}var PFe=MFe;function TFe(e){return function(){return e}}var OFe=TFe,IFe=sg,DFe=function(){try{var e=IFe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),pne=DFe,RFe=OFe,s6=pne,kFe=Y0,LFe=s6?function(e,t){return s6(e,"toString",{configurable:!0,enumerable:!1,value:RFe(t),writable:!0})}:kFe,NFe=LFe,zFe=800,BFe=16,FFe=Date.now;function jFe(e){var t=0,r=0;return function(){var n=FFe(),i=BFe-(n-r);if(r=n,i>0){if(++t>=zFe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var UFe=jFe,$Fe=NFe,VFe=UFe,HFe=VFe($Fe),GFe=HFe,WFe=Y0,qFe=PFe,KFe=GFe;function XFe(e,t){return KFe(qFe(e,t,WFe),e+"")}var YFe=XFe,QFe=cj,ZFe=LS,JFe=_j,eje=fp;function tje(e,t,r){if(!eje(r))return!1;var n=typeof t;return(n=="number"?ZFe(r)&&JFe(t,r.length):n=="string"&&t in r)?QFe(r[t],e):!1}var L2=tje,rje=dne,nje=_Fe,ije=YFe,l6=L2,oje=ije(function(e,t){if(e==null)return[];var r=t.length;return r>1&&l6(e,t[0],t[1])?t=[]:r>2&&l6(t[0],t[1],t[2])&&(t=[t[0]]),nje(e,rje(t,1),[])}),aje=oje;const Dj=Ur(aje);function xw(e){"@babel/helpers - typeof";return xw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xw(e)}function sje(e,t){return dje(e)||cje(e,t)||uje(e,t)||lje()}function lje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uje(e,t){if(e){if(typeof e=="string")return u6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u6(e,t)}}function u6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function cje(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function dje(e){if(Array.isArray(e))return e}function c6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function VI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c6(Object(r),!0).forEach(function(n){hje(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hje(e,t,r){return t=fje(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fje(e){var t=pje(e,"string");return xw(t)==="symbol"?t:String(t)}function pje(e,t){if(xw(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(xw(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mje(e){return qi(e)&&uo(e[0])&&uo(e[1])?e.join(" ~ "):e}var gje=function(t){var r=t.separator,n=r===void 0?" : ":r,i=t.contentStyle,o=i===void 0?{}:i,a=t.itemStyle,s=a===void 0?{}:a,l=t.labelStyle,u=l===void 0?{}:l,d=t.payload,c=t.formatter,h=t.itemSorter,f=t.wrapperClassName,m=t.labelClassName,p=t.label,g=t.labelFormatter,v=function(){if(d&&d.length){var E={padding:0,margin:0},A=(h?Dj(d,h):d).map(function(M,I){if(M.type==="none")return null;var O=VI({display:"block",paddingTop:4,paddingBottom:4,color:M.color||"#000"},s),T=M.formatter||c||mje,D=M.value,N=M.name,k=D,R=N;if(T&&k!=null&&R!=null){var z=T(D,N,M,I,d);if(Array.isArray(z)){var j=sje(z,2);k=j[0],R=j[1]}else k=z}return le.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(I),style:O},uo(R)?le.createElement("span",{className:"recharts-tooltip-item-name"},R):null,uo(R)?le.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,le.createElement("span",{className:"recharts-tooltip-item-value"},k),le.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return le.createElement("ul",{className:"recharts-tooltip-item-list",style:E},A)}return null},b=VI({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),y=VI({margin:0},u),x=!bt(p),S=x?p:"",w=Kr("recharts-default-tooltip",f),_=Kr("recharts-tooltip-label",m);return x&&g&&d!==void 0&&d!==null&&(S=g(p,d)),le.createElement("div",{className:w,style:b},le.createElement("p",{className:_,style:y},le.isValidElement(S)?S:"".concat(S)),v())},vje=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},jl={isSsr:vje(),get:function(t){return jl[t]},set:function(t,r){if(typeof t=="string")jl[t]=r;else{var n=Object.keys(t);n&&n.length&&n.forEach(function(i){jl[i]=t[i]})}}};function Zy(e){"@babel/helpers - typeof";return Zy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zy(e)}function d6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function cd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d6(Object(r),!0).forEach(function(n){hc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yje(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h6(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,mne(n.key),n)}}function bje(e,t,r){return t&&h6(e.prototype,t),r&&h6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function xje(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fL(e,t)}function fL(e,t){return fL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},fL(e,t)}function wje(e){var t=_je();return function(){var n=vM(e),i;if(t){var o=vM(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return Sje(this,i)}}function Sje(e,t){if(t&&(Zy(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HA(e)}function HA(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _je(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function vM(e){return vM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},vM(e)}function hc(e,t,r){return t=mne(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mne(e){var t=Cje(e,"string");return Zy(t)==="symbol"?t:String(t)}function Cje(e,t){if(Zy(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Zy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $b="recharts-tooltip-wrapper",f6=1;function Aje(e){return e.dataKey}function Eje(e,t){return e===!0?oM(t,Aje):kt(e)?oM(t,e):t}function Mje(e,t){return le.isValidElement(e)?le.cloneElement(e,t):kt(e)?le.createElement(e,t):le.createElement(gje,t)}var Nl=function(e){xje(r,e);var t=wje(r);function r(){var n;yje(this,r);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=t.call.apply(t,[this].concat(o)),hc(HA(n),"state",{boxWidth:-1,boxHeight:-1,dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),hc(HA(n),"handleKeyDown",function(s){s.key==="Escape"&&n.setState({dismissed:!0,dismissedAtCoordinate:cd(cd({},n.state.dismissedAtCoordinate),{},{x:n.props.coordinate.x,y:n.props.coordinate.y})})}),hc(HA(n),"getTranslate",function(s){var l=s.key,u=s.tooltipDimension,d=s.viewBoxDimension,c=n.props,h=c.allowEscapeViewBox,f=c.reverseDirection,m=c.coordinate,p=c.offset,g=c.position,v=c.viewBox;if(g&&Ze(g[l]))return g[l];var b=m[l]-u-p,y=m[l]+p;if(h[l])return f[l]?b:y;if(f[l]){var x=b,S=v[l];return x<S?Math.max(y,v[l]):Math.max(b,v[l])}var w=y+u,_=v[l]+d;return w>_?Math.max(b,v[l]):Math.max(y,v[l])}),n}return bje(r,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"updateBBox",value:function(){var i=this.state,o=i.boxWidth,a=i.boxHeight,s=i.dismissed;if(s?(document.removeEventListener("keydown",this.handleKeyDown),(this.props.coordinate.x!==this.state.dismissedAtCoordinate.x||this.props.coordinate.y!==this.state.dismissedAtCoordinate.y)&&this.setState({dismissed:!1})):document.addEventListener("keydown",this.handleKeyDown),this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var l=this.wrapperNode.getBoundingClientRect();(Math.abs(l.width-o)>f6||Math.abs(l.height-a)>f6)&&this.setState({boxWidth:l.width,boxHeight:l.height})}else(o!==-1||a!==-1)&&this.setState({boxWidth:-1,boxHeight:-1})}},{key:"render",value:function(){var i,o=this,a=this.props,s=a.payload,l=a.isAnimationActive,u=a.animationDuration,d=a.animationEasing,c=a.filterNull,h=a.payloadUniqBy,f=Eje(h,c&&s&&s.length?s.filter(function(O){return!bt(O.value)}):s),m=f&&f.length,p=this.props,g=p.content,v=p.viewBox,b=p.coordinate,y=p.position,x=p.active,S=p.wrapperStyle,w=cd({pointerEvents:"none",visibility:!this.state.dismissed&&x&&m?"visible":"hidden",position:"absolute",top:0,left:0},S),_,C;if(y&&Ze(y.x)&&Ze(y.y))_=y.x,C=y.y;else{var E=this.state,A=E.boxWidth,M=E.boxHeight;A>0&&M>0&&b?(_=this.getTranslate({key:"x",tooltipDimension:A,viewBoxDimension:v.width}),C=this.getTranslate({key:"y",tooltipDimension:M,viewBoxDimension:v.height})):w.visibility="hidden"}w=cd(cd({},iL({transform:this.props.useTranslate3d?"translate3d(".concat(_,"px, ").concat(C,"px, 0)"):"translate(".concat(_,"px, ").concat(C,"px)")})),w),l&&x&&(w=cd(cd({},iL({transition:"transform ".concat(u,"ms ").concat(d)})),w));var I=Kr($b,(i={},hc(i,"".concat($b,"-right"),Ze(_)&&b&&Ze(b.x)&&_>=b.x),hc(i,"".concat($b,"-left"),Ze(_)&&b&&Ze(b.x)&&_<b.x),hc(i,"".concat($b,"-bottom"),Ze(C)&&b&&Ze(b.y)&&C>=b.y),hc(i,"".concat($b,"-top"),Ze(C)&&b&&Ze(b.y)&&C<b.y),i));return le.createElement("div",{tabIndex:-1,role:"dialog",className:I,style:w,ref:function(T){o.wrapperNode=T}},Mje(g,cd(cd({},this.props),{},{payload:f})))}}]),r}(P.PureComponent);hc(Nl,"displayName","Tooltip");hc(Nl,"defaultProps",{active:!1,allowEscapeViewBox:{x:!1,y:!1},reverseDirection:{x:!1,y:!1},offset:10,viewBox:{x:0,y:0,height:0,width:0},coordinate:{x:0,y:0},cursorStyle:{},separator:" : ",wrapperStyle:{},contentStyle:{},itemStyle:{},labelStyle:{},cursor:!0,trigger:"hover",isAnimationActive:!jl.isSsr,animationEasing:"ease",animationDuration:400,filterNull:!0,useTranslate3d:!1});var Pje=nd,Tje=function(){return Pje.Date.now()},Oje=Tje,Ije=/\s/;function Dje(e){for(var t=e.length;t--&&Ije.test(e.charAt(t)););return t}var Rje=Dje,kje=Rje,Lje=/^\s+/;function Nje(e){return e&&e.slice(0,kje(e)+1).replace(Lje,"")}var zje=Nje,Bje=zje,p6=fp,Fje=V0,m6=0/0,jje=/^[-+]0x[0-9a-f]+$/i,Uje=/^0b[01]+$/i,$je=/^0o[0-7]+$/i,Vje=parseInt;function Hje(e){if(typeof e=="number")return e;if(Fje(e))return m6;if(p6(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=p6(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Bje(e);var r=Uje.test(e);return r||$je.test(e)?Vje(e.slice(2),r?2:8):jje.test(e)?m6:+e}var gne=Hje,Gje=fp,HI=Oje,g6=gne,Wje="Expected a function",qje=Math.max,Kje=Math.min;function Xje(e,t,r){var n,i,o,a,s,l,u=0,d=!1,c=!1,h=!0;if(typeof e!="function")throw new TypeError(Wje);t=g6(t)||0,Gje(r)&&(d=!!r.leading,c="maxWait"in r,o=c?qje(g6(r.maxWait)||0,t):o,h="trailing"in r?!!r.trailing:h);function f(w){var _=n,C=i;return n=i=void 0,u=w,a=e.apply(C,_),a}function m(w){return u=w,s=setTimeout(v,t),d?f(w):a}function p(w){var _=w-l,C=w-u,E=t-_;return c?Kje(E,o-C):E}function g(w){var _=w-l,C=w-u;return l===void 0||_>=t||_<0||c&&C>=o}function v(){var w=HI();if(g(w))return b(w);s=setTimeout(v,p(w))}function b(w){return s=void 0,h&&n?f(w):(n=i=void 0,a)}function y(){s!==void 0&&clearTimeout(s),u=0,n=l=i=s=void 0}function x(){return s===void 0?a:b(HI())}function S(){var w=HI(),_=g(w);if(n=arguments,i=this,l=w,_){if(s===void 0)return m(l);if(c)return clearTimeout(s),s=setTimeout(v,t),f(l)}return s===void 0&&(s=setTimeout(v,t)),a}return S.cancel=y,S.flush=x,S}var vne=Xje;const Yje=Ur(vne);var Qje=vne,Zje=fp,Jje="Expected a function";function e4e(e,t,r){var n=!0,i=!0;if(typeof e!="function")throw new TypeError(Jje);return Zje(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),Qje(e,t,{leading:n,maxWait:t,trailing:i})}var t4e=e4e;const yne=Ur(t4e);var pL=function(e,t){return pL=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},pL(e,t)};function r4e(e,t){pL(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function n4e(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}var i4e=function(e,t,r,n){switch(t){case"debounce":return Yje(e,r,n);case"throttle":return yne(e,r,n);default:return e}},v6=function(e){return typeof e=="function"},Vb=function(){return typeof window>"u"},y6=function(e){return e instanceof Element||e instanceof HTMLDocument},o4e=function(e,t,r){return function(n){var i=n.width,o=n.height;e(function(a){return a.width===i&&a.height===o||a.width===i&&!r||a.height===o&&!t?a:{width:i,height:o}})}},a4e=function(e){r4e(t,e);function t(r){var n=e.call(this,r)||this;n.cancelHandler=function(){n.resizeHandler&&n.resizeHandler.cancel&&(n.resizeHandler.cancel(),n.resizeHandler=null)},n.attachObserver=function(){var u=n.props,d=u.targetRef,c=u.observerOptions;if(!Vb()){d&&d.current&&(n.targetRef.current=d.current);var h=n.getElement();h&&(n.observableElement&&n.observableElement===h||(n.observableElement=h,n.resizeObserver.observe(h,c)))}},n.getElement=function(){var u=n.props,d=u.querySelector,c=u.targetDomEl;if(Vb())return null;if(d)return document.querySelector(d);if(c&&y6(c))return c;if(n.targetRef&&y6(n.targetRef.current))return n.targetRef.current;var h=yh.findDOMNode(n);if(!h)return null;var f=n.getRenderType();switch(f){case"renderProp":return h;case"childFunction":return h;case"child":return h;case"childArray":return h;default:return h.parentElement}},n.createResizeHandler=function(u){var d=n.props,c=d.handleWidth,h=c===void 0?!0:c,f=d.handleHeight,m=f===void 0?!0:f,p=d.onResize;if(!(!h&&!m)){var g=o4e(function(v){return n.setState(v,function(){return p==null?void 0:p(n.state.width,n.state.height)})},h,m);u.forEach(function(v){var b=v&&v.contentRect||{},y=b.width,x=b.height,S=!n.skipOnMount&&!Vb();S&&g({width:y,height:x}),n.skipOnMount=!1})}},n.getRenderType=function(){var u=n.props,d=u.render,c=u.children;return v6(d)?"renderProp":v6(c)?"childFunction":P.isValidElement(c)?"child":Array.isArray(c)?"childArray":"parent"};var i=r.skipOnMount,o=r.refreshMode,a=r.refreshRate,s=a===void 0?1e3:a,l=r.refreshOptions;return n.state={width:void 0,height:void 0},n.skipOnMount=i,n.targetRef=P.createRef(),n.observableElement=null,Vb()||(n.resizeHandler=i4e(n.createResizeHandler,o,s,l),n.resizeObserver=new window.ResizeObserver(n.resizeHandler)),n}return t.prototype.componentDidMount=function(){this.attachObserver()},t.prototype.componentDidUpdate=function(){this.attachObserver()},t.prototype.componentWillUnmount=function(){Vb()||(this.observableElement=null,this.resizeObserver.disconnect(),this.cancelHandler())},t.prototype.render=function(){var r=this.props,n=r.render,i=r.children,o=r.nodeType,a=o===void 0?"div":o,s=this.state,l=s.width,u=s.height,d={width:l,height:u,targetRef:this.targetRef},c=this.getRenderType();switch(c){case"renderProp":return n==null?void 0:n(d);case"childFunction":{var h=i;return h==null?void 0:h(d)}case"child":{var f=i;if(f.type&&typeof f.type=="string"){d.targetRef;var m=n4e(d,["targetRef"]);return P.cloneElement(f,m)}return P.cloneElement(f,d)}case"childArray":{var p=i;return p.map(function(g){return!!g&&P.cloneElement(g,d)})}default:return le.createElement(a,null)}},t}(P.PureComponent),Bf=function(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o]};function mL(){return mL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mL.apply(this,arguments)}function s4e(e,t){return d4e(e)||c4e(e,t)||u4e(e,t)||l4e()}function l4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u4e(e,t){if(e){if(typeof e=="string")return b6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b6(e,t)}}function b6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c4e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function d4e(e){if(Array.isArray(e))return e}var ly=P.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,i=n===void 0?{width:-1,height:-1}:n,o=e.width,a=o===void 0?"100%":o,s=e.height,l=s===void 0?"100%":s,u=e.minWidth,d=u===void 0?0:u,c=e.minHeight,h=e.maxHeight,f=e.children,m=e.debounce,p=m===void 0?0:m,g=e.id,v=e.className,b=e.onResize,y=P.useState({containerWidth:i.width,containerHeight:i.height}),x=s4e(y,2),S=x[0],w=x[1],_=P.useRef(null);P.useImperativeHandle(t,function(){return _},[_]);var C=P.useCallback(function(){return _.current?{containerWidth:_.current.clientWidth,containerHeight:_.current.clientHeight}:null},[]),E=P.useCallback(function(){var I=C();if(I){var O=I.containerWidth,T=I.containerHeight;b&&b(O,T),w(function(D){var N=D.containerWidth,k=D.containerHeight;return O!==N||T!==k?{containerWidth:O,containerHeight:T}:D})}},[C,b]),A=P.useMemo(function(){var I=S.containerWidth,O=S.containerHeight;if(I<0||O<0)return null;Bf(am(a)||am(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,l),Bf(!r||r>0,"The aspect(%s) must be greater than zero.",r);var T=am(a)?I:a,D=am(l)?O:l;return r&&r>0&&(T?D=T/r:D&&(T=D*r),h&&D>h&&(D=h)),Bf(T>0||D>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,T,D,a,l,d,c,r),P.cloneElement(f,{width:T,height:D})},[r,f,l,h,c,d,S,a]);P.useEffect(function(){var I=C();I&&w(I)},[C]);var M={width:a,height:l,minWidth:d,minHeight:c,maxHeight:h};return le.createElement(a4e,{handleWidth:!0,handleHeight:!0,onResize:E,targetRef:_,refreshMode:p>0?"debounce":void 0,refreshRate:p},le.createElement("div",mL({},g!=null?{id:"".concat(g)}:{},{className:Kr("recharts-responsive-container",v),style:M,ref:_}),A))}),NS=function(t){return null};NS.displayName="Cell";var gL={exports:{}},GI="(".charCodeAt(0),WI=")".charCodeAt(0),X_="'".charCodeAt(0),qI='"'.charCodeAt(0),KI="\\".charCodeAt(0),Y_="/".charCodeAt(0),XI=",".charCodeAt(0),YI=":".charCodeAt(0),x6="*".charCodeAt(0),h4e=function(e){for(var t=[],r=e,n,i,o,a,s,l,u,d=0,c=r.charCodeAt(d),h=r.length,f=[{nodes:t}],m=0,p,g="",v="",b="";d<h;)if(c<=32){n=d;do n+=1,c=r.charCodeAt(n);while(c<=32);a=r.slice(d,n),o=t[t.length-1],c===WI&&m?b=a:o&&o.type==="div"?o.after=a:c===XI||c===YI||c===Y_&&r.charCodeAt(n+1)!==x6?v=a:t.push({type:"space",sourceIndex:d,value:a}),d=n}else if(c===X_||c===qI){n=d,i=c===X_?"'":'"',a={type:"string",sourceIndex:d,quote:i};do if(s=!1,n=r.indexOf(i,n+1),~n)for(l=n;r.charCodeAt(l-1)===KI;)l-=1,s=!s;else r+=i,n=r.length-1,a.unclosed=!0;while(s);a.value=r.slice(d+1,n),t.push(a),d=n+1,c=r.charCodeAt(d)}else if(c===Y_&&r.charCodeAt(d+1)===x6)a={type:"comment",sourceIndex:d},n=r.indexOf("*/",d),n===-1&&(a.unclosed=!0,n=r.length),a.value=r.slice(d+2,n),t.push(a),d=n+2,c=r.charCodeAt(d);else if(c===Y_||c===XI||c===YI)a=r[d],t.push({type:"div",sourceIndex:d-v.length,value:a,before:v,after:""}),v="",d+=1,c=r.charCodeAt(d);else if(GI===c){n=d;do n+=1,c=r.charCodeAt(n);while(c<=32);if(a={type:"function",sourceIndex:d-g.length,value:g,before:r.slice(d+1,n)},d=n,g==="url"&&c!==X_&&c!==qI){n-=1;do if(s=!1,n=r.indexOf(")",n+1),~n)for(l=n;r.charCodeAt(l-1)===KI;)l-=1,s=!s;else r+=")",n=r.length-1,a.unclosed=!0;while(s);u=n;do u-=1,c=r.charCodeAt(u);while(c<=32);d!==u+1?a.nodes=[{type:"word",sourceIndex:d,value:r.slice(d,u+1)}]:a.nodes=[],a.unclosed&&u+1!==n?(a.after="",a.nodes.push({type:"space",sourceIndex:u+1,value:r.slice(u+1,n)})):a.after=r.slice(u+1,n),d=n+1,c=r.charCodeAt(d),t.push(a)}else m+=1,a.after="",t.push(a),f.push(a),t=a.nodes=[],p=a;g=""}else if(WI===c&&m)d+=1,c=r.charCodeAt(d),p.after=b,b="",m-=1,f.pop(),p=f[m],t=p.nodes;else{n=d;do c===KI&&(n+=1),n+=1,c=r.charCodeAt(n);while(n<h&&!(c<=32||c===X_||c===qI||c===XI||c===YI||c===Y_||c===GI||c===WI&&m));a=r.slice(d,n),GI===c?g=a:t.push({type:"word",sourceIndex:d,value:a}),d=n}for(d=f.length-1;d;d-=1)f[d].unclosed=!0;return f[0].nodes},f4e=function e(t,r,n){var i,o,a,s;for(i=0,o=t.length;i<o;i+=1)a=t[i],n||(s=r(a,i,t)),s!==!1&&a.type==="function"&&Array.isArray(a.nodes)&&e(a.nodes,r,n),n&&r(a,i,t)};function w6(e,t){var r=e.type,n=e.value,i,o;return t&&(o=t(e))!==void 0?o:r==="word"||r==="space"?n:r==="string"?(i=e.quote||"",i+n+(e.unclosed?"":i)):r==="comment"?"/*"+n+(e.unclosed?"":"*/"):r==="div"?(e.before||"")+n+(e.after||""):Array.isArray(e.nodes)?(i=bne(e.nodes),r!=="function"?i:n+"("+(e.before||"")+i+(e.after||"")+(e.unclosed?"":")")):n}function bne(e,t){var r,n;if(Array.isArray(e)){for(r="",n=e.length-1;~n;n-=1)r=w6(e[n],t)+r;return r}return w6(e,t)}var p4e=bne,QI,S6;function m4e(){if(S6)return QI;S6=1;var e="-".charCodeAt(0),t="+".charCodeAt(0),r=".".charCodeAt(0),n="e".charCodeAt(0),i="E".charCodeAt(0);return QI=function(o){for(var a=0,s=o.length,l=!1,u=-1,d=!1,c;a<s;){if(c=o.charCodeAt(a),c>=48&&c<=57)d=!0;else if(c===n||c===i){if(u>-1)break;u=a}else if(c===r){if(l)break;l=!0}else if(c===t||c===e){if(a!==0)break}else break;a+=1}return u+1===a&&a--,d?{number:o.slice(0,a),unit:o.slice(a)}:!1},QI}var g4e=h4e,xne=f4e,wne=p4e;function ep(e){return this instanceof ep?(this.nodes=g4e(e),this):new ep(e)}ep.prototype.toString=function(){return Array.isArray(this.nodes)?wne(this.nodes):""};ep.prototype.walk=function(e,t){return xne(this.nodes,e,t),this};ep.unit=m4e();ep.walk=xne;ep.stringify=wne;var v4e=ep;function y4e(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Sne={};(function(e){var t=function(){function r(h,f){Object.defineProperty(this,"name",{enumerable:!1,writable:!1,value:"JisonParserError"}),h==null&&(h="???"),Object.defineProperty(this,"message",{enumerable:!1,writable:!0,value:h}),this.hash=f;var m;if(f&&f.exception instanceof Error){var p=f.exception;this.message=p.message||h,m=p.stack}m||(Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,this.constructor):m=new Error(h).stack),m&&Object.defineProperty(this,"stack",{enumerable:!1,writable:!1,value:m})}typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf(r.prototype,Error.prototype):r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r.prototype.name="JisonParserError";function n(h){for(var f=[],m=h.pop,p=h.rule,g=0,v=m.length;g<v;g++)f.push([m[g],p[g]]);return f}function i(h){for(var f={},m=h.idx,p=h.goto,g=0,v=m.length;g<v;g++){var b=m[g];f[b]=p[g]}return f}function o(h){for(var f=[],m=h.len,p=h.symbol,g=h.type,v=h.state,b=h.mode,y=h.goto,x=0,S=m.length;x<S;x++){for(var w=m[x],_={},C=0;C<w;C++){var E=p.shift();switch(g.shift()){case 2:_[E]=[b.shift(),y.shift()];break;case 0:_[E]=v.shift();break;default:_[E]=[3]}}f.push(_)}return f}function a(h,f,m){m=m||0;for(var p=0;p<f;p++)this.push(h),h+=m}function s(h,f){for(h=this.length-h,f+=h;h<f;h++)this.push(this[h])}function l(h){for(var f=[],m=0,p=h.length;m<p;m++){var g=h[m];typeof g=="function"?(m++,g.apply(f,h[m])):f.push(g)}return f}var u={trace:function(){},JisonParserError:r,yy:{},options:{type:"lalr",hasPartialLrUpgradeOnConflict:!0,errorRecoveryTokenDiscardCount:3},symbols_:{$accept:0,$end:1,ADD:3,ANGLE:16,CHS:22,COMMA:14,CSS_CPROP:13,CSS_VAR:12,DIV:6,EMS:20,EOF:1,EXS:21,FREQ:18,LENGTH:15,LPAREN:7,MUL:5,NESTED_CALC:9,NUMBER:11,PERCENTAGE:28,PREFIX:10,REMS:23,RES:19,RPAREN:8,SUB:4,TIME:17,VHS:24,VMAXS:27,VMINS:26,VWS:25,css_value:33,css_variable:32,error:2,expression:29,math_expression:30,value:31},terminals_:{1:"EOF",2:"error",3:"ADD",4:"SUB",5:"MUL",6:"DIV",7:"LPAREN",8:"RPAREN",9:"NESTED_CALC",10:"PREFIX",11:"NUMBER",12:"CSS_VAR",13:"CSS_CPROP",14:"COMMA",15:"LENGTH",16:"ANGLE",17:"TIME",18:"FREQ",19:"RES",20:"EMS",21:"EXS",22:"CHS",23:"REMS",24:"VHS",25:"VWS",26:"VMINS",27:"VMAXS",28:"PERCENTAGE"},TERROR:2,EOF:1,originalQuoteName:null,originalParseError:null,cleanupAfterParse:null,constructParseErrorInfo:null,yyMergeLocationInfo:null,__reentrant_call_depth:0,__error_infos:[],__error_recovery_infos:[],quoteName:function(f){return'"'+f+'"'},getSymbolName:function(f){if(this.terminals_[f])return this.terminals_[f];var m=this.symbols_;for(var p in m)if(m[p]===f)return p;return null},describeSymbol:function(f){if(f!==this.EOF&&this.terminal_descriptions_&&this.terminal_descriptions_[f])return this.terminal_descriptions_[f];if(f===this.EOF)return"end of input";var m=this.getSymbolName(f);return m?this.quoteName(m):null},collect_expected_token_set:function(f,m){var p=this.TERROR,g=[],v={};if(!m&&this.state_descriptions_&&this.state_descriptions_[f])return[this.state_descriptions_[f]];for(var b in this.table[f])if(b=+b,b!==p){var y=m?b:this.describeSymbol(b);y&&!v[y]&&(g.push(y),v[y]=!0)}return g},productions_:n({pop:l([29,a,[30,10],31,31,32,32,a,[33,15]]),rule:l([2,a,[3,5],4,7,a,[1,4],2,4,6,a,[1,14],2])}),performAction:function(f,m,p){var g=this.yy;switch(g.parser,g.lexer,f){case 0:this.$=p[m-1];break;case 1:return this.$=p[m-1],p[m-1];case 2:case 3:case 4:case 5:this.$={type:"MathExpression",operator:p[m-1],left:p[m-2],right:p[m]};break;case 6:this.$=p[m-1];break;case 7:this.$={type:"Calc",value:p[m-1]};break;case 8:this.$={type:"Calc",value:p[m-1],prefix:p[m-5]};break;case 9:case 10:case 11:this.$=p[m];break;case 12:this.$={type:"Value",value:parseFloat(p[m])};break;case 13:this.$={type:"Value",value:parseFloat(p[m])*-1};break;case 14:this.$={type:"CssVariable",value:p[m-1]};break;case 15:this.$={type:"CssVariable",value:p[m-3],fallback:p[m-1]};break;case 16:this.$={type:"LengthValue",value:parseFloat(p[m]),unit:/[a-z]+/.exec(p[m])[0]};break;case 17:this.$={type:"AngleValue",value:parseFloat(p[m]),unit:/[a-z]+/.exec(p[m])[0]};break;case 18:this.$={type:"TimeValue",value:parseFloat(p[m]),unit:/[a-z]+/.exec(p[m])[0]};break;case 19:this.$={type:"FrequencyValue",value:parseFloat(p[m]),unit:/[a-z]+/.exec(p[m])[0]};break;case 20:this.$={type:"ResolutionValue",value:parseFloat(p[m]),unit:/[a-z]+/.exec(p[m])[0]};break;case 21:this.$={type:"EmValue",value:parseFloat(p[m]),unit:"em"};break;case 22:this.$={type:"ExValue",value:parseFloat(p[m]),unit:"ex"};break;case 23:this.$={type:"ChValue",value:parseFloat(p[m]),unit:"ch"};break;case 24:this.$={type:"RemValue",value:parseFloat(p[m]),unit:"rem"};break;case 25:this.$={type:"VhValue",value:parseFloat(p[m]),unit:"vh"};break;case 26:this.$={type:"VwValue",value:parseFloat(p[m]),unit:"vw"};break;case 27:this.$={type:"VminValue",value:parseFloat(p[m]),unit:"vmin"};break;case 28:this.$={type:"VmaxValue",value:parseFloat(p[m]),unit:"vmax"};break;case 29:this.$={type:"PercentageValue",value:parseFloat(p[m]),unit:"%"};break;case 30:var v=p[m];v.value*=-1,this.$=v;break}},table:o({len:l([24,1,5,23,1,18,a,[0,3],1,a,[0,16],a,[23,4],s,[28,3],0,0,16,1,6,6,a,[0,3],5,1,2,s,[37,3],s,[20,3],5,0,0]),symbol:l([4,7,9,11,12,a,[15,19,1],1,1,a,[3,4,1],s,[30,19],s,[29,4],7,4,10,11,s,[22,14],s,[19,3],s,[43,22],s,[23,69],s,[139,4],8,s,[51,24],4,s,[138,15],13,s,[186,5],8,s,[6,6],s,[5,5],9,8,14,s,[159,47],s,[60,10]]),type:l([a,[2,19],a,[0,5],1,a,[2,24],a,[0,4],s,[22,19],s,[43,42],s,[23,70],s,[28,25],s,[45,25],s,[113,54]]),state:l([1,2,8,6,7,30,s,[4,3],33,37,s,[5,3],38,s,[4,3],39,s,[4,3],40,s,[4,3],42,s,[21,4],50,s,[5,3],51,s,[4,3]]),mode:l([a,[1,179],a,[2,3],s,[5,5],s,[6,4],a,[1,57]]),goto:l([5,3,4,24,a,[9,15,1],a,[25,5,1],s,[24,19],31,35,32,34,s,[18,14],36,s,[38,19],s,[19,57],s,[118,4],41,s,[24,19],43,35,s,[16,14],44,a,[2,3],28,29,2,a,[3,3],28,29,3,s,[53,4],a,[45,5,1],s,[100,42],52,s,[5,4],53])}),defaultActions:i({idx:l([6,7,8,a,[10,16,1],33,34,39,40,41,45,47,52,53]),goto:l([9,10,11,a,[16,14,1],12,1,30,13,a,[4,4,1],14,15,8])}),parseError:function(f,m,p){if(m.recoverable)typeof this.trace=="function"&&this.trace(f),m.destroy();else throw typeof this.trace=="function"&&this.trace(f),p||(p=this.JisonParserError),new p(f,m)},parse:function(f){var m=this,p=new Array(128),g=new Array(128),v=new Array(128),b=this.table,y=0,x=0;this.TERROR;var S=this.EOF;this.options.errorRecoveryTokenDiscardCount|0;var w=[0,54],_;this.__lexer__?_=this.__lexer__:_=this.__lexer__=Object.create(this.lexer);var C={parseError:void 0,quoteName:void 0,lexer:void 0,parser:void 0,pre_parse:void 0,post_parse:void 0,pre_lex:void 0,post_lex:void 0};typeof assert!="function"||assert,this.yyGetSharedState=function(){return C};function E(J,W){for(var te in W)typeof J[te]>"u"&&Object.prototype.hasOwnProperty.call(W,te)&&(J[te]=W[te])}E(C,this.yy),C.lexer=_,C.parser=this,typeof C.parseError=="function"?this.parseError=function(W,te,Z){return Z||(Z=this.JisonParserError),C.parseError.call(this,W,te,Z)}:this.parseError=this.originalParseError,typeof C.quoteName=="function"?this.quoteName=function(W){return C.quoteName.call(this,W)}:this.quoteName=this.originalQuoteName,this.cleanupAfterParse=function(W,te,Z){var q;if(te){var ie;(C.post_parse||this.post_parse)&&(ie=this.constructParseErrorInfo(null,null,null,!1)),C.post_parse&&(q=C.post_parse.call(this,C,W,ie),typeof q<"u"&&(W=q)),this.post_parse&&(q=this.post_parse.call(this,C,W,ie),typeof q<"u"&&(W=q)),ie&&ie.destroy&&ie.destroy()}if(this.__reentrant_call_depth>1)return W;if(_.cleanupAfterLex&&_.cleanupAfterLex(Z),C&&(C.lexer=void 0,C.parser=void 0,_.yy===C&&(_.yy=void 0)),C=void 0,this.parseError=this.originalParseError,this.quoteName=this.originalQuoteName,p.length=0,g.length=0,v.length=0,y=0,!Z){for(var he=this.__error_infos.length-1;he>=0;he--){var ae=this.__error_infos[he];ae&&typeof ae.destroy=="function"&&ae.destroy()}this.__error_infos.length=0}return W},this.constructParseErrorInfo=function(W,te,Z,q){var ie={errStr:W,exception:te,text:_.match,value:_.yytext,token:this.describeSymbol(x)||x,token_id:x,line:_.yylineno,expected:Z,recoverable:q,state:O,action:T,new_state:$,symbol_stack:p,state_stack:g,value_stack:v,stack_pointer:y,yy:C,lexer:_,parser:this,destroy:function(){var ae=!!this.recoverable;for(var be in this)this.hasOwnProperty(be)&&typeof be=="object"&&(this[be]=void 0);this.recoverable=ae}};return this.__error_infos.push(ie),ie};function A(){var J=_.lex();return typeof J!="number"&&(J=m.symbols_[J]||J),J||S}function M(){var J=_.fastLex();return typeof J!="number"&&(J=m.symbols_[J]||J),J||S}var I=A,O,T,D,N,k={$:!0,_$:void 0,yy:C},R,z,j,$,U=!1;try{if(this.__reentrant_call_depth++,_.setInput(f,C),typeof _.canIUse=="function"){var H=_.canIUse();H.fastLex&&typeof M=="function"&&(I=M)}for(v[y]=null,g[y]=0,p[y]=0,++y,this.pre_parse&&this.pre_parse.call(this,C),C.pre_parse&&C.pre_parse.call(this,C),$=g[y-1];;){if(O=$,this.defaultActions[O])T=2,$=this.defaultActions[O];else if(x||(x=I()),N=b[O]&&b[O][x]||w,$=N[1],T=N[0],!T){var V,Q=this.describeSymbol(x)||x,X=this.collect_expected_token_set(O);typeof _.yylineno=="number"?V="Parse error on line "+(_.yylineno+1)+": ":V="Parse error: ",typeof _.showPosition=="function"&&(V+=`
`+_.showPosition(79-10,10)+`
`),X.length?V+="Expecting "+X.join(", ")+", got unexpected "+Q:V+="Unexpected "+Q,R=this.constructParseErrorInfo(V,null,X,!1),D=this.parseError(R.errStr,R,this.JisonParserError),typeof D<"u"&&(U=D);break}switch(T){default:if(T instanceof Array){R=this.constructParseErrorInfo("Parse Error: multiple actions possible at state: "+O+", token: "+x,null,null,!1),D=this.parseError(R.errStr,R,this.JisonParserError),typeof D<"u"&&(U=D);break}R=this.constructParseErrorInfo("Parsing halted. No viable error recovery approach available due to internal system failure.",null,null,!1),D=this.parseError(R.errStr,R,this.JisonParserError),typeof D<"u"&&(U=D);break;case 1:p[y]=x,v[y]=_.yytext,g[y]=$,++y,x=0;continue;case 2:if(j=this.productions_[$-1],z=j[1],D=this.performAction.call(k,$,y-1,v),typeof D<"u"){U=D;break}y-=z;var ne=j[0];p[y]=ne,v[y]=k.$,$=b[g[y-1]][ne],g[y]=$,++y;continue;case 3:y!==-2&&(U=!0,y--,typeof v[y]<"u"&&(U=v[y]));break}break}}catch(J){if(J instanceof this.JisonParserError)throw J;if(_&&typeof _.JisonLexerError=="function"&&J instanceof _.JisonLexerError)throw J;R=this.constructParseErrorInfo("Parsing aborted due to exception.",J,null,!1),U=!1,D=this.parseError(R.errStr,R,this.JisonParserError),typeof D<"u"&&(U=D)}finally{U=this.cleanupAfterParse(U,!0,!0),this.__reentrant_call_depth--}return U}};u.originalParseError=u.parseError,u.originalQuoteName=u.quoteName;var d=function(){function h(m,p){Object.defineProperty(this,"name",{enumerable:!1,writable:!1,value:"JisonLexerError"}),m==null&&(m="???"),Object.defineProperty(this,"message",{enumerable:!1,writable:!0,value:m}),this.hash=p;var g;if(p&&p.exception instanceof Error){var v=p.exception;this.message=v.message||m,g=v.stack}g||(Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,this.constructor):g=new Error(m).stack),g&&Object.defineProperty(this,"stack",{enumerable:!1,writable:!1,value:g})}typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf(h.prototype,Error.prototype):h.prototype=Object.create(Error.prototype),h.prototype.constructor=h,h.prototype.name="JisonLexerError";var f={EOF:1,ERROR:2,__currentRuleSet__:null,__error_infos:[],__decompressed:!1,done:!1,_backtrack:!1,_input:"",_more:!1,_signaled_error_token:!1,conditionStack:[],match:"",matched:"",matches:!1,yytext:"",offset:0,yyleng:0,yylineno:0,yylloc:null,constructLexErrorInfo:function(p,g,v){if(p=""+p,v==null&&(v=!(p.indexOf(`
`)>0&&p.indexOf("^")>0)),this.yylloc&&v){if(typeof this.prettyPrintRange=="function")this.prettyPrintRange(this.yylloc),/\n\s*$/.test(p)||(p+=`
`),p+=`
  Erroneous area:
`+this.prettyPrintRange(this.yylloc);else if(typeof this.showPosition=="function"){var b=this.showPosition();b&&(p.length&&p[p.length-1]!==`
`&&b[0]!==`
`?p+=`
`+b:p+=b)}}var y={errStr:p,recoverable:!!g,text:this.match,token:null,line:this.yylineno,loc:this.yylloc,yy:this.yy,lexer:this,destroy:function(){var S=!!this.recoverable;for(var w in this)this.hasOwnProperty(w)&&typeof w=="object"&&(this[w]=void 0);this.recoverable=S}};return this.__error_infos.push(y),y},parseError:function(p,g,v){if(v||(v=this.JisonLexerError),this.yy){if(this.yy.parser&&typeof this.yy.parser.parseError=="function")return this.yy.parser.parseError.call(this,p,g,v)||this.ERROR;if(typeof this.yy.parseError=="function")return this.yy.parseError.call(this,p,g,v)||this.ERROR}throw new v(p,g)},yyerror:function(p){var g="";this.yylloc&&(g=" on line "+(this.yylineno+1));var v=this.constructLexErrorInfo("Lexical error"+g+": "+p,this.options.lexerErrorsAreRecoverable),b=Array.prototype.slice.call(arguments,1);return b.length&&(v.extra_error_attributes=b),this.parseError(v.errStr,v,this.JisonLexerError)||this.ERROR},cleanupAfterLex:function(p){if(this.setInput("",{}),!p){for(var g=this.__error_infos.length-1;g>=0;g--){var v=this.__error_infos[g];v&&typeof v.destroy=="function"&&v.destroy()}this.__error_infos.length=0}return this},clear:function(){this.yytext="",this.yyleng=0,this.match="",this.matches=!1,this._more=!1,this._backtrack=!1;var p=this.yylloc?this.yylloc.last_column:0;this.yylloc={first_line:this.yylineno+1,first_column:p,last_line:this.yylineno+1,last_column:p,range:[this.offset,this.offset]}},setInput:function(p,g){if(this.yy=g||this.yy||{},!this.__decompressed){for(var v=this.rules,b=0,y=v.length;b<y;b++){var x=v[b];typeof x=="number"&&(v[b]=v[x])}var S=this.conditions;for(var w in S){for(var _=S[w],C=_.rules,y=C.length,E=new Array(y+1),A=new Array(y+1),b=0;b<y;b++){var M=C[b],x=v[M];E[b+1]=x,A[b+1]=M}_.rules=A,_.__rule_regexes=E,_.__rule_count=y}this.__decompressed=!0}return this._input=p||"",this.clear(),this._signaled_error_token=!1,this.done=!1,this.yylineno=0,this.matched="",this.conditionStack=["INITIAL"],this.__currentRuleSet__=null,this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0,range:[0,0]},this.offset=0,this},editRemainingInput:function(p,g){var v=p.call(this,this._input,g);return typeof v!="string"?v&&(this._input=""+v):this._input=v,this},input:function(){if(!this._input)return null;var p=this._input[0];this.yytext+=p,this.yyleng++,this.offset++,this.match+=p,this.matched+=p;var g=1,v=!1;if(p===`
`)v=!0;else if(p==="\r"){v=!0;var b=this._input[1];b===`
`&&(g++,p+=b,this.yytext+=b,this.yyleng++,this.offset++,this.match+=b,this.matched+=b,this.yylloc.range[1]++)}return v?(this.yylineno++,this.yylloc.last_line++,this.yylloc.last_column=0):this.yylloc.last_column++,this.yylloc.range[1]++,this._input=this._input.slice(g),p},unput:function(p){var g=p.length,v=p.split(/(?:\r\n?|\n)/g);if(this._input=p+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-g),this.yyleng=this.yytext.length,this.offset-=g,this.match=this.match.substr(0,this.match.length-g),this.matched=this.matched.substr(0,this.matched.length-g),v.length>1){this.yylineno-=v.length-1,this.yylloc.last_line=this.yylineno+1;var b=this.match,y=b.split(/(?:\r\n?|\n)/g);y.length===1&&(b=this.matched,y=b.split(/(?:\r\n?|\n)/g)),this.yylloc.last_column=y[y.length-1].length}else this.yylloc.last_column-=g;return this.yylloc.range[1]=this.yylloc.range[0]+this.yyleng,this.done=!1,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else{var p="";this.yylloc&&(p=" on line "+(this.yylineno+1));var g=this.constructLexErrorInfo("Lexical error"+p+": You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).",!1);this._signaled_error_token=this.parseError(g.errStr,g,this.JisonLexerError)||this.ERROR}return this},less:function(p){return this.unput(this.match.slice(p))},pastInput:function(p,g){var v=this.matched.substring(0,this.matched.length-this.match.length);p<0?p=v.length:p||(p=20),g<0?g=v.length:g||(g=1),v=v.substr(-p*2-2);var b=v.replace(/\r\n|\r/g,`
`).split(`
`);return b=b.slice(-g),v=b.join(`
`),v.length>p&&(v="..."+v.substr(-p)),v},upcomingInput:function(p,g){var v=this.match;p<0?p=v.length+this._input.length:p||(p=20),g<0?g=p:g||(g=1),v.length<p*2+2&&(v+=this._input.substring(0,p*2+2));var b=v.replace(/\r\n|\r/g,`
`).split(`
`);return b=b.slice(0,g),v=b.join(`
`),v.length>p&&(v=v.substring(0,p)+"..."),v},showPosition:function(p,g){var v=this.pastInput(p).replace(/\s/g," "),b=new Array(v.length+1).join("-");return v+this.upcomingInput(g).replace(/\s/g," ")+`
`+b+"^"},deriveLocationInfo:function(p,g,v,b){var y={first_line:1,first_column:0,last_line:1,last_column:0,range:[0,0]};return p&&(y.first_line=p.first_line|0,y.last_line=p.last_line|0,y.first_column=p.first_column|0,y.last_column=p.last_column|0,p.range&&(y.range[0]=p.range[0]|0,y.range[1]=p.range[1]|0)),(y.first_line<=0||y.last_line<y.first_line)&&(y.first_line<=0&&g&&(y.first_line=g.last_line|0,y.first_column=g.last_column|0,g.range&&(y.range[0]=p.range[1]|0)),(y.last_line<=0||y.last_line<y.first_line)&&v&&(y.last_line=v.first_line|0,y.last_column=v.first_column|0,v.range&&(y.range[1]=p.range[0]|0)),y.first_line<=0&&b&&(y.last_line<=0||b.last_line<=y.last_line)&&(y.first_line=b.first_line|0,y.first_column=b.first_column|0,b.range&&(y.range[0]=b.range[0]|0)),y.last_line<=0&&b&&(y.first_line<=0||b.first_line>=y.first_line)&&(y.last_line=b.last_line|0,y.last_column=b.last_column|0,b.range&&(y.range[1]=b.range[1]|0))),y.last_line<=0&&(y.first_line<=0?(y.first_line=this.yylloc.first_line,y.last_line=this.yylloc.last_line,y.first_column=this.yylloc.first_column,y.last_column=this.yylloc.last_column,y.range[0]=this.yylloc.range[0],y.range[1]=this.yylloc.range[1]):(y.last_line=this.yylloc.last_line,y.last_column=this.yylloc.last_column,y.range[1]=this.yylloc.range[1])),y.first_line<=0&&(y.first_line=y.last_line,y.first_column=0,y.range[1]=y.range[0]),y.first_column<0&&(y.first_column=0),y.last_column<0&&(y.last_column=y.first_column>0?y.first_column:80),y},prettyPrintRange:function(p,g,v){p=this.deriveLocationInfo(p,g,v);const b=3,y=1,x=2;var S=this.matched+this._input,w=S.split(`
`),_=Math.max(1,g?g.first_line:p.first_line-b),C=Math.max(1,v?v.last_line:p.last_line+y),E=1+Math.log10(C|1)|0,A=new Array(E).join(" "),M=[],I=w.slice(_-1,C+1).map(function(k,R){var z=R+_,j=(A+z).substr(-E),$=j+": "+k,U=new Array(E+1).join("^"),H=2+1,V=0;if(z===p.first_line?(H+=p.first_column,V=Math.max(2,(z===p.last_line?p.last_column:k.length)-p.first_column+1)):z===p.last_line?V=Math.max(2,p.last_column+1):z>p.first_line&&z<p.last_line&&(V=Math.max(2,k.length+1)),V){var Q=new Array(H).join("."),X=new Array(V).join("^");$+=`
`+U+Q+X,k.trim().length>0&&M.push(R)}return $=$.replace(/\t/g," "),$});if(M.length>2*x){var O=M[x-1]+1,T=M[M.length-x]-1,D=new Array(E+1).join(" ")+"  (...continued...)";D+=`
`+new Array(E+1).join("-")+"  (---------------)",I.splice(O,T-O+1,D)}return I.join(`
`)},describeYYLLOC:function(p,g){var v=p.first_line,b=p.last_line,y=p.first_column,x=p.last_column,S=b-v,w=x-y,_;if(S===0?(_="line "+v+", ",w<=1?_+="column "+y:_+="columns "+y+" .. "+x):_="lines "+v+"(column "+y+") .. "+b+"(column "+x+")",p.range&&g){var C=p.range[0],E=p.range[1]-1;E<=C?_+=" {String Offset: "+C+"}":_+=" {String Offset range: "+C+" .. "+E+"}"}return _},test_match:function(p,g){var v,b,y,x,S;if(this.options.backtrack_lexer&&(y={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.yylloc.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column,range:this.yylloc.range.slice(0)},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done}),x=p[0],S=x.length,b=x.split(/(?:\r\n?|\n)/g),b.length>1?(this.yylineno+=b.length-1,this.yylloc.last_line=this.yylineno+1,this.yylloc.last_column=b[b.length-1].length):this.yylloc.last_column+=S,this.yytext+=x,this.match+=x,this.matched+=x,this.matches=p,this.yyleng=this.yytext.length,this.yylloc.range[1]+=S,this.offset+=S,this._more=!1,this._backtrack=!1,this._input=this._input.slice(S),v=this.performAction.call(this,this.yy,g,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),v)return v;if(this._backtrack){for(var w in y)this[w]=y[w];return this.__currentRuleSet__=null,!1}else if(this._signaled_error_token)return v=this._signaled_error_token,this._signaled_error_token=!1,v;return!1},next:function(){if(this.done)return this.clear(),this.EOF;this._input||(this.done=!0);var p,g,v,b;this._more||this.clear();var y=this.__currentRuleSet__;if(!y&&(y=this.__currentRuleSet__=this._currentRules(),!y||!y.rules)){var x="";this.options.trackPosition&&(x=" on line "+(this.yylineno+1));var S=this.constructLexErrorInfo("Internal lexer engine error"+x+': The lex grammar programmer pushed a non-existing condition name "'+this.topState()+'"; this is a fatal error and should be reported to the application programmer team!',!1);return this.parseError(S.errStr,S,this.JisonLexerError)||this.ERROR}for(var w=y.rules,_=y.__rule_regexes,C=y.__rule_count,E=1;E<=C;E++)if(v=this._input.match(_[E]),v&&(!g||v[0].length>g[0].length)){if(g=v,b=E,this.options.backtrack_lexer){if(p=this.test_match(v,w[E]),p!==!1)return p;if(this._backtrack){g=void 0;continue}else return!1}else if(!this.options.flex)break}if(g)return p=this.test_match(g,w[b]),p!==!1?p:!1;if(this._input){var x="";this.options.trackPosition&&(x=" on line "+(this.yylineno+1));var S=this.constructLexErrorInfo("Lexical error"+x+": Unrecognized text.",this.options.lexerErrorsAreRecoverable),A=this._input,M=this.topState(),I=this.conditionStack.length;return p=this.parseError(S.errStr,S,this.JisonLexerError)||this.ERROR,p===this.ERROR&&!this.matches&&A===this._input&&M===this.topState()&&I===this.conditionStack.length&&this.input(),p}else return this.done=!0,this.clear(),this.EOF},lex:function(){var p;for(typeof this.pre_lex=="function"&&(p=this.pre_lex.call(this,0)),typeof this.options.pre_lex=="function"&&(p=this.options.pre_lex.call(this,p)||p),this.yy&&typeof this.yy.pre_lex=="function"&&(p=this.yy.pre_lex.call(this,p)||p);!p;)p=this.next();return this.yy&&typeof this.yy.post_lex=="function"&&(p=this.yy.post_lex.call(this,p)||p),typeof this.options.post_lex=="function"&&(p=this.options.post_lex.call(this,p)||p),typeof this.post_lex=="function"&&(p=this.post_lex.call(this,p)||p),p},fastLex:function(){for(var p;!p;)p=this.next();return p},canIUse:function(){var p={fastLex:!(typeof this.pre_lex=="function"||typeof this.options.pre_lex=="function"||this.yy&&typeof this.yy.pre_lex=="function"||this.yy&&typeof this.yy.post_lex=="function"||typeof this.options.post_lex=="function"||typeof this.post_lex=="function")&&typeof this.fastLex=="function"};return p},begin:function(p){return this.pushState(p)},pushState:function(p){return this.conditionStack.push(p),this.__currentRuleSet__=null,this},popState:function(){var p=this.conditionStack.length-1;return p>0?(this.__currentRuleSet__=null,this.conditionStack.pop()):this.conditionStack[0]},topState:function(p){return p=this.conditionStack.length-1-Math.abs(p||0),p>=0?this.conditionStack[p]:"INITIAL"},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL},stateStackSize:function(){return this.conditionStack.length},options:{trackPosition:!0},JisonLexerError:h,performAction:function(p,g,v){switch(g){case 1:break;default:return this.simpleCaseActionClusters[g]}},simpleCaseActionClusters:{0:13,2:5,3:6,4:3,5:4,6:15,7:15,8:15,9:15,10:15,11:15,12:16,13:16,14:16,15:16,16:17,17:17,18:18,19:18,20:19,21:19,22:19,23:20,24:21,25:22,26:23,27:25,28:24,29:26,30:27,31:28,32:11,33:9,34:12,35:10,36:7,37:8,38:14,39:1},rules:[/^(?:(--[\d\-A-Za-z]*))/,/^(?:\s+)/,/^(?:\*)/,/^(?:\/)/,/^(?:\+)/,/^(?:-)/,/^(?:(\d+(\.\d*)?|\.\d+)px\b)/,/^(?:(\d+(\.\d*)?|\.\d+)cm\b)/,/^(?:(\d+(\.\d*)?|\.\d+)mm\b)/,/^(?:(\d+(\.\d*)?|\.\d+)in\b)/,/^(?:(\d+(\.\d*)?|\.\d+)pt\b)/,/^(?:(\d+(\.\d*)?|\.\d+)pc\b)/,/^(?:(\d+(\.\d*)?|\.\d+)deg\b)/,/^(?:(\d+(\.\d*)?|\.\d+)grad\b)/,/^(?:(\d+(\.\d*)?|\.\d+)rad\b)/,/^(?:(\d+(\.\d*)?|\.\d+)turn\b)/,/^(?:(\d+(\.\d*)?|\.\d+)s\b)/,/^(?:(\d+(\.\d*)?|\.\d+)ms\b)/,/^(?:(\d+(\.\d*)?|\.\d+)Hz\b)/,/^(?:(\d+(\.\d*)?|\.\d+)kHz\b)/,/^(?:(\d+(\.\d*)?|\.\d+)dpi\b)/,/^(?:(\d+(\.\d*)?|\.\d+)dpcm\b)/,/^(?:(\d+(\.\d*)?|\.\d+)dppx\b)/,/^(?:(\d+(\.\d*)?|\.\d+)em\b)/,/^(?:(\d+(\.\d*)?|\.\d+)ex\b)/,/^(?:(\d+(\.\d*)?|\.\d+)ch\b)/,/^(?:(\d+(\.\d*)?|\.\d+)rem\b)/,/^(?:(\d+(\.\d*)?|\.\d+)vw\b)/,/^(?:(\d+(\.\d*)?|\.\d+)vh\b)/,/^(?:(\d+(\.\d*)?|\.\d+)vmin\b)/,/^(?:(\d+(\.\d*)?|\.\d+)vmax\b)/,/^(?:(\d+(\.\d*)?|\.\d+)%)/,/^(?:(\d+(\.\d*)?|\.\d+)\b)/,/^(?:(calc))/,/^(?:(var))/,/^(?:([a-z]+))/,/^(?:\()/,/^(?:\))/,/^(?:,)/,/^(?:$)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39],inclusive:!0}}};return f}();u.lexer=d;function c(){this.yy={}}return c.prototype=u,u.Parser=c,new c}();typeof y4e<"u"&&(e.parser=t,e.Parser=t.Parser,e.parse=function(){return t.parse.apply(t,arguments)})})(Sne);var zS={},vL={exports:{}},ZI={px:{px:1,cm:96/2.54,mm:96/25.4,in:96,pt:96/72,pc:16},cm:{px:2.54/96,cm:1,mm:.1,in:2.54,pt:2.54/72,pc:2.54/6},mm:{px:25.4/96,cm:10,mm:1,in:25.4,pt:25.4/72,pc:25.4/6},in:{px:1/96,cm:1/2.54,mm:1/25.4,in:1,pt:1/72,pc:1/6},pt:{px:.75,cm:72/2.54,mm:72/25.4,in:72,pt:1,pc:12},pc:{px:6/96,cm:6/2.54,mm:6/25.4,in:6,pt:6/72,pc:1},deg:{deg:1,grad:.9,rad:180/Math.PI,turn:360},grad:{deg:400/360,grad:1,rad:200/Math.PI,turn:400},rad:{deg:Math.PI/180,grad:Math.PI/200,rad:1,turn:Math.PI*2},turn:{deg:1/360,grad:1/400,rad:.5/Math.PI,turn:1},s:{s:1,ms:1/1e3},ms:{s:1e3,ms:1},Hz:{Hz:1,kHz:1e3},kHz:{Hz:1/1e3,kHz:1},dpi:{dpi:1,dpcm:1/2.54,dppx:1/96},dpcm:{dpi:2.54,dpcm:1,dppx:2.54/96},dppx:{dpi:96,dpcm:96/2.54,dppx:1}},b4e=function(e,t,r,n){if(!ZI.hasOwnProperty(r))throw new Error("Cannot convert to "+r);if(!ZI[r].hasOwnProperty(t))throw new Error("Cannot convert from "+t+" to "+r);var i=ZI[r][t]*e;return n!==!1?(n=Math.pow(10,parseInt(n)||5),Math.round(i*n)/n):i};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=b4e,n=i(r);function i(s){return s&&s.__esModule?s:{default:s}}function o(s,l,u){switch(s.type){case"LengthValue":case"AngleValue":case"TimeValue":case"FrequencyValue":case"ResolutionValue":return a(s,l,u);default:return{left:s,right:l}}}function a(s,l,u){return l.type===s.type&&(l={type:s.type,value:(0,n.default)(l.value,l.unit,s.unit,u),unit:s.unit}),{left:s,right:l}}t.default=o,e.exports=t.default})(vL,vL.exports);var x4e=vL.exports;Object.defineProperty(zS,"__esModule",{value:!0});zS.flip=yL;var w4e=x4e,JI=S4e(w4e);function S4e(e){return e&&e.__esModule?e:{default:e}}function ra(e,t){return e.type==="MathExpression"?M4e(e,t):e.type==="Calc"?ra(e.value,t):e}function _6(e,t){return e.type===t.type&&e.value===t.value}function os(e){switch(e){case"LengthValue":case"AngleValue":case"TimeValue":case"FrequencyValue":case"ResolutionValue":case"EmValue":case"ExValue":case"ChValue":case"RemValue":case"VhValue":case"VwValue":case"VminValue":case"VmaxValue":case"PercentageValue":case"Value":return!0}return!1}function _4e(e,t){var r=(0,JI.default)(e.left,e.right,t),n=ra(r.left,t),i=ra(r.right,t);return n.type==="MathExpression"&&i.type==="MathExpression"&&(n.operator==="/"&&i.operator==="*"||n.operator==="-"&&i.operator==="+"||n.operator==="*"&&i.operator==="/"||n.operator==="+"&&i.operator==="-")&&(_6(n.right,i.right)?r=(0,JI.default)(n.left,i.left,t):_6(n.right,i.left)&&(r=(0,JI.default)(n.left,i.right,t)),n=ra(r.left,t),i=ra(r.right,t)),e.left=n,e.right=i,e}function yL(e){return e==="+"?"-":"+"}function bL(e){return os(e.type)?e.value=-e.value:e.type=="MathExpression"&&(e.left=bL(e.left),e.right=bL(e.right)),e}function C4e(e,t){var r=e,n=r.left,i=r.right,o=r.operator;if(n.type==="CssVariable"||i.type==="CssVariable")return e;if(i.value===0)return n;if(n.value===0&&o==="+")return i;if(n.value===0&&o==="-")return bL(i);if(n.type===i.type&&os(n.type)&&(e=Object.assign({},n),o==="+"?e.value=n.value+i.value:e.value=n.value-i.value),os(n.type)&&(i.operator==="+"||i.operator==="-")&&i.type==="MathExpression"){if(n.type===i.left.type)return e=Object.assign({},e),e.left=ra({type:"MathExpression",operator:o,left:n,right:i.left},t),e.right=i.right,e.operator=o==="-"?yL(i.operator):i.operator,ra(e,t);if(n.type===i.right.type)return e=Object.assign({},e),e.left=ra({type:"MathExpression",operator:o==="-"?yL(i.operator):i.operator,left:n,right:i.right},t),e.right=i.left,ra(e,t)}if(n.type==="MathExpression"&&(n.operator==="+"||n.operator==="-")&&os(i.type)){if(i.type===n.left.type)return e=Object.assign({},n),e.left=ra({type:"MathExpression",operator:o,left:n.left,right:i},t),ra(e,t);if(i.type===n.right.type)return e=Object.assign({},n),n.operator==="-"?(e.right=ra({type:"MathExpression",operator:o==="-"?"+":"-",left:i,right:n.right},t),e.operator=o==="-"?"-":"+"):e.right=ra({type:"MathExpression",operator:o,left:n.right,right:i},t),e.right.value<0&&(e.right.value*=-1,e.operator=e.operator==="-"?"+":"-"),ra(e,t)}return e}function A4e(e,t){if(!os(e.right.type))return e;if(e.right.type!=="Value")throw new Error('Cannot divide by "'+e.right.unit+'", number expected');if(e.right.value===0)throw new Error("Cannot divide by zero");return e.left.type==="MathExpression"?os(e.left.left.type)&&os(e.left.right.type)?(e.left.left.value/=e.right.value,e.left.right.value/=e.right.value,ra(e.left,t)):e:os(e.left.type)?(e.left.value/=e.right.value,e.left):e}function E4e(e){if(e.left.type==="MathExpression"&&e.right.type==="Value"){if(os(e.left.left.type)&&os(e.left.right.type))return e.left.left.value*=e.right.value,e.left.right.value*=e.right.value,e.left}else{if(os(e.left.type)&&e.right.type==="Value")return e.left.value*=e.right.value,e.left;if(e.left.type==="Value"&&e.right.type==="MathExpression"){if(os(e.right.left.type)&&os(e.right.right.type))return e.right.left.value*=e.left.value,e.right.right.value*=e.left.value,e.right}else if(e.left.type==="Value"&&os(e.right.type))return e.right.value*=e.left.value,e.right}return e}function M4e(e,t){switch(e=_4e(e,t),e.operator){case"+":case"-":return C4e(e,t);case"/":return A4e(e,t);case"*":return E4e(e)}return e}zS.default=ra;var xL={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(a,s,l){var u=o(s,l);return s.type==="MathExpression"&&(u=a+"("+u+")"),u};var r=zS,n={"*":0,"/":0,"+":1,"-":1};function i(a,s){if(s!==!1){var l=Math.pow(10,s);return Math.round(a*l)/l}return a}function o(a,s){switch(a.type){case"MathExpression":{var l=a.left,u=a.right,d=a.operator,c="";return l.type==="MathExpression"&&n[d]<n[l.operator]?c+="("+o(l,s)+")":c+=o(l,s),c+=" "+a.operator+" ",u.type==="MathExpression"&&n[d]<n[u.operator]?c+="("+o(u,s)+")":(u.type==="MathExpression"&&d==="-"&&["+","-"].includes(u.operator)&&(u.operator=(0,r.flip)(u.operator)),c+=o(u,s)),c}case"Value":return i(a.value,s);case"CssVariable":return a.fallback?"var("+a.value+", "+o(a.fallback,s)+")":"var("+a.value+")";case"Calc":return a.prefix?"-"+a.prefix+"-calc("+o(a.value,s)+")":"calc("+o(a.value,s)+")";default:return i(a.value,s)+a.unit}}e.exports=t.default})(xL,xL.exports);var P4e=xL.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=v4e,n=u(r),i=Sne,o=zS,a=u(o),s=P4e,l=u(s);function u(c){return c&&c.__esModule?c:{default:c}}var d=/((?:\-[a-z]+\-)?calc)/;t.default=function(c){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5;return(0,n.default)(c).walk(function(f){if(!(f.type!=="function"||!d.test(f.value))){var m=n.default.stringify(f.nodes);if(!(m.indexOf("constant")>=0||m.indexOf("env")>=0)){var p=i.parser.parse(m),g=(0,a.default)(p,h);f.type="word",f.value=(0,l.default)(f.value,g,h)}}},!0).toString()},e.exports=t.default})(gL,gL.exports);var T4e=gL.exports;const eD=Ur(T4e);function ww(e){"@babel/helpers - typeof";return ww=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ww(e)}function C6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function A6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C6(Object(r),!0).forEach(function(n){O4e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function O4e(e,t,r){return t=I4e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I4e(e){var t=D4e(e,"string");return ww(t)==="symbol"?t:String(t)}function D4e(e,t){if(ww(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ww(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function E6(e){return N4e(e)||L4e(e)||k4e(e)||R4e()}function R4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k4e(e,t){if(e){if(typeof e=="string")return wL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wL(e,t)}}function L4e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function N4e(e){if(Array.isArray(e))return wL(e)}function wL(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Mg={widthCache:{},cacheCount:0},z4e=2e3,B4e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},F4e=["minWidth","maxWidth","width","minHeight","maxHeight","height","top","left","fontSize","lineHeight","padding","margin","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom"],M6="recharts_measurement_span";function j4e(e,t){return F4e.indexOf(e)>=0&&t===+t?"".concat(t,"px"):t}function U4e(e){var t=e.split(""),r=t.reduce(function(n,i){return i===i.toUpperCase()?[].concat(E6(n),["-",i.toLowerCase()]):[].concat(E6(n),[i])},[]);return r.join("")}var $4e=function(t){return Object.keys(t).reduce(function(r,n){return"".concat(r).concat(U4e(n),":").concat(j4e(n,t[n]),";")},"")},Cc=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||jl.isSsr)return{width:0,height:0};var n="".concat(t),i=$4e(r),o="".concat(n,"-").concat(i);if(Mg.widthCache[o])return Mg.widthCache[o];try{var a=document.getElementById(M6);a||(a=document.createElement("span"),a.setAttribute("id",M6),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var s=A6(A6({},B4e),r);Object.keys(s).map(function(d){return a.style[d]=s[d],d}),a.textContent=n;var l=a.getBoundingClientRect(),u={width:l.width,height:l.height};return Mg.widthCache[o]=u,++Mg.cacheCount>z4e&&(Mg.cacheCount=0,Mg.widthCache={}),u}catch{return{width:0,height:0}}},V4e=function(t){var r=t.ownerDocument.documentElement,n={top:0,left:0};return typeof t.getBoundingClientRect<"u"&&(n=t.getBoundingClientRect()),{top:n.top+window.pageYOffset-r.clientTop,left:n.left+window.pageXOffset-r.clientLeft}},H4e=function(t,r){return{chartX:Math.round(t.pageX-r.left),chartY:Math.round(t.pageY-r.top)}},G4e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],W4e=["dx","dy","angle","className","breakAll"];function SL(){return SL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},SL.apply(this,arguments)}function P6(e,t){if(e==null)return{};var r=q4e(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function q4e(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function T6(e,t){return Q4e(e)||Y4e(e,t)||X4e(e,t)||K4e()}function K4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X4e(e,t){if(e){if(typeof e=="string")return O6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O6(e,t)}}function O6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Y4e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function Q4e(e){if(Array.isArray(e))return e}var _ne=/[ \f\n\r\t\v\u2028\u2029]+/,Cne=function(t){var r=t.children,n=t.breakAll,i=t.style;try{var o=[];bt(r)||(n?o=r.toString().split(""):o=r.toString().split(_ne));var a=o.map(function(l){return{word:l,width:Cc(l,i).width}}),s=n?0:Cc("",i).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}},Z4e=function(t,r,n,i,o){var a=t.maxLines,s=t.children,l=t.style,u=t.breakAll,d=Ze(a),c=s,h=function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D.reduce(function(N,k){var R=k.word,z=k.width,j=N[N.length-1];if(j&&(i==null||o||j.width+z+n<Number(i)))j.words.push(R),j.width+=z+n;else{var $={words:[R],width:z};N.push($)}return N},[])},f=h(r),m=function(D){return D.reduce(function(N,k){return N.width>k.width?N:k})};if(!d)return f;for(var p="",g=function(D){var N=c.slice(0,D),k=Cne({breakAll:u,style:l,children:N+p}).wordsWithComputedWidth,R=h(k),z=R.length>a||m(R).width>Number(i);return[z,R]},v=0,b=c.length-1,y=0,x;v<=b&&y<=c.length-1;){var S=Math.floor((v+b)/2),w=S-1,_=g(w),C=T6(_,2),E=C[0],A=C[1],M=g(S),I=T6(M,1),O=I[0];if(!E&&!O&&(v=S+1),E&&O&&(b=S-1),!E&&O){x=A;break}y++}return x||f},I6=function(t){var r=bt(t)?[]:t.toString().split(_ne);return[{words:r}]},J4e=function(t){var r=t.width,n=t.scaleToFit,i=t.children,o=t.style,a=t.breakAll,s=t.maxLines;if((r||n)&&!jl.isSsr){var l,u,d=Cne({breakAll:a,children:i,style:o});if(d){var c=d.wordsWithComputedWidth,h=d.spaceWidth;l=c,u=h}else return I6(i);return Z4e({breakAll:a,children:i,maxLines:s,style:o},l,u,r,n)}return I6(i)},D6="#808080",Vm=function(t){var r=t.x,n=r===void 0?0:r,i=t.y,o=i===void 0?0:i,a=t.lineHeight,s=a===void 0?"1em":a,l=t.capHeight,u=l===void 0?"0.71em":l,d=t.scaleToFit,c=d===void 0?!1:d,h=t.textAnchor,f=h===void 0?"start":h,m=t.verticalAnchor,p=m===void 0?"end":m,g=t.fill,v=g===void 0?D6:g,b=P6(t,G4e),y=P.useMemo(function(){return J4e({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:c,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,c,b.style,b.width]),x=b.dx,S=b.dy,w=b.angle,_=b.className,C=b.breakAll,E=P6(b,W4e);if(!uo(n)||!uo(o))return null;var A=n+(Ze(x)?x:0),M=o+(Ze(S)?S:0),I;switch(p){case"start":I=eD("calc(".concat(u,")"));break;case"middle":I=eD("calc(".concat((y.length-1)/2," * -").concat(s," + (").concat(u," / 2))"));break;default:I=eD("calc(".concat(y.length-1," * -").concat(s,")"));break}var O=[];if(c){var T=y[0].width,D=b.width;O.push("scale(".concat((Ze(D)?D/T:1)/T,")"))}return w&&O.push("rotate(".concat(w,", ").concat(A,", ").concat(M,")")),O.length&&(E.transform=O.join(" ")),le.createElement("text",SL({},Dt(E,!0),{x:A,y:M,className:Kr("recharts-text",_),textAnchor:f,fill:v.includes("url")?D6:v}),y.map(function(N,k){return le.createElement("tspan",{x:A,dy:k===0?I:s,key:k},N.words.join(C?"":" "))}))},eUe=Aj;function tUe(e,t){return eUe(e,t)}var rUe=tUe;const Hm=Ur(rUe);var nUe=V0;function iUe(e,t,r){for(var n=-1,i=e.length;++n<i;){var o=e[n],a=t(o);if(a!=null&&(s===void 0?a===a&&!nUe(a):r(a,s)))var s=a,l=o}return l}var N2=iUe;function oUe(e,t){return e>t}var Ane=oUe,aUe=N2,sUe=Ane,lUe=Y0;function uUe(e){return e&&e.length?aUe(e,lUe,sUe):void 0}var cUe=uUe;const ff=Ur(cUe);function dUe(e,t){return e<t}var Ene=dUe,hUe=N2,fUe=Ene,pUe=Y0;function mUe(e){return e&&e.length?hUe(e,pUe,fUe):void 0}var gUe=mUe;const z2=Ur(gUe);var vUe=pj,yUe=id,bUe=fne,xUe=Za;function wUe(e,t){var r=xUe(e)?vUe:bUe;return r(e,yUe(t))}var SUe=wUe,_Ue=dne,CUe=SUe;function AUe(e,t){return _Ue(CUe(e,t),1)}var EUe=AUe;const MUe=Ur(EUe);function Ff(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function PUe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Rj(e){let t,r,n;e.length!==2?(t=Ff,r=(s,l)=>Ff(e(s),l),n=(s,l)=>e(s)-l):(t=e===Ff||e===PUe?e:TUe,r=e,n=e);function i(s,l,u=0,d=s.length){if(u<d){if(t(l,l)!==0)return d;do{const c=u+d>>>1;r(s[c],l)<0?u=c+1:d=c}while(u<d)}return u}function o(s,l,u=0,d=s.length){if(u<d){if(t(l,l)!==0)return d;do{const c=u+d>>>1;r(s[c],l)<=0?u=c+1:d=c}while(u<d)}return u}function a(s,l,u=0,d=s.length){const c=i(s,l,u,d-1);return c>u&&n(s[c-1],l)>-n(s[c],l)?c-1:c}return{left:i,center:a,right:o}}function TUe(){return 0}function Mne(e){return e===null?NaN:+e}function*OUe(e,t){if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(yield r);else{let r=-1;for(let n of e)(n=t(n,++r,e))!=null&&(n=+n)>=n&&(yield n)}}const IUe=Rj(Ff),DUe=IUe.right;Rj(Mne).center;const BS=DUe;class R6 extends Map{constructor(t,r=LUe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,i]of t)this.set(n,i)}get(t){return super.get(k6(this,t))}has(t){return super.has(k6(this,t))}set(t,r){return super.set(RUe(this,t),r)}delete(t){return super.delete(kUe(this,t))}}function k6({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function RUe({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function kUe({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function LUe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function NUe(e=Ff){if(e===Ff)return Pne;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function Pne(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const zUe=Math.sqrt(50),BUe=Math.sqrt(10),FUe=Math.sqrt(2);function yM(e,t,r){const n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),o=n/Math.pow(10,i),a=o>=zUe?10:o>=BUe?5:o>=FUe?2:1;let s,l,u;return i<0?(u=Math.pow(10,-i)/a,s=Math.round(e*u),l=Math.round(t*u),s/u<e&&++s,l/u>t&&--l,u=-u):(u=Math.pow(10,i)*a,s=Math.round(e/u),l=Math.round(t/u),s*u<e&&++s,l*u>t&&--l),l<s&&.5<=r&&r<2?yM(e,t,r*2):[s,l,u]}function _L(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[i,o,a]=n?yM(t,e,r):yM(e,t,r);if(!(o>=i))return[];const s=o-i+1,l=new Array(s);if(n)if(a<0)for(let u=0;u<s;++u)l[u]=(o-u)/-a;else for(let u=0;u<s;++u)l[u]=(o-u)*a;else if(a<0)for(let u=0;u<s;++u)l[u]=(i+u)/-a;else for(let u=0;u<s;++u)l[u]=(i+u)*a;return l}function CL(e,t,r){return t=+t,e=+e,r=+r,yM(e,t,r)[2]}function AL(e,t,r){t=+t,e=+e,r=+r;const n=t<e,i=n?CL(t,e,r):CL(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function L6(e,t){let r;if(t===void 0)for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(r<i||r===void 0&&i>=i)&&(r=i)}return r}function N6(e,t){let r;if(t===void 0)for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(r>i||r===void 0&&i>=i)&&(r=i)}return r}function Tne(e,t,r=0,n=1/0,i){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(i=i===void 0?Pne:NUe(i);n>r;){if(n-r>600){const l=n-r+1,u=t-r+1,d=Math.log(l),c=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*c*(l-c)/l)*(u-l/2<0?-1:1),f=Math.max(r,Math.floor(t-u*c/l+h)),m=Math.min(n,Math.floor(t+(l-u)*c/l+h));Tne(e,t,f,m,i)}const o=e[t];let a=r,s=n;for(Hb(e,r,t),i(e[n],o)>0&&Hb(e,r,n);a<s;){for(Hb(e,a,s),++a,--s;i(e[a],o)<0;)++a;for(;i(e[s],o)>0;)--s}i(e[r],o)===0?Hb(e,r,s):(++s,Hb(e,s,n)),s<=t&&(r=s+1),t<=s&&(n=s-1)}return e}function Hb(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function jUe(e,t,r){if(e=Float64Array.from(OUe(e,r)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return N6(e);if(t>=1)return L6(e);var n,i=(n-1)*t,o=Math.floor(i),a=L6(Tne(e,o).subarray(0,o+1)),s=N6(e.subarray(o+1));return a+(s-a)*(i-o)}}function UUe(e,t,r=Mne){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,o=Math.floor(i),a=+r(e[o],o,e),s=+r(e[o+1],o+1,e);return a+(s-a)*(i-o)}}function $Ue(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((t-e)/r))|0,o=new Array(i);++n<i;)o[n]=e+n*r;return o}function Jl(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Sh(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const EL=Symbol("implicit");function kj(){var e=new R6,t=[],r=[],n=EL;function i(o){let a=e.get(o);if(a===void 0){if(n!==EL)return n;e.set(o,a=t.push(o)-1)}return r[a%r.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new R6;for(const a of o)e.has(a)||e.set(a,t.push(a)-1);return i},i.range=function(o){return arguments.length?(r=Array.from(o),i):r.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return kj(t,r).unknown(n)},Jl.apply(i,arguments),i}function Sw(){var e=kj().unknown(void 0),t=e.domain,r=e.range,n=0,i=1,o,a,s=!1,l=0,u=0,d=.5;delete e.unknown;function c(){var h=t().length,f=i<n,m=f?i:n,p=f?n:i;o=(p-m)/Math.max(1,h-l+u*2),s&&(o=Math.floor(o)),m+=(p-m-o*(h-l))*d,a=o*(1-l),s&&(m=Math.round(m),a=Math.round(a));var g=$Ue(h).map(function(v){return m+o*v});return r(f?g.reverse():g)}return e.domain=function(h){return arguments.length?(t(h),c()):t()},e.range=function(h){return arguments.length?([n,i]=h,n=+n,i=+i,c()):[n,i]},e.rangeRound=function(h){return[n,i]=h,n=+n,i=+i,s=!0,c()},e.bandwidth=function(){return a},e.step=function(){return o},e.round=function(h){return arguments.length?(s=!!h,c()):s},e.padding=function(h){return arguments.length?(l=Math.min(1,u=+h),c()):l},e.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),c()):l},e.paddingOuter=function(h){return arguments.length?(u=+h,c()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),c()):d},e.copy=function(){return Sw(t(),[n,i]).round(s).paddingInner(l).paddingOuter(u).align(d)},Jl.apply(c(),arguments)}function One(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return One(t())},e}function h1(){return One(Sw.apply(null,arguments).paddingInner(1))}function Lj(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Ine(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function FS(){}var _w=.7,bM=1/_w,uy="\\s*([+-]?\\d+)\\s*",Cw="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$c="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",VUe=/^#([0-9a-f]{3,8})$/,HUe=new RegExp(`^rgb\\(${uy},${uy},${uy}\\)$`),GUe=new RegExp(`^rgb\\(${$c},${$c},${$c}\\)$`),WUe=new RegExp(`^rgba\\(${uy},${uy},${uy},${Cw}\\)$`),qUe=new RegExp(`^rgba\\(${$c},${$c},${$c},${Cw}\\)$`),KUe=new RegExp(`^hsl\\(${Cw},${$c},${$c}\\)$`),XUe=new RegExp(`^hsla\\(${Cw},${$c},${$c},${Cw}\\)$`),z6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Lj(FS,Aw,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:B6,formatHex:B6,formatHex8:YUe,formatHsl:QUe,formatRgb:F6,toString:F6});function B6(){return this.rgb().formatHex()}function YUe(){return this.rgb().formatHex8()}function QUe(){return Dne(this).formatHsl()}function F6(){return this.rgb().formatRgb()}function Aw(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=VUe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?j6(t):r===3?new fs(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Q_(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Q_(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=HUe.exec(e))?new fs(t[1],t[2],t[3],1):(t=GUe.exec(e))?new fs(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=WUe.exec(e))?Q_(t[1],t[2],t[3],t[4]):(t=qUe.exec(e))?Q_(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=KUe.exec(e))?V6(t[1],t[2]/100,t[3]/100,1):(t=XUe.exec(e))?V6(t[1],t[2]/100,t[3]/100,t[4]):z6.hasOwnProperty(e)?j6(z6[e]):e==="transparent"?new fs(NaN,NaN,NaN,0):null}function j6(e){return new fs(e>>16&255,e>>8&255,e&255,1)}function Q_(e,t,r,n){return n<=0&&(e=t=r=NaN),new fs(e,t,r,n)}function ZUe(e){return e instanceof FS||(e=Aw(e)),e?(e=e.rgb(),new fs(e.r,e.g,e.b,e.opacity)):new fs}function ML(e,t,r,n){return arguments.length===1?ZUe(e):new fs(e,t,r,n??1)}function fs(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Lj(fs,ML,Ine(FS,{brighter(e){return e=e==null?bM:Math.pow(bM,e),new fs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?_w:Math.pow(_w,e),new fs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new fs(wm(this.r),wm(this.g),wm(this.b),xM(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:U6,formatHex:U6,formatHex8:JUe,formatRgb:$6,toString:$6}));function U6(){return`#${sm(this.r)}${sm(this.g)}${sm(this.b)}`}function JUe(){return`#${sm(this.r)}${sm(this.g)}${sm(this.b)}${sm((isNaN(this.opacity)?1:this.opacity)*255)}`}function $6(){const e=xM(this.opacity);return`${e===1?"rgb(":"rgba("}${wm(this.r)}, ${wm(this.g)}, ${wm(this.b)}${e===1?")":`, ${e})`}`}function xM(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function wm(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function sm(e){return e=wm(e),(e<16?"0":"")+e.toString(16)}function V6(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new yu(e,t,r,n)}function Dne(e){if(e instanceof yu)return new yu(e.h,e.s,e.l,e.opacity);if(e instanceof FS||(e=Aw(e)),!e)return new yu;if(e instanceof yu)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),o=Math.max(t,r,n),a=NaN,s=o-i,l=(o+i)/2;return s?(t===o?a=(r-n)/s+(r<n)*6:r===o?a=(n-t)/s+2:a=(t-r)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new yu(a,s,l,e.opacity)}function e5e(e,t,r,n){return arguments.length===1?Dne(e):new yu(e,t,r,n??1)}function yu(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Lj(yu,e5e,Ine(FS,{brighter(e){return e=e==null?bM:Math.pow(bM,e),new yu(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?_w:Math.pow(_w,e),new yu(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new fs(tD(e>=240?e-240:e+120,i,n),tD(e,i,n),tD(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new yu(H6(this.h),Z_(this.s),Z_(this.l),xM(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=xM(this.opacity);return`${e===1?"hsl(":"hsla("}${H6(this.h)}, ${Z_(this.s)*100}%, ${Z_(this.l)*100}%${e===1?")":`, ${e})`}`}}));function H6(e){return e=(e||0)%360,e<0?e+360:e}function Z_(e){return Math.max(0,Math.min(1,e||0))}function tD(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Nj=e=>()=>e;function t5e(e,t){return function(r){return e+r*t}}function r5e(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function n5e(e){return(e=+e)==1?Rne:function(t,r){return r-t?r5e(t,r,e):Nj(isNaN(t)?r:t)}}function Rne(e,t){var r=t-e;return r?t5e(e,r):Nj(isNaN(e)?t:e)}const G6=function e(t){var r=n5e(t);function n(i,o){var a=r((i=ML(i)).r,(o=ML(o)).r),s=r(i.g,o.g),l=r(i.b,o.b),u=Rne(i.opacity,o.opacity);return function(d){return i.r=a(d),i.g=s(d),i.b=l(d),i.opacity=u(d),i+""}}return n.gamma=e,n}(1);function i5e(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(o){for(i=0;i<r;++i)n[i]=e[i]*(1-o)+t[i]*o;return n}}function o5e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function a5e(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),o=new Array(r),a;for(a=0;a<n;++a)i[a]=Z0(e[a],t[a]);for(;a<r;++a)o[a]=t[a];return function(s){for(a=0;a<n;++a)o[a]=i[a](s);return o}}function s5e(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function wM(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function l5e(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=Z0(e[i],t[i]):n[i]=t[i];return function(o){for(i in r)n[i]=r[i](o);return n}}var PL=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,rD=new RegExp(PL.source,"g");function u5e(e){return function(){return e}}function c5e(e){return function(t){return e(t)+""}}function d5e(e,t){var r=PL.lastIndex=rD.lastIndex=0,n,i,o,a=-1,s=[],l=[];for(e=e+"",t=t+"";(n=PL.exec(e))&&(i=rD.exec(t));)(o=i.index)>r&&(o=t.slice(r,o),s[a]?s[a]+=o:s[++a]=o),(n=n[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:wM(n,i)})),r=rD.lastIndex;return r<t.length&&(o=t.slice(r),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?c5e(l[0].x):u5e(t):(t=l.length,function(u){for(var d=0,c;d<t;++d)s[(c=l[d]).i]=c.x(u);return s.join("")})}function Z0(e,t){var r=typeof t,n;return t==null||r==="boolean"?Nj(t):(r==="number"?wM:r==="string"?(n=Aw(t))?(t=n,G6):d5e:t instanceof Aw?G6:t instanceof Date?s5e:o5e(t)?i5e:Array.isArray(t)?a5e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?l5e:wM)(e,t)}function zj(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function h5e(e,t){t===void 0&&(t=e,e=Z0);for(var r=0,n=t.length-1,i=t[0],o=new Array(n<0?0:n);r<n;)o[r]=e(i,i=t[++r]);return function(a){var s=Math.max(0,Math.min(n-1,Math.floor(a*=n)));return o[s](a-s)}}function f5e(e){return function(){return e}}function SM(e){return+e}var W6=[0,1];function za(e){return e}function TL(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:f5e(isNaN(t)?NaN:.5)}function p5e(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function m5e(e,t,r){var n=e[0],i=e[1],o=t[0],a=t[1];return i<n?(n=TL(i,n),o=r(a,o)):(n=TL(n,i),o=r(o,a)),function(s){return o(n(s))}}function g5e(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),o=new Array(n),a=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<n;)i[a]=TL(e[a],e[a+1]),o[a]=r(t[a],t[a+1]);return function(s){var l=BS(e,s,1,n)-1;return o[l](i[l](s))}}function jS(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function B2(){var e=W6,t=W6,r=Z0,n,i,o,a=za,s,l,u;function d(){var h=Math.min(e.length,t.length);return a!==za&&(a=p5e(e[0],e[h-1])),s=h>2?g5e:m5e,l=u=null,c}function c(h){return h==null||isNaN(h=+h)?o:(l||(l=s(e.map(n),t,r)))(n(a(h)))}return c.invert=function(h){return a(i((u||(u=s(t,e.map(n),wM)))(h)))},c.domain=function(h){return arguments.length?(e=Array.from(h,SM),d()):e.slice()},c.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},c.rangeRound=function(h){return t=Array.from(h),r=zj,d()},c.clamp=function(h){return arguments.length?(a=h?!0:za,d()):a!==za},c.interpolate=function(h){return arguments.length?(r=h,d()):r},c.unknown=function(h){return arguments.length?(o=h,c):o},function(h,f){return n=h,i=f,d()}}function Bj(){return B2()(za,za)}function v5e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function _M(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Jy(e){return e=_M(Math.abs(e)),e?e[1]:NaN}function y5e(e,t){return function(r,n){for(var i=r.length,o=[],a=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>n&&(s=Math.max(1,n-l)),o.push(r.substring(i-=s,i+s)),!((l+=s+1)>n));)s=e[a=(a+1)%e.length];return o.reverse().join(t)}}function b5e(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var x5e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ew(e){if(!(t=x5e.exec(e)))throw new Error("invalid format: "+e);var t;return new Fj({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ew.prototype=Fj.prototype;function Fj(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Fj.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function w5e(e){e:for(var t=e.length,r=1,n=-1,i;r<t;++r)switch(e[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(i+1):e}var kne;function S5e(e,t){var r=_M(e,t);if(!r)return e+"";var n=r[0],i=r[1],o=i-(kne=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=n.length;return o===a?n:o>a?n+new Array(o-a+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+_M(e,Math.max(0,t+o-1))[0]}function q6(e,t){var r=_M(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const K6={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:v5e,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>q6(e*100,t),r:q6,s:S5e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function X6(e){return e}var Y6=Array.prototype.map,Q6=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function _5e(e){var t=e.grouping===void 0||e.thousands===void 0?X6:y5e(Y6.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?X6:b5e(Y6.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(c){c=Ew(c);var h=c.fill,f=c.align,m=c.sign,p=c.symbol,g=c.zero,v=c.width,b=c.comma,y=c.precision,x=c.trim,S=c.type;S==="n"?(b=!0,S="g"):K6[S]||(y===void 0&&(y=12),x=!0,S="g"),(g||h==="0"&&f==="=")&&(g=!0,h="0",f="=");var w=p==="$"?r:p==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",_=p==="$"?n:/[%p]/.test(S)?a:"",C=K6[S],E=/[defgprs%]/.test(S);y=y===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function A(M){var I=w,O=_,T,D,N;if(S==="c")O=C(M)+O,M="";else{M=+M;var k=M<0||1/M<0;if(M=isNaN(M)?l:C(Math.abs(M),y),x&&(M=w5e(M)),k&&+M==0&&m!=="+"&&(k=!1),I=(k?m==="("?m:s:m==="-"||m==="("?"":m)+I,O=(S==="s"?Q6[8+kne/3]:"")+O+(k&&m==="("?")":""),E){for(T=-1,D=M.length;++T<D;)if(N=M.charCodeAt(T),48>N||N>57){O=(N===46?i+M.slice(T+1):M.slice(T))+O,M=M.slice(0,T);break}}}b&&!g&&(M=t(M,1/0));var R=I.length+M.length+O.length,z=R<v?new Array(v-R+1).join(h):"";switch(b&&g&&(M=t(z+M,z.length?v-O.length:1/0),z=""),f){case"<":M=I+M+O+z;break;case"=":M=I+z+M+O;break;case"^":M=z.slice(0,R=z.length>>1)+I+M+O+z.slice(R);break;default:M=z+I+M+O;break}return o(M)}return A.toString=function(){return c+""},A}function d(c,h){var f=u((c=Ew(c),c.type="f",c)),m=Math.max(-8,Math.min(8,Math.floor(Jy(h)/3)))*3,p=Math.pow(10,-m),g=Q6[8+m/3];return function(v){return f(p*v)+g}}return{format:u,formatPrefix:d}}var J_,jj,Lne;C5e({thousands:",",grouping:[3],currency:["$",""]});function C5e(e){return J_=_5e(e),jj=J_.format,Lne=J_.formatPrefix,J_}function A5e(e){return Math.max(0,-Jy(Math.abs(e)))}function E5e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Jy(t)/3)))*3-Jy(Math.abs(e)))}function M5e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Jy(t)-Jy(e))+1}function Nne(e,t,r,n){var i=AL(e,t,r),o;switch(n=Ew(n??",f"),n.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(o=E5e(i,a))&&(n.precision=o),Lne(n,a)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(o=M5e(i,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=o-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(o=A5e(i))&&(n.precision=o-(n.type==="%")*2);break}}return jj(n)}function gp(e){var t=e.domain;return e.ticks=function(r){var n=t();return _L(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var i=t();return Nne(i[0],i[i.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),i=0,o=n.length-1,a=n[i],s=n[o],l,u,d=10;for(s<a&&(u=a,a=s,s=u,u=i,i=o,o=u);d-- >0;){if(u=CL(a,s,r),u===l)return n[i]=a,n[o]=s,t(n);if(u>0)a=Math.floor(a/u)*u,s=Math.ceil(s/u)*u;else if(u<0)a=Math.ceil(a*u)/u,s=Math.floor(s*u)/u;else break;l=u}return e},e}function CM(){var e=Bj();return e.copy=function(){return jS(e,CM())},Jl.apply(e,arguments),gp(e)}function zne(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,SM),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return zne(e).unknown(t)},e=arguments.length?Array.from(e,SM):[0,1],gp(r)}function Bne(e,t){e=e.slice();var r=0,n=e.length-1,i=e[r],o=e[n],a;return o<i&&(a=r,r=n,n=a,a=i,i=o,o=a),e[r]=t.floor(i),e[n]=t.ceil(o),e}function Z6(e){return Math.log(e)}function J6(e){return Math.exp(e)}function P5e(e){return-Math.log(-e)}function T5e(e){return-Math.exp(-e)}function O5e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function I5e(e){return e===10?O5e:e===Math.E?Math.exp:t=>Math.pow(e,t)}function D5e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function eW(e){return(t,r)=>-e(-t,r)}function Uj(e){const t=e(Z6,J6),r=t.domain;let n=10,i,o;function a(){return i=D5e(n),o=I5e(n),r()[0]<0?(i=eW(i),o=eW(o),e(P5e,T5e)):e(Z6,J6),t}return t.base=function(s){return arguments.length?(n=+s,a()):n},t.domain=function(s){return arguments.length?(r(s),a()):r()},t.ticks=s=>{const l=r();let u=l[0],d=l[l.length-1];const c=d<u;c&&([u,d]=[d,u]);let h=i(u),f=i(d),m,p;const g=s==null?10:+s;let v=[];if(!(n%1)&&f-h<g){if(h=Math.floor(h),f=Math.ceil(f),u>0){for(;h<=f;++h)for(m=1;m<n;++m)if(p=h<0?m/o(-h):m*o(h),!(p<u)){if(p>d)break;v.push(p)}}else for(;h<=f;++h)for(m=n-1;m>=1;--m)if(p=h>0?m/o(-h):m*o(h),!(p<u)){if(p>d)break;v.push(p)}v.length*2<g&&(v=_L(u,d,g))}else v=_L(h,f,Math.min(f-h,g)).map(o);return c?v.reverse():v},t.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=Ew(l)).precision==null&&(l.trim=!0),l=jj(l)),s===1/0)return l;const u=Math.max(1,n*s/t.ticks().length);return d=>{let c=d/o(Math.round(i(d)));return c*n<n-.5&&(c*=n),c<=u?l(d):""}},t.nice=()=>r(Bne(r(),{floor:s=>o(Math.floor(i(s))),ceil:s=>o(Math.ceil(i(s)))})),t}function Fne(){const e=Uj(B2()).domain([1,10]);return e.copy=()=>jS(e,Fne()).base(e.base()),Jl.apply(e,arguments),e}function tW(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function rW(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function $j(e){var t=1,r=e(tW(t),rW(t));return r.constant=function(n){return arguments.length?e(tW(t=+n),rW(t)):t},gp(r)}function jne(){var e=$j(B2());return e.copy=function(){return jS(e,jne()).constant(e.constant())},Jl.apply(e,arguments)}function nW(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function R5e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function k5e(e){return e<0?-e*e:e*e}function Vj(e){var t=e(za,za),r=1;function n(){return r===1?e(za,za):r===.5?e(R5e,k5e):e(nW(r),nW(1/r))}return t.exponent=function(i){return arguments.length?(r=+i,n()):r},gp(t)}function Hj(){var e=Vj(B2());return e.copy=function(){return jS(e,Hj()).exponent(e.exponent())},Jl.apply(e,arguments),e}function L5e(){return Hj.apply(null,arguments).exponent(.5)}function iW(e){return Math.sign(e)*e*e}function N5e(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Une(){var e=Bj(),t=[0,1],r=!1,n;function i(o){var a=N5e(e(o));return isNaN(a)?n:r?Math.round(a):a}return i.invert=function(o){return e.invert(iW(o))},i.domain=function(o){return arguments.length?(e.domain(o),i):e.domain()},i.range=function(o){return arguments.length?(e.range((t=Array.from(o,SM)).map(iW)),i):t.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(r=!!o,i):r},i.clamp=function(o){return arguments.length?(e.clamp(o),i):e.clamp()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return Une(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Jl.apply(i,arguments),gp(i)}function $ne(){var e=[],t=[],r=[],n;function i(){var a=0,s=Math.max(1,t.length);for(r=new Array(s-1);++a<s;)r[a-1]=UUe(e,a/s);return o}function o(a){return a==null||isNaN(a=+a)?n:t[BS(r,a)]}return o.invertExtent=function(a){var s=t.indexOf(a);return s<0?[NaN,NaN]:[s>0?r[s-1]:e[0],s<r.length?r[s]:e[e.length-1]]},o.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Ff),i()},o.range=function(a){return arguments.length?(t=Array.from(a),i()):t.slice()},o.unknown=function(a){return arguments.length?(n=a,o):n},o.quantiles=function(){return r.slice()},o.copy=function(){return $ne().domain(e).range(t).unknown(n)},Jl.apply(o,arguments)}function Vne(){var e=0,t=1,r=1,n=[.5],i=[0,1],o;function a(l){return l!=null&&l<=l?i[BS(n,l,0,r)]:o}function s(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*t-(l-r)*e)/(r+1);return a}return a.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,s()):[e,t]},a.range=function(l){return arguments.length?(r=(i=Array.from(l)).length-1,s()):i.slice()},a.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},a.unknown=function(l){return arguments.length&&(o=l),a},a.thresholds=function(){return n.slice()},a.copy=function(){return Vne().domain([e,t]).range(i).unknown(o)},Jl.apply(gp(a),arguments)}function Hne(){var e=[.5],t=[0,1],r,n=1;function i(o){return o!=null&&o<=o?t[BS(e,o,0,n)]:r}return i.domain=function(o){return arguments.length?(e=Array.from(o),n=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),n=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var a=t.indexOf(o);return[e[a-1],e[a]]},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Hne().domain(e).range(t).unknown(r)},Jl.apply(i,arguments)}const nD=new Date,iD=new Date;function go(e,t,r,n){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const a=i(o),s=i.ceil(o);return o-a<s-o?a:s},i.offset=(o,a)=>(t(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,s)=>{const l=[];if(o=i.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return l;let u;do l.push(u=new Date(+o)),t(o,s),e(o);while(u<o&&o<a);return l},i.filter=o=>go(a=>{if(a>=a)for(;e(a),!o(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;t(a,-1),!o(a););else for(;--s>=0;)for(;t(a,1),!o(a););}),r&&(i.count=(o,a)=>(nD.setTime(+o),iD.setTime(+a),e(nD),e(iD),Math.floor(r(nD,iD))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(n?a=>n(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const AM=go(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);AM.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?go(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):AM);AM.range;const Hd=1e3,zl=Hd*60,Gd=zl*60,uh=Gd*24,Gj=uh*7,oW=uh*30,oD=uh*365,lm=go(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Hd)},(e,t)=>(t-e)/Hd,e=>e.getUTCSeconds());lm.range;const Wj=go(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Hd)},(e,t)=>{e.setTime(+e+t*zl)},(e,t)=>(t-e)/zl,e=>e.getMinutes());Wj.range;const qj=go(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*zl)},(e,t)=>(t-e)/zl,e=>e.getUTCMinutes());qj.range;const Kj=go(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Hd-e.getMinutes()*zl)},(e,t)=>{e.setTime(+e+t*Gd)},(e,t)=>(t-e)/Gd,e=>e.getHours());Kj.range;const Xj=go(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Gd)},(e,t)=>(t-e)/Gd,e=>e.getUTCHours());Xj.range;const US=go(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*zl)/uh,e=>e.getDate()-1);US.range;const F2=go(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/uh,e=>e.getUTCDate()-1);F2.range;const Gne=go(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/uh,e=>Math.floor(e/uh));Gne.range;function lg(e){return go(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*zl)/Gj)}const j2=lg(0),EM=lg(1),z5e=lg(2),B5e=lg(3),e0=lg(4),F5e=lg(5),j5e=lg(6);j2.range;EM.range;z5e.range;B5e.range;e0.range;F5e.range;j5e.range;function ug(e){return go(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Gj)}const U2=ug(0),MM=ug(1),U5e=ug(2),$5e=ug(3),t0=ug(4),V5e=ug(5),H5e=ug(6);U2.range;MM.range;U5e.range;$5e.range;t0.range;V5e.range;H5e.range;const Yj=go(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Yj.range;const Qj=go(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Qj.range;const ch=go(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ch.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:go(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});ch.range;const dh=go(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());dh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:go(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});dh.range;function Wne(e,t,r,n,i,o){const a=[[lm,1,Hd],[lm,5,5*Hd],[lm,15,15*Hd],[lm,30,30*Hd],[o,1,zl],[o,5,5*zl],[o,15,15*zl],[o,30,30*zl],[i,1,Gd],[i,3,3*Gd],[i,6,6*Gd],[i,12,12*Gd],[n,1,uh],[n,2,2*uh],[r,1,Gj],[t,1,oW],[t,3,3*oW],[e,1,oD]];function s(u,d,c){const h=d<u;h&&([u,d]=[d,u]);const f=c&&typeof c.range=="function"?c:l(u,d,c),m=f?f.range(u,+d+1):[];return h?m.reverse():m}function l(u,d,c){const h=Math.abs(d-u)/c,f=Rj(([,,g])=>g).right(a,h);if(f===a.length)return e.every(AL(u/oD,d/oD,c));if(f===0)return AM.every(Math.max(AL(u,d,c),1));const[m,p]=a[h/a[f-1][2]<a[f][2]/h?f-1:f];return m.every(p)}return[s,l]}const[G5e,W5e]=Wne(dh,Qj,U2,Gne,Xj,qj),[q5e,K5e]=Wne(ch,Yj,j2,US,Kj,Wj);function aD(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function sD(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Gb(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function X5e(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,o=e.days,a=e.shortDays,s=e.months,l=e.shortMonths,u=Wb(i),d=qb(i),c=Wb(o),h=qb(o),f=Wb(a),m=qb(a),p=Wb(s),g=qb(s),v=Wb(l),b=qb(l),y={a:k,A:R,b:z,B:j,c:null,d:dW,e:dW,f:y$e,g:P$e,G:O$e,H:m$e,I:g$e,j:v$e,L:qne,m:b$e,M:x$e,p:$,q:U,Q:pW,s:mW,S:w$e,u:S$e,U:_$e,V:C$e,w:A$e,W:E$e,x:null,X:null,y:M$e,Y:T$e,Z:I$e,"%":fW},x={a:H,A:V,b:Q,B:X,c:null,d:hW,e:hW,f:L$e,g:G$e,G:q$e,H:D$e,I:R$e,j:k$e,L:Xne,m:N$e,M:z$e,p:ne,q:J,Q:pW,s:mW,S:B$e,u:F$e,U:j$e,V:U$e,w:$$e,W:V$e,x:null,X:null,y:H$e,Y:W$e,Z:K$e,"%":fW},S={a:A,A:M,b:I,B:O,c:T,d:uW,e:uW,f:d$e,g:lW,G:sW,H:cW,I:cW,j:s$e,L:c$e,m:a$e,M:l$e,p:E,q:o$e,Q:f$e,s:p$e,S:u$e,u:e$e,U:t$e,V:r$e,w:J5e,W:n$e,x:D,X:N,y:lW,Y:sW,Z:i$e,"%":h$e};y.x=w(r,y),y.X=w(n,y),y.c=w(t,y),x.x=w(r,x),x.X=w(n,x),x.c=w(t,x);function w(W,te){return function(Z){var q=[],ie=-1,he=0,ae=W.length,be,ye,Se;for(Z instanceof Date||(Z=new Date(+Z));++ie<ae;)W.charCodeAt(ie)===37&&(q.push(W.slice(he,ie)),(ye=aW[be=W.charAt(++ie)])!=null?be=W.charAt(++ie):ye=be==="e"?" ":"0",(Se=te[be])&&(be=Se(Z,ye)),q.push(be),he=ie+1);return q.push(W.slice(he,ie)),q.join("")}}function _(W,te){return function(Z){var q=Gb(1900,void 0,1),ie=C(q,W,Z+="",0),he,ae;if(ie!=Z.length)return null;if("Q"in q)return new Date(q.Q);if("s"in q)return new Date(q.s*1e3+("L"in q?q.L:0));if(te&&!("Z"in q)&&(q.Z=0),"p"in q&&(q.H=q.H%12+q.p*12),q.m===void 0&&(q.m="q"in q?q.q:0),"V"in q){if(q.V<1||q.V>53)return null;"w"in q||(q.w=1),"Z"in q?(he=sD(Gb(q.y,0,1)),ae=he.getUTCDay(),he=ae>4||ae===0?MM.ceil(he):MM(he),he=F2.offset(he,(q.V-1)*7),q.y=he.getUTCFullYear(),q.m=he.getUTCMonth(),q.d=he.getUTCDate()+(q.w+6)%7):(he=aD(Gb(q.y,0,1)),ae=he.getDay(),he=ae>4||ae===0?EM.ceil(he):EM(he),he=US.offset(he,(q.V-1)*7),q.y=he.getFullYear(),q.m=he.getMonth(),q.d=he.getDate()+(q.w+6)%7)}else("W"in q||"U"in q)&&("w"in q||(q.w="u"in q?q.u%7:"W"in q?1:0),ae="Z"in q?sD(Gb(q.y,0,1)).getUTCDay():aD(Gb(q.y,0,1)).getDay(),q.m=0,q.d="W"in q?(q.w+6)%7+q.W*7-(ae+5)%7:q.w+q.U*7-(ae+6)%7);return"Z"in q?(q.H+=q.Z/100|0,q.M+=q.Z%100,sD(q)):aD(q)}}function C(W,te,Z,q){for(var ie=0,he=te.length,ae=Z.length,be,ye;ie<he;){if(q>=ae)return-1;if(be=te.charCodeAt(ie++),be===37){if(be=te.charAt(ie++),ye=S[be in aW?te.charAt(ie++):be],!ye||(q=ye(W,Z,q))<0)return-1}else if(be!=Z.charCodeAt(q++))return-1}return q}function E(W,te,Z){var q=u.exec(te.slice(Z));return q?(W.p=d.get(q[0].toLowerCase()),Z+q[0].length):-1}function A(W,te,Z){var q=f.exec(te.slice(Z));return q?(W.w=m.get(q[0].toLowerCase()),Z+q[0].length):-1}function M(W,te,Z){var q=c.exec(te.slice(Z));return q?(W.w=h.get(q[0].toLowerCase()),Z+q[0].length):-1}function I(W,te,Z){var q=v.exec(te.slice(Z));return q?(W.m=b.get(q[0].toLowerCase()),Z+q[0].length):-1}function O(W,te,Z){var q=p.exec(te.slice(Z));return q?(W.m=g.get(q[0].toLowerCase()),Z+q[0].length):-1}function T(W,te,Z){return C(W,t,te,Z)}function D(W,te,Z){return C(W,r,te,Z)}function N(W,te,Z){return C(W,n,te,Z)}function k(W){return a[W.getDay()]}function R(W){return o[W.getDay()]}function z(W){return l[W.getMonth()]}function j(W){return s[W.getMonth()]}function $(W){return i[+(W.getHours()>=12)]}function U(W){return 1+~~(W.getMonth()/3)}function H(W){return a[W.getUTCDay()]}function V(W){return o[W.getUTCDay()]}function Q(W){return l[W.getUTCMonth()]}function X(W){return s[W.getUTCMonth()]}function ne(W){return i[+(W.getUTCHours()>=12)]}function J(W){return 1+~~(W.getUTCMonth()/3)}return{format:function(W){var te=w(W+="",y);return te.toString=function(){return W},te},parse:function(W){var te=_(W+="",!1);return te.toString=function(){return W},te},utcFormat:function(W){var te=w(W+="",x);return te.toString=function(){return W},te},utcParse:function(W){var te=_(W+="",!0);return te.toString=function(){return W},te}}}var aW={"-":"",_:" ",0:"0"},ko=/^\s*\d+/,Y5e=/^%/,Q5e=/[\\^$*+?|[\]().{}]/g;function Xr(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",o=i.length;return n+(o<r?new Array(r-o+1).join(t)+i:i)}function Z5e(e){return e.replace(Q5e,"\\$&")}function Wb(e){return new RegExp("^(?:"+e.map(Z5e).join("|")+")","i")}function qb(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function J5e(e,t,r){var n=ko.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function e$e(e,t,r){var n=ko.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function t$e(e,t,r){var n=ko.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function r$e(e,t,r){var n=ko.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function n$e(e,t,r){var n=ko.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function sW(e,t,r){var n=ko.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function lW(e,t,r){var n=ko.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function i$e(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function o$e(e,t,r){var n=ko.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function a$e(e,t,r){var n=ko.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function uW(e,t,r){var n=ko.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function s$e(e,t,r){var n=ko.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function cW(e,t,r){var n=ko.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function l$e(e,t,r){var n=ko.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function u$e(e,t,r){var n=ko.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function c$e(e,t,r){var n=ko.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function d$e(e,t,r){var n=ko.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function h$e(e,t,r){var n=Y5e.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function f$e(e,t,r){var n=ko.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function p$e(e,t,r){var n=ko.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function dW(e,t){return Xr(e.getDate(),t,2)}function m$e(e,t){return Xr(e.getHours(),t,2)}function g$e(e,t){return Xr(e.getHours()%12||12,t,2)}function v$e(e,t){return Xr(1+US.count(ch(e),e),t,3)}function qne(e,t){return Xr(e.getMilliseconds(),t,3)}function y$e(e,t){return qne(e,t)+"000"}function b$e(e,t){return Xr(e.getMonth()+1,t,2)}function x$e(e,t){return Xr(e.getMinutes(),t,2)}function w$e(e,t){return Xr(e.getSeconds(),t,2)}function S$e(e){var t=e.getDay();return t===0?7:t}function _$e(e,t){return Xr(j2.count(ch(e)-1,e),t,2)}function Kne(e){var t=e.getDay();return t>=4||t===0?e0(e):e0.ceil(e)}function C$e(e,t){return e=Kne(e),Xr(e0.count(ch(e),e)+(ch(e).getDay()===4),t,2)}function A$e(e){return e.getDay()}function E$e(e,t){return Xr(EM.count(ch(e)-1,e),t,2)}function M$e(e,t){return Xr(e.getFullYear()%100,t,2)}function P$e(e,t){return e=Kne(e),Xr(e.getFullYear()%100,t,2)}function T$e(e,t){return Xr(e.getFullYear()%1e4,t,4)}function O$e(e,t){var r=e.getDay();return e=r>=4||r===0?e0(e):e0.ceil(e),Xr(e.getFullYear()%1e4,t,4)}function I$e(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Xr(t/60|0,"0",2)+Xr(t%60,"0",2)}function hW(e,t){return Xr(e.getUTCDate(),t,2)}function D$e(e,t){return Xr(e.getUTCHours(),t,2)}function R$e(e,t){return Xr(e.getUTCHours()%12||12,t,2)}function k$e(e,t){return Xr(1+F2.count(dh(e),e),t,3)}function Xne(e,t){return Xr(e.getUTCMilliseconds(),t,3)}function L$e(e,t){return Xne(e,t)+"000"}function N$e(e,t){return Xr(e.getUTCMonth()+1,t,2)}function z$e(e,t){return Xr(e.getUTCMinutes(),t,2)}function B$e(e,t){return Xr(e.getUTCSeconds(),t,2)}function F$e(e){var t=e.getUTCDay();return t===0?7:t}function j$e(e,t){return Xr(U2.count(dh(e)-1,e),t,2)}function Yne(e){var t=e.getUTCDay();return t>=4||t===0?t0(e):t0.ceil(e)}function U$e(e,t){return e=Yne(e),Xr(t0.count(dh(e),e)+(dh(e).getUTCDay()===4),t,2)}function $$e(e){return e.getUTCDay()}function V$e(e,t){return Xr(MM.count(dh(e)-1,e),t,2)}function H$e(e,t){return Xr(e.getUTCFullYear()%100,t,2)}function G$e(e,t){return e=Yne(e),Xr(e.getUTCFullYear()%100,t,2)}function W$e(e,t){return Xr(e.getUTCFullYear()%1e4,t,4)}function q$e(e,t){var r=e.getUTCDay();return e=r>=4||r===0?t0(e):t0.ceil(e),Xr(e.getUTCFullYear()%1e4,t,4)}function K$e(){return"+0000"}function fW(){return"%"}function pW(e){return+e}function mW(e){return Math.floor(+e/1e3)}var Pg,Qne,Zne;X$e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function X$e(e){return Pg=X5e(e),Qne=Pg.format,Pg.parse,Zne=Pg.utcFormat,Pg.utcParse,Pg}function Y$e(e){return new Date(e)}function Q$e(e){return e instanceof Date?+e:+new Date(+e)}function Zj(e,t,r,n,i,o,a,s,l,u){var d=Bj(),c=d.invert,h=d.domain,f=u(".%L"),m=u(":%S"),p=u("%I:%M"),g=u("%I %p"),v=u("%a %d"),b=u("%b %d"),y=u("%B"),x=u("%Y");function S(w){return(l(w)<w?f:s(w)<w?m:a(w)<w?p:o(w)<w?g:n(w)<w?i(w)<w?v:b:r(w)<w?y:x)(w)}return d.invert=function(w){return new Date(c(w))},d.domain=function(w){return arguments.length?h(Array.from(w,Q$e)):h().map(Y$e)},d.ticks=function(w){var _=h();return e(_[0],_[_.length-1],w??10)},d.tickFormat=function(w,_){return _==null?S:u(_)},d.nice=function(w){var _=h();return(!w||typeof w.range!="function")&&(w=t(_[0],_[_.length-1],w??10)),w?h(Bne(_,w)):d},d.copy=function(){return jS(d,Zj(e,t,r,n,i,o,a,s,l,u))},d}function Z$e(){return Jl.apply(Zj(q5e,K5e,ch,Yj,j2,US,Kj,Wj,lm,Qne).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function J$e(){return Jl.apply(Zj(G5e,W5e,dh,Qj,U2,F2,Xj,qj,lm,Zne).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function $2(){var e=0,t=1,r,n,i,o,a=za,s=!1,l;function u(c){return c==null||isNaN(c=+c)?l:a(i===0?.5:(c=(o(c)-r)*i,s?Math.max(0,Math.min(1,c)):c))}u.domain=function(c){return arguments.length?([e,t]=c,r=o(e=+e),n=o(t=+t),i=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(c){return arguments.length?(s=!!c,u):s},u.interpolator=function(c){return arguments.length?(a=c,u):a};function d(c){return function(h){var f,m;return arguments.length?([f,m]=h,a=c(f,m),u):[a(0),a(1)]}}return u.range=d(Z0),u.rangeRound=d(zj),u.unknown=function(c){return arguments.length?(l=c,u):l},function(c){return o=c,r=c(e),n=c(t),i=r===n?0:1/(n-r),u}}function vp(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Jne(){var e=gp($2()(za));return e.copy=function(){return vp(e,Jne())},Sh.apply(e,arguments)}function eie(){var e=Uj($2()).domain([1,10]);return e.copy=function(){return vp(e,eie()).base(e.base())},Sh.apply(e,arguments)}function tie(){var e=$j($2());return e.copy=function(){return vp(e,tie()).constant(e.constant())},Sh.apply(e,arguments)}function Jj(){var e=Vj($2());return e.copy=function(){return vp(e,Jj()).exponent(e.exponent())},Sh.apply(e,arguments)}function eVe(){return Jj.apply(null,arguments).exponent(.5)}function rie(){var e=[],t=za;function r(n){if(n!=null&&!isNaN(n=+n))return t((BS(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let i of n)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Ff),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,i)=>t(i/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,o)=>jUe(e,o/n))},r.copy=function(){return rie(t).domain(e)},Sh.apply(r,arguments)}function V2(){var e=0,t=.5,r=1,n=1,i,o,a,s,l,u=za,d,c=!1,h;function f(p){return isNaN(p=+p)?h:(p=.5+((p=+d(p))-o)*(n*p<n*o?s:l),u(c?Math.max(0,Math.min(1,p)):p))}f.domain=function(p){return arguments.length?([e,t,r]=p,i=d(e=+e),o=d(t=+t),a=d(r=+r),s=i===o?0:.5/(o-i),l=o===a?0:.5/(a-o),n=o<i?-1:1,f):[e,t,r]},f.clamp=function(p){return arguments.length?(c=!!p,f):c},f.interpolator=function(p){return arguments.length?(u=p,f):u};function m(p){return function(g){var v,b,y;return arguments.length?([v,b,y]=g,u=h5e(p,[v,b,y]),f):[u(0),u(.5),u(1)]}}return f.range=m(Z0),f.rangeRound=m(zj),f.unknown=function(p){return arguments.length?(h=p,f):h},function(p){return d=p,i=p(e),o=p(t),a=p(r),s=i===o?0:.5/(o-i),l=o===a?0:.5/(a-o),n=o<i?-1:1,f}}function nie(){var e=gp(V2()(za));return e.copy=function(){return vp(e,nie())},Sh.apply(e,arguments)}function iie(){var e=Uj(V2()).domain([.1,1,10]);return e.copy=function(){return vp(e,iie()).base(e.base())},Sh.apply(e,arguments)}function oie(){var e=$j(V2());return e.copy=function(){return vp(e,oie()).constant(e.constant())},Sh.apply(e,arguments)}function e4(){var e=Vj(V2());return e.copy=function(){return vp(e,e4()).exponent(e.exponent())},Sh.apply(e,arguments)}function tVe(){return e4.apply(null,arguments).exponent(.5)}const gW=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Sw,scaleDiverging:nie,scaleDivergingLog:iie,scaleDivergingPow:e4,scaleDivergingSqrt:tVe,scaleDivergingSymlog:oie,scaleIdentity:zne,scaleImplicit:EL,scaleLinear:CM,scaleLog:Fne,scaleOrdinal:kj,scalePoint:h1,scalePow:Hj,scaleQuantile:$ne,scaleQuantize:Vne,scaleRadial:Une,scaleSequential:Jne,scaleSequentialLog:eie,scaleSequentialPow:Jj,scaleSequentialQuantile:rie,scaleSequentialSqrt:eVe,scaleSequentialSymlog:tie,scaleSqrt:L5e,scaleSymlog:jne,scaleThreshold:Hne,scaleTime:Z$e,scaleUtc:J$e,tickFormat:Nne},Symbol.toStringTag,{value:"Module"}));var J0=1e9,rVe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},r4,Jn=!0,Xl="[DecimalError] ",Sm=Xl+"Invalid argument: ",t4=Xl+"Exponent out of range: ",eb=Math.floor,Fp=Math.pow,nVe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ws,So=1e7,Vn=7,aie=9007199254740991,PM=eb(aie/Vn),Ct={};Ct.absoluteValue=Ct.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ct.comparedTo=Ct.cmp=function(e){var t,r,n,i,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(n=o.d.length,i=e.d.length,t=0,r=n<i?n:i;t<r;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return n===i?0:n>i^o.s<0?1:-1};Ct.decimalPlaces=Ct.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Vn;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ct.dividedBy=Ct.div=function(e){return Yd(this,new this.constructor(e))};Ct.dividedToIntegerBy=Ct.idiv=function(e){var t=this,r=t.constructor;return Tn(Yd(t,new r(e),0,1),r.precision)};Ct.equals=Ct.eq=function(e){return!this.cmp(e)};Ct.exponent=function(){return Ki(this)};Ct.greaterThan=Ct.gt=function(e){return this.cmp(e)>0};Ct.greaterThanOrEqualTo=Ct.gte=function(e){return this.cmp(e)>=0};Ct.isInteger=Ct.isint=function(){return this.e>this.d.length-2};Ct.isNegative=Ct.isneg=function(){return this.s<0};Ct.isPositive=Ct.ispos=function(){return this.s>0};Ct.isZero=function(){return this.s===0};Ct.lessThan=Ct.lt=function(e){return this.cmp(e)<0};Ct.lessThanOrEqualTo=Ct.lte=function(e){return this.cmp(e)<1};Ct.logarithm=Ct.log=function(e){var t,r=this,n=r.constructor,i=n.precision,o=i+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Ws))throw Error(Xl+"NaN");if(r.s<1)throw Error(Xl+(r.s?"NaN":"-Infinity"));return r.eq(Ws)?new n(0):(Jn=!1,t=Yd(Mw(r,o),Mw(e,o),o),Jn=!0,Tn(t,i))};Ct.minus=Ct.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?uie(t,e):sie(t,(e.s=-e.s,e))};Ct.modulo=Ct.mod=function(e){var t,r=this,n=r.constructor,i=n.precision;if(e=new n(e),!e.s)throw Error(Xl+"NaN");return r.s?(Jn=!1,t=Yd(r,e,0,1).times(e),Jn=!0,r.minus(t)):Tn(new n(r),i)};Ct.naturalExponential=Ct.exp=function(){return lie(this)};Ct.naturalLogarithm=Ct.ln=function(){return Mw(this)};Ct.negated=Ct.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ct.plus=Ct.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?sie(t,e):uie(t,(e.s=-e.s,e))};Ct.precision=Ct.sd=function(e){var t,r,n,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Sm+e);if(t=Ki(i)+1,n=i.d.length-1,r=n*Vn+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ct.squareRoot=Ct.sqrt=function(){var e,t,r,n,i,o,a,s=this,l=s.constructor;if(s.s<1){if(!s.s)return new l(0);throw Error(Xl+"NaN")}for(e=Ki(s),Jn=!1,i=Math.sqrt(+s),i==0||i==1/0?(t=Ic(s.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=eb((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new l(t)):n=new l(i.toString()),r=l.precision,i=a=r+3;;)if(o=n,n=o.plus(Yd(s,o,a+2)).times(.5),Ic(o.d).slice(0,a)===(t=Ic(n.d)).slice(0,a)){if(t=t.slice(a-3,a+1),i==a&&t=="4999"){if(Tn(o,r+1,0),o.times(o).eq(s)){n=o;break}}else if(t!="9999")break;a+=4}return Jn=!0,Tn(n,r)};Ct.times=Ct.mul=function(e){var t,r,n,i,o,a,s,l,u,d=this,c=d.constructor,h=d.d,f=(e=new c(e)).d;if(!d.s||!e.s)return new c(0);for(e.s*=d.s,r=d.e+e.e,l=h.length,u=f.length,l<u&&(o=h,h=f,f=o,a=l,l=u,u=a),o=[],a=l+u,n=a;n--;)o.push(0);for(n=u;--n>=0;){for(t=0,i=l+n;i>n;)s=o[i]+f[n]*h[i-n-1]+t,o[i--]=s%So|0,t=s/So|0;o[i]=(o[i]+t)%So|0}for(;!o[--a];)o.pop();return t?++r:o.shift(),e.d=o,e.e=r,Jn?Tn(e,c.precision):e};Ct.toDecimalPlaces=Ct.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Qc(e,0,J0),t===void 0?t=n.rounding:Qc(t,0,8),Tn(r,e+Ki(r)+1,t))};Ct.toExponential=function(e,t){var r,n=this,i=n.constructor;return e===void 0?r=Gm(n,!0):(Qc(e,0,J0),t===void 0?t=i.rounding:Qc(t,0,8),n=Tn(new i(n),e+1,t),r=Gm(n,!0,e+1)),r};Ct.toFixed=function(e,t){var r,n,i=this,o=i.constructor;return e===void 0?Gm(i):(Qc(e,0,J0),t===void 0?t=o.rounding:Qc(t,0,8),n=Tn(new o(i),e+Ki(i)+1,t),r=Gm(n.abs(),!1,e+Ki(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};Ct.toInteger=Ct.toint=function(){var e=this,t=e.constructor;return Tn(new t(e),Ki(e)+1,t.rounding)};Ct.toNumber=function(){return+this};Ct.toPower=Ct.pow=function(e){var t,r,n,i,o,a,s=this,l=s.constructor,u=12,d=+(e=new l(e));if(!e.s)return new l(Ws);if(s=new l(s),!s.s){if(e.s<1)throw Error(Xl+"Infinity");return s}if(s.eq(Ws))return s;if(n=l.precision,e.eq(Ws))return Tn(s,n);if(t=e.e,r=e.d.length-1,a=t>=r,o=s.s,a){if((r=d<0?-d:d)<=aie){for(i=new l(Ws),t=Math.ceil(n/Vn+4),Jn=!1;r%2&&(i=i.times(s),yW(i.d,t)),r=eb(r/2),r!==0;)s=s.times(s),yW(s.d,t);return Jn=!0,e.s<0?new l(Ws).div(i):Tn(i,n)}}else if(o<0)throw Error(Xl+"NaN");return o=o<0&&e.d[Math.max(t,r)]&1?-1:1,s.s=1,Jn=!1,i=e.times(Mw(s,n+u)),Jn=!0,i=lie(i),i.s=o,i};Ct.toPrecision=function(e,t){var r,n,i=this,o=i.constructor;return e===void 0?(r=Ki(i),n=Gm(i,r<=o.toExpNeg||r>=o.toExpPos)):(Qc(e,1,J0),t===void 0?t=o.rounding:Qc(t,0,8),i=Tn(new o(i),e,t),r=Ki(i),n=Gm(i,e<=r||r<=o.toExpNeg,e)),n};Ct.toSignificantDigits=Ct.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Qc(e,1,J0),t===void 0?t=n.rounding:Qc(t,0,8)),Tn(new n(r),e,t)};Ct.toString=Ct.valueOf=Ct.val=Ct.toJSON=Ct[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ki(e),r=e.constructor;return Gm(e,t<=r.toExpNeg||t>=r.toExpPos)};function sie(e,t){var r,n,i,o,a,s,l,u,d=e.constructor,c=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Jn?Tn(t,c):t;if(l=e.d,u=t.d,a=e.e,i=t.e,l=l.slice(),o=a-i,o){for(o<0?(n=l,o=-o,s=u.length):(n=u,i=a,s=l.length),a=Math.ceil(c/Vn),s=a>s?a+1:s+1,o>s&&(o=s,n.length=1),n.reverse();o--;)n.push(0);n.reverse()}for(s=l.length,o=u.length,s-o<0&&(o=s,n=u,u=l,l=n),r=0;o;)r=(l[--o]=l[o]+u[o]+r)/So|0,l[o]%=So;for(r&&(l.unshift(r),++i),s=l.length;l[--s]==0;)l.pop();return t.d=l,t.e=i,Jn?Tn(t,c):t}function Qc(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Sm+e)}function Ic(e){var t,r,n,i=e.length-1,o="",a=e[0];if(i>0){for(o+=a,t=1;t<i;t++)n=e[t]+"",r=Vn-n.length,r&&(o+=Yh(r)),o+=n;a=e[t],n=a+"",r=Vn-n.length,r&&(o+=Yh(r))}else if(a===0)return"0";for(;a%10===0;)a/=10;return o+a}var Yd=function(){function e(n,i){var o,a=0,s=n.length;for(n=n.slice();s--;)o=n[s]*i+a,n[s]=o%So|0,a=o/So|0;return a&&n.unshift(a),n}function t(n,i,o,a){var s,l;if(o!=a)l=o>a?1:-1;else for(s=l=0;s<o;s++)if(n[s]!=i[s]){l=n[s]>i[s]?1:-1;break}return l}function r(n,i,o){for(var a=0;o--;)n[o]-=a,a=n[o]<i[o]?1:0,n[o]=a*So+n[o]-i[o];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,o,a){var s,l,u,d,c,h,f,m,p,g,v,b,y,x,S,w,_,C,E=n.constructor,A=n.s==i.s?1:-1,M=n.d,I=i.d;if(!n.s)return new E(n);if(!i.s)throw Error(Xl+"Division by zero");for(l=n.e-i.e,_=I.length,S=M.length,f=new E(A),m=f.d=[],u=0;I[u]==(M[u]||0);)++u;if(I[u]>(M[u]||0)&&--l,o==null?b=o=E.precision:a?b=o+(Ki(n)-Ki(i))+1:b=o,b<0)return new E(0);if(b=b/Vn+2|0,u=0,_==1)for(d=0,I=I[0],b++;(u<S||d)&&b--;u++)y=d*So+(M[u]||0),m[u]=y/I|0,d=y%I|0;else{for(d=So/(I[0]+1)|0,d>1&&(I=e(I,d),M=e(M,d),_=I.length,S=M.length),x=_,p=M.slice(0,_),g=p.length;g<_;)p[g++]=0;C=I.slice(),C.unshift(0),w=I[0],I[1]>=So/2&&++w;do d=0,s=t(I,p,_,g),s<0?(v=p[0],_!=g&&(v=v*So+(p[1]||0)),d=v/w|0,d>1?(d>=So&&(d=So-1),c=e(I,d),h=c.length,g=p.length,s=t(c,p,h,g),s==1&&(d--,r(c,_<h?C:I,h))):(d==0&&(s=d=1),c=I.slice()),h=c.length,h<g&&c.unshift(0),r(p,c,g),s==-1&&(g=p.length,s=t(I,p,_,g),s<1&&(d++,r(p,_<g?C:I,g))),g=p.length):s===0&&(d++,p=[0]),m[u++]=d,s&&p[0]?p[g++]=M[x]||0:(p=[M[x]],g=1);while((x++<S||p[0]!==void 0)&&b--)}return m[0]||m.shift(),f.e=l,Tn(f,a?o+Ki(f)+1:o)}}();function lie(e,t){var r,n,i,o,a,s,l=0,u=0,d=e.constructor,c=d.precision;if(Ki(e)>16)throw Error(t4+Ki(e));if(!e.s)return new d(Ws);for(t==null?(Jn=!1,s=c):s=t,a=new d(.03125);e.abs().gte(.1);)e=e.times(a),u+=5;for(n=Math.log(Fp(2,u))/Math.LN10*2+5|0,s+=n,r=i=o=new d(Ws),d.precision=s;;){if(i=Tn(i.times(e),s),r=r.times(++l),a=o.plus(Yd(i,r,s)),Ic(a.d).slice(0,s)===Ic(o.d).slice(0,s)){for(;u--;)o=Tn(o.times(o),s);return d.precision=c,t==null?(Jn=!0,Tn(o,c)):o}o=a}}function Ki(e){for(var t=e.e*Vn,r=e.d[0];r>=10;r/=10)t++;return t}function lD(e,t,r){if(t>e.LN10.sd())throw Jn=!0,r&&(e.precision=r),Error(Xl+"LN10 precision limit exceeded");return Tn(new e(e.LN10),t)}function Yh(e){for(var t="";e--;)t+="0";return t}function Mw(e,t){var r,n,i,o,a,s,l,u,d,c=1,h=10,f=e,m=f.d,p=f.constructor,g=p.precision;if(f.s<1)throw Error(Xl+(f.s?"NaN":"-Infinity"));if(f.eq(Ws))return new p(0);if(t==null?(Jn=!1,u=g):u=t,f.eq(10))return t==null&&(Jn=!0),lD(p,u);if(u+=h,p.precision=u,r=Ic(m),n=r.charAt(0),o=Ki(f),Math.abs(o)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)f=f.times(e),r=Ic(f.d),n=r.charAt(0),c++;o=Ki(f),n>1?(f=new p("0."+r),o++):f=new p(n+"."+r.slice(1))}else return l=lD(p,u+2,g).times(o+""),f=Mw(new p(n+"."+r.slice(1)),u-h).plus(l),p.precision=g,t==null?(Jn=!0,Tn(f,g)):f;for(s=a=f=Yd(f.minus(Ws),f.plus(Ws),u),d=Tn(f.times(f),u),i=3;;){if(a=Tn(a.times(d),u),l=s.plus(Yd(a,new p(i),u)),Ic(l.d).slice(0,u)===Ic(s.d).slice(0,u))return s=s.times(2),o!==0&&(s=s.plus(lD(p,u+2,g).times(o+""))),s=Yd(s,new p(c),u),p.precision=g,t==null?(Jn=!0,Tn(s,g)):s;s=l,i+=2}}function vW(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(n,i),t){if(i-=n,r=r-n-1,e.e=eb(r/Vn),e.d=[],n=(r+1)%Vn,r<0&&(n+=Vn),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=Vn;n<i;)e.d.push(+t.slice(n,n+=Vn));t=t.slice(n),n=Vn-t.length}else n-=i;for(;n--;)t+="0";if(e.d.push(+t),Jn&&(e.e>PM||e.e<-PM))throw Error(t4+r)}else e.s=0,e.e=0,e.d=[0];return e}function Tn(e,t,r){var n,i,o,a,s,l,u,d,c=e.d;for(a=1,o=c[0];o>=10;o/=10)a++;if(n=t-a,n<0)n+=Vn,i=t,u=c[d=0];else{if(d=Math.ceil((n+1)/Vn),o=c.length,d>=o)return e;for(u=o=c[d],a=1;o>=10;o/=10)a++;n%=Vn,i=n-Vn+a}if(r!==void 0&&(o=Fp(10,a-i-1),s=u/o%10|0,l=t<0||c[d+1]!==void 0||u%o,l=r<4?(s||l)&&(r==0||r==(e.s<0?3:2)):s>5||s==5&&(r==4||l||r==6&&(n>0?i>0?u/Fp(10,a-i):0:c[d-1])%10&1||r==(e.s<0?8:7))),t<1||!c[0])return l?(o=Ki(e),c.length=1,t=t-o-1,c[0]=Fp(10,(Vn-t%Vn)%Vn),e.e=eb(-t/Vn)||0):(c.length=1,c[0]=e.e=e.s=0),e;if(n==0?(c.length=d,o=1,d--):(c.length=d+1,o=Fp(10,Vn-n),c[d]=i>0?(u/Fp(10,a-i)%Fp(10,i)|0)*o:0),l)for(;;)if(d==0){(c[0]+=o)==So&&(c[0]=1,++e.e);break}else{if(c[d]+=o,c[d]!=So)break;c[d--]=0,o=1}for(n=c.length;c[--n]===0;)c.pop();if(Jn&&(e.e>PM||e.e<-PM))throw Error(t4+Ki(e));return e}function uie(e,t){var r,n,i,o,a,s,l,u,d,c,h=e.constructor,f=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),Jn?Tn(t,f):t;if(l=e.d,c=t.d,n=t.e,u=e.e,l=l.slice(),a=u-n,a){for(d=a<0,d?(r=l,a=-a,s=c.length):(r=c,n=u,s=l.length),i=Math.max(Math.ceil(f/Vn),s)+2,a>i&&(a=i,r.length=1),r.reverse(),i=a;i--;)r.push(0);r.reverse()}else{for(i=l.length,s=c.length,d=i<s,d&&(s=i),i=0;i<s;i++)if(l[i]!=c[i]){d=l[i]<c[i];break}a=0}for(d&&(r=l,l=c,c=r,t.s=-t.s),s=l.length,i=c.length-s;i>0;--i)l[s++]=0;for(i=c.length;i>a;){if(l[--i]<c[i]){for(o=i;o&&l[--o]===0;)l[o]=So-1;--l[o],l[i]+=So}l[i]-=c[i]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=n,Jn?Tn(t,f):t):new h(0)}function Gm(e,t,r){var n,i=Ki(e),o=Ic(e.d),a=o.length;return t?(r&&(n=r-a)>0?o=o.charAt(0)+"."+o.slice(1)+Yh(n):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+Yh(-i-1)+o,r&&(n=r-a)>0&&(o+=Yh(n))):i>=a?(o+=Yh(i+1-a),r&&(n=r-i-1)>0&&(o=o+"."+Yh(n))):((n=i+1)<a&&(o=o.slice(0,n)+"."+o.slice(n)),r&&(n=r-a)>0&&(i+1===a&&(o+="."),o+=Yh(n))),e.s<0?"-"+o:o}function yW(e,t){if(e.length>t)return e.length=t,!0}function cie(e){var t,r,n;function i(o){var a=this;if(!(a instanceof i))return new i(o);if(a.constructor=i,o instanceof i){a.s=o.s,a.e=o.e,a.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(Sm+o);if(o>0)a.s=1;else if(o<0)o=-o,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(o===~~o&&o<1e7){a.e=0,a.d=[o];return}return vW(a,o.toString())}else if(typeof o!="string")throw Error(Sm+o);if(o.charCodeAt(0)===45?(o=o.slice(1),a.s=-1):a.s=1,nVe.test(o))vW(a,o);else throw Error(Sm+o)}if(i.prototype=Ct,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=cie,i.config=i.set=iVe,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return i.config(e),i}function iVe(e){if(!e||typeof e!="object")throw Error(Xl+"Object expected");var t,r,n,i=["precision",1,J0,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((n=e[r=i[t]])!==void 0)if(eb(n)===n&&n>=i[t+1]&&n<=i[t+2])this[r]=n;else throw Error(Sm+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Sm+r+": "+n);return this}var r4=cie(rVe);Ws=new r4(1);const xn=r4;function oVe(e){return uVe(e)||lVe(e)||sVe(e)||aVe()}function aVe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sVe(e,t){if(e){if(typeof e=="string")return OL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OL(e,t)}}function lVe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function uVe(e){if(Array.isArray(e))return OL(e)}function OL(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var cVe=function(t){return t},die={"@@functional/placeholder":!0},hie=function(t){return t===die},bW=function(t){return function r(){return arguments.length===0||arguments.length===1&&hie(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},dVe=function e(t,r){return t===1?r:bW(function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];var a=i.filter(function(s){return s!==die}).length;return a>=t?r.apply(void 0,i):e(t-a,bW(function(){for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];var d=i.map(function(c){return hie(c)?l.shift():c});return r.apply(void 0,oVe(d).concat(l))}))})},H2=function(t){return dVe(t.length,t)},IL=function(t,r){for(var n=[],i=t;i<r;++i)n[i-t]=i;return n},hVe=H2(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),fVe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return cVe;var i=r.reverse(),o=i[0],a=i.slice(1);return function(){return a.reduce(function(s,l){return l(s)},o.apply(void 0,arguments))}},DL=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},fie=function(t){var r=null,n=null;return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return r&&o.every(function(s,l){return s===r[l]})||(r=o,n=t.apply(void 0,o)),n}};function pVe(e){var t;return e===0?t=1:t=Math.floor(new xn(e).abs().log(10).toNumber())+1,t}function mVe(e,t,r){for(var n=new xn(e),i=0,o=[];n.lt(t)&&i<1e5;)o.push(n.toNumber()),n=n.add(r),i++;return o}var gVe=H2(function(e,t,r){var n=+e,i=+t;return n+r*(i-n)}),vVe=H2(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),yVe=H2(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const G2={rangeStep:mVe,getDigitCount:pVe,interpolateNumber:gVe,uninterpolateNumber:vVe,uninterpolateTruncation:yVe};function RL(e){return wVe(e)||xVe(e)||pie(e)||bVe()}function bVe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xVe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function wVe(e){if(Array.isArray(e))return kL(e)}function Pw(e,t){return CVe(e)||_Ve(e,t)||pie(e,t)||SVe()}function SVe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pie(e,t){if(e){if(typeof e=="string")return kL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kL(e,t)}}function kL(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _Ve(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,i=!1,o=void 0;try{for(var a=e[Symbol.iterator](),s;!(n=(s=a.next()).done)&&(r.push(s.value),!(t&&r.length===t));n=!0);}catch(l){i=!0,o=l}finally{try{!n&&a.return!=null&&a.return()}finally{if(i)throw o}}return r}}function CVe(e){if(Array.isArray(e))return e}function mie(e){var t=Pw(e,2),r=t[0],n=t[1],i=r,o=n;return r>n&&(i=n,o=r),[i,o]}function gie(e,t,r){if(e.lte(0))return new xn(0);var n=G2.getDigitCount(e.toNumber()),i=new xn(10).pow(n),o=e.div(i),a=n!==1?.05:.1,s=new xn(Math.ceil(o.div(a).toNumber())).add(r).mul(a),l=s.mul(i);return t?l:new xn(Math.ceil(l))}function AVe(e,t,r){var n=1,i=new xn(e);if(!i.isint()&&r){var o=Math.abs(e);o<1?(n=new xn(10).pow(G2.getDigitCount(e)-1),i=new xn(Math.floor(i.div(n).toNumber())).mul(n)):o>1&&(i=new xn(Math.floor(e)))}else e===0?i=new xn(Math.floor((t-1)/2)):r||(i=new xn(Math.floor(e)));var a=Math.floor((t-1)/2),s=fVe(hVe(function(l){return i.add(new xn(l-a).mul(n)).toNumber()}),IL);return s(0,t)}function vie(e,t,r,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new xn(0),tickMin:new xn(0),tickMax:new xn(0)};var o=gie(new xn(t).sub(e).div(r-1),n,i),a;e<=0&&t>=0?a=new xn(0):(a=new xn(e).add(t).div(2),a=a.sub(new xn(a).mod(o)));var s=Math.ceil(a.sub(e).div(o).toNumber()),l=Math.ceil(new xn(t).sub(a).div(o).toNumber()),u=s+l+1;return u>r?vie(e,t,r,n,i+1):(u<r&&(l=t>0?l+(r-u):l,s=t>0?s:s+(r-u)),{step:o,tickMin:a.sub(new xn(s).mul(o)),tickMax:a.add(new xn(l).mul(o))})}function EVe(e){var t=Pw(e,2),r=t[0],n=t[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),s=mie([r,n]),l=Pw(s,2),u=l[0],d=l[1];if(u===-1/0||d===1/0){var c=d===1/0?[u].concat(RL(IL(0,i-1).map(function(){return 1/0}))):[].concat(RL(IL(0,i-1).map(function(){return-1/0})),[d]);return r>n?DL(c):c}if(u===d)return AVe(u,i,o);var h=vie(u,d,a,o),f=h.step,m=h.tickMin,p=h.tickMax,g=G2.rangeStep(m,p.add(new xn(.1).mul(f)),f);return r>n?DL(g):g}function MVe(e,t){var r=Pw(e,2),n=r[0],i=r[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=mie([n,i]),s=Pw(a,2),l=s[0],u=s[1];if(l===-1/0||u===1/0)return[n,i];if(l===u)return[l];var d=Math.max(t,2),c=gie(new xn(u).sub(l).div(d-1),o,0),h=[].concat(RL(G2.rangeStep(new xn(l),new xn(u).sub(new xn(.99).mul(c)),c)),[u]);return n>i?DL(h):h}var PVe=fie(EVe),TVe=fie(MVe),OVe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function TM(){return TM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},TM.apply(this,arguments)}function IVe(e,t){return LVe(e)||kVe(e,t)||RVe(e,t)||DVe()}function DVe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RVe(e,t){if(e){if(typeof e=="string")return xW(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xW(e,t)}}function xW(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kVe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function LVe(e){if(Array.isArray(e))return e}function NVe(e,t){if(e==null)return{};var r=zVe(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function zVe(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function tb(e){var t=e.offset,r=e.layout,n=e.width,i=e.dataKey,o=e.data,a=e.dataPointFormatter,s=e.xAxis,l=e.yAxis,u=NVe(e,OVe),d=Dt(u),c=o.map(function(h,f){var m=a(h,i),p=m.x,g=m.y,v=m.value,b=m.errorVal;if(!b)return null;var y=[],x,S;if(Array.isArray(b)){var w=IVe(b,2);x=w[0],S=w[1]}else x=S=b;if(r==="vertical"){var _=s.scale,C=g+t,E=C+n,A=C-n,M=_(v-x),I=_(v+S);y.push({x1:I,y1:E,x2:I,y2:A}),y.push({x1:M,y1:C,x2:I,y2:C}),y.push({x1:M,y1:E,x2:M,y2:A})}else if(r==="horizontal"){var O=l.scale,T=p+t,D=T-n,N=T+n,k=O(v-x),R=O(v+S);y.push({x1:D,y1:R,x2:N,y2:R}),y.push({x1:T,y1:k,x2:T,y2:R}),y.push({x1:D,y1:k,x2:N,y2:k})}return le.createElement(xr,TM({className:"recharts-errorBar",key:"bar-".concat(f)},d),y.map(function(z,j){return le.createElement("line",TM({},z,{key:"line-".concat(j)}))}))});return le.createElement(xr,{className:"recharts-errorBars"},c)}tb.defaultProps={stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"};tb.displayName="ErrorBar";function Tw(e){"@babel/helpers - typeof";return Tw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tw(e)}function wW(e){return UVe(e)||jVe(e)||FVe(e)||BVe()}function BVe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FVe(e,t){if(e){if(typeof e=="string")return LL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return LL(e,t)}}function jVe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function UVe(e){if(Array.isArray(e))return LL(e)}function LL(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function SW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ia(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SW(Object(r),!0).forEach(function(n){cy(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cy(e,t,r){return t=$Ve(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Ve(e){var t=VVe(e,"string");return Tw(t)==="symbol"?t:String(t)}function VVe(e,t){if(Tw(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Tw(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zn(e,t,r){return bt(e)||bt(t)?r:uo(t)?Ao(e,t,r):kt(t)?t(e):r}function f1(e,t,r,n){var i=MUe(e,function(s){return Zn(s,t)});if(r==="number"){var o=i.filter(function(s){return Ze(s)||parseFloat(s)});return o.length?[z2(o),ff(o)]:[1/0,-1/0]}var a=n?i.filter(function(s){return!bt(s)}):i;return a.map(function(s){return uo(s)||s instanceof Date?s:""})}var HVe=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,a=-1,s=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(s<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var l=o.range,u=0;u<s;u++){var d=u>0?i[u-1].coordinate:i[s-1].coordinate,c=i[u].coordinate,h=u>=s-1?i[0].coordinate:i[u+1].coordinate,f=void 0;if(la(c-d)!==la(h-c)){var m=[];if(la(h-c)===la(l[1]-l[0])){f=h;var p=c+l[1]-l[0];m[0]=Math.min(p,(p+d)/2),m[1]=Math.max(p,(p+d)/2)}else{f=d;var g=h+l[1]-l[0];m[0]=Math.min(c,(g+c)/2),m[1]=Math.max(c,(g+c)/2)}var v=[Math.min(c,(f+c)/2),Math.max(c,(f+c)/2)];if(t>v[0]&&t<=v[1]||t>=m[0]&&t<=m[1]){a=i[u].index;break}}else{var b=Math.min(d,h),y=Math.max(d,h);if(t>(b+c)/2&&t<=(y+c)/2){a=i[u].index;break}}}else for(var x=0;x<s;x++)if(x===0&&t<=(n[x].coordinate+n[x+1].coordinate)/2||x>0&&x<s-1&&t>(n[x].coordinate+n[x-1].coordinate)/2&&t<=(n[x].coordinate+n[x+1].coordinate)/2||x===s-1&&t>(n[x].coordinate+n[x-1].coordinate)/2){a=n[x].index;break}return a},n4=function(t){var r=t,n=r.type.displayName,i=t.props,o=i.stroke,a=i.fill,s;switch(n){case"Line":s=o;break;case"Area":case"Radar":s=o&&o!=="none"?o:a;break;default:s=a;break}return s},yie=function(t){var r=t.children,n=t.formattedGraphicalItems,i=t.legendWidth,o=t.legendContent,a=Vd(r,$m);if(!a)return null;var s;return a.props&&a.props.payload?s=a.props&&a.props.payload:o==="children"?s=(n||[]).reduce(function(l,u){var d=u.item,c=u.props,h=c.sectors||c.data||[];return l.concat(h.map(function(f){return{type:a.props.iconType||d.props.legendType,value:f.name,color:f.fill,payload:f}}))},[]):s=(n||[]).map(function(l){var u=l.item,d=u.props,c=d.dataKey,h=d.name,f=d.legendType,m=d.hide;return{inactive:m,dataKey:c,type:a.props.iconType||f||"square",color:n4(u),value:h||c,payload:u.props}}),Ia(Ia(Ia({},a.props),$m.getWithHeight(a,i)),{},{payload:s,item:a})},GVe=function(t){var r=t.barSize,n=t.stackGroups,i=n===void 0?{}:n;if(!i)return{};for(var o={},a=Object.keys(i),s=0,l=a.length;s<l;s++)for(var u=i[a[s]].stackGroups,d=Object.keys(u),c=0,h=d.length;c<h;c++){var f=u[d[c]],m=f.items,p=f.cateAxisId,g=m.filter(function(y){return zf(y.type).indexOf("Bar")>=0});if(g&&g.length){var v=g[0].props.barSize,b=g[0].props[p];o[b]||(o[b]=[]),o[b].push({item:g[0],stackList:g.slice(1),barSize:bt(v)?r:v})}}return o},WVe=function(t){var r=t.barGap,n=t.barCategoryGap,i=t.bandSize,o=t.sizeList,a=o===void 0?[]:o,s=t.maxBarSize,l=a.length;if(l<1)return null;var u=hs(r,i,0,!0),d;if(a[0].barSize===+a[0].barSize){var c=!1,h=i/l,f=a.reduce(function(y,x){return y+x.barSize||0},0);f+=(l-1)*u,f>=i&&(f-=(l-1)*u,u=0),f>=i&&h>0&&(c=!0,h*=.9,f=l*h);var m=(i-f)/2>>0,p={offset:m-u,size:0};d=a.reduce(function(y,x){var S=[].concat(wW(y),[{item:x.item,position:{offset:p.offset+p.size+u,size:c?h:x.barSize}}]);return p=S[S.length-1].position,x.stackList&&x.stackList.length&&x.stackList.forEach(function(w){S.push({item:w,position:p})}),S},[])}else{var g=hs(n,i,0,!0);i-2*g-(l-1)*u<=0&&(u=0);var v=(i-2*g-(l-1)*u)/l;v>1&&(v>>=0);var b=s===+s?Math.min(v,s):v;d=a.reduce(function(y,x,S){var w=[].concat(wW(y),[{item:x.item,position:{offset:g+(v+u)*S+(v-b)/2,size:b}}]);return x.stackList&&x.stackList.length&&x.stackList.forEach(function(_){w.push({item:_,position:w[w.length-1].position})}),w},[])}return d},qVe=function(t,r,n,i){var o=n.children,a=n.width,s=n.margin,l=a-(s.left||0)-(s.right||0),u=yie({children:o,legendWidth:l}),d=t;if(u){var c=i||{},h=u.align,f=u.verticalAlign,m=u.layout;(m==="vertical"||m==="horizontal"&&f==="middle")&&Ze(t[h])&&(d=Ia(Ia({},t),{},cy({},h,d[h]+(c.width||0)))),(m==="horizontal"||m==="vertical"&&h==="center")&&Ze(t[f])&&(d=Ia(Ia({},t),{},cy({},f,d[f]+(c.height||0))))}return d},KVe=function(t,r,n){return bt(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},bie=function(t,r,n,i,o){var a=r.props.children,s=Va(a,tb).filter(function(u){return KVe(i,o,u.props.direction)});if(s&&s.length){var l=s.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var c=Zn(d,n,0),h=qi(c)?[z2(c),ff(c)]:[c,c],f=l.reduce(function(m,p){var g=Zn(d,p,0),v=h[0]-Math.abs(qi(g)?g[0]:g),b=h[1]+Math.abs(qi(g)?g[1]:g);return[Math.min(v,m[0]),Math.max(b,m[1])]},[1/0,-1/0]);return[Math.min(f[0],u[0]),Math.max(f[1],u[1])]},[1/0,-1/0])}return null},XVe=function(t,r,n,i,o){var a=r.map(function(s){return bie(t,s,n,o,i)}).filter(function(s){return!bt(s)});return a&&a.length?a.reduce(function(s,l){return[Math.min(s[0],l[0]),Math.max(s[1],l[1])]},[1/0,-1/0]):null},xie=function(t,r,n,i,o){var a=r.map(function(l){var u=l.props.dataKey;return n==="number"&&u&&bie(t,l,u,i)||f1(t,u,n,o)});if(n==="number")return a.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var s={};return a.reduce(function(l,u){for(var d=0,c=u.length;d<c;d++)s[u[d]]||(s[u[d]]=!0,l.push(u[d]));return l},[])},wie=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},_W=function(t,r,n){var i,o,a=t.map(function(s){return s.coordinate===r&&(i=!0),s.coordinate===n&&(o=!0),s.coordinate});return i||a.push(r),o||a.push(n),a},Gh=function(t,r,n){if(!t)return null;var i=t.scale,o=t.duplicateDomain,a=t.type,s=t.range,l=t.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(r||n)&&a==="category"&&i.bandwidth?i.bandwidth()/l:0;if(u=t.axisType==="angleAxis"&&(s==null?void 0:s.length)>=2?la(s[0]-s[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(c){var h=o?o.indexOf(c):c;return{coordinate:i(h)+u,value:c,offset:u}});return d.filter(function(c){return!q0(c.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(c,h){return{coordinate:i(c)+u,value:c,index:h,offset:u}}):i.ticks&&!n?i.ticks(t.tickCount).map(function(c){return{coordinate:i(c)+u,value:c,offset:u}}):i.domain().map(function(c,h){return{coordinate:i(c)+u,value:o?o[c]:c,index:h,offset:u}})},eC=function(t,r,n){var i;return kt(n)?i=n:kt(r)&&(i=r),kt(t)||i?function(o,a,s,l){kt(t)&&t(o,a,s,l),kt(i)&&i(o,a,s,l)}:null},Sie=function(t,r,n){var i=t.scale,o=t.type,a=t.layout,s=t.axisType;if(i==="auto")return a==="radial"&&s==="radiusAxis"?{scale:Sw(),realScaleType:"band"}:a==="radial"&&s==="angleAxis"?{scale:CM(),realScaleType:"linear"}:o==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:h1(),realScaleType:"point"}:o==="category"?{scale:Sw(),realScaleType:"band"}:{scale:CM(),realScaleType:"linear"};if(kS(i)){var l="scale".concat(O2(i));return{scale:(gW[l]||h1)(),realScaleType:gW[l]?l:"point"}}return kt(i)?{scale:i}:{scale:h1(),realScaleType:"point"}},CW=1e-4,_ie=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,i=t.range(),o=Math.min(i[0],i[1])-CW,a=Math.max(i[0],i[1])+CW,s=t(r[0]),l=t(r[n-1]);(s<o||s>a||l<o||l>a)&&t.domain([r[0],r[n-1]])}},YVe=function(t,r){if(!t)return null;for(var n=0,i=t.length;n<i;n++)if(t[n].item===r)return t[n].position;return null},QVe=function(t,r){if(!r||r.length!==2||!Ze(r[0])||!Ze(r[1]))return t;var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]),o=[t[0],t[1]];return(!Ze(t[0])||t[0]<n)&&(o[0]=n),(!Ze(t[1])||t[1]>i)&&(o[1]=i),o[0]>i&&(o[0]=i),o[1]<n&&(o[1]=n),o},ZVe=function(t){var r=t.length;if(!(r<=0))for(var n=0,i=t[0].length;n<i;++n)for(var o=0,a=0,s=0;s<r;++s){var l=q0(t[s][n][1])?t[s][n][0]:t[s][n][1];l>=0?(t[s][n][0]=o,t[s][n][1]=o+l,o=t[s][n][1]):(t[s][n][0]=a,t[s][n][1]=a+l,a=t[s][n][1])}},JVe=function(t){var r=t.length;if(!(r<=0))for(var n=0,i=t[0].length;n<i;++n)for(var o=0,a=0;a<r;++a){var s=q0(t[a][n][1])?t[a][n][0]:t[a][n][1];s>=0?(t[a][n][0]=o,t[a][n][1]=o+s,o=t[a][n][1]):(t[a][n][0]=0,t[a][n][1]=0)}},eHe={sign:ZVe,expand:NNe,none:qy,silhouette:zNe,wiggle:BNe,positive:JVe},tHe=function(t,r,n){var i=r.map(function(a){return a.props.dataKey}),o=LNe().keys(i).value(function(a,s){return+Zn(a,s,0)}).order(Z3).offset(eHe[n]);return o(t)},rHe=function(t,r,n,i,o,a){if(!t)return null;var s=a?r.reverse():r,l=s.reduce(function(u,d){var c=d.props,h=c.stackId,f=c.hide;if(f)return u;var m=d.props[n],p=u[m]||{hasStack:!1,stackGroups:{}};if(uo(h)){var g=p.stackGroups[h]||{numericAxisId:n,cateAxisId:i,items:[]};g.items.push(d),p.hasStack=!0,p.stackGroups[h]=g}else p.stackGroups[pp("_stackId_")]={numericAxisId:n,cateAxisId:i,items:[d]};return Ia(Ia({},u),{},cy({},m,p))},{});return Object.keys(l).reduce(function(u,d){var c=l[d];return c.hasStack&&(c.stackGroups=Object.keys(c.stackGroups).reduce(function(h,f){var m=c.stackGroups[f];return Ia(Ia({},h),{},cy({},f,{numericAxisId:n,cateAxisId:i,items:m.items,stackedData:tHe(t,m.items,o)}))},{})),Ia(Ia({},u),{},cy({},d,c))},{})},Cie=function(t,r){var n=r.realScaleType,i=r.type,o=r.tickCount,a=r.originalDomain,s=r.allowDecimals,l=n||r.scale;if(l!=="auto"&&l!=="linear")return null;if(o&&i==="number"&&a&&(a[0]==="auto"||a[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=PVe(u,o,s);return t.domain([z2(d),ff(d)]),{niceTicks:d}}if(o&&i==="number"){var c=t.domain(),h=TVe(c,o,s);return{niceTicks:h}}return null},r0=function(t){var r=t.axis,n=t.ticks,i=t.bandSize,o=t.entry,a=t.index,s=t.dataKey;if(r.type==="category"){if(!r.allowDuplicatedCategory&&r.dataKey&&!bt(o[r.dataKey])){var l=eM(n,"value",o[r.dataKey]);if(l)return l.coordinate+i/2}return n[a]?n[a].coordinate+i/2:null}var u=Zn(o,bt(s)?r.dataKey:s);return bt(u)?null:r.scale(u)},AW=function(t){var r=t.axis,n=t.ticks,i=t.offset,o=t.bandSize,a=t.entry,s=t.index;if(r.type==="category")return n[s]?n[s].coordinate+i:null;var l=Zn(a,r.dataKey,r.domain[s]);return bt(l)?null:r.scale(l)-o/2+i},nHe=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var i=Math.min(n[0],n[1]),o=Math.max(n[0],n[1]);return i<=0&&o>=0?0:o<0?o:i}return n[0]},iHe=function(t,r){var n=t.props.stackId;if(uo(n)){var i=r[n];if(i&&i.items.length){for(var o=-1,a=0,s=i.items.length;a<s;a++)if(i.items[a]===t){o=a;break}return o>=0?i.stackedData[o]:null}}return null},oHe=function(t){return t.reduce(function(r,n){return[z2(n.concat([r[0]]).filter(Ze)),ff(n.concat([r[1]]).filter(Ze))]},[1/0,-1/0])},Aie=function(t,r,n){return Object.keys(t).reduce(function(i,o){var a=t[o],s=a.stackedData,l=s.reduce(function(u,d){var c=oHe(d.slice(r,n+1));return[Math.min(u[0],c[0]),Math.max(u[1],c[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},EW=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,MW=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,NL=function(t,r,n){if(kt(t))return t(r,n);if(!qi(t))return r;var i=[];if(Ze(t[0]))i[0]=n?t[0]:Math.min(t[0],r[0]);else if(EW.test(t[0])){var o=+EW.exec(t[0])[1];i[0]=r[0]-o}else kt(t[0])?i[0]=t[0](r[0]):i[0]=r[0];if(Ze(t[1]))i[1]=n?t[1]:Math.max(t[1],r[1]);else if(MW.test(t[1])){var a=+MW.exec(t[1])[1];i[1]=r[1]+a}else kt(t[1])?i[1]=t[1](r[1]):i[1]=r[1];return i},OM=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();if(!n||i>0)return i}if(t&&r&&r.length>=2){for(var o=Dj(r,function(c){return c.coordinate}),a=1/0,s=1,l=o.length;s<l;s++){var u=o[s],d=o[s-1];a=Math.min((u.coordinate||0)-(d.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0},PW=function(t,r,n){return!t||!t.length||Hm(t,Ao(n,"type.defaultProps.domain"))?r:t},Eie=function(t,r){var n=t.props,i=n.dataKey,o=n.name,a=n.unit,s=n.formatter,l=n.tooltipType,u=n.chartType;return Ia(Ia({},Dt(t)),{},{dataKey:i,unit:a,formatter:s,name:o||i,color:n4(t),value:Zn(r,i),type:l,payload:r,chartType:u})};function Ow(e){"@babel/helpers - typeof";return Ow=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ow(e)}function TW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Td(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TW(Object(r),!0).forEach(function(n){Mie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mie(e,t,r){return t=aHe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aHe(e){var t=sHe(e,"string");return Ow(t)==="symbol"?t:String(t)}function sHe(e,t){if(Ow(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ow(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lHe(e,t){return hHe(e)||dHe(e,t)||cHe(e,t)||uHe()}function uHe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cHe(e,t){if(e){if(typeof e=="string")return OW(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OW(e,t)}}function OW(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function dHe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function hHe(e){if(Array.isArray(e))return e}var IM=Math.PI/180,fHe=function(t){return t*180/Math.PI},zn=function(t,r,n,i){return{x:t+Math.cos(-IM*i)*n,y:r+Math.sin(-IM*i)*n}},Pie=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},pHe=function(t,r,n,i,o){var a=t.width,s=t.height,l=t.startAngle,u=t.endAngle,d=hs(t.cx,a,a/2),c=hs(t.cy,s,s/2),h=Pie(a,s,n),f=hs(t.innerRadius,h,0),m=hs(t.outerRadius,h,h*.8),p=Object.keys(r);return p.reduce(function(g,v){var b=r[v],y=b.domain,x=b.reversed,S;if(bt(b.range))i==="angleAxis"?S=[l,u]:i==="radiusAxis"&&(S=[f,m]),x&&(S=[S[1],S[0]]);else{S=b.range;var w=S,_=lHe(w,2);l=_[0],u=_[1]}var C=Sie(b,o),E=C.realScaleType,A=C.scale;A.domain(y).range(S),_ie(A);var M=Cie(A,Td(Td({},b),{},{realScaleType:E})),I=Td(Td(Td({},b),M),{},{range:S,radius:m,realScaleType:E,scale:A,cx:d,cy:c,innerRadius:f,outerRadius:m,startAngle:l,endAngle:u});return Td(Td({},g),{},Mie({},v,I))},{})},mHe=function(t,r){var n=t.x,i=t.y,o=r.x,a=r.y;return Math.sqrt(Math.pow(n-o,2)+Math.pow(i-a,2))},gHe=function(t,r){var n=t.x,i=t.y,o=r.cx,a=r.cy,s=mHe({x:n,y:i},{x:o,y:a});if(s<=0)return{radius:s};var l=(n-o)/s,u=Math.acos(l);return i>a&&(u=2*Math.PI-u),{radius:s,angle:fHe(u),angleInRadian:u}},vHe=function(t){var r=t.startAngle,n=t.endAngle,i=Math.floor(r/360),o=Math.floor(n/360),a=Math.min(i,o);return{startAngle:r-a*360,endAngle:n-a*360}},yHe=function(t,r){var n=r.startAngle,i=r.endAngle,o=Math.floor(n/360),a=Math.floor(i/360),s=Math.min(o,a);return t+s*360},IW=function(t,r){var n=t.x,i=t.y,o=gHe({x:n,y:i},r),a=o.radius,s=o.angle,l=r.innerRadius,u=r.outerRadius;if(a<l||a>u)return!1;if(a===0)return!0;var d=vHe(r),c=d.startAngle,h=d.endAngle,f=s,m;if(c<=h){for(;f>h;)f-=360;for(;f<c;)f+=360;m=f>=c&&f<=h}else{for(;f>c;)f-=360;for(;f<h;)f+=360;m=f>=h&&f<=c}return m?Td(Td({},r),{},{radius:a,angle:yHe(f,r)}):null};function Iw(e){"@babel/helpers - typeof";return Iw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Iw(e)}var bHe=["offset"];function xHe(e){return CHe(e)||_He(e)||SHe(e)||wHe()}function wHe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SHe(e,t){if(e){if(typeof e=="string")return zL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zL(e,t)}}function _He(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function CHe(e){if(Array.isArray(e))return zL(e)}function zL(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function AHe(e,t){if(e==null)return{};var r=EHe(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function EHe(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function DW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function oo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DW(Object(r),!0).forEach(function(n){MHe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MHe(e,t,r){return t=PHe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PHe(e){var t=THe(e,"string");return Iw(t)==="symbol"?t:String(t)}function THe(e,t){if(Iw(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Iw(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dw(){return Dw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dw.apply(this,arguments)}var OHe=function(t){var r=t.value,n=t.formatter,i=bt(t.children)?r:t.children;return kt(n)?n(i):i},IHe=function(t,r){var n=la(r-t),i=Math.min(Math.abs(r-t),360);return n*i},DHe=function(t,r,n){var i=t.position,o=t.viewBox,a=t.offset,s=t.className,l=o,u=l.cx,d=l.cy,c=l.innerRadius,h=l.outerRadius,f=l.startAngle,m=l.endAngle,p=l.clockWise,g=(c+h)/2,v=IHe(f,m),b=v>=0?1:-1,y,x;i==="insideStart"?(y=f+b*a,x=p):i==="insideEnd"?(y=m-b*a,x=!p):i==="end"&&(y=m+b*a,x=p),x=v<=0?x:!x;var S=zn(u,d,g,y),w=zn(u,d,g,y+(x?1:-1)*359),_="M".concat(S.x,",").concat(S.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(x?0:1,`,
    `).concat(w.x,",").concat(w.y),C=bt(t.id)?pp("recharts-radial-line-"):t.id;return le.createElement("text",Dw({},n,{dominantBaseline:"central",className:Kr("recharts-radial-bar-label",s)}),le.createElement("defs",null,le.createElement("path",{id:C,d:_})),le.createElement("textPath",{xlinkHref:"#".concat(C)},r))},RHe=function(t){var r=t.viewBox,n=t.offset,i=t.position,o=r,a=o.cx,s=o.cy,l=o.innerRadius,u=o.outerRadius,d=o.startAngle,c=o.endAngle,h=(d+c)/2;if(i==="outside"){var f=zn(a,s,u+n,h),m=f.x,p=f.y;return{x:m,y:p,textAnchor:m>=a?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"end"};var g=(l+u)/2,v=zn(a,s,g,h),b=v.x,y=v.y;return{x:b,y,textAnchor:"middle",verticalAnchor:"middle"}},kHe=function(t){var r=t.viewBox,n=t.parentViewBox,i=t.offset,o=t.position,a=r,s=a.x,l=a.y,u=a.width,d=a.height,c=d>=0?1:-1,h=c*i,f=c>0?"end":"start",m=c>0?"start":"end",p=u>=0?1:-1,g=p*i,v=p>0?"end":"start",b=p>0?"start":"end";if(o==="top"){var y={x:s+u/2,y:l-c*i,textAnchor:"middle",verticalAnchor:f};return oo(oo({},y),n?{height:Math.max(l-n.y,0),width:u}:{})}if(o==="bottom"){var x={x:s+u/2,y:l+d+h,textAnchor:"middle",verticalAnchor:m};return oo(oo({},x),n?{height:Math.max(n.y+n.height-(l+d),0),width:u}:{})}if(o==="left"){var S={x:s-g,y:l+d/2,textAnchor:v,verticalAnchor:"middle"};return oo(oo({},S),n?{width:Math.max(S.x-n.x,0),height:d}:{})}if(o==="right"){var w={x:s+u+g,y:l+d/2,textAnchor:b,verticalAnchor:"middle"};return oo(oo({},w),n?{width:Math.max(n.x+n.width-w.x,0),height:d}:{})}var _=n?{width:u,height:d}:{};return o==="insideLeft"?oo({x:s+g,y:l+d/2,textAnchor:b,verticalAnchor:"middle"},_):o==="insideRight"?oo({x:s+u-g,y:l+d/2,textAnchor:v,verticalAnchor:"middle"},_):o==="insideTop"?oo({x:s+u/2,y:l+h,textAnchor:"middle",verticalAnchor:m},_):o==="insideBottom"?oo({x:s+u/2,y:l+d-h,textAnchor:"middle",verticalAnchor:f},_):o==="insideTopLeft"?oo({x:s+g,y:l+h,textAnchor:b,verticalAnchor:m},_):o==="insideTopRight"?oo({x:s+u-g,y:l+h,textAnchor:v,verticalAnchor:m},_):o==="insideBottomLeft"?oo({x:s+g,y:l+d-h,textAnchor:b,verticalAnchor:f},_):o==="insideBottomRight"?oo({x:s+u-g,y:l+d-h,textAnchor:v,verticalAnchor:f},_):$0(o)&&(Ze(o.x)||am(o.x))&&(Ze(o.y)||am(o.y))?oo({x:s+hs(o.x,u),y:l+hs(o.y,d),textAnchor:"end",verticalAnchor:"end"},_):oo({x:s+u/2,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},_)},LHe=function(t){return"cx"in t&&Ze(t.cx)};function $i(e){var t=e.offset,r=t===void 0?5:t,n=AHe(e,bHe),i=oo({offset:r},n),o=i.viewBox,a=i.position,s=i.value,l=i.children,u=i.content,d=i.className,c=d===void 0?"":d,h=i.textBreakAll;if(!o||bt(s)&&bt(l)&&!P.isValidElement(u)&&!kt(u))return null;if(P.isValidElement(u))return P.cloneElement(u,i);var f;if(kt(u)){if(f=P.createElement(u,i),P.isValidElement(f))return f}else f=OHe(i);var m=LHe(o),p=Dt(i,!0);if(m&&(a==="insideStart"||a==="insideEnd"||a==="end"))return DHe(i,f,p);var g=m?RHe(i):kHe(i);return le.createElement(Vm,Dw({className:Kr("recharts-label",c)},p,g,{breakAll:h}),f)}$i.displayName="Label";var Tie=function(t){var r=t.cx,n=t.cy,i=t.angle,o=t.startAngle,a=t.endAngle,s=t.r,l=t.radius,u=t.innerRadius,d=t.outerRadius,c=t.x,h=t.y,f=t.top,m=t.left,p=t.width,g=t.height,v=t.clockWise,b=t.labelViewBox;if(b)return b;if(Ze(p)&&Ze(g)){if(Ze(c)&&Ze(h))return{x:c,y:h,width:p,height:g};if(Ze(f)&&Ze(m))return{x:f,y:m,width:p,height:g}}return Ze(c)&&Ze(h)?{x:c,y:h,width:0,height:0}:Ze(r)&&Ze(n)?{cx:r,cy:n,startAngle:o||i||0,endAngle:a||i||0,innerRadius:u||0,outerRadius:d||l||s||0,clockWise:v}:t.viewBox?t.viewBox:{}},NHe=function(t,r){return t?t===!0?le.createElement($i,{key:"label-implicit",viewBox:r}):uo(t)?le.createElement($i,{key:"label-implicit",viewBox:r,value:t}):P.isValidElement(t)?t.type===$i?P.cloneElement(t,{key:"label-implicit",viewBox:r}):le.createElement($i,{key:"label-implicit",content:t,viewBox:r}):kt(t)?le.createElement($i,{key:"label-implicit",content:t,viewBox:r}):$0(t)?le.createElement($i,Dw({viewBox:r},t,{key:"label-implicit"})):null:null},zHe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var i=t.children,o=Tie(t),a=Va(i,$i).map(function(l,u){return P.cloneElement(l,{viewBox:r||o,key:"label-".concat(u)})});if(!n)return a;var s=NHe(t.label,r||o);return[s].concat(xHe(a))};$i.parseViewBox=Tie;$i.renderCallByParent=zHe;function BHe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var FHe=BHe;const jHe=Ur(FHe);function Rw(e){"@babel/helpers - typeof";return Rw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rw(e)}var UHe=["valueAccessor"],$He=["data","dataKey","clockWise","id","textBreakAll"];function VHe(e){return qHe(e)||WHe(e)||GHe(e)||HHe()}function HHe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GHe(e,t){if(e){if(typeof e=="string")return BL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BL(e,t)}}function WHe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function qHe(e){if(Array.isArray(e))return BL(e)}function BL(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function DM(){return DM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},DM.apply(this,arguments)}function RW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function kW(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RW(Object(r),!0).forEach(function(n){KHe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KHe(e,t,r){return t=XHe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XHe(e){var t=YHe(e,"string");return Rw(t)==="symbol"?t:String(t)}function YHe(e,t){if(Rw(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Rw(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LW(e,t){if(e==null)return{};var r=QHe(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function QHe(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}var ZHe=function(t){return qi(t.value)?jHe(t.value):t.value};function Ou(e){var t=e.valueAccessor,r=t===void 0?ZHe:t,n=LW(e,UHe),i=n.data,o=n.dataKey,a=n.clockWise,s=n.id,l=n.textBreakAll,u=LW(n,$He);return!i||!i.length?null:le.createElement(xr,{className:"recharts-label-list"},i.map(function(d,c){var h=bt(o)?r(d,c):Zn(d&&d.payload,o),f=bt(s)?{}:{id:"".concat(s,"-").concat(c)};return le.createElement($i,DM({},Dt(d,!0),u,f,{parentViewBox:d.parentViewBox,index:c,value:h,textBreakAll:l,viewBox:$i.parseViewBox(bt(a)?d:kW(kW({},d),{},{clockWise:a})),key:"label-".concat(c)}))}))}Ou.displayName="LabelList";function JHe(e,t){return e?e===!0?le.createElement(Ou,{key:"labelList-implicit",data:t}):le.isValidElement(e)||kt(e)?le.createElement(Ou,{key:"labelList-implicit",data:t,content:e}):$0(e)?le.createElement(Ou,DM({data:t},e,{key:"labelList-implicit"})):null:null}function eGe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,i=Va(n,Ou).map(function(a,s){return P.cloneElement(a,{data:t,key:"labelList-".concat(s)})});if(!r)return i;var o=JHe(e.label,t);return[o].concat(VHe(i))}Ou.renderCallByParent=eGe;function kw(e){"@babel/helpers - typeof";return kw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kw(e)}function FL(){return FL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},FL.apply(this,arguments)}function NW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function zW(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NW(Object(r),!0).forEach(function(n){tGe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tGe(e,t,r){return t=rGe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rGe(e){var t=nGe(e,"string");return kw(t)==="symbol"?t:String(t)}function nGe(e,t){if(kw(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(kw(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iGe=function(t,r){var n=la(r-t),i=Math.min(Math.abs(r-t),359.999);return n*i},tC=function(t){var r=t.cx,n=t.cy,i=t.radius,o=t.angle,a=t.sign,s=t.isExternal,l=t.cornerRadius,u=t.cornerIsExternal,d=l*(s?1:-1)+i,c=Math.asin(l/d)/IM,h=u?o:o+a*c,f=zn(r,n,d,h),m=zn(r,n,i,h),p=u?o-a*c:o,g=zn(r,n,d*Math.cos(c*IM),p);return{center:f,circleTangency:m,lineTangency:g,theta:c}},Oie=function(t){var r=t.cx,n=t.cy,i=t.innerRadius,o=t.outerRadius,a=t.startAngle,s=t.endAngle,l=iGe(a,s),u=a+l,d=zn(r,n,o,a),c=zn(r,n,o,u),h="M ".concat(d.x,",").concat(d.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(a>u),`,
    `).concat(c.x,",").concat(c.y,`
  `);if(i>0){var f=zn(r,n,i,a),m=zn(r,n,i,u);h+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(a<=u),`,
            `).concat(f.x,",").concat(f.y," Z")}else h+="L ".concat(r,",").concat(n," Z");return h},oGe=function(t){var r=t.cx,n=t.cy,i=t.innerRadius,o=t.outerRadius,a=t.cornerRadius,s=t.forceCornerRadius,l=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,c=la(d-u),h=tC({cx:r,cy:n,radius:o,angle:u,sign:c,cornerRadius:a,cornerIsExternal:l}),f=h.circleTangency,m=h.lineTangency,p=h.theta,g=tC({cx:r,cy:n,radius:o,angle:d,sign:-c,cornerRadius:a,cornerIsExternal:l}),v=g.circleTangency,b=g.lineTangency,y=g.theta,x=l?Math.abs(u-d):Math.abs(u-d)-p-y;if(x<0)return s?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):Oie({cx:r,cy:n,innerRadius:i,outerRadius:o,startAngle:u,endAngle:d});var S="M ".concat(m.x,",").concat(m.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(c<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(x>180),",").concat(+(c<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(c<0),",").concat(b.x,",").concat(b.y,`
  `);if(i>0){var w=tC({cx:r,cy:n,radius:i,angle:u,sign:c,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),_=w.circleTangency,C=w.lineTangency,E=w.theta,A=tC({cx:r,cy:n,radius:i,angle:d,sign:-c,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),M=A.circleTangency,I=A.lineTangency,O=A.theta,T=l?Math.abs(u-d):Math.abs(u-d)-E-O;if(T<0&&a===0)return"".concat(S,"L").concat(r,",").concat(n,"Z");S+="L".concat(I.x,",").concat(I.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(c<0),",").concat(M.x,",").concat(M.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(T>180),",").concat(+(c>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(c<0),",").concat(C.x,",").concat(C.y,"Z")}else S+="L".concat(r,",").concat(n,"Z");return S},aGe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},jL=function(t){var r=zW(zW({},aGe),t),n=r.cx,i=r.cy,o=r.innerRadius,a=r.outerRadius,s=r.cornerRadius,l=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,c=r.endAngle,h=r.className;if(a<o||d===c)return null;var f=Kr("recharts-sector",h),m=a-o,p=hs(s,m,0,!0),g;return p>0&&Math.abs(d-c)<360?g=oGe({cx:n,cy:i,innerRadius:o,outerRadius:a,cornerRadius:Math.min(p,m/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:c}):g=Oie({cx:n,cy:i,innerRadius:o,outerRadius:a,startAngle:d,endAngle:c}),le.createElement("path",FL({},Dt(r,!0),{className:f,d:g,role:"img"}))};function Lw(e){"@babel/helpers - typeof";return Lw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lw(e)}function UL(){return UL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},UL.apply(this,arguments)}function BW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function FW(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BW(Object(r),!0).forEach(function(n){sGe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sGe(e,t,r){return t=lGe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lGe(e){var t=uGe(e,"string");return Lw(t)==="symbol"?t:String(t)}function uGe(e,t){if(Lw(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Lw(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jW={curveBasisClosed:CNe,curveBasisOpen:ANe,curveBasis:_Ne,curveBumpX:uNe,curveBumpY:cNe,curveLinearClosed:ENe,curveLinear:D2,curveMonotoneX:MNe,curveMonotoneY:PNe,curveNatural:TNe,curveStep:ONe,curveStepAfter:DNe,curveStepBefore:INe},rC=function(t){return t.x===+t.x&&t.y===+t.y},Kb=function(t){return t.x},Xb=function(t){return t.y},cGe=function(t,r){if(kt(t))return t;var n="curve".concat(O2(t));return(n==="curveMonotone"||n==="curveBump")&&r?jW["".concat(n).concat(r==="vertical"?"Y":"X")]:jW[n]||D2},dGe=function(t){var r=t.type,n=r===void 0?"linear":r,i=t.points,o=i===void 0?[]:i,a=t.baseLine,s=t.layout,l=t.connectNulls,u=l===void 0?!1:l,d=cGe(n,s),c=u?o.filter(function(p){return rC(p)}):o,h;if(qi(a)){var f=u?a.filter(function(p){return rC(p)}):a,m=c.map(function(p,g){return FW(FW({},p),{},{base:f[g]})});return s==="vertical"?h=q_().y(Xb).x1(Kb).x0(function(p){return p.base.x}):h=q_().x(Kb).y1(Xb).y0(function(p){return p.base.y}),h.defined(rC).curve(d),h(m)}return s==="vertical"&&Ze(a)?h=q_().y(Xb).x1(Kb).x0(a):Ze(a)?h=q_().x(Kb).y1(Xb).y0(a):h=$re().x(Kb).y(Xb),h.defined(rC).curve(d),h(c)},jf=function(t){var r=t.className,n=t.points,i=t.path,o=t.pathRef;if((!n||!n.length)&&!i)return null;var a=n&&n.length?dGe(t):i;return le.createElement("path",UL({},Dt(t),tM(t),{className:Kr("recharts-curve",r),d:a,ref:o}))};function Nw(e){"@babel/helpers - typeof";return Nw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nw(e)}function RM(){return RM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},RM.apply(this,arguments)}function hGe(e,t){return gGe(e)||mGe(e,t)||pGe(e,t)||fGe()}function fGe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pGe(e,t){if(e){if(typeof e=="string")return UW(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return UW(e,t)}}function UW(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function mGe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function gGe(e){if(Array.isArray(e))return e}function $W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function VW(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$W(Object(r),!0).forEach(function(n){vGe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$W(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vGe(e,t,r){return t=yGe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yGe(e){var t=bGe(e,"string");return Nw(t)==="symbol"?t:String(t)}function bGe(e,t){if(Nw(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Nw(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HW=function(t,r,n,i,o){var a=Math.min(Math.abs(n)/2,Math.abs(i)/2),s=i>=0?1:-1,l=n>=0?1:-1,u=i>=0&&n>=0||i<0&&n<0?1:0,d;if(a>0&&o instanceof Array){for(var c=[0,0,0,0],h=0,f=4;h<f;h++)c[h]=o[h]>a?a:o[h];d="M".concat(t,",").concat(r+s*c[0]),c[0]>0&&(d+="A ".concat(c[0],",").concat(c[0],",0,0,").concat(u,",").concat(t+l*c[0],",").concat(r)),d+="L ".concat(t+n-l*c[1],",").concat(r),c[1]>0&&(d+="A ".concat(c[1],",").concat(c[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+s*c[1])),d+="L ".concat(t+n,",").concat(r+i-s*c[2]),c[2]>0&&(d+="A ".concat(c[2],",").concat(c[2],",0,0,").concat(u,`,
        `).concat(t+n-l*c[2],",").concat(r+i)),d+="L ".concat(t+l*c[3],",").concat(r+i),c[3]>0&&(d+="A ".concat(c[3],",").concat(c[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+i-s*c[3])),d+="Z"}else if(a>0&&o===+o&&o>0){var m=Math.min(a,o);d="M ".concat(t,",").concat(r+s*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(t+l*m,",").concat(r,`
            L `).concat(t+n-l*m,",").concat(r,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(t+n,",").concat(r+s*m,`
            L `).concat(t+n,",").concat(r+i-s*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(t+n-l*m,",").concat(r+i,`
            L `).concat(t+l*m,",").concat(r+i,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(t,",").concat(r+i-s*m," Z")}else d="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return d},xGe=function(t,r){if(!t||!r)return!1;var n=t.x,i=t.y,o=r.x,a=r.y,s=r.width,l=r.height;if(Math.abs(s)>0&&Math.abs(l)>0){var u=Math.min(o,o+s),d=Math.max(o,o+s),c=Math.min(a,a+l),h=Math.max(a,a+l);return n>=u&&n<=d&&i>=c&&i<=h}return!1},wGe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},i4=function(t){var r=VW(VW({},wGe),t),n=P.useRef(),i=P.useState(-1),o=hGe(i,2),a=o[0],s=o[1];P.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var x=n.current.getTotalLength();x&&s(x)}catch{}},[]);var l=r.x,u=r.y,d=r.width,c=r.height,h=r.radius,f=r.className,m=r.animationEasing,p=r.animationDuration,g=r.animationBegin,v=r.isAnimationActive,b=r.isUpdateAnimationActive;if(l!==+l||u!==+u||d!==+d||c!==+c||d===0||c===0)return null;var y=Kr("recharts-rectangle",f);return b?le.createElement(Yc,{canBegin:a>0,from:{width:d,height:c,x:l,y:u},to:{width:d,height:c,x:l,y:u},duration:p,animationEasing:m,isActive:b},function(x){var S=x.width,w=x.height,_=x.x,C=x.y;return le.createElement(Yc,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:p,isActive:v,easing:m},le.createElement("path",RM({},Dt(r,!0),{className:y,d:HW(_,C,S,w,h),ref:n})))}):le.createElement("path",RM({},Dt(r,!0),{className:y,d:HW(l,u,d,c,h)}))},SGe=["points","className","baseLinePoints","connectNulls"];function kv(){return kv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kv.apply(this,arguments)}function _Ge(e,t){if(e==null)return{};var r=CGe(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function CGe(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function GW(e){return PGe(e)||MGe(e)||EGe(e)||AGe()}function AGe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EGe(e,t){if(e){if(typeof e=="string")return $L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $L(e,t)}}function MGe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function PGe(e){if(Array.isArray(e))return $L(e)}function $L(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var WW=function(t){return t&&t.x===+t.x&&t.y===+t.y},TGe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){WW(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),WW(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},p1=function(t,r){var n=TGe(t);r&&(n=[n.reduce(function(o,a){return[].concat(GW(o),GW(a))},[])]);var i=n.map(function(o){return o.reduce(function(a,s,l){return"".concat(a).concat(l===0?"M":"L").concat(s.x,",").concat(s.y)},"")}).join("");return n.length===1?"".concat(i,"Z"):i},OGe=function(t,r,n){var i=p1(t,n);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(p1(r.reverse(),n).slice(1))},IGe=function(t){var r=t.points,n=t.className,i=t.baseLinePoints,o=t.connectNulls,a=_Ge(t,SGe);if(!r||!r.length)return null;var s=Kr("recharts-polygon",n);if(i&&i.length){var l=a.stroke&&a.stroke!=="none",u=OGe(r,i,o);return le.createElement("g",{className:s},le.createElement("path",kv({},Dt(a,!0),{fill:u.slice(-1)==="Z"?a.fill:"none",stroke:"none",d:u})),l?le.createElement("path",kv({},Dt(a,!0),{fill:"none",d:p1(r,o)})):null,l?le.createElement("path",kv({},Dt(a,!0),{fill:"none",d:p1(i,o)})):null)}var d=p1(r,o);return le.createElement("path",kv({},Dt(a,!0),{fill:d.slice(-1)==="Z"?a.fill:"none",className:s,d}))};function VL(){return VL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},VL.apply(this,arguments)}var $S=function(t){var r=t.cx,n=t.cy,i=t.r,o=t.className,a=Kr("recharts-dot",o);return r===+r&&n===+n&&i===+i?le.createElement("circle",VL({},Dt(t),tM(t),{className:a,cx:r,cy:n,r:i})):null};function zw(e){"@babel/helpers - typeof";return zw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zw(e)}var DGe=["x","y","top","left","width","height","className"];function HL(){return HL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},HL.apply(this,arguments)}function qW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function RGe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qW(Object(r),!0).forEach(function(n){kGe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kGe(e,t,r){return t=LGe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LGe(e){var t=NGe(e,"string");return zw(t)==="symbol"?t:String(t)}function NGe(e,t){if(zw(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(zw(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zGe(e,t){if(e==null)return{};var r=BGe(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function BGe(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}var FGe=function(t,r,n,i,o,a){return"M".concat(t,",").concat(o,"v").concat(i,"M").concat(a,",").concat(r,"h").concat(n)},jGe=function(t){var r=t.x,n=r===void 0?0:r,i=t.y,o=i===void 0?0:i,a=t.top,s=a===void 0?0:a,l=t.left,u=l===void 0?0:l,d=t.width,c=d===void 0?0:d,h=t.height,f=h===void 0?0:h,m=t.className,p=zGe(t,DGe),g=RGe({x:n,y:o,top:s,left:u,width:c,height:f},p);return!Ze(n)||!Ze(o)||!Ze(c)||!Ze(f)||!Ze(s)||!Ze(u)?null:le.createElement("path",HL({},Dt(g,!0),{className:Kr("recharts-cross",m),d:FGe(n,o,c,f,s,u)}))},UGe=N2,$Ge=id,VGe=Ene;function HGe(e,t){return e&&e.length?UGe(e,$Ge(t),VGe):void 0}var GGe=HGe;const WGe=Ur(GGe);var qGe=N2,KGe=Ane,XGe=id;function YGe(e,t){return e&&e.length?qGe(e,XGe(t),KGe):void 0}var QGe=YGe;const ZGe=Ur(QGe);var JGe=["cx","cy","angle","ticks","axisLine"],e6e=["ticks","tick","angle","tickFormatter","stroke"];function n0(e){"@babel/helpers - typeof";return n0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n0(e)}function m1(){return m1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m1.apply(this,arguments)}function KW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Sp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KW(Object(r),!0).forEach(function(n){W2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XW(e,t){if(e==null)return{};var r=t6e(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function t6e(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function r6e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function YW(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Iie(n.key),n)}}function n6e(e,t,r){return t&&YW(e.prototype,t),r&&YW(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function i6e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GL(e,t)}function GL(e,t){return GL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},GL(e,t)}function o6e(e){var t=l6e();return function(){var n=kM(e),i;if(t){var o=kM(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return a6e(this,i)}}function a6e(e,t){if(t&&(n0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s6e(e)}function s6e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l6e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function kM(e){return kM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},kM(e)}function W2(e,t,r){return t=Iie(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Iie(e){var t=u6e(e,"string");return n0(t)==="symbol"?t:String(t)}function u6e(e,t){if(n0(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(n0(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var q2=function(e){i6e(r,e);var t=o6e(r);function r(){return r6e(this,r),t.apply(this,arguments)}return n6e(r,[{key:"getTickValueCoord",value:function(i){var o=i.coordinate,a=this.props,s=a.angle,l=a.cx,u=a.cy;return zn(l,u,o,s)}},{key:"getTickTextAnchor",value:function(){var i=this.props.orientation,o;switch(i){case"left":o="end";break;case"right":o="start";break;default:o="middle";break}return o}},{key:"getViewBox",value:function(){var i=this.props,o=i.cx,a=i.cy,s=i.angle,l=i.ticks,u=ZGe(l,function(c){return c.coordinate||0}),d=WGe(l,function(c){return c.coordinate||0});return{cx:o,cy:a,startAngle:s,endAngle:s,innerRadius:d.coordinate||0,outerRadius:u.coordinate||0}}},{key:"renderAxisLine",value:function(){var i=this.props,o=i.cx,a=i.cy,s=i.angle,l=i.ticks,u=i.axisLine,d=XW(i,JGe),c=l.reduce(function(p,g){return[Math.min(p[0],g.coordinate),Math.max(p[1],g.coordinate)]},[1/0,-1/0]),h=zn(o,a,c[0],s),f=zn(o,a,c[1],s),m=Sp(Sp(Sp({},Dt(d)),{},{fill:"none"},Dt(u)),{},{x1:h.x,y1:h.y,x2:f.x,y2:f.y});return le.createElement("line",m1({className:"recharts-polar-radius-axis-line"},m))}},{key:"renderTicks",value:function(){var i=this,o=this.props,a=o.ticks,s=o.tick,l=o.angle,u=o.tickFormatter,d=o.stroke,c=XW(o,e6e),h=this.getTickTextAnchor(),f=Dt(c),m=Dt(s),p=a.map(function(g,v){var b=i.getTickValueCoord(g),y=Sp(Sp(Sp(Sp({textAnchor:h,transform:"rotate(".concat(90-l,", ").concat(b.x,", ").concat(b.y,")")},f),{},{stroke:"none",fill:d},m),{},{index:v},b),{},{payload:g});return le.createElement(xr,m1({className:"recharts-polar-radius-axis-tick",key:"tick-".concat(v)},Jf(i.props,g,v)),r.renderTickItem(s,y,u?u(g.value,v):g.value))});return le.createElement(xr,{className:"recharts-polar-radius-axis-ticks"},p)}},{key:"render",value:function(){var i=this.props,o=i.ticks,a=i.axisLine,s=i.tick;return!o||!o.length?null:le.createElement(xr,{className:"recharts-polar-radius-axis"},a&&this.renderAxisLine(),s&&this.renderTicks(),$i.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(i,o,a){var s;return le.isValidElement(i)?s=le.cloneElement(i,o):kt(i)?s=i(o):s=le.createElement(Vm,m1({},o,{className:"recharts-polar-radius-axis-tick-value"}),a),s}}]),r}(P.PureComponent);W2(q2,"displayName","PolarRadiusAxis");W2(q2,"axisType","radiusAxis");W2(q2,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function i0(e){"@babel/helpers - typeof";return i0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i0(e)}function qp(){return qp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qp.apply(this,arguments)}function QW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function _p(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QW(Object(r),!0).forEach(function(n){K2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function c6e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZW(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Die(n.key),n)}}function d6e(e,t,r){return t&&ZW(e.prototype,t),r&&ZW(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function h6e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WL(e,t)}function WL(e,t){return WL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},WL(e,t)}function f6e(e){var t=g6e();return function(){var n=LM(e),i;if(t){var o=LM(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return p6e(this,i)}}function p6e(e,t){if(t&&(i0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m6e(e)}function m6e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g6e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function LM(e){return LM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},LM(e)}function K2(e,t,r){return t=Die(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Die(e){var t=v6e(e,"string");return i0(t)==="symbol"?t:String(t)}function v6e(e,t){if(i0(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(i0(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var y6e=Math.PI/180,JW=1e-5,X2=function(e){h6e(r,e);var t=f6e(r);function r(){return c6e(this,r),t.apply(this,arguments)}return d6e(r,[{key:"getTickLineCoord",value:function(i){var o=this.props,a=o.cx,s=o.cy,l=o.radius,u=o.orientation,d=o.tickSize,c=d||8,h=zn(a,s,l,i.coordinate),f=zn(a,s,l+(u==="inner"?-1:1)*c,i.coordinate);return{x1:h.x,y1:h.y,x2:f.x,y2:f.y}}},{key:"getTickTextAnchor",value:function(i){var o=this.props.orientation,a=Math.cos(-i.coordinate*y6e),s;return a>JW?s=o==="outer"?"start":"end":a<-JW?s=o==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var i=this.props,o=i.cx,a=i.cy,s=i.radius,l=i.axisLine,u=i.axisLineType,d=_p(_p({},Dt(this.props)),{},{fill:"none"},Dt(l));if(u==="circle")return le.createElement($S,qp({className:"recharts-polar-angle-axis-line"},d,{cx:o,cy:a,r:s}));var c=this.props.ticks,h=c.map(function(f){return zn(o,a,s,f.coordinate)});return le.createElement(IGe,qp({className:"recharts-polar-angle-axis-line"},d,{points:h}))}},{key:"renderTicks",value:function(){var i=this,o=this.props,a=o.ticks,s=o.tick,l=o.tickLine,u=o.tickFormatter,d=o.stroke,c=Dt(this.props),h=Dt(s),f=_p(_p({},c),{},{fill:"none"},Dt(l)),m=a.map(function(p,g){var v=i.getTickLineCoord(p),b=i.getTickTextAnchor(p),y=_p(_p(_p({textAnchor:b},c),{},{stroke:"none",fill:d},h),{},{index:g,payload:p,x:v.x2,y:v.y2});return le.createElement(xr,qp({className:"recharts-polar-angle-axis-tick",key:"tick-".concat(g)},Jf(i.props,p,g)),l&&le.createElement("line",qp({className:"recharts-polar-angle-axis-tick-line"},f,v)),s&&r.renderTickItem(s,y,u?u(p.value,g):p.value))});return le.createElement(xr,{className:"recharts-polar-angle-axis-ticks"},m)}},{key:"render",value:function(){var i=this.props,o=i.ticks,a=i.radius,s=i.axisLine;return a<=0||!o||!o.length?null:le.createElement(xr,{className:"recharts-polar-angle-axis"},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(i,o,a){var s;return le.isValidElement(i)?s=le.cloneElement(i,o):kt(i)?s=i(o):s=le.createElement(Vm,qp({},o,{className:"recharts-polar-angle-axis-tick-value"}),a),s}}]),r}(P.PureComponent);K2(X2,"displayName","PolarAngleAxis");K2(X2,"axisType","angleAxis");K2(X2,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var b6e=_re,x6e=b6e(Object.getPrototypeOf,Object),w6e=x6e,S6e=xh,_6e=w6e,C6e=wh,A6e="[object Object]",E6e=Function.prototype,M6e=Object.prototype,Rie=E6e.toString,P6e=M6e.hasOwnProperty,T6e=Rie.call(Object);function O6e(e){if(!C6e(e)||S6e(e)!=A6e)return!1;var t=_6e(e);if(t===null)return!0;var r=P6e.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Rie.call(r)==T6e}var I6e=O6e;const D6e=Ur(I6e);function o0(e){"@babel/helpers - typeof";return o0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o0(e)}function Kp(){return Kp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kp.apply(this,arguments)}function e8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Xn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e8(Object(r),!0).forEach(function(n){Rl(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function R6e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kie(n.key),n)}}function k6e(e,t,r){return t&&t8(e.prototype,t),r&&t8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function L6e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qL(e,t)}function qL(e,t){return qL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},qL(e,t)}function N6e(e){var t=B6e();return function(){var n=NM(e),i;if(t){var o=NM(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return z6e(this,i)}}function z6e(e,t){if(t&&(o0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pv(e)}function pv(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B6e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function NM(e){return NM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},NM(e)}function Rl(e,t,r){return t=kie(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kie(e){var t=F6e(e,"string");return o0(t)==="symbol"?t:String(t)}function F6e(e,t){if(o0(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(o0(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wu=function(e){L6e(r,e);var t=N6e(r);function r(n){var i;return R6e(this,r),i=t.call(this,n),Rl(pv(i),"pieRef",null),Rl(pv(i),"sectorRefs",[]),Rl(pv(i),"id",pp("recharts-pie-")),Rl(pv(i),"handleAnimationEnd",function(){var o=i.props.onAnimationEnd;i.setState({isAnimationFinished:!0}),kt(o)&&o()}),Rl(pv(i),"handleAnimationStart",function(){var o=i.props.onAnimationStart;i.setState({isAnimationFinished:!1}),kt(o)&&o()}),i.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},i}return k6e(r,[{key:"isActiveIndex",value:function(i){var o=this.props.activeIndex;return Array.isArray(o)?o.indexOf(i)!==-1:i===o}},{key:"hasActiveIndex",value:function(){var i=this.props.activeIndex;return Array.isArray(i)?i.length!==0:i||i===0}},{key:"renderLabels",value:function(i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.label,l=a.labelLine,u=a.dataKey,d=a.valueKey,c=Dt(this.props),h=Dt(s),f=Dt(l),m=s&&s.offsetRadius||20,p=i.map(function(g,v){var b=(g.startAngle+g.endAngle)/2,y=zn(g.cx,g.cy,g.outerRadius+m,b),x=Xn(Xn(Xn(Xn({},c),g),{},{stroke:"none"},h),{},{index:v,textAnchor:r.getTextAnchor(y.x,g.cx)},y),S=Xn(Xn(Xn(Xn({},c),g),{},{fill:"none",stroke:g.fill},f),{},{index:v,points:[zn(g.cx,g.cy,g.outerRadius,b),y],key:"line"}),w=u;return bt(u)&&bt(d)?w="value":bt(u)&&(w=d),le.createElement(xr,{key:"label-".concat(v)},l&&r.renderLabelLineItem(l,S),r.renderLabelItem(s,x,Zn(g,w)))});return le.createElement(xr,{className:"recharts-pie-labels"},p)}},{key:"renderSectorsStatically",value:function(i){var o=this,a=this.props,s=a.activeShape,l=a.blendStroke,u=a.inactiveShape;return i.map(function(d,c){var h=u&&o.hasActiveIndex()?u:null,f=o.isActiveIndex(c)?s:h,m=Xn(Xn({},d),{},{stroke:l?d.fill:d.stroke});return le.createElement(xr,Kp({ref:function(g){g&&!o.sectorRefs.includes(g)&&o.sectorRefs.push(g)},tabIndex:-1,className:"recharts-pie-sector"},Jf(o.props,d,c),{key:"sector-".concat(c)}),r.renderSectorItem(f,m))})}},{key:"renderSectorsWithAnimation",value:function(){var i=this,o=this.props,a=o.sectors,s=o.isAnimationActive,l=o.animationBegin,u=o.animationDuration,d=o.animationEasing,c=o.animationId,h=this.state,f=h.prevSectors,m=h.prevIsAnimationActive;return le.createElement(Yc,{begin:l,duration:u,isActive:s,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(c,"-").concat(m),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(p){var g=p.t,v=[],b=a&&a[0],y=b.startAngle;return a.forEach(function(x,S){var w=f&&f[S],_=S>0?Ao(x,"paddingAngle",0):0;if(w){var C=ii(w.endAngle-w.startAngle,x.endAngle-x.startAngle),E=Xn(Xn({},x),{},{startAngle:y+_,endAngle:y+C(g)+_});v.push(E),y=E.endAngle}else{var A=x.endAngle,M=x.startAngle,I=ii(0,A-M),O=I(g),T=Xn(Xn({},x),{},{startAngle:y+_,endAngle:y+O+_});v.push(T),y=T.endAngle}}),le.createElement(xr,null,i.renderSectorsStatically(v))})}},{key:"attachKeyboardHandlers",value:function(i){var o=this;i.onkeydown=function(a){if(!a.altKey)switch(a.key){case"ArrowLeft":{var s=++o.state.sectorToFocus%o.sectorRefs.length;o.sectorRefs[s].focus(),o.setState({sectorToFocus:s});break}case"ArrowRight":{var l=--o.state.sectorToFocus<0?o.sectorRefs.length-1:o.state.sectorToFocus%o.sectorRefs.length;o.sectorRefs[l].focus(),o.setState({sectorToFocus:l});break}case"Escape":{o.sectorRefs[o.state.sectorToFocus].blur(),o.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var i=this.props,o=i.sectors,a=i.isAnimationActive,s=this.state.prevSectors;return a&&o&&o.length&&(!s||!Hm(s,o))?this.renderSectorsWithAnimation():this.renderSectorsStatically(o)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var i=this,o=this.props,a=o.hide,s=o.sectors,l=o.className,u=o.label,d=o.cx,c=o.cy,h=o.innerRadius,f=o.outerRadius,m=o.isAnimationActive,p=this.state.isAnimationFinished;if(a||!s||!s.length||!Ze(d)||!Ze(c)||!Ze(h)||!Ze(f))return null;var g=Kr("recharts-pie",l);return le.createElement(xr,{tabIndex:this.props.rootTabIndex,className:g,ref:function(b){i.pieRef=b}},this.renderSectors(),u&&this.renderLabels(s),$i.renderCallByParent(this.props,null,!1),(!m||p)&&Ou.renderCallByParent(this.props,s,!1))}}],[{key:"getDerivedStateFromProps",value:function(i,o){return o.prevIsAnimationActive!==i.isAnimationActive?{prevIsAnimationActive:i.isAnimationActive,prevAnimationId:i.animationId,curSectors:i.sectors,prevSectors:[],isAnimationFinished:!0}:i.isAnimationActive&&i.animationId!==o.prevAnimationId?{prevAnimationId:i.animationId,curSectors:i.sectors,prevSectors:o.curSectors,isAnimationFinished:!0}:i.sectors!==o.curSectors?{curSectors:i.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(i,o){return i>o?"start":i<o?"end":"middle"}},{key:"renderLabelLineItem",value:function(i,o){return le.isValidElement(i)?le.cloneElement(i,o):kt(i)?i(o):le.createElement(jf,Kp({},o,{type:"linear",className:"recharts-pie-label-line"}))}},{key:"renderLabelItem",value:function(i,o,a){if(le.isValidElement(i))return le.cloneElement(i,o);var s=a;return kt(i)&&(s=i(o),le.isValidElement(s))?s:le.createElement(Vm,Kp({},o,{alignmentBaseline:"middle",className:"recharts-pie-label-text"}),s)}},{key:"renderSectorItem",value:function(i,o){return le.isValidElement(i)?le.cloneElement(i,o):kt(i)?i(o):D6e(i)?le.createElement(jL,Kp({tabIndex:-1},o,i)):le.createElement(jL,Kp({tabIndex:-1},o))}}]),r}(P.PureComponent);Rl(wu,"displayName","Pie");Rl(wu,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!jl.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Rl(wu,"parseDeltaAngle",function(e,t){var r=la(t-e),n=Math.min(Math.abs(t-e),360);return r*n});Rl(wu,"getRealPieData",function(e){var t=e.props,r=t.data,n=t.children,i=Dt(e.props),o=Va(n,NS);return r&&r.length?r.map(function(a,s){return Xn(Xn(Xn({payload:a},i),a),o&&o[s]&&o[s].props)}):o&&o.length?o.map(function(a){return Xn(Xn({},i),a.props)}):[]});Rl(wu,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,i=t.width,o=t.height,a=Pie(i,o),s=n+hs(e.props.cx,i,i/2),l=r+hs(e.props.cy,o,o/2),u=hs(e.props.innerRadius,a,0),d=hs(e.props.outerRadius,a,a*.8),c=e.props.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:s,cy:l,innerRadius:u,outerRadius:d,maxRadius:c}});Rl(wu,"getComposedData",function(e){var t=e.item,r=e.offset,n=wu.getRealPieData(t);if(!n||!n.length)return null;var i=t.props,o=i.cornerRadius,a=i.startAngle,s=i.endAngle,l=i.paddingAngle,u=i.dataKey,d=i.nameKey,c=i.valueKey,h=i.tooltipType,f=Math.abs(t.props.minAngle),m=wu.parseCoordinateOfPie(t,r),p=wu.parseDeltaAngle(a,s),g=Math.abs(p),v=u;bt(u)&&bt(c)?(Bf(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v="value"):bt(u)&&(Bf(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v=c);var b=n.filter(function(C){return Zn(C,v,0)!==0}).length,y=(g>=360?b:b-1)*l,x=g-b*f-y,S=n.reduce(function(C,E){var A=Zn(E,v,0);return C+(Ze(A)?A:0)},0),w;if(S>0){var _;w=n.map(function(C,E){var A=Zn(C,v,0),M=Zn(C,d,E),I=(Ze(A)?A:0)/S,O;E?O=_.endAngle+la(p)*l*(A!==0?1:0):O=a;var T=O+la(p)*((A!==0?f:0)+I*x),D=(O+T)/2,N=(m.innerRadius+m.outerRadius)/2,k=[{name:M,value:A,payload:C,dataKey:v,type:h}],R=zn(m.cx,m.cy,N,D);return _=Xn(Xn(Xn({percent:I,cornerRadius:o,name:M,tooltipPayload:k,midAngle:D,middleRadius:N,tooltipPosition:R},C),m),{},{value:Zn(C,v),startAngle:O,endAngle:T,payload:C,paddingAngle:la(p)*l}),_})}return Xn(Xn({},m),{},{sectors:w,data:n})});var j6e=Math.ceil,U6e=Math.max;function $6e(e,t,r,n){for(var i=-1,o=U6e(j6e((t-e)/(r||1)),0),a=Array(o);o--;)a[n?o:++i]=e,e+=r;return a}var V6e=$6e,H6e=gne,r8=1/0,G6e=17976931348623157e292;function W6e(e){if(!e)return e===0?e:0;if(e=H6e(e),e===r8||e===-r8){var t=e<0?-1:1;return t*G6e}return e===e?e:0}var Lie=W6e,q6e=V6e,K6e=L2,uD=Lie;function X6e(e){return function(t,r,n){return n&&typeof n!="number"&&K6e(t,r,n)&&(r=n=void 0),t=uD(t),r===void 0?(r=t,t=0):r=uD(r),n=n===void 0?t<r?1:-1:uD(n),q6e(t,r,n,e)}}var Y6e=X6e,Q6e=Y6e,Z6e=Q6e(),J6e=Z6e;const zM=Ur(J6e);function Bw(e){"@babel/helpers - typeof";return Bw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bw(e)}function n8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function i8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?n8(Object(r),!0).forEach(function(n){Nie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Nie(e,t,r){return t=eWe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eWe(e){var t=tWe(e,"string");return Bw(t)==="symbol"?t:String(t)}function tWe(e,t){if(Bw(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Bw(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rWe=["Webkit","Moz","O","ms"],nWe=function(t,r){if(!t)return null;var n=t.replace(/(\w)/,function(o){return o.toUpperCase()}),i=rWe.reduce(function(o,a){return i8(i8({},o),{},Nie({},a+n,r))},{});return i[t]=r,i};function a0(e){"@babel/helpers - typeof";return a0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a0(e)}function BM(){return BM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},BM.apply(this,arguments)}function o8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function cD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o8(Object(r),!0).forEach(function(n){Fs(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iWe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,zie(n.key),n)}}function oWe(e,t,r){return t&&a8(e.prototype,t),r&&a8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function aWe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KL(e,t)}function KL(e,t){return KL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},KL(e,t)}function sWe(e){var t=uWe();return function(){var n=FM(e),i;if(t){var o=FM(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return lWe(this,i)}}function lWe(e,t){if(t&&(a0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ac(e)}function ac(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uWe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function FM(e){return FM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},FM(e)}function Fs(e,t,r){return t=zie(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zie(e){var t=cWe(e,"string");return a0(t)==="symbol"?t:String(t)}function cWe(e,t){if(a0(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(a0(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dWe=function(t){var r=t.data,n=t.startIndex,i=t.endIndex,o=t.x,a=t.width,s=t.travellerWidth;if(!r||!r.length)return{};var l=r.length,u=h1().domain(zM(0,l)).range([o,o+a-s]),d=u.domain().map(function(c){return u(c)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(i),scale:u,scaleValues:d}},s8=function(t){return t.changedTouches&&!!t.changedTouches.length},Fw=function(e){aWe(r,e);var t=sWe(r);function r(n){var i;return iWe(this,r),i=t.call(this,n),Fs(ac(i),"handleDrag",function(o){i.leaveTimer&&(clearTimeout(i.leaveTimer),i.leaveTimer=null),i.state.isTravellerMoving?i.handleTravellerMove(o):i.state.isSlideMoving&&i.handleSlideDrag(o)}),Fs(ac(i),"handleTouchMove",function(o){o.changedTouches!=null&&o.changedTouches.length>0&&i.handleDrag(o.changedTouches[0])}),Fs(ac(i),"handleDragEnd",function(){i.setState({isTravellerMoving:!1,isSlideMoving:!1}),i.detachDragEndListener()}),Fs(ac(i),"handleLeaveWrapper",function(){(i.state.isTravellerMoving||i.state.isSlideMoving)&&(i.leaveTimer=window.setTimeout(i.handleDragEnd,i.props.leaveTimeOut))}),Fs(ac(i),"handleEnterSlideOrTraveller",function(){i.setState({isTextActive:!0})}),Fs(ac(i),"handleLeaveSlideOrTraveller",function(){i.setState({isTextActive:!1})}),Fs(ac(i),"handleSlideDragStart",function(o){var a=s8(o)?o.changedTouches[0]:o;i.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),i.attachDragEndListener()}),i.travellerDragStartHandlers={startX:i.handleTravellerDragStart.bind(ac(i),"startX"),endX:i.handleTravellerDragStart.bind(ac(i),"endX")},i.state={},i}return oWe(r,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(i){var o=i.startX,a=i.endX,s=this.state.scaleValues,l=this.props,u=l.gap,d=l.data,c=d.length-1,h=Math.min(o,a),f=Math.max(o,a),m=r.getIndexInRange(s,h),p=r.getIndexInRange(s,f);return{startIndex:m-m%u,endIndex:p===c?c:p-p%u}}},{key:"getTextOfTick",value:function(i){var o=this.props,a=o.data,s=o.tickFormatter,l=o.dataKey,u=Zn(a[i],l,i);return kt(s)?s(u,i):u}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(i){var o=this.state,a=o.slideMoveStartX,s=o.startX,l=o.endX,u=this.props,d=u.x,c=u.width,h=u.travellerWidth,f=u.startIndex,m=u.endIndex,p=u.onChange,g=i.pageX-a;g>0?g=Math.min(g,d+c-h-l,d+c-h-s):g<0&&(g=Math.max(g,d-s,d-l));var v=this.getIndex({startX:s+g,endX:l+g});(v.startIndex!==f||v.endIndex!==m)&&p&&p(v),this.setState({startX:s+g,endX:l+g,slideMoveStartX:i.pageX})}},{key:"handleTravellerDragStart",value:function(i,o){var a=s8(o)?o.changedTouches[0]:o;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:i,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(i){var o,a=this.state,s=a.brushMoveStartX,l=a.movingTravellerId,u=a.endX,d=a.startX,c=this.state[l],h=this.props,f=h.x,m=h.width,p=h.travellerWidth,g=h.onChange,v=h.gap,b=h.data,y={startX:this.state.startX,endX:this.state.endX},x=i.pageX-s;x>0?x=Math.min(x,f+m-p-c):x<0&&(x=Math.max(x,f-c)),y[l]=c+x;var S=this.getIndex(y),w=S.startIndex,_=S.endIndex,C=function(){var A=b.length-1;return l==="startX"&&(u>d?w%v===0:_%v===0)||u<d&&_===A||l==="endX"&&(u>d?_%v===0:w%v===0)||u>d&&_===A};this.setState((o={},Fs(o,l,c+x),Fs(o,"brushMoveStartX",i.pageX),o),function(){g&&C()&&g(S)})}},{key:"handleTravellerMoveKeyboard",value:function(i,o){var a=this,s=this.state,l=s.scaleValues,u=s.startX,d=s.endX,c=this.state[o],h=l.indexOf(c);if(h!==-1){var f=h+i;if(!(f===-1||f>=l.length)){var m=l[f];o==="startX"&&m>=d||o==="endX"&&m<=u||this.setState(Fs({},o,m),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var i=this.props,o=i.x,a=i.y,s=i.width,l=i.height,u=i.fill,d=i.stroke;return le.createElement("rect",{stroke:d,fill:u,x:o,y:a,width:s,height:l})}},{key:"renderPanorama",value:function(){var i=this.props,o=i.x,a=i.y,s=i.width,l=i.height,u=i.data,d=i.children,c=i.padding,h=P.Children.only(d);return h?le.cloneElement(h,{x:o,y:a,width:s,height:l,margin:c,compact:!0,data:u}):null}},{key:"renderTravellerLayer",value:function(i,o){var a=this,s=this.props,l=s.y,u=s.travellerWidth,d=s.height,c=s.traveller,h=Math.max(i,this.props.x),f=cD(cD({},Dt(this.props)),{},{x:h,y:l,width:u,height:d});return le.createElement(xr,{tabIndex:0,role:"slider",className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[o],onTouchStart:this.travellerDragStartHandlers[o],onKeyDown:function(p){["ArrowLeft","ArrowRight"].includes(p.key)&&(p.preventDefault(),p.stopPropagation(),a.handleTravellerMoveKeyboard(p.key==="ArrowRight"?1:-1,o))},onFocus:function(){a.setState({isTravellerFocused:!0})},onBlur:function(){a.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},r.renderTraveller(c,f))}},{key:"renderSlide",value:function(i,o){var a=this.props,s=a.y,l=a.height,u=a.stroke,d=a.travellerWidth,c=Math.min(i,o)+d,h=Math.max(Math.abs(o-i)-d,0);return le.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:u,fillOpacity:.2,x:c,y:s,width:h,height:l})}},{key:"renderText",value:function(){var i=this.props,o=i.startIndex,a=i.endIndex,s=i.y,l=i.height,u=i.travellerWidth,d=i.stroke,c=this.state,h=c.startX,f=c.endX,m=5,p={pointerEvents:"none",fill:d};return le.createElement(xr,{className:"recharts-brush-texts"},le.createElement(Vm,BM({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,f)-m,y:s+l/2},p),this.getTextOfTick(o)),le.createElement(Vm,BM({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,f)+u+m,y:s+l/2},p),this.getTextOfTick(a)))}},{key:"render",value:function(){var i=this.props,o=i.data,a=i.className,s=i.children,l=i.x,u=i.y,d=i.width,c=i.height,h=i.alwaysShowText,f=this.state,m=f.startX,p=f.endX,g=f.isTextActive,v=f.isSlideMoving,b=f.isTravellerMoving,y=f.isTravellerFocused;if(!o||!o.length||!Ze(l)||!Ze(u)||!Ze(d)||!Ze(c)||d<=0||c<=0)return null;var x=Kr("recharts-brush",a),S=le.Children.count(s)===1,w=nWe("userSelect","none");return le.createElement(xr,{className:x,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),S&&this.renderPanorama(),this.renderSlide(m,p),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(p,"endX"),(g||v||b||y||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(i){var o=i.x,a=i.y,s=i.width,l=i.height,u=i.stroke,d=Math.floor(a+l/2)-1;return le.createElement(le.Fragment,null,le.createElement("rect",{x:o,y:a,width:s,height:l,fill:u,stroke:"none"}),le.createElement("line",{x1:o+1,y1:d,x2:o+s-1,y2:d,fill:"none",stroke:"#fff"}),le.createElement("line",{x1:o+1,y1:d+2,x2:o+s-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(i,o){var a;return le.isValidElement(i)?a=le.cloneElement(i,o):kt(i)?a=i(o):a=r.renderDefaultTraveller(o),a}},{key:"getDerivedStateFromProps",value:function(i,o){var a=i.data,s=i.width,l=i.x,u=i.travellerWidth,d=i.updateId,c=i.startIndex,h=i.endIndex;if(a!==o.prevData||d!==o.prevUpdateId)return cD({prevData:a,prevTravellerWidth:u,prevUpdateId:d,prevX:l,prevWidth:s},a&&a.length?dWe({data:a,width:s,x:l,travellerWidth:u,startIndex:c,endIndex:h}):{scale:null,scaleValues:null});if(o.scale&&(s!==o.prevWidth||l!==o.prevX||u!==o.prevTravellerWidth)){o.scale.range([l,l+s-u]);var f=o.scale.domain().map(function(m){return o.scale(m)});return{prevData:a,prevTravellerWidth:u,prevUpdateId:d,prevX:l,prevWidth:s,startX:o.scale(i.startIndex),endX:o.scale(i.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(i,o){for(var a=i.length,s=0,l=a-1;l-s>1;){var u=Math.floor((s+l)/2);i[u]>o?l=u:s=u}return o>=i[l]?l:s}}]),r}(P.PureComponent);Fs(Fw,"displayName","Brush");Fs(Fw,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var hWe=Ij;function fWe(e,t){var r;return hWe(e,function(n,i,o){return r=t(n,i,o),!r}),!!r}var pWe=fWe,mWe=mre,gWe=id,vWe=pWe,yWe=Za,bWe=L2;function xWe(e,t,r){var n=yWe(e)?mWe:vWe;return r&&bWe(e,t,r)&&(t=void 0),n(e,gWe(t))}var wWe=xWe;const SWe=Ur(wWe);var Vc=function(t,r){var n=t.alwaysShow,i=t.ifOverflow;return n&&(i="extendDomain"),i===r};function _We(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var CWe=_We,AWe=Ij;function EWe(e,t){var r=!0;return AWe(e,function(n,i,o){return r=!!t(n,i,o),r}),r}var MWe=EWe,PWe=CWe,TWe=MWe,OWe=id,IWe=Za,DWe=L2;function RWe(e,t,r){var n=IWe(e)?PWe:TWe;return r&&DWe(e,t,r)&&(t=void 0),n(e,OWe(t))}var kWe=RWe;const Bie=Ur(kWe);var l8=pne;function LWe(e,t,r){t=="__proto__"&&l8?l8(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var NWe=LWe,zWe=NWe,BWe=hne,FWe=id;function jWe(e,t){var r={};return t=FWe(t),BWe(e,function(n,i,o){zWe(r,i,t(n,i,o))}),r}var UWe=jWe;const $We=Ur(UWe);var VWe=["value","background"];function s0(e){"@babel/helpers - typeof";return s0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s0(e)}function HWe(e,t){if(e==null)return{};var r=GWe(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function GWe(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function XL(){return XL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},XL.apply(this,arguments)}function u8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function xo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?u8(Object(r),!0).forEach(function(n){pf(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WWe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Fie(n.key),n)}}function qWe(e,t,r){return t&&c8(e.prototype,t),r&&c8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function KWe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&YL(e,t)}function YL(e,t){return YL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},YL(e,t)}function XWe(e){var t=QWe();return function(){var n=jM(e),i;if(t){var o=jM(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return YWe(this,i)}}function YWe(e,t){if(t&&(s0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nx(e)}function Nx(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QWe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function jM(e){return jM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},jM(e)}function pf(e,t,r){return t=Fie(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fie(e){var t=ZWe(e,"string");return s0(t)==="symbol"?t:String(t)}function ZWe(e,t){if(s0(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(s0(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rb=function(e){KWe(r,e);var t=XWe(r);function r(){var n;WWe(this,r);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=t.call.apply(t,[this].concat(o)),pf(Nx(n),"state",{isAnimationFinished:!1}),pf(Nx(n),"id",pp("recharts-bar-")),pf(Nx(n),"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),s&&s()}),pf(Nx(n),"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),s&&s()}),n}return qWe(r,[{key:"renderRectanglesStatically",value:function(i){var o=this,a=this.props.shape,s=Dt(this.props);return i&&i.map(function(l,u){var d=xo(xo(xo({},s),l),{},{index:u});return le.createElement(xr,XL({className:"recharts-bar-rectangle"},Jf(o.props,l,u),{key:"rectangle-".concat(u)}),r.renderRectangle(a,d))})}},{key:"renderRectanglesWithAnimation",value:function(){var i=this,o=this.props,a=o.data,s=o.layout,l=o.isAnimationActive,u=o.animationBegin,d=o.animationDuration,c=o.animationEasing,h=o.animationId,f=this.state.prevData;return le.createElement(Yc,{begin:u,duration:d,isActive:l,easing:c,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var p=m.t,g=a.map(function(v,b){var y=f&&f[b];if(y){var x=ii(y.x,v.x),S=ii(y.y,v.y),w=ii(y.width,v.width),_=ii(y.height,v.height);return xo(xo({},v),{},{x:x(p),y:S(p),width:w(p),height:_(p)})}if(s==="horizontal"){var C=ii(0,v.height),E=C(p);return xo(xo({},v),{},{y:v.y+v.height-E,height:E})}var A=ii(0,v.width),M=A(p);return xo(xo({},v),{},{width:M})});return le.createElement(xr,null,i.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var i=this.props,o=i.data,a=i.isAnimationActive,s=this.state.prevData;return a&&o&&o.length&&(!s||!Hm(s,o))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(o)}},{key:"renderBackground",value:function(){var i=this,o=this.props.data,a=Dt(this.props.background);return o.map(function(s,l){s.value;var u=s.background,d=HWe(s,VWe);if(!u)return null;var c=xo(xo(xo(xo(xo({},d),{},{fill:"#eee"},u),a),Jf(i.props,s,l)),{},{index:l,key:"background-bar-".concat(l),className:"recharts-bar-background-rectangle"});return r.renderRectangle(i.props.background,c)})}},{key:"renderErrorBar",value:function(i,o){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.data,l=a.xAxis,u=a.yAxis,d=a.layout,c=a.children,h=Va(c,tb);if(!h)return null;var f=d==="vertical"?s[0].height/2:s[0].width/2,m=function(v,b){var y=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:y,errorVal:Zn(v,b)}},p={clipPath:i?"url(#clipPath-".concat(o,")"):null};return le.createElement(xr,p,h.map(function(g,v){return le.cloneElement(g,{key:"error-bar-".concat(v),data:s,xAxis:l,yAxis:u,layout:d,offset:f,dataPointFormatter:m})}))}},{key:"render",value:function(){var i=this.props,o=i.hide,a=i.data,s=i.className,l=i.xAxis,u=i.yAxis,d=i.left,c=i.top,h=i.width,f=i.height,m=i.isAnimationActive,p=i.background,g=i.id;if(o||!a||!a.length)return null;var v=this.state.isAnimationFinished,b=Kr("recharts-bar",s),y=l&&l.allowDataOverflow,x=u&&u.allowDataOverflow,S=y||x,w=bt(g)?this.id:g;return le.createElement(xr,{className:b},y||x?le.createElement("defs",null,le.createElement("clipPath",{id:"clipPath-".concat(w)},le.createElement("rect",{x:y?d:d-h/2,y:x?c:c-f/2,width:y?h:h*2,height:x?f:f*2}))):null,le.createElement(xr,{className:"recharts-bar-rectangles",clipPath:S?"url(#clipPath-".concat(w,")"):null},p?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(S,w),(!m||v)&&Ou.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(i,o){return i.animationId!==o.prevAnimationId?{prevAnimationId:i.animationId,curData:i.data,prevData:o.curData}:i.data!==o.curData?{curData:i.data}:null}},{key:"renderRectangle",value:function(i,o){var a;return le.isValidElement(i)?a=le.cloneElement(i,o):kt(i)?a=i(o):a=le.createElement(i4,o),a}}]),r}(P.PureComponent);pf(rb,"displayName","Bar");pf(rb,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",isAnimationActive:!jl.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});pf(rb,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,i=e.bandSize,o=e.xAxis,a=e.yAxis,s=e.xAxisTicks,l=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,c=e.displayedData,h=e.offset,f=YVe(n,r);if(!f)return null;var m=t.layout,p=r.props,g=p.dataKey,v=p.children,b=p.minPointSize,y=m==="horizontal"?a:o,x=u?y.scale.domain():null,S=nHe({numericAxis:y}),w=Va(v,NS),_=c.map(function(C,E){var A,M,I,O,T,D;if(u?A=QVe(u[d+E],x):(A=Zn(C,g),qi(A)||(A=[S,A])),m==="horizontal"){var N,k=[a.scale(A[0]),a.scale(A[1])],R=k[0],z=k[1];M=AW({axis:o,ticks:s,bandSize:i,offset:f.offset,entry:C,index:E}),I=(N=z??R)!==null&&N!==void 0?N:void 0,O=f.size;var j=R-z;if(T=Number.isNaN(j)?0:j,D={x:M,y:a.y,width:O,height:a.height},Math.abs(b)>0&&Math.abs(T)<Math.abs(b)){var $=la(T||b)*(Math.abs(b)-Math.abs(T));I-=$,T+=$}}else{var U=[o.scale(A[0]),o.scale(A[1])],H=U[0],V=U[1];if(M=H,I=AW({axis:a,ticks:l,bandSize:i,offset:f.offset,entry:C,index:E}),O=V-H,T=f.size,D={x:o.x,y:I,width:o.width,height:T},Math.abs(b)>0&&Math.abs(O)<Math.abs(b)){var Q=la(O||b)*(Math.abs(b)-Math.abs(O));O+=Q}}return xo(xo(xo({},C),{},{x:M,y:I,width:O,height:T,value:u?A:A[1],payload:C,background:D},w&&w[E]&&w[E].props),{},{tooltipPayload:[Eie(r,C)],tooltipPosition:{x:M+O/2,y:I+T/2}})});return xo({data:_,layout:m},h)});function jw(e){"@babel/helpers - typeof";return jw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jw(e)}function JWe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,jie(n.key),n)}}function e8e(e,t,r){return t&&d8(e.prototype,t),r&&d8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function h8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function pu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h8(Object(r),!0).forEach(function(n){Y2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Y2(e,t,r){return t=jie(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jie(e){var t=t8e(e,"string");return jw(t)==="symbol"?t:String(t)}function t8e(e,t){if(jw(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(jw(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Q2=function(t,r,n,i,o){var a=t.width,s=t.height,l=t.layout,u=t.children,d=Object.keys(r),c={left:n.left,leftMirror:n.left,right:a-n.right,rightMirror:a-n.right,top:n.top,topMirror:n.top,bottom:s-n.bottom,bottomMirror:s-n.bottom},h=!!Vd(u,rb);return d.reduce(function(f,m){var p=r[m],g=p.orientation,v=p.domain,b=p.padding,y=b===void 0?{}:b,x=p.mirror,S=p.reversed,w="".concat(g).concat(x?"Mirror":""),_,C,E,A,M;if(p.type==="number"&&(p.padding==="gap"||p.padding==="no-gap")){var I=v[1]-v[0],O=1/0,T=p.categoricalDomain.sort();T.forEach(function(V,Q){Q>0&&(O=Math.min((V||0)-(T[Q-1]||0),O))});var D=O/I,N=p.layout==="vertical"?n.height:n.width;if(p.padding==="gap"&&(_=D*N/2),p.padding==="no-gap"){var k=hs(t.barCategoryGap,D*N),R=D*N/2;_=R-k-(R-k)/N*k}}i==="xAxis"?C=[n.left+(y.left||0)+(_||0),n.left+n.width-(y.right||0)-(_||0)]:i==="yAxis"?C=l==="horizontal"?[n.top+n.height-(y.bottom||0),n.top+(y.top||0)]:[n.top+(y.top||0)+(_||0),n.top+n.height-(y.bottom||0)-(_||0)]:C=p.range,S&&(C=[C[1],C[0]]);var z=Sie(p,o,h),j=z.scale,$=z.realScaleType;j.domain(v).range(C),_ie(j);var U=Cie(j,pu(pu({},p),{},{realScaleType:$}));i==="xAxis"?(M=g==="top"&&!x||g==="bottom"&&x,E=n.left,A=c[w]-M*p.height):i==="yAxis"&&(M=g==="left"&&!x||g==="right"&&x,E=c[w]-M*p.width,A=n.top);var H=pu(pu(pu({},p),U),{},{realScaleType:$,x:E,y:A,scale:j,width:i==="xAxis"?n.width:p.width,height:i==="yAxis"?n.height:p.height});return H.bandSize=OM(H,U),!p.hide&&i==="xAxis"?c[w]+=(M?-1:1)*H.height:p.hide||(c[w]+=(M?-1:1)*H.width),pu(pu({},f),{},Y2({},m,H))},{})},Uie=function(t,r){var n=t.x,i=t.y,o=r.x,a=r.y;return{x:Math.min(n,o),y:Math.min(i,a),width:Math.abs(o-n),height:Math.abs(a-i)}},r8e=function(t){var r=t.x1,n=t.y1,i=t.x2,o=t.y2;return Uie({x:r,y:n},{x:i,y:o})},$ie=function(){function e(t){JWe(this,e),this.scale=t}return e8e(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.bandAware,o=n.position;if(r!==void 0){if(o)switch(o){case"start":return this.scale(r);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(r)+s}default:return this.scale(r)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+l}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),i=n[0],o=n[n.length-1];return i<=o?r>=i&&r<=o:r>=o&&r<=i}}],[{key:"create",value:function(r){return new e(r)}}]),e}();Y2($ie,"EPS",1e-4);var o4=function(t){var r=Object.keys(t).reduce(function(n,i){return pu(pu({},n),{},Y2({},i,$ie.create(t[i])))},{});return pu(pu({},r),{},{apply:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=o.bandAware,s=o.position;return $We(i,function(l,u){return r[u].apply(l,{bandAware:a,position:s})})},isInRange:function(i){return Bie(i,function(o,a){return r[a].isInRange(o)})}})};function n8e(e){return(e%180+180)%180}var i8e=function(t){var r=t.width,n=t.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=n8e(i),a=o*Math.PI/180,s=Math.atan(n/r),l=a>s&&a<Math.PI-s?n/Math.sin(a):r/Math.cos(a);return Math.abs(l)};function Uw(e){"@babel/helpers - typeof";return Uw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uw(e)}function f8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function p8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f8(Object(r),!0).forEach(function(n){o8e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function o8e(e,t,r){return t=a8e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a8e(e){var t=s8e(e,"string");return Uw(t)==="symbol"?t:String(t)}function s8e(e,t){if(Uw(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Uw(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function l8e(e,t){return h8e(e)||d8e(e,t)||c8e(e,t)||u8e()}function u8e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c8e(e,t){if(e){if(typeof e=="string")return m8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m8(e,t)}}function m8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d8e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function h8e(e){if(Array.isArray(e))return e}function QL(){return QL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},QL.apply(this,arguments)}var f8e=function(t,r){var n;return le.isValidElement(t)?n=le.cloneElement(t,r):kt(t)?n=t(r):n=le.createElement("line",QL({},r,{className:"recharts-reference-line-line"})),n},p8e=function(t,r,n,i,o){var a=o.viewBox,s=a.x,l=a.y,u=a.width,d=a.height,c=o.position;if(n){var h=o.y,f=o.yAxis.orientation,m=t.y.apply(h,{position:c});if(Vc(o,"discard")&&!t.y.isInRange(m))return null;var p=[{x:s+u,y:m},{x:s,y:m}];return f==="left"?p.reverse():p}if(r){var g=o.x,v=o.xAxis.orientation,b=t.x.apply(g,{position:c});if(Vc(o,"discard")&&!t.x.isInRange(b))return null;var y=[{x:b,y:l+d},{x:b,y:l}];return v==="top"?y.reverse():y}if(i){var x=o.segment,S=x.map(function(w){return t.apply(w,{position:c})});return Vc(o,"discard")&&SWe(S,function(w){return!t.isInRange(w)})?null:S}return null};function a4(e){var t=e.x,r=e.y,n=e.segment,i=e.xAxis,o=e.yAxis,a=e.shape,s=e.className,l=e.alwaysShow,u=e.clipPathId;Bf(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=o4({x:i.scale,y:o.scale}),c=uo(t),h=uo(r),f=n&&n.length===2,m=p8e(d,c,h,f,e);if(!m)return null;var p=l8e(m,2),g=p[0],v=g.x,b=g.y,y=p[1],x=y.x,S=y.y,w=Vc(e,"hidden")?"url(#".concat(u,")"):void 0,_=p8(p8({clipPath:w},Dt(e,!0)),{},{x1:v,y1:b,x2:x,y2:S});return le.createElement(xr,{className:Kr("recharts-reference-line",s)},f8e(a,_),$i.renderCallByParent(e,r8e({x1:v,y1:b,x2:x,y2:S})))}a4.displayName="ReferenceLine";a4.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"};function $w(e){"@babel/helpers - typeof";return $w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$w(e)}function ZL(){return ZL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ZL.apply(this,arguments)}function g8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function v8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g8(Object(r),!0).forEach(function(n){m8e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function m8e(e,t,r){return t=g8e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g8e(e){var t=v8e(e,"string");return $w(t)==="symbol"?t:String(t)}function v8e(e,t){if($w(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if($w(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var y8e=function(t){var r=t.x,n=t.y,i=t.xAxis,o=t.yAxis,a=o4({x:i.scale,y:o.scale}),s=a.apply({x:r,y:n},{bandAware:!0});return Vc(t,"discard")&&!a.isInRange(s)?null:s};function VS(e){var t=e.x,r=e.y,n=e.r,i=e.alwaysShow,o=e.clipPathId,a=uo(t),s=uo(r);if(Bf(i===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!a||!s)return null;var l=y8e(e);if(!l)return null;var u=l.x,d=l.y,c=e.shape,h=e.className,f=Vc(e,"hidden")?"url(#".concat(o,")"):void 0,m=v8(v8({clipPath:f},Dt(e,!0)),{},{cx:u,cy:d});return le.createElement(xr,{className:Kr("recharts-reference-dot",h)},VS.renderDot(c,m),$i.renderCallByParent(e,{x:u-n,y:d-n,width:2*n,height:2*n}))}VS.displayName="ReferenceDot";VS.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1};VS.renderDot=function(e,t){var r;return le.isValidElement(e)?r=le.cloneElement(e,t):kt(e)?r=e(t):r=le.createElement($S,ZL({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r};function Vw(e){"@babel/helpers - typeof";return Vw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vw(e)}function JL(){return JL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},JL.apply(this,arguments)}function y8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function b8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?y8(Object(r),!0).forEach(function(n){b8e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function b8e(e,t,r){return t=x8e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x8e(e){var t=w8e(e,"string");return Vw(t)==="symbol"?t:String(t)}function w8e(e,t){if(Vw(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Vw(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var S8e=function(t,r,n,i,o){var a=o.x1,s=o.x2,l=o.y1,u=o.y2,d=o.xAxis,c=o.yAxis;if(!d||!c)return null;var h=o4({x:d.scale,y:c.scale}),f={x:t?h.x.apply(a,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(l,{position:"start"}):h.y.rangeMin},m={x:r?h.x.apply(s,{position:"end"}):h.x.rangeMax,y:i?h.y.apply(u,{position:"end"}):h.y.rangeMax};return Vc(o,"discard")&&(!h.isInRange(f)||!h.isInRange(m))?null:Uie(f,m)};function HS(e){var t=e.x1,r=e.x2,n=e.y1,i=e.y2,o=e.className,a=e.alwaysShow,s=e.clipPathId;Bf(a===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var l=uo(t),u=uo(r),d=uo(n),c=uo(i),h=e.shape;if(!l&&!u&&!d&&!c&&!h)return null;var f=S8e(l,u,d,c,e);if(!f&&!h)return null;var m=Vc(e,"hidden")?"url(#".concat(s,")"):void 0;return le.createElement(xr,{className:Kr("recharts-reference-area",o)},HS.renderRect(h,b8(b8({clipPath:m},Dt(e,!0)),f)),$i.renderCallByParent(e,f))}HS.displayName="ReferenceArea";HS.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1};HS.renderRect=function(e,t){var r;return le.isValidElement(e)?r=le.cloneElement(e,t):kt(e)?r=e(t):r=le.createElement(i4,JL({},t,{className:"recharts-reference-area-rect"})),r};function eN(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],i=0;i<e.length;i+=t)if(r===void 0||r(e[i])===!0)n.push(e[i]);else return;return n}function Hw(e){"@babel/helpers - typeof";return Hw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hw(e)}function x8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ta(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x8(Object(r),!0).forEach(function(n){_8e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _8e(e,t,r){return t=C8e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C8e(e){var t=A8e(e,"string");return Hw(t)==="symbol"?t:String(t)}function A8e(e,t){if(Hw(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Hw(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function E8e(e){for(var t=1,r=eN(e,t,function(n){return n.isShow});t<=e.length;){if(r!==void 0)return r;t++,r=eN(e,t,function(n){return n.isShow})}return e.slice(0,1)}function M8e(e,t){return eN(e,t+1)}function tN(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return i8e(n,r)}function P8e(e){var t=e.angle,r=e.ticks,n=e.tickFormatter,i=e.viewBox,o=e.orientation,a=e.minTickGap,s=e.unit,l=e.fontSize,u=e.letterSpacing,d=i.x,c=i.y,h=i.width,f=i.height,m=o==="top"||o==="bottom"?"width":"height",p=s&&m==="width"?Cc(s,{fontSize:l,letterSpacing:u}):{width:0,height:0},g=(r||[]).slice(),v=g.length,b=v>=2?la(g[1].coordinate-g[0].coordinate):1,y,x;b===1?(y=m==="width"?d:c,x=m==="width"?d+h:c+f):(y=m==="width"?d+h:c+f,x=m==="width"?d:c);for(var S=v-1;S>=0;S--){var w=g[S],_=kt(n)?n(w.value,v-S-1):w.value,C=m==="width"?tN(Cc(_,{fontSize:l,letterSpacing:u}),p,t):Cc(_,{fontSize:l,letterSpacing:u})[m];if(S===v-1){var E=b*(w.coordinate+b*C/2-x);g[S]=w=ta(ta({},w),{},{tickCoord:E>0?w.coordinate-E*b:w.coordinate})}else g[S]=w=ta(ta({},w),{},{tickCoord:w.coordinate});var A=b*(w.tickCoord-b*C/2-y)>=0&&b*(w.tickCoord+b*C/2-x)<=0;A&&(x=w.tickCoord-b*(C/2+a),g[S]=ta(ta({},w),{},{isShow:!0}))}return g}function w8(e,t){var r=e.angle,n=e.ticks,i=e.tickFormatter,o=e.viewBox,a=e.orientation,s=e.minTickGap,l=e.unit,u=e.fontSize,d=e.letterSpacing,c=o.x,h=o.y,f=o.width,m=o.height,p=a==="top"||a==="bottom"?"width":"height",g=(n||[]).slice(),v=l&&p==="width"?Cc(l,{fontSize:u,letterSpacing:d}):{width:0,height:0},b=g.length,y=b>=2?la(g[1].coordinate-g[0].coordinate):1,x,S;if(y===1?(x=p==="width"?c:h,S=p==="width"?c+f:h+m):(x=p==="width"?c+f:h+m,S=p==="width"?c:h),t){var w=n[b-1],_=kt(i)?i(w.value,b-1):w.value,C=p==="width"?tN(Cc(_,{fontSize:u,letterSpacing:d}),v,r):Cc(_,{fontSize:u,letterSpacing:d})[p],E=y*(w.coordinate+y*C/2-S);g[b-1]=w=ta(ta({},w),{},{tickCoord:E>0?w.coordinate-E*y:w.coordinate});var A=y*(w.tickCoord-y*C/2-x)>=0&&y*(w.tickCoord+y*C/2-S)<=0;A&&(S=w.tickCoord-y*(C/2+s),g[b-1]=ta(ta({},w),{},{isShow:!0}))}for(var M=t?b-1:b,I=0;I<M;I++){var O=g[I],T=kt(i)?i(O.value,I):O.value,D=p==="width"?tN(Cc(T,{fontSize:u,letterSpacing:d}),v,r):Cc(T,{fontSize:u,letterSpacing:d})[p];if(I===0){var N=y*(O.coordinate-y*D/2-x);g[I]=O=ta(ta({},O),{},{tickCoord:N<0?O.coordinate-N*y:O.coordinate})}else g[I]=O=ta(ta({},O),{},{tickCoord:O.coordinate});var k=y*(O.tickCoord-y*D/2-x)>=0&&y*(O.tickCoord+y*D/2-S)<=0;k&&(x=O.tickCoord+y*(D/2+s),g[I]=ta(ta({},O),{},{isShow:!0}))}return g}function rN(e,t,r){var n=e.tick,i=e.ticks,o=e.viewBox,a=e.minTickGap,s=e.orientation,l=e.interval,u=e.tickFormatter,d=e.unit,c=e.angle;if(!i||!i.length||!n)return[];if(Ze(l)||jl.isSsr)return M8e(i,typeof l=="number"&&Ze(l)?l:0);var h=[];return l==="equidistantPreserveStart"?(h=w8({angle:c,ticks:i,tickFormatter:u,viewBox:o,orientation:s,minTickGap:a,unit:d,fontSize:t,letterSpacing:r}),E8e(h)):(l==="preserveStart"||l==="preserveStartEnd"?h=w8({angle:c,ticks:i,tickFormatter:u,viewBox:o,orientation:s,minTickGap:a,unit:d,fontSize:t,letterSpacing:r},l==="preserveStartEnd"):h=P8e({angle:c,ticks:i,tickFormatter:u,viewBox:o,orientation:s,minTickGap:a,unit:d,fontSize:t,letterSpacing:r}),h.filter(function(f){return f.isShow}))}var T8e=["viewBox"],O8e=["viewBox"],I8e=["ticks"];function l0(e){"@babel/helpers - typeof";return l0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l0(e)}function Lv(){return Lv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lv.apply(this,arguments)}function S8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function xa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S8(Object(r),!0).forEach(function(n){s4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dD(e,t){if(e==null)return{};var r=D8e(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function D8e(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function R8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Vie(n.key),n)}}function k8e(e,t,r){return t&&_8(e.prototype,t),r&&_8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function L8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nN(e,t)}function nN(e,t){return nN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},nN(e,t)}function N8e(e){var t=F8e();return function(){var n=UM(e),i;if(t){var o=UM(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return z8e(this,i)}}function z8e(e,t){if(t&&(l0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return B8e(e)}function B8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F8e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function UM(e){return UM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},UM(e)}function s4(e,t,r){return t=Vie(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vie(e){var t=j8e(e,"string");return l0(t)==="symbol"?t:String(t)}function j8e(e,t){if(l0(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(l0(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var g1=function(e){L8e(r,e);var t=N8e(r);function r(n){var i;return R8e(this,r),i=t.call(this,n),i.state={fontSize:"",letterSpacing:""},i}return k8e(r,[{key:"shouldComponentUpdate",value:function(i,o){var a=i.viewBox,s=dD(i,T8e),l=this.props,u=l.viewBox,d=dD(l,O8e);return!sy(a,u)||!sy(s,d)||!sy(o,this.state)}},{key:"componentDidMount",value:function(){var i=this.layerReference;if(i){var o=i.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];o&&this.setState({fontSize:window.getComputedStyle(o).fontSize,letterSpacing:window.getComputedStyle(o).letterSpacing})}}},{key:"getTickLineCoord",value:function(i){var o=this.props,a=o.x,s=o.y,l=o.width,u=o.height,d=o.orientation,c=o.tickSize,h=o.mirror,f=o.tickMargin,m,p,g,v,b,y,x=h?-1:1,S=i.tickSize||c,w=Ze(i.tickCoord)?i.tickCoord:i.coordinate;switch(d){case"top":m=p=i.coordinate,v=s+ +!h*u,g=v-x*S,y=g-x*f,b=w;break;case"left":g=v=i.coordinate,p=a+ +!h*l,m=p-x*S,b=m-x*f,y=w;break;case"right":g=v=i.coordinate,p=a+ +h*l,m=p+x*S,b=m+x*f,y=w;break;default:m=p=i.coordinate,v=s+ +h*u,g=v+x*S,y=g+x*f,b=w;break}return{line:{x1:m,y1:g,x2:p,y2:v},tick:{x:b,y}}}},{key:"getTickTextAnchor",value:function(){var i=this.props,o=i.orientation,a=i.mirror,s;switch(o){case"left":s=a?"start":"end";break;case"right":s=a?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var i=this.props,o=i.orientation,a=i.mirror,s="end";switch(o){case"left":case"right":s="middle";break;case"top":s=a?"start":"end";break;default:s=a?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var i=this.props,o=i.x,a=i.y,s=i.width,l=i.height,u=i.orientation,d=i.mirror,c=i.axisLine,h=xa(xa(xa({},Dt(this.props)),Dt(c)),{},{fill:"none"});if(u==="top"||u==="bottom"){var f=+(u==="top"&&!d||u==="bottom"&&d);h=xa(xa({},h),{},{x1:o,y1:a+f*l,x2:o+s,y2:a+f*l})}else{var m=+(u==="left"&&!d||u==="right"&&d);h=xa(xa({},h),{},{x1:o+m*s,y1:a,x2:o+m*s,y2:a+l})}return le.createElement("line",Lv({},h,{className:Kr("recharts-cartesian-axis-line",Ao(c,"className"))}))}},{key:"renderTicks",value:function(i,o,a){var s=this,l=this.props,u=l.tickLine,d=l.stroke,c=l.tick,h=l.tickFormatter,f=l.unit,m=rN(xa(xa({},this.props),{},{ticks:i}),o,a),p=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),v=Dt(this.props),b=Dt(c),y=xa(xa({},v),{},{fill:"none"},Dt(u)),x=m.map(function(S,w){var _=s.getTickLineCoord(S),C=_.line,E=_.tick,A=xa(xa(xa(xa({textAnchor:p,verticalAnchor:g},v),{},{stroke:"none",fill:d},b),E),{},{index:w,payload:S,visibleTicksCount:m.length,tickFormatter:h});return le.createElement(xr,Lv({className:"recharts-cartesian-axis-tick",key:"tick-".concat(w)},Jf(s.props,S,w)),u&&le.createElement("line",Lv({},y,C,{className:Kr("recharts-cartesian-axis-tick-line",Ao(u,"className"))})),c&&r.renderTickItem(c,A,"".concat(kt(h)?h(S.value,w):S.value).concat(f||"")))});return le.createElement("g",{className:"recharts-cartesian-axis-ticks"},x)}},{key:"render",value:function(){var i=this,o=this.props,a=o.axisLine,s=o.width,l=o.height,u=o.ticksGenerator,d=o.className,c=o.hide;if(c)return null;var h=this.props,f=h.ticks,m=dD(h,I8e),p=f;return kt(u)&&(p=f&&f.length>0?u(this.props):u(m)),s<=0||l<=0||!p||!p.length?null:le.createElement(xr,{className:Kr("recharts-cartesian-axis",d),ref:function(v){i.layerReference=v}},a&&this.renderAxisLine(),this.renderTicks(p,this.state.fontSize,this.state.letterSpacing),$i.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(i,o,a){var s;return le.isValidElement(i)?s=le.cloneElement(i,o):kt(i)?s=i(o):s=le.createElement(Vm,Lv({},o,{className:"recharts-cartesian-axis-tick-value"}),a),s}}]),r}(P.Component);s4(g1,"displayName","CartesianAxis");s4(g1,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var U8e=["x1","y1","x2","y2","key"];function u0(e){"@babel/helpers - typeof";return u0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u0(e)}function iN(){return iN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iN.apply(this,arguments)}function $8e(e,t){if(e==null)return{};var r=V8e(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function V8e(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function C8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function nC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C8(Object(r),!0).forEach(function(n){l4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function H8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Hie(n.key),n)}}function G8e(e,t,r){return t&&A8(e.prototype,t),r&&A8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function W8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oN(e,t)}function oN(e,t){return oN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},oN(e,t)}function q8e(e){var t=Y8e();return function(){var n=$M(e),i;if(t){var o=$M(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return K8e(this,i)}}function K8e(e,t){if(t&&(u0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return X8e(e)}function X8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y8e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function $M(e){return $M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$M(e)}function l4(e,t,r){return t=Hie(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hie(e){var t=Q8e(e,"string");return u0(t)==="symbol"?t:String(t)}function Q8e(e,t){if(u0(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(u0(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wm=function(e){W8e(r,e);var t=q8e(r);function r(){return H8e(this,r),t.apply(this,arguments)}return G8e(r,[{key:"renderHorizontal",value:function(i){var o=this,a=this.props,s=a.x,l=a.width,u=a.horizontal;if(!i||!i.length)return null;var d=i.map(function(c,h){var f=nC(nC({},o.props),{},{x1:s,y1:c,x2:s+l,y2:c,key:"line-".concat(h),index:h});return r.renderLineItem(u,f)});return le.createElement("g",{className:"recharts-cartesian-grid-horizontal"},d)}},{key:"renderVertical",value:function(i){var o=this,a=this.props,s=a.y,l=a.height,u=a.vertical;if(!i||!i.length)return null;var d=i.map(function(c,h){var f=nC(nC({},o.props),{},{x1:c,y1:s,x2:c,y2:s+l,key:"line-".concat(h),index:h});return r.renderLineItem(u,f)});return le.createElement("g",{className:"recharts-cartesian-grid-vertical"},d)}},{key:"renderVerticalStripes",value:function(i){var o=this.props.verticalFill;if(!o||!o.length)return null;var a=this.props,s=a.fillOpacity,l=a.x,u=a.y,d=a.width,c=a.height,h=i.map(function(m){return Math.round(m+l-l)}).sort(function(m,p){return m-p});l!==h[0]&&h.unshift(0);var f=h.map(function(m,p){var g=!h[p+1],v=g?l+d-m:h[p+1]-m;if(v<=0)return null;var b=p%o.length;return le.createElement("rect",{key:"react-".concat(p),x:m,y:u,width:v,height:c,stroke:"none",fill:o[b],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return le.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}},{key:"renderHorizontalStripes",value:function(i){var o=this.props.horizontalFill;if(!o||!o.length)return null;var a=this.props,s=a.fillOpacity,l=a.x,u=a.y,d=a.width,c=a.height,h=i.map(function(m){return Math.round(m+u-u)}).sort(function(m,p){return m-p});u!==h[0]&&h.unshift(0);var f=h.map(function(m,p){var g=!h[p+1],v=g?u+c-m:h[p+1]-m;if(v<=0)return null;var b=p%o.length;return le.createElement("rect",{key:"react-".concat(p),y:m,x:l,height:v,width:d,stroke:"none",fill:o[b],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return le.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}},{key:"renderBackground",value:function(){var i=this.props.fill;if(!i||i==="none")return null;var o=this.props,a=o.fillOpacity,s=o.x,l=o.y,u=o.width,d=o.height;return le.createElement("rect",{x:s,y:l,width:u,height:d,stroke:"none",fill:i,fillOpacity:a,className:"recharts-cartesian-grid-bg"})}},{key:"render",value:function(){var i=this.props,o=i.x,a=i.y,s=i.width,l=i.height,u=i.horizontal,d=i.vertical,c=i.horizontalCoordinatesGenerator,h=i.verticalCoordinatesGenerator,f=i.xAxis,m=i.yAxis,p=i.offset,g=i.chartWidth,v=i.chartHeight;if(!Ze(s)||s<=0||!Ze(l)||l<=0||!Ze(o)||o!==+o||!Ze(a)||a!==+a)return null;var b=this.props,y=b.horizontalPoints,x=b.verticalPoints;return(!y||!y.length)&&kt(c)&&(y=c({yAxis:m,width:g,height:v,offset:p})),(!x||!x.length)&&kt(h)&&(x=h({xAxis:f,width:g,height:v,offset:p})),le.createElement("g",{className:"recharts-cartesian-grid"},this.renderBackground(),u&&this.renderHorizontal(y),d&&this.renderVertical(x),u&&this.renderHorizontalStripes(y),d&&this.renderVerticalStripes(x))}}],[{key:"renderLineItem",value:function(i,o){var a;if(le.isValidElement(i))a=le.cloneElement(i,o);else if(kt(i))a=i(o);else{var s=o.x1,l=o.y1,u=o.x2,d=o.y2,c=o.key,h=$8e(o,U8e);a=le.createElement("line",iN({},Dt(h),{x1:s,y1:l,x2:u,y2:d,fill:"none",key:c}))}return a}}]),r}(P.PureComponent);l4(Wm,"displayName","CartesianGrid");l4(Wm,"defaultProps",{horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]});var Z8e=["type","layout","connectNulls","ref"];function c0(e){"@babel/helpers - typeof";return c0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c0(e)}function J8e(e,t){if(e==null)return{};var r=e9e(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function e9e(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function v1(){return v1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v1.apply(this,arguments)}function E8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function zs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E8(Object(r),!0).forEach(function(n){gc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Tg(e){return i9e(e)||n9e(e)||r9e(e)||t9e()}function t9e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r9e(e,t){if(e){if(typeof e=="string")return aN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aN(e,t)}}function n9e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function i9e(e){if(Array.isArray(e))return aN(e)}function aN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o9e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Gie(n.key),n)}}function a9e(e,t,r){return t&&M8(e.prototype,t),r&&M8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function s9e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sN(e,t)}function sN(e,t){return sN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},sN(e,t)}function l9e(e){var t=c9e();return function(){var n=VM(e),i;if(t){var o=VM(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return u9e(this,i)}}function u9e(e,t){if(t&&(c0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jp(e)}function jp(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c9e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function VM(e){return VM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},VM(e)}function gc(e,t,r){return t=Gie(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gie(e){var t=d9e(e,"string");return c0(t)==="symbol"?t:String(t)}function d9e(e,t){if(c0(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(c0(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Iu=function(e){s9e(r,e);var t=l9e(r);function r(){var n;o9e(this,r);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=t.call.apply(t,[this].concat(o)),gc(jp(n),"state",{isAnimationFinished:!0,totalLength:0}),gc(jp(n),"getStrokeDasharray",function(s,l,u){for(var d=u.reduce(function(b,y){return b+y}),c=Math.floor(s/d),h=s%d,f=l-s,m=[],p=0,g=0;;g+=u[p],++p)if(g+u[p]>h){m=[].concat(Tg(u.slice(0,p)),[h-g]);break}var v=m.length%2===0?[0,f]:[f];return[].concat(Tg(r.repeat(u,c)),Tg(m),v).map(function(b){return"".concat(b,"px")}).join(", ")}),gc(jp(n),"id",pp("recharts-line-")),gc(jp(n),"pathRef",function(s){n.mainCurve=s}),gc(jp(n),"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),gc(jp(n),"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return a9e(r,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var i=this.getTotalLength();this.setState({totalLength:i})}}},{key:"getTotalLength",value:function(){var i=this.mainCurve;try{return i&&i.getTotalLength&&i.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(i,o){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.points,l=a.xAxis,u=a.yAxis,d=a.layout,c=a.children,h=Va(c,tb);if(!h)return null;var f=function(g,v){return{x:g.x,y:g.y,value:g.value,errorVal:Zn(g.payload,v)}},m={clipPath:i?"url(#clipPath-".concat(o,")"):null};return le.createElement(xr,m,h.map(function(p,g){return le.cloneElement(p,{key:"bar-".concat(g),data:s,xAxis:l,yAxis:u,layout:d,dataPointFormatter:f})}))}},{key:"renderDots",value:function(i,o,a){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var l=this.props,u=l.dot,d=l.points,c=l.dataKey,h=Dt(this.props),f=Dt(u,!0),m=d.map(function(g,v){var b=zs(zs(zs({key:"dot-".concat(v),r:3},h),f),{},{value:g.value,dataKey:c,cx:g.x,cy:g.y,index:v,payload:g.payload});return r.renderDotItem(u,b)}),p={clipPath:i?"url(#clipPath-".concat(o?"":"dots-").concat(a,")"):null};return le.createElement(xr,v1({className:"recharts-line-dots",key:"dots"},p),m)}},{key:"renderCurveStatically",value:function(i,o,a,s){var l=this.props,u=l.type,d=l.layout,c=l.connectNulls;l.ref;var h=J8e(l,Z8e),f=zs(zs(zs({},Dt(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:o?"url(#clipPath-".concat(a,")"):null,points:i},s),{},{type:u,layout:d,connectNulls:c});return le.createElement(jf,v1({},f,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(i,o){var a=this,s=this.props,l=s.points,u=s.strokeDasharray,d=s.isAnimationActive,c=s.animationBegin,h=s.animationDuration,f=s.animationEasing,m=s.animationId,p=s.animateNewValues,g=s.width,v=s.height,b=this.state,y=b.prevPoints,x=b.totalLength;return le.createElement(Yc,{begin:c,duration:h,isActive:d,easing:f,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(S){var w=S.t;if(y){var _=y.length/l.length,C=l.map(function(O,T){var D=Math.floor(T*_);if(y[D]){var N=y[D],k=ii(N.x,O.x),R=ii(N.y,O.y);return zs(zs({},O),{},{x:k(w),y:R(w)})}if(p){var z=ii(g*2,O.x),j=ii(v/2,O.y);return zs(zs({},O),{},{x:z(w),y:j(w)})}return zs(zs({},O),{},{x:O.x,y:O.y})});return a.renderCurveStatically(C,i,o)}var E=ii(0,x),A=E(w),M;if(u){var I="".concat(u).split(/[,\s]+/gim).map(function(O){return parseFloat(O)});M=a.getStrokeDasharray(A,x,I)}else M="".concat(A,"px ").concat(x-A,"px");return a.renderCurveStatically(l,i,o,{strokeDasharray:M})})}},{key:"renderCurve",value:function(i,o){var a=this.props,s=a.points,l=a.isAnimationActive,u=this.state,d=u.prevPoints,c=u.totalLength;return l&&s&&s.length&&(!d&&c>0||!Hm(d,s))?this.renderCurveWithAnimation(i,o):this.renderCurveStatically(s,i,o)}},{key:"render",value:function(){var i,o=this.props,a=o.hide,s=o.dot,l=o.points,u=o.className,d=o.xAxis,c=o.yAxis,h=o.top,f=o.left,m=o.width,p=o.height,g=o.isAnimationActive,v=o.id;if(a||!l||!l.length)return null;var b=this.state.isAnimationFinished,y=l.length===1,x=Kr("recharts-line",u),S=d&&d.allowDataOverflow,w=c&&c.allowDataOverflow,_=S||w,C=bt(v)?this.id:v,E=(i=Dt(s))!==null&&i!==void 0?i:{r:3,strokeWidth:2},A=E.r,M=A===void 0?3:A,I=E.strokeWidth,O=I===void 0?2:I,T=dre(s)?s:{},D=T.clipDot,N=D===void 0?!0:D,k=M*2+O;return le.createElement(xr,{className:x},S||w?le.createElement("defs",null,le.createElement("clipPath",{id:"clipPath-".concat(C)},le.createElement("rect",{x:S?f:f-m/2,y:w?h:h-p/2,width:S?m:m*2,height:w?p:p*2})),!N&&le.createElement("clipPath",{id:"clipPath-dots-".concat(C)},le.createElement("rect",{x:f-k/2,y:h-k/2,width:m+k,height:p+k}))):null,!y&&this.renderCurve(_,C),this.renderErrorBar(_,C),(y||s)&&this.renderDots(_,N,C),(!g||b)&&Ou.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(i,o){return i.animationId!==o.prevAnimationId?{prevAnimationId:i.animationId,curPoints:i.points,prevPoints:o.curPoints}:i.points!==o.curPoints?{curPoints:i.points}:null}},{key:"repeat",value:function(i,o){for(var a=i.length%2!==0?[].concat(Tg(i),[0]):i,s=[],l=0;l<o;++l)s=[].concat(Tg(s),Tg(a));return s}},{key:"renderDotItem",value:function(i,o){var a;if(le.isValidElement(i))a=le.cloneElement(i,o);else if(kt(i))a=i(o);else{var s=Kr("recharts-line-dot",i?i.className:"");a=le.createElement($S,v1({},o,{className:s}))}return a}}]),r}(P.PureComponent);gc(Iu,"displayName","Line");gc(Iu,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!jl.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});gc(Iu,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,a=e.dataKey,s=e.bandSize,l=e.displayedData,u=e.offset,d=t.layout,c=l.map(function(h,f){var m=Zn(h,a);return d==="horizontal"?{x:r0({axis:r,ticks:i,bandSize:s,entry:h,index:f}),y:bt(m)?null:n.scale(m),value:m,payload:h}:{x:bt(m)?null:r.scale(m),y:r0({axis:n,ticks:o,bandSize:s,entry:h,index:f}),value:m,payload:h}});return zs({points:c,layout:d},u)});var h9e=["layout","type","stroke","connectNulls","isRange","ref"];function d0(e){"@babel/helpers - typeof";return d0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d0(e)}function f9e(e,t){if(e==null)return{};var r=p9e(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function p9e(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function um(){return um=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},um.apply(this,arguments)}function P8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Wh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P8(Object(r),!0).forEach(function(n){Dc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function m9e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Wie(n.key),n)}}function g9e(e,t,r){return t&&T8(e.prototype,t),r&&T8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function v9e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lN(e,t)}function lN(e,t){return lN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},lN(e,t)}function y9e(e){var t=x9e();return function(){var n=HM(e),i;if(t){var o=HM(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return b9e(this,i)}}function b9e(e,t){if(t&&(d0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zx(e)}function zx(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x9e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function HM(e){return HM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},HM(e)}function Dc(e,t,r){return t=Wie(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wie(e){var t=w9e(e,"string");return d0(t)==="symbol"?t:String(t)}function w9e(e,t){if(d0(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(d0(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hh=function(e){v9e(r,e);var t=y9e(r);function r(){var n;m9e(this,r);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=t.call.apply(t,[this].concat(o)),Dc(zx(n),"state",{isAnimationFinished:!0}),Dc(zx(n),"id",pp("recharts-area-")),Dc(zx(n),"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),kt(s)&&s()}),Dc(zx(n),"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),kt(s)&&s()}),n}return g9e(r,[{key:"renderDots",value:function(i,o,a){var s=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(s&&!l)return null;var u=this.props,d=u.dot,c=u.points,h=u.dataKey,f=Dt(this.props),m=Dt(d,!0),p=c.map(function(v,b){var y=Wh(Wh(Wh({key:"dot-".concat(b),r:3},f),m),{},{dataKey:h,cx:v.x,cy:v.y,index:b,value:v.value,payload:v.payload});return r.renderDotItem(d,y)}),g={clipPath:i?"url(#clipPath-".concat(o?"":"dots-").concat(a,")"):null};return le.createElement(xr,um({className:"recharts-area-dots"},g),p)}},{key:"renderHorizontalRect",value:function(i){var o=this.props,a=o.baseLine,s=o.points,l=o.strokeWidth,u=s[0].x,d=s[s.length-1].x,c=i*Math.abs(u-d),h=ff(s.map(function(f){return f.y||0}));return Ze(a)&&typeof a=="number"?h=Math.max(a,h):a&&qi(a)&&a.length&&(h=Math.max(ff(a.map(function(f){return f.y||0})),h)),Ze(h)?le.createElement("rect",{x:u<d?u:u-c,y:0,width:c,height:Math.floor(h+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(i){var o=this.props,a=o.baseLine,s=o.points,l=o.strokeWidth,u=s[0].y,d=s[s.length-1].y,c=i*Math.abs(u-d),h=ff(s.map(function(f){return f.x||0}));return Ze(a)&&typeof a=="number"?h=Math.max(a,h):a&&qi(a)&&a.length&&(h=Math.max(ff(a.map(function(f){return f.x||0})),h)),Ze(h)?le.createElement("rect",{x:0,y:u<d?u:u-c,width:h+(l?parseInt("".concat(l),10):1),height:Math.floor(c)}):null}},{key:"renderClipRect",value:function(i){var o=this.props.layout;return o==="vertical"?this.renderVerticalRect(i):this.renderHorizontalRect(i)}},{key:"renderAreaStatically",value:function(i,o,a,s){var l=this.props,u=l.layout,d=l.type,c=l.stroke,h=l.connectNulls,f=l.isRange;l.ref;var m=f9e(l,h9e);return le.createElement(xr,{clipPath:a?"url(#clipPath-".concat(s,")"):null},le.createElement(jf,um({},Dt(m,!0),{points:i,connectNulls:h,type:d,baseLine:o,layout:u,stroke:"none",className:"recharts-area-area"})),c!=="none"&&le.createElement(jf,um({},Dt(this.props),{className:"recharts-area-curve",layout:u,type:d,connectNulls:h,fill:"none",points:i})),c!=="none"&&f&&le.createElement(jf,um({},Dt(this.props),{className:"recharts-area-curve",layout:u,type:d,connectNulls:h,fill:"none",points:o})))}},{key:"renderAreaWithAnimation",value:function(i,o){var a=this,s=this.props,l=s.points,u=s.baseLine,d=s.isAnimationActive,c=s.animationBegin,h=s.animationDuration,f=s.animationEasing,m=s.animationId,p=this.state,g=p.prevPoints,v=p.prevBaseLine;return le.createElement(Yc,{begin:c,duration:h,isActive:d,easing:f,from:{t:0},to:{t:1},key:"area-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(b){var y=b.t;if(g){var x=g.length/l.length,S=l.map(function(E,A){var M=Math.floor(A*x);if(g[M]){var I=g[M],O=ii(I.x,E.x),T=ii(I.y,E.y);return Wh(Wh({},E),{},{x:O(y),y:T(y)})}return E}),w;if(Ze(u)&&typeof u=="number"){var _=ii(v,u);w=_(y)}else if(bt(u)||q0(u)){var C=ii(v,0);w=C(y)}else w=u.map(function(E,A){var M=Math.floor(A*x);if(v[M]){var I=v[M],O=ii(I.x,E.x),T=ii(I.y,E.y);return Wh(Wh({},E),{},{x:O(y),y:T(y)})}return E});return a.renderAreaStatically(S,w,i,o)}return le.createElement(xr,null,le.createElement("defs",null,le.createElement("clipPath",{id:"animationClipPath-".concat(o)},a.renderClipRect(y))),le.createElement(xr,{clipPath:"url(#animationClipPath-".concat(o,")")},a.renderAreaStatically(l,u,i,o)))})}},{key:"renderArea",value:function(i,o){var a=this.props,s=a.points,l=a.baseLine,u=a.isAnimationActive,d=this.state,c=d.prevPoints,h=d.prevBaseLine,f=d.totalLength;return u&&s&&s.length&&(!c&&f>0||!Hm(c,s)||!Hm(h,l))?this.renderAreaWithAnimation(i,o):this.renderAreaStatically(s,l,i,o)}},{key:"render",value:function(){var i,o=this.props,a=o.hide,s=o.dot,l=o.points,u=o.className,d=o.top,c=o.left,h=o.xAxis,f=o.yAxis,m=o.width,p=o.height,g=o.isAnimationActive,v=o.id;if(a||!l||!l.length)return null;var b=this.state.isAnimationFinished,y=l.length===1,x=Kr("recharts-area",u),S=h&&h.allowDataOverflow,w=f&&f.allowDataOverflow,_=S||w,C=bt(v)?this.id:v,E=(i=Dt(s))!==null&&i!==void 0?i:{r:3,strokeWidth:2},A=E.r,M=A===void 0?3:A,I=E.strokeWidth,O=I===void 0?2:I,T=dre(s)?s:{},D=T.clipDot,N=D===void 0?!0:D,k=M*2+O;return le.createElement(xr,{className:x},S||w?le.createElement("defs",null,le.createElement("clipPath",{id:"clipPath-".concat(C)},le.createElement("rect",{x:S?c:c-m/2,y:w?d:d-p/2,width:S?m:m*2,height:w?p:p*2})),!N&&le.createElement("clipPath",{id:"clipPath-dots-".concat(C)},le.createElement("rect",{x:c-k/2,y:d-k/2,width:m+k,height:p+k}))):null,y?null:this.renderArea(_,C),(s||y)&&this.renderDots(_,N,C),(!g||b)&&Ou.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(i,o){return i.animationId!==o.prevAnimationId?{prevAnimationId:i.animationId,curPoints:i.points,curBaseLine:i.baseLine,prevPoints:o.curPoints,prevBaseLine:o.curBaseLine}:i.points!==o.curPoints||i.baseLine!==o.curBaseLine?{curPoints:i.points,curBaseLine:i.baseLine}:null}}]),r}(P.PureComponent);Dc(hh,"displayName","Area");Dc(hh,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!jl.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Dc(hh,"getBaseValue",function(e,t,r,n){var i=e.layout,o=e.baseValue,a=t.props.baseValue,s=a??o;if(Ze(s)&&typeof s=="number")return s;var l=i==="horizontal"?n:r,u=l.scale.domain();if(l.type==="number"){var d=Math.max(u[0],u[1]),c=Math.min(u[0],u[1]);return s==="dataMin"?c:s==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return s==="dataMin"?u[0]:s==="dataMax"?u[1]:u[0]});Dc(hh,"getComposedData",function(e){var t=e.props,r=e.item,n=e.xAxis,i=e.yAxis,o=e.xAxisTicks,a=e.yAxisTicks,s=e.bandSize,l=e.dataKey,u=e.stackedData,d=e.dataStartIndex,c=e.displayedData,h=e.offset,f=t.layout,m=u&&u.length,p=hh.getBaseValue(t,r,n,i),g=!1,v=c.map(function(y,x){var S=Zn(y,l),w;m?w=u[d+x]:(w=S,qi(w)?g=!0:w=[p,w]);var _=bt(w[1])||m&&bt(S);return f==="horizontal"?{x:r0({axis:n,ticks:o,bandSize:s,entry:y,index:x}),y:_?null:i.scale(w[1]),value:w,payload:y}:{x:_?null:n.scale(w[1]),y:r0({axis:i,ticks:a,bandSize:s,entry:y,index:x}),value:w,payload:y}}),b;return m||g?b=v.map(function(y){return f==="horizontal"?{x:y.x,y:!bt(Ao(y,"value[0]"))&&!bt(Ao(y,"y"))?i.scale(Ao(y,"value[0]")):null}:{x:bt(Ao(y,"value[0]"))?null:n.scale(Ao(y,"value[0]")),y:y.y}}):f==="horizontal"?b=i.scale(p):b=n.scale(p),Wh({points:v,baseLine:b,layout:f,isRange:g},h)});Dc(hh,"renderDotItem",function(e,t){var r;return le.isValidElement(e)?r=le.cloneElement(e,t):kt(e)?r=e(t):r=le.createElement($S,um({},t,{className:"recharts-area-dot"})),r});var GS=function(){return null};GS.displayName="ZAxis";GS.defaultProps={zAxisId:0,range:[64,64],scale:"auto",type:"number"};function h0(e){"@babel/helpers - typeof";return h0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h0(e)}function y1(){return y1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},y1.apply(this,arguments)}function O8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function wl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?O8(Object(r),!0).forEach(function(n){mf(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function S9e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qie(n.key),n)}}function _9e(e,t,r){return t&&I8(e.prototype,t),r&&I8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function C9e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uN(e,t)}function uN(e,t){return uN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},uN(e,t)}function A9e(e){var t=M9e();return function(){var n=GM(e),i;if(t){var o=GM(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return E9e(this,i)}}function E9e(e,t){if(t&&(h0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bx(e)}function Bx(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M9e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function GM(e){return GM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},GM(e)}function mf(e,t,r){return t=qie(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qie(e){var t=P9e(e,"string");return h0(t)==="symbol"?t:String(t)}function P9e(e,t){if(h0(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(h0(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WS=function(e){C9e(r,e);var t=A9e(r);function r(){var n;S9e(this,r);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=t.call.apply(t,[this].concat(o)),mf(Bx(n),"state",{isAnimationFinished:!1}),mf(Bx(n),"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0})}),mf(Bx(n),"handleAnimationStart",function(){n.setState({isAnimationFinished:!1})}),mf(Bx(n),"id",pp("recharts-scatter-")),n}return _9e(r,[{key:"renderSymbolsStatically",value:function(i){var o=this,a=this.props,s=a.shape,l=a.activeShape,u=a.activeIndex,d=Dt(this.props);return i.map(function(c,h){var f=wl(wl({key:"symbol-".concat(h)},d),c);return le.createElement(xr,y1({className:"recharts-scatter-symbol"},Jf(o.props,c,h),{key:"symbol-".concat(h),role:"img"}),r.renderSymbolItem(u===h?l:s,f))})}},{key:"renderSymbolsWithAnimation",value:function(){var i=this,o=this.props,a=o.points,s=o.isAnimationActive,l=o.animationBegin,u=o.animationDuration,d=o.animationEasing,c=o.animationId,h=this.state.prevPoints;return le.createElement(Yc,{begin:l,duration:u,isActive:s,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(c),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(f){var m=f.t,p=a.map(function(g,v){var b=h&&h[v];if(b){var y=ii(b.cx,g.cx),x=ii(b.cy,g.cy),S=ii(b.size,g.size);return wl(wl({},g),{},{cx:y(m),cy:x(m),size:S(m)})}var w=ii(0,g.size);return wl(wl({},g),{},{size:w(m)})});return le.createElement(xr,null,i.renderSymbolsStatically(p))})}},{key:"renderSymbols",value:function(){var i=this.props,o=i.points,a=i.isAnimationActive,s=this.state.prevPoints;return a&&o&&o.length&&(!s||!Hm(s,o))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(o)}},{key:"renderErrorBar",value:function(){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.points,s=o.xAxis,l=o.yAxis,u=o.children,d=Va(u,tb);return d?d.map(function(c,h){var f=c.props.direction;return le.cloneElement(c,{key:h,data:a,xAxis:s,yAxis:l,layout:f==="x"?"vertical":"horizontal",dataPointFormatter:function(p,g){return{x:p.cx,y:p.cy,value:f==="x"?+p.node.x:+p.node.y,errorVal:Zn(p,g)}}})}):null}},{key:"renderLine",value:function(){var i=this.props,o=i.points,a=i.line,s=i.lineType,l=i.lineJointType,u=Dt(this.props),d=Dt(a),c,h;if(s==="joint")c=o.map(function(x){return{x:x.cx,y:x.cy}});else if(s==="fitting"){var f=EOe(o),m=f.xmin,p=f.xmax,g=f.a,v=f.b,b=function(S){return g*S+v};c=[{x:m,y:b(m)},{x:p,y:b(p)}]}var y=wl(wl(wl({},u),{},{fill:"none",stroke:u&&u.fill},d),{},{points:c});return le.isValidElement(a)?h=le.cloneElement(a,y):kt(a)?h=a(y):h=le.createElement(jf,y1({},y,{type:l})),le.createElement(xr,{className:"recharts-scatter-line",key:"recharts-scatter-line"},h)}},{key:"render",value:function(){var i=this.props,o=i.hide,a=i.points,s=i.line,l=i.className,u=i.xAxis,d=i.yAxis,c=i.left,h=i.top,f=i.width,m=i.height,p=i.id,g=i.isAnimationActive;if(o||!a||!a.length)return null;var v=this.state.isAnimationFinished,b=Kr("recharts-scatter",l),y=u&&u.allowDataOverflow,x=d&&d.allowDataOverflow,S=y||x,w=bt(p)?this.id:p;return le.createElement(xr,{className:b,clipPath:S?"url(#clipPath-".concat(w,")"):null},y||x?le.createElement("defs",null,le.createElement("clipPath",{id:"clipPath-".concat(w)},le.createElement("rect",{x:y?c:c-f/2,y:x?h:h-m/2,width:y?f:f*2,height:x?m:m*2}))):null,s&&this.renderLine(),this.renderErrorBar(),le.createElement(xr,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!g||v)&&Ou.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(i,o){return i.animationId!==o.prevAnimationId?{prevAnimationId:i.animationId,curPoints:i.points,prevPoints:o.curPoints}:i.points!==o.curPoints?{curPoints:i.points}:null}},{key:"renderSymbolItem",value:function(i,o){var a;return le.isValidElement(i)?a=le.cloneElement(i,o):kt(i)?a=i(o):typeof i=="string"&&(a=le.createElement(Tj,y1({},o,{type:i}))),a}}]),r}(P.PureComponent);mf(WS,"displayName","Scatter");mf(WS,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!jl.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});mf(WS,"getComposedData",function(e){var t=e.xAxis,r=e.yAxis,n=e.zAxis,i=e.item,o=e.displayedData,a=e.xAxisTicks,s=e.yAxisTicks,l=e.offset,u=i.props.tooltipType,d=Va(i.props.children,NS),c=bt(t.dataKey)?i.props.dataKey:t.dataKey,h=bt(r.dataKey)?i.props.dataKey:r.dataKey,f=n&&n.dataKey,m=n?n.range:GS.defaultProps.range,p=m&&m[0],g=t.scale.bandwidth?t.scale.bandwidth():0,v=r.scale.bandwidth?r.scale.bandwidth():0,b=o.map(function(y,x){var S=Zn(y,c),w=Zn(y,h),_=!bt(f)&&Zn(y,f)||"-",C=[{name:bt(t.dataKey)?i.props.name:t.name||t.dataKey,unit:t.unit||"",value:S,payload:y,dataKey:c,type:u},{name:bt(r.dataKey)?i.props.name:r.name||r.dataKey,unit:r.unit||"",value:w,payload:y,dataKey:h,type:u}];_!=="-"&&C.push({name:n.name||n.dataKey,unit:n.unit||"",value:_,payload:y,dataKey:f,type:u});var E=r0({axis:t,ticks:a,bandSize:g,entry:y,index:x,dataKey:c}),A=r0({axis:r,ticks:s,bandSize:v,entry:y,index:x,dataKey:h}),M=_!=="-"?n.scale(_):p,I=Math.sqrt(Math.max(M,0)/Math.PI);return wl(wl({},y),{},{cx:E,cy:A,x:E-I,y:A-I,xAxis:t,yAxis:r,zAxis:n,width:2*I,height:2*I,size:M,node:{x:S,y:w,z:_},tooltipPayload:C,tooltipPosition:{x:E,y:A},payload:y},d&&d[x]&&d[x].props)});return wl({points:b},l)});var Ul=function(){return null};Ul.displayName="XAxis";Ul.defaultProps={allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0};var ps=function(){return null};ps.displayName="YAxis";ps.defaultProps={allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1};var T9e=id,O9e=LS,I9e=T2;function D9e(e){return function(t,r,n){var i=Object(t);if(!O9e(t)){var o=T9e(r);t=I9e(t),r=function(s){return o(i[s],s,i)}}var a=e(t,r,n);return a>-1?i[o?t[a]:a]:void 0}}var R9e=D9e,k9e=Lie;function L9e(e){var t=k9e(e),r=t%1;return t===t?r?t-r:t:0}var N9e=L9e,z9e=Tre,B9e=id,F9e=N9e,j9e=Math.max;function U9e(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var i=r==null?0:F9e(r);return i<0&&(i=j9e(n+i,0)),z9e(e,B9e(t),i)}var $9e=U9e,V9e=R9e,H9e=$9e,G9e=V9e(H9e),W9e=G9e;const q9e=Ur(W9e);var K9e=xh,X9e=wh,Y9e="[object Boolean]";function Q9e(e){return e===!0||e===!1||X9e(e)&&K9e(e)==Y9e}var Z9e=Q9e;const J9e=Ur(Z9e);function D8(e){return nqe(e)||rqe(e)||tqe(e)||eqe()}function eqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tqe(e,t){if(e){if(typeof e=="string")return cN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cN(e,t)}}function rqe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function nqe(e){if(Array.isArray(e))return cN(e)}function cN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var dN=function(t,r,n,i,o){var a=Va(t,a4),s=Va(t,VS),l=[].concat(D8(a),D8(s)),u=Va(t,HS),d="".concat(i,"Id"),c=i[0],h=r;if(l.length&&(h=l.reduce(function(p,g){if(g.props[d]===n&&Vc(g.props,"extendDomain")&&Ze(g.props[c])){var v=g.props[c];return[Math.min(p[0],v),Math.max(p[1],v)]}return p},h)),u.length){var f="".concat(c,"1"),m="".concat(c,"2");h=u.reduce(function(p,g){if(g.props[d]===n&&Vc(g.props,"extendDomain")&&Ze(g.props[f])&&Ze(g.props[m])){var v=g.props[f],b=g.props[m];return[Math.min(p[0],v,b),Math.max(p[1],v,b)]}return p},h)}return o&&o.length&&(h=o.reduce(function(p,g){return Ze(g)?[Math.min(p[0],g),Math.max(p[1],g)]:p},h)),h},Kie={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function o(l,u,d,c,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var f=new i(d,c||l,h),m=r?r+u:u;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],f]:l._events[m].push(f):(l._events[m]=f,l._eventsCount++),l}function a(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function s(){this._events=new n,this._eventsCount=0}s.prototype.eventNames=function(){var u=[],d,c;if(this._eventsCount===0)return u;for(c in d=this._events)t.call(d,c)&&u.push(r?c.slice(1):c);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},s.prototype.listeners=function(u){var d=r?r+u:u,c=this._events[d];if(!c)return[];if(c.fn)return[c.fn];for(var h=0,f=c.length,m=new Array(f);h<f;h++)m[h]=c[h].fn;return m},s.prototype.listenerCount=function(u){var d=r?r+u:u,c=this._events[d];return c?c.fn?1:c.length:0},s.prototype.emit=function(u,d,c,h,f,m){var p=r?r+u:u;if(!this._events[p])return!1;var g=this._events[p],v=arguments.length,b,y;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),v){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,d),!0;case 3:return g.fn.call(g.context,d,c),!0;case 4:return g.fn.call(g.context,d,c,h),!0;case 5:return g.fn.call(g.context,d,c,h,f),!0;case 6:return g.fn.call(g.context,d,c,h,f,m),!0}for(y=1,b=new Array(v-1);y<v;y++)b[y-1]=arguments[y];g.fn.apply(g.context,b)}else{var x=g.length,S;for(y=0;y<x;y++)switch(g[y].once&&this.removeListener(u,g[y].fn,void 0,!0),v){case 1:g[y].fn.call(g[y].context);break;case 2:g[y].fn.call(g[y].context,d);break;case 3:g[y].fn.call(g[y].context,d,c);break;case 4:g[y].fn.call(g[y].context,d,c,h);break;default:if(!b)for(S=1,b=new Array(v-1);S<v;S++)b[S-1]=arguments[S];g[y].fn.apply(g[y].context,b)}}return!0},s.prototype.on=function(u,d,c){return o(this,u,d,c,!1)},s.prototype.once=function(u,d,c){return o(this,u,d,c,!0)},s.prototype.removeListener=function(u,d,c,h){var f=r?r+u:u;if(!this._events[f])return this;if(!d)return a(this,f),this;var m=this._events[f];if(m.fn)m.fn===d&&(!h||m.once)&&(!c||m.context===c)&&a(this,f);else{for(var p=0,g=[],v=m.length;p<v;p++)(m[p].fn!==d||h&&!m[p].once||c&&m[p].context!==c)&&g.push(m[p]);g.length?this._events[f]=g.length===1?g[0]:g:a(this,f)}return this},s.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&a(this,d)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s})(Kie);var iqe=Kie.exports;const oqe=Ur(iqe);var Bs=new oqe;Bs.setMaxListeners&&Bs.setMaxListeners(10);var hD="recharts.syncMouseEvents";function Gw(e){"@babel/helpers - typeof";return Gw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gw(e)}function aqe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Xie(n.key),n)}}function sqe(e,t,r){return t&&R8(e.prototype,t),r&&R8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function fD(e,t,r){return t=Xie(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xie(e){var t=lqe(e,"string");return Gw(t)==="symbol"?t:String(t)}function lqe(e,t){if(Gw(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Gw(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uqe=function(){function e(){aqe(this,e),fD(this,"activeIndex",0),fD(this,"coordinateList",[]),fD(this,"layout","horizontal")}return sqe(e,[{key:"setDetails",value:function(r){var n=r.coordinateList,i=n===void 0?[]:n,o=r.container,a=o===void 0?null:o,s=r.layout,l=s===void 0?null:s,u=r.offset,d=u===void 0?null:u,c=r.mouseHandlerCallback,h=c===void 0?null:c;this.coordinateList=i??this.coordinateList,this.container=a??this.container,this.layout=l??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=h??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"spoofMouse",value:function(){if(this.layout==="horizontal"&&this.coordinateList.length!==0){var r=this.container.getBoundingClientRect(),n=r.x,i=r.y,o=r.height,a=this.coordinateList[this.activeIndex].coordinate,s=n+a,l=i+this.offset.top+o/2;this.mouseHandlerCallback({pageX:s,pageY:l})}}}]),e}(),cqe=["item"],dqe=["children","className","width","height","style","compact","title","desc"];function f0(e){"@babel/helpers - typeof";return f0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f0(e)}function k8(e,t){return pqe(e)||fqe(e,t)||Yie(e,t)||hqe()}function hqe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fqe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function pqe(e){if(Array.isArray(e))return e}function Nv(){return Nv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nv.apply(this,arguments)}function L8(e,t){if(e==null)return{};var r=mqe(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function mqe(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function gqe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Qie(n.key),n)}}function vqe(e,t,r){return t&&N8(e.prototype,t),r&&N8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function yqe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hN(e,t)}function hN(e,t){return hN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},hN(e,t)}function bqe(e){var t=wqe();return function(){var n=WM(e),i;if(t){var o=WM(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return xqe(this,i)}}function xqe(e,t){if(t&&(f0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tr(e)}function Tr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wqe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function WM(e){return WM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},WM(e)}function p0(e){return Cqe(e)||_qe(e)||Yie(e)||Sqe()}function Sqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yie(e,t){if(e){if(typeof e=="string")return fN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fN(e,t)}}function _qe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Cqe(e){if(Array.isArray(e))return fN(e)}function fN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function z8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ve(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?z8(Object(r),!0).forEach(function(n){Yt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Yt(e,t,r){return t=Qie(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qie(e){var t=Aqe(e,"string");return f0(t)==="symbol"?t:String(t)}function Aqe(e,t){if(f0(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(f0(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Eqe={xAxis:["bottom","top"],yAxis:["left","right"]},Zie={x:0,y:0},Mqe=Number.isFinite?Number.isFinite:isFinite,B8=typeof requestAnimationFrame=="function"?requestAnimationFrame:typeof setImmediate=="function"?setImmediate:setTimeout,F8=typeof cancelAnimationFrame=="function"?cancelAnimationFrame:typeof clearImmediate=="function"?clearImmediate:clearTimeout,Pqe=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},Tqe=function(t,r,n,i){var o=r.find(function(d){return d&&d.index===n});if(o){if(t==="horizontal")return{x:o.coordinate,y:i.y};if(t==="vertical")return{x:i.x,y:o.coordinate};if(t==="centric"){var a=o.coordinate,s=i.radius;return Ve(Ve(Ve({},i),zn(i.cx,i.cy,s,a)),{},{angle:a,radius:s})}var l=o.coordinate,u=i.angle;return Ve(Ve(Ve({},i),zn(i.cx,i.cy,l,u)),{},{angle:u,radius:l})}return Zie},Z2=function(t,r,n){var i=r.graphicalItems,o=r.dataStartIndex,a=r.dataEndIndex,s=(i||[]).reduce(function(l,u){var d=u.props.data;return d&&d.length?[].concat(p0(l),p0(d)):l},[]);return s&&s.length>0?s:n&&n.props&&n.props.data&&n.props.data.length>0?n.props.data:t&&t.length&&Ze(o)&&Ze(a)?t.slice(o,a+1):[]};function Oqe(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],i=e==null?void 0:e[1];if(n&&i&&Ze(n)&&Ze(i))return!0}return!1}function Jie(e){return e==="number"?[0,"auto"]:void 0}var eoe=function(t,r,n,i){var o=t.graphicalItems,a=t.tooltipAxis,s=Z2(r,t);return n<0||!o||!o.length||n>=s.length?null:o.reduce(function(l,u){var d=u.props.hide;if(d)return l;var c=u.props.data,h;if(a.dataKey&&!a.allowDuplicatedCategory){var f=c===void 0?s:c;h=eM(f,a.dataKey,i)}else h=c&&c[n]||s[n];return h?[].concat(p0(l),[Eie(u,h)]):l},[])},j8=function(t,r,n,i){var o=i||{x:t.chartX,y:t.chartY},a=Pqe(o,n),s=t.orderedTooltipTicks,l=t.tooltipAxis,u=t.tooltipTicks,d=HVe(a,s,u,l);if(d>=0&&u){var c=u[d]&&u[d].value,h=eoe(t,r,d,c),f=Tqe(n,s,d,o);return{activeTooltipIndex:d,activeLabel:c,activePayload:h,activeCoordinate:f}}return null},Iqe=function(t,r){var n=r.axes,i=r.graphicalItems,o=r.axisType,a=r.axisIdKey,s=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,c=t.children,h=t.stackOffset,f=wie(d,o),m=n.reduce(function(p,g){var v,b=g.props,y=b.type,x=b.dataKey,S=b.allowDataOverflow,w=b.allowDuplicatedCategory,_=b.scale,C=b.ticks,E=b.includeHidden,A=g.props[a];if(p[A])return p;var M=Z2(t.data,{graphicalItems:i.filter(function(H){return H.props[a]===A}),dataStartIndex:l,dataEndIndex:u}),I=M.length,O,T,D;Oqe(g.props.domain,S,y)&&(O=NL(g.props.domain,null,S),f&&(y==="number"||_!=="auto")&&(D=f1(M,x,"category")));var N=Jie(y);if(!O||O.length===0){var k,R=(k=g.props.domain)!==null&&k!==void 0?k:N;if(x){if(O=f1(M,x,y),y==="category"&&f){var z=AOe(O);w&&z?(T=O,O=zM(0,I)):w||(O=PW(R,O,g).reduce(function(H,V){return H.indexOf(V)>=0?H:[].concat(p0(H),[V])},[]))}else if(y==="category")w?O=O.filter(function(H){return H!==""&&!bt(H)}):O=PW(R,O,g).reduce(function(H,V){return H.indexOf(V)>=0||V===""||bt(V)?H:[].concat(p0(H),[V])},[]);else if(y==="number"){var j=XVe(M,i.filter(function(H){return H.props[a]===A&&(E||!H.props.hide)}),x,o,d);j&&(O=j)}f&&(y==="number"||_!=="auto")&&(D=f1(M,x,"category"))}else f?O=zM(0,I):s&&s[A]&&s[A].hasStack&&y==="number"?O=h==="expand"?[0,1]:Aie(s[A].stackGroups,l,u):O=xie(M,i.filter(function(H){return H.props[a]===A&&(E||!H.props.hide)}),y,d,!0);if(y==="number")O=dN(c,O,A,o,C),R&&(O=NL(R,O,S));else if(y==="category"&&R){var $=R,U=O.every(function(H){return $.indexOf(H)>=0});U&&(O=$)}}return Ve(Ve({},p),{},Yt({},A,Ve(Ve({},g.props),{},{axisType:o,domain:O,categoricalDomain:D,duplicateDomain:T,originalDomain:(v=g.props.domain)!==null&&v!==void 0?v:N,isCategorical:f,layout:d})))},{});return m},Dqe=function(t,r){var n=r.graphicalItems,i=r.Axis,o=r.axisType,a=r.axisIdKey,s=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,c=t.children,h=Z2(t.data,{graphicalItems:n,dataStartIndex:l,dataEndIndex:u}),f=h.length,m=wie(d,o),p=-1,g=n.reduce(function(v,b){var y=b.props[a],x=Jie("number");if(!v[y]){p++;var S;return m?S=zM(0,f):s&&s[y]&&s[y].hasStack?(S=Aie(s[y].stackGroups,l,u),S=dN(c,S,y,o)):(S=NL(x,xie(h,n.filter(function(w){return w.props[a]===y&&!w.props.hide}),"number",d),i.defaultProps.allowDataOverflow),S=dN(c,S,y,o)),Ve(Ve({},v),{},Yt({},y,Ve(Ve({axisType:o},i.defaultProps),{},{hide:!0,orientation:Ao(Eqe,"".concat(o,".").concat(p%2),null),domain:S,originalDomain:x,isCategorical:m,layout:d})))}return v},{});return g},Rqe=function(t,r){var n=r.axisType,i=n===void 0?"xAxis":n,o=r.AxisComp,a=r.graphicalItems,s=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,d=t.children,c="".concat(i,"Id"),h=Va(d,o),f={};return h&&h.length?f=Iqe(t,{axes:h,graphicalItems:a,axisType:i,axisIdKey:c,stackGroups:s,dataStartIndex:l,dataEndIndex:u}):a&&a.length&&(f=Dqe(t,{Axis:o,graphicalItems:a,axisType:i,axisIdKey:c,stackGroups:s,dataStartIndex:l,dataEndIndex:u})),f},kqe=function(t){var r=Hh(t),n=Gh(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:Dj(n,function(i){return i.coordinate}),tooltipAxis:r,tooltipAxisBandSize:OM(r,n)}},U8=function(t){var r,n,i=t.children,o=t.defaultShowTooltip,a=Vd(i,Fw),s=a&&a.props&&a.props.startIndex||0,l=(a==null||(r=a.props)===null||r===void 0?void 0:r.endIndex)!==void 0?a==null||(n=a.props)===null||n===void 0?void 0:n.endIndex:t.data&&t.data.length-1||0;return{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:l,activeTooltipIndex:-1,isTooltipActive:bt(o)?!1:o}},Lqe=function(t){return!t||!t.length?!1:t.some(function(r){var n=zf(r&&r.type);return n&&n.indexOf("Bar")>=0})},$8=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Nqe=function(t,r){var n=t.props,i=t.graphicalItems,o=t.xAxisMap,a=o===void 0?{}:o,s=t.yAxisMap,l=s===void 0?{}:s,u=n.width,d=n.height,c=n.children,h=n.margin||{},f=Vd(c,Fw),m=Vd(c,$m),p=Object.keys(l).reduce(function(y,x){var S=l[x],w=S.orientation;return!S.mirror&&!S.hide?Ve(Ve({},y),{},Yt({},w,y[w]+S.width)):y},{left:h.left||0,right:h.right||0}),g=Object.keys(a).reduce(function(y,x){var S=a[x],w=S.orientation;return!S.mirror&&!S.hide?Ve(Ve({},y),{},Yt({},w,Ao(y,"".concat(w))+S.height)):y},{top:h.top||0,bottom:h.bottom||0}),v=Ve(Ve({},g),p),b=v.bottom;return f&&(v.bottom+=f.props.height||Fw.defaultProps.height),m&&r&&(v=qVe(v,i,n,r)),Ve(Ve({brushBottom:b},v),{},{width:u-v.left-v.right,height:d-v.top-v.bottom})},qS=function(t){var r,n=t.chartName,i=t.GraphicalChild,o=t.defaultTooltipEventType,a=o===void 0?"axis":o,s=t.validateTooltipEventTypes,l=s===void 0?["axis"]:s,u=t.axisComponents,d=t.legendContent,c=t.formatAxisMap,h=t.defaultProps,f=function(g,v){var b=v.graphicalItems,y=v.stackGroups,x=v.offset,S=v.updateId,w=v.dataStartIndex,_=v.dataEndIndex,C=g.barSize,E=g.layout,A=g.barGap,M=g.barCategoryGap,I=g.maxBarSize,O=$8(E),T=O.numericAxisName,D=O.cateAxisName,N=Lqe(b),k=N&&GVe({barSize:C,stackGroups:y}),R=[];return b.forEach(function(z,j){var $=Z2(g.data,{dataStartIndex:w,dataEndIndex:_},z),U=z.props,H=U.dataKey,V=U.maxBarSize,Q=z.props["".concat(T,"Id")],X=z.props["".concat(D,"Id")],ne=u.reduce(function(Pe,Ae){var K,G=v["".concat(Ae.axisType,"Map")],de=z.props["".concat(Ae.axisType,"Id")],Ee=G&&G[de];return Ve(Ve({},Pe),{},(K={},Yt(K,Ae.axisType,Ee),Yt(K,"".concat(Ae.axisType,"Ticks"),Gh(Ee)),K))},{}),J=ne[D],W=ne["".concat(D,"Ticks")],te=y&&y[Q]&&y[Q].hasStack&&iHe(z,y[Q].stackGroups),Z=zf(z.type).indexOf("Bar")>=0,q=OM(J,W),ie=[];if(Z){var he,ae,be=bt(V)?I:V,ye=(he=(ae=OM(J,W,!0))!==null&&ae!==void 0?ae:be)!==null&&he!==void 0?he:0;ie=WVe({barGap:A,barCategoryGap:M,bandSize:ye!==q?ye:q,sizeList:k[X],maxBarSize:be}),ye!==q&&(ie=ie.map(function(Pe){return Ve(Ve({},Pe),{},{position:Ve(Ve({},Pe.position),{},{offset:Pe.position.offset-ye/2})})}))}var Se=z&&z.type&&z.type.getComposedData;if(Se){var me;R.push({props:Ve(Ve({},Se(Ve(Ve({},ne),{},{displayedData:$,props:g,dataKey:H,item:z,bandSize:q,barPosition:ie,offset:x,stackedData:te,layout:E,dataStartIndex:w,dataEndIndex:_}))),{},(me={key:z.key||"item-".concat(j)},Yt(me,T,ne[T]),Yt(me,D,ne[D]),Yt(me,"animationId",S),me)),childIndex:zOe(z,g.children),item:z})}}),R},m=function(g,v){var b=g.props,y=g.dataStartIndex,x=g.dataEndIndex,S=g.updateId;if(!oG({props:b}))return null;var w=b.children,_=b.layout,C=b.stackOffset,E=b.data,A=b.reverseStackOrder,M=$8(_),I=M.numericAxisName,O=M.cateAxisName,T=Va(w,i),D=rHe(E,T,"".concat(I,"Id"),"".concat(O,"Id"),C,A),N=u.reduce(function($,U){var H="".concat(U.axisType,"Map");return Ve(Ve({},$),{},Yt({},H,Rqe(b,Ve(Ve({},U),{},{graphicalItems:T,stackGroups:U.axisType===I&&D,dataStartIndex:y,dataEndIndex:x}))))},{}),k=Nqe(Ve(Ve({},N),{},{props:b,graphicalItems:T}),v==null?void 0:v.legendBBox);Object.keys(N).forEach(function($){N[$]=c(b,N[$],k,$.replace("Map",""),n)});var R=N["".concat(O,"Map")],z=kqe(R),j=f(b,Ve(Ve({},N),{},{dataStartIndex:y,dataEndIndex:x,updateId:S,graphicalItems:T,stackGroups:D,offset:k}));return Ve(Ve({formattedGraphicalItems:j,graphicalItems:T,offset:k,stackGroups:D},z),N)};return r=function(p){yqe(v,p);var g=bqe(v);function v(b){var y;return gqe(this,v),y=g.call(this,b),Yt(Tr(y),"accessibilityManager",new uqe),Yt(Tr(y),"clearDeferId",function(){!bt(y.deferId)&&F8&&F8(y.deferId),y.deferId=null}),Yt(Tr(y),"handleLegendBBoxUpdate",function(x){if(x){var S=y.state,w=S.dataStartIndex,_=S.dataEndIndex,C=S.updateId;y.setState(Ve({legendBBox:x},m({props:y.props,dataStartIndex:w,dataEndIndex:_,updateId:C},Ve(Ve({},y.state),{},{legendBBox:x}))))}}),Yt(Tr(y),"handleReceiveSyncEvent",function(x,S,w){var _=y.props.syncId;_===x&&S!==y.uniqueChartId&&(y.clearDeferId(),y.deferId=B8&&B8(y.applySyncEvent.bind(Tr(y),w)))}),Yt(Tr(y),"handleBrushChange",function(x){var S=x.startIndex,w=x.endIndex;if(S!==y.state.dataStartIndex||w!==y.state.dataEndIndex){var _=y.state.updateId;y.setState(function(){return Ve({dataStartIndex:S,dataEndIndex:w},m({props:y.props,dataStartIndex:S,dataEndIndex:w,updateId:_},y.state))}),y.triggerSyncEvent({dataStartIndex:S,dataEndIndex:w})}}),Yt(Tr(y),"handleMouseEnter",function(x){var S=y.props.onMouseEnter,w=y.getMouseInfo(x);if(w){var _=Ve(Ve({},w),{},{isTooltipActive:!0});y.setState(_),y.triggerSyncEvent(_),kt(S)&&S(_,x)}}),Yt(Tr(y),"triggeredAfterMouseMove",function(x){var S=y.props.onMouseMove,w=y.getMouseInfo(x),_=w?Ve(Ve({},w),{},{isTooltipActive:!0}):{isTooltipActive:!1};y.setState(_),y.triggerSyncEvent(_),kt(S)&&S(_,x)}),Yt(Tr(y),"handleItemMouseEnter",function(x){y.setState(function(){return{isTooltipActive:!0,activeItem:x,activePayload:x.tooltipPayload,activeCoordinate:x.tooltipPosition||{x:x.cx,y:x.cy}}})}),Yt(Tr(y),"handleItemMouseLeave",function(){y.setState(function(){return{isTooltipActive:!1}})}),Yt(Tr(y),"handleMouseMove",function(x){x&&kt(x.persist)&&x.persist(),y.triggeredAfterMouseMove(x)}),Yt(Tr(y),"handleMouseLeave",function(x){var S=y.props.onMouseLeave,w={isTooltipActive:!1};y.setState(w),y.triggerSyncEvent(w),kt(S)&&S(w,x),y.cancelThrottledTriggerAfterMouseMove()}),Yt(Tr(y),"handleOuterEvent",function(x){var S=NOe(x),w=Ao(y.props,"".concat(S));if(S&&kt(w)){var _;/.*touch.*/i.test(S)?_=y.getMouseInfo(x.changedTouches[0]):_=y.getMouseInfo(x);var C=w;C(_,x)}}),Yt(Tr(y),"handleClick",function(x){var S=y.props.onClick,w=y.getMouseInfo(x);if(w){var _=Ve(Ve({},w),{},{isTooltipActive:!0});y.setState(_),y.triggerSyncEvent(_),kt(S)&&S(_,x)}}),Yt(Tr(y),"handleMouseDown",function(x){var S=y.props.onMouseDown;if(kt(S)){var w=y.getMouseInfo(x);S(w,x)}}),Yt(Tr(y),"handleMouseUp",function(x){var S=y.props.onMouseUp;if(kt(S)){var w=y.getMouseInfo(x);S(w,x)}}),Yt(Tr(y),"handleTouchMove",function(x){x.changedTouches!=null&&x.changedTouches.length>0&&y.handleMouseMove(x.changedTouches[0])}),Yt(Tr(y),"handleTouchStart",function(x){x.changedTouches!=null&&x.changedTouches.length>0&&y.handleMouseDown(x.changedTouches[0])}),Yt(Tr(y),"handleTouchEnd",function(x){x.changedTouches!=null&&x.changedTouches.length>0&&y.handleMouseUp(x.changedTouches[0])}),Yt(Tr(y),"verticalCoordinatesGenerator",function(x){var S=x.xAxis,w=x.width,_=x.height,C=x.offset;return _W(rN(Ve(Ve(Ve({},g1.defaultProps),S),{},{ticks:Gh(S,!0),viewBox:{x:0,y:0,width:w,height:_}})),C.left,C.left+C.width)}),Yt(Tr(y),"horizontalCoordinatesGenerator",function(x){var S=x.yAxis,w=x.width,_=x.height,C=x.offset;return _W(rN(Ve(Ve(Ve({},g1.defaultProps),S),{},{ticks:Gh(S,!0),viewBox:{x:0,y:0,width:w,height:_}})),C.top,C.top+C.height)}),Yt(Tr(y),"axesTicksGenerator",function(x){return Gh(x,!0)}),Yt(Tr(y),"renderCursor",function(x){var S=y.state,w=S.isTooltipActive,_=S.activeCoordinate,C=S.activePayload,E=S.offset,A=S.activeTooltipIndex,M=y.getTooltipEventType();if(!x||!x.props.cursor||!w||!_||n!=="ScatterChart"&&M!=="axis")return null;var I=y.props.layout,O,T=jf;if(n==="ScatterChart")O=_,T=jGe;else if(n==="BarChart")O=y.getCursorRectangle(),T=i4;else if(I==="radial"){var D=y.getCursorPoints(),N=D.cx,k=D.cy,R=D.radius,z=D.startAngle,j=D.endAngle;O={cx:N,cy:k,startAngle:z,endAngle:j,innerRadius:R,outerRadius:R},T=jL}else O={points:y.getCursorPoints()},T=jf;var $=x.key||"_recharts-cursor",U=Ve(Ve(Ve(Ve({stroke:"#ccc",pointerEvents:"none"},E),O),Dt(x.props.cursor)),{},{payload:C,payloadIndex:A,key:$,className:"recharts-tooltip-cursor"});return P.isValidElement(x.props.cursor)?P.cloneElement(x.props.cursor,U):P.createElement(T,U)}),Yt(Tr(y),"renderPolarAxis",function(x,S,w){var _=Ao(x,"type.axisType"),C=Ao(y.state,"".concat(_,"Map")),E=C&&C[x.props["".concat(_,"Id")]];return P.cloneElement(x,Ve(Ve({},E),{},{className:_,key:x.key||"".concat(S,"-").concat(w),ticks:Gh(E,!0)}))}),Yt(Tr(y),"renderXAxis",function(x,S,w){var _=y.state.xAxisMap,C=_[x.props.xAxisId];return y.renderAxis(C,x,S,w)}),Yt(Tr(y),"renderYAxis",function(x,S,w){var _=y.state.yAxisMap,C=_[x.props.yAxisId];return y.renderAxis(C,x,S,w)}),Yt(Tr(y),"renderGrid",function(x){var S=y.state,w=S.xAxisMap,_=S.yAxisMap,C=S.offset,E=y.props,A=E.width,M=E.height,I=Hh(w),O=q9e(_,function(N){return Bie(N.domain,Mqe)}),T=O||Hh(_),D=x.props||{};return P.cloneElement(x,{key:x.key||"grid",x:Ze(D.x)?D.x:C.left,y:Ze(D.y)?D.y:C.top,width:Ze(D.width)?D.width:C.width,height:Ze(D.height)?D.height:C.height,xAxis:I,yAxis:T,offset:C,chartWidth:A,chartHeight:M,verticalCoordinatesGenerator:D.verticalCoordinatesGenerator||y.verticalCoordinatesGenerator,horizontalCoordinatesGenerator:D.horizontalCoordinatesGenerator||y.horizontalCoordinatesGenerator})}),Yt(Tr(y),"renderPolarGrid",function(x){var S=x.props,w=S.radialLines,_=S.polarAngles,C=S.polarRadius,E=y.state,A=E.radiusAxisMap,M=E.angleAxisMap,I=Hh(A),O=Hh(M),T=O.cx,D=O.cy,N=O.innerRadius,k=O.outerRadius;return P.cloneElement(x,{polarAngles:qi(_)?_:Gh(O,!0).map(function(R){return R.coordinate}),polarRadius:qi(C)?C:Gh(I,!0).map(function(R){return R.coordinate}),cx:T,cy:D,innerRadius:N,outerRadius:k,key:x.key||"polar-grid",radialLines:w})}),Yt(Tr(y),"renderLegend",function(){var x=y.state.formattedGraphicalItems,S=y.props,w=S.children,_=S.width,C=S.height,E=y.props.margin||{},A=_-(E.left||0)-(E.right||0),M=yie({children:w,formattedGraphicalItems:x,legendWidth:A,legendContent:d});if(!M)return null;var I=M.item,O=L8(M,cqe);return P.cloneElement(I,Ve(Ve({},O),{},{chartWidth:_,chartHeight:C,margin:E,ref:function(D){y.legendInstance=D},onBBoxUpdate:y.handleLegendBBoxUpdate}))}),Yt(Tr(y),"renderTooltip",function(){var x=y.props.children,S=Vd(x,Nl);if(!S)return null;var w=y.state,_=w.isTooltipActive,C=w.activeCoordinate,E=w.activePayload,A=w.activeLabel,M=w.offset;return P.cloneElement(S,{viewBox:Ve(Ve({},M),{},{x:M.left,y:M.top}),active:_,label:A,payload:_?E:[],coordinate:C})}),Yt(Tr(y),"renderBrush",function(x){var S=y.props,w=S.margin,_=S.data,C=y.state,E=C.offset,A=C.dataStartIndex,M=C.dataEndIndex,I=C.updateId;return P.cloneElement(x,{key:x.key||"_recharts-brush",onChange:eC(y.handleBrushChange,null,x.props.onChange),data:_,x:Ze(x.props.x)?x.props.x:E.left,y:Ze(x.props.y)?x.props.y:E.top+E.height+E.brushBottom-(w.bottom||0),width:Ze(x.props.width)?x.props.width:E.width,startIndex:A,endIndex:M,updateId:"brush-".concat(I)})}),Yt(Tr(y),"renderReferenceElement",function(x,S,w){if(!x)return null;var _=Tr(y),C=_.clipPathId,E=y.state,A=E.xAxisMap,M=E.yAxisMap,I=E.offset,O=x.props,T=O.xAxisId,D=O.yAxisId;return P.cloneElement(x,{key:x.key||"".concat(S,"-").concat(w),xAxis:A[T],yAxis:M[D],viewBox:{x:I.left,y:I.top,width:I.width,height:I.height},clipPathId:C})}),Yt(Tr(y),"renderActivePoints",function(x){var S=x.item,w=x.activePoint,_=x.basePoint,C=x.childIndex,E=x.isRange,A=[],M=S.props.key,I=S.item.props,O=I.activeDot,T=I.dataKey,D=Ve(Ve({index:C,dataKey:T,cx:w.x,cy:w.y,r:4,fill:n4(S.item),strokeWidth:2,stroke:"#fff",payload:w.payload,value:w.value,key:"".concat(M,"-activePoint-").concat(C)},Dt(O)),tM(O));return A.push(v.renderActiveDot(O,D)),_?A.push(v.renderActiveDot(O,Ve(Ve({},D),{},{cx:_.x,cy:_.y,key:"".concat(M,"-basePoint-").concat(C)}))):E&&A.push(null),A}),Yt(Tr(y),"renderGraphicChild",function(x,S,w){var _=y.filterFormatItem(x,S,w);if(!_)return null;var C=y.getTooltipEventType(),E=y.state,A=E.isTooltipActive,M=E.tooltipAxis,I=E.activeTooltipIndex,O=E.activeLabel,T=y.props.children,D=Vd(T,Nl),N=_.props,k=N.points,R=N.isRange,z=N.baseLine,j=_.item.props,$=j.activeDot,U=j.hide,H=!U&&A&&D&&$&&I>=0,V={};C!=="axis"&&D&&D.props.trigger==="click"?V={onClick:eC(y.handleItemMouseEnter,null,x.props.onCLick)}:C!=="axis"&&(V={onMouseLeave:eC(y.handleItemMouseLeave,null,x.props.onMouseLeave),onMouseEnter:eC(y.handleItemMouseEnter,null,x.props.onMouseEnter)});var Q=P.cloneElement(x,Ve(Ve({},_.props),V));function X(te){return typeof M.dataKey=="function"?M.dataKey(te.payload):null}if(H){var ne,J;if(M.dataKey&&!M.allowDuplicatedCategory){var W=typeof M.dataKey=="function"?X:"payload.".concat(M.dataKey.toString());ne=eM(k,W,O),J=R&&z&&eM(z,W,O)}else ne=k[I],J=R&&z&&z[I];if(!bt(ne))return[Q].concat(p0(y.renderActivePoints({item:_,activePoint:ne,basePoint:J,childIndex:I,isRange:R})))}return R?[Q,null,null]:[Q,null]}),Yt(Tr(y),"renderCustomized",function(x,S,w){return P.cloneElement(x,Ve(Ve({key:"recharts-customized-".concat(w)},y.props),y.state))}),y.uniqueChartId=bt(b.id)?pp("recharts"):b.id,y.clipPathId="".concat(y.uniqueChartId,"-clip"),b.throttleDelay&&(y.triggeredAfterMouseMove=yne(y.triggeredAfterMouseMove,b.throttleDelay)),y.state={},y}return vqe(v,[{key:"componentDidMount",value:function(){var y,x;bt(this.props.syncId)||this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(y=this.props.margin.left)!==null&&y!==void 0?y:0,top:(x=this.props.margin.top)!==null&&x!==void 0?x:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.handleMouseMove,layout:this.props.layout})}},{key:"getSnapshotBeforeUpdate",value:function(y,x){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==x.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==y.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==y.margin){var S,w;this.accessibilityManager.setDetails({offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0}})}return null}},{key:"componentDidUpdate",value:function(y){bt(y.syncId)&&!bt(this.props.syncId)&&this.addListener(),!bt(y.syncId)&&bt(this.props.syncId)&&this.removeListener()}},{key:"componentWillUnmount",value:function(){this.clearDeferId(),bt(this.props.syncId)||this.removeListener(),this.cancelThrottledTriggerAfterMouseMove()}},{key:"cancelThrottledTriggerAfterMouseMove",value:function(){typeof this.triggeredAfterMouseMove.cancel=="function"&&this.triggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var y=Vd(this.props.children,Nl);if(y&&J9e(y.props.shared)){var x=y.props.shared?"axis":"item";return l.indexOf(x)>=0?x:a}return a}},{key:"getMouseInfo",value:function(y){if(!this.container)return null;var x=V4e(this.container),S=H4e(y,x),w=this.inRange(S.chartX,S.chartY);if(!w)return null;var _=this.state,C=_.xAxisMap,E=_.yAxisMap,A=this.getTooltipEventType();if(A!=="axis"&&C&&E){var M=Hh(C).scale,I=Hh(E).scale,O=M&&M.invert?M.invert(S.chartX):null,T=I&&I.invert?I.invert(S.chartY):null;return Ve(Ve({},S),{},{xValue:O,yValue:T})}var D=j8(this.state,this.props.data,this.props.layout,w);return D?Ve(Ve({},S),D):null}},{key:"getCursorRectangle",value:function(){var y=this.props.layout,x=this.state,S=x.activeCoordinate,w=x.offset,_=x.tooltipAxisBandSize,C=_/2;return{stroke:"none",fill:"#ccc",x:y==="horizontal"?S.x-C:w.left+.5,y:y==="horizontal"?w.top+.5:S.y-C,width:y==="horizontal"?_:w.width-1,height:y==="horizontal"?w.height-1:_}}},{key:"getCursorPoints",value:function(){var y=this.props.layout,x=this.state,S=x.activeCoordinate,w=x.offset,_,C,E,A;if(y==="horizontal")_=S.x,E=_,C=w.top,A=w.top+w.height;else if(y==="vertical")C=S.y,A=C,_=w.left,E=w.left+w.width;else if(!bt(S.cx)||!bt(S.cy))if(y==="centric"){var M=S.cx,I=S.cy,O=S.innerRadius,T=S.outerRadius,D=S.angle,N=zn(M,I,O,D),k=zn(M,I,T,D);_=N.x,C=N.y,E=k.x,A=k.y}else{var R=S.cx,z=S.cy,j=S.radius,$=S.startAngle,U=S.endAngle,H=zn(R,z,j,$),V=zn(R,z,j,U);return{points:[H,V],cx:R,cy:z,radius:j,startAngle:$,endAngle:U}}return[{x:_,y:C},{x:E,y:A}]}},{key:"inRange",value:function(y,x){var S=this.props.layout;if(S==="horizontal"||S==="vertical"){var w=this.state.offset,_=y>=w.left&&y<=w.left+w.width&&x>=w.top&&x<=w.top+w.height;return _?{x:y,y:x}:null}var C=this.state,E=C.angleAxisMap,A=C.radiusAxisMap;if(E&&A){var M=Hh(E);return IW({x:y,y:x},M)}return null}},{key:"parseEventsOfWrapper",value:function(){var y=this.props.children,x=this.getTooltipEventType(),S=Vd(y,Nl),w={};S&&x==="axis"&&(S.props.trigger==="click"?w={onClick:this.handleClick}:w={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var _=tM(this.props,this.handleOuterEvent);return Ve(Ve({},_),w)}},{key:"addListener",value:function(){Bs.on(hD,this.handleReceiveSyncEvent),Bs.setMaxListeners&&Bs._maxListeners&&Bs.setMaxListeners(Bs._maxListeners+1)}},{key:"removeListener",value:function(){Bs.removeListener(hD,this.handleReceiveSyncEvent),Bs.setMaxListeners&&Bs._maxListeners&&Bs.setMaxListeners(Bs._maxListeners-1)}},{key:"triggerSyncEvent",value:function(y){var x=this.props.syncId;bt(x)||Bs.emit(hD,x,this.uniqueChartId,y)}},{key:"applySyncEvent",value:function(y){var x=this.props,S=x.layout,w=x.syncMethod,_=this.state.updateId,C=y.dataStartIndex,E=y.dataEndIndex;if(!bt(y.dataStartIndex)||!bt(y.dataEndIndex))this.setState(Ve({dataStartIndex:C,dataEndIndex:E},m({props:this.props,dataStartIndex:C,dataEndIndex:E,updateId:_},this.state)));else if(bt(y.activeTooltipIndex))this.setState(y);else{var A=y.chartX,M=y.chartY,I=y.activeTooltipIndex,O=this.state,T=O.offset,D=O.tooltipTicks;if(!T)return;if(typeof w=="function")I=w(D,y);else if(w==="value"){I=-1;for(var N=0;N<D.length;N++)if(D[N].value===y.activeLabel){I=N;break}}var k=Ve(Ve({},T),{},{x:T.left,y:T.top}),R=Math.min(A,k.x+k.width),z=Math.min(M,k.y+k.height),j=D[I]&&D[I].value,$=eoe(this.state,this.props.data,I),U=D[I]?{x:S==="horizontal"?D[I].coordinate:R,y:S==="horizontal"?z:D[I].coordinate}:Zie;this.setState(Ve(Ve({},y),{},{activeLabel:j,activeCoordinate:U,activePayload:$,activeTooltipIndex:I}))}}},{key:"filterFormatItem",value:function(y,x,S){for(var w=this.state.formattedGraphicalItems,_=0,C=w.length;_<C;_++){var E=w[_];if(E.item===y||E.props.key===y.key||x===zf(E.item.type)&&S===E.childIndex)return E}return null}},{key:"renderAxis",value:function(y,x,S,w){var _=this.props,C=_.width,E=_.height;return le.createElement(g1,Nv({},y,{className:Kr("recharts-".concat(y.axisType," ").concat(y.axisType),y.className),key:x.key||"".concat(S,"-").concat(w),viewBox:{x:0,y:0,width:C,height:E},ticksGenerator:this.axesTicksGenerator}))}},{key:"renderClipPath",value:function(){var y=this.clipPathId,x=this.state.offset,S=x.left,w=x.top,_=x.height,C=x.width;return le.createElement("defs",null,le.createElement("clipPath",{id:y},le.createElement("rect",{x:S,y:w,height:_,width:C})))}},{key:"getXScales",value:function(){var y=this.state.xAxisMap;return y?Object.entries(y).reduce(function(x,S){var w=k8(S,2),_=w[0],C=w[1];return Ve(Ve({},x),{},Yt({},_,C.scale))},{}):null}},{key:"getYScales",value:function(){var y=this.state.yAxisMap;return y?Object.entries(y).reduce(function(x,S){var w=k8(S,2),_=w[0],C=w[1];return Ve(Ve({},x),{},Yt({},_,C.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(y){var x,S;return(x=this.state.xAxisMap)===null||x===void 0||(S=x[y])===null||S===void 0?void 0:S.scale}},{key:"getYScaleByAxisId",value:function(y){var x,S;return(x=this.state.yAxisMap)===null||x===void 0||(S=x[y])===null||S===void 0?void 0:S.scale}},{key:"getItemByXY",value:function(y){var x=this.state.formattedGraphicalItems;if(x&&x.length)for(var S=0,w=x.length;S<w;S++){var _=x[S],C=_.props,E=_.item,A=zf(E.type);if(A==="Bar"){var M=(C.data||[]).find(function(O){return xGe(y,O)});if(M)return{graphicalItem:_,payload:M}}else if(A==="RadialBar"){var I=(C.data||[]).find(function(O){return IW(y,O)});if(I)return{graphicalItem:_,payload:I}}}return null}},{key:"render",value:function(){var y=this;if(!oG(this))return null;var x=this.props,S=x.children,w=x.className,_=x.width,C=x.height,E=x.style,A=x.compact,M=x.title,I=x.desc,O=L8(x,dqe),T=Dt(O),D={CartesianGrid:{handler:this.renderGrid,once:!0},ReferenceArea:{handler:this.renderReferenceElement},ReferenceLine:{handler:this.renderReferenceElement},ReferenceDot:{handler:this.renderReferenceElement},XAxis:{handler:this.renderXAxis},YAxis:{handler:this.renderYAxis},Brush:{handler:this.renderBrush,once:!0},Bar:{handler:this.renderGraphicChild},Line:{handler:this.renderGraphicChild},Area:{handler:this.renderGraphicChild},Radar:{handler:this.renderGraphicChild},RadialBar:{handler:this.renderGraphicChild},Scatter:{handler:this.renderGraphicChild},Pie:{handler:this.renderGraphicChild},Funnel:{handler:this.renderGraphicChild},Tooltip:{handler:this.renderCursor,once:!0},PolarGrid:{handler:this.renderPolarGrid,once:!0},PolarAngleAxis:{handler:this.renderPolarAxis},PolarRadiusAxis:{handler:this.renderPolarAxis},Customized:{handler:this.renderCustomized}};if(A)return le.createElement(j3,Nv({},T,{width:_,height:C,title:M,desc:I}),this.renderClipPath(),sG(S,D));if(this.props.accessibilityLayer){var N,k;T.tabIndex=(N=0)!==null&&N!==void 0?N:this.props.tabIndex,T.role=(k="img")!==null&&k!==void 0?k:this.props.role,T.onKeyDown=function(z){y.accessibilityManager.keyboardEvent(z)},T.onFocus=function(){y.accessibilityManager.focus()}}var R=this.parseEventsOfWrapper();return le.createElement("div",Nv({className:Kr("recharts-wrapper",w),style:Ve({position:"relative",cursor:"default",width:_,height:C},E)},R,{ref:function(j){y.container=j},role:"region"}),le.createElement(j3,Nv({},T,{width:_,height:C,title:M,desc:I}),this.renderClipPath(),sG(S,D)),this.renderLegend(),this.renderTooltip())}}]),v}(P.Component),Yt(r,"displayName",n),Yt(r,"defaultProps",Ve({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),Yt(r,"getDerivedStateFromProps",function(p,g){var v=p.data,b=p.children,y=p.width,x=p.height,S=p.layout,w=p.stackOffset,_=p.margin;if(bt(g.updateId)){var C=U8(p);return Ve(Ve(Ve({},C),{},{updateId:0},m(Ve(Ve({props:p},C),{},{updateId:0}),g)),{},{prevData:v,prevWidth:y,prevHeight:x,prevLayout:S,prevStackOffset:w,prevMargin:_,prevChildren:b})}if(v!==g.prevData||y!==g.prevWidth||x!==g.prevHeight||S!==g.prevLayout||w!==g.prevStackOffset||!sy(_,g.prevMargin)){var E=U8(p),A={chartX:g.chartX,chartY:g.chartY,isTooltipActive:g.isTooltipActive},M=Ve(Ve({},j8(g,v,S)),{},{updateId:g.updateId+1}),I=Ve(Ve(Ve({},E),A),M);return Ve(Ve(Ve({},I),m(Ve({props:p},I),g)),{},{prevData:v,prevWidth:y,prevHeight:x,prevLayout:S,prevStackOffset:w,prevMargin:_,prevChildren:b})}if(!hre(b,g.prevChildren)){var O=!bt(v),T=O?g.updateId:g.updateId+1;return Ve(Ve({updateId:T},m(Ve(Ve({props:p},g),{},{updateId:T}),g)),{},{prevChildren:b})}return null}),Yt(r,"renderActiveDot",function(p,g){var v;return P.isValidElement(p)?v=P.cloneElement(p,g):kt(p)?v=p(g):v=le.createElement($S,g),le.createElement(xr,{className:"recharts-active-dot",key:g.key},v)}),r},u4=qS({chartName:"LineChart",GraphicalChild:Iu,axisComponents:[{axisType:"xAxis",AxisComp:Ul},{axisType:"yAxis",AxisComp:ps}],formatAxisMap:Q2}),zqe=qS({chartName:"BarChart",GraphicalChild:rb,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Ul},{axisType:"yAxis",AxisComp:ps}],formatAxisMap:Q2}),Bqe=qS({chartName:"PieChart",GraphicalChild:wu,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:X2},{axisType:"radiusAxis",AxisComp:q2}],formatAxisMap:pHe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),Fqe=qS({chartName:"ScatterChart",GraphicalChild:WS,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:Ul},{axisType:"yAxis",AxisComp:ps},{axisType:"zAxis",AxisComp:GS}],formatAxisMap:Q2}),jqe=qS({chartName:"AreaChart",GraphicalChild:hh,axisComponents:[{axisType:"xAxis",AxisComp:Ul},{axisType:"yAxis",AxisComp:ps}],formatAxisMap:Q2});const Uqe=()=>{const{palette:e}=Qa(),{data:t}=sj(),r=P.useMemo(()=>t&&t[0].monthlyData.map(({month:o,revenue:a})=>({name:o.substring(0,3),revenue:a})),[t]),n=P.useMemo(()=>t&&t[0].monthlyData.map(({month:o,revenue:a,expenses:s})=>({name:o.substring(0,3),revenue:a,expenses:s})),[t]),i=P.useMemo(()=>t&&t[0].monthlyData.map(({month:o,revenue:a,expenses:s})=>({name:o.substring(0,3),revenue:a,profit:(a-s).toFixed(2)})),[t]);return B.jsxs(B.Fragment,{children:[B.jsxs(xu,{gridArea:"a",children:[B.jsx(Tc,{title:"Revenue vs Expenses",subtitle:"top line represents revenue, bottom line represents expenses",sideText:"+4%"}),B.jsx(ly,{width:"100%",height:"100%",children:B.jsxs(jqe,{width:500,height:400,data:n,margin:{top:15,right:25,left:-10,bottom:60},children:[B.jsxs("defs",{children:[B.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[B.jsx("stop",{offset:"5%",stopColor:e.primary[300],stopOpacity:.5}),B.jsx("stop",{offset:"95%",stopColor:e.primary[300],stopOpacity:0})]}),B.jsxs("linearGradient",{id:"colorExpenses",x1:"0",y1:"0",x2:"0",y2:"1",children:[B.jsx("stop",{offset:"5%",stopColor:e.primary[300],stopOpacity:.5}),B.jsx("stop",{offset:"95%",stopColor:e.primary[300],stopOpacity:0})]})]}),B.jsx(Ul,{dataKey:"name",tickLine:!1,style:{fontSize:"10px"}}),B.jsx(ps,{tickLine:!1,axisLine:{strokeWidth:"0"},style:{fontSize:"10px"},domain:[8e3,23e3]}),B.jsx(Nl,{}),B.jsx(hh,{type:"monotone",dataKey:"revenue",dot:!0,stroke:e.primary.main,fillOpacity:1,fill:"url(#colorRevenue)"}),B.jsx(hh,{type:"monotone",dataKey:"expenses",dot:!0,stroke:e.primary.main,fillOpacity:1,fill:"url(#colorExpenses)"})]})})]}),B.jsxs(xu,{gridArea:"b",children:[B.jsx(Tc,{title:"Revenue vs Profit",subtitle:"top line represents revenue, bottom line represents expenses",sideText:"+4%"}),B.jsx(ly,{width:"100%",height:"100%",children:B.jsxs(u4,{width:500,height:400,data:i,margin:{top:20,right:0,left:-10,bottom:55},children:[B.jsx(Wm,{vertical:!1,stroke:e.grey[800]}),B.jsx(Ul,{dataKey:"name",tickLine:!1,style:{fontSize:"10px"}}),B.jsx(ps,{yAxisId:"left",tickLine:!1,axisLine:!1,style:{fontSize:"10px"}}),B.jsx(ps,{yAxisId:"right",orientation:"right",tickLine:!1,axisLine:!1,style:{fontSize:"10px"}}),B.jsx(Nl,{}),B.jsx($m,{height:20,wrapperStyle:{margin:"0 0 10px 0"}}),B.jsx(Iu,{yAxisId:"left",type:"monotone",dataKey:"profit",stroke:e.tertiary[500]}),B.jsx(Iu,{yAxisId:"right",type:"monotone",dataKey:"revenue",stroke:e.primary.main})]})})]}),B.jsxs(xu,{gridArea:"c",children:[B.jsx(Tc,{title:"Monthly Revenue",subtitle:"graph representing the revenue month by month",sideText:"+4%"}),B.jsx(ly,{width:"100%",height:"100%",children:B.jsxs(zqe,{width:500,height:300,data:r,margin:{top:17,right:15,left:-5,bottom:58},children:[B.jsxs("defs",{children:[B.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[B.jsx("stop",{offset:"5%",stopColor:e.primary[300],stopOpacity:.5}),B.jsx("stop",{offset:"95%",stopColor:e.primary[300],stopOpacity:0})]}),B.jsxs("linearGradient",{id:"colorExpenses",x1:"0",y1:"0",x2:"0",y2:"1",children:[B.jsx("stop",{offset:"5%",stopColor:e.primary[300],stopOpacity:.5}),B.jsx("stop",{offset:"95%",stopColor:e.primary[300],stopOpacity:0})]})]}),B.jsx(Wm,{vertical:!1,stroke:e.grey[800]}),B.jsx(Ul,{dataKey:"name",axisLine:!1,tickLine:!1,style:{fontSize:"10px"}}),B.jsx(ps,{axisLine:!1,tickLine:!1,style:{fontSize:"10px"}}),B.jsx(Nl,{}),B.jsx(rb,{dataKey:"revenue",fill:"url(#colorRevenue)"})]})})]})]})},V8=[{name:"Group A",value:600},{name:"Group B",value:400}],$qe=()=>{const{palette:e}=Qa(),t=[e.primary[800],e.primary[300]],{data:r}=sj(),{data:n}=Zte(),i=P.useMemo(()=>r&&r[0].monthlyData.map(({month:a,operationalExpenses:s,nonOperationalExpenses:l})=>({name:a.substring(0,3),"Operational Expenses":s,"Non Operational Expenses":l})),[r]),o=P.useMemo(()=>n&&n.map(({_id:a,price:s,expense:l})=>({id:a,price:s,expense:l})),[n]);return B.jsxs(B.Fragment,{children:[B.jsxs(xu,{gridArea:"d",children:[B.jsx(Tc,{title:"Operational vs Non-Operational Expenses",subtitle:"The effiency rate measured by the net.",sideText:"+4%"}),B.jsx(ly,{width:"100%",height:"100%",children:B.jsxs(u4,{data:i,margin:{top:20,right:0,left:-10,bottom:55},children:[B.jsx(Wm,{vertical:!1,stroke:e.grey[800]}),B.jsx(Ul,{dataKey:"name",tickLine:!1,style:{fontSize:"10px"}}),B.jsx(ps,{yAxisId:"left",orientation:"left",tickLine:!1,axisLine:!1,style:{fontSize:"10px"}}),B.jsx(ps,{yAxisId:"right",orientation:"right",tickLine:!1,axisLine:!1,style:{fontSize:"10px"}}),B.jsx(Nl,{}),B.jsx(Iu,{yAxisId:"left",type:"monotone",dataKey:"Non Operational Expenses",stroke:e.tertiary[500]}),B.jsx(Iu,{yAxisId:"right",type:"monotone",dataKey:"Operational Expenses",stroke:e.primary.main})]})})]}),B.jsxs(xu,{gridArea:"e",children:[B.jsx(Tc,{title:"Campaigns and Targets",sideText:"+4%",subtitle:"Marketing intelligence and insight gathering."}),B.jsxs(Lf,{mt:"0.25rem",gap:"1.5rem",pr:"1rem",children:[B.jsx(Bqe,{width:110,height:100,margin:{top:0,right:-10,left:10,bottom:0},children:B.jsx(wu,{stroke:"none",data:V8,innerRadius:18,outerRadius:38,paddingAngle:2,dataKey:"value",children:V8.map((a,s)=>B.jsx(NS,{fill:t[s]},`cell-${s}`))})}),B.jsxs(Na,{ml:"-0.7rem",flexBasis:"40%",textAlign:"start",children:[B.jsx(vi,{variant:"h5",children:"Target Sales"}),B.jsx(vi,{m:"0.3rem 0",variant:"h3",color:e.primary[300],children:"83"}),B.jsx(vi,{variant:"h6",children:"Finance goals of the campaign that is desired"})]}),B.jsxs(Na,{flexBasis:"40%",textAlign:"start",children:[B.jsx(vi,{variant:"h5",children:"Losses in Revenue"}),B.jsx(vi,{variant:"h6",children:"Losses are down 25%"}),B.jsx(vi,{mt:"0.4rem",variant:"h5",children:"Profit Margins"}),B.jsx(vi,{variant:"h6",children:"Margins are up by 30% from last month."})]})]})]}),B.jsxs(xu,{gridArea:"f",children:[B.jsx(Tc,{title:"Pricing Adjustment and Raw Cost",sideText:"+4%"}),B.jsx(ly,{width:"100%",height:"100%",children:B.jsxs(Fqe,{margin:{top:20,right:25,bottom:40,left:-10},children:[B.jsx(Wm,{stroke:e.grey[800]}),B.jsx(Ul,{type:"number",dataKey:"price",name:"Pricing",axisLine:!1,tickLine:!1,style:{fontSize:"10px"},tickFormatter:a=>`$${a}`}),B.jsx(ps,{type:"number",dataKey:"expense",name:"Raw Cost",axisLine:!1,tickLine:!1,style:{fontSize:"10px"},tickFormatter:a=>`$${a}`}),B.jsx(GS,{type:"number",range:[20]}),B.jsx(Nl,{formatter:a=>`$${a}`}),B.jsx(WS,{name:"Product Expense Ratio",data:o,fill:e.tertiary[500]})]})})]})]})},toe=P.createContext(void 0);function Ir(){const e=P.useContext(toe);if(e===void 0)throw new Error(["MUI: Could not find the data grid context.","It looks like you rendered your component outside of a DataGrid, DataGridPro or DataGridPremium parent component.","This can also happen if you are bundling multiple versions of the data grid."].join(`
`));return e}const roe=P.createContext(void 0),Mt=()=>{const e=P.useContext(roe);if(!e)throw new Error("MUI: useGridRootProps should only be used inside the DataGrid, DataGridPro or DataGridPremium component.");return e},noe=P.createContext(void 0);function cg(){const e=P.useContext(noe);if(e===void 0)throw new Error(["MUI: Could not find the data grid private context.","It looks like you rendered your component outside of a DataGrid, DataGridPro or DataGridPremium parent component.","This can also happen if you are bundling multiple versions of the data grid."].join(`
`));return e}const od=(e,t="warning")=>{let r=!1;const n=Array.isArray(e)?e.join(`
`):e;return()=>{r||(r=!0,t==="error"?console.error(n):console.warn(n))}};function Vqe(e){return e.acceptsApiRef}od(["MUI: `useGridSelector` has been called before the initialization of the state.","This hook can only be used inside the context of the grid."]);const St=(e,t)=>Vqe(t)?t(e):t(e.current.state);function Er(e){return ur("MuiDataGrid",e)}const ge=cr("MuiDataGrid",["actionsCell","aggregationColumnHeader","aggregationColumnHeader--alignLeft","aggregationColumnHeader--alignCenter","aggregationColumnHeader--alignRight","autoHeight","booleanCell","cell--editable","cell--editing","cell--textCenter","cell--textLeft","cell--textRight","cell--withRenderer","cell--rangeTop","cell--rangeBottom","cell--rangeLeft","cell--rangeRight","cell","cellContent","cellCheckbox","cellSkeleton","checkboxInput","columnHeader--alignCenter","columnHeader--alignLeft","columnHeader--alignRight","columnHeader--dragging","columnHeader--moving","columnHeader--numeric","columnHeader--sortable","columnHeader--sorted","columnHeader--filtered","columnHeader","columnHeaderCheckbox","columnHeaderDraggableContainer","columnHeaderDropZone","columnHeaderTitle","columnHeaderTitleContainer","columnHeaderTitleContainerContent","columnGroupHeader","columnHeader--filledGroup","columnHeader--emptyGroup","columnHeader--showColumnBorder","columnHeaders","columnHeadersInner","columnHeadersInner--scrollable","columnSeparator--resizable","columnSeparator--resizing","columnSeparator--sideLeft","columnSeparator--sideRight","columnSeparator","columnsPanel","columnsPanelRow","detailPanel","detailPanels","detailPanelToggleCell","detailPanelToggleCell--expanded","footerCell","panel","panelHeader","panelWrapper","panelContent","panelFooter","paper","editBooleanCell","editInputCell","filterForm","filterFormDeleteIcon","filterFormLogicOperatorInput","filterFormColumnInput","filterFormOperatorInput","filterFormValueInput","filterIcon","footerContainer","iconButtonContainer","iconSeparator","main","menu","menuIcon","menuIconButton","menuOpen","menuList","overlay","root","root--densityStandard","root--densityComfortable","root--densityCompact","root--disableUserSelection","row","row--editable","row--editing","row--lastVisible","row--dragging","row--dynamicHeight","row--detailPanelExpanded","rowReorderCellPlaceholder","rowCount","rowReorderCellContainer","rowReorderCell","rowReorderCell--draggable","scrollArea--left","scrollArea--right","scrollArea","selectedRowCount","sortIcon","toolbarContainer","toolbarFilterList","virtualScroller","virtualScrollerContent","virtualScrollerContent--overflowed","virtualScrollerRenderZone","pinnedColumns","pinnedColumns--left","pinnedColumns--right","pinnedColumnHeaders","pinnedColumnHeaders--left","pinnedColumnHeaders--right","withBorderColor","cell--withRightBorder","columnHeader--withRightBorder","treeDataGroupingCell","treeDataGroupingCellToggle","groupingCriteriaCell","groupingCriteriaCellToggle","pinnedRows","pinnedRows--top","pinnedRows--bottom","pinnedRowsRenderZone"]),Hqe=e=>{const{classes:t}=e;return lt({root:["main"]},Er,t)},Gqe=wi("div",{name:"MuiDataGrid",slot:"Main",overridesResolver:(e,t)=>t.main})(()=>({position:"relative",flexGrow:1,display:"flex",flexDirection:"column",overflow:"hidden"}));function Wqe(e){const t=Mt(),r=Hqe(t);return B.jsx(Gqe,{className:r.root,ownerState:t,children:e.children})}function qqe(e,t){var r=function(x){var S=x.__resizeTriggers__,w=S.firstElementChild,_=S.lastElementChild,C=w.firstElementChild;_.scrollLeft=_.scrollWidth,_.scrollTop=_.scrollHeight,C.style.width=w.offsetWidth+1+"px",C.style.height=w.offsetHeight+1+"px",w.scrollLeft=w.scrollWidth,w.scrollTop=w.scrollHeight},n=function(x){return x.offsetWidth!=x.__resizeLast__.width||x.offsetHeight!=x.__resizeLast__.height},i=function(x){if(!(x.target.className.indexOf("contract-trigger")<0&&x.target.className.indexOf("expand-trigger")<0)){var S=this;r(this),this.__resizeRAF__&&t.cancelAnimationFrame(this.__resizeRAF__),this.__resizeRAF__=t.requestAnimationFrame(function(){n(S)&&(S.__resizeLast__.width=S.offsetWidth,S.__resizeLast__.height=S.offsetHeight,S.__resizeListeners__.forEach(function(w){w.call(S,x)}))})}},o=!1,a="",s="animationstart",l="Webkit Moz O ms".split(" "),u="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),d="";{var c=document.createElement("fakeelement");if(c.style.animationName!==void 0&&(o=!0),o===!1){for(var h=0;h<l.length;h++)if(c.style[l[h]+"AnimationName"]!==void 0){d=l[h],a="-"+d.toLowerCase()+"-",s=u[h],o=!0;break}}}var f="resizeanim",m="@"+a+"keyframes "+f+" { from { opacity: 0; } to { opacity: 0; } } ",p=a+"animation: 1ms "+f+"; ",g=function(x,S){if(!S.getElementById("muiDetectElementResize")){var w=(m||"")+".Mui-resizeTriggers { "+(p||"")+'visibility: hidden; opacity: 0; } .Mui-resizeTriggers, .Mui-resizeTriggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .Mui-resizeTriggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',_=S.constructor.name==="ShadowRoot"?S:x.head||x.getElementsByTagName("head")[0],C=x.createElement("style");C.id="muiDetectElementResize",C.type="text/css",e!=null&&C.setAttribute("nonce",e),C.styleSheet?C.styleSheet.cssText=w:C.appendChild(x.createTextNode(w)),_.appendChild(C)}},v=function(x,S){if(!x.__resizeTriggers__){var w=x.ownerDocument,_=t.getComputedStyle(x);_&&_.position=="static"&&(x.style.position="relative"),g(w,x.getRootNode()),x.__resizeLast__={},x.__resizeListeners__=[],(x.__resizeTriggers__=w.createElement("div")).className="Mui-resizeTriggers",x.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',x.appendChild(x.__resizeTriggers__),r(x),x.addEventListener("scroll",i,!0),s&&(x.__resizeTriggers__.__animationListener__=function(E){E.animationName==f&&r(x)},x.__resizeTriggers__.addEventListener(s,x.__resizeTriggers__.__animationListener__))}x.__resizeListeners__.push(S)},b=function(x,S){if(x.__resizeListeners__.splice(x.__resizeListeners__.indexOf(S),1),!x.__resizeListeners__.length){x.removeEventListener("scroll",i,!0),x.__resizeTriggers__.__animationListener__&&(x.__resizeTriggers__.removeEventListener(s,x.__resizeTriggers__.__animationListener__),x.__resizeTriggers__.__animationListener__=null);try{x.__resizeTriggers__=!x.removeChild(x.__resizeTriggers__)}catch{}}};return{addResizeListener:v,removeResizeListener:b}}const Kqe=["children","defaultHeight","defaultWidth","disableHeight","disableWidth","nonce","onResize","style"],Xqe=P.forwardRef(function(t,r){const{children:n,defaultHeight:i=null,defaultWidth:o=null,disableHeight:a=!1,disableWidth:s=!1,nonce:l,onResize:u,style:d}=t,c=Ie(t,Kqe),[h,f]=P.useState({height:i,width:o}),m=P.useRef(null),p=P.useRef(null),g=Wi(()=>{if(p.current){const b=p.current.offsetHeight||0,y=p.current.offsetWidth||0,S=qc(p.current).getComputedStyle(p.current),w=parseInt(S.paddingLeft,10)||0,_=parseInt(S.paddingRight,10)||0,C=parseInt(S.paddingTop,10)||0,E=parseInt(S.paddingBottom,10)||0,A=b-C-E,M=y-w-_;(!a&&h.height!==A||!s&&h.width!==M)&&(f({height:A,width:M}),u&&u({height:A,width:M}))}});li(()=>{var b;if(p.current=m.current.parentElement,!p)return;const y=qc((b=p.current)!=null?b:void 0),x=qqe(l,y);return x.addResizeListener(p.current,g),g(),()=>{x.removeResizeListener(p.current,g)}},[l,g]);const v=nn(m,r);return B.jsx("div",L({ref:v,style:L({flex:a?0:"1 1 0px",overflow:a?"visible":"auto"},d)},c,{children:h.height===null&&h.width===null?null:n}))}),Bd={cache:null};od(["MUI: A selector was called without passing the instance ID, which may impact the performance of the grid.","To fix, call it with `apiRef`, e.g. `mySelector(apiRef)`, or pass the instance ID explicitly, e.g `mySelector(state, apiRef.current.instanceId)`."]);const Pt=(...e)=>{Bd.cache===null&&(Bd.cache={});const t=(...r)=>{const[n,i]=r,o=!!n.current,a=o?n.current.instanceId:i??"default",s=o?n.current.state:n;Bd.cache===null&&(Bd.cache={});const{cache:l}=Bd;if(l[a]&&l[a].get(e))return l[a].get(e)(s,a);const u=Uc(...e);return l[a]||(l[a]=new Map),l[a].set(e,u),u(s,a)};return t.acceptsApiRef=!0,t},Yqe=e=>{typeof e<"u"?Bd.cache&&Bd.cache[e]&&delete Bd.cache[e]:Bd.cache=null},m0=e=>e.columns,Hc=Pt(m0,e=>e.orderedFields),nb=Pt(m0,e=>e.lookup),Gc=Pt(Hc,nb,(e,t)=>e.map(r=>t[r])),Su=Pt(m0,e=>e.columnVisibilityModel),Ha=Pt(Gc,Su,(e,t)=>e.filter(r=>t[r.field]!==!1)),ioe=Pt(Ha,e=>e.map(t=>t.field)),g0=Pt(Ha,e=>{const t=[];let r=0;for(let n=0;n<e.length;n+=1)t.push(r),r+=e[n].computedWidth;return t}),c4=Pt(Ha,g0,(e,t)=>{const r=e.length;return r===0?0:t[r-1]+e[r-1].computedWidth}),ooe=Pt(Gc,e=>e.filter(t=>t.filterable)),Qqe=Pt(Gc,e=>e.reduce((t,r)=>(r.filterable&&(t[r.field]=r),t),{})),$u=e=>e.rows,J2=Pt($u,e=>e.totalRowCount),Zqe=Pt($u,e=>e.loading),Jqe=Pt($u,e=>e.totalTopLevelRowCount),cm=Pt($u,e=>e.dataRowIdToModelLookup),qM=Pt($u,e=>e.dataRowIdToIdLookup),Il=Pt($u,e=>e.tree),e7e=Pt($u,e=>e.groupingName),H8=Pt($u,e=>e.treeDepths),eO=Pt($u,e=>{const t=Object.entries(e.treeDepths);return t.length===0?1:t.filter(([,r])=>r>0).map(([r])=>Number(r)).sort((r,n)=>n-r)[0]+1}),iC=Pt($u,e=>e.dataRowIds),t7e=Pt($u,e=>e==null?void 0:e.additionalRowGroups),KS=Pt(t7e,e=>{var t,r;const n=e==null?void 0:e.pinnedRows;return{bottom:n==null||(t=n.bottom)==null?void 0:t.map(i=>{var o;return{id:i.id,model:(o=i.model)!=null?o:{}}}),top:n==null||(r=n.top)==null?void 0:r.map(i=>{var o;return{id:i.id,model:(o=i.model)!=null?o:{}}})}}),r7e=Pt(KS,e=>{var t,r;return((e==null||(t=e.top)==null?void 0:t.length)||0)+((e==null||(r=e.bottom)==null?void 0:r.length)||0)}),aoe=e=>e.sorting,d4=Pt(aoe,e=>e.sortedRows),h4=Pt(d4,cm,(e,t)=>e.map(r=>{var n;return{id:r,model:(n=t[r])!=null?n:{}}})),_l=Pt(aoe,e=>e.sortModel),n7e=Pt(_l,e=>e.reduce((r,n,i)=>(r[n.field]={sortDirection:n.sort,sortIndex:e.length>1?i+1:void 0},r),{})),tO=e=>e.filter,ea=Pt(tO,e=>e.filterModel);Pt(ea,e=>e.quickFilterValues);const i7e=Pt(tO,e=>e.visibleRowsLookup),soe=Pt(tO,e=>e.filteredRowsLookup);Pt(tO,e=>e.filteredDescendantCountLookup);const yp=Pt(i7e,h4,(e,t)=>t.filter(r=>e[r.id]!==!1)),b1=Pt(yp,e=>e.map(t=>t.id)),o7e=Pt(soe,h4,(e,t)=>t.filter(r=>e[r.id]!==!1)),a7e=Pt(o7e,e=>e.map(t=>t.id)),loe=Pt(yp,Il,eO,(e,t,r)=>r<2?e:e.filter(n=>{var i;return((i=t[n.id])==null?void 0:i.depth)===0})),uoe=Pt(yp,e=>e.length),rO=Pt(loe,e=>e.length),s7e=Pt(ea,nb,(e,t)=>{var r;return(r=e.items)==null?void 0:r.filter(n=>{var i,o;if(!n.field)return!1;const a=t[n.field];if(!(a!=null&&a.filterOperators)||(a==null||(i=a.filterOperators)==null?void 0:i.length)===0)return!1;const s=a.filterOperators.find(l=>l.value===n.operator);return s?!s.InputComponent||n.value!=null&&((o=n.value)==null?void 0:o.toString())!=="":!1})}),l7e=Pt(s7e,e=>e.reduce((r,n)=>(r[n.field]?r[n.field].push(n):r[n.field]=[n],r),{})),f4=e=>e.focus,vc=Pt(f4,e=>e.cell),u7e=Pt(f4,e=>e.columnHeader),KM=Pt(f4,e=>e.columnGroupHeader),p4=e=>e.tabIndex,XM=Pt(p4,e=>e.cell),coe=Pt(p4,e=>e.columnHeader),c7e=Pt(p4,e=>e.columnGroupHeader),m4=e=>e.density,d7e=Pt(m4,e=>e.value),dg=Pt(m4,e=>e.factor),nO=e=>e.columnGrouping,h7e=Pt(nO,e=>{var t;return(t=e==null?void 0:e.unwrappedGroupingModel)!=null?t:{}}),doe=Pt(nO,e=>{var t;return(t=e==null?void 0:e.lookup)!=null?t:{}}),f7e=Pt(nO,e=>{var t;return(t=e==null?void 0:e.headerStructure)!=null?t:[]}),XS=Pt(nO,e=>{var t;return(t=e==null?void 0:e.maxDepth)!=null?t:0}),pN=e=>e.columnMenu;function p7e(e){const{children:t,VirtualScrollerComponent:r,ColumnHeadersProps:n}=e,i=cg(),o=Mt(),a=St(i,Ha),s=St(i,l7e),l=St(i,n7e),u=St(i,g0),d=St(i,coe),c=St(i,XM),h=St(i,c7e),f=St(i,u7e),m=St(i,KM),p=St(i,dg),g=St(i,XS),v=St(i,pN),b=St(i,Su),y=St(i,f7e),x=!(h===null&&d===null&&c===null),[S,w]=P.useState(o.disableVirtualization),_=P.useCallback(()=>{w(!0)},[]),C=P.useCallback(()=>{w(!1)},[]);P.useEffect(()=>{w(o.disableVirtualization)},[o.disableVirtualization]),i.current.unstable_disableVirtualization=_,i.current.unstable_enableVirtualization=C;const E=P.useRef(null),A=P.useRef(null),M=P.useRef(null);i.current.register("private",{columnHeadersContainerElementRef:A,columnHeadersElementRef:E,virtualScrollerRef:M});const I=P.useCallback(O=>{i.current.publishEvent("resize",O)},[i]);return B.jsxs(Wqe,{children:[B.jsx(o.slots.columnHeaders,L({ref:A,innerRef:E,visibleColumns:a,filterColumnLookup:s,sortColumnLookup:l,columnPositions:u,columnHeaderTabIndexState:d,columnGroupHeaderTabIndexState:h,columnHeaderFocus:f,columnGroupHeaderFocus:m,densityFactor:p,headerGroupingMaxDepth:g,columnMenuState:v,columnVisibility:b,columnGroupsHeaderStructure:y,hasOtherElementInTabSequence:x},n)),B.jsx(Xqe,{nonce:o.nonce,disableHeight:o.autoHeight,onResize:I,children:B.jsx(r,{ref:M,disableVirtualization:S})}),t]})}function m7e(){var e;const t=Mt();return t.hideFooter?null:B.jsx(t.slots.footer,L({},(e=t.slotProps)==null?void 0:e.footer))}function hoe(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=hoe(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function zr(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=hoe(e))&&(n&&(n+=" "),n+=t);return n}const ia="auto-generated-group-node-root",g7e=()=>({type:"group",id:ia,depth:-1,groupingField:null,groupingKey:null,isAutoGenerated:!0,children:[],childrenFromPath:{},childrenExpanded:!0,parent:null});function v7e(e,t,r="A row was provided without id in the rows prop:"){if(e==null)throw new Error(["MUI: The data grid component requires all rows to have a unique `id` property.","Alternatively, you can use the `getRowId` prop to specify a custom id for each row.",r,JSON.stringify(t)].join(`
`))}const g4=(e,t,r)=>{const n=t?t(e):e.id;return v7e(n,e,r),n},GA=({rows:e,getRowId:t,loading:r,rowCount:n})=>{const i={type:"full",rows:[]},o={},a={};for(let s=0;s<e.length;s+=1){const l=e[s],u=g4(l,t);o[u]=l,a[u]=u,i.rows.push(u)}return{rowsBeforePartialUpdates:e,loadingPropBeforePartialUpdates:r,rowCountPropBeforePartialUpdates:n,updates:i,dataRowIdToIdLookup:a,dataRowIdToModelLookup:o}},foe=({tree:e,rowCountProp:t=0})=>{const r=e[ia];return Math.max(t,r.children.length+(r.footerId==null?0:1))},poe=({apiRef:e,rowCountProp:t=0,loadingProp:r,previousTree:n,previousTreeDepths:i})=>{const o=e.current.caches.rows,{tree:a,treeDepths:s,dataRowIds:l,groupingName:u}=e.current.applyStrategyProcessor("rowTreeCreation",{previousTree:n,previousTreeDepths:i,updates:o.updates,dataRowIdToIdLookup:o.dataRowIdToIdLookup,dataRowIdToModelLookup:o.dataRowIdToModelLookup}),d=e.current.unstable_applyPipeProcessors("hydrateRows",{tree:a,treeDepths:s,dataRowIdToIdLookup:o.dataRowIdToIdLookup,dataRowIds:l,dataRowIdToModelLookup:o.dataRowIdToModelLookup});return e.current.caches.rows.updates={type:"partial",actions:{insert:[],modify:[],remove:[]},idToActionLookup:{}},L({},d,{totalRowCount:Math.max(t,d.dataRowIds.length),totalTopLevelRowCount:foe({tree:d.tree,rowCountProp:t}),groupingName:u,loading:r})},Ww=e=>e.type==="skeletonRow"||e.type==="footer"||e.type==="group"&&e.isAutoGenerated||e.type==="pinnedRow"&&e.isAutoGenerated,v4=(e,t,r)=>{const n=e[t];if(n.type!=="group")return[];const i=[];for(let o=0;o<n.children.length;o+=1){const a=n.children[o];(!r||!Ww(e[a]))&&i.push(a),i.push(...v4(e,a,r))}return!r&&n.footerId!=null&&i.push(n.footerId),i},y7e=({previousCache:e,getRowId:t,updates:r})=>{var n,i,o;if(e.updates.type==="full")throw new Error("MUI: Unable to prepare a partial update if a full update is not applied yet");const a=new Map;r.forEach(h=>{const f=g4(h,t,"A row was provided without id when calling updateRows():");a.has(f)?a.set(f,L({},a.get(f),h)):a.set(f,h)});const s={type:"partial",actions:{insert:[...(n=e.updates.actions.insert)!=null?n:[]],modify:[...(i=e.updates.actions.modify)!=null?i:[]],remove:[...(o=e.updates.actions.remove)!=null?o:[]]},idToActionLookup:L({},e.updates.idToActionLookup)},l=L({},e.dataRowIdToModelLookup),u=L({},e.dataRowIdToIdLookup),d={insert:{},modify:{},remove:{}};a.forEach((h,f)=>{const m=s.idToActionLookup[f];if(h._action==="delete"){if(m==="remove"||!l[f])return;m!=null&&(d[m][f]=!0),s.actions.remove.push(f),delete l[f],delete u[f];return}const p=l[f];if(p){m==="remove"?(d.remove[f]=!0,s.actions.modify.push(f)):m==null&&s.actions.modify.push(f),l[f]=L({},p,h);return}m==="remove"?(d.remove[f]=!0,s.actions.insert.push(f)):m==null&&s.actions.insert.push(f),l[f]=h,u[f]=f});const c=Object.keys(d);for(let h=0;h<c.length;h+=1){const f=c[h],m=d[f];Object.keys(m).length>0&&(s.actions[f]=s.actions[f].filter(p=>!m[p]))}return{dataRowIdToModelLookup:l,dataRowIdToIdLookup:u,updates:s,rowsBeforePartialUpdates:e.rowsBeforePartialUpdates,loadingPropBeforePartialUpdates:e.loadingPropBeforePartialUpdates,rowCountPropBeforePartialUpdates:e.rowCountPropBeforePartialUpdates}};function moe(e){var t,r;const n=KS(e),i=(n==null||(t=n.top)==null?void 0:t.reduce((a,s)=>(a+=e.current.unstable_getRowHeight(s.id),a),0))||0,o=(n==null||(r=n.bottom)==null?void 0:r.reduce((a,s)=>(a+=e.current.unstable_getRowHeight(s.id),a),0))||0;return{top:i,bottom:o}}function goe(e,t){const r=dg(e);return 2*Math.floor(t*r)}const b7e=wi("div",{name:"MuiDataGrid",slot:"OverlayWrapper",overridesResolver:(e,t)=>t.overlayWrapper})({position:"sticky",top:0,left:0,width:0,height:0,zIndex:4}),x7e=wi("div",{name:"MuiDataGrid",slot:"OverlayWrapperInner",overridesResolver:(e,t)=>t.overlayWrapperInner})({}),w7e=e=>{const{classes:t}=e;return lt({root:["overlayWrapper"],inner:["overlayWrapperInner"]},Er,t)};function S7e(e){var t,r;const n=Ir(),i=Mt(),[o,a]=P.useState(()=>{var d,c;return(d=(c=n.current.getRootDimensions())==null?void 0:c.viewportInnerSize)!=null?d:null}),s=P.useCallback(()=>{var d,c;a((d=(c=n.current.getRootDimensions())==null?void 0:c.viewportInnerSize)!=null?d:null)},[n]);li(()=>n.current.subscribeEvent("viewportInnerSizeChange",s),[n,s]);let l=(t=o==null?void 0:o.height)!=null?t:0;i.autoHeight&&l===0&&(l=goe(n,i.rowHeight));const u=w7e(L({},e,{classes:i.classes}));return o?B.jsx(b7e,{className:zr(u.root),children:B.jsx(x7e,L({className:zr(u.inner),style:{height:l,width:(r=o==null?void 0:o.width)!=null?r:0}},e))}):null}function _7e(){const e=Ir(),t=Mt(),r=St(e,J2),n=St(e,uoe),i=St(e,Zqe),o=!i&&r===0,a=!i&&r>0&&n===0;let s=null;if(o){var l;s=B.jsx(t.slots.noRowsOverlay,L({},(l=t.slotProps)==null?void 0:l.noRowsOverlay))}if(a){var u;s=B.jsx(t.slots.noResultsOverlay,L({},(u=t.slotProps)==null?void 0:u.noResultsOverlay))}if(i){var d;s=B.jsx(t.slots.loadingOverlay,L({},(d=t.slotProps)==null?void 0:d.loadingOverlay))}return s===null?null:B.jsx(S7e,{children:s})}var zu;(function(e){e.Cell="cell",e.Row="row"})(zu||(zu={}));var sn;(function(e){e.Edit="edit",e.View="view"})(sn||(sn={}));var En;(function(e){e.Edit="edit",e.View="view"})(En||(En={}));var Da;(function(e){e.And="and",e.Or="or"})(Da||(Da={}));var Od;(function(e){e.enterKeyDown="enterKeyDown",e.cellDoubleClick="cellDoubleClick",e.printableKeyDown="printableKeyDown",e.deleteKeyDown="deleteKeyDown"})(Od||(Od={}));var cc;(function(e){e.cellFocusOut="cellFocusOut",e.escapeKeyDown="escapeKeyDown",e.enterKeyDown="enterKeyDown",e.tabKeyDown="tabKeyDown",e.shiftTabKeyDown="shiftTabKeyDown"})(cc||(cc={}));var Id;(function(e){e.enterKeyDown="enterKeyDown",e.cellDoubleClick="cellDoubleClick",e.printableKeyDown="printableKeyDown",e.deleteKeyDown="deleteKeyDown"})(Id||(Id={}));var dc;(function(e){e.rowFocusOut="rowFocusOut",e.escapeKeyDown="escapeKeyDown",e.enterKeyDown="enterKeyDown",e.tabKeyDown="tabKeyDown",e.shiftTabKeyDown="shiftTabKeyDown"})(dc||(dc={}));function voe(e){return e.field!==void 0}const C7e=["align","children","colIndex","colDef","cellMode","field","formattedValue","hasFocus","height","isEditable","isSelected","rowId","tabIndex","value","width","className","showRightBorder","extendRowFullWidth","row","colSpan","disableDragEvents","onClick","onDoubleClick","onMouseDown","onMouseUp","onMouseOver","onKeyDown","onKeyUp","onDragEnter","onDragOver"];let pD;function A7e(){return pD===void 0&&document.createElement("div").focus({get preventScroll(){return pD=!0,!1}}),pD}const E7e=e=>{const{align:t,showRightBorder:r,isEditable:n,isSelected:i,classes:o}=e,a={root:["cell",`cell--text${$e(t)}`,n&&"cell--editable",i&&"selected",r&&"cell--withRightBorder","withBorderColor"],content:["cellContent"]};return lt(a,Er,o)},M7e=P.forwardRef((e,t)=>{const{align:r,children:n,colIndex:i,cellMode:o,field:a,formattedValue:s,hasFocus:l,height:u,isEditable:d,isSelected:c,rowId:h,tabIndex:f,value:m,width:p,className:g,showRightBorder:v,colSpan:b,disableDragEvents:y,onClick:x,onDoubleClick:S,onMouseDown:w,onMouseUp:_,onMouseOver:C,onKeyDown:E,onKeyUp:A,onDragEnter:M,onDragOver:I}=e,O=Ie(e,C7e),T=s??m,D=P.useRef(null),N=nn(t,D),k=P.useRef(null),R=Ir(),z=Mt(),j={align:r,showRightBorder:v,isEditable:d,classes:z.classes,isSelected:c},$=E7e(j),U=P.useCallback(Z=>q=>{const ie=R.current.getCellParams(h,a||"");R.current.publishEvent(Z,ie,q),_&&_(q)},[R,a,_,h]),H=P.useCallback(Z=>q=>{const ie=R.current.getCellParams(h,a||"");R.current.publishEvent(Z,ie,q),w&&w(q)},[R,a,w,h]),V=P.useCallback((Z,q)=>ie=>{if(!R.current.getRow(h))return;const he=R.current.getCellParams(h,a||"");R.current.publishEvent(Z,he,ie),q&&q(ie)},[R,a,h]),Q={minWidth:p,maxWidth:p,minHeight:u,maxHeight:u==="auto"?"none":u};P.useEffect(()=>{if(!l||o===sn.Edit)return;const Z=si(R.current.rootElementRef.current);if(D.current&&!D.current.contains(Z.activeElement)){const q=D.current.querySelector('[tabindex="0"]'),ie=k.current||q||D.current;if(A7e())ie.focus({preventScroll:!0});else{const he=R.current.getScrollPosition();ie.focus(),R.current.scroll(he)}}},[l,o,R]);let X=O.onFocus;const J=R.current.getColumn(a).type==="actions",W=()=>{if(n===void 0){const Z=T==null?void 0:T.toString();return B.jsx("div",{className:$.content,title:Z,children:Z})}return P.isValidElement(n)&&J?P.cloneElement(n,{focusElementRef:k}):n},te=y?null:{onDragEnter:V("cellDragEnter",M),onDragOver:V("cellDragOver",I)};return B.jsx("div",L({ref:N,className:zr(g,$.root),role:"cell","data-field":a,"data-colindex":i,"aria-colindex":i+1,"aria-colspan":b,style:Q,tabIndex:(o==="view"||!d)&&!J?f:-1,onClick:V("cellClick",x),onDoubleClick:V("cellDoubleClick",S),onMouseOver:V("cellMouseOver",C),onMouseDown:H("cellMouseDown"),onMouseUp:U("cellMouseUp"),onKeyDown:V("cellKeyDown",E),onKeyUp:V("cellKeyUp",A)},te,O,{onFocus:X,children:W()}))}),P7e=P.memo(M7e),T7e=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","hasFocus","tabIndex"],O7e=e=>{const{classes:t}=e;return lt({root:["booleanCell"]},Er,t)};function I7e(e){const{value:t}=e,r=Ie(e,T7e),n=Ir(),i=Mt(),o={classes:i.classes},a=O7e(o),s=P.useMemo(()=>t?i.slots.booleanCellTrueIcon:i.slots.booleanCellFalseIcon,[i.slots.booleanCellFalseIcon,i.slots.booleanCellTrueIcon,t]);return B.jsx(s,L({fontSize:"small",className:a.root,titleAccess:n.current.getLocaleText(t?"booleanCellTrueLabel":"booleanCellFalseLabel"),"data-value":!!t},r))}const D7e=P.memo(I7e),R7e=e=>Ww(e.rowNode)?"":B.jsx(D7e,L({},e)),k7e=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","className","hasFocus","isValidating","isProcessingProps","error","onValueChange"],L7e=e=>{const{classes:t}=e;return lt({root:["editBooleanCell"]},Er,t)};function N7e(e){var t;const{id:r,value:n,field:i,className:o,hasFocus:a,onValueChange:s}=e,l=Ie(e,k7e),u=Ir(),d=P.useRef(null),c=Oi(),[h,f]=P.useState(n),m=Mt(),p={classes:m.classes},g=L7e(p),v=P.useCallback(async b=>{const y=b.target.checked;s&&await s(b,y),f(y),await u.current.setEditCellValue({id:r,field:i,value:y},b)},[u,i,r,s]);return P.useEffect(()=>{f(n)},[n]),li(()=>{a&&d.current.focus()},[a]),B.jsx("label",L({htmlFor:c,className:zr(g.root,o)},l,{children:B.jsx(m.slots.baseCheckbox,L({id:c,inputRef:d,checked:!!h,onChange:v,size:"small"},(t=m.slotProps)==null?void 0:t.baseCheckbox))}))}const z7e=e=>B.jsx(N7e,L({},e)),B7e=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","hasFocus","inputProps","isValidating","isProcessingProps","onValueChange"],F7e=He(B0)({fontSize:"inherit"}),j7e=e=>{const{classes:t}=e;return lt({root:["editInputCell"]},Er,t)};function U7e(e){const{id:t,value:r,field:n,colDef:i,hasFocus:o,inputProps:a,onValueChange:s}=e,l=Ie(e,B7e),u=i.type==="dateTime",d=Ir(),c=P.useRef(),h=P.useMemo(()=>{let y;r==null?y=null:r instanceof Date?y=r:y=new Date((r??"").toString());let x;return y==null||Number.isNaN(y.getTime())?x="":x=new Date(y.getTime()-y.getTimezoneOffset()*60*1e3).toISOString().substr(0,u?16:10),{parsed:y,formatted:x}},[r,u]),[f,m]=P.useState(h),g={classes:Mt().classes},v=j7e(g),b=P.useCallback(async y=>{const x=y.target.value;let S;if(x==="")S=null;else{const[w,_]=x.split("T"),[C,E,A]=w.split("-");if(S=new Date,S.setFullYear(Number(C),Number(E)-1,Number(A)),S.setHours(0,0,0,0),_){const[M,I]=_.split(":");S.setHours(Number(M),Number(I),0,0)}}s&&await s(y,S),m({parsed:S,formatted:x}),d.current.setEditCellValue({id:t,field:n,value:S},y)},[d,n,t,s]);return P.useEffect(()=>{m(y=>{var x,S;return h.parsed!==y.parsed&&((x=h.parsed)==null?void 0:x.getTime())!==((S=y.parsed)==null?void 0:S.getTime())?h:y})},[h]),li(()=>{o&&c.current.focus()},[o]),B.jsx(F7e,L({inputRef:c,fullWidth:!0,className:v.root,type:u?"datetime-local":"date",inputProps:L({max:u?"9999-12-31T23:59":"9999-12-31"},a),value:f.formatted,onChange:b},l))}const yoe=e=>B.jsx(U7e,L({},e)),$7e=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","hasFocus","isValidating","debounceMs","isProcessingProps","onValueChange"],V7e=e=>{const{classes:t}=e;return lt({root:["editInputCell"]},Er,t)},H7e=He(B0,{name:"MuiDataGrid",slot:"EditInputCell",overridesResolver:(e,t)=>t.editInputCell})(({theme:e})=>L({},e.typography.body2,{padding:"1px 0","& input":{padding:"0 16px",height:"100%"}})),G7e=P.forwardRef((e,t)=>{const r=Mt(),{id:n,value:i,field:o,colDef:a,hasFocus:s,debounceMs:l=200,isProcessingProps:u,onValueChange:d}=e,c=Ie(e,$7e),h=Ir(),f=P.useRef(),[m,p]=P.useState(i),g=V7e(r),v=P.useCallback(async y=>{const x=y.target.value;d&&await d(y,x);const S=h.current.getColumn(o);let w=x;S.valueParser&&(w=S.valueParser(x,h.current.getCellParams(n,o))),p(w),h.current.setEditCellValue({id:n,field:o,value:w,debounceMs:l,unstable_skipValueParser:!0},y)},[h,l,o,n,d]),b=h.current.unstable_getEditCellMeta?h.current.unstable_getEditCellMeta(n,o):{};return P.useEffect(()=>{b.changeReason!=="debouncedSetEditCellValue"&&p(i)},[b.changeReason,i]),li(()=>{s&&f.current.focus()},[s]),B.jsx(H7e,L({ref:t,inputRef:f,className:g.root,ownerState:r,fullWidth:!0,type:a.type==="number"?a.type:"text",value:m??"",onChange:v,endAdornment:u?B.jsx(r.slots.loadIcon,{}):void 0},c))}),W7e=e=>B.jsx(G7e,L({},e)),y4=e=>e==="Escape",q7e=e=>e==="Enter",boe=e=>e==="Tab",xoe=e=>e===" ",K7e=e=>e.indexOf("Arrow")===0,X7e=e=>e==="Home"||e==="End",Y7e=e=>e.indexOf("Page")===0;function woe(e){return e.key.length===1&&e.ctrlKey===!1&&e.metaKey===!1}const b4=e=>X7e(e)||K7e(e)||Y7e(e)||xoe(e),Q7e=e=>!!e.key,Z7e=e=>boe(e)||y4(e);function _m(e){return(e==null?void 0:e.type)==="singleSelect"}function mN(e,t,r){if(t===void 0)return;const n=t.find(i=>{const o=r(i);return String(o)===String(e)});return r(n)}const J7e=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","className","hasFocus","isValidating","isProcessingProps","error","onValueChange","initialOpen","getOptionLabel","getOptionValue"];function eKe(e){return!!e.key}function tKe(e){var t,r,n;const i=Mt(),{id:o,value:a,field:s,row:l,colDef:u,hasFocus:d,error:c,onValueChange:h,initialOpen:f=i.editMode===zu.Cell,getOptionLabel:m,getOptionValue:p}=e,g=Ie(e,J7e),v=Ir(),b=P.useRef(),y=P.useRef(),[x,S]=P.useState(f),_=(r=(((t=i.slotProps)==null?void 0:t.baseSelect)||{}).native)!=null?r:!1;if(li(()=>{if(d){var T;(T=y.current)==null||T.focus()}},[d]),!_m(u))return null;let C;if(typeof(u==null?void 0:u.valueOptions)=="function"?C=u==null?void 0:u.valueOptions({id:o,row:l,field:s}):C=u==null?void 0:u.valueOptions,!C)return null;const E=p||u.getOptionValue,A=m||u.getOptionLabel,M=async T=>{if(!_m(u)||!C)return;S(!1);const D=T.target,N=mN(D.value,C,E);h&&await h(T,N),await v.current.setEditCellValue({id:o,field:s,value:N},T)},I=(T,D)=>{if(i.editMode===zu.Row){S(!1);return}(D==="backdropClick"||y4(T.key))&&v.current.stopCellEditMode({id:o,field:s,ignoreModifications:!0})},O=T=>{eKe(T)&&T.key==="Enter"||S(!0)};return!C||!u?null:B.jsx(i.slots.baseSelect,L({ref:b,inputRef:y,value:a,onChange:M,open:x,onOpen:O,MenuProps:{onClose:I},error:c,native:_,fullWidth:!0},g,(n=i.slotProps)==null?void 0:n.baseSelect,{children:C.map(T=>{var D;const N=E(T);return P.createElement(i.slots.baseSelectOption,L({},((D=i.slotProps)==null?void 0:D.baseSelectOption)||{},{native:_,key:N,value:N}),A(T))})}))}const rKe=e=>B.jsx(tKe,L({},e)),nKe=["open","target","onClickAway","children","position","className","onExited"],iKe=e=>{const{classes:t}=e;return lt({root:["menu"]},Er,t)},oKe=He(ig,{name:"MuiDataGrid",slot:"Menu",overridesResolver:(e,t)=>t.menu})(({theme:e})=>({zIndex:e.zIndex.modal,[`& .${ge.menuList}`]:{outline:0}})),aKe={"bottom-start":"top left","bottom-end":"top right"};function Soe(e){var t;const{open:r,target:n,onClickAway:i,children:o,position:a,className:s,onExited:l}=e,u=Ie(e,nKe),d=Ir(),c=Mt(),h=iKe(c);P.useEffect(()=>{const m=r?"menuOpen":"menuClose";d.current.publishEvent(m,{target:n})},[d,r,n]);const f=m=>p=>{m&&m(),l&&l(p)};return B.jsx(oKe,L({as:c.slots.basePopper,className:zr(s,h.root),ownerState:c,open:r,anchorEl:n,transition:!0,placement:a},u,(t=c.slotProps)==null?void 0:t.basePopper,{children:({TransitionProps:m,placement:p})=>B.jsx(ree,{onClickAway:i,mouseEvent:"onMouseDown",children:B.jsx(NE,L({},m,{style:{transformOrigin:aKe[p]},onExited:f(m==null?void 0:m.onExited),children:B.jsx(SS,{children:o})}))})}))}const sKe=["colDef","id","hasFocus","isEditable","field","value","formattedValue","row","rowNode","cellMode","tabIndex","position","focusElementRef"],lKe=e=>typeof e.getActions=="function";function uKe(e){var t;const{colDef:r,id:n,hasFocus:i,tabIndex:o,position:a="bottom-end",focusElementRef:s}=e,l=Ie(e,sKe),[u,d]=P.useState(-1),[c,h]=P.useState(!1),f=Ir(),m=P.useRef(null),p=P.useRef(null),g=P.useRef(!1),v=P.useRef({}),b=Qa(),y=Oi(),x=Oi(),S=Mt();if(!lKe(r))throw new Error("MUI: Missing the `getActions` property in the `GridColDef`.");const w=r.getActions(f.current.getRowParams(n)),_=w.filter(N=>!N.props.showInMenu),C=w.filter(N=>N.props.showInMenu),E=_.length+(C.length?1:0);P.useLayoutEffect(()=>{i||Object.entries(v.current).forEach(([N,k])=>{k==null||k.stop({},()=>{delete v.current[N]})})},[i]),P.useEffect(()=>{if(u<0||!m.current||u>=m.current.children.length)return;m.current.children[u].focus({preventScroll:!0})},[u]),P.useEffect(()=>{i||(d(-1),g.current=!1)},[i]),P.useImperativeHandle(s,()=>({focus(){g.current||d(0)}}),[]),P.useEffect(()=>{u>=E&&d(E-1)},[u,E]);const A=()=>{h(!0),d(E-1),g.current=!0},M=()=>{h(!1)},I=N=>k=>{v.current[N]=k},O=(N,k)=>R=>{d(N),g.current=!0,k&&k(R)},T=N=>{if(E<=1)return;let k=u;N.key==="ArrowRight"?b.direction==="rtl"?k-=1:k+=1:N.key==="ArrowLeft"&&(b.direction==="rtl"?k+=1:k-=1),!(k<0||k>=E)&&k!==u&&(N.preventDefault(),N.stopPropagation(),d(k))},D=N=>{N.key==="Tab"&&N.preventDefault(),["Tab","Enter","Escape"].includes(N.key)&&M()};return B.jsxs("div",L({role:"menu",ref:m,tabIndex:-1,className:ge.actionsCell,onKeyDown:T},l,{children:[_.map((N,k)=>P.cloneElement(N,{key:k,touchRippleRef:I(k),onClick:O(k,N.props.onClick),tabIndex:u===k?o:-1})),C.length>0&&x&&B.jsx(S.slots.baseIconButton,L({ref:p,id:x,"aria-label":f.current.getLocaleText("actionsCellMore"),"aria-controls":y,"aria-expanded":c?"true":void 0,"aria-haspopup":"true",role:"menuitem",size:"small",onClick:A,touchRippleRef:I(x),tabIndex:u===_.length?o:-1},(t=S.slotProps)==null?void 0:t.baseIconButton,{children:B.jsx(S.slots.moreActionsIcon,{fontSize:"small"})})),C.length>0&&B.jsx(Soe,{onClickAway:M,onClick:M,open:c,target:p.current,position:a,children:B.jsx(NF,{id:y,className:ge.menuList,onKeyDown:D,"aria-labelledby":x,variant:"menu",autoFocusItem:!0,children:C.map((N,k)=>P.cloneElement(N,{key:k}))})})]}))}const cKe=e=>B.jsx(uKe,L({},e)),dKe=["field","align","width","contentWidth"],hKe=e=>{const{align:t,classes:r}=e,n={root:["cell","cellSkeleton",`cell--text${$e(t)}`,"withBorderColor"]};return lt(n,Er,r)};function fKe(e){const{align:t,width:r,contentWidth:n}=e,i=Ie(e,dKe),a={classes:Mt().classes,align:t},s=hKe(a);return B.jsx("div",L({className:s.root,style:{width:r}},i,{children:B.jsx(zSe,{width:`${n}%`})}))}function pKe(e){return e.vars?e.vars.palette.TableCell.border:e.palette.mode==="light"?XT(lr(e.palette.divider,1),.88):KT(lr(e.palette.divider,1),.68)}const mKe=He("div",{name:"MuiDataGrid",slot:"Root",overridesResolver:(e,t)=>[{[`&.${ge.autoHeight}`]:t.autoHeight},{[`&.${ge.aggregationColumnHeader}`]:t.aggregationColumnHeader},{[`&.${ge["aggregationColumnHeader--alignLeft"]}`]:t["aggregationColumnHeader--alignLeft"]},{[`&.${ge["aggregationColumnHeader--alignCenter"]}`]:t["aggregationColumnHeader--alignCenter"]},{[`&.${ge["aggregationColumnHeader--alignRight"]}`]:t["aggregationColumnHeader--alignRight"]},{[`&.${ge.aggregationColumnHeaderLabel}`]:t.aggregationColumnHeaderLabel},{[`&.${ge["root--disableUserSelection"]} .${ge.cell}`]:t["root--disableUserSelection"]},{[`& .${ge.editBooleanCell}`]:t.editBooleanCell},{[`& .${ge["cell--editing"]}`]:t["cell--editing"]},{[`& .${ge["cell--textCenter"]}`]:t["cell--textCenter"]},{[`& .${ge["cell--textLeft"]}`]:t["cell--textLeft"]},{[`& .${ge["cell--textRight"]}`]:t["cell--textRight"]},{[`& .${ge["cell--withRenderer"]}`]:t["cell--withRenderer"]},{[`& .${ge.cell}`]:t.cell},{[`& .${ge["cell--rangeTop"]}`]:t["cell--rangeTop"]},{[`& .${ge["cell--rangeBottom"]}`]:t["cell--rangeBottom"]},{[`& .${ge["cell--rangeLeft"]}`]:t["cell--rangeLeft"]},{[`& .${ge["cell--rangeRight"]}`]:t["cell--rangeRight"]},{[`& .${ge.cellContent}`]:t.cellContent},{[`& .${ge.cellCheckbox}`]:t.cellCheckbox},{[`& .${ge.cellSkeleton}`]:t.cellSkeleton},{[`& .${ge.checkboxInput}`]:t.checkboxInput},{[`& .${ge["columnHeader--alignCenter"]}`]:t["columnHeader--alignCenter"]},{[`& .${ge["columnHeader--alignLeft"]}`]:t["columnHeader--alignLeft"]},{[`& .${ge["columnHeader--alignRight"]}`]:t["columnHeader--alignRight"]},{[`& .${ge["columnHeader--dragging"]}`]:t["columnHeader--dragging"]},{[`& .${ge["columnHeader--moving"]}`]:t["columnHeader--moving"]},{[`& .${ge["columnHeader--numeric"]}`]:t["columnHeader--numeric"]},{[`& .${ge["columnHeader--sortable"]}`]:t["columnHeader--sortable"]},{[`& .${ge["columnHeader--sorted"]}`]:t["columnHeader--sorted"]},{[`& .${ge.columnHeader}`]:t.columnHeader},{[`& .${ge.columnHeaderCheckbox}`]:t.columnHeaderCheckbox},{[`& .${ge.columnHeaderDraggableContainer}`]:t.columnHeaderDraggableContainer},{[`& .${ge.columnHeaderTitleContainer}`]:t.columnHeaderTitleContainer},{[`& .${ge["columnSeparator--resizable"]}`]:t["columnSeparator--resizable"]},{[`& .${ge["columnSeparator--resizing"]}`]:t["columnSeparator--resizing"]},{[`& .${ge.columnSeparator}`]:t.columnSeparator},{[`& .${ge.filterIcon}`]:t.filterIcon},{[`& .${ge.iconSeparator}`]:t.iconSeparator},{[`& .${ge.menuIcon}`]:t.menuIcon},{[`& .${ge.menuIconButton}`]:t.menuIconButton},{[`& .${ge.menuOpen}`]:t.menuOpen},{[`& .${ge.menuList}`]:t.menuList},{[`& .${ge["row--editable"]}`]:t["row--editable"]},{[`& .${ge["row--editing"]}`]:t["row--editing"]},{[`& .${ge["row--dragging"]}`]:t["row--dragging"]},{[`& .${ge.row}`]:t.row},{[`& .${ge.rowReorderCellPlaceholder}`]:t.rowReorderCellPlaceholder},{[`& .${ge.rowReorderCell}`]:t.rowReorderCell},{[`& .${ge["rowReorderCell--draggable"]}`]:t["rowReorderCell--draggable"]},{[`& .${ge.sortIcon}`]:t.sortIcon},{[`& .${ge.withBorderColor}`]:t.withBorderColor},{[`& .${ge.treeDataGroupingCell}`]:t.treeDataGroupingCell},{[`& .${ge.treeDataGroupingCellToggle}`]:t.treeDataGroupingCellToggle},{[`& .${ge.detailPanelToggleCell}`]:t.detailPanelToggleCell},{[`& .${ge["detailPanelToggleCell--expanded"]}`]:t["detailPanelToggleCell--expanded"]},t.root]})(({theme:e})=>{const t=pKe(e),r=e.shape.borderRadius;return L({"--unstable_DataGrid-radius":typeof r=="number"?`${r}px`:r,"--unstable_DataGrid-headWeight":e.typography.fontWeightMedium,"--unstable_DataGrid-overlayBackground":e.vars?`rgba(${e.vars.palette.background.defaultChannel} / ${e.vars.palette.action.disabledOpacity})`:lr(e.palette.background.default,e.palette.action.disabledOpacity),flex:1,boxSizing:"border-box",position:"relative",borderWidth:"1px",borderStyle:"solid",borderColor:t,borderRadius:"var(--unstable_DataGrid-radius)",color:(e.vars||e).palette.text.primary},e.typography.body2,{outline:"none",height:"100%",display:"flex",flexDirection:"column",overflowAnchor:"none",[`&.${ge.autoHeight}`]:{height:"auto",[`& .${ge["row--lastVisible"]} .${ge.cell}`]:{borderBottomColor:"transparent"}},[`& .${ge["virtualScrollerContent--overflowed"]} .${ge["row--lastVisible"]} .${ge.cell}`]:{borderBottomColor:"transparent"},[`& .${ge.columnHeader}, & .${ge.cell}`]:{WebkitTapHighlightColor:"transparent",lineHeight:null,padding:"0 10px",boxSizing:"border-box"},[`& .${ge.columnHeader}:focus-within, & .${ge.cell}:focus-within`]:{outline:`solid ${e.vars?`rgba(${e.vars.palette.primary.mainChannel} / 0.5)`:lr(e.palette.primary.main,.5)} 1px`,outlineWidth:1,outlineOffset:-1},[`& .${ge.columnHeader}:focus, & .${ge.cell}:focus`]:{outline:`solid ${e.palette.primary.main} 1px`},[`& .${ge.columnHeaderCheckbox}, & .${ge.cellCheckbox}`]:{padding:0,justifyContent:"center",alignItems:"center"},[`& .${ge.columnHeader}`]:{position:"relative",display:"flex",alignItems:"center"},[`& .${ge["columnHeader--sorted"]} .${ge.iconButtonContainer}, & .${ge["columnHeader--filtered"]} .${ge.iconButtonContainer}`]:{visibility:"visible",width:"auto"},[`& .${ge.columnHeader}:not(.${ge["columnHeader--sorted"]}) .${ge.sortIcon}`]:{opacity:0,transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.shorter})},[`& .${ge.columnHeader}:not(.${ge["columnHeader--sorted"]}):hover .${ge.sortIcon}`]:{opacity:.5},[`& .${ge.columnHeaderTitleContainer}`]:{display:"flex",alignItems:"center",minWidth:0,flex:1,whiteSpace:"nowrap",overflow:"hidden"},[`& .${ge.columnHeaderTitleContainerContent}`]:{overflow:"hidden",display:"flex",alignItems:"center"},[`& .${ge["columnHeader--filledGroup"]} .${ge.columnHeaderTitleContainer}`]:{borderBottomWidth:"1px",borderBottomStyle:"solid",boxSizing:"border-box"},[`& .${ge["columnHeader--filledGroup"]}.${ge["columnHeader--showColumnBorder"]} .${ge.columnHeaderTitleContainer}`]:{borderBottom:"none"},[`& .${ge["columnHeader--filledGroup"]}.${ge["columnHeader--showColumnBorder"]}`]:{borderBottomWidth:"1px",borderBottomStyle:"solid",boxSizing:"border-box"},[`& .${ge.sortIcon}, & .${ge.filterIcon}`]:{fontSize:"inherit"},[`& .${ge["columnHeader--sortable"]}`]:{cursor:"pointer"},[`& .${ge["columnHeader--alignCenter"]} .${ge.columnHeaderTitleContainer}`]:{justifyContent:"center"},[`& .${ge["columnHeader--alignRight"]} .${ge.columnHeaderDraggableContainer}, & .${ge["columnHeader--alignRight"]} .${ge.columnHeaderTitleContainer}`]:{flexDirection:"row-reverse"},[`& .${ge["columnHeader--alignCenter"]} .${ge.menuIcon}, & .${ge["columnHeader--alignRight"]} .${ge.menuIcon}`]:{marginRight:"auto",marginLeft:-6},[`& .${ge["columnHeader--alignRight"]} .${ge.menuIcon}, & .${ge["columnHeader--alignRight"]} .${ge.menuIcon}`]:{marginRight:"auto",marginLeft:-10},[`& .${ge["columnHeader--moving"]}`]:{backgroundColor:(e.vars||e).palette.action.hover},[`& .${ge.columnSeparator}`]:{visibility:"hidden",position:"absolute",zIndex:100,display:"flex",flexDirection:"column",justifyContent:"center",color:t},[`& .${ge.columnHeaders}:hover .${ge.columnSeparator}, .${ge["columnSeparator--resizing"]}`]:{visibility:"visible",width:"auto"},[`& .${ge["columnSeparator--sideLeft"]}`]:{left:-12},[`& .${ge["columnSeparator--sideRight"]}`]:{right:-12},[`& .${ge["columnSeparator--resizable"]}`]:{cursor:"col-resize",touchAction:"none","&:hover":{color:(e.vars||e).palette.text.primary,"@media (hover: none)":{color:t}},[`&.${ge["columnSeparator--resizing"]}`]:{color:(e.vars||e).palette.text.primary},"& svg":{pointerEvents:"none"}},[`& .${ge.iconSeparator}`]:{color:"inherit"},[`& .${ge.menuIcon}`]:{width:0,visibility:"hidden",fontSize:20,marginRight:-10,display:"flex",alignItems:"center"},[`& .${ge.columnHeader}:hover`]:{[`& .${ge.iconButtonContainer}`]:{visibility:"visible",width:"auto"},[`& .${ge.menuIcon}`]:{width:"auto",visibility:"visible"}},[`.${ge.menuOpen}`]:{visibility:"visible",width:"auto"},[`& .${ge.row}`]:{display:"flex",width:"fit-content",breakInside:"avoid","&:hover, &.Mui-hovered":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},"&.Mui-selected":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:lr(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover, &.Mui-hovered":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity+e.palette.action.hoverOpacity})`:lr(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:lr(e.palette.primary.main,e.palette.action.selectedOpacity)}}}},[`& .${ge.cell}`]:{display:"flex",alignItems:"center",borderBottom:"1px solid","&.Mui-selected":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:lr(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover, &.Mui-hovered":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity+e.palette.action.hoverOpacity})`:lr(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:lr(e.palette.primary.main,e.palette.action.selectedOpacity)}}}},[`&.${ge["root--disableUserSelection"]} .${ge.cell}`]:{userSelect:"none"},[`& .${ge.row}:not(.${ge["row--dynamicHeight"]}) > .${ge.cell}`]:{overflow:"hidden",whiteSpace:"nowrap"},[`& .${ge.cellContent}`]:{overflow:"hidden",textOverflow:"ellipsis"},[`& .${ge.cell}.${ge["cell--editing"]}`]:{padding:1,display:"flex",boxShadow:e.shadows[2],backgroundColor:(e.vars||e).palette.background.paper,"&:focus-within":{outline:`solid ${(e.vars||e).palette.primary.main} 1px`,outlineOffset:"-1px"}},[`& .${ge["row--editing"]}`]:{boxShadow:e.shadows[2]},[`& .${ge["row--editing"]} .${ge.cell}`]:{boxShadow:e.shadows[0],backgroundColor:(e.vars||e).palette.background.paper},[`& .${ge.editBooleanCell}`]:{display:"flex",height:"100%",width:"100%",alignItems:"center",justifyContent:"center"},[`& .${ge.booleanCell}[data-value="true"]`]:{color:(e.vars||e).palette.text.secondary},[`& .${ge.booleanCell}[data-value="false"]`]:{color:(e.vars||e).palette.text.disabled},[`& .${ge.actionsCell}`]:{display:"inline-flex",alignItems:"center",gridGap:e.spacing(1)},[`& .${ge.rowReorderCell}`]:{display:"inline-flex",flex:1,alignItems:"center",justifyContent:"center",opacity:(e.vars||e).palette.action.disabledOpacity},[`& .${ge["rowReorderCell--draggable"]}`]:{cursor:"move",opacity:1},[`& .${ge.rowReorderCellContainer}`]:{padding:0,alignItems:"stretch"},[`.${ge.withBorderColor}`]:{borderColor:t},[`& .${ge["cell--withRightBorder"]}`]:{borderRightWidth:"1px",borderRightStyle:"solid"},[`& .${ge["columnHeader--withRightBorder"]}`]:{borderRightWidth:"1px",borderRightStyle:"solid"},[`& .${ge["cell--textLeft"]}`]:{justifyContent:"flex-start"},[`& .${ge["cell--textRight"]}`]:{justifyContent:"flex-end"},[`& .${ge["cell--textCenter"]}`]:{justifyContent:"center"},[`& .${ge.columnHeaderDraggableContainer}`]:{display:"flex",width:"100%",height:"100%"},[`& .${ge.rowReorderCellPlaceholder}`]:{display:"none"},[`& .${ge["columnHeader--dragging"]}, & .${ge["row--dragging"]}`]:{background:(e.vars||e).palette.background.paper,padding:"0 12px",borderRadius:"var(--unstable_DataGrid-radius)",opacity:(e.vars||e).palette.action.disabledOpacity},[`& .${ge["row--dragging"]}`]:{background:(e.vars||e).palette.background.paper,padding:"0 12px",borderRadius:"var(--unstable_DataGrid-radius)",opacity:(e.vars||e).palette.action.disabledOpacity,[`& .${ge.rowReorderCellPlaceholder}`]:{display:"flex"}},[`& .${ge.treeDataGroupingCell}`]:{display:"flex",alignItems:"center",width:"100%"},[`& .${ge.treeDataGroupingCellToggle}`]:{flex:"0 0 28px",alignSelf:"stretch",marginRight:e.spacing(2)},[`& .${ge.groupingCriteriaCell}`]:{display:"flex",alignItems:"center",width:"100%"},[`& .${ge.groupingCriteriaCellToggle}`]:{flex:"0 0 28px",alignSelf:"stretch",marginRight:e.spacing(2)}})}),gKe=["children","className"],vKe=e=>{const{autoHeight:t,density:r,classes:n}=e,i={root:["root",t&&"autoHeight",`root--density${$e(r)}`,"withBorderColor"]};return lt(i,Er,n)},yKe=P.forwardRef(function(t,r){const n=Mt(),{children:i,className:o}=t,a=Ie(t,gKe),s=cg(),l=St(s,Ha),u=St(s,J2),d=St(s,d7e),c=St(s,XS),h=P.useRef(null),f=nn(h,r),m=St(s,r7e),p=L({},n,{density:d}),g=vKe(p);s.current.register("public",{rootElementRef:h});const[v,b]=P.useState(!1);return li(()=>{b(!0)},[]),li(()=>{v&&s.current.updateGridDimensionsRef()},[s,v]),v?B.jsx(mKe,L({ref:f,className:zr(o,g.root),ownerState:p,role:"grid","aria-colcount":l.length,"aria-rowcount":c+1+m+u,"aria-multiselectable":!n.disableMultipleRowSelection,"aria-label":n["aria-label"],"aria-labelledby":n["aria-labelledby"]},a,{children:i})):null}),bKe=["className"],xKe=e=>{const{classes:t}=e;return lt({root:["footerContainer","withBorderColor"]},Er,t)},wKe=wi("div",{name:"MuiDataGrid",slot:"FooterContainer",overridesResolver:(e,t)=>t.footerContainer})({display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:52,borderTop:"1px solid"}),SKe=P.forwardRef(function(t,r){const{className:n}=t,i=Ie(t,bKe),o=Mt(),a=xKe(o);return B.jsx(wKe,L({ref:r,className:zr(a.root,n),ownerState:o},i))}),_Ke=["className"],CKe=e=>{const{classes:t}=e;return lt({root:["overlay"]},Er,t)},AKe=wi("div",{name:"MuiDataGrid",slot:"Overlay",overridesResolver:(e,t)=>t.overlay})({width:"100%",height:"100%",display:"flex",alignSelf:"center",alignItems:"center",justifyContent:"center",backgroundColor:"var(--unstable_DataGrid-overlayBackground)"}),x4=P.forwardRef(function(t,r){const{className:n}=t,i=Ie(t,_Ke),o=Mt(),a=CKe(o);return B.jsx(AKe,L({ref:r,className:zr(a.root,n),ownerState:o},i))}),EKe=["className"],MKe=e=>{const{classes:t}=e;return lt({root:["iconButtonContainer"]},Er,t)},PKe=wi("div",{name:"MuiDataGrid",slot:"IconButtonContainer",overridesResolver:(e,t)=>t.iconButtonContainer})(()=>({display:"flex",visibility:"hidden",width:0})),_oe=P.forwardRef(function(t,r){const{className:n}=t,i=Ie(t,EKe),o=Mt(),a=MKe(o);return B.jsx(PKe,L({ref:r,className:zr(a.root,n),ownerState:o},i))}),TKe=e=>{const{classes:t}=e;return lt({icon:["sortIcon"]},Er,t)};function OKe(e,t,r,n){let i;const o={};return t==="asc"?i=e.columnSortedAscendingIcon:t==="desc"?i=e.columnSortedDescendingIcon:(i=e.columnUnsortedIcon,o.sortingOrder=n),i?B.jsx(i,L({fontSize:"small",className:r},o)):null}function IKe(e){var t;const{direction:r,index:n,sortingOrder:i}=e,o=Ir(),a=Mt(),s=L({},e,{classes:a.classes}),l=TKe(s),u=OKe(a.slots,r,l.icon,i);if(!u)return null;const d=B.jsx(a.slots.baseIconButton,L({tabIndex:-1,"aria-label":o.current.getLocaleText("columnHeaderSortIconLabel"),title:o.current.getLocaleText("columnHeaderSortIconLabel"),size:"small"},(t=a.slotProps)==null?void 0:t.baseIconButton,{children:u}));return B.jsxs(_oe,{children:[n!=null&&B.jsx(bee,{badgeContent:n,color:"default",children:d}),n==null&&d]})}const DKe=P.memo(IKe),RKe=e=>{const{classes:t,open:r}=e;return lt({root:["menuIcon",r&&"menuOpen"],button:["menuIconButton"]},Er,t)},kKe=P.memo(e=>{var t;const{colDef:r,open:n,columnMenuId:i,columnMenuButtonId:o,iconButtonRef:a}=e,s=Ir(),l=Mt(),u=L({},e,{classes:l.classes}),d=RKe(u),c=P.useCallback(h=>{h.preventDefault(),h.stopPropagation(),s.current.toggleColumnMenu(r.field)},[s,r.field]);return B.jsx("div",{className:d.root,children:B.jsx(l.slots.baseIconButton,L({ref:a,tabIndex:-1,className:d.button,"aria-label":s.current.getLocaleText("columnMenuLabel"),title:s.current.getLocaleText("columnMenuLabel"),size:"small",onClick:c,"aria-expanded":n?"true":void 0,"aria-haspopup":"true","aria-controls":i,id:o},(t=l.slotProps)==null?void 0:t.baseIconButton,{children:B.jsx(l.slots.columnMenuIcon,{fontSize:"small"})}))})});function LKe({columnMenuId:e,columnMenuButtonId:t,ContentComponent:r,contentComponentProps:n,field:i,open:o,target:a,onExited:s}){const l=Ir(),u=l.current.getColumn(i),d=P.useCallback(c=>{c.stopPropagation(),l.current.hideColumnMenu()},[l]);return a?B.jsx(Soe,{placement:`bottom-${u.align==="right"?"start":"end"}`,open:o,target:a,onClickAway:d,onExited:s,children:B.jsx(r,L({colDef:u,hideMenu:d,open:o,id:e,labelledby:t},n))}):null}function NKe(e){return e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth}function zKe(e,t){return e.closest(`.${t}`)}function w4(e){return e.replace(/["\\]/g,"\\$&")}function BKe(e,t){return e.querySelector(`[role="columnheader"][data-field="${w4(t)}"]`)}function Coe(e){return`.${ge.row}[data-id="${w4(String(e))}"]`}function FKe(e,t){return e.querySelector(Coe(t))}function jKe(e,{id:t,field:r}){const n=Coe(t),i=`.${ge.cell}[data-field="${w4(r)}"]`,o=`${n} ${i}`;return e.querySelector(o)}const UKe=["className"],$Ke=e=>{const{classes:t}=e;return lt({root:["columnHeaderTitle"]},Er,t)},VKe=wi("div",{name:"MuiDataGrid",slot:"ColumnHeaderTitle",overridesResolver:(e,t)=>t.columnHeaderTitle})({textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontWeight:"var(--unstable_DataGrid-headWeight)"}),HKe=P.forwardRef(function(t,r){const{className:n}=t,i=Ie(t,UKe),o=Mt(),a=$Ke(o);return B.jsx(VKe,L({ref:r,className:zr(a.root,n),ownerState:o},i))});function GKe(e){var t;const{label:r,description:n,columnWidth:i}=e,o=Mt(),a=P.useRef(null),[s,l]=P.useState("");return P.useEffect(()=>{if(!n&&a&&a.current){const u=NKe(a.current);l(u?r:"")}},[a,i,n,r]),B.jsx(o.slots.baseTooltip,L({title:n||s},(t=o.slotProps)==null?void 0:t.baseTooltip,{children:B.jsx(HKe,{ref:a,children:r})}))}const WKe=["resizable","resizing","height","side"];var gN;(function(e){e.Left="left",e.Right="right"})(gN||(gN={}));const qKe=e=>{const{resizable:t,resizing:r,classes:n,side:i}=e,o={root:["columnSeparator",t&&"columnSeparator--resizable",r&&"columnSeparator--resizing",i&&`columnSeparator--side${$e(i)}`],icon:["iconSeparator"]};return lt(o,Er,n)};function KKe(e){const{height:t,side:r=gN.Right}=e,n=Ie(e,WKe),i=Mt(),o=L({},e,{side:r,classes:i.classes}),a=qKe(o),s=P.useCallback(l=>{l.preventDefault(),l.stopPropagation()},[]);return B.jsx("div",L({className:a.root,style:{minHeight:t,opacity:i.showColumnVerticalBorder?0:1}},n,{onClick:s,children:B.jsx(i.slots.columnResizeIcon,{className:a.icon})}))}const XKe=P.memo(KKe),YKe=["classes","columnMenuOpen","colIndex","height","isResizing","sortDirection","hasFocus","tabIndex","separatorSide","isDraggable","headerComponent","description","elementId","width","columnMenuIconButton","columnMenu","columnTitleIconButtons","headerClassName","label","resizable","draggableContainerProps","columnHeaderSeparatorProps"],Aoe=P.forwardRef(function(t,r){const{classes:n,columnMenuOpen:i,colIndex:o,height:a,isResizing:s,sortDirection:l,hasFocus:u,tabIndex:d,separatorSide:c,isDraggable:h,headerComponent:f,description:m,width:p,columnMenuIconButton:g=null,columnMenu:v=null,columnTitleIconButtons:b=null,headerClassName:y,label:x,resizable:S,draggableContainerProps:w,columnHeaderSeparatorProps:_}=t,C=Ie(t,YKe),E=cg(),A=Mt(),M=P.useRef(null),[I,O]=P.useState(i),T=nn(M,r);let D="none";return l!=null&&(D=l==="asc"?"ascending":"descending"),P.useEffect(()=>{I||O(i)},[I,i]),P.useLayoutEffect(()=>{const N=E.current.state.columnMenu;if(u&&!N.open){const R=M.current.querySelector('[tabindex="0"]')||M.current;R==null||R.focus(),E.current.columnHeadersContainerElementRef.current.scrollLeft=0}},[E,u]),B.jsxs("div",L({ref:T,className:zr(n.root,y),style:{height:a,width:p,minWidth:p,maxWidth:p},role:"columnheader",tabIndex:d,"aria-colindex":o+1,"aria-sort":D,"aria-label":f==null?x:void 0},C,{children:[B.jsxs("div",L({className:n.draggableContainer,draggable:h},w,{children:[B.jsxs("div",{className:n.titleContainer,children:[B.jsx("div",{className:n.titleContainerContent,children:f!==void 0?f:B.jsx(GKe,{label:x,description:m,columnWidth:p})}),b]}),g]})),B.jsx(XKe,L({resizable:!A.disableColumnResize&&!!S,resizing:s,height:a,side:c},_)),v]}))}),QKe=e=>{const{colDef:t,classes:r,isDragging:n,sortDirection:i,showRightBorder:o,filterItemsCounter:a}=e,s=i!=null,l=a!=null&&a>0,u=t.type==="number",d={root:["columnHeader",t.headerAlign==="left"&&"columnHeader--alignLeft",t.headerAlign==="center"&&"columnHeader--alignCenter",t.headerAlign==="right"&&"columnHeader--alignRight",t.sortable&&"columnHeader--sortable",n&&"columnHeader--moving",s&&"columnHeader--sorted",l&&"columnHeader--filtered",u&&"columnHeader--numeric","withBorderColor",o&&"columnHeader--withRightBorder"],draggableContainer:["columnHeaderDraggableContainer"],titleContainer:["columnHeaderTitleContainer"],titleContainerContent:["columnHeaderTitleContainerContent"]};return lt(d,Er,r)};function ZKe(e){var t,r,n,i;const{colDef:o,columnMenuOpen:a,colIndex:s,headerHeight:l,isResizing:u,sortDirection:d,sortIndex:c,filterItemsCounter:h,hasFocus:f,tabIndex:m,disableReorder:p,separatorSide:g}=e,v=cg(),b=Mt(),y=P.useRef(null),x=Oi(),S=Oi(),w=P.useRef(null),[_,C]=P.useState(a),E=P.useMemo(()=>!b.disableColumnReorder&&!p&&!o.disableReorder,[b.disableColumnReorder,p,o.disableReorder]);let A;o.renderHeader&&(A=o.renderHeader(v.current.getColumnHeaderParams(o.field)));const M=L({},e,{classes:b.classes,showRightBorder:b.showColumnVerticalBorder}),I=QKe(M),O=P.useCallback(V=>Q=>{Q.currentTarget.contains(Q.target)&&v.current.publishEvent(V,v.current.getColumnHeaderParams(o.field),Q)},[v,o.field]),T=P.useMemo(()=>({onClick:O("columnHeaderClick"),onDoubleClick:O("columnHeaderDoubleClick"),onMouseOver:O("columnHeaderOver"),onMouseOut:O("columnHeaderOut"),onMouseEnter:O("columnHeaderEnter"),onMouseLeave:O("columnHeaderLeave"),onKeyDown:O("columnHeaderKeyDown"),onFocus:O("columnHeaderFocus"),onBlur:O("columnHeaderBlur")}),[O]),D=P.useMemo(()=>E?{onDragStart:O("columnHeaderDragStart"),onDragEnter:O("columnHeaderDragEnter"),onDragOver:O("columnHeaderDragOver"),onDragEnd:O("columnHeaderDragEnd")}:{},[E,O]),N=P.useMemo(()=>({onMouseDown:O("columnSeparatorMouseDown")}),[O]);P.useEffect(()=>{_||C(a)},[_,a]);const k=P.useCallback(()=>{C(!1)},[]),R=!b.disableColumnMenu&&!o.disableColumnMenu&&B.jsx(kKe,{colDef:o,columnMenuId:x,columnMenuButtonId:S,open:_,iconButtonRef:w}),z=B.jsx(LKe,{columnMenuId:x,columnMenuButtonId:S,field:o.field,open:a,target:w.current,ContentComponent:b.slots.columnMenu,contentComponentProps:(t=b.slotProps)==null?void 0:t.columnMenu,onExited:k}),j=(r=o.sortingOrder)!=null?r:b.sortingOrder,$=B.jsxs(P.Fragment,{children:[!b.disableColumnFilter&&B.jsx(b.slots.columnHeaderFilterIconButton,L({field:o.field,counter:h},(n=b.slotProps)==null?void 0:n.columnHeaderFilterIconButton)),o.sortable&&!o.hideSortIcons&&B.jsx(DKe,{direction:d,index:c,sortingOrder:j})]});P.useLayoutEffect(()=>{const V=v.current.state.columnMenu;if(f&&!V.open){const X=y.current.querySelector('[tabindex="0"]')||y.current;X==null||X.focus(),v.current.columnHeadersContainerElementRef.current.scrollLeft=0}},[v,f]);const U=typeof o.headerClassName=="function"?o.headerClassName({field:o.field,colDef:o}):o.headerClassName,H=(i=o.headerName)!=null?i:o.field;return B.jsx(Aoe,L({ref:y,classes:I,columnMenuOpen:a,colIndex:s,height:l,isResizing:u,sortDirection:d,hasFocus:f,tabIndex:m,separatorSide:g,isDraggable:E,headerComponent:A,description:o.description,elementId:o.field,width:o.computedWidth,columnMenuIconButton:R,columnTitleIconButtons:$,headerClassName:U,label:H,resizable:!b.disableColumnResize&&!!o.resizable,"data-field":o.field,columnMenu:z,draggableContainerProps:D,columnHeaderSeparatorProps:N},T))}const YM=e=>e.preferencePanel;var tp;(function(e){e.filters="filters",e.columns="columns"})(tp||(tp={}));const JKe=e=>{const{classes:t}=e;return lt({icon:["filterIcon"]},Er,t)};function eXe(e){var t,r;const{counter:n,field:i,onClick:o}=e,a=Ir(),s=Mt(),l=L({},e,{classes:s.classes}),u=JKe(l),d=P.useCallback(h=>{h.preventDefault(),h.stopPropagation();const{open:f,openedPanelValue:m}=YM(a.current.state);f&&m===tp.filters?a.current.hideFilterPanel():a.current.showFilterPanel(),o&&o(a.current.getColumnHeaderParams(i),h)},[a,i,o]);if(!n)return null;const c=B.jsx(s.slots.baseIconButton,L({onClick:d,color:"default","aria-label":a.current.getLocaleText("columnHeaderFiltersLabel"),size:"small",tabIndex:-1},(t=s.slotProps)==null?void 0:t.baseIconButton,{children:B.jsx(s.slots.columnFilteredIcon,{className:u.icon,fontSize:"small"})}));return B.jsx(s.slots.baseTooltip,L({title:a.current.getLocaleText("columnHeaderFiltersTooltipActive")(n),enterDelay:1e3},(r=s.slotProps)==null?void 0:r.baseTooltip,{children:B.jsxs(_oe,{children:[n>1&&B.jsx(bee,{badgeContent:n,color:"default",children:c}),n===1&&c]})}))}const tXe=["field","id","value","formattedValue","row","rowNode","colDef","isEditable","cellMode","hasFocus","tabIndex","api"],rXe=e=>{const{classes:t}=e;return lt({root:["checkboxInput"]},Er,t)},nXe=P.forwardRef(function(t,r){var n;const{field:i,id:o,value:a,rowNode:s,hasFocus:l,tabIndex:u}=t,d=Ie(t,tXe),c=Ir(),h=Mt(),f={classes:h.classes},m=rXe(f),p=P.useRef(null),g=P.useRef(),v=nn(p,r),b=c.current.getCellElement(o,i),y=_=>{const C={value:_.target.checked,id:o};c.current.publishEvent("rowSelectionCheckboxChange",C,_)};P.useLayoutEffect(()=>{u===0&&b&&(b.tabIndex=-1)},[b,u]),P.useEffect(()=>{if(l){var _;const C=(_=p.current)==null?void 0:_.querySelector("input");C==null||C.focus({preventScroll:!0})}else g.current&&g.current.stop({})},[l]);const x=P.useCallback(_=>{xoe(_.key)&&_.stopPropagation()},[]);if(s.type==="footer"||s.type==="pinnedRow")return null;const S=c.current.isRowSelectable(o),w=c.current.getLocaleText(a?"checkboxSelectionUnselectRow":"checkboxSelectionSelectRow");return B.jsx(h.slots.baseCheckbox,L({ref:v,tabIndex:u,checked:a,onChange:y,className:m.root,inputProps:{"aria-label":w},onKeyDown:x,disabled:!S,touchRippleRef:g},(n=h.slotProps)==null?void 0:n.baseCheckbox,d))}),iXe=nXe,Cl=e=>e.rowSelection,oXe=Pt(Cl,e=>e.length),aXe=Pt(Cl,cm,(e,t)=>new Map(e.map(r=>[r,t[r]]))),QM=Pt(Cl,e=>e.reduce((t,r)=>(t[r]=r,t),{})),G8=1e3;class sXe{constructor(t=G8){this.timeouts=new Map,this.cleanupTimeout=G8,this.cleanupTimeout=t}register(t,r,n){this.timeouts||(this.timeouts=new Map);const i=setTimeout(()=>{typeof r=="function"&&r(),this.timeouts.delete(n.cleanupToken)},this.cleanupTimeout);this.timeouts.set(n.cleanupToken,i)}unregister(t){const r=this.timeouts.get(t.cleanupToken);r&&(this.timeouts.delete(t.cleanupToken),clearTimeout(r))}reset(){this.timeouts&&(this.timeouts.forEach((t,r)=>{this.unregister({cleanupToken:r})}),this.timeouts=void 0)}}class lXe{constructor(){this.registry=new FinalizationRegistry(t=>{typeof t=="function"&&t()})}register(t,r,n){this.registry.register(t,r,n)}unregister(t){this.registry.unregister(t)}reset(){}}var Du;(function(e){e.DataGrid="DataGrid",e.DataGridPro="DataGridPro"})(Du||(Du={}));class uXe{}function cXe(e){let t=0;return function(n,i,o,a){e.registry===null&&(e.registry=typeof FinalizationRegistry<"u"?new lXe:new sXe);const[s]=P.useState(new uXe),l=P.useRef(null),u=P.useRef();u.current=o;const d=P.useRef(null);if(!l.current&&u.current){const c=(h,f,m)=>{if(!f.defaultMuiPrevented){var p;(p=u.current)==null||p.call(u,h,f,m)}};l.current=n.current.subscribeEvent(i,c,a),t+=1,d.current={cleanupToken:t},e.registry.register(s,()=>{var h;(h=l.current)==null||h.call(l),l.current=null,d.current=null},d.current)}else!u.current&&l.current&&(l.current(),l.current=null,d.current&&(e.registry.unregister(d.current),d.current=null));P.useEffect(()=>{if(!l.current&&u.current){const c=(h,f,m)=>{if(!f.defaultMuiPrevented){var p;(p=u.current)==null||p.call(u,h,f,m)}};l.current=n.current.subscribeEvent(i,c,a)}return d.current&&e.registry&&(e.registry.unregister(d.current),d.current=null),()=>{var c;(c=l.current)==null||c.call(l),l.current=null}},[n,i,a])}}const dXe={registry:null},Lt=cXe(dXe),hXe={isFirst:!0};function Kn(e,t,r){Lt(e,t,r,hXe)}function wr(e,t,r){const n=P.useRef(t),[i]=P.useState(Object.keys(t)),o=P.useCallback(()=>{e.current&&i.forEach(a=>{e.current.hasOwnProperty(a)||e.current.register(r,{[a]:(...s)=>{const l=n.current[a];return l(...s)}})})},[i,e,r]);P.useEffect(()=>{n.current=t},[t]),P.useEffect(()=>{o()},[o]),o()}function ma(e,t){const r=P.useRef(null);if(r.current)return r.current;const n=e.current.getLogger(t);return r.current=n,n}function fXe(e){return typeof e=="number"}function Eoe(e){return typeof e=="function"}function S4(e){return typeof e=="object"&&e!==null}function pXe(){try{const e="__some_random_key_you_are_not_going_to_use__";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch{return!1}}function WA(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}const v0=(e,t,r)=>Math.max(t,Math.min(r,e));function Cm(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;if(Array.isArray(e)){const i=e.length;if(i!==t.length)return!1;for(let o=0;o<i;o+=1)if(!Cm(e[o],t[o]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;const i=Array.from(e.entries());for(let o=0;o<i.length;o+=1)if(!t.has(i[o][0]))return!1;for(let o=0;o<i.length;o+=1){const a=i[o];if(!Cm(a[1],t.get(a[0])))return!1}return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;const i=Array.from(e.entries());for(let o=0;o<i.length;o+=1)if(!t.has(i[o][0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){const i=e.length;if(i!==t.length)return!1;for(let o=0;o<i;o+=1)if(e[o]!==t[o])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();const r=Object.keys(e),n=r.length;if(n!==Object.keys(t).length)return!1;for(let i=0;i<n;i+=1)if(!Object.prototype.hasOwnProperty.call(t,r[i]))return!1;for(let i=0;i<n;i+=1){const o=r[i];if(!Cm(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function mXe(e){return()=>{let t=e+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}}function gXe(e,t,r){const n=mXe(e);return()=>t+(r-t)*n()}function Moe(e){return typeof structuredClone=="function"?structuredClone(e):JSON.parse(JSON.stringify(e))}const vXe=(e,t,r,n,i)=>{const o=ma(e,"useNativeEventListener"),[a,s]=P.useState(!1),l=P.useRef(n),u=P.useCallback(d=>l.current&&l.current(d),[]);P.useEffect(()=>{l.current=n},[n]),P.useEffect(()=>{let d;if(Eoe(t)?d=t():d=t&&t.current?t.current:null,d&&r&&!a){o.debug(`Binding native ${r} event`),d.addEventListener(r,u,i);const c=d;s(!0);const h=()=>{o.debug(`Clearing native ${r} event`),c.removeEventListener(r,u,i)};e.current.subscribeEvent("unmount",h)}},[t,u,r,a,o,i,e])},YS=e=>{const t=P.useRef(!0);t.current&&(t.current=!1,e())},yXe=100,bXe=e=>e?0:100,Poe=(e,t)=>t>0&&e>0?Math.ceil(e/t):0;od(["MUI: the 'rowCount' prop is undefined while using paginationMode='server'","For more detail, see http://mui.com/components/data-grid/pagination/#basic-implementation"],"error");const Toe=e=>({page:0,pageSize:e?0:100}),xXe=(e,t=0)=>t===0?e:Math.max(Math.min(e,t-1),0),Ooe=(e,t)=>{if(t===Du.DataGrid&&e>yXe)throw new Error(["MUI: `pageSize` cannot exceed 100 in the MIT version of the DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock this feature."].join(`
`))},Ioe=e=>e.pagination,Pl=Pt(Ioe,e=>e.paginationModel),wXe=Pt(Pl,e=>e.page),SXe=Pt(Pl,e=>e.pageSize);Pt(Pl,rO,(e,t)=>Poe(t,e.pageSize));const _4=Pt(Pl,Il,eO,yp,loe,(e,t,r,n,i)=>{const o=i.length,a=Math.min(e.pageSize*e.page,o-1),s=Math.min(a+e.pageSize-1,o-1);if(a===-1||s===-1)return null;if(r<2)return{firstRowIndex:a,lastRowIndex:s};const l=i[a],u=s-a+1,d=n.findIndex(f=>f.id===l.id);let c=d,h=0;for(;c<n.length&&h<=u;){const f=n[c],m=t[f.id].depth;(h<u||m>0)&&(c+=1),m===0&&(h+=1)}return{firstRowIndex:d,lastRowIndex:c-1}}),_Xe=Pt(yp,_4,(e,t)=>t?e.slice(t.firstRowIndex,t.lastRowIndex+1):[]),Doe=Pt(b1,_4,(e,t)=>t?e.slice(t.firstRowIndex,t.lastRowIndex+1):[]),CXe=["field","colDef"],AXe=e=>{const{classes:t}=e;return lt({root:["checkboxInput"]},Er,t)},EXe=P.forwardRef(function(t,r){var n;const i=Ie(t,CXe),[,o]=P.useState(!1),a=Ir(),s=Mt(),l={classes:s.classes},u=AXe(l),d=St(a,coe),c=St(a,Cl),h=St(a,b1),f=St(a,Doe),m=P.useMemo(()=>typeof s.isRowSelectable!="function"?c:c.filter(C=>a.current.getRow(C)?s.isRowSelectable(a.current.getRowParams(C)):!1),[a,s.isRowSelectable,c]),p=P.useMemo(()=>(!s.pagination||!s.checkboxSelectionVisibleOnly?h:f).reduce((E,A)=>(E[A]=!0,E),{}),[s.pagination,s.checkboxSelectionVisibleOnly,f,h]),g=P.useMemo(()=>m.filter(C=>p[C]).length,[m,p]),v=g>0&&g<Object.keys(p).length,b=g>0,y=C=>{const E={value:C.target.checked};a.current.publishEvent("headerSelectionCheckboxChange",E)},x=d!==null&&d.field===t.field?0:-1;P.useLayoutEffect(()=>{const C=a.current.getColumnHeaderElement(t.field);x===0&&C&&(C.tabIndex=-1)},[x,a,t.field]);const S=P.useCallback(C=>{C.key===" "&&a.current.publishEvent("headerSelectionCheckboxChange",{value:!b})},[a,b]),w=P.useCallback(()=>{o(C=>!C)},[]);P.useEffect(()=>a.current.subscribeEvent("rowSelectionChange",w),[a,w]);const _=a.current.getLocaleText(b?"checkboxSelectionUnselectAllRows":"checkboxSelectionSelectAllRows");return B.jsx(s.slots.baseCheckbox,L({ref:r,indeterminate:v,checked:b,onChange:y,className:u.root,inputProps:{"aria-label":_},tabIndex:x,onKeyDown:S},(n=s.slotProps)==null?void 0:n.baseCheckbox,i))}),W8=_r(B.jsx("path",{d:"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"}),"ArrowUpward"),q8=_r(B.jsx("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward"),K8=_r(B.jsx("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"KeyboardArrowRight"),X8=_r(B.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),MXe=_r(B.jsx("path",{d:"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"}),"FilterList"),Y8=_r(B.jsx("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61z"}),"FilterAlt"),PXe=_r(B.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");_r(B.jsx("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu");_r(B.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle");const TXe=_r(B.jsx("path",{d:"M6 5H3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm14 0h-3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm-7 0h-3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1z"}),"ColumnIcon"),OXe=_r(B.jsx("path",{d:"M11 19V5h2v14z"}),"Separator"),IXe=_r(B.jsx("path",{d:"M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z"}),"ViewHeadline"),DXe=_r(B.jsx("path",{d:"M21,8H3V4h18V8z M21,10H3v4h18V10z M21,16H3v4h18V16z"}),"TableRows"),RXe=_r(B.jsx("path",{d:"M4 18h17v-6H4v6zM4 5v6h17V5H4z"}),"ViewStream"),kXe=_r(B.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"TripleDotsVertical"),mD=_r(B.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),Q8=_r(B.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add"),LXe=_r(B.jsx("path",{d:"M19 13H5v-2h14v2z"}),"Remove"),NXe=_r(B.jsx("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"}),"Load"),Z8=_r(B.jsx("path",{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"Drag"),zXe=_r(B.jsx("path",{d:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"}),"SaveAlt"),BXe=_r(B.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),FXe=_r(B.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert"),jXe=_r(B.jsx("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}),"VisibilityOff"),UXe=_r(B.jsx("g",{children:B.jsx("path",{d:"M14.67,5v14H9.33V5H14.67z M15.67,19H21V5h-5.33V19z M8.33,19V5H3v14H8.33z"})}),"ViewColumn"),$Xe=_r(B.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");_r(B.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");const VXe=_r(B.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"Delete"),HXe=["hideMenu","colDef","id","labelledby","className","children","open"],GXe=He(NF)(()=>({minWidth:248})),WXe=P.forwardRef(function(t,r){const{hideMenu:n,id:i,labelledby:o,className:a,children:s,open:l}=t,u=Ie(t,HXe),d=P.useCallback(c=>{boe(c.key)&&c.preventDefault(),Z7e(c.key)&&n(c)},[n]);return B.jsx(GXe,L({id:i,ref:r,className:zr(ge.menuList,a),"aria-labelledby":o,onKeyDown:d,autoFocus:l},u,{children:s}))}),qXe=["displayOrder"],gD=e=>{const t=e.split("");return t[0]=t[0].toLowerCase(),t.join("")},KXe=e=>{const t=cg(),{defaultComponents:r,defaultComponentsProps:n,components:i={},componentsProps:o={},hideMenu:a,colDef:s,addDividers:l=!0}=e,u=P.useMemo(()=>L({},r,i),[r,i]),d=P.useMemo(()=>{if(!o||Object.keys(o).length===0)return n;const f=L({},o);return Object.entries(n).forEach(([m,p])=>{f[m]=L({},p,o[m]||{})}),f},[n,o]),c=t.current.unstable_applyPipeProcessors("columnMenu",[],e.colDef),h=P.useMemo(()=>{const f=Object.keys(r);return Object.keys(i).filter(m=>!f.includes(m))},[i,r]);return P.useMemo(()=>{const p=Array.from(new Set([...c,...h])).filter(g=>u[g]!=null).sort((g,v)=>{const b=d[gD(g)],y=d[gD(v)],x=Number.isFinite(b==null?void 0:b.displayOrder)?b.displayOrder:100,S=Number.isFinite(y==null?void 0:y.displayOrder)?y.displayOrder:100;return x-S});return p.reduce((g,v,b)=>{let y={colDef:s,onClick:a};const x=d[gD(v)];if(x){const S=Ie(x,qXe);y=L({},y,S)}return l&&b!==p.length-1?[...g,[u[v],y],[c1e,{}]]:[...g,[u[v],y]]},[])},[l,s,c,a,u,d,h])};function XXe(e){const{colDef:t,onClick:r}=e,n=Ir(),i=Mt(),s=Ha(n).filter(u=>u.disableColumnMenu!==!0).length===1,l=P.useCallback(u=>{s||(n.current.setColumnVisibility(t.field,!1),r(u))},[n,t.field,r,s]);return i.disableColumnSelector||t.hideable===!1?null:B.jsxs(Fc,{onClick:l,disabled:s,children:[B.jsx(ey,{children:B.jsx(i.slots.columnMenuHideIcon,{fontSize:"small"})}),B.jsx(ty,{children:n.current.getLocaleText("columnMenuHideColumn")})]})}function YXe(e){const{onClick:t}=e,r=Ir(),n=Mt(),i=P.useCallback(o=>{t(o),r.current.showPreferences(tp.columns)},[r,t]);return n.disableColumnSelector?null:B.jsxs(Fc,{onClick:i,children:[B.jsx(ey,{children:B.jsx(n.slots.columnMenuManageColumnsIcon,{fontSize:"small"})}),B.jsx(ty,{children:r.current.getLocaleText("columnMenuManageColumns")})]})}function QXe(e){return B.jsxs(P.Fragment,{children:[B.jsx(XXe,L({},e)),B.jsx(YXe,L({},e))]})}function ZXe(e){const{colDef:t,onClick:r}=e,n=Ir(),i=Mt(),o=P.useCallback(a=>{r(a),n.current.showFilterPanel(t.field)},[n,t.field,r]);return i.disableColumnFilter||!t.filterable?null:B.jsxs(Fc,{onClick:o,children:[B.jsx(ey,{children:B.jsx(i.slots.columnMenuFilterIcon,{fontSize:"small"})}),B.jsx(ty,{children:n.current.getLocaleText("columnMenuFilter")})]})}function JXe(e){var t;const{colDef:r,onClick:n}=e,i=Ir(),o=St(i,_l),a=Mt(),s=P.useMemo(()=>{if(!r)return null;const d=o.find(c=>c.field===r.field);return d==null?void 0:d.sort},[r,o]),l=(t=r.sortingOrder)!=null?t:a.sortingOrder,u=P.useCallback(d=>{n(d);const c=d.currentTarget.getAttribute("data-value")||null;i.current.sortColumn(r,c===s?null:c)},[i,r,n,s]);return!r||!r.sortable||!l.some(d=>!!d)?null:B.jsxs(P.Fragment,{children:[l.includes("asc")&&s!=="asc"?B.jsxs(Fc,{onClick:u,"data-value":"asc",children:[B.jsx(ey,{children:B.jsx(a.slots.columnMenuSortAscendingIcon,{fontSize:"small"})}),B.jsx(ty,{children:i.current.getLocaleText("columnMenuSortAsc")})]}):null,l.includes("desc")&&s!=="desc"?B.jsxs(Fc,{onClick:u,"data-value":"desc",children:[B.jsx(ey,{children:B.jsx(a.slots.columnMenuSortDescendingIcon,{fontSize:"small"})}),B.jsx(ty,{children:i.current.getLocaleText("columnMenuSortDesc")})]}):null,l.includes(null)&&s!=null?B.jsxs(Fc,{onClick:u,children:[B.jsx(ey,{}),B.jsx(ty,{children:i.current.getLocaleText("columnMenuUnsort")})]}):null]})}const eYe=["defaultComponents","defaultComponentsProps","components","componentsProps"],tYe={ColumnMenuSortItem:JXe,ColumnMenuFilterItem:ZXe,ColumnMenuColumnsItem:QXe},rYe={columnMenuSortItem:{displayOrder:10},columnMenuFilterItem:{displayOrder:20},columnMenuColumnsItem:{displayOrder:30}},nYe=P.forwardRef(function(t,r){const{defaultComponents:n,defaultComponentsProps:i,components:o,componentsProps:a}=t,s=Ie(t,eYe),l=KXe(L({},s,{defaultComponents:n,defaultComponentsProps:i,components:o,componentsProps:a}));return B.jsx(WXe,L({ref:r},s,{children:l.map(([u,d],c)=>B.jsx(u,L({},d),c))}))}),iYe=P.forwardRef(function(t,r){return B.jsx(nYe,L({},t,{ref:r,defaultComponents:tYe,defaultComponentsProps:rYe}))}),oYe=["className"],aYe=e=>{const{classes:t}=e;return lt({root:["panelContent"]},Er,t)},sYe=wi("div",{name:"MuiDataGrid",slot:"PanelContent",overridesResolver:(e,t)=>t.panelContent})({display:"flex",flexDirection:"column",overflow:"auto",flex:"1 1",maxHeight:400});function Roe(e){const{className:t}=e,r=Ie(e,oYe),n=Mt(),i=aYe(n);return B.jsx(sYe,L({className:zr(t,i.root),ownerState:n},r))}const lYe=["className"],uYe=e=>{const{classes:t}=e;return lt({root:["panelFooter"]},Er,t)},cYe=wi("div",{name:"MuiDataGrid",slot:"PanelFooter",overridesResolver:(e,t)=>t.panelFooter})(({theme:e})=>({padding:e.spacing(.5),display:"flex",justifyContent:"space-between"}));function koe(e){const{className:t}=e,r=Ie(e,lYe),n=Mt(),i=uYe(n);return B.jsx(cYe,L({className:zr(t,i.root),ownerState:n},r))}const dYe=["className"],hYe=e=>{const{classes:t}=e;return lt({root:["panelHeader"]},Er,t)},fYe=wi("div",{name:"MuiDataGrid",slot:"PanelHeader",overridesResolver:(e,t)=>t.panelHeader})(({theme:e})=>({padding:e.spacing(1)}));function pYe(e){const{className:t}=e,r=Ie(e,dYe),n=Mt(),i=hYe(n);return B.jsx(fYe,L({className:zr(t,i.root),ownerState:n},r))}const mYe=["className","slotProps"],gYe=e=>{const{classes:t}=e;return lt({root:["panelWrapper"]},Er,t)},vYe=He("div",{name:"MuiDataGrid",slot:"PanelWrapper",overridesResolver:(e,t)=>t.panelWrapper})({display:"flex",flexDirection:"column",flex:1,"&:focus":{outline:0}}),yYe=()=>!0,Loe=P.forwardRef(function(t,r){const{className:n,slotProps:i={}}=t,o=Ie(t,mYe),a=Mt(),s=gYe(a);return B.jsx(nee,L({open:!0,disableEnforceFocus:!0,isEnabled:yYe},i.TrapFocus,{children:B.jsx(vYe,L({ref:r,tabIndex:-1,className:zr(n,s.root),ownerState:a},o))}))}),bYe=!1,xYe=["sort","searchPredicate","autoFocusSearchField","disableHideAllButton","disableShowAllButton"],wYe=e=>{const{classes:t}=e;return lt({root:["columnsPanel"],columnsPanelRow:["columnsPanelRow"]},Er,t)},SYe=He("div",{name:"MuiDataGrid",slot:"ColumnsPanel",overridesResolver:(e,t)=>t.columnsPanel})({padding:"8px 0px 8px 8px"}),_Ye=He("div",{name:"MuiDataGrid",slot:"ColumnsPanelRow",overridesResolver:(e,t)=>t.columnsPanelRow})(({theme:e})=>({display:"flex",justifyContent:"space-between",padding:"1px 8px 1px 7px",[`& .${Jo.root}`]:{marginRight:e.spacing(.5)}})),CYe=He(cf)({justifyContent:"flex-end"}),J8=new Intl.Collator,AYe=(e,t)=>(e.headerName||e.field).toLowerCase().indexOf(t)>-1;function EYe(e){var t,r,n;const i=Ir(),o=P.useRef(null),a=St(i,Gc),s=St(i,Su),l=Mt(),[u,d]=P.useState(""),c=wYe(l),{sort:h,searchPredicate:f=AYe,autoFocusSearchField:m=!0,disableHideAllButton:p=!1,disableShowAllButton:g=!1}=e,v=Ie(e,xYe),b=P.useMemo(()=>{switch(h){case"asc":return[...a].sort((A,M)=>J8.compare(A.headerName||A.field,M.headerName||M.field));case"desc":return[...a].sort((A,M)=>-J8.compare(A.headerName||A.field,M.headerName||M.field));default:return a}},[a,h]),y=A=>{const{name:M}=A.target;i.current.setColumnVisibility(M,s[M]===!1)},x=P.useCallback(A=>{const M=Su(i),I=L({},M);return a.forEach(O=>{O.hideable&&(A?delete I[O.field]:I[O.field]=!1)}),i.current.setColumnVisibilityModel(I)},[i,a]),S=P.useCallback(A=>{d(A.target.value)},[]),w=P.useMemo(()=>{if(!u)return b;const A=u.toLowerCase();return b.filter(M=>f(M,A))},[b,u,f]),_=P.useRef(null);P.useEffect(()=>{m?o.current.focus():_.current&&typeof _.current.focus=="function"&&_.current.focus()},[m]);let C=!1;const E=A=>C===!1&&A.hideable!==!1?(C=!0,!0):!1;return B.jsxs(Loe,L({},v,{children:[B.jsx(pYe,{children:B.jsx(l.slots.baseTextField,L({label:i.current.getLocaleText("columnsPanelTextFieldLabel"),placeholder:i.current.getLocaleText("columnsPanelTextFieldPlaceholder"),inputRef:o,value:u,onChange:S,variant:"standard",fullWidth:!0},(t=l.slotProps)==null?void 0:t.baseTextField))}),B.jsx(Roe,{children:B.jsx(SYe,{className:c.root,ownerState:l,children:w.map(A=>{var M;return B.jsxs(_Ye,{className:c.columnsPanelRow,ownerState:l,children:[B.jsx(P1e,{control:B.jsx(l.slots.baseSwitch,L({disabled:A.hideable===!1,checked:s[A.field]!==!1,onClick:y,name:A.field,size:"small",inputRef:E(A)?_:void 0},(M=l.slotProps)==null?void 0:M.baseSwitch)),label:A.headerName||A.field}),!l.disableColumnReorder&&bYe&&B.jsx(CYe,{draggable:!0,"aria-label":i.current.getLocaleText("columnsPanelDragIconLabel"),title:i.current.getLocaleText("columnsPanelDragIconLabel"),size:"small",disabled:!0,children:B.jsx(l.slots.columnReorderIcon,{})})]},A.field)})})}),g&&p?null:B.jsxs(koe,{children:[p?B.jsx("span",{}):B.jsx(l.slots.baseButton,L({onClick:()=>x(!1)},(r=l.slotProps)==null?void 0:r.baseButton,{disabled:p,children:i.current.getLocaleText("columnsPanelHideAllButton")})),g?null:B.jsx(l.slots.baseButton,L({onClick:()=>x(!0)},(n=l.slotProps)==null?void 0:n.baseButton,{disabled:g,children:i.current.getLocaleText("columnsPanelShowAllButton")}))]})]}))}const MYe=["children","className","classes"],PYe=cr("MuiDataGrid",["panel","paper"]),TYe=He(ig,{name:"MuiDataGrid",slot:"Panel",overridesResolver:(e,t)=>t.panel})(({theme:e})=>({zIndex:e.zIndex.modal})),OYe=He(SS,{name:"MuiDataGrid",slot:"Paper",overridesResolver:(e,t)=>t.paper})(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,minWidth:300,maxHeight:450,display:"flex"})),IYe=P.forwardRef((e,t)=>{const{children:r,className:n}=e,i=Ie(e,MYe),o=Ir(),a=Mt(),s=PYe,[l,u]=P.useState(!1),d=P.useCallback(()=>{o.current.hidePreferences()},[o]),c=P.useCallback(p=>{y4(p.key)&&o.current.hidePreferences()},[o]),h=P.useMemo(()=>[{name:"flip",enabled:!1},{name:"isPlaced",enabled:!0,phase:"main",fn:()=>{u(!0)},effect:()=>()=>{u(!1)}}],[]),[f,m]=P.useState(null);return P.useEffect(()=>{var p,g;const v=(p=o.current.rootElementRef)==null||(g=p.current)==null?void 0:g.querySelector(`.${ge.columnHeaders}`);v&&m(v)},[o]),f?B.jsx(TYe,L({ref:t,placement:"bottom-start",className:zr(n,s.panel),ownerState:a,anchorEl:f,modifiers:h},i,{children:B.jsx(ree,{mouseEvent:"onMouseUp",onClickAway:d,children:B.jsx(OYe,{className:s.paper,ownerState:a,elevation:8,onKeyDown:c,children:l&&r})})})):null}),DYe=P.forwardRef(function(t,r){var n,i,o;const a=Ir(),s=St(a,Gc),l=Mt(),u=St(a,YM),d=a.current.unstable_applyPipeProcessors("preferencePanel",null,(n=u.openedPanelValue)!=null?n:tp.filters);return B.jsx(l.slots.panel,L({ref:r,as:l.slots.basePopper,open:s.length>0&&u.open},(i=l.slotProps)==null?void 0:i.panel,t,(o=l.slotProps)==null?void 0:o.basePopper,{children:d}))}),RYe=["item","hasMultipleFilters","deleteFilter","applyFilterChanges","multiFilterOperator","showMultiFilterOperators","disableMultiFilterOperator","applyMultiFilterOperatorChanges","focusElementRef","logicOperators","columnsSort","filterColumns","deleteIconProps","logicOperatorInputProps","operatorInputProps","columnInputProps","valueInputProps","children"],kYe=["InputComponentProps"],LYe=e=>{const{classes:t}=e;return lt({root:["filterForm"],deleteIcon:["filterFormDeleteIcon"],logicOperatorInput:["filterFormLogicOperatorInput"],columnInput:["filterFormColumnInput"],operatorInput:["filterFormOperatorInput"],valueInput:["filterFormValueInput"]},Er,t)},NYe=He("div",{name:"MuiDataGrid",slot:"FilterForm",overridesResolver:(e,t)=>t.filterForm})(({theme:e})=>({display:"flex",padding:e.spacing(1)})),zYe=He("div",{name:"MuiDataGrid",slot:"FilterFormDeleteIcon",overridesResolver:(e,t)=>t.filterFormDeleteIcon})(({theme:e})=>({flexShrink:0,justifyContent:"flex-end",marginRight:e.spacing(.5),marginBottom:e.spacing(.2)})),BYe=He("div",{name:"MuiDataGrid",slot:"FilterFormLogicOperatorInput",overridesResolver:(e,t)=>t.filterFormLogicOperatorInput})({minWidth:55,marginRight:5,justifyContent:"end"}),FYe=He("div",{name:"MuiDataGrid",slot:"FilterFormColumnInput",overridesResolver:(e,t)=>t.filterFormColumnInput})({width:150}),jYe=He("div",{name:"MuiDataGrid",slot:"FilterFormOperatorInput",overridesResolver:(e,t)=>t.filterFormOperatorInput})({width:120}),UYe=He("div",{name:"MuiDataGrid",slot:"FilterFormValueInput",overridesResolver:(e,t)=>t.filterFormValueInput})({width:190}),$Ye=e=>{switch(e){case Da.And:return"filterPanelOperatorAnd";case Da.Or:return"filterPanelOperatorOr";default:throw new Error("MUI: Invalid `logicOperator` property in the `GridFilterPanel`.")}},Yb=e=>e.headerName||e.field,e9=new Intl.Collator,VYe=P.forwardRef(function(t,r){var n,i,o,a,s,l,u,d,c,h;const{item:f,hasMultipleFilters:m,deleteFilter:p,applyFilterChanges:g,multiFilterOperator:v,showMultiFilterOperators:b,disableMultiFilterOperator:y,applyMultiFilterOperatorChanges:x,focusElementRef:S,logicOperators:w=[Da.And,Da.Or],columnsSort:_,filterColumns:C,deleteIconProps:E={},logicOperatorInputProps:A={},operatorInputProps:M={},columnInputProps:I={},valueInputProps:O={}}=t,T=Ie(t,RYe),D=Ir(),N=St(D,ooe),k=St(D,ea),R=Oi(),z=Oi(),j=Oi(),$=Oi(),U=Mt(),H=LYe(U),V=P.useRef(null),Q=P.useRef(null),X=m&&w.length>0,ne=((n=U.slotProps)==null?void 0:n.baseFormControl)||{},W=(o=(((i=U.slotProps)==null?void 0:i.baseSelect)||{}).native)!=null?o:!0,te=((a=U.slotProps)==null?void 0:a.baseInputLabel)||{},Z=((s=U.slotProps)==null?void 0:s.baseSelectOption)||{},{InputComponentProps:q}=O,ie=Ie(O,kYe),he=P.useMemo(()=>{if(C===void 0||typeof C!="function")return N;const K=C({field:f.field,columns:N,currentFilters:(k==null?void 0:k.items)||[]});return N.filter(G=>K.includes(G.field))},[C,k==null?void 0:k.items,N,f.field]),ae=P.useMemo(()=>{switch(_){case"asc":return he.sort((K,G)=>e9.compare(Yb(K),Yb(G)));case"desc":return he.sort((K,G)=>-e9.compare(Yb(K),Yb(G)));default:return he}},[he,_]),be=f.field?D.current.getColumn(f.field):null,ye=P.useMemo(()=>{var K;return!f.operator||!be?null:(K=be.filterOperators)==null?void 0:K.find(G=>G.value===f.operator)},[f,be]),Se=P.useCallback(K=>{const G=K.target.value,de=D.current.getColumn(G);if(de.field===be.field)return;const Ee=de.filterOperators.find(Le=>Le.value===f.operator)||de.filterOperators[0],Me=!Ee.InputComponent||Ee.InputComponent!==(ye==null?void 0:ye.InputComponent);g(L({},f,{field:G,operator:Ee.value,value:Me?void 0:f.value}))},[D,g,f,be,ye]),me=P.useCallback(K=>{const G=K.target.value,de=be==null?void 0:be.filterOperators.find(Me=>Me.value===G),Ee=!(de!=null&&de.InputComponent)||(de==null?void 0:de.InputComponent)!==(ye==null?void 0:ye.InputComponent);g(L({},f,{operator:G,value:Ee?void 0:f.value}))},[g,f,be,ye]),Pe=P.useCallback(K=>{const G=K.target.value===Da.And.toString()?Da.And:Da.Or;x(G)},[x]),Ae=()=>{U.disableMultipleColumnsFiltering?f.value===void 0?p(f):g(L({},f,{value:void 0})):p(f)};return P.useImperativeHandle(S,()=>({focus:()=>{if(ye!=null&&ye.InputComponent){var K;V==null||(K=V.current)==null||K.focus()}else Q.current.focus()}}),[ye]),B.jsxs(NYe,L({ref:r,className:H.root,"data-id":f.id,ownerState:U},T,{children:[B.jsx(zYe,L({variant:"standard",as:U.slots.baseFormControl},ne,E,{className:zr(H.deleteIcon,ne.className,E.className),ownerState:U,children:B.jsx(U.slots.baseIconButton,L({"aria-label":D.current.getLocaleText("filterPanelDeleteIconLabel"),title:D.current.getLocaleText("filterPanelDeleteIconLabel"),onClick:Ae,size:"small"},(l=U.slotProps)==null?void 0:l.baseIconButton,{children:B.jsx(U.slots.filterPanelDeleteIcon,{fontSize:"small"})}))})),B.jsx(BYe,L({variant:"standard",as:U.slots.baseFormControl},ne,A,{sx:L({display:X?"flex":"none",visibility:b?"visible":"hidden"},ne.sx||{},A.sx||{}),className:zr(H.logicOperatorInput,ne.className,A.className),ownerState:U,children:B.jsx(U.slots.baseSelect,L({inputProps:{"aria-label":D.current.getLocaleText("filterPanelLogicOperator")},value:v,onChange:Pe,disabled:!!y||w.length===1,native:W},(u=U.slotProps)==null?void 0:u.baseSelect,{children:w.map(K=>P.createElement(U.slots.baseSelectOption,L({},Z,{native:W,key:K.toString(),value:K.toString()}),D.current.getLocaleText($Ye(K))))}))})),B.jsxs(FYe,L({variant:"standard",as:U.slots.baseFormControl},ne,I,{className:zr(H.columnInput,ne.className,I.className),ownerState:U,children:[B.jsx(U.slots.baseInputLabel,L({},te,{htmlFor:R,id:z,children:D.current.getLocaleText("filterPanelColumns")})),B.jsx(U.slots.baseSelect,L({labelId:z,id:R,label:D.current.getLocaleText("filterPanelColumns"),value:f.field||"",onChange:Se,native:W},(d=U.slotProps)==null?void 0:d.baseSelect,{children:ae.map(K=>P.createElement(U.slots.baseSelectOption,L({},Z,{native:W,key:K.field,value:K.field}),Yb(K)))}))]})),B.jsxs(jYe,L({variant:"standard",as:U.slots.baseFormControl},ne,M,{className:zr(H.operatorInput,ne.className,M.className),ownerState:U,children:[B.jsx(U.slots.baseInputLabel,L({},te,{htmlFor:j,id:$,children:D.current.getLocaleText("filterPanelOperator")})),B.jsx(U.slots.baseSelect,L({labelId:$,label:D.current.getLocaleText("filterPanelOperator"),id:j,value:f.operator,onChange:me,native:W,inputRef:Q},(c=U.slotProps)==null?void 0:c.baseSelect,{children:be==null||(h=be.filterOperators)==null?void 0:h.map(K=>P.createElement(U.slots.baseSelectOption,L({},Z,{native:W,key:K.value,value:K.value}),K.label||D.current.getLocaleText(`filterOperator${$e(K.value)}`)))}))]})),B.jsx(UYe,L({variant:"standard",as:U.slots.baseFormControl},ne,ie,{className:zr(H.valueInput,ne.className,ie.className),ownerState:U,children:ye!=null&&ye.InputComponent?B.jsx(ye.InputComponent,L({apiRef:D,item:f,applyValue:g,focusElementRef:V},ye.InputComponentProps,q)):null}))]}))}),HYe=["item","applyValue","type","apiRef","focusElementRef"],GYe=500;function yc(e){var t,r;const{item:n,applyValue:i,type:o,apiRef:a,focusElementRef:s}=e,l=Ie(e,HYe),u=P.useRef(),[d,c]=P.useState((t=n.value)!=null?t:""),[h,f]=P.useState(!1),m=Oi(),p=Mt(),g=P.useCallback(b=>{const{value:y}=b.target;clearTimeout(u.current),c(String(y)),f(!0),u.current=setTimeout(()=>{i(L({},n,{value:y})),f(!1)},GYe)},[i,n]);P.useEffect(()=>()=>{clearTimeout(u.current)},[]),P.useEffect(()=>{var b;const y=(b=n.value)!=null?b:"";c(String(y))},[n.value]);const v=h?{endAdornment:B.jsx(p.slots.loadIcon,{})}:l.InputProps;return B.jsx(p.slots.baseTextField,L({id:m,label:a.current.getLocaleText("filterPanelInputLabel"),placeholder:a.current.getLocaleText("filterPanelInputPlaceholder"),value:d,onChange:g,variant:"standard",type:o||"text",InputProps:v,InputLabelProps:{shrink:!0},inputRef:s},l,(r=p.slotProps)==null?void 0:r.baseTextField))}const WYe=["item","applyValue","type","apiRef","focusElementRef","InputProps"],qYe=500;function Og(e){var t,r;const{item:n,applyValue:i,type:o,apiRef:a,focusElementRef:s,InputProps:l}=e,u=Ie(e,WYe),d=P.useRef(),[c,h]=P.useState((t=n.value)!=null?t:""),[f,m]=P.useState(!1),p=Oi(),g=Mt(),v=P.useCallback(b=>{const y=b.target.value;clearTimeout(d.current),h(String(y)),m(!0),d.current=setTimeout(()=>{i(L({},n,{value:y})),m(!1)},qYe)},[i,n]);return P.useEffect(()=>()=>{clearTimeout(d.current)},[]),P.useEffect(()=>{var b;const y=(b=n.value)!=null?b:"";h(String(y))},[n.value]),B.jsx(g.slots.baseTextField,L({id:p,label:a.current.getLocaleText("filterPanelInputLabel"),placeholder:a.current.getLocaleText("filterPanelInputPlaceholder"),value:c,onChange:v,variant:"standard",type:o||"text",InputLabelProps:{shrink:!0},inputRef:s,InputProps:L({},f?{endAdornment:B.jsx(g.slots.loadIcon,{})}:{},l,{inputProps:L({max:o==="datetime-local"?"9999-12-31T23:59":"9999-12-31"},l==null?void 0:l.inputProps)})},u,(r=g.slotProps)==null?void 0:r.baseTextField))}const KYe=["item","applyValue","type","apiRef","focusElementRef","getOptionLabel","getOptionValue"],XYe=({column:{valueOptions:e,field:t},OptionComponent:r,getOptionLabel:n,getOptionValue:i,isSelectNative:o,baseSelectOptionProps:a})=>(typeof e=="function"?["",...e({field:t})]:["",...e||[]]).map(l=>{const u=i(l),d=n(l);return P.createElement(r,L({},a,{native:o,key:u,value:u}),d)});function t9(e){var t,r,n,i,o,a,s,l;const{item:u,applyValue:d,type:c,apiRef:h,focusElementRef:f,getOptionLabel:m,getOptionValue:p}=e,g=Ie(e,KYe),[v,b]=P.useState((t=u.value)!=null?t:""),y=Oi(),x=Mt(),w=(n=(((r=x.slotProps)==null?void 0:r.baseSelect)||{}).native)!=null?n:!0,_=((i=x.slotProps)==null?void 0:i.baseSelectOption)||{};let C=null;if(u.field){const O=h.current.getColumn(u.field);_m(O)&&(C=O)}const E=p||((o=C)==null?void 0:o.getOptionValue),A=m||((a=C)==null?void 0:a.getOptionLabel),M=P.useMemo(()=>{if(C)return typeof C.valueOptions=="function"?C.valueOptions({field:C.field}):C.valueOptions},[C]),I=P.useCallback(O=>{let T=O.target.value;T=mN(T,M,E),b(String(T)),d(L({},u,{value:T}))},[M,E,d,u]);return P.useEffect(()=>{var O;let T;if(M!==void 0){if(T=mN(u.value,M,E),T!==u.value){d(L({},u,{value:T}));return}}else T=u.value;T=(O=T)!=null?O:"",b(String(T))},[u,M,d,E]),!_m(C)||!_m(C)?null:B.jsx(x.slots.baseTextField,L({id:y,label:h.current.getLocaleText("filterPanelInputLabel"),placeholder:h.current.getLocaleText("filterPanelInputPlaceholder"),value:v,onChange:I,variant:"standard",type:c||"text",InputLabelProps:{shrink:!0},inputRef:f,select:!0,SelectProps:L({native:w},(s=x.slotProps)==null?void 0:s.baseSelect)},g,(l=x.slotProps)==null?void 0:l.baseTextField,{children:XYe({column:C,OptionComponent:x.slots.baseSelectOption,getOptionLabel:A,getOptionValue:E,isSelectNative:w,baseSelectOptionProps:_})}))}const YYe=["logicOperators","columnsSort","filterFormProps","getColumnForNewFilter","children","disableAddFilterButton","disableRemoveAllButton"],r9=e=>({field:e.field,operator:e.filterOperators[0].value,id:Math.round(Math.random()*1e5)}),QYe=P.forwardRef(function(t,r){var n,i;const o=Ir(),a=Mt(),s=St(o,ea),l=St(o,ooe),u=P.useRef(null),{logicOperators:d=[Da.And,Da.Or],columnsSort:c,filterFormProps:h,getColumnForNewFilter:f,disableAddFilterButton:m=!1,disableRemoveAllButton:p=!1}=t,g=Ie(t,YYe),v=P.useCallback(A=>{o.current.upsertFilterItem(A)},[o]),b=P.useCallback(A=>{o.current.setFilterLogicOperator(A)},[o]),y=P.useCallback(()=>{let A;if(f&&typeof f=="function"){const M=f({currentFilters:(s==null?void 0:s.items)||[],columns:l});if(M===null)return null;A=l.find(({field:I})=>I===M)}else A=l.find(M=>{var I;return(I=M.filterOperators)==null?void 0:I.length});return A?r9(A):null},[s==null?void 0:s.items,l,f]),x=P.useCallback(()=>{if(f===void 0||typeof f!="function")return y();const A=s.items.length?s.items:[y()].filter(Boolean),M=f({currentFilters:A,columns:l});if(M===null)return null;const I=l.find(({field:O})=>O===M);return I?r9(I):null},[s.items,l,f,y]),S=P.useMemo(()=>{if(s.items.length)return s.items;const A=y();return A?[A]:[]},[s.items,y]),w=S.length>1,_=()=>{const A=x();A&&o.current.upsertFilterItems([...S,A])},C=P.useCallback(A=>{const M=S.length===1;o.current.deleteFilterItem(A),M&&o.current.hideFilterPanel()},[o,S.length]),E=()=>{S.length===1&&S[0].value===void 0&&(o.current.deleteFilterItem(S[0]),o.current.hideFilterPanel()),o.current.setFilterModel(L({},s,{items:[]}))};return P.useEffect(()=>{d.length>0&&s.logicOperator&&!d.includes(s.logicOperator)&&b(d[0])},[d,b,s.logicOperator]),P.useEffect(()=>{S.length>0&&u.current.focus()},[S.length]),B.jsxs(Loe,L({ref:r},g,{children:[B.jsx(Roe,{children:S.map((A,M)=>B.jsx(VYe,L({item:A,applyFilterChanges:v,deleteFilter:C,hasMultipleFilters:w,showMultiFilterOperators:M>0,multiFilterOperator:s.logicOperator,disableMultiFilterOperator:M!==1,applyMultiFilterOperatorChanges:b,focusElementRef:M===S.length-1?u:null,logicOperators:d,columnsSort:c},h),A.id==null?M:A.id))}),!a.disableMultipleColumnsFiltering&&!m&&!p?B.jsxs(koe,{children:[m?B.jsx("span",{}):B.jsx(a.slots.baseButton,L({onClick:_,startIcon:B.jsx(a.slots.filterPanelAddIcon,{})},(n=a.slotProps)==null?void 0:n.baseButton,{children:o.current.getLocaleText("filterPanelAddFilter")})),p?null:B.jsx(a.slots.baseButton,L({onClick:E,startIcon:B.jsx(a.slots.filterPanelRemoveAllIcon,{})},(i=a.slotProps)==null?void 0:i.baseButton,{children:o.current.getLocaleText("filterPanelRemoveAll")}))]}):null]}))}),ZYe=["item","applyValue","type","apiRef","focusElementRef","color","error","helperText","size","variant"];function Noe(e){const{item:t,applyValue:r,type:n,apiRef:i,focusElementRef:o,color:a,error:s,helperText:l,size:u,variant:d}=e,c=Ie(e,ZYe),h={color:a,error:s,helperText:l,size:u,variant:d},[f,m]=P.useState(t.value||[]),p=Oi(),g=Mt();P.useEffect(()=>{var b;const y=(b=t.value)!=null?b:[];m(y.map(String))},[t.value]);const v=P.useCallback((b,y)=>{m(y.map(String)),r(L({},t,{value:[...y]}))},[r,t]);return B.jsx(yee,L({multiple:!0,freeSolo:!0,options:[],filterOptions:(b,y)=>{const{inputValue:x}=y;return x==null||x===""?[]:[x]},id:p,value:f,onChange:v,renderTags:(b,y)=>b.map((x,S)=>B.jsx(RF,L({variant:"outlined",size:"small",label:x},y({index:S})))),renderInput:b=>{var y;return B.jsx(g.slots.baseTextField,L({},b,{label:i.current.getLocaleText("filterPanelInputLabel"),placeholder:i.current.getLocaleText("filterPanelInputPlaceholder"),InputLabelProps:L({},b.InputLabelProps,{shrink:!0}),inputRef:o,type:n||"text"},h,(y=g.slotProps)==null?void 0:y.baseTextField))}},c))}const JYe=["item","applyValue","type","apiRef","focusElementRef","color","error","helperText","size","variant","getOptionLabel","getOptionValue"],eQe=pee();function tQe(e){var t,r;const{item:n,applyValue:i,apiRef:o,focusElementRef:a,color:s,error:l,helperText:u,size:d,variant:c="standard",getOptionLabel:h,getOptionValue:f}=e,m=Ie(e,JYe),p={color:s,error:l,helperText:u,size:d,variant:c},g=Oi(),v=Mt();let b=null;if(n.field){const A=o.current.getColumn(n.field);_m(A)&&(b=A)}const y=f||((t=b)==null?void 0:t.getOptionValue),x=h||((r=b)==null?void 0:r.getOptionLabel),S=P.useCallback((A,M)=>y(A)===y(M),[y]),w=P.useMemo(()=>{var A;return(A=b)!=null&&A.valueOptions?typeof b.valueOptions=="function"?b.valueOptions({field:b.field}):b.valueOptions:[]},[b]),_=P.useMemo(()=>w==null?void 0:w.map(y),[w,y]),C=P.useMemo(()=>Array.isArray(n.value)?w!==void 0?n.value.map(M=>_==null?void 0:_.findIndex(I=>I===M)).filter(M=>M>=0).map(M=>w[M]):n.value:[],[n.value,w,_]);P.useEffect(()=>{(!Array.isArray(n.value)||C.length!==n.value.length)&&i(L({},n,{value:C.map(y)}))},[n,C,i,y]);const E=P.useCallback((A,M)=>{i(L({},n,{value:M.map(y)}))},[i,n,y]);return B.jsx(yee,L({multiple:!0,options:w,isOptionEqualToValue:S,filterOptions:eQe,id:g,value:C,onChange:E,getOptionLabel:x,renderTags:(A,M)=>A.map((I,O)=>B.jsx(RF,L({variant:"outlined",size:"small",label:x(I)},M({index:O})))),renderInput:A=>{var M;return B.jsx(v.slots.baseTextField,L({},A,{label:o.current.getLocaleText("filterPanelInputLabel"),placeholder:o.current.getLocaleText("filterPanelInputPlaceholder"),InputLabelProps:L({},A.InputLabelProps,{shrink:!0}),inputRef:a,type:"singleSelect"},p,(M=v.slotProps)==null?void 0:M.baseTextField))}},m))}const rQe=["hideMenu","options"],nQe=["hideMenu","options"];function iQe(e){const t=Ir(),{hideMenu:r,options:n}=e,i=Ie(e,rQe);return B.jsx(Fc,L({onClick:()=>{t.current.exportDataAsCsv(n),r==null||r()}},i,{children:t.current.getLocaleText("toolbarExportCSV")}))}function oQe(e){const t=Ir(),{hideMenu:r,options:n}=e,i=Ie(e,nQe);return B.jsx(Fc,L({onClick:()=>{t.current.exportDataAsPrint(n),r==null||r()}},i,{children:t.current.getLocaleText("toolbarExportPrint")}))}const qw=()=>({items:[],logicOperator:Da.And,quickFilterValues:[],quickFilterLogicOperator:Da.And}),aQe=["className","rowCount","visibleRowCount"],sQe=e=>{const{classes:t}=e;return lt({root:["rowCount"]},Er,t)},lQe=wi("div",{name:"MuiDataGrid",slot:"RowCount",overridesResolver:(e,t)=>t.rowCount})(({theme:e})=>({alignItems:"center",display:"flex",margin:e.spacing(0,2)})),uQe=P.forwardRef(function(t,r){const{className:n,rowCount:i,visibleRowCount:o}=t,a=Ie(t,aQe),s=Ir(),l=Mt(),u=sQe(l);if(i===0)return null;const d=o<i?s.current.getLocaleText("footerTotalVisibleRows")(o,i):i.toLocaleString();return B.jsxs(lQe,L({ref:r,className:zr(u.root,n),ownerState:l},a,{children:[s.current.getLocaleText("footerTotalRows")," ",d]}))}),cQe=["className","selectedRowCount"],dQe=e=>{const{classes:t}=e;return lt({root:["selectedRowCount"]},Er,t)},hQe=wi("div",{name:"MuiDataGrid",slot:"SelectedRowCount",overridesResolver:(e,t)=>t.selectedRowCount})(({theme:e})=>({alignItems:"center",display:"flex",margin:e.spacing(0,2),visibility:"hidden",width:0,height:0,[e.breakpoints.up("sm")]:{visibility:"visible",width:"auto",height:"auto"}})),fQe=P.forwardRef(function(t,r){const{className:n,selectedRowCount:i}=t,o=Ie(t,cQe),a=Ir(),s=Mt(),l=dQe(s),u=a.current.getLocaleText("footerRowSelected")(i);return B.jsx(hQe,L({ref:r,className:zr(l.root,n),ownerState:s},o,{children:u}))}),pQe=P.forwardRef(function(t,r){var n;const i=Ir(),o=Mt(),a=St(i,Jqe),s=St(i,oXe),l=St(i,rO),u=!o.hideFooterSelectedRowCount&&s>0?B.jsx(fQe,{selectedRowCount:s}):B.jsx("div",{}),d=!o.hideFooterRowCount&&!o.pagination?B.jsx(uQe,{rowCount:a,visibleRowCount:l}):null,c=o.pagination&&!o.hideFooterPagination&&o.slots.pagination&&B.jsx(o.slots.pagination,L({},(n=o.slotProps)==null?void 0:n.pagination));return B.jsxs(SKe,L({ref:r},t,{children:[u,d,c]}))}),mQe=P.forwardRef(function(t,r){var n,i;const o=Mt();return B.jsxs("div",L({ref:r},t,{children:[B.jsx(o.slots.preferencesPanel,L({},(n=o.slotProps)==null?void 0:n.preferencesPanel)),o.slots.toolbar&&B.jsx(o.slots.toolbar,L({},(i=o.slotProps)==null?void 0:i.toolbar))]}))}),gQe=P.forwardRef(function(t,r){return B.jsx(x4,L({ref:r},t,{children:B.jsx(Wxe,{})}))}),vQe=P.forwardRef(function(t,r){const i=Ir().current.getLocaleText("noRowsLabel");return B.jsx(x4,L({ref:r},t,{children:i}))}),yQe=He(B_e)(({theme:e})=>({[`& .${bm.selectLabel}`]:{display:"none",[e.breakpoints.up("sm")]:{display:"block"}},[`& .${bm.input}`]:{display:"none",[e.breakpoints.up("sm")]:{display:"inline-flex"}}})),bQe=P.forwardRef(function(t,r){var n;const i=Ir(),o=Mt(),a=St(i,Pl),s=St(i,rO),l=P.useMemo(()=>{var h,f;return(h=(f=o.rowCount)!=null?f:s)!=null?h:0},[o.rowCount,s]),u=P.useMemo(()=>Math.floor(l/(a.pageSize||1)),[l,a.pageSize]),d=P.useCallback(h=>{const f=Number(h.target.value);i.current.setPageSize(f)},[i]),c=P.useCallback((h,f)=>{i.current.setPage(f)},[i]);return B.jsx(yQe,L({ref:r,component:"div",count:l,page:a.page<=u?a.page:u,rowsPerPageOptions:(n=o.pageSizeOptions)!=null&&n.includes(a.pageSize)?o.pageSizeOptions:[],rowsPerPage:a.pageSize,onPageChange:c,onRowsPerPageChange:d},i.current.getLocaleText("MuiTablePagination"),t))}),iO=(e,t)=>{let r,n;return t.pagination&&t.paginationMode==="client"?(n=_4(e),r=_Xe(e)):(r=yp(e),r.length===0?n=null:n={firstRowIndex:0,lastRowIndex:r.length-1}),{rows:r,range:n}},hg=(e,t)=>{const r=iO(e,t);return P.useMemo(()=>({rows:r.rows,range:r.range}),[r.rows,r.range])},xQe=od(["MUI: The `sortModel` can only contain a single item when the `disableMultipleColumnsSorting` prop is set to `true`.","If you are using the community version of the `DataGrid`, this prop is always `true`."],"error"),zoe=(e,t)=>t&&e.length>1?(xQe(),[e[0]]):e,n9=(e,t)=>r=>L({},r,{sorting:L({},r.sorting,{sortModel:zoe(e,t)})}),wQe=e=>e==="desc",SQe=(e,t)=>{const r=t.current.getColumn(e.field);if(!r)return null;const n=wQe(e.sort)?(...o)=>-1*r.sortComparator(...o):r.sortComparator;return{getSortCellParams:o=>({id:o,field:r.field,rowNode:t.current.getRowNode(o),value:t.current.getCellValue(o,r.field),api:t.current}),comparator:n}},_Qe=(e,t,r)=>e.reduce((n,i,o)=>{if(n!==0)return n;const a=t.params[o],s=r.params[o];return n=i.comparator(a.value,s.value,a,s),n},0),CQe=(e,t)=>{const r=e.map(n=>SQe(n,t)).filter(n=>!!n);return r.length===0?null:n=>n.map(i=>({node:i,params:r.map(o=>o.getSortCellParams(i.id))})).sort((i,o)=>_Qe(r,i,o)).map(i=>i.node.id)},i9=(e,t)=>{const r=e.indexOf(t);return!t||r===-1||r+1===e.length?e[0]:e[r+1]},C4=(e,t)=>e==null&&t!=null?-1:t==null&&e!=null?1:e==null&&t==null?0:null,AQe=new Intl.Collator,EQe=(e,t)=>{const r=C4(e,t);return r!==null?r:typeof e=="string"?AQe.compare(e.toString(),t.toString()):e-t},Boe=(e,t)=>{const r=C4(e,t);return r!==null?r:Number(e)-Number(t)},Foe=(e,t)=>{const r=C4(e,t);return r!==null?r:e>t?1:e<t?-1:0},MQe=e=>{if(!e)return null;const t=new RegExp(WA(e),"i");return({formattedValue:r})=>r!=null?t.test(r.toString()):!1},PQe=(e=!1)=>[{value:"contains",getApplyFilterFn:t=>{if(!t.value)return null;const r=e?t.value:t.value.trim(),n=new RegExp(WA(r),"i");return({value:i})=>i!=null?n.test(i.toString()):!1},InputComponent:yc},{value:"equals",getApplyFilterFn:t=>{if(!t.value)return null;const r=e?t.value:t.value.trim(),n=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"});return({value:i})=>i!=null?n.compare(r,i.toString())===0:!1},InputComponent:yc},{value:"startsWith",getApplyFilterFn:t=>{if(!t.value)return null;const r=e?t.value:t.value.trim(),n=new RegExp(`^${WA(r)}.*$`,"i");return({value:i})=>i!=null?n.test(i.toString()):!1},InputComponent:yc},{value:"endsWith",getApplyFilterFn:t=>{if(!t.value)return null;const r=e?t.value:t.value.trim(),n=new RegExp(`.*${WA(r)}$`,"i");return({value:i})=>i!=null?n.test(i.toString()):!1},InputComponent:yc},{value:"isEmpty",getApplyFilterFn:()=>({value:t})=>t===""||t==null,requiresFilterValue:!1},{value:"isNotEmpty",getApplyFilterFn:()=>({value:t})=>t!==""&&t!=null,requiresFilterValue:!1},{value:"isAnyOf",getApplyFilterFn:t=>{if(!Array.isArray(t.value)||t.value.length===0)return null;const r=e?t.value:t.value.map(i=>i.trim()),n=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"});return({value:i})=>i!=null?r.some(o=>n.compare(o,i.toString()||"")===0):!1},InputComponent:Noe}],rp={width:100,minWidth:50,maxWidth:1/0,hideable:!0,sortable:!0,resizable:!0,filterable:!0,groupable:!0,pinnable:!0,aggregable:!0,editable:!1,sortComparator:EQe,type:"string",align:"left",filterOperators:PQe(),renderEditCell:W7e,getApplyQuickFilterFn:MQe},TQe=["item","applyValue","apiRef","focusElementRef"];function OQe(e){var t,r,n,i,o;const{item:a,applyValue:s,apiRef:l,focusElementRef:u}=e,d=Ie(e,TQe),[c,h]=P.useState(a.value||""),f=Mt(),p=(r=(((t=f.slotProps)==null?void 0:t.baseSelect)||{}).native)!=null?r:!0,g=((n=f.slotProps)==null?void 0:n.baseSelectOption)||{},v=P.useCallback(b=>{const y=b.target.value;h(y),s(L({},a,{value:y}))},[s,a]);return P.useEffect(()=>{h(a.value||"")},[a.value]),B.jsxs(f.slots.baseTextField,L({label:l.current.getLocaleText("filterPanelInputLabel"),value:c,onChange:v,select:!0,variant:"standard",SelectProps:L({native:p,displayEmpty:!0},(i=f.slotProps)==null?void 0:i.baseSelect),InputLabelProps:{shrink:!0},inputRef:u},d,(o=f.slotProps)==null?void 0:o.baseTextField,{children:[B.jsx(f.slots.baseSelectOption,L({},g,{native:p,value:"",children:l.current.getLocaleText("filterValueAny")})),B.jsx(f.slots.baseSelectOption,L({},g,{native:p,value:"true",children:l.current.getLocaleText("filterValueTrue")})),B.jsx(f.slots.baseSelectOption,L({},g,{native:p,value:"false",children:l.current.getLocaleText("filterValueFalse")}))]}))}const IQe=()=>[{value:"is",getApplyFilterFn:e=>{if(!e.value)return null;const t=e.value==="true";return({value:r})=>!!r===t},InputComponent:OQe}];function DQe({value:e,api:t}){return e?t.getLocaleText("booleanCellTrueLabel"):t.getLocaleText("booleanCellFalseLabel")}const joe=L({},rp,{type:"boolean",align:"center",headerAlign:"center",renderCell:R7e,renderEditCell:z7e,sortComparator:Boe,valueFormatter:DQe,filterOperators:IQe(),getApplyQuickFilterFn:void 0,aggregable:!1}),qh="__check__",QS=L({},joe,{field:qh,type:"checkboxSelection",width:50,resizable:!1,sortable:!1,filterable:!1,aggregable:!1,disableColumnMenu:!0,disableReorder:!0,disableExport:!0,getApplyQuickFilterFn:void 0,valueGetter:e=>QM(e.api.state,e.api.instanceId)[e.id]!==void 0,renderHeader:e=>B.jsx(EXe,L({},e)),renderCell:e=>B.jsx(iXe,L({},e))}),A4="actions",RQe=L({},rp,{sortable:!1,filterable:!1,aggregable:!1,width:100,align:"center",headerAlign:"center",headerName:"",disableColumnMenu:!0,disableExport:!0,renderCell:cKe,getApplyQuickFilterFn:void 0}),E4="__detail_panel_toggle__",Pa=e=>e.editRows,kQe=["selected","rowId","row","index","style","position","rowHeight","className","visibleColumns","renderedColumns","containerWidth","firstColumnToRender","lastColumnToRender","isLastVisible","focusedCell","tabbableCell","onClick","onDoubleClick","onMouseEnter","onMouseLeave"],LQe=["changeReason"],NQe=e=>{const{editable:t,editing:r,selected:n,isLastVisible:i,rowHeight:o,classes:a}=e;return lt({root:["row",n&&"selected",t&&"row--editable",r&&"row--editing",i&&"row--lastVisible",o==="auto"&&"row--dynamicHeight"]},Er,a)};function zQe({width:e}){if(!e)return null;const t={width:e};return B.jsx("div",{className:"MuiDataGrid-cell MuiDataGrid-withBorderColor",style:t})}const BQe=P.forwardRef(function(t,r){const{selected:n,rowId:i,row:o,index:a,style:s,position:l,rowHeight:u,className:d,renderedColumns:c,containerWidth:h,firstColumnToRender:f,isLastVisible:m=!1,focusedCell:p,tabbableCell:g,onClick:v,onDoubleClick:b,onMouseEnter:y,onMouseLeave:x}=t,S=Ie(t,kQe),w=Ir(),_=P.useRef(null),C=Mt(),E=hg(w,C),A=St(w,c4),M=St(w,_l),I=St(w,eO),O=St(w,XS),T=St(w,Pa),D=nn(_,r),N=a+O+2,k={selected:n,isLastVisible:m,classes:C.classes,editing:w.current.getRowMode(i)===En.Edit,editable:C.editMode===zu.Row,rowHeight:u},R=NQe(k);P.useLayoutEffect(()=>{u==="auto"&&_.current&&typeof ResizeObserver>"u"&&w.current.unstable_storeRowHeightMeasurement(i,_.current.clientHeight,l)},[w,u,i,l]),P.useLayoutEffect(()=>{if(E.range){const K=w.current.getRowIndexRelativeToVisibleRows(i);K!=null&&w.current.unstable_setLastMeasuredRowIndex(K)}const me=_.current;if(!me||u!=="auto"||typeof ResizeObserver>"u")return;const Ae=new ResizeObserver(K=>{const[G]=K,de=G.borderBoxSize&&G.borderBoxSize.length>0?G.borderBoxSize[0].blockSize:G.contentRect.height;w.current.unstable_storeRowHeightMeasurement(i,de,l)});return Ae.observe(me),()=>Ae.disconnect()},[w,E.range,a,u,i,l]);const z=P.useCallback((me,Pe)=>Ae=>{Ae.target.nodeType===1&&!Ae.currentTarget.contains(Ae.target)||w.current.getRow(i)&&(w.current.publishEvent(me,w.current.getRowParams(i),Ae),Pe&&Pe(Ae))},[w,i]),j=P.useCallback(me=>{const Pe=zKe(me.target,ge.cell),Ae=Pe==null?void 0:Pe.getAttribute("data-field");Ae&&(Ae===QS.field||Ae===E4||Ae==="__reorder__"||w.current.getCellMode(i,Ae)===sn.Edit||w.current.getColumn(Ae).type===A4)||z("rowClick",v)(me)},[w,v,z,i]),{slots:$,slotProps:U,classes:H,disableColumnReorder:V,getCellClassName:Q}=C,X=C.rowReordering,ne=$.cell,J=P.useCallback((me,Pe)=>{const Ae=w.current.getCellParams(i,me.field),K=w.current.unstable_applyPipeProcessors("cellClassName",[],{id:i,field:me.field}),G=V&&me.disableReorder||!X&&!!M.length&&I>1&&Object.keys(T).length>0;me.cellClassName&&K.push(zr(typeof me.cellClassName=="function"?me.cellClassName(Ae):me.cellClassName));const de=T[i]?T[i][me.field]:null;let Ee;if(de==null&&me.renderCell&&(Ee=me.renderCell(L({},Ae,{api:w.current})),K.push(zr(ge["cell--withRenderer"],H==null?void 0:H["cell--withRenderer"]))),de!=null&&me.renderEditCell){const Ce=w.current.getRowWithUpdatedValues(i,me.field),pe=Ie(de,LQe),Ge=L({},Ae,{row:Ce},pe,{api:w.current});Ee=me.renderEditCell(Ge),K.push(zr(ge["cell--editing"],H==null?void 0:H["cell--editing"]))}Q&&K.push(Q(Ae));const Me=p===me.field,Le=g===me.field?0:-1,De=w.current.unstable_applyPipeProcessors("isCellSelected",!1,{id:i,field:me.field});return B.jsx(ne,L({value:Ae.value,field:me.field,width:Pe.width,rowId:i,height:u,showRightBorder:Pe.showRightBorder,formattedValue:Ae.formattedValue,align:me.align||"left",cellMode:Ae.cellMode,colIndex:Pe.indexRelativeToAllColumns,isEditable:Ae.isEditable,isSelected:De,hasFocus:Me,tabIndex:Le,className:zr(K),colSpan:Pe.colSpan,disableDragEvents:G},U==null?void 0:U.cell,{children:Ee}),me.field)},[w,i,V,X,M.length,I,T,Q,p,g,ne,u,U==null?void 0:U.cell,H]),W=w.current.unstable_getRowInternalSizes(i);let te=u;if(te==="auto"&&W){let me=0;const Pe=Object.entries(W).reduce((Ae,[K,G])=>/^base[A-Z]/.test(K)?(me+=1,G>Ae?G:Ae):Ae,0);Pe>0&&me>1&&(te=Pe)}const Z=L({},s,{maxHeight:u==="auto"?"none":u,minHeight:te});if(W!=null&&W.spacingTop){const me=C.rowSpacingType==="border"?"borderTopWidth":"marginTop";Z[me]=W.spacingTop}if(W!=null&&W.spacingBottom){const me=C.rowSpacingType==="border"?"borderBottomWidth":"marginBottom";let Pe=Z[me];typeof Pe!="number"&&(Pe=parseInt(Pe||"0",10)),Pe+=W.spacingBottom,Z[me]=Pe}const q=w.current.unstable_applyPipeProcessors("rowClassName",[],i);if(typeof C.getRowClassName=="function"){var ie;const me=a-(((ie=E.range)==null?void 0:ie.firstRowIndex)||0),Pe=L({},w.current.getRowParams(i),{isFirstVisible:me===0,isLastVisible:me===E.rows.length-1,indexRelativeToCurrentPage:me});q.push(C.getRowClassName(Pe))}const he=gXe(1e4,20,80),ae=w.current.getRowNode(i).type,be=[];for(let me=0;me<c.length;me+=1){const Pe=c[me],Ae=f+me,K=w.current.unstable_getCellColSpanInfo(i,Ae);if(K&&!K.spannedByColSpan)if(ae!=="skeletonRow"){const{colSpan:G,width:de}=K.cellProps,Ee={width:de,colSpan:G,showRightBorder:C.showCellVerticalBorder,indexRelativeToAllColumns:Ae};be.push(J(Pe,Ee))}else{const{width:G}=K.cellProps,de=Math.round(he());be.push(B.jsx(C.slots.skeletonCell,{width:G,contentWidth:de,field:Pe.field,align:Pe.align},Pe.field))}}const ye=h-A,Se=o?{onClick:j,onDoubleClick:z("rowDoubleClick",b),onMouseEnter:z("rowMouseEnter",y),onMouseLeave:z("rowMouseLeave",x)}:null;return B.jsxs("div",L({ref:D,"data-id":i,"data-rowindex":a,role:"row",className:zr(...q,R.root,d),"aria-rowindex":N,"aria-selected":n,style:Z},Se,S,{children:[be,ye>0&&B.jsx(zQe,{width:ye})]}))}),o9=1,FQe=1.5,jQe=e=>{const{scrollDirection:t,classes:r}=e,n={root:["scrollArea",`scrollArea--${t}`]};return lt(n,Er,r)},UQe=wi("div",{name:"MuiDataGrid",slot:"ScrollArea",overridesResolver:(e,t)=>[{[`&.${ge["scrollArea--left"]}`]:t["scrollArea--left"]},{[`&.${ge["scrollArea--right"]}`]:t["scrollArea--right"]},t.scrollArea]})(()=>({position:"absolute",top:0,zIndex:101,width:20,bottom:0,[`&.${ge["scrollArea--left"]}`]:{left:0},[`&.${ge["scrollArea--right"]}`]:{right:0}}));function $Qe(e){const{scrollDirection:t}=e,r=P.useRef(null),n=Ir(),i=P.useRef(),[o,a]=P.useState(!1),s=St(n,dg),l=P.useRef({left:0,top:0}),u=Mt(),d=L({},u,{scrollDirection:t}),c=jQe(d),h=Math.floor(u.columnHeaderHeight*s),f=P.useCallback(g=>{l.current=g},[]),m=P.useCallback(g=>{let v;if(t==="left")v=g.clientX-r.current.getBoundingClientRect().right;else if(t==="right")v=Math.max(1,g.clientX-r.current.getBoundingClientRect().left);else throw new Error("MUI: Wrong drag direction");v=(v-o9)*FQe+o9,clearTimeout(i.current),i.current=setTimeout(()=>{n.current.scroll({left:l.current.left+v,top:l.current.top})})},[t,n]);P.useEffect(()=>()=>{clearTimeout(i.current)},[]);const p=P.useCallback(()=>{a(g=>!g)},[]);return Lt(n,"scrollPositionChange",f),Lt(n,"columnHeaderDragStart",p),Lt(n,"columnHeaderDragEnd",p),o?B.jsx(UQe,{ref:r,className:zr(c.root),ownerState:d,onDragOver:m,style:{height:h}}):null}const a9=P.memo($Qe);function VQe({privateApiRef:e,props:t,children:r}){const n=P.useRef(e.current.getPublicApi());return B.jsx(roe.Provider,{value:t,children:B.jsx(noe.Provider,{value:e,children:B.jsx(toe.Provider,{value:n,children:r})})})}const HQe=pXe()&&window.localStorage.getItem("DEBUG")!=null,Fx=()=>{},GQe={debug:Fx,info:Fx,warn:Fx,error:Fx},s9=["debug","info","warn","error"];function l9(e,t,r=console){const n=s9.indexOf(t);if(n===-1)throw new Error(`MUI: Log level ${t} not recognized.`);return s9.reduce((o,a,s)=>(s>=n?o[a]=(...l)=>{const[u,...d]=l;r[a](`MUI: ${e} - ${u}`,...d)}:o[a]=Fx,o),{})}const WQe=(e,t)=>{const r=P.useCallback(n=>HQe?l9(n,"debug",t.logger):t.logLevel?l9(n,t.logLevel.toString(),t.logger):GQe,[t.logLevel,t.logger]);wr(e,{getLogger:r},"private")};class qQe{constructor(){this.maxListeners=10,this.warnOnce=!1,this.events={}}on(t,r,n={}){let i=this.events[t];i||(i={highPriority:new Map,regular:new Map},this.events[t]=i),n.isFirst?i.highPriority.set(r,!0):i.regular.set(r,!0)}removeListener(t,r){this.events[t]&&(this.events[t].regular.delete(r),this.events[t].highPriority.delete(r))}removeAllListeners(){this.events={}}emit(t,...r){const n=this.events[t];if(!n)return;const i=Array.from(n.highPriority.keys()),o=Array.from(n.regular.keys());for(let a=i.length-1;a>=0;a-=1){const s=i[a];n.highPriority.has(s)&&s.apply(this,r)}for(let a=0;a<o.length;a+=1){const s=o[a];n.regular.has(s)&&s.apply(this,r)}}once(t,r){const n=this;this.on(t,function i(...o){n.removeListener(t,i),r.apply(n,o)})}}const KQe=e=>e.isPropagationStopped!==void 0;let u9=0;const XQe=e=>{const t={};t.getPublicApi=()=>e,t.register=(n,i)=>{Object.keys(i).forEach(o=>{n==="public"?e[o]=i[o]:t[o]=i[o]})};const r={get:(n,i)=>i in n?n[i]:t[i],set:(n,i,o)=>(n[i]=o,!0)};return new Proxy(e,r)};function YQe(e,t){const r=P.useRef();r.current||(r.current={state:{},instanceId:u9},u9+=1);const n=P.useRef();n.current||(n.current=XQe(r.current),n.current.register("private",{caches:{},eventManager:new qQe})),P.useImperativeHandle(e,()=>r.current,[r]);const i=P.useCallback((...a)=>{const[s,l,u={}]=a;if(u.defaultMuiPrevented=!1,KQe(u)&&u.isPropagationStopped())return;const d=t.signature===Du.DataGridPro?{api:n.current.getPublicApi()}:{};n.current.eventManager.emit(s,l,u,d)},[n,t.signature]),o=P.useCallback((a,s,l)=>{n.current.eventManager.on(a,s,l);const u=n.current;return()=>{u.eventManager.removeListener(a,s)}},[n]);return wr(n,{subscribeEvent:o,publishEvent:i},"public"),P.useEffect(()=>{const a=n.current;return()=>{Yqe(a.instanceId),a.publishEvent("unmount")}},[n]),n}const QQe=(e,t)=>{const r=P.useCallback(n=>{if(t.localeText[n]==null)throw new Error(`Missing translation for key ${n}.`);return t.localeText[n]},[t.localeText]);e.current.register("public",{getLocaleText:r})},ZQe=e=>{const t=P.useRef({}),r=P.useCallback(u=>{u&&Object.values(u.appliers).forEach(d=>{d()})},[]),n=P.useCallback((u,d,c)=>{t.current[u]||(t.current[u]={processors:new Map,appliers:{}});const h=t.current[u];return h.processors.get(d)!==c&&(h.processors.set(d,c),r(h)),()=>{t.current[u].processors.set(d,null)}},[r]),i=P.useCallback((u,d,c)=>(t.current[u]||(t.current[u]={processors:new Map,appliers:{}}),t.current[u].appliers[d]=c,()=>{const h=t.current[u].appliers,f=Ie(h,[d].map(Vy));t.current[u].appliers=f}),[]),o=P.useCallback(u=>{const d=t.current[u];r(d)},[r]),a=P.useCallback((...u)=>{const[d,c,h]=u;return t.current[d]?Array.from(t.current[d].processors.values()).reduce((m,p)=>p?p(m,h):m,c):c},[]),s={registerPipeProcessor:n,registerPipeApplier:i,requestPipeProcessorsApplication:o},l={unstable_applyPipeProcessors:a};wr(e,s,"private"),wr(e,l,"public")},Mo=(e,t,r)=>{const n=P.useRef(),i=P.useRef(`mui-${Math.round(Math.random()*1e9)}`),o=P.useCallback(()=>{n.current=e.current.registerPipeProcessor(t,i.current,r)},[e,r,t]);YS(()=>{o()});const a=P.useRef(!0);P.useEffect(()=>(a.current?a.current=!1:o(),()=>{n.current&&(n.current(),n.current=null)}),[o])},M4=(e,t,r)=>{const n=P.useRef(),i=P.useRef(`mui-${Math.round(Math.random()*1e9)}`),o=P.useCallback(()=>{n.current=e.current.registerPipeApplier(t,i.current,r)},[e,r,t]);YS(()=>{o()});const a=P.useRef(!0);P.useEffect(()=>(a.current?a.current=!1:o(),()=>{n.current&&(n.current(),n.current=null)}),[o])},P4=(e,t,r,n)=>{const i=P.useCallback(()=>{e.current.registerStrategyProcessor(t,r,n)},[e,n,r,t]);YS(()=>{i()});const o=P.useRef(!0);P.useEffect(()=>{o.current?o.current=!1:i()},[i])},ib="none",c9={rowTreeCreation:"rowTree",filtering:"rowTree",sorting:"rowTree"},JQe=e=>{const t=P.useRef(new Map),r=P.useRef({}),n=P.useCallback((l,u,d)=>{const c=()=>{const m=r.current[u],p=Ie(m,[l].map(Vy));r.current[u]=p};r.current[u]||(r.current[u]={});const h=r.current[u],f=h[l];return h[l]=d,!f||f===d||l===e.current.getActiveStrategy(c9[u])&&e.current.publishEvent("activeStrategyProcessorChange",u),c},[e]),i=P.useCallback((l,u)=>{const d=e.current.getActiveStrategy(c9[l]);if(d==null)throw new Error("Can't apply a strategy processor before defining an active strategy");const c=r.current[l];if(!c||!c[d])throw new Error(`No processor found for processor "${l}" on strategy "${d}"`);const h=c[d];return h(u)},[e]),o=P.useCallback(l=>{var u;const c=Array.from(t.current.entries()).find(([,h])=>h.group!==l?!1:h.isAvailable());return(u=c==null?void 0:c[0])!=null?u:ib},[]),a=P.useCallback((l,u,d)=>{t.current.set(u,{group:l,isAvailable:d}),e.current.publishEvent("strategyAvailabilityChange")},[e]);wr(e,{registerStrategyProcessor:n,applyStrategyProcessor:i,getActiveStrategy:o,setStrategyAvailability:a},"private")},eZe=["stateId"],tZe=(e,t)=>{const r=P.useRef({}),[,n]=P.useState(),i=P.useCallback(d=>{const{stateId:c}=d,h=Ie(d,eZe);r.current[c]=L({},h,{stateId:c})},[]),o=P.useCallback((d,c)=>{let h;if(Eoe(d)?h=d(e.current.state):h=d,e.current.state===h)return!1;let f=!1;const m=[];if(Object.keys(r.current).forEach(p=>{const g=r.current[p],v=g.stateSelector(e.current.state,e.current.instanceId),b=g.stateSelector(h,e.current.instanceId);b!==v&&(m.push({stateId:g.stateId,hasPropChanged:b!==g.propModel}),g.propModel!==void 0&&b!==g.propModel&&(f=!0))}),m.length>1)throw new Error(`You're not allowed to update several sub-state in one transaction. You already updated ${m[0].stateId}, therefore, you're not allowed to update ${m.map(p=>p.stateId).join(", ")} in the same transaction.`);if(f||(e.current.state=h,e.current.publishEvent&&e.current.publishEvent("stateChange",h)),m.length===1){const{stateId:p,hasPropChanged:g}=m[0],v=r.current[p],b=v.stateSelector(h,e.current.instanceId);if(v.propOnChange&&g){const y=t.signature===Du.DataGridPro?{api:e.current,reason:c}:{reason:c};v.propOnChange(b,y)}f||e.current.publishEvent(v.changeEvent,b,{reason:c})}return!f},[e,t.signature]),a=P.useCallback((d,c,h)=>e.current.setState(f=>L({},f,{[d]:c(f[d])}),h),[e]),s=P.useCallback(()=>n(()=>e.current.state),[e]),l={setState:o,forceUpdate:s},u={updateControlState:a,registerControlState:i};wr(e,l,"public"),wr(e,u,"private")},rZe=(e,t)=>{const r=YQe(e,t);return WQe(r,t),tZe(r,t),ZQe(r),JQe(r),QQe(r,t),r},Ds=(e,t,r)=>{const n=P.useRef(!1);n.current||(t.current.state=e(t.current.state,r,t),n.current=!0)};function d9(e){const t=document.createElement("span");t.style.whiteSpace="pre",t.style.userSelect="all",t.style.opacity="0px",t.textContent=e,document.body.appendChild(t);const r=document.createRange();r.selectNode(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(r);try{document.execCommand("copy")}finally{document.body.removeChild(t)}}function nZe(e){var t;return!!((t=window.getSelection())!=null&&t.toString()||e&&(e.selectionEnd||0)-(e.selectionStart||0)>0)}const iZe=e=>{const t=P.useCallback(()=>{if(e.current.getSelectedRows().size===0)return;const i=e.current.getDataAsCsv({includeHeaders:!1,delimiter:"	"});navigator.clipboard?navigator.clipboard.writeText(i).catch(()=>{d9(i)}):d9(i)},[e]),r=P.useCallback(i=>{const o=i.ctrlKey||i.metaKey;String.fromCharCode(i.keyCode)!=="C"||!o||nZe(i.target)||e.current.unstable_copySelectedRowsToClipboard()},[e]);vXe(e,e.current.rootElementRef,"keydown",r),wr(e,{unstable_copySelectedRowsToClipboard:t},"public")},oZe=e=>L({},e,{columnMenu:{open:!1}}),aZe=e=>{const t=ma(e,"useGridColumnMenu"),r=P.useCallback(a=>{e.current.setState(l=>l.columnMenu.open&&l.columnMenu.field===a?l:(t.debug("Opening Column Menu"),L({},l,{columnMenu:{open:!0,field:a}})))&&(e.current.hidePreferences(),e.current.forceUpdate())},[e,t]),n=P.useCallback(()=>{const a=pN(e.current.state);if(a.field){const l=nb(e),u=Su(e),d=Hc(e);let c=a.field;if(l[c]||(c=d[0]),u[c]===!1){const h=d.filter(m=>m===c?!0:u[m]!==!1),f=h.indexOf(c);c=h[f+1]||h[f-1]}e.current.setColumnHeaderFocus(c)}e.current.setState(l=>!l.columnMenu.open&&l.columnMenu.field===void 0?l:(t.debug("Hiding Column Menu"),L({},l,{columnMenu:L({},l.columnMenu,{open:!1,field:void 0})})))&&e.current.forceUpdate()},[e,t]),i=P.useCallback(a=>{t.debug("Toggle Column Menu");const s=pN(e.current.state);!s.open||s.field!==a?r(a):n()},[e,t,r,n]);wr(e,{showColumnMenu:r,hideColumnMenu:n,toggleColumnMenu:i},"public"),Lt(e,"columnResizeStart",n),Lt(e,"virtualScrollerWheel",e.current.hideColumnMenu),Lt(e,"virtualScrollerTouchMove",e.current.hideColumnMenu)},sZe=/(\d+)-(\d+)-(\d+)/,lZe=/(\d+)-(\d+)-(\d+)T(\d+):(\d+)/;function Ig(e,t,r,n){if(!e.value)return null;const[i,o,a,s,l]=e.value.match(r?lZe:sZe).slice(1).map(Number),u=new Date(i,o-1,a,s||0,l||0).getTime();return({value:d})=>{if(!d)return!1;if(n)return t(d.getTime(),u);const h=new Date(d).setHours(r?d.getHours():0,r?d.getMinutes():0,0,0);return t(h,u)}}const Uoe=e=>[{value:"is",getApplyFilterFn:t=>Ig(t,(r,n)=>r===n,e),InputComponent:Og,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"not",getApplyFilterFn:t=>Ig(t,(r,n)=>r!==n,e),InputComponent:Og,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"after",getApplyFilterFn:t=>Ig(t,(r,n)=>r>n,e),InputComponent:Og,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"onOrAfter",getApplyFilterFn:t=>Ig(t,(r,n)=>r>=n,e),InputComponent:Og,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"before",getApplyFilterFn:t=>Ig(t,(r,n)=>r<n,e,!e),InputComponent:Og,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"onOrBefore",getApplyFilterFn:t=>Ig(t,(r,n)=>r<=n,e),InputComponent:Og,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"isEmpty",getApplyFilterFn:()=>({value:t})=>t==null,requiresFilterValue:!1},{value:"isNotEmpty",getApplyFilterFn:()=>({value:t})=>t!=null,requiresFilterValue:!1}];function $oe({value:e,columnType:t,rowId:r,field:n}){if(!(e instanceof Date))throw new Error([`MUI: \`${t}\` column type only accepts \`Date\` objects as values.`,"Use `valueGetter` to transform the value into a `Date` object.",`Row ID: ${r}, field: "${n}".`].join(`
`))}function uZe({value:e,field:t,id:r}){return e?($oe({value:e,columnType:"date",rowId:r,field:t}),e.toLocaleDateString()):""}function cZe({value:e,field:t,id:r}){return e?($oe({value:e,columnType:"dateTime",rowId:r,field:t}),e.toLocaleString()):""}const dZe=L({},rp,{type:"date",sortComparator:Foe,valueFormatter:uZe,filterOperators:Uoe(),renderEditCell:yoe,getApplyQuickFilterFn:void 0}),hZe=L({},rp,{type:"dateTime",sortComparator:Foe,valueFormatter:cZe,filterOperators:Uoe(!0),renderEditCell:yoe,getApplyQuickFilterFn:void 0}),Qh=e=>e==null?null:Number(e),fZe=e=>e==null||Number.isNaN(e)||e===""?null:({value:t})=>Qh(t)===Qh(e),pZe=()=>[{label:"=",value:"=",getApplyFilterFn:e=>e.value==null||Number.isNaN(e.value)?null:({value:t})=>Qh(t)===e.value,InputComponent:yc,InputComponentProps:{type:"number"}},{label:"!=",value:"!=",getApplyFilterFn:e=>e.value==null||Number.isNaN(e.value)?null:({value:t})=>Qh(t)!==e.value,InputComponent:yc,InputComponentProps:{type:"number"}},{label:">",value:">",getApplyFilterFn:e=>e.value==null||Number.isNaN(e.value)?null:({value:t})=>t==null?!1:Qh(t)>e.value,InputComponent:yc,InputComponentProps:{type:"number"}},{label:">=",value:">=",getApplyFilterFn:e=>e.value==null||Number.isNaN(e.value)?null:({value:t})=>t==null?!1:Qh(t)>=e.value,InputComponent:yc,InputComponentProps:{type:"number"}},{label:"<",value:"<",getApplyFilterFn:e=>e.value==null||Number.isNaN(e.value)?null:({value:t})=>t==null?!1:Qh(t)<e.value,InputComponent:yc,InputComponentProps:{type:"number"}},{label:"<=",value:"<=",getApplyFilterFn:e=>e.value==null||Number.isNaN(e.value)?null:({value:t})=>t==null?!1:Qh(t)<=e.value,InputComponent:yc,InputComponentProps:{type:"number"}},{value:"isEmpty",getApplyFilterFn:()=>({value:e})=>e==null,requiresFilterValue:!1},{value:"isNotEmpty",getApplyFilterFn:()=>({value:e})=>e!=null,requiresFilterValue:!1},{value:"isAnyOf",getApplyFilterFn:e=>!Array.isArray(e.value)||e.value.length===0?null:({value:t})=>t!=null&&e.value.includes(Number(t)),InputComponent:Noe,InputComponentProps:{type:"number"}}],mZe=L({},rp,{type:"number",align:"right",headerAlign:"right",sortComparator:Boe,valueParser:e=>e===""?null:Number(e),valueFormatter:({value:e})=>fXe(e)?e.toLocaleString():e||"",filterOperators:pZe(),getApplyQuickFilterFn:fZe}),Dg=e=>e==null||!S4(e)?e:e.value,gZe=()=>[{value:"is",getApplyFilterFn:e=>e.value==null||e.value===""?null:({value:t})=>Dg(t)===Dg(e.value),InputComponent:t9},{value:"not",getApplyFilterFn:e=>e.value==null||e.value===""?null:({value:t})=>Dg(t)!==Dg(e.value),InputComponent:t9},{value:"isAnyOf",getApplyFilterFn:e=>{if(!Array.isArray(e.value)||e.value.length===0)return null;const t=e.value.map(Dg);return({value:r})=>t.includes(Dg(r))},InputComponent:tQe}],vZe=e=>typeof e[0]=="object",yZe=e=>S4(e)?e.value:e,bZe=e=>S4(e)?e.label:String(e),xZe=L({},rp,{type:"singleSelect",getOptionLabel:bZe,getOptionValue:yZe,valueFormatter(e){const{id:t,field:r,value:n,api:i}=e,o=e.api.getColumn(r);if(!_m(o))return"";let a;if(typeof o.valueOptions=="function"?a=o.valueOptions({id:t,row:t?i.getRow(t):null,field:r}):a=o.valueOptions,n==null)return"";if(!a)return n;if(!vZe(a))return o.getOptionLabel(n);const s=a.find(l=>o.getOptionValue(l)===n);return s?o.getOptionLabel(s):""},renderEditCell:rKe,filterOperators:gZe()}),Voe="__default__",wZe=()=>({string:rp,number:mZe,date:dZe,dateTime:hZe,boolean:joe,singleSelect:xZe,[A4]:RQe,[Voe]:rp}),Hoe=["maxWidth","minWidth","width","flex"];function SZe({initialFreeSpace:e,totalFlexUnits:t,flexColumns:r}){const n={all:{},frozenFields:[],freeze:o=>{const a=n.all[o];a&&a.frozen!==!0&&(n.all[o].frozen=!0,n.frozenFields.push(o))}};function i(){if(n.frozenFields.length===r.length)return;const o={min:{},max:{}};let a=e,s=t,l=0;n.frozenFields.forEach(u=>{a-=n.all[u].computedWidth,s-=n.all[u].flex});for(let u=0;u<r.length;u+=1){const d=r[u];if(n.all[d.field]&&n.all[d.field].frozen===!0)continue;let h=a/s*d.flex;h<d.minWidth?(l+=d.minWidth-h,h=d.minWidth,o.min[d.field]=!0):h>d.maxWidth&&(l+=d.maxWidth-h,h=d.maxWidth,o.max[d.field]=!0),n.all[d.field]={frozen:!1,computedWidth:h,flex:d.flex}}l<0?Object.keys(o.max).forEach(u=>{n.freeze(u)}):l>0?Object.keys(o.min).forEach(u=>{n.freeze(u)}):r.forEach(({field:u})=>{n.freeze(u)}),i()}return i(),n.all}const Goe=(e,t)=>{const r={};let n=0,i=0;const o=[];e.orderedFields.forEach(s=>{const l=L({},e.lookup[s]);if(e.columnVisibilityModel[s]===!1)l.computedWidth=0;else{let u;l.flex&&l.flex>0?(n+=l.flex,u=0,o.push(l)):u=v0(l.width,l.minWidth,l.maxWidth),i+=u,l.computedWidth=u}r[s]=l});const a=Math.max(t-i,0);if(n>0&&t>0){const s=SZe({initialFreeSpace:a,totalFlexUnits:n,flexColumns:o});Object.keys(s).forEach(l=>{r[l].computedWidth=s[l].computedWidth})}return L({},e,{lookup:r})},_Ze=(e,t)=>{if(!t)return e;const{orderedFields:r=[],dimensions:n={}}=t,i=Object.keys(n);if(i.length===0&&r.length===0)return e;const o={},a=[];for(let d=0;d<r.length;d+=1){const c=r[d];e.lookup[c]&&(o[c]=!0,a.push(c))}const s=a.length===0?e.orderedFields:[...a,...e.orderedFields.filter(d=>!o[d])],l=L({},e.lookup);for(let d=0;d<i.length;d+=1){const c=i[d],h=L({},l[c],{hasBeenResized:!0});Object.entries(n[c]).forEach(([f,m])=>{h[f]=m===-1?1/0:m}),l[c]=h}return L({},e,{orderedFields:s,lookup:l})},mv=({apiRef:e,columnsToUpsert:t,initialState:r,columnTypes:n,columnVisibilityModel:i=Su(e),keepOnlyColumnsToUpsert:o=!1})=>{var a,s,l,u;const d=!e.current.state.columns;let c;if(d)c={orderedFields:[],lookup:{},columnVisibilityModel:i};else{const p=m0(e.current.state);c={orderedFields:o?[]:[...p.orderedFields],lookup:L({},p.lookup),columnVisibilityModel:i}}let h={};o&&!d&&(h=Object.keys(c.lookup).reduce((p,g)=>L({},p,{[g]:!1}),{})),t.forEach(p=>{const{field:g}=p;h[g]=!0;let v=c.lookup[g];if(v==null){let y=n[Voe];p.type&&n[p.type]&&(y=n[p.type]),v=L({},y,{field:g,hasBeenResized:!1}),c.orderedFields.push(g)}else o&&c.orderedFields.push(g);let b=v.hasBeenResized;Hoe.forEach(y=>{p[y]!==void 0&&(b=!0,p[y]===-1&&(p[y]=1/0))}),c.lookup[g]=L({},v,p,{hasBeenResized:b})}),o&&!d&&Object.keys(c.lookup).forEach(p=>{h[p]||delete c.lookup[p]});const f=e.current.unstable_applyPipeProcessors("hydrateColumns",c),m=_Ze(f,r);return Goe(m,(a=(s=(l=e.current).getRootDimensions)==null||(u=s.call(l))==null?void 0:u.viewportInnerSize.width)!=null?a:0)},h9=e=>t=>L({},t,{columns:e});function vN({firstColumnToRender:e,apiRef:t,firstRowToRender:r,lastRowToRender:n,visibleRows:i}){let o=e;for(let a=r;a<n;a+=1)if(i[a]){const l=i[a].id,u=t.current.unstable_getCellColSpanInfo(l,e);u&&u.spannedByColSpan&&(o=u.leftVisibleCellIndex)}return o}function CZe({firstColumnIndex:e,minColumnIndex:t,columnBuffer:r,firstRowToRender:n,lastRowToRender:i,apiRef:o,visibleRows:a}){const s=Math.max(e-r,t);return vN({firstColumnToRender:s,apiRef:o,firstRowToRender:n,lastRowToRender:i,visibleRows:a})}function T4(e,t){const r=dg(e),n=XS(e);return Math.floor(t*r)*((n??0)+1)}const Woe=wZe(),AZe=(e,t,r)=>{var n,i,o,a,s;const l=mv({apiRef:r,columnTypes:Woe,columnsToUpsert:t.columns,initialState:(n=t.initialState)==null?void 0:n.columns,columnVisibilityModel:(i=(o=t.columnVisibilityModel)!=null?o:(a=t.initialState)==null||(s=a.columns)==null?void 0:s.columnVisibilityModel)!=null?i:{},keepOnlyColumnsToUpsert:!0});return L({},e,{columns:l})};function EZe(e,t){var r,n;const i=ma(e,"useGridColumns"),o=Woe,a=P.useRef(t.columns),s=P.useRef(o);e.current.registerControlState({stateId:"visibleColumns",propModel:t.columnVisibilityModel,propOnChange:t.onColumnVisibilityModelChange,stateSelector:Su,changeEvent:"columnVisibilityModelChange"});const l=P.useCallback(T=>{i.debug("Updating columns state."),e.current.setState(h9(T)),e.current.forceUpdate(),e.current.publishEvent("columnsChange",T.orderedFields)},[i,e]),u=P.useCallback(T=>nb(e)[T],[e]),d=P.useCallback(()=>Gc(e),[e]),c=P.useCallback(()=>Ha(e),[e]),h=P.useCallback((T,D=!0)=>(D?Ha(e):Gc(e)).findIndex(k=>k.field===T),[e]),f=P.useCallback(T=>{const D=h(T);return g0(e)[D]},[e,h]),m=P.useCallback(T=>{Su(e)!==T&&(e.current.setState(N=>L({},N,{columns:mv({apiRef:e,columnTypes:o,columnsToUpsert:[],initialState:void 0,columnVisibilityModel:T,keepOnlyColumnsToUpsert:!1})})),e.current.forceUpdate())},[e,o]),p=P.useCallback(T=>{const D=mv({apiRef:e,columnTypes:o,columnsToUpsert:T,initialState:void 0,keepOnlyColumnsToUpsert:!1});l(D)},[e,l,o]),g=P.useCallback((T,D)=>{var N;const k=Su(e),R=(N=k[T])!=null?N:!0;if(D!==R){const z=L({},k,{[T]:D});e.current.setColumnVisibilityModel(z)}},[e]),v=P.useCallback(T=>Hc(e).findIndex(N=>N===T),[e]),b=P.useCallback((T,D)=>{const N=Hc(e),k=v(T);if(k===D)return;i.debug(`Moving column ${T} to index ${D}`);const R=[...N],z=R.splice(k,1)[0];R.splice(D,0,z),l(L({},m0(e.current.state),{orderedFields:R}));const j={column:e.current.getColumn(T),targetIndex:e.current.getColumnIndexRelativeToVisibleColumns(T),oldIndex:k};e.current.publishEvent("columnIndexChange",j)},[e,i,l,v]),y=P.useCallback((T,D)=>{i.debug(`Updating column ${T} width to ${D}`);const N=e.current.getColumn(T),k=L({},N,{width:D});e.current.updateColumns([k]),e.current.publishEvent("columnWidthChange",{element:e.current.getColumnHeaderElement(T),colDef:k,width:D})},[e,i]),x={getColumn:u,getAllColumns:d,getColumnIndex:h,getColumnPosition:f,getVisibleColumns:c,getColumnIndexRelativeToVisibleColumns:v,updateColumns:p,setColumnVisibilityModel:m,setColumnVisibility:g,setColumnWidth:y},S={setColumnIndex:b};wr(e,x,"public"),wr(e,S,t.signature===Du.DataGrid?"private":"public");const w=P.useCallback((T,D)=>{var N,k,R;const z={},j=Su(e);(!D.exportOnlyDirtyModels||t.columnVisibilityModel!=null||Object.keys((N=(k=t.initialState)==null||(R=k.columns)==null?void 0:R.columnVisibilityModel)!=null?N:{}).length>0||Object.keys(j).length>0)&&(z.columnVisibilityModel=j),z.orderedFields=Hc(e);const U=Gc(e),H={};return U.forEach(V=>{if(V.hasBeenResized){const Q={};Hoe.forEach(X=>{let ne=V[X];ne===1/0&&(ne=-1),Q[X]=ne}),H[V.field]=Q}}),Object.keys(H).length>0&&(z.dimensions=H),L({},T,{columns:z})},[e,t.columnVisibilityModel,(r=t.initialState)==null?void 0:r.columns]),_=P.useCallback((T,D)=>{var N;const k=(N=D.stateToRestore.columns)==null?void 0:N.columnVisibilityModel,R=D.stateToRestore.columns;if(k==null&&R==null)return T;const z=mv({apiRef:e,columnTypes:o,columnsToUpsert:[],initialState:R,columnVisibilityModel:k,keepOnlyColumnsToUpsert:!1});return e.current.setState(h9(z)),R!=null&&e.current.publishEvent("columnsChange",z.orderedFields),T},[e,o]),C=P.useCallback((T,D)=>{if(D===tp.columns){var N;const k=t.slots.columnsPanel;return B.jsx(k,L({},(N=t.slotProps)==null?void 0:N.columnsPanel))}return T},[t.slots.columnsPanel,(n=t.slotProps)==null?void 0:n.columnsPanel]),E=P.useCallback(T=>t.disableColumnSelector?T:[...T,"ColumnMenuColumnsItem"],[t.disableColumnSelector]);Mo(e,"columnMenu",E),Mo(e,"exportState",w),Mo(e,"restoreState",_),Mo(e,"preferencePanel",C);const A=P.useRef(null);Lt(e,"viewportInnerSizeChange",T=>{A.current!==T.width&&(A.current=T.width,l(Goe(m0(e.current.state),T.width)))});const I=P.useCallback(()=>{i.info("Columns pipe processing have changed, regenerating the columns");const T=mv({apiRef:e,columnTypes:o,columnsToUpsert:[],initialState:void 0,keepOnlyColumnsToUpsert:!1});l(T)},[e,i,l,o]);M4(e,"hydrateColumns",I);const O=P.useRef(!0);P.useEffect(()=>{if(O.current){O.current=!1;return}if(i.info(`GridColumns have changed, new length ${t.columns.length}`),a.current===t.columns&&s.current===o)return;const T=mv({apiRef:e,columnTypes:o,initialState:void 0,columnsToUpsert:t.columns,keepOnlyColumnsToUpsert:!0});a.current=t.columns,s.current=o,l(T)},[i,e,l,t.columns,o]),P.useEffect(()=>{t.columnVisibilityModel!==void 0&&e.current.setColumnVisibilityModel(t.columnVisibilityModel)},[e,i,t.columnVisibilityModel])}const MZe=.7,PZe=1.3,qoe={compact:MZe,comfortable:PZe,standard:1},TZe=(e,t)=>L({},e,{density:{value:t.density,factor:qoe[t.density]}}),OZe=(e,t)=>{const r=ma(e,"useDensity"),n=P.useCallback(o=>{r.debug(`Set grid density to ${o}`),e.current.setState(a=>{const s=m4(a),l={value:o,factor:qoe[o]};return Cm(s,l)?a:L({},a,{density:l})}),e.current.forceUpdate()},[r,e]);P.useEffect(()=>{e.current.setDensity(t.density)},[e,t.density]),wr(e,{setDensity:n},"public")};function IZe(e,t="csv",r=document.title||"untitled"){const n=`${r}.${t}`;if("download"in HTMLAnchorElement.prototype){const i=URL.createObjectURL(e),o=document.createElement("a");o.href=i,o.download=n,o.click(),setTimeout(()=>{URL.revokeObjectURL(i)});return}throw new Error("MUI: exportAs not supported")}const Koe=(e,t)=>{if(typeof e=="string"){const r=e.replace(/"/g,'""');return[t,`
`,"\r"].some(n=>r.includes(n))?`"${r}"`:r}return e};od(["MUI: When the value of a field is an object or a `renderCell` is provided, the CSV export might not display the value correctly.","You can provide a `valueFormatter` with a string representation to be used."]);const DZe=(e,t,r,n)=>t.map(i=>{const o=r(e,i.field);return Koe(o.formattedValue,n)});function RZe(e){const{columns:t,rowIds:r,getCellParams:n,delimiterCharacter:i,includeHeaders:o}=e,a=r.reduce((l,u)=>`${l}${DZe(u,t,n,i).join(i)}\r
`,"").trim();return o?`${`${t.filter(l=>l.field!==QS.field).map(l=>Koe(l.headerName||l.field,i)).join(i)}\r
`}${a}`.trim():a}const Xoe=({apiRef:e,options:t})=>{const r=Gc(e);return t.fields?t.fields.map(i=>r.find(o=>o.field===i)).filter(i=>!!i):(t.allColumns?r:Ha(e)).filter(i=>!i.disableExport)},kZe=({apiRef:e})=>{var t,r;const n=a7e(e),i=Il(e),o=e.current.getSelectedRows(),a=n.filter(d=>i[d].type!=="footer"),s=KS(e),l=(s==null||(t=s.top)==null?void 0:t.map(d=>d.id))||[],u=(s==null||(r=s.bottom)==null?void 0:r.map(d=>d.id))||[];return a.unshift(...l),a.push(...u),o.size>0?a.filter(d=>o.has(d)):a},LZe=e=>{const t=ma(e,"useGridCsvExport"),r=P.useCallback((a={})=>{var s,l;t.debug("Get data as CSV");const u=Xoe({apiRef:e,options:a}),c=((s=a.getRowsToExport)!=null?s:kZe)({apiRef:e});return RZe({columns:u,rowIds:c,getCellParams:e.current.getCellParams,delimiterCharacter:a.delimiter||",",includeHeaders:(l=a.includeHeaders)!=null?l:!0})},[t,e]),n=P.useCallback(a=>{t.debug("Export data as CSV");const s=r(a),l=new Blob([a!=null&&a.utf8WithBom?new Uint8Array([239,187,191]):"",s],{type:"text/csv"});IZe(l,"csv",a==null?void 0:a.fileName)},[t,r]);wr(e,{getDataAsCsv:r,exportDataAsCsv:n},"public");const o=P.useCallback((a,s)=>{var l;return(l=s.csvOptions)!=null&&l.disableToolbarButton?a:[...a,{component:B.jsx(iQe,{options:s.csvOptions}),componentName:"csvExport"}]},[]);Mo(e,"exportMenu",o)},Kw=e=>e.rowsMeta;function NZe(){return new Promise(e=>{requestAnimationFrame(()=>{e()})})}const zZe=(e,t)=>{const r=ma(e,"useGridPrintExport"),n=P.useRef(null),i=P.useRef(null),o=P.useRef({});P.useEffect(()=>{n.current=si(e.current.rootElementRef.current)},[e]);const a=P.useCallback((f,m)=>new Promise(p=>{if(!f&&!m){p();return}const g=Xoe({apiRef:e,options:{fields:f,allColumns:m}}).map(y=>y.field),v=Gc(e),b={};v.forEach(y=>{b[y.field]=g.includes(y.field)}),e.current.setColumnVisibilityModel(b),p()}),[e]),s=P.useCallback(f=>{const m=document.createElement("iframe");return m.style.position="absolute",m.style.width="0px",m.style.height="0px",m.title=f||document.title,m},[]),l=P.useCallback((f,m)=>{var p,g;const v=L({copyStyles:!0,hideToolbar:!1,hideFooter:!1},m),b=f.contentDocument;if(!b)return;const y=Kw(e.current.state),x=e.current.rootElementRef.current,S=x.cloneNode(!0),w=S.querySelector(`.${ge.main}`);w.style.overflow="visible",S.style.contain="size";const C=S.querySelector(`.${ge.columnHeaders}`).querySelector(`.${ge.columnHeadersInner}`);C.style.width="100%";let E=((p=x.querySelector(`.${ge.toolbarContainer}`))==null?void 0:p.offsetHeight)||0,A=((g=x.querySelector(`.${ge.footerContainer}`))==null?void 0:g.offsetHeight)||0;if(v.hideToolbar){var M;(M=S.querySelector(`.${ge.toolbarContainer}`))==null||M.remove(),E=0}if(v.hideFooter){var I;(I=S.querySelector(`.${ge.footerContainer}`))==null||I.remove(),A=0}S.style.height=`${y.currentPageTotalHeight+T4(e,t.columnHeaderHeight)+E+A}px`,S.style.boxSizing="content-box";const O=document.createElement("div");O.appendChild(S),b.body.innerHTML=O.innerHTML;const T=typeof v.pageStyle=="function"?v.pageStyle():v.pageStyle;if(typeof T=="string"){const D=b.createElement("style");D.appendChild(b.createTextNode(T)),b.head.appendChild(D)}if(v.bodyClassName&&b.body.classList.add(...v.bodyClassName.split(" ")),v.copyStyles){const D=n.current.querySelectorAll("style, link[rel='stylesheet']");for(let N=0;N<D.length;N+=1){const k=D[N];if(k.tagName==="STYLE"){const R=b.createElement(k.tagName),z=k.sheet;if(z){let j="";for(let $=0;$<z.cssRules.length;$+=1)typeof z.cssRules[$].cssText=="string"&&(j+=`${z.cssRules[$].cssText}\r
`);R.appendChild(b.createTextNode(j)),b.head.appendChild(R)}}else if(k.getAttribute("href")){const R=b.createElement(k.tagName);for(let z=0;z<k.attributes.length;z+=1){const j=k.attributes[z];j&&R.setAttribute(j.nodeName,j.nodeValue||"")}b.head.appendChild(R)}}}f.contentWindow.print()},[e,n,t.columnHeaderHeight]),u=P.useCallback(f=>{var m,p;n.current.body.removeChild(f),e.current.restoreState(i.current||{}),(m=i.current)!=null&&(p=m.columns)!=null&&p.columnVisibilityModel||e.current.setColumnVisibilityModel(o.current),e.current.unstable_enableVirtualization(),i.current=null,o.current={}},[e]),c={exportDataAsPrint:P.useCallback(async f=>{if(r.debug("Export data as Print"),!e.current.rootElementRef.current)throw new Error("MUI: No grid root element available.");if(i.current=e.current.exportState(),o.current=Su(e),t.pagination){const p=uoe(e);e.current.setPageSize(p)}await a(f==null?void 0:f.fields,f==null?void 0:f.allColumns),e.current.unstable_disableVirtualization(),await NZe();const m=s(f==null?void 0:f.fileName);m.onload=()=>{l(m,f),m.contentWindow.matchMedia("print").addEventListener("change",g=>{g.matches===!1&&u(m)})},n.current.body.appendChild(m)},[t,r,e,s,l,u,a])};wr(e,c,"public");const h=P.useCallback((f,m)=>{var p;return(p=m.printOptions)!=null&&p.disableToolbarButton?f:[...f,{component:B.jsx(oQe,{options:m.printOptions}),componentName:"printExport"}]},[]);Mo(e,"exportMenu",h)},yN=(e,t)=>{const r=L({},e);if(r.id==null&&(r.id=Math.round(Math.random()*1e5)),r.operator==null){const n=nb(t)[r.field];r.operator=n&&n.filterOperators[0].value}return r},BZe=od(["MUI: The `filterModel` can only contain a single item when the `disableMultipleColumnsFiltering` prop is set to `true`.","If you are using the community version of the `DataGrid`, this prop is always `true`."],"error"),FZe=od("MUI: The `id` field is required on `filterModel.items` when you use multiple filters.","error"),jZe=od("MUI: The `operator` field is required on `filterModel.items`, one or more of your filtering item has no `operator` provided.","error"),Yoe=(e,t,r)=>{const n=e.items.length>1;let i;n&&t?(BZe(),i=[e.items[0]]):i=e.items;const o=n&&i.some(s=>s.id==null),a=i.some(s=>s.operator==null);return o&&FZe(),a&&jZe(),a||o?L({},e,{items:i.map(s=>yN(s,r))}):e.items!==i?L({},e,{items:i}):e},f9=(e,t,r)=>n=>L({},n,{filterModel:Yoe(e,t,r)}),Qoe=(e,t)=>{if(!e.field||!e.operator)return null;const r=t.current.getColumn(e.field);if(!r)return null;let n;if(r.valueParser){var i;const d=r.valueParser;n=Array.isArray(e.value)?(i=e.value)==null?void 0:i.map(c=>d(c)):d(e.value)}else n=e.value;const o=L({},e,{value:n}),a=r.filterOperators;if(!(a!=null&&a.length))throw new Error(`MUI: No filter operators found for column '${r.field}'.`);const s=a.find(d=>d.value===o.operator);if(!s)throw new Error(`MUI: No filter operator found for column '${r.field}' and operator value '${o.operator}'.`);const l=s.getApplyFilterFn(o,r);return typeof l!="function"?null:{fn:d=>{const c=t.current.getCellParams(d,o.field);return l(c)},item:o}},UZe=(e,t)=>{const{items:r}=e,n=r.map(i=>Qoe(i,t)).filter(i=>!!i);return n.length===0?null:(i,o)=>{const a={};return(o?n.filter(l=>o(l.item.field)):n).forEach(l=>{a[l.item.id]=l.fn(i)}),a}},$Ze=(e,t)=>{const{quickFilterValues:r=[]}=e;if(r.length===0)return null;const n=Hc(t),i={};n.forEach(a=>{const s=t.current.getColumn(a),l=s==null?void 0:s.getApplyQuickFilterFn;l&&(i[a]=r.map(u=>l(u,s,t)))});const o=r.filter((a,s)=>Object.keys(i).some(l=>i[l][s]!=null));return o.length===0?null:(a,s)=>{const l={},u=[];Object.keys(i).forEach(c=>{(!s||s(c))&&(l[c]=t.current.getCellParams(a,c),u.push(c))});const d={};return o.forEach((c,h)=>{const f=u.some(m=>{var p,g;return i[m][h]==null?!1:(p=(g=i[m])[h])==null?void 0:p.call(g,l[m])});d[c]=f}),d}},VZe=(e,t)=>{const r=UZe(e,t),n=$Ze(e,t);return(i,o)=>({passingFilterItems:r&&r(i,o),passingQuickFilterValues:n&&n(i,o)})},HZe=(e,t,r,n)=>{var i,o;const a=r.items.filter(c=>Qoe(c,n)!==null),s=e.filter(c=>c!=null),l=t.filter(c=>c!=null),u=(i=r.quickFilterLogicOperator)!=null?i:qw().quickFilterLogicOperator,d=(o=r.logicOperator)!=null?o:qw().logicOperator;if(s.length>0){const c=h=>s.some(f=>f[h.id]);if(d===Da.And){if(!a.every(c))return!1}else if(!a.some(c))return!1}if(l.length>0&&r.quickFilterValues!=null){const c=h=>l.some(f=>f[h]);if(u===Da.And){if(!r.quickFilterValues.every(c))return!1}else if(!r.quickFilterValues.some(c))return!1}return!0},GZe=(e,t,r)=>{var n,i,o,a;const s=(n=(i=t.filterModel)!=null?i:(o=t.initialState)==null||(a=o.filter)==null?void 0:a.filterModel)!=null?n:qw();return L({},e,{filter:{filterModel:Yoe(s,t.disableMultipleColumnsFiltering,r),visibleRowsLookup:{},filteredDescendantCountLookup:{}}})},WZe=(e,t)=>{var r,n,i;const o=ma(e,"useGridFilter");e.current.registerControlState({stateId:"filter",propModel:t.filterModel,propOnChange:t.onFilterModelChange,stateSelector:ea,changeEvent:"filterModelChange"});const a=P.useCallback(()=>{e.current.setState(C=>{const E=ea(C,e.current.instanceId),A=t.filterMode==="client"?VZe(E,e):null,M=e.current.applyStrategyProcessor("filtering",{isRowMatchingFilters:A,filterModel:E??qw()});return L({},C,{filter:L({},C.filter,M)})}),e.current.publishEvent("filteredRowsSet")},[t.filterMode,e]),s=P.useCallback((C,E)=>E==null||E.filterable===!1||t.disableColumnFilter?C:[...C,"ColumnMenuFilterItem"],[t.disableColumnFilter]),l=P.useCallback(()=>{a(),e.current.forceUpdate()},[e,a]),u=P.useCallback(C=>{const E=ea(e),A=[...E.items],M=A.findIndex(I=>I.id===C.id);M===-1?A.push(C):A[M]=C,e.current.setFilterModel(L({},E,{items:A}),"upsertFilterItem")},[e]),d=P.useCallback(C=>{const E=ea(e),A=[...E.items];C.forEach(M=>{const I=C.findIndex(O=>O.id===M.id);I===-1?A.push(M):A[I]=M}),e.current.setFilterModel(L({},E,{items:C}),"upsertFilterItems")},[e]),c=P.useCallback(C=>{const E=ea(e),A=E.items.filter(M=>M.id!==C.id);A.length!==E.items.length&&e.current.setFilterModel(L({},E,{items:A}),"deleteFilterItem")},[e]),h=P.useCallback(C=>{if(o.debug("Displaying filter panel"),C){const E=ea(e),A=E.items.filter(T=>{var D;if(T.value!==void 0)return!0;const k=(D=e.current.getColumn(T.field).filterOperators)==null?void 0:D.find(z=>z.value===T.operator);return!(typeof(k==null?void 0:k.requiresFilterValue)>"u"?!0:k==null?void 0:k.requiresFilterValue)});let M;const I=A.find(T=>T.field===C),O=e.current.getColumn(C);I?M=A:t.disableMultipleColumnsFiltering?M=[yN({field:C,operator:O.filterOperators[0].value},e)]:M=[...A,yN({field:C,operator:O.filterOperators[0].value},e)],e.current.setFilterModel(L({},E,{items:M}))}e.current.showPreferences(tp.filters)},[e,o,t.disableMultipleColumnsFiltering]),f=P.useCallback(()=>{o.debug("Hiding filter panel"),e.current.hidePreferences()},[e,o]),m=P.useCallback(C=>{const E=ea(e);E.logicOperator!==C&&e.current.setFilterModel(L({},E,{logicOperator:C}),"changeLogicOperator")},[e]),p=P.useCallback(C=>{const E=ea(e);Cm(E.quickFilterValues,C)||e.current.setFilterModel(L({},E,{quickFilterValues:[...C]}))},[e]),g=P.useCallback((C,E)=>{ea(e)!==C&&(o.debug("Setting filter model"),e.current.updateControlState("filter",f9(C,t.disableMultipleColumnsFiltering,e),E),e.current.unstable_applyFilters())},[e,o,t.disableMultipleColumnsFiltering]);wr(e,{setFilterLogicOperator:m,unstable_applyFilters:l,deleteFilterItem:c,upsertFilterItem:u,upsertFilterItems:d,setFilterModel:g,showFilterPanel:h,hideFilterPanel:f,setQuickFilterValues:p},"public");const b=P.useCallback((C,E)=>{var A,M;const I=ea(e);return!E.exportOnlyDirtyModels||t.filterModel!=null||((A=t.initialState)==null||(M=A.filter)==null?void 0:M.filterModel)!=null||!Cm(I,qw())?L({},C,{filter:{filterModel:I}}):C},[e,t.filterModel,(r=t.initialState)==null||(n=r.filter)==null?void 0:n.filterModel]),y=P.useCallback((C,E)=>{var A;const M=(A=E.stateToRestore.filter)==null?void 0:A.filterModel;return M==null?C:(e.current.updateControlState("filter",f9(M,t.disableMultipleColumnsFiltering,e),"restoreState"),L({},C,{callbacks:[...C.callbacks,e.current.unstable_applyFilters]}))},[e,t.disableMultipleColumnsFiltering]),x=P.useCallback((C,E)=>{if(E===tp.filters){var A;const M=t.slots.filterPanel;return B.jsx(M,L({},(A=t.slotProps)==null?void 0:A.filterPanel))}return C},[t.slots.filterPanel,(i=t.slotProps)==null?void 0:i.filterPanel]),S=P.useCallback(C=>{if(t.filterMode==="client"&&C.isRowMatchingFilters){const A=Il(e)[ia].children,M={};for(let I=0;I<A.length;I+=1){const O=A[I];let T;if(typeof O=="string"&&O.startsWith("auto-generated-group-footer"))T=!0;else{const{passingFilterItems:D,passingQuickFilterValues:N}=C.isRowMatchingFilters(O);T=HZe([D],[N],C.filterModel,e)}M[O]=T}return{filteredRowsLookup:M,visibleRowsLookup:M,filteredDescendantCountLookup:{}}}return{visibleRowsLookup:{},filteredRowsLookup:{},filteredDescendantCountLookup:{}}},[e,t.filterMode]);Mo(e,"columnMenu",s),Mo(e,"exportState",b),Mo(e,"restoreState",y),Mo(e,"preferencePanel",x),P4(e,ib,"filtering",S);const w=P.useCallback(()=>{o.debug("onColUpdated - GridColumns changed, applying filters");const C=ea(e),E=Qqe(e),A=C.items.filter(M=>M.field&&E[M.field]);A.length<C.items.length&&e.current.setFilterModel(L({},C,{items:A}))},[e,o]),_=P.useCallback(C=>{C==="filtering"&&e.current.unstable_applyFilters()},[e]);Lt(e,"rowsSet",a),Lt(e,"rowExpansionChange",e.current.unstable_applyFilters),Lt(e,"columnsChange",w),Lt(e,"activeStrategyProcessorChange",_),YS(()=>{e.current.unstable_applyFilters()}),P.useEffect(()=>{t.filterModel!==void 0&&e.current.setFilterModel(t.filterModel)},[e,o,t.filterModel])},qZe=e=>L({},e,{focus:{cell:null,columnHeader:null,columnGroupHeader:null},tabIndex:{cell:null,columnHeader:null,columnGroupHeader:null}}),KZe=(e,t)=>{const r=ma(e,"useGridFocus"),n=P.useRef(null),i=P.useCallback((w,_)=>{w&&e.current.getRow(w.id)&&e.current.publishEvent("cellFocusOut",e.current.getCellParams(w.id,w.field),_)},[e]),o=P.useCallback((w,_)=>{const C=vc(e);(C==null?void 0:C.id)===w&&(C==null?void 0:C.field)===_||(e.current.setState(E=>(r.debug(`Focusing on cell with id=${w} and field=${_}`),L({},E,{tabIndex:{cell:{id:w,field:_},columnHeader:null,columnGroupHeader:null},focus:{cell:{id:w,field:_},columnHeader:null,columnGroupHeader:null}}))),e.current.forceUpdate(),e.current.getRow(w)&&(C&&i(C,{}),e.current.publishEvent("cellFocusIn",e.current.getCellParams(w,_))))},[e,r,i]),a=P.useCallback((w,_={})=>{const C=vc(e);i(C,_),e.current.setState(E=>(r.debug(`Focusing on column header with colIndex=${w}`),L({},E,{tabIndex:{columnHeader:{field:w},cell:null,columnGroupHeader:null},focus:{columnHeader:{field:w},cell:null,columnGroupHeader:null}}))),e.current.forceUpdate()},[e,r,i]),s=P.useCallback((w,_,C={})=>{const E=vc(e);E&&e.current.publishEvent("cellFocusOut",e.current.getCellParams(E.id,E.field),C),e.current.setState(A=>L({},A,{tabIndex:{columnGroupHeader:{field:w,depth:_},columnHeader:null,cell:null},focus:{columnGroupHeader:{field:w,depth:_},columnHeader:null,cell:null}})),e.current.forceUpdate()},[e]),l=P.useCallback(()=>KM(e),[e]),u=P.useCallback((w,_,C)=>{let E=e.current.getColumnIndex(_),A=e.current.getRowIndexRelativeToVisibleRows(w);const M=Ha(e);C==="right"?E+=1:C==="left"?E-=1:A+=1;const I=iO(e,{pagination:t.pagination,paginationMode:t.paginationMode});E>=M.length?(A+=1,A<I.rows.length&&(E=0)):E<0&&(A-=1,A>=0&&(E=M.length-1)),A=v0(A,0,I.rows.length-1);const O=I.rows[A],T=e.current.unstable_getCellColSpanInfo(O.id,E);T&&T.spannedByColSpan&&(C==="left"||C==="below"?E=T.leftVisibleCellIndex:C==="right"&&(E=T.rightVisibleCellIndex)),E=v0(E,0,M.length-1);const D=M[E];e.current.setCellFocus(O.id,D.field)},[e,t.pagination,t.paginationMode]),d=P.useCallback(({id:w,field:_})=>{e.current.setCellFocus(w,_)},[e]),c=P.useCallback((w,_)=>{_.key==="Enter"||_.key==="Tab"||_.key==="Shift"||b4(_.key)||e.current.setCellFocus(w.id,w.field)},[e]),h=P.useCallback(({field:w},_)=>{_.target===_.currentTarget&&e.current.setColumnHeaderFocus(w,_)},[e]),f=KM(e),m=P.useCallback(({fields:w,depth:_},C)=>{C.target===C.currentTarget&&(f!==null&&f.depth===_&&w.includes(f.field)||e.current.setColumnGroupHeaderFocus(w[0],_,C))},[e,f]),p=P.useCallback(()=>{r.debug("Clearing focus"),e.current.setState(w=>L({},w,{focus:{cell:null,columnHeader:null,columnGroupHeader:null}}))},[r,e]),g=P.useCallback(w=>{n.current=w},[]),v=P.useCallback(w=>{const _=n.current;n.current=null;const C=vc(e);if(!e.current.unstable_applyPipeProcessors("canUpdateFocus",!0,{event:w,cell:_}))return;if(!C){_&&e.current.setCellFocus(_.id,_.field);return}if((_==null?void 0:_.id)===C.id&&(_==null?void 0:_.field)===C.field)return;const A=e.current.getCellElement(C.id,C.field);A!=null&&A.contains(w.target)||(_?e.current.setCellFocus(_.id,_.field):(e.current.setState(M=>L({},M,{focus:{cell:null,columnHeader:null,columnGroupHeader:null}})),e.current.forceUpdate(),i(C,w)))},[e,i]),b=P.useCallback(w=>{if(w.cellMode==="view")return;const _=vc(e);((_==null?void 0:_.id)!==w.id||(_==null?void 0:_.field)!==w.field)&&e.current.setCellFocus(w.id,w.field)},[e]),y=P.useCallback(()=>{const w=vc(e);w&&!e.current.getRow(w.id)&&e.current.setState(_=>L({},_,{focus:{cell:null,columnHeader:null,columnGroupHeader:null}}))},[e]),x={setCellFocus:o,setColumnHeaderFocus:a},S={moveFocusToRelativeCell:u,setColumnGroupHeaderFocus:s,getColumnGroupHeaderFocus:l};wr(e,x,"public"),wr(e,S,"private"),P.useEffect(()=>{const w=si(e.current.rootElementRef.current);return w.addEventListener("click",v),()=>{w.removeEventListener("click",v)}},[e,v]),Lt(e,"columnHeaderBlur",p),Lt(e,"cellDoubleClick",d),Lt(e,"cellMouseDown",g),Lt(e,"cellKeyDown",c),Lt(e,"cellModeChange",b),Lt(e,"columnHeaderFocus",h),Lt(e,"columnGroupHeaderFocus",m),Lt(e,"rowsSet",y)};function XZe(e,t){const r=KS(e)||{};return[...r.top||[],...t,...r.bottom||[]]}const p9=({currentColIndex:e,firstColIndex:t,lastColIndex:r,direction:n})=>{if(n==="rtl"){if(e<r)return e+1}else if(n==="ltr"&&e>t)return e-1;return null},m9=({currentColIndex:e,firstColIndex:t,lastColIndex:r,direction:n})=>{if(n==="rtl"){if(e>t)return e-1}else if(n==="ltr"&&e<r)return e+1;return null},YZe=(e,t)=>{const r=ma(e,"useGridKeyboardNavigation"),n=hg(e,t).rows,i=Qa(),o=P.useMemo(()=>XZe(e,n),[e,n]),a=P.useCallback((m,p,g="left")=>{const v=yp(e),b=e.current.unstable_getCellColSpanInfo(p,m);b&&b.spannedByColSpan&&(g==="left"?m=b.leftVisibleCellIndex:g==="right"&&(m=b.rightVisibleCellIndex));const y=v.findIndex(S=>S.id===p);r.debug(`Navigating to cell row ${y}, col ${m}`),e.current.scrollToIndexes({colIndex:m,rowIndex:y});const x=e.current.getVisibleColumns()[m].field;e.current.setCellFocus(p,x)},[e,r]),s=P.useCallback((m,p)=>{r.debug(`Navigating to header col ${m}`),e.current.scrollToIndexes({colIndex:m});const g=e.current.getVisibleColumns()[m].field;e.current.setColumnHeaderFocus(g,p)},[e,r]),l=P.useCallback((m,p,g)=>{r.debug(`Navigating to header col ${m}`),e.current.scrollToIndexes({colIndex:m});const{field:v}=e.current.getVisibleColumns()[m];e.current.setColumnGroupHeaderFocus(v,p,g)},[e,r]),u=P.useCallback(m=>o[m].id,[o]),d=P.useCallback((m,p)=>{const g=p.currentTarget.querySelector(`.${ge.columnHeaderTitleContainerContent}`);if(!!g&&g.contains(p.target)&&m.field!==QS.field||!e.current.getRootDimensions())return;const y=e.current.getViewportPageSize(),x=m.field?e.current.getColumnIndex(m.field):0,S=0,w=o.length-1,_=0,C=Ha(e).length-1,E=XS(e);let A=!0;switch(p.key){case"ArrowDown":{a(x,u(S));break}case"ArrowRight":{const M=m9({currentColIndex:x,firstColIndex:_,lastColIndex:C,direction:i.direction});M!==null&&s(M,p);break}case"ArrowLeft":{const M=p9({currentColIndex:x,firstColIndex:_,lastColIndex:C,direction:i.direction});M!==null&&s(M,p);break}case"ArrowUp":{E>0&&l(x,E-1,p);break}case"PageDown":{w!==null&&a(x,u(Math.min(S+y,w)));break}case"Home":{s(_,p);break}case"End":{s(C,p);break}case"Enter":{(p.ctrlKey||p.metaKey)&&e.current.toggleColumnMenu(m.field);break}case" ":break;default:A=!1}A&&p.preventDefault()},[e,o.length,i.direction,a,u,s,l]),c=St(e,KM),h=P.useCallback((m,p)=>{if(!e.current.getRootDimensions()||c===null)return;const{field:v,depth:b}=c,{fields:y,depth:x,maxDepth:S}=m,w=e.current.getViewportPageSize(),_=e.current.getColumnIndex(v),C=v?e.current.getColumnIndex(v):0,E=0,A=o.length-1,M=0,I=Ha(e).length-1;let O=!0;switch(p.key){case"ArrowDown":{x===S-1?s(_,p):l(_,b+1,p);break}case"ArrowUp":{x>0&&l(_,b-1,p);break}case"ArrowRight":{const T=y.length-y.indexOf(v)-1;_+T+1<=I&&l(_+T+1,b,p);break}case"ArrowLeft":{const T=y.indexOf(v);_-T-1>=M&&l(_-T-1,b,p);break}case"PageDown":{A!==null&&a(C,u(Math.min(E+w,A)));break}case"Home":{l(M,b,p);break}case"End":{l(I,b,p);break}case" ":break;default:O=!1}O&&p.preventDefault()},[e,c,o.length,s,l,a,u]),f=P.useCallback((m,p)=>{if(!p.currentTarget.contains(p.target))return;const g=e.current.getCellParams(m.id,m.field);if(g.cellMode===sn.Edit||!b4(p.key)||!e.current.unstable_applyPipeProcessors("canUpdateFocus",!0,{event:p,cell:g}))return;const b=e.current.getRootDimensions();if(o.length===0||!b)return;const y=i.direction,x=e.current.getViewportPageSize(),S=m.field?e.current.getColumnIndex(m.field):0,w=o.findIndex(I=>I.id===m.id),_=0,C=o.length-1,E=0,A=Ha(e).length-1;let M=!0;switch(p.key){case"ArrowDown":{w<C&&a(S,u(w+1));break}case"ArrowUp":{w>_?a(S,u(w-1)):s(S,p);break}case"ArrowRight":{const I=m9({currentColIndex:S,firstColIndex:E,lastColIndex:A,direction:y});I!==null&&a(I,u(w),y==="rtl"?"left":"right");break}case"ArrowLeft":{const I=p9({currentColIndex:S,firstColIndex:E,lastColIndex:A,direction:y});I!==null&&a(I,u(w),y==="rtl"?"right":"left");break}case"Tab":{p.shiftKey&&S>E?a(S-1,u(w),"left"):!p.shiftKey&&S<A&&a(S+1,u(w),"right");break}case" ":{if(m.field===E4)break;const O=m.colDef;if(O&&O.type==="treeDataGroup")break;!p.shiftKey&&w<C&&a(S,u(Math.min(w+x,C)));break}case"PageDown":{w<C&&a(S,u(Math.min(w+x,C)));break}case"PageUp":{const I=Math.max(w-x,_);I!==w&&I>=_?a(S,u(I)):s(S,p);break}case"Home":{p.ctrlKey||p.metaKey||p.shiftKey?a(E,u(_)):a(E,u(w));break}case"End":{p.ctrlKey||p.metaKey||p.shiftKey?a(A,u(C)):a(A,u(w));break}default:M=!1}M&&p.preventDefault()},[e,o,i.direction,u,a,s]);Lt(e,"columnHeaderKeyDown",d),Lt(e,"columnGroupHeaderKeyDown",h),Lt(e,"cellKeyDown",f)},QZe=(e,t)=>{var r,n,i;const o=L({},Toe(t.autoPageSize),(r=t.paginationModel)!=null?r:(n=t.initialState)==null||(i=n.pagination)==null?void 0:i.paginationModel);return Ooe(o.pageSize,t.signature),L({},e,{pagination:{paginationModel:o}})},vD=(e,t,r)=>n=>{var i;let o=n.paginationModel;const a=(i=r==null?void 0:r.pageSize)!=null?i:o.pageSize,s=Poe(e,a);r&&((r==null?void 0:r.page)!==o.page||(r==null?void 0:r.pageSize)!==o.pageSize)&&(o=r);const l=xXe(o.page,s);return l!==o.page&&(o=L({},o,{page:l})),Ooe(o.pageSize,t),{paginationModel:o}},ZZe=(e,t)=>{var r,n;const i=ma(e,"useGridPagination"),o=St(e,rO),a=St(e,dg),s=Math.floor(t.rowHeight*a);e.current.registerControlState({stateId:"pagination",propModel:t.paginationModel,propOnChange:t.onPaginationModelChange,stateSelector:Pl,changeEvent:"paginationModelChange"});const l=P.useCallback(g=>{const v=Pl(e);g!==v.page&&(i.debug(`Setting page to ${g}`),e.current.setPaginationModel({page:g,pageSize:v.pageSize}))},[e,i]),u=P.useCallback(g=>{const v=Pl(e);g!==v.pageSize&&(i.debug(`Setting page size to ${g}`),e.current.setPaginationModel({pageSize:g,page:v.page}))},[e,i]),d=P.useCallback(g=>{var v;const b=Pl(e);g!==b&&(i.debug("Setting 'paginationModel' to",g),e.current.updateControlState("pagination",vD((v=t.rowCount)!=null?v:o,t.signature,g),"setPaginationModel"),e.current.forceUpdate())},[e,i,t.rowCount,t.signature,o]);wr(e,{setPage:l,setPageSize:u,setPaginationModel:d},"public");const h=P.useCallback((g,v)=>{var b,y;const x=Pl(e);return!v.exportOnlyDirtyModels||t.paginationModel!=null||((b=t.initialState)==null||(y=b.pagination)==null?void 0:y.paginationModel)!=null||x.page!==0&&x.pageSize!==bXe(t.autoPageSize)?L({},g,{pagination:L({},g.pagination,{paginationModel:x})}):g},[e,t.paginationModel,(r=t.initialState)==null||(n=r.pagination)==null?void 0:n.paginationModel,t.autoPageSize]),f=P.useCallback((g,v)=>{var b,y,x;const S=(b=v.stateToRestore.pagination)!=null&&b.paginationModel?L({},Toe(t.autoPageSize),(y=v.stateToRestore.pagination)==null?void 0:y.paginationModel):Pl(e);return e.current.updateControlState("pagination",vD((x=t.rowCount)!=null?x:o,t.signature,S),"stateRestorePreProcessing"),g},[e,t.autoPageSize,t.rowCount,t.signature,o]);Mo(e,"exportState",h),Mo(e,"restoreState",f);const m=()=>{var g;const v=Pl(e);(g=e.current.virtualScrollerRef)!=null&&g.current&&e.current.scrollToIndexes({rowIndex:v.page*v.pageSize}),e.current.forceUpdate()},p=P.useCallback(()=>{const g=e.current.getRootDimensions();if(!t.autoPageSize||!g)return;const v=moe(e),b=Math.floor((g.viewportInnerSize.height-v.top-v.bottom)/s);e.current.setPageSize(b)},[e,t.autoPageSize,s]);Lt(e,"viewportInnerSizeChange",p),Lt(e,"paginationModelChange",m),P.useEffect(()=>{},[t.rowCount,t.paginationMode]),P.useEffect(()=>{var g;e.current.updateControlState("pagination",vD((g=t.rowCount)!=null?g:o,t.signature,t.paginationModel))},[e,t.paginationModel,t.rowCount,t.paginationMode,o,t.signature]),P.useEffect(()=>{p()},[p])},JZe=(e,t)=>{var r,n;return L({},e,{preferencePanel:(r=(n=t.initialState)==null?void 0:n.preferencePanel)!=null?r:{open:!1}})},eJe=(e,t)=>{var r;const n=ma(e,"useGridPreferencesPanel"),i=P.useRef(),o=P.useRef(),a=P.useCallback(()=>{n.debug("Hiding Preferences Panel");const h=YM(e.current.state);h.openedPanelValue&&e.current.publishEvent("preferencePanelClose",{openedPanelValue:h.openedPanelValue}),e.current.setState(f=>L({},f,{preferencePanel:{open:!1}})),e.current.forceUpdate()},[e,n]),s=P.useCallback(()=>{o.current=setTimeout(()=>clearTimeout(i.current),0)},[]),l=P.useCallback(()=>{i.current=setTimeout(a,100)},[a]),u=P.useCallback(h=>{n.debug("Opening Preferences Panel"),s(),e.current.setState(f=>L({},f,{preferencePanel:L({},f.preferencePanel,{open:!0,openedPanelValue:h})})),e.current.publishEvent("preferencePanelOpen",{openedPanelValue:h}),e.current.forceUpdate()},[n,s,e]);wr(e,{showPreferences:u,hidePreferences:l},"public");const d=P.useCallback((h,f)=>{var m;const p=YM(e.current.state);return!f.exportOnlyDirtyModels||((m=t.initialState)==null?void 0:m.preferencePanel)!=null||p.open?L({},h,{preferencePanel:p}):h},[e,(r=t.initialState)==null?void 0:r.preferencePanel]),c=P.useCallback((h,f)=>{const m=f.stateToRestore.preferencePanel;return m!=null&&e.current.setState(p=>L({},p,{preferencePanel:m})),h},[e]);Mo(e,"exportState",d),Mo(e,"restoreState",c),P.useEffect(()=>()=>{clearTimeout(i.current),clearTimeout(o.current)},[])},tJe=["id","field"],rJe=["id","field"],nJe=od(["MUI: A call to `processRowUpdate` threw an error which was not handled because `onProcessRowUpdateError` is missing.","To handle the error pass a callback to the `onProcessRowUpdateError` prop, e.g. `<DataGrid onProcessRowUpdateError={(error) => ...} />`.","For more detail, see http://mui.com/components/data-grid/editing/#persistence."],"error"),iJe=(e,t)=>{const[r,n]=P.useState({}),i=P.useRef(r),o=P.useRef({}),{processRowUpdate:a,onProcessRowUpdateError:s,cellModesModel:l,onCellModesModelChange:u}=t,d=T=>(...D)=>{t.editMode===zu.Cell&&T(...D)},c=P.useCallback((T,D)=>{const N=e.current.getCellParams(T,D);if(!e.current.isCellEditable(N))throw new Error(`MUI: The cell with id=${T} and field=${D} is not editable.`)},[e]),h=P.useCallback((T,D,N)=>{if(e.current.getCellMode(T,D)!==N)throw new Error(`MUI: The cell with id=${T} and field=${D} is not in ${N} mode.`)},[e]),f=P.useCallback((T,D)=>{if(!T.isEditable||T.cellMode===sn.Edit)return;const N=L({},T,{reason:Od.cellDoubleClick});e.current.publishEvent("cellEditStart",N,D)},[e]),m=P.useCallback((T,D)=>{if(T.cellMode===sn.View||e.current.getCellMode(T.id,T.field)===sn.View)return;const N=L({},T,{reason:cc.cellFocusOut});e.current.publishEvent("cellEditStop",N,D)},[e]),p=P.useCallback((T,D)=>{if(T.cellMode===sn.Edit){if(D.which===229)return;let N;if(D.key==="Escape"?N=cc.escapeKeyDown:D.key==="Enter"?N=cc.enterKeyDown:D.key==="Tab"&&(N=D.shiftKey?cc.shiftTabKeyDown:cc.tabKeyDown,D.preventDefault()),N){const k=L({},T,{reason:N});e.current.publishEvent("cellEditStop",k,D)}}else if(T.isEditable){let N;if(D.key===" "&&D.shiftKey)return;if(woe(D)||(D.ctrlKey||D.metaKey)&&D.key==="v"?N=Od.printableKeyDown:D.key==="Enter"?N=Od.enterKeyDown:(D.key==="Delete"||D.key==="Backspace")&&(N=Od.deleteKeyDown),N){const k=L({},T,{reason:N,key:D.key});e.current.publishEvent("cellEditStart",k,D)}}},[e]),g=P.useCallback(T=>{const{id:D,field:N,reason:k,key:R}=T,z={id:D,field:N};k===Od.printableKeyDown?P.version.startsWith("17")?z.deleteValue=!0:z.initialValue=R:k===Od.deleteKeyDown&&(z.deleteValue=!0),e.current.startCellEditMode(z)},[e]),v=P.useCallback(T=>{const{id:D,field:N,reason:k}=T;e.current.runPendingEditCellValueMutation(D,N);let R;k===cc.enterKeyDown?R="below":k===cc.tabKeyDown?R="right":k===cc.shiftTabKeyDown&&(R="left");const z=k==="escapeKeyDown";e.current.stopCellEditMode({id:D,field:N,ignoreModifications:z,cellToFocusAfter:R})},[e]);Lt(e,"cellDoubleClick",d(f)),Lt(e,"cellFocusOut",d(m)),Lt(e,"cellKeyDown",d(p)),Lt(e,"cellEditStart",d(g)),Lt(e,"cellEditStop",d(v)),Kn(e,"cellEditStart",t.onCellEditStart),Kn(e,"cellEditStop",t.onCellEditStop);const b=P.useCallback((T,D)=>{const N=Pa(e.current.state);return N[T]&&N[T][D]?sn.Edit:sn.View},[e]),y=Wi(T=>{const D=T!==t.cellModesModel;u&&D&&u(T,{}),!(t.cellModesModel&&D)&&(n(T),i.current=T,e.current.publishEvent("cellModesModelChange",T))}),x=P.useCallback((T,D,N)=>{const k=L({},i.current);if(N!==null)k[T]=L({},k[T],{[D]:L({},N)});else{const R=k[T],z=Ie(R,[D].map(Vy));k[T]=z,Object.keys(k[T]).length===0&&delete k[T]}y(k)},[y]),S=P.useCallback((T,D,N)=>{e.current.setState(k=>{const R=L({},k.editRows);return N!==null?R[T]=L({},R[T],{[D]:L({},N)}):(delete R[T][D],Object.keys(R[T]).length===0&&delete R[T]),L({},k,{editRows:R})}),e.current.forceUpdate()},[e]),w=P.useCallback(T=>{const{id:D,field:N}=T,k=Ie(T,tJe);c(D,N),h(D,N,sn.View),x(D,N,L({mode:sn.Edit},k))},[c,h,x]),_=Wi(T=>{const{id:D,field:N,deleteValue:k,initialValue:R}=T;let z=e.current.getCellValue(D,N);(k||R)&&(z=k?"":R),S(D,N,{value:z,error:!1,isProcessingProps:!1}),e.current.setCellFocus(D,N)}),C=P.useCallback(T=>{const{id:D,field:N}=T,k=Ie(T,rJe);h(D,N,sn.Edit),x(D,N,L({mode:sn.View},k))},[h,x]),E=Wi(async T=>{const{id:D,field:N,ignoreModifications:k,cellToFocusAfter:R="none"}=T;h(D,N,sn.Edit),e.current.runPendingEditCellValueMutation(D,N);const z=()=>{S(D,N,null),x(D,N,null),R!=="none"&&e.current.moveFocusToRelativeCell(D,N,R)};if(k){z();return}const j=Pa(e.current.state),{error:$,isProcessingProps:U}=j[D][N];if($||U){o.current[D][N].mode=sn.Edit,x(D,N,{mode:sn.Edit});return}const H=e.current.getRowWithUpdatedValuesFromCellEditing(D,N);if(a){const V=Q=>{o.current[D][N].mode=sn.Edit,x(D,N,{mode:sn.Edit}),s?s(Q):nJe()};try{const Q=e.current.getRow(D);Promise.resolve(a(H,Q)).then(X=>{e.current.updateRows([X]),z()}).catch(V)}catch(Q){V(Q)}}else e.current.updateRows([H]),z()}),A=P.useCallback(async T=>{var D,N;const{id:k,field:R,value:z,debounceMs:j,unstable_skipValueParser:$}=T;c(k,R),h(k,R,sn.Edit);const U=e.current.getColumn(R),H=e.current.getRow(k);let V=z;U.valueParser&&!$&&(V=U.valueParser(z,e.current.getCellParams(k,R)));let Q=Pa(e.current.state),X=L({},Q[k][R],{value:V,changeReason:j?"debouncedSetEditCellValue":"setEditCellValue"});if(U.preProcessEditCellProps){const ne=z!==Q[k][R].value;X=L({},X,{isProcessingProps:!0}),S(k,R,X),X=await Promise.resolve(U.preProcessEditCellProps({id:k,row:H,props:X,hasChanged:ne}))}return e.current.getCellMode(k,R)===sn.View?!1:(Q=Pa(e.current.state),X=L({},X,{isProcessingProps:!1}),X.value=U.preProcessEditCellProps?Q[k][R].value:V,S(k,R,X),Q=Pa(e.current.state),!((D=Q[k])!=null&&(N=D[R])!=null&&N.error))},[e,c,h,S]),M=P.useCallback((T,D)=>{const N=e.current.getColumn(D),k=Pa(e.current.state),R=e.current.getRow(T);if(!k[T]||!k[T][D])return e.current.getRow(T);const{value:z}=k[T][D];return N.valueSetter?N.valueSetter({value:z,row:R}):L({},R,{[D]:z})},[e]),I={getCellMode:b,startCellEditMode:w,stopCellEditMode:C},O={setCellEditingEditCellValue:A,getRowWithUpdatedValuesFromCellEditing:M};wr(e,I,"public"),wr(e,O,"private"),P.useEffect(()=>{l&&y(l)},[l,y]),P.useEffect(()=>{const T=qM(e),D=o.current;o.current=Moe(r),Object.entries(r).forEach(([N,k])=>{Object.entries(k).forEach(([R,z])=>{var j,$,U;const H=((j=D[N])==null||($=j[R])==null?void 0:$.mode)||sn.View,V=(U=T[N])!=null?U:N;z.mode===sn.Edit&&H===sn.View?_(L({id:V,field:R},z)):z.mode===sn.View&&H===sn.Edit&&E(L({id:V,field:R},z))})})},[e,r,_,E])},oJe=["id"],aJe=["id"],sJe=od(["MUI: A call to `processRowUpdate` threw an error which was not handled because `onProcessRowUpdateError` is missing.","To handle the error pass a callback to the `onProcessRowUpdateError` prop, e.g. `<DataGrid onProcessRowUpdateError={(error) => ...} />`.","For more detail, see http://mui.com/components/data-grid/editing/#persistence."],"error"),lJe=(e,t)=>{const[r,n]=P.useState({}),i=P.useRef(r),o=P.useRef({}),a=P.useRef(null),s=P.useRef(null),{processRowUpdate:l,onProcessRowUpdateError:u,rowModesModel:d,onRowModesModelChange:c}=t,h=R=>(...z)=>{t.editMode===zu.Row&&R(...z)},f=P.useCallback((R,z)=>{const j=e.current.getCellParams(R,z);if(!e.current.isCellEditable(j))throw new Error(`MUI: The cell with id=${R} and field=${z} is not editable.`)},[e]),m=P.useCallback((R,z)=>{if(e.current.getRowMode(R)!==z)throw new Error(`MUI: The row with id=${R} is not in ${z} mode.`)},[e]),p=P.useCallback((R,z)=>{if(!R.isEditable||e.current.getRowMode(R.id)===En.Edit)return;const j=e.current.getRowParams(R.id),$=L({},j,{field:R.field,reason:Id.cellDoubleClick});e.current.publishEvent("rowEditStart",$,z)},[e]),g=P.useCallback(R=>{s.current=R},[]),v=P.useCallback((R,z)=>{R.isEditable&&e.current.getRowMode(R.id)!==En.View&&(s.current=null,a.current=setTimeout(()=>{var j;if(a.current=null,((j=s.current)==null?void 0:j.id)!==R.id){if(!e.current.getRow(R.id)||e.current.getRowMode(R.id)===En.View)return;const $=e.current.getRowParams(R.id),U=L({},$,{field:R.field,reason:dc.rowFocusOut});e.current.publishEvent("rowEditStop",U,z)}}))},[e]);P.useEffect(()=>()=>{clearTimeout(a.current)},[]);const b=P.useCallback((R,z)=>{if(R.cellMode===En.Edit){if(z.which===229)return;let j;if(z.key==="Escape")j=dc.escapeKeyDown;else if(z.key==="Enter")j=dc.enterKeyDown;else if(z.key==="Tab"){const $=Hc(e).filter(U=>e.current.isCellEditable(e.current.getCellParams(R.id,U)));if(z.shiftKey?R.field===$[0]&&(j=dc.shiftTabKeyDown):R.field===$[$.length-1]&&(j=dc.tabKeyDown),z.preventDefault(),!j){const U=$.findIndex(V=>V===R.field),H=$[z.shiftKey?U-1:U+1];e.current.setCellFocus(R.id,H)}}if(j){const $=e.current.getRowParams(R.id),U=L({},$,{reason:j,field:R.field});e.current.publishEvent("rowEditStop",U,z)}}else if(R.isEditable){let j;if(z.key===" "&&z.shiftKey)return;if(woe(z)||(z.ctrlKey||z.metaKey)&&z.key==="v"?j=Id.printableKeyDown:z.key==="Enter"?j=Id.enterKeyDown:(z.key==="Delete"||z.key==="Backspace")&&(j=Id.deleteKeyDown),j){const $=e.current.getRowParams(R.id),U=L({},$,{field:R.field,key:z.key,reason:j});e.current.publishEvent("rowEditStart",U,z)}}},[e]),y=P.useCallback(R=>{const{id:z,field:j,reason:$,key:U}=R,H={id:z,fieldToFocus:j};$===Id.printableKeyDown?P.version.startsWith("17")?H.deleteValue=!!j:H.initialValue=U:$===Id.deleteKeyDown&&(H.deleteValue=!!j),e.current.startRowEditMode(H)},[e]),x=P.useCallback(R=>{const{id:z,reason:j,field:$}=R;e.current.runPendingEditCellValueMutation(z);let U;j===dc.enterKeyDown?U="below":j===dc.tabKeyDown?U="right":j===dc.shiftTabKeyDown&&(U="left");const H=j==="escapeKeyDown";e.current.stopRowEditMode({id:z,ignoreModifications:H,field:$,cellToFocusAfter:U})},[e]);Lt(e,"cellDoubleClick",h(p)),Lt(e,"cellFocusIn",h(g)),Lt(e,"cellFocusOut",h(v)),Lt(e,"cellKeyDown",h(b)),Lt(e,"rowEditStart",h(y)),Lt(e,"rowEditStop",h(x)),Kn(e,"rowEditStart",t.onRowEditStart),Kn(e,"rowEditStop",t.onRowEditStop);const S=P.useCallback(R=>{if(t.editMode===zu.Cell)return En.View;const z=Pa(e.current.state);return z[R]&&Object.keys(z[R]).length>0?En.Edit:En.View},[e,t.editMode]),w=Wi(R=>{const z=R!==t.rowModesModel;c&&z&&c(R,{}),!(t.rowModesModel&&z)&&(n(R),i.current=R,e.current.publishEvent("rowModesModelChange",R))}),_=P.useCallback((R,z)=>{const j=L({},i.current);z!==null?j[R]=L({},z):delete j[R],w(j)},[w]),C=P.useCallback((R,z)=>{e.current.setState(j=>{const $=L({},j.editRows);return z!==null?$[R]=z:delete $[R],L({},j,{editRows:$})}),e.current.forceUpdate()},[e]),E=P.useCallback((R,z,j)=>{e.current.setState($=>{const U=L({},$.editRows);return j!==null?U[R]=L({},U[R],{[z]:L({},j)}):(delete U[R][z],Object.keys(U[R]).length===0&&delete U[R]),L({},$,{editRows:U})}),e.current.forceUpdate()},[e]),A=P.useCallback(R=>{const{id:z}=R,j=Ie(R,oJe);m(z,En.View),_(z,L({mode:En.Edit},j))},[m,_]),M=Wi(R=>{const{id:z,fieldToFocus:j,deleteValue:$,initialValue:U}=R,V=Hc(e).reduce((Q,X)=>{if(!e.current.getCellParams(z,X).isEditable)return Q;let J=e.current.getCellValue(z,X);return j===X&&($||U)&&(J=$?"":U),Q[X]={value:J,error:!1,isProcessingProps:!1},Q},{});C(z,V),j&&e.current.setCellFocus(z,j)}),I=P.useCallback(R=>{const{id:z}=R,j=Ie(R,aJe);m(z,En.Edit),_(z,L({mode:En.View},j))},[m,_]),O=Wi(R=>{const{id:z,ignoreModifications:j,field:$,cellToFocusAfter:U="none"}=R;e.current.runPendingEditCellValueMutation(z);const H=()=>{U!=="none"&&$&&e.current.moveFocusToRelativeCell(z,$,U),C(z,null),_(z,null)};if(j){H();return}const V=Pa(e.current.state),Q=e.current.getRow(z);if(Object.values(V[z]).some(W=>W.isProcessingProps)){o.current[z].mode=En.Edit;return}if(Object.values(V[z]).some(W=>W.error)){o.current[z].mode=En.Edit,_(z,{mode:En.Edit});return}const J=e.current.getRowWithUpdatedValuesFromRowEditing(z);if(l){const W=te=>{o.current[z].mode=En.Edit,_(z,{mode:En.Edit}),u?u(te):sJe()};try{Promise.resolve(l(J,Q)).then(te=>{e.current.updateRows([te]),H()}).catch(W)}catch(te){W(te)}}else e.current.updateRows([J]),H()}),T=P.useCallback(R=>{const{id:z,field:j,value:$,debounceMs:U,unstable_skipValueParser:H}=R;f(z,j);const V=e.current.getColumn(j),Q=e.current.getRow(z);let X=$;V.valueParser&&!H&&(X=V.valueParser($,e.current.getCellParams(z,j)));let ne=Pa(e.current.state),J=L({},ne[z][j],{value:X,changeReason:U?"debouncedSetEditCellValue":"setEditCellValue"});return V.preProcessEditCellProps||E(z,j,J),new Promise(W=>{const te=[];if(V.preProcessEditCellProps){const Z=J.value!==ne[z][j].value;J=L({},J,{isProcessingProps:!0}),E(z,j,J);const q=ne[z],ie=Ie(q,[j].map(Vy)),he=Promise.resolve(V.preProcessEditCellProps({id:z,row:Q,props:J,hasChanged:Z,otherFieldsProps:ie})).then(ae=>{if(e.current.getRowMode(z)===En.View){W(!1);return}ne=Pa(e.current.state),ae=L({},ae,{isProcessingProps:!1}),ae.value=V.preProcessEditCellProps?ne[z][j].value:X,E(z,j,ae)});te.push(he)}Object.entries(ne[z]).forEach(([Z,q])=>{if(Z===j)return;const ie=e.current.getColumn(Z);if(!ie.preProcessEditCellProps)return;q=L({},q,{isProcessingProps:!0}),E(z,Z,q),ne=Pa(e.current.state);const he=ne[z],ae=Ie(he,[Z].map(Vy)),be=Promise.resolve(ie.preProcessEditCellProps({id:z,row:Q,props:q,hasChanged:!1,otherFieldsProps:ae})).then(ye=>{if(e.current.getRowMode(z)===En.View){W(!1);return}ye=L({},ye,{isProcessingProps:!1}),E(z,Z,ye)});te.push(be)}),Promise.all(te).then(()=>{e.current.getRowMode(z)===En.Edit?(ne=Pa(e.current.state),W(!ne[z][j].error)):W(!1)})})},[e,f,E]),D=P.useCallback(R=>{const z=Pa(e.current.state),j=e.current.getRow(R);if(!z[R])return e.current.getRow(R);let $=L({},j);return Object.entries(z[R]).forEach(([U,H])=>{const V=e.current.getColumn(U);V.valueSetter?$=V.valueSetter({value:H.value,row:$}):$[U]=H.value}),$},[e]),N={getRowMode:S,startRowEditMode:A,stopRowEditMode:I},k={setRowEditingEditCellValue:T,getRowWithUpdatedValuesFromRowEditing:D};wr(e,N,"public"),wr(e,k,"private"),P.useEffect(()=>{d&&w(d)},[d,w]),P.useEffect(()=>{const R=qM(e),z=o.current;o.current=Moe(r),Object.entries(r).forEach(([j,$])=>{var U,H;const V=((U=z[j])==null?void 0:U.mode)||En.View,Q=(H=R[j])!=null?H:j;$.mode===En.Edit&&V===En.View?M(L({id:Q},$)):$.mode===En.View&&V===En.Edit&&O(L({id:Q},$))})},[e,r,M,O])},uJe=e=>L({},e,{editRows:{}}),cJe=(e,t)=>{iJe(e,t),lJe(e,t);const r=P.useRef({}),{isCellEditable:n}=t,i=P.useCallback(h=>Ww(h.rowNode)||!h.colDef.editable||!h.colDef.renderEditCell?!1:n?n(h):h.rowNode.type!=="pinnedRow",[n]),o=(h,f,m,p)=>{if(!m){p();return}if(r.current[h]||(r.current[h]={}),r.current[h][f]){const[b]=r.current[h][f];clearTimeout(b)}const g=()=>{const[b]=r.current[h][f];clearTimeout(b),p(),delete r.current[h][f]},v=setTimeout(()=>{p(),delete r.current[h][f]},m);r.current[h][f]=[v,g]};P.useEffect(()=>{const h=r.current;return()=>{Object.entries(h).forEach(([f,m])=>{Object.keys(m).forEach(p=>{const[g]=h[f][p];clearTimeout(g),delete h[f][p]})})}},[]);const a=P.useCallback((h,f)=>{if(r.current[h]){if(!f)Object.keys(r.current[h]).forEach(m=>{const[,p]=r.current[h][m];p()});else if(r.current[h][f]){const[,m]=r.current[h][f];m()}}},[]),s=P.useCallback(h=>{const{id:f,field:m,debounceMs:p}=h;return new Promise(g=>{o(f,m,p,async()=>{const v=t.editMode===zu.Row?e.current.setRowEditingEditCellValue:e.current.setCellEditingEditCellValue;if(e.current.getCellMode(f,m)===sn.Edit){const b=await v(h);g(b)}})})},[e,t.editMode]),l=P.useCallback((h,f)=>t.editMode===zu.Cell?e.current.getRowWithUpdatedValuesFromCellEditing(h,f):e.current.getRowWithUpdatedValuesFromRowEditing(h),[e,t.editMode]),u=P.useCallback((h,f)=>({changeReason:Pa(e.current.state)[h][f].changeReason}),[e]),d={isCellEditable:i,setEditCellValue:s,getRowWithUpdatedValues:l,unstable_getEditCellMeta:u},c={runPendingEditCellValueMutation:a};wr(e,d,"public"),wr(e,c,"private")},dJe=(e,t,r)=>(r.current.caches.rows=GA({rows:t.rows,getRowId:t.getRowId,loading:t.loading,rowCount:t.rowCount}),L({},e,{rows:poe({apiRef:r,rowCountProp:t.rowCount,loadingProp:t.loading,previousTree:null,previousTreeDepths:null})})),hJe=(e,t)=>{const r=ma(e,"useGridRows"),n=hg(e,t),i=P.useRef(Date.now()),o=P.useRef(null),a=P.useCallback(M=>{const I=cm(e)[M];if(I)return I;const O=e.current.getRowNode(M);return O&&Ww(O)?{}:null},[e]),s=P.useMemo(()=>n.rows.reduce((M,{id:I},O)=>(M[I]=O,M),{}),[n.rows]),l=P.useCallback(({cache:M,throttle:I})=>{const O=()=>{o.current=null,i.current=Date.now(),e.current.setState(D=>L({},D,{rows:poe({apiRef:e,rowCountProp:t.rowCount,loadingProp:t.loading,previousTree:Il(e),previousTreeDepths:H8(e)})})),e.current.publishEvent("rowsSet"),e.current.forceUpdate()};if(o.current&&(clearTimeout(o.current),o.current=null),e.current.caches.rows=M,!I){O();return}const T=t.throttleRowsMs-(Date.now()-i.current);if(T>0){o.current=setTimeout(O,T);return}O()},[t.throttleRowsMs,t.rowCount,t.loading,e]),u=P.useCallback(M=>{r.debug(`Updating all rows, new length ${M.length}`);const I=GA({rows:M,getRowId:t.getRowId,loading:t.loading,rowCount:t.rowCount}),O=e.current.caches.rows;I.rowsBeforePartialUpdates=O.rowsBeforePartialUpdates,l({cache:I,throttle:!0})},[r,t.getRowId,t.loading,t.rowCount,l,e]),d=P.useCallback(M=>{if(t.signature===Du.DataGrid&&M.length>1)throw new Error(["MUI: You can't update several rows at once in `apiRef.current.updateRows` on the DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock this feature."].join(`
`));const I=y7e({updates:M,getRowId:t.getRowId,previousCache:e.current.caches.rows});l({cache:I,throttle:!0})},[t.signature,t.getRowId,l,e]),c=P.useCallback(()=>{const M=iC(e),I=cm(e);return new Map(M.map(O=>{var T;return[O,(T=I[O])!=null?T:{}]}))},[e]),h=P.useCallback(()=>J2(e),[e]),f=P.useCallback(()=>iC(e),[e]),m=P.useCallback(M=>s[M],[s]),p=P.useCallback((M,I)=>{const O=e.current.getRowNode(M);if(!O)throw new Error(`MUI: No row with id #${M} found`);if(O.type!=="group")throw new Error("MUI: Only group nodes can be expanded or collapsed");const T=L({},O,{childrenExpanded:I});e.current.setState(D=>L({},D,{rows:L({},D.rows,{tree:L({},D.rows.tree,{[M]:T})})})),e.current.forceUpdate(),e.current.publishEvent("rowExpansionChange",T)},[e]),g=P.useCallback(M=>{var I;return(I=Il(e)[M])!=null?I:null},[e]),v=P.useCallback(({skipAutoGeneratedRows:M=!0,groupId:I,applySorting:O,applyFiltering:T})=>{const D=Il(e);let N;if(O){const k=D[I];if(!k)return[];const R=d4(e);N=[];const z=R.findIndex(j=>j===I)+1;for(let j=z;j<R.length&&D[R[j]].depth>k.depth;j+=1){const $=R[j];(!M||!Ww(D[$]))&&N.push($)}}else N=v4(D,I,M);if(T){const k=soe(e);N=N.filter(R=>k[R]!==!1)}return N},[e]),b=P.useCallback((M,I)=>{const O=e.current.getRowNode(M);if(!O)throw new Error(`MUI: No row with id #${M} found`);if(O.parent!==ia)throw new Error("MUI: The row reordering do not support reordering of grouped rows yet");if(O.type!=="leaf")throw new Error("MUI: The row reordering do not support reordering of footer or grouping rows");e.current.setState(T=>{const D=Il(T,e.current.instanceId)[ia],N=D.children,k=N.findIndex(z=>z===M);if(k===-1||k===I)return T;r.debug(`Moving row ${M} to index ${I}`);const R=[...N];return R.splice(I,0,R.splice(k,1)[0]),L({},T,{rows:L({},T.rows,{tree:L({},T.rows.tree,{[ia]:L({},D,{children:R})})})})}),e.current.publishEvent("rowsSet")},[e,r]),y=P.useCallback((M,I)=>{if(t.signature===Du.DataGrid&&I.length>1)throw new Error(["MUI: You can't replace rows using `apiRef.current.unstable_replaceRows` on the DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock this feature."].join(`
`));if(I.length===0)return;if(eO(e)>1)throw new Error("`apiRef.current.unstable_replaceRows` is not compatible with tree data and row grouping");const T=L({},Il(e)),D=L({},cm(e)),N=L({},qM(e)),k=T[ia],R=[...k.children];for(let j=0;j<I.length;j+=1){const $=I[j],U=g4($,t.getRowId,"A row was provided without id when calling replaceRows()."),[H]=R.splice(M+j,1,U);delete D[H],delete N[H],delete T[H];const V={id:U,depth:0,parent:ia,type:"leaf",groupingKey:null};D[U]=$,N[U]=U,T[U]=V}T[ia]=L({},k,{children:R});const z=R.filter(j=>T[j].type==="leaf");e.current.caches.rows.dataRowIdToModelLookup=D,e.current.caches.rows.dataRowIdToIdLookup=N,e.current.setState(j=>L({},j,{rows:L({},j.rows,{dataRowIdToModelLookup:D,dataRowIdToIdLookup:N,dataRowIds:z,tree:T})})),e.current.publishEvent("rowsSet")},[e,t.signature,t.getRowId]),x={getRow:a,getRowModels:c,getRowsCount:h,getAllRowIds:f,setRows:u,updateRows:d,getRowNode:g,getRowIndexRelativeToVisibleRows:m,unstable_replaceRows:y},S={setRowIndex:b,setRowChildrenExpansion:p,getRowGroupChildren:v},w=P.useCallback(()=>{r.info("Row grouping pre-processing have changed, regenerating the row tree");let M;e.current.caches.rows.rowsBeforePartialUpdates===t.rows?M=L({},e.current.caches.rows,{updates:{type:"full",rows:iC(e)}}):M=GA({rows:t.rows,getRowId:t.getRowId,loading:t.loading,rowCount:t.rowCount}),l({cache:M,throttle:!1})},[r,e,t.rows,t.getRowId,t.loading,t.rowCount,l]),_=P.useCallback(M=>{M==="rowTreeCreation"&&w()},[w]),C=P.useCallback(()=>{e.current.getActiveStrategy("rowTree")!==e7e(e)&&w()},[e,w]);Lt(e,"activeStrategyProcessorChange",_),Lt(e,"strategyAvailabilityChange",C);const E=P.useCallback(()=>{e.current.setState(M=>{const I=e.current.unstable_applyPipeProcessors("hydrateRows",{tree:Il(M,e.current.instanceId),treeDepths:H8(M,e.current.instanceId),dataRowIds:iC(M,e.current.instanceId),dataRowIdToModelLookup:cm(M,e.current.instanceId),dataRowIdToIdLookup:qM(M,e.current.instanceId)});return L({},M,{rows:L({},M.rows,I,{totalTopLevelRowCount:foe({tree:I.tree,rowCountProp:t.rowCount})})})}),e.current.publishEvent("rowsSet"),e.current.forceUpdate()},[e,t.rowCount]);M4(e,"hydrateRows",E),wr(e,x,"public"),wr(e,S,t.signature===Du.DataGrid?"private":"public"),P.useEffect(()=>()=>{o.current!==null&&clearTimeout(o.current)},[]);const A=P.useRef(!0);P.useEffect(()=>{if(A.current){A.current=!1;return}const M=e.current.caches.rows.rowsBeforePartialUpdates===t.rows,I=e.current.caches.rows.loadingPropBeforePartialUpdates===t.loading,O=e.current.caches.rows.rowCountPropBeforePartialUpdates===t.rowCount;if(M){I||(e.current.setState(T=>L({},T,{rows:L({},T.rows,{loading:t.loading})})),e.current.caches.rows.loadingPropBeforePartialUpdates=t.loading,e.current.forceUpdate()),O||(e.current.setState(T=>L({},T,{rows:L({},T.rows,{totalRowCount:Math.max(t.rowCount||0,T.rows.totalRowCount),totalTopLevelRowCount:Math.max(t.rowCount||0,T.rows.totalTopLevelRowCount)})})),e.current.caches.rows.rowCountPropBeforePartialUpdates=t.rowCount,e.current.forceUpdate());return}r.debug(`Updating all rows, new length ${t.rows.length}`),l({cache:GA({rows:t.rows,getRowId:t.getRowId,loading:t.loading,rowCount:t.rowCount}),throttle:!1})},[t.rows,t.rowCount,t.getRowId,t.loading,r,l,e])},fJe=e=>{const t={[ia]:L({},g7e(),{children:e})};for(let r=0;r<e.length;r+=1){const n=e[r];t[n]={id:n,depth:0,parent:ia,type:"leaf",groupingKey:null}}return{groupingName:ib,tree:t,treeDepths:{0:e.length},dataRowIds:e}},pJe=({previousTree:e,actions:t})=>{const r=L({},e),n={};for(let a=0;a<t.remove.length;a+=1){const s=t.remove[a];n[s]=!0,delete r[s]}for(let a=0;a<t.insert.length;a+=1){const s=t.insert[a];r[s]={id:s,depth:0,parent:ia,type:"leaf",groupingKey:null}}const i=r[ia];let o=[...i.children,...t.insert];return Object.values(n).length&&(o=o.filter(a=>!n[a])),r[ia]=L({},i,{children:o}),{groupingName:ib,tree:r,treeDepths:{0:o.length},dataRowIds:o}},mJe=e=>e.updates.type==="full"?fJe(e.updates.rows):pJe({previousTree:e.previousTree,actions:e.updates.actions}),gJe=e=>{P4(e,ib,"rowTreeCreation",mJe)};function vJe(e){const t=P.useCallback(d=>({field:d,colDef:e.current.getColumn(d)}),[e]),r=P.useCallback(d=>{const c=e.current.getRow(d);if(!c)throw new Error(`No row with id #${d} found`);return{id:d,columns:e.current.getAllColumns(),row:c}},[e]),n=P.useCallback((d,c)=>{const h=e.current.getRow(d),f=e.current.getRowNode(d);if(!h||!f)throw new Error(`No row with id #${d} found`);const m=vc(e),p=XM(e);return{id:d,field:c,row:h,rowNode:f,value:h[c],colDef:e.current.getColumn(c),cellMode:e.current.getCellMode(d,c),api:e.current,hasFocus:m!==null&&m.field===c&&m.id===d,tabIndex:p&&p.field===c&&p.id===d?0:-1}},[e]),i=P.useCallback((d,c)=>{const h=e.current.getColumn(c),f=e.current.getCellValue(d,c),m=e.current.getRow(d),p=e.current.getRowNode(d);if(!m||!p)throw new Error(`No row with id #${d} found`);const g=vc(e),v=XM(e),b={id:d,field:c,row:m,rowNode:p,colDef:h,cellMode:e.current.getCellMode(d,c),hasFocus:g!==null&&g.field===c&&g.id===d,tabIndex:v&&v.field===c&&v.id===d?0:-1,value:f,formattedValue:f};return h&&h.valueFormatter&&(b.formattedValue=h.valueFormatter({id:d,field:b.field,value:b.value,api:e.current})),b.isEditable=h&&e.current.isCellEditable(b),b},[e]),o=P.useCallback((d,c)=>{const h=e.current.getColumn(c);if(!h||!h.valueGetter){const f=e.current.getRow(d);if(!f)throw new Error(`No row with id #${d} found`);return f[c]}return h.valueGetter(n(d,c))},[e,n]),a=P.useCallback(d=>e.current.rootElementRef.current?BKe(e.current.rootElementRef.current,d):null,[e]),s=P.useCallback(d=>e.current.rootElementRef.current?FKe(e.current.rootElementRef.current,d):null,[e]),l=P.useCallback((d,c)=>e.current.rootElementRef.current?jKe(e.current.rootElementRef.current,{id:d,field:c}):null,[e]);wr(e,{getCellValue:o,getCellParams:i,getCellElement:l,getRowParams:r,getRowElement:s,getColumnHeaderParams:t,getColumnHeaderElement:a},"public")}const Zoe=(e,t)=>e==null||Array.isArray(e)?e:t&&t[0]===e?t:[e],yJe=(e,t)=>{var r;return L({},e,{rowSelection:t.rowSelection?(r=Zoe(t.rowSelectionModel))!=null?r:[]:[]})},bJe=(e,t)=>{const r=ma(e,"useGridSelection"),n=N=>(...k)=>{t.rowSelection&&N(...k)},i=P.useMemo(()=>Zoe(t.rowSelectionModel,Cl(e.current.state)),[e,t.rowSelectionModel]),o=P.useRef(null);e.current.registerControlState({stateId:"rowSelection",propModel:i,propOnChange:t.onRowSelectionModelChange,stateSelector:Cl,changeEvent:"rowSelectionChange"});const{checkboxSelection:a,disableMultipleRowSelection:s,disableRowSelectionOnClick:l,pagination:u,paginationMode:d,isRowSelectable:c}=t,h=!s||a,f=hg(e,t),m=P.useCallback(N=>{var k;let R=N;const z=(k=o.current)!=null?k:N,j=e.current.isRowSelected(N);if(j){const $=b1(e),U=$.findIndex(V=>V===z),H=$.findIndex(V=>V===R);if(U===H)return;U>H?R=$[H+1]:R=$[H-1]}o.current=N,e.current.selectRowRange({startId:z,endId:R},!j)},[e]),p=P.useCallback(N=>{if(t.signature===Du.DataGrid&&!t.checkboxSelection&&Array.isArray(N)&&N.length>1)throw new Error(["MUI: `rowSelectionModel` can only contain 1 item in DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock multiple selection."].join(`
`));Cl(e.current.state)!==N&&(r.debug("Setting selection model"),e.current.setState(R=>L({},R,{rowSelection:t.rowSelection?N:[]})),e.current.forceUpdate())},[e,r,t.rowSelection,t.signature,t.checkboxSelection]),g=P.useCallback(N=>Cl(e.current.state).includes(N),[e]),v=P.useCallback(N=>{if(c&&!c(e.current.getRowParams(N)))return!1;const k=e.current.getRowNode(N);return!((k==null?void 0:k.type)==="footer"||(k==null?void 0:k.type)==="pinnedRow")},[e,c]),b=P.useCallback(()=>aXe(e),[e]),y=P.useCallback((N,k=!0,R=!1)=>{if(e.current.isRowSelectable(N))if(o.current=N,R)r.debug(`Setting selection for row ${N}`),e.current.setRowSelectionModel(k?[N]:[]);else{r.debug(`Toggling selection for row ${N}`);const j=Cl(e.current.state).filter(U=>U!==N);k&&j.push(N),(j.length<2||h)&&e.current.setRowSelectionModel(j)}},[e,r,h]),x=P.useCallback((N,k=!0,R=!1)=>{r.debug("Setting selection for several rows");const z=N.filter(U=>e.current.isRowSelectable(U));let j;if(R)j=k?z:[];else{const U=L({},QM(e));z.forEach(H=>{k?U[H]=H:delete U[H]}),j=Object.values(U)}(j.length<2||h)&&e.current.setRowSelectionModel(j)},[e,r,h]),S=P.useCallback(({startId:N,endId:k},R=!0,z=!1)=>{if(!e.current.getRow(N)||!e.current.getRow(k))return;r.debug(`Expanding selection from row ${N} to row ${k}`);const j=b1(e),$=j.indexOf(N),U=j.indexOf(k),[H,V]=$>U?[U,$]:[$,U],Q=j.slice(H,V+1);e.current.selectRows(Q,R,z)},[e,r]),w={selectRow:y,setRowSelectionModel:p,getSelectedRows:b,isRowSelected:g,isRowSelectable:v},_={selectRows:x,selectRowRange:S};wr(e,w,"public"),wr(e,_,t.signature===Du.DataGrid?"private":"public");const C=P.useCallback(()=>{if(t.keepNonExistentRowsSelected)return;const N=Cl(e.current.state),k=cm(e),R=L({},QM(e));let z=!1;N.forEach(j=>{k[j]||(delete R[j],z=!0)}),z&&e.current.setRowSelectionModel(Object.values(R))},[e,t.keepNonExistentRowsSelected]),E=P.useCallback((N,k)=>{const R=k.metaKey||k.ctrlKey,z=!a&&!R&&!Q7e(k),j=!h||z,$=e.current.isRowSelected(N);j?e.current.selectRow(N,z?!0:!$,!0):e.current.selectRow(N,!$,!1)},[e,h,a]),A=P.useCallback((N,k)=>{var R;if(l)return;const z=(R=k.target.closest(`.${ge.cell}`))==null?void 0:R.getAttribute("data-field");z===QS.field||z===E4||z&&e.current.getColumn(z).type===A4||e.current.getRowNode(N.id).type==="pinnedRow"||(k.shiftKey&&(h||a)?m(N.id):E(N.id,k))},[l,h,a,e,m,E]),M=P.useCallback((N,k)=>{if(h&&k.shiftKey){var R;(R=window.getSelection())==null||R.removeAllRanges()}},[h]),I=P.useCallback((N,k)=>{k.nativeEvent.shiftKey?m(N.id):e.current.selectRow(N.id,N.value)},[e,m]),O=P.useCallback(N=>{const R=t.checkboxSelectionVisibleOnly&&t.pagination?Doe(e):b1(e);e.current.selectRows(R,N.value)},[e,t.checkboxSelectionVisibleOnly,t.pagination]),T=P.useCallback((N,k)=>{if(e.current.getCellMode(N.id,N.field)!==sn.Edit&&k.currentTarget.contains(k.target)){if(b4(k.key)&&k.shiftKey){const R=vc(e);if(R&&R.id!==N.id){k.preventDefault();const z=e.current.isRowSelected(R.id);if(!h){e.current.selectRow(R.id,!z,!0);return}const j=e.current.getRowIndexRelativeToVisibleRows(R.id),$=e.current.getRowIndexRelativeToVisibleRows(N.id);let U,H;j>$?z?(U=$,H=j-1):(U=$,H=j):z?(U=j+1,H=$):(U=j,H=$);const V=f.rows.slice(U,H+1).map(Q=>Q.id);e.current.selectRows(V,!z);return}}if(k.key===" "&&k.shiftKey){k.preventDefault(),E(N.id,k);return}k.key==="a"&&(k.ctrlKey||k.metaKey)&&(k.preventDefault(),x(e.current.getAllRowIds(),!0))}},[e,E,x,f.rows,h]);Lt(e,"sortedRowsSet",n(C)),Lt(e,"rowClick",n(A)),Lt(e,"rowSelectionCheckboxChange",n(I)),Lt(e,"headerSelectionCheckboxChange",O),Lt(e,"cellMouseDown",n(M)),Lt(e,"cellKeyDown",n(T)),P.useEffect(()=>{i!==void 0&&e.current.setRowSelectionModel(i)},[e,i,t.rowSelection]),P.useEffect(()=>{t.rowSelection||e.current.setRowSelectionModel([])},[e,t.rowSelection]);const D=i!=null;P.useEffect(()=>{if(D||!t.rowSelection)return;const N=Cl(e.current.state);if(v){const k=N.filter(R=>v(R));k.length<N.length&&e.current.setRowSelectionModel(k)}},[e,v,D,t.rowSelection]),P.useEffect(()=>{if(!t.rowSelection)return;const N=Cl(e.current.state);if(!h&&N.length>1){const{rows:k}=iO(e,{pagination:u,paginationMode:d}),R=k.reduce((j,{id:$})=>(j[$]=!0,j),{}),z=N.find(j=>{let $=!0;return v&&($=v(j)),$&&R[j]});e.current.setRowSelectionModel(z!==void 0?[z]:[])}},[e,h,a,s,v,u,d,t.rowSelection])},xJe={noRowsLabel:"No rows",noResultsOverlayLabel:"No results found.",toolbarDensity:"Density",toolbarDensityLabel:"Density",toolbarDensityCompact:"Compact",toolbarDensityStandard:"Standard",toolbarDensityComfortable:"Comfortable",toolbarColumns:"Columns",toolbarColumnsLabel:"Select columns",toolbarFilters:"Filters",toolbarFiltersLabel:"Show filters",toolbarFiltersTooltipHide:"Hide filters",toolbarFiltersTooltipShow:"Show filters",toolbarFiltersTooltipActive:e=>e!==1?`${e} active filters`:`${e} active filter`,toolbarQuickFilterPlaceholder:"Search",toolbarQuickFilterLabel:"Search",toolbarQuickFilterDeleteIconLabel:"Clear",toolbarExport:"Export",toolbarExportLabel:"Export",toolbarExportCSV:"Download as CSV",toolbarExportPrint:"Print",toolbarExportExcel:"Download as Excel",columnsPanelTextFieldLabel:"Find column",columnsPanelTextFieldPlaceholder:"Column title",columnsPanelDragIconLabel:"Reorder column",columnsPanelShowAllButton:"Show all",columnsPanelHideAllButton:"Hide all",filterPanelAddFilter:"Add filter",filterPanelRemoveAll:"Remove all",filterPanelDeleteIconLabel:"Delete",filterPanelLogicOperator:"Logic operator",filterPanelOperator:"Operator",filterPanelOperatorAnd:"And",filterPanelOperatorOr:"Or",filterPanelColumns:"Columns",filterPanelInputLabel:"Value",filterPanelInputPlaceholder:"Filter value",filterOperatorContains:"contains",filterOperatorEquals:"equals",filterOperatorStartsWith:"starts with",filterOperatorEndsWith:"ends with",filterOperatorIs:"is",filterOperatorNot:"is not",filterOperatorAfter:"is after",filterOperatorOnOrAfter:"is on or after",filterOperatorBefore:"is before",filterOperatorOnOrBefore:"is on or before",filterOperatorIsEmpty:"is empty",filterOperatorIsNotEmpty:"is not empty",filterOperatorIsAnyOf:"is any of",filterValueAny:"any",filterValueTrue:"true",filterValueFalse:"false",columnMenuLabel:"Menu",columnMenuShowColumns:"Show columns",columnMenuManageColumns:"Manage columns",columnMenuFilter:"Filter",columnMenuHideColumn:"Hide column",columnMenuUnsort:"Unsort",columnMenuSortAsc:"Sort by ASC",columnMenuSortDesc:"Sort by DESC",columnHeaderFiltersTooltipActive:e=>e!==1?`${e} active filters`:`${e} active filter`,columnHeaderFiltersLabel:"Show filters",columnHeaderSortIconLabel:"Sort",footerRowSelected:e=>e!==1?`${e.toLocaleString()} rows selected`:`${e.toLocaleString()} row selected`,footerTotalRows:"Total Rows:",footerTotalVisibleRows:(e,t)=>`${e.toLocaleString()} of ${t.toLocaleString()}`,checkboxSelectionHeaderName:"Checkbox selection",checkboxSelectionSelectAllRows:"Select all rows",checkboxSelectionUnselectAllRows:"Unselect all rows",checkboxSelectionSelectRow:"Select row",checkboxSelectionUnselectRow:"Unselect row",booleanCellTrueLabel:"yes",booleanCellFalseLabel:"no",actionsCellMore:"more",pinToLeft:"Pin to left",pinToRight:"Pin to right",unpin:"Unpin",treeDataGroupingHeaderName:"Group",treeDataExpand:"see children",treeDataCollapse:"hide children",groupingColumnHeaderName:"Group",groupColumn:e=>`Group by ${e}`,unGroupColumn:e=>`Stop grouping by ${e}`,detailPanelToggle:"Detail panel toggle",expandDetailPanel:"Expand",collapseDetailPanel:"Collapse",MuiTablePagination:{},rowReorderingHeaderName:"Row reordering",aggregationMenuItemHeader:"Aggregation",aggregationFunctionLabelSum:"sum",aggregationFunctionLabelAvg:"avg",aggregationFunctionLabelMin:"min",aggregationFunctionLabelMax:"max",aggregationFunctionLabelSize:"size"},wJe=e=>{const{classes:t}=e;return P.useMemo(()=>lt({cellCheckbox:["cellCheckbox"],columnHeaderCheckbox:["columnHeaderCheckbox"]},Er,t),[t])},SJe=(e,t)=>{const r={classes:t.classes},n=wJe(r),i=P.useCallback(o=>{const a=L({},QS,{cellClassName:n.cellCheckbox,headerClassName:n.columnHeaderCheckbox,headerName:e.current.getLocaleText("checkboxSelectionHeaderName")}),s=t.checkboxSelection,l=o.lookup[qh]!=null;return s&&!l?(o.lookup[qh]=a,o.orderedFields=[qh,...o.orderedFields]):!s&&l?(delete o.lookup[qh],o.orderedFields=o.orderedFields.filter(u=>u!==qh)):s&&l&&(o.lookup[qh]=L({},a,o.lookup[qh])),o},[e,n,t.checkboxSelection]);Mo(e,"hydrateColumns",i)},_Je=(e,t)=>{var r,n,i,o;const a=(r=(n=t.sortModel)!=null?n:(i=t.initialState)==null||(o=i.sorting)==null?void 0:o.sortModel)!=null?r:[];return L({},e,{sorting:{sortModel:zoe(a,t.disableMultipleColumnsSorting),sortedRows:[]}})},CJe=(e,t)=>{var r,n;const i=ma(e,"useGridSorting");e.current.registerControlState({stateId:"sortModel",propModel:t.sortModel,propOnChange:t.onSortModelChange,stateSelector:_l,changeEvent:"sortModelChange"});const o=P.useCallback((_,C)=>{const E=_l(e),A=E.findIndex(I=>I.field===_);let M=[...E];return A>-1?C?M.splice(A,1,C):M.splice(A,1):M=[...E,C],M},[e]),a=P.useCallback((_,C)=>{var E;const M=_l(e).find(O=>O.field===_.field);if(M){var I;const O=C===void 0?i9((I=_.sortingOrder)!=null?I:t.sortingOrder,M.sort):C;return O==null?void 0:L({},M,{sort:O})}return{field:_.field,sort:C===void 0?i9((E=_.sortingOrder)!=null?E:t.sortingOrder):C}},[e,t.sortingOrder]),s=P.useCallback((_,C)=>C==null||C.sortable===!1?_:(C.sortingOrder||t.sortingOrder).some(A=>!!A)?[..._,"ColumnMenuSortItem"]:_,[t.sortingOrder]),l=P.useCallback(()=>{e.current.setState(_=>{if(t.sortingMode==="server")return i.debug("Skipping sorting rows as sortingMode = server"),L({},_,{sorting:L({},_.sorting,{sortedRows:v4(Il(e),ia,!1)})});const C=_l(_,e.current.instanceId),E=CQe(C,e),A=e.current.applyStrategyProcessor("sorting",{sortRowList:E});return L({},_,{sorting:L({},_.sorting,{sortedRows:A})})}),e.current.publishEvent("sortedRowsSet"),e.current.forceUpdate()},[e,i,t.sortingMode]),u=P.useCallback(_=>{_l(e)!==_&&(i.debug("Setting sort model"),e.current.setState(n9(_,t.disableMultipleColumnsSorting)),e.current.forceUpdate(),e.current.applySorting())},[e,i,t.disableMultipleColumnsSorting]),d=P.useCallback((_,C,E)=>{if(!_.sortable)return;const A=a(_,C);let M;!E||t.disableMultipleColumnsSorting?M=A?[A]:[]:M=o(_.field,A),e.current.setSortModel(M)},[e,o,a,t.disableMultipleColumnsSorting]),c=P.useCallback(()=>_l(e),[e]),h=P.useCallback(()=>h4(e).map(C=>C.model),[e]),f=P.useCallback(()=>d4(e),[e]),m=P.useCallback(_=>e.current.getSortedRowIds()[_],[e]);wr(e,{getSortModel:c,getSortedRows:h,getSortedRowIds:f,getRowIdFromRowIndex:m,setSortModel:u,sortColumn:d,applySorting:l},"public");const g=P.useCallback((_,C)=>{var E,A;const M=_l(e);return!C.exportOnlyDirtyModels||t.sortModel!=null||((E=t.initialState)==null||(A=E.sorting)==null?void 0:A.sortModel)!=null||M.length>0?L({},_,{sorting:{sortModel:M}}):_},[e,t.sortModel,(r=t.initialState)==null||(n=r.sorting)==null?void 0:n.sortModel]),v=P.useCallback((_,C)=>{var E;const A=(E=C.stateToRestore.sorting)==null?void 0:E.sortModel;return A==null?_:(e.current.setState(n9(A,t.disableMultipleColumnsSorting)),L({},_,{callbacks:[..._.callbacks,e.current.applySorting]}))},[e,t.disableMultipleColumnsSorting]),b=P.useCallback(_=>{const C=Il(e),E=C[ia],A=_.sortRowList?_.sortRowList(E.children.map(M=>C[M])):[...E.children];return E.footerId!=null&&A.push(E.footerId),A},[e]);Mo(e,"exportState",g),Mo(e,"restoreState",v),P4(e,ib,"sorting",b);const y=P.useCallback(({colDef:_},C)=>{const E=C.shiftKey||C.metaKey||C.ctrlKey;d(_,void 0,E)},[d]),x=P.useCallback(({colDef:_},C)=>{q7e(C.key)&&!C.ctrlKey&&!C.metaKey&&d(_,void 0,C.shiftKey)},[d]),S=P.useCallback(()=>{const _=_l(e),C=nb(e);if(_.length>0){const E=_.filter(A=>C[A.field]);E.length<_.length&&e.current.setSortModel(E)}},[e]),w=P.useCallback(_=>{_==="sorting"&&e.current.applySorting()},[e]);Mo(e,"columnMenu",s),Lt(e,"columnHeaderClick",y),Lt(e,"columnHeaderKeyDown",x),Lt(e,"rowsSet",e.current.applySorting),Lt(e,"columnsChange",S),Lt(e,"activeStrategyProcessorChange",w),YS(()=>{e.current.applySorting()}),P.useEffect(()=>{t.sortModel!==void 0&&e.current.setSortModel(t.sortModel)},[e,t.sortModel])};function g9(e){const{clientHeight:t,scrollTop:r,offsetHeight:n,offsetTop:i}=e,o=i+n;if(n>t)return i;if(o-t>r)return o-t;if(i<r)return i}const AJe=(e,t)=>{const r=Qa(),n=ma(e,"useGridScroll"),i=e.current.columnHeadersElementRef,o=e.current.virtualScrollerRef,a=St(e,yp),s=P.useCallback(c=>{const h=J2(e),f=Ha(e);if(!(c.rowIndex==null)&&h===0||f.length===0)return!1;n.debug(`Scrolling to cell at row ${c.rowIndex}, col: ${c.colIndex} `);let p={};if(c.colIndex!=null){const y=g0(e);let x;if(typeof c.rowIndex<"u"){var g;const S=(g=a[c.rowIndex])==null?void 0:g.id,w=e.current.unstable_getCellColSpanInfo(S,c.colIndex);w&&!w.spannedByColSpan&&(x=w.cellProps.width)}typeof x>"u"&&(x=f[c.colIndex].computedWidth),p.left=g9({clientHeight:o.current.clientWidth,scrollTop:Math.abs(o.current.scrollLeft),offsetHeight:x,offsetTop:y[c.colIndex]})}if(c.rowIndex!=null){var v,b;const y=Kw(e.current.state),x=wXe(e),S=SXe(e),w=t.pagination?c.rowIndex-x*S:c.rowIndex,_=y.positions[w+1]?y.positions[w+1]-y.positions[w]:y.currentPageTotalHeight-y.positions[w],C=((v=o.current.querySelector(`.${ge["pinnedRows--top"]}`))==null?void 0:v.clientHeight)||0,E=((b=o.current.querySelector(`.${ge["pinnedRows--bottom"]}`))==null?void 0:b.clientHeight)||0;p.top=g9({clientHeight:o.current.clientHeight-C-E,scrollTop:o.current.scrollTop,offsetHeight:_,offsetTop:y.positions[w]})}return p=e.current.unstable_applyPipeProcessors("scrollToIndexes",p,c),typeof p.left!==void 0||typeof p.top!==void 0?(e.current.scroll(p),!0):!1},[n,e,o,t.pagination,a]),l=P.useCallback(c=>{if(o.current&&c.left!=null&&i.current){const h=r.direction==="rtl"?-1:1;i.current.scrollLeft=c.left,o.current.scrollLeft=h*c.left,n.debug(`Scrolling left: ${c.left}`)}o.current&&c.top!=null&&(o.current.scrollTop=c.top,n.debug(`Scrolling top: ${c.top}`)),n.debug("Scrolling, updating container, and viewport")},[o,r.direction,i,n]),u=P.useCallback(()=>o!=null&&o.current?{top:o.current.scrollTop,left:o.current.scrollLeft}:{top:0,left:0},[o]);wr(e,{scroll:l,scrollToIndexes:s,getScrollPosition:u},"public")};function EJe(e,t){Kn(e,"columnHeaderClick",t.onColumnHeaderClick),Kn(e,"columnHeaderDoubleClick",t.onColumnHeaderDoubleClick),Kn(e,"columnHeaderOver",t.onColumnHeaderOver),Kn(e,"columnHeaderOut",t.onColumnHeaderOut),Kn(e,"columnHeaderEnter",t.onColumnHeaderEnter),Kn(e,"columnHeaderLeave",t.onColumnHeaderLeave),Kn(e,"cellClick",t.onCellClick),Kn(e,"cellDoubleClick",t.onCellDoubleClick),Kn(e,"cellKeyDown",t.onCellKeyDown),Kn(e,"preferencePanelClose",t.onPreferencePanelClose),Kn(e,"preferencePanelOpen",t.onPreferencePanelOpen),Kn(e,"menuOpen",t.onMenuOpen),Kn(e,"menuClose",t.onMenuClose),Kn(e,"rowDoubleClick",t.onRowDoubleClick),Kn(e,"rowClick",t.onRowClick),Kn(e,"stateChange",t.onStateChange)}const MJe=({content:e,container:t,scrollBarSize:r})=>{const n=e.width>t.width,i=e.height>t.height;let o=!1,a=!1;return(n||i)&&(o=n,a=e.height+(o?r:0)>t.height,a&&(o=e.width+r>t.width)),{hasScrollX:o,hasScrollY:a}};function PJe(e,t){const r=ma(e,"useResizeContainer"),n=P.useRef(!1),i=P.useRef(null),o=P.useRef(null),a=St(e,Kw),s=St(e,dg),l=Math.floor(t.rowHeight*s),u=T4(e,t.columnHeaderHeight),d=P.useCallback(()=>{var y;const x=(y=e.current.rootElementRef)==null?void 0:y.current,S=c4(e),w=moe(e);if(!i.current)return;let _;if(t.scrollbarSize!=null)_=t.scrollbarSize;else if(!S||!x)_=0;else{const D=si(x).createElement("div");D.style.width="99px",D.style.height="99px",D.style.position="absolute",D.style.overflow="scroll",D.className="scrollDiv",x.appendChild(D),_=D.offsetWidth-D.clientWidth,x.removeChild(D)}let C,E,A;if(t.autoHeight)A=!1,E=Math.round(S)>i.current.width,C={width:i.current.width,height:a.currentPageTotalHeight+(E?_:0)};else{C={width:i.current.width,height:i.current.height-u};const T=MJe({content:{width:Math.round(S),height:a.currentPageTotalHeight},container:{width:C.width,height:C.height-w.top-w.bottom},scrollBarSize:_});A=T.hasScrollY,E=T.hasScrollX}const M={width:C.width-(A?_:0),height:C.height-(E?_:0)},I={viewportOuterSize:C,viewportInnerSize:M,hasScrollX:E,hasScrollY:A,scrollBarSize:_},O=o.current;o.current=I,(I.viewportInnerSize.width!==(O==null?void 0:O.viewportInnerSize.width)||I.viewportInnerSize.height!==(O==null?void 0:O.viewportInnerSize.height))&&e.current.publishEvent("viewportInnerSizeChange",I.viewportInnerSize)},[e,t.scrollbarSize,t.autoHeight,a.currentPageTotalHeight,u]),c=P.useCallback(()=>{d(),e.current.publishEvent("debouncedResize",i.current)},[e,d]),h=P.useCallback(()=>o.current,[]),f=P.useCallback(()=>{const y=e.current.getRootDimensions();if(!y)return 0;const x=iO(e,{pagination:t.pagination,paginationMode:t.paginationMode});if(t.getRowHeight){const w=e.current.getRenderContext(),_=w.lastRowIndex-w.firstRowIndex;return Math.min(_-1,x.rows.length)}const S=Math.floor(y.viewportInnerSize.height/l);return Math.min(S,x.rows.length)},[e,t.pagination,t.paginationMode,t.getRowHeight,l]),m={resize:c,getRootDimensions:h},p={getViewportPageSize:f,updateGridDimensionsRef:d};wr(e,m,"public"),wr(e,p,"private");const g=P.useMemo(()=>yS(c,60),[c]),v=P.useRef(!0),b=P.useCallback(y=>{i.current=y;const x=/jsdom/.test(window.navigator.userAgent);if(y.height===0&&!n.current&&!t.autoHeight&&!x&&(r.error(["The parent DOM element of the data grid has an empty height.","Please make sure that this element has an intrinsic height.","The grid displays with a height of 0px.","","More details: https://mui.com/r/x-data-grid-no-dimensions."].join(`
`)),n.current=!0),y.width===0&&!n.current&&!x&&(r.error(["The parent DOM element of the data grid has an empty width.","Please make sure that this element has an intrinsic width.","The grid displays with a width of 0px.","","More details: https://mui.com/r/x-data-grid-no-dimensions."].join(`
`)),n.current=!0),v.current){c(),v.current=!1;return}g()},[t.autoHeight,g,r,c]);li(()=>d(),[d]),Kn(e,"sortedRowsSet",d),Kn(e,"paginationModelChange",d),Kn(e,"columnsChange",d),Lt(e,"resize",b),Kn(e,"debouncedResize",t.onResize)}const TJe=["style"],OJe=["style"],IJe=["style"];function dy(e,t,r=0,n=t.length){if(t.length<=0)return-1;if(r>=n)return r;const i=r+Math.floor((n-r)/2),o=t[i];return e<=o?dy(e,t,r,i):dy(e,t,i+1,n)}function DJe(e,t,r){let n=1;for(;r<t.length&&Math.abs(t[r])<e;)r+=n,n*=2;return dy(e,t,Math.floor(r/2),Math.min(r,t.length))}const Zh=({firstIndex:e,lastIndex:t,buffer:r,minFirstIndex:n,maxLastIndex:i})=>[v0(e-r,n,i),v0(t+r,n,i)],RJe=(e,t)=>e===t?!0:e.firstRowIndex===t.firstRowIndex&&e.lastRowIndex===t.lastRowIndex&&e.firstColumnIndex===t.firstColumnIndex&&e.lastColumnIndex===t.lastColumnIndex,kJe=e=>{var t,r;const n=cg(),i=Mt(),o=St(n,Ha),{ref:a,disableVirtualization:s,onRenderZonePositioning:l,renderZoneMinColumnIndex:u=0,renderZoneMaxColumnIndex:d=o.length,getRowProps:c}=e,h=Qa(),f=St(n,g0),m=St(n,c4),p=St(n,vc),g=St(n,XM),v=St(n,Kw),b=St(n,QM),y=hg(n,i),x=P.useRef(null),S=P.useRef(null),w=nn(a,S),[_,C]=P.useState(null),E=P.useRef(_),A=P.useRef({top:0,left:0}),[M,I]=P.useState({width:null,height:null}),O=P.useRef(m),T=P.useRef({}),D=P.useRef(),N=P.useRef(),k=P.useRef(Hy((Z,q,ie)=>Z.slice(q,ie))),R=P.useCallback(Z=>{var q,ie;const he=n.current.getLastMeasuredRowIndex();let ae=he===1/0;(q=y.range)!=null&&q.lastRowIndex&&!ae&&(ae=he>=y.range.lastRowIndex);const be=v0(he-(((ie=y.range)==null?void 0:ie.firstRowIndex)||0),0,v.positions.length);return ae||v.positions[be]>=Z?dy(Z,v.positions):DJe(Z,v.positions,be)},[n,(t=y.range)==null?void 0:t.firstRowIndex,(r=y.range)==null?void 0:r.lastRowIndex,v.positions]),z=P.useCallback(()=>{if(s)return{firstRowIndex:0,lastRowIndex:y.rows.length,firstColumnIndex:0,lastColumnIndex:o.length};const{top:Z,left:q}=A.current,ie=Math.min(R(Z),v.positions.length-1),he=i.autoHeight?ie+y.rows.length:R(Z+M.height);let ae=!1,be=0,ye=f.length;const[Se,me]=Zh({firstIndex:ie,lastIndex:he,minFirstIndex:0,maxLastIndex:y.rows.length,buffer:i.rowBuffer});for(let Pe=Se;Pe<me&&!ae;Pe+=1){const Ae=y.rows[Pe];ae=n.current.rowHasAutoHeight(Ae.id)}return ae||(be=dy(Math.abs(q),f),ye=dy(Math.abs(q)+M.width,f)),{firstRowIndex:ie,lastRowIndex:he,firstColumnIndex:be,lastColumnIndex:ye}},[s,R,v.positions.length,i.autoHeight,i.rowBuffer,y.rows,f,o.length,n,M]);li(()=>{s?x.current.style.transform="translate3d(0px, 0px, 0px)":(S.current.scrollLeft=0,S.current.scrollTop=0)},[s]),li(()=>{I({width:S.current.clientWidth,height:S.current.clientHeight})},[v.currentPageTotalHeight]);const j=P.useCallback(Z=>{I({width:Z.width,height:Z.height})},[]);Lt(n,"debouncedResize",j);const $=P.useCallback(Z=>{const[q,ie]=Zh({firstIndex:Z.firstRowIndex,lastIndex:Z.lastRowIndex,minFirstIndex:0,maxLastIndex:y.rows.length,buffer:i.rowBuffer}),[he]=Zh({firstIndex:Z.firstColumnIndex,lastIndex:Z.lastColumnIndex,minFirstIndex:u,maxLastIndex:d,buffer:i.columnBuffer}),ae=vN({firstColumnToRender:he,apiRef:n,firstRowToRender:q,lastRowToRender:ie,visibleRows:y.rows}),be=h.direction==="ltr"?1:-1,ye=Kw(n.current.state).positions[q],Se=be*g0(n)[ae];x.current.style.transform=`translate3d(${Se}px, ${ye}px, 0px)`,typeof l=="function"&&l({top:ye,left:Se})},[n,y.rows,l,u,d,i.columnBuffer,i.rowBuffer,h.direction]),U=P.useCallback(Z=>{if(E.current&&RJe(Z,E.current)){$(Z);return}C(Z),$(Z);const[q,ie]=Zh({firstIndex:Z.firstRowIndex,lastIndex:Z.lastRowIndex,minFirstIndex:0,maxLastIndex:y.rows.length,buffer:i.rowBuffer});n.current.publishEvent("renderedRowsIntervalChange",{firstRowToRender:q,lastRowToRender:ie}),E.current=Z},[n,C,E,y.rows.length,i.rowBuffer,$]);li(()=>{if(M.width==null)return;const Z=z();U(Z);const{top:q,left:ie}=A.current,he={top:q,left:ie,renderContext:Z};n.current.publishEvent("scrollPositionChange",he)},[n,z,M.width,U]);const H=Z=>{const{scrollTop:q,scrollLeft:ie}=Z.currentTarget;if(A.current.top=q,A.current.left=ie,!E.current||q<0||h.direction==="ltr"&&ie<0||h.direction==="rtl"&&ie>0)return;const he=s?E.current:z(),ae=Math.abs(he.firstRowIndex-E.current.firstRowIndex),be=Math.abs(he.lastRowIndex-E.current.lastRowIndex),ye=Math.abs(he.firstColumnIndex-E.current.firstColumnIndex),Se=Math.abs(he.lastColumnIndex-E.current.lastColumnIndex),me=ae>=i.rowThreshold||be>=i.rowThreshold||ye>=i.columnThreshold||Se>=i.columnThreshold||O.current!==m;n.current.publishEvent("scrollPositionChange",{top:q,left:ie,renderContext:me?he:E.current},Z),me&&(yh.flushSync(()=>{U(he)}),O.current=m)},V=Z=>{n.current.publishEvent("virtualScrollerWheel",{},Z)},Q=Z=>{n.current.publishEvent("virtualScrollerTouchMove",{},Z)},X=(Z={renderContext:_})=>{var q;const{renderContext:ie,minFirstColumn:he=u,maxLastColumn:ae=d,availableSpace:be=M.width,rowIndexOffset:ye=0,position:Se="center"}=Z;if(!ie||be==null)return null;const me=s?0:i.rowBuffer,Pe=s?0:i.columnBuffer,[Ae,K]=Zh({firstIndex:ie.firstRowIndex,lastIndex:ie.lastRowIndex,minFirstIndex:0,maxLastIndex:y.rows.length,buffer:me}),G=[];if(Z.rows)Z.rows.forEach(et=>{G.push(et),n.current.calculateColSpan({rowId:et.id,minFirstColumn:he,maxLastColumn:ae,columns:o})});else{if(!y.range)return null;for(let et=Ae;et<K;et+=1){const st=y.rows[et];G.push(st),n.current.calculateColSpan({rowId:st.id,minFirstColumn:he,maxLastColumn:ae,columns:o})}}const[de,Ee]=Zh({firstIndex:ie.firstColumnIndex,lastIndex:ie.lastColumnIndex,minFirstIndex:he,maxLastIndex:ae,buffer:Pe}),Me=vN({firstColumnToRender:de,apiRef:n,firstRowToRender:Ae,lastRowToRender:K,visibleRows:y.rows}),Le=k.current(o,Me,Ee),De=((q=i.slotProps)==null?void 0:q.row)||{},{style:Ce}=De,pe=Ie(De,TJe);(D.current!==c||N.current!==Ce)&&(T.current={});const Ke=[];for(let et=0;et<G.length;et+=1){var Xe;const{id:st,model:Ut}=G[et],Cr=Ae+et===y.rows.length-1,Mr=n.current.rowHasAutoHeight(st)?"auto":n.current.unstable_getRowHeight(st);let fe;b[st]==null?fe=!1:fe=n.current.isRowSelectable(st);const Oe=p!==null&&p.id===st?p.field:null;let ze=null;g!==null&&g.id===st&&(ze=n.current.getCellParams(st,g.field).cellMode==="view"?g.field:null);const Je=typeof c=="function"&&c(st,Ut)||{},{style:Tt}=Je,Zt=Ie(Je,OJe);if(!T.current[st]){const $r=L({},Tt,Ce);T.current[st]=$r}Ke.push(B.jsx(i.slots.row,L({row:Ut,rowId:st,rowHeight:Mr,focusedCell:Oe,tabbableCell:ze,renderedColumns:Le,visibleColumns:o,firstColumnToRender:Me,lastColumnToRender:Ee,selected:fe,index:ye+((y==null||(Xe=y.range)==null?void 0:Xe.firstRowIndex)||0)+Ae+et,containerWidth:be,isLastVisible:Cr,position:Se},Zt,pe,{style:T.current[st]}),st))}return D.current=c,N.current=Ce,Ke},ne=M.width&&m>M.width,J=P.useMemo(()=>{const Z=Math.max(v.currentPageTotalHeight,1);let q=!1;return S!=null&&S.current&&Z<=(S==null?void 0:S.current.clientHeight)&&(q=!0),{width:ne?m:"auto",height:Z,minHeight:q?"100%":"auto"}},[S,m,v.currentPageTotalHeight,ne]);P.useEffect(()=>{n.current.publishEvent("virtualScrollerContentSizeChange")},[n,J]),i.autoHeight&&y.rows.length===0&&(J.height=goe(n,i.rowHeight));const W={};ne||(W.overflowX="hidden"),i.autoHeight&&(W.overflowY="hidden");const te=P.useCallback(()=>E.current,[]);return n.current.register("private",{getRenderContext:te}),{renderContext:_,updateRenderZonePosition:$,getRows:X,getRootProps:(Z={})=>{let{style:q={}}=Z,ie=Ie(Z,IJe);return L({ref:w,onScroll:H,onWheel:V,onTouchMove:Q,style:L({},q,W)},ie)},getContentProps:({style:Z={}}={})=>({style:L({},Z,J)}),getRenderZoneProps:()=>({ref:x})}},LJe=e=>{const{classes:t,headerAlign:r,isDragging:n,showColumnBorder:i,groupId:o}=e;return lt({root:["columnHeader",r==="left"&&"columnHeader--alignLeft",r==="center"&&"columnHeader--alignCenter",r==="right"&&"columnHeader--alignRight",n&&"columnHeader--moving",i&&"columnHeader--showColumnBorder",i&&"columnHeader--withRightBorder","withBorderColor",o===null?"columnHeader--emptyGroup":"columnHeader--filledGroup"],draggableContainer:["columnHeaderDraggableContainer"],titleContainer:["columnHeaderTitleContainer","withBorderColor"],titleContainerContent:["columnHeaderTitleContainerContent"]},Er,t)};function NJe(e){var t;const{groupId:r,width:n,depth:i,maxDepth:o,fields:a,height:s,colIndex:l,hasFocus:u,tabIndex:d,isLastColumn:c}=e,h=Mt(),f=P.useRef(null),m=Ir(),p=St(m,doe),g=r?p[r]:{},{headerName:v=r??"",description:b="",headerAlign:y=void 0}=g;let x;const S=r&&((t=p[r])==null?void 0:t.renderHeaderGroup),w=P.useMemo(()=>({groupId:r,headerName:v,description:b,depth:i,maxDepth:o,fields:a,colIndex:l,isLastColumn:c}),[r,v,b,i,o,a,l,c]);r&&S&&(x=S(w));const _=h.showColumnVerticalBorder,C=L({},e,{classes:h.classes,showColumnBorder:_,headerAlign:y,depth:i,isDragging:!1}),E=v??r,A=Oi(),M=r===null?`empty-group-cell-${A}`:r,I=LJe(C);P.useLayoutEffect(()=>{if(u){const k=f.current.querySelector('[tabindex="0"]')||f.current;k==null||k.focus()}},[m,u]);const O=P.useCallback(N=>k=>{k.currentTarget.contains(k.target)&&m.current.publishEvent(N,w,k)},[m,w]),T=P.useMemo(()=>({onKeyDown:O("columnGroupHeaderKeyDown"),onFocus:O("columnGroupHeaderFocus"),onBlur:O("columnGroupHeaderBlur")}),[O]),D=typeof g.headerClassName=="function"?g.headerClassName(w):g.headerClassName;return B.jsx(Aoe,L({ref:f,classes:I,columnMenuOpen:!1,colIndex:l,height:s,isResizing:!1,sortDirection:null,hasFocus:!1,tabIndex:d,isDraggable:!1,headerComponent:x,headerClassName:D,description:b,elementId:M,width:n,columnMenuIconButton:null,columnTitleIconButtons:null,resizable:!1,label:E,"aria-colspan":a.length,"data-fields":`|-${a.join("-|-")}-|`},T))}const v9=wi("div",{name:"MuiDataGrid",slot:"ColumnHeaderRow",overridesResolver:(e,t)=>t.columnHeaderRow})(()=>({display:"flex"}));function zJe(e){return!!e.target}const BJe=e=>{const{innerRef:t,minColumnIndex:r=0,visibleColumns:n,sortColumnLookup:i,filterColumnLookup:o,columnPositions:a,columnHeaderTabIndexState:s,columnGroupHeaderTabIndexState:l,columnHeaderFocus:u,columnGroupHeaderFocus:d,densityFactor:c,headerGroupingMaxDepth:h,columnMenuState:f,columnVisibility:m,columnGroupsHeaderStructure:p,hasOtherElementInTabSequence:g}=e,v=wS(),[b,y]=P.useState(""),[x,S]=P.useState(""),w=cg(),_=Mt(),C=P.useRef(null),E=nn(t,C),[A,M]=P.useState(null),I=P.useRef(A),O=P.useRef(0),T=hg(w,_),D=T4(w,_.columnHeaderHeight),N=Math.floor(_.columnHeaderHeight*c);P.useEffect(()=>{w.current.columnHeadersContainerElementRef.current.scrollLeft=0},[w]);const k=P.useRef(Hy(CZe,{equalityCheck:(J,W)=>["firstColumnIndex","minColumnIndex","columnBuffer"].every(te=>J[te]===W[te])})),R=P.useCallback(J=>{const[W,te]=Zh({firstIndex:J.firstRowIndex,lastIndex:J.lastRowIndex,minFirstIndex:0,maxLastIndex:T.rows.length,buffer:_.rowBuffer}),Z=k.current({firstColumnIndex:J.firstColumnIndex,minColumnIndex:r,columnBuffer:_.columnBuffer,firstRowToRender:W,lastRowToRender:te,apiRef:w,visibleRows:T.rows}),q=v.direction==="ltr"?1:-1,ie=Z>0?O.current-q*a[Z]:O.current;C.current.style.transform=`translate3d(${-ie}px, 0px, 0px)`},[a,r,_.columnBuffer,w,T.rows,_.rowBuffer,v.direction]);P.useLayoutEffect(()=>{A&&R(A)},[A,R]);const z=P.useCallback(({left:J,renderContext:W=null},te)=>{var Z,q;if(!C.current||O.current===J&&((Z=I.current)==null?void 0:Z.firstColumnIndex)===(W==null?void 0:W.firstColumnIndex)&&((q=I.current)==null?void 0:q.lastColumnIndex)===(W==null?void 0:W.lastColumnIndex))return;O.current=J;let ie=!1;W!==I.current||!I.current?(zJe(te)?(yh.flushSync(()=>{M(W)}),ie=!0):M(W),I.current=W):ie=!0,W&&ie&&R(W)},[R]),j=P.useCallback(J=>S(J.field),[]),$=P.useCallback(()=>S(""),[]),U=P.useCallback(J=>y(J.field),[]),H=P.useCallback(()=>y(""),[]);Lt(w,"columnResizeStart",j),Lt(w,"columnResizeStop",$),Lt(w,"columnHeaderDragStart",U),Lt(w,"columnHeaderDragEnd",H),Lt(w,"scrollPositionChange",z);const V=J=>{const{renderContext:W=A,minFirstColumn:te=r,maxLastColumn:Z=n.length}=J||{};if(!W)return null;const[q,ie]=Zh({firstIndex:W.firstRowIndex,lastIndex:W.lastRowIndex,minFirstIndex:0,maxLastIndex:T.rows.length,buffer:_.rowBuffer}),he=k.current({firstColumnIndex:W.firstColumnIndex,minColumnIndex:te,columnBuffer:_.columnBuffer,apiRef:w,firstRowToRender:q,lastRowToRender:ie,visibleRows:T.rows}),ae=Math.min(W.lastColumnIndex+_.columnBuffer,Z);return{renderedColumns:n.slice(he,ae),firstColumnToRender:he,lastColumnToRender:ae,minFirstColumn:te,maxLastColumn:Z}},Q=(J,W={})=>{const te=V(J);if(te==null)return null;const{renderedColumns:Z,firstColumnToRender:q}=te,ie=[];for(let he=0;he<Z.length;he+=1){const ae=Z[he],be=q+he,ye=be===0,Se=s!==null&&s.field===ae.field||ye&&!g?0:-1,me=u!==null&&u.field===ae.field,Pe=f.open&&f.field===ae.field;ie.push(B.jsx(ZKe,L({},i[ae.field],{columnMenuOpen:Pe,filterItemsCounter:o[ae.field]&&o[ae.field].length,headerHeight:N,isDragging:ae.field===b,colDef:ae,colIndex:be,isResizing:x===ae.field,hasFocus:me,tabIndex:Se},W),ae.field))}return B.jsx(v9,{role:"row","aria-rowindex":h+1,ownerState:_,children:ie})},X=J=>{if(h===0)return null;const W=V(J);if(W==null||W.renderedColumns.length===0)return null;const{firstColumnToRender:te,lastColumnToRender:Z}=W,q=[],ie=[];for(let be=0;be<h;be+=1){var he,ae;const ye=p[be],Se=n[te].field,me=(he=w.current.unstable_getColumnGroupPath(Se)[be])!=null?he:null,Pe=ye.findIndex(({groupId:De,columnFields:Ce})=>De===me&&Ce.includes(Se)),Ae=n[Z-1].field,K=(ae=w.current.unstable_getColumnGroupPath(Ae)[be])!=null?ae:null,G=ye.findIndex(({groupId:De,columnFields:Ce})=>De===K&&Ce.includes(Ae)),de=ye.slice(Pe,G+1).map(De=>L({},De,{columnFields:De.columnFields.filter(Ce=>m[Ce]!==!1)})).filter(De=>De.columnFields.length>0),Ee=de[0].columnFields.indexOf(Se);let Me=te;const Le=de.map(({groupId:De,columnFields:Ce})=>{const pe=d!==null&&d.depth===be&&Ce.includes(d.field),Ge=l!==null&&l.depth===be&&Ce.includes(l.field)?0:-1,Ke={groupId:De,width:Ce.map(Xe=>w.current.getColumn(Xe).computedWidth).reduce((Xe,et)=>Xe+et,0),fields:Ce,colIndex:Me,hasFocus:pe,tabIndex:Ge};return Me+=Ce.length,Ke});ie.push({leftOverflow:Ee,elements:Le})}return ie.forEach((be,ye)=>{q.push(B.jsx(v9,{style:{height:`${N}px`,transform:`translateX(-${be.leftOverflow}px)`},role:"row","aria-rowindex":ye+1,ownerState:_,children:be.elements.map(({groupId:Se,width:me,fields:Pe,colIndex:Ae,hasFocus:K,tabIndex:G},de)=>B.jsx(NJe,{groupId:Se,width:me,fields:Pe,colIndex:Ae,depth:ye,isLastColumn:Ae===n.length-Pe.length,maxDepth:ie.length,height:N,hasFocus:K,tabIndex:G},de))},ye))}),q},ne={minHeight:D,maxHeight:D,lineHeight:`${N}px`};return{renderContext:A,getColumnHeaders:Q,getColumnGroupHeaders:X,isDragging:!!b,getRootProps:(J={})=>L({style:ne},J),getInnerProps:()=>({ref:E,role:"rowgroup"})}},FJe=["className"],jJe=e=>{const{classes:t}=e;return lt({root:["columnHeaders","withBorderColor"]},Er,t)},UJe=wi("div",{name:"MuiDataGrid",slot:"ColumnHeaders",overridesResolver:(e,t)=>t.columnHeaders})({position:"relative",overflow:"hidden",display:"flex",alignItems:"center",boxSizing:"border-box",borderBottom:"1px solid",borderTopLeftRadius:"var(--unstable_DataGrid-radius)",borderTopRightRadius:"var(--unstable_DataGrid-radius)"}),$Je=P.forwardRef(function(t,r){const{className:n}=t,i=Ie(t,FJe),o=Mt(),a=jJe(o);return B.jsx(UJe,L({ref:r,className:zr(n,a.root),ownerState:o},i))}),VJe=["isDragging","className"],HJe=e=>{const{isDragging:t,hasScrollX:r,classes:n}=e;return lt({root:["columnHeadersInner",t&&"columnHeaderDropZone",r&&"columnHeadersInner--scrollable"]},Er,n)},GJe=wi("div",{name:"MuiDataGrid",slot:"columnHeadersInner",overridesResolver:(e,t)=>[{[`&.${ge.columnHeaderDropZone}`]:t.columnHeaderDropZone},t.columnHeadersInner]})(()=>({display:"flex",alignItems:"flex-start",flexDirection:"column",[`&.${ge.columnHeaderDropZone} .${ge.columnHeaderDraggableContainer}`]:{cursor:"move"},[`&.${ge["columnHeadersInner--scrollable"]} .${ge.columnHeader}:last-child`]:{borderRight:"none"}})),WJe=P.forwardRef(function(t,r){var n,i;const{isDragging:o,className:a}=t,s=Ie(t,VJe),l=Ir(),u=Mt(),d=L({},u,{isDragging:o,hasScrollX:(n=(i=l.current.getRootDimensions())==null?void 0:i.hasScrollX)!=null?n:!1}),c=HJe(d);return B.jsx(GJe,L({ref:r,className:zr(a,c.root),ownerState:d},s))}),qJe=["innerRef","className","visibleColumns","sortColumnLookup","filterColumnLookup","columnPositions","columnHeaderTabIndexState","columnGroupHeaderTabIndexState","columnHeaderFocus","columnGroupHeaderFocus","densityFactor","headerGroupingMaxDepth","columnMenuState","columnVisibility","columnGroupsHeaderStructure","hasOtherElementInTabSequence"],KJe=P.forwardRef(function(t,r){const{innerRef:n,visibleColumns:i,sortColumnLookup:o,filterColumnLookup:a,columnPositions:s,columnHeaderTabIndexState:l,columnGroupHeaderTabIndexState:u,columnHeaderFocus:d,columnGroupHeaderFocus:c,densityFactor:h,headerGroupingMaxDepth:f,columnMenuState:m,columnVisibility:p,columnGroupsHeaderStructure:g,hasOtherElementInTabSequence:v}=t,b=Ie(t,qJe),{isDragging:y,getRootProps:x,getInnerProps:S,getColumnHeaders:w,getColumnGroupHeaders:_}=BJe({innerRef:n,visibleColumns:i,sortColumnLookup:o,filterColumnLookup:a,columnPositions:s,columnHeaderTabIndexState:l,columnGroupHeaderTabIndexState:u,columnHeaderFocus:d,columnGroupHeaderFocus:c,densityFactor:h,headerGroupingMaxDepth:f,columnMenuState:m,columnVisibility:p,columnGroupsHeaderStructure:g,hasOtherElementInTabSequence:v});return B.jsxs($Je,L({ref:r},x(b),{children:[B.jsx(a9,{scrollDirection:"left"}),B.jsxs(WJe,L({isDragging:y},S(),{children:[_(),w()]})),B.jsx(a9,{scrollDirection:"right"})]}))}),XJe=P.forwardRef(function(t,r){const i=Ir().current.getLocaleText("noResultsOverlayLabel");return B.jsx(x4,L({ref:r},t,{children:i}))}),YJe=["sortingOrder"],QJe=P.memo(function(t){const{sortingOrder:r}=t,n=Ie(t,YJe),i=Mt(),[o]=r,a=o==="asc"?i.slots.columnSortedAscendingIcon:i.slots.columnSortedDescendingIcon;return a?B.jsx(a,L({},n)):null}),ZJe=["native"];function JJe(e){let{native:t}=e,r=Ie(e,ZJe);return t?B.jsx("option",L({},r)):B.jsx(Fc,L({},r))}const eet={BooleanCellTrueIcon:BXe,BooleanCellFalseIcon:mD,ColumnMenuIcon:kXe,OpenFilterButtonIcon:MXe,FilterPanelDeleteIcon:mD,ColumnFilteredIcon:Y8,ColumnSelectorIcon:TXe,ColumnUnsortedIcon:QJe,ColumnSortedAscendingIcon:W8,ColumnSortedDescendingIcon:q8,ColumnResizeIcon:OXe,DensityCompactIcon:IXe,DensityStandardIcon:DXe,DensityComfortableIcon:RXe,ExportIcon:zXe,MoreActionsIcon:FXe,TreeDataCollapseIcon:X8,TreeDataExpandIcon:K8,GroupingCriteriaCollapseIcon:X8,GroupingCriteriaExpandIcon:K8,DetailPanelExpandIcon:Q8,DetailPanelCollapseIcon:LXe,RowReorderIcon:Z8,QuickFilterIcon:PXe,QuickFilterClearIcon:mD,ColumnMenuHideIcon:jXe,ColumnMenuSortAscendingIcon:W8,ColumnMenuSortDescendingIcon:q8,ColumnMenuFilterIcon:Y8,ColumnMenuManageColumnsIcon:UXe,ColumnMenuClearIcon:$Xe,LoadIcon:NXe,FilterPanelAddIcon:Q8,FilterPanelRemoveAllIcon:VXe,ColumnReorderIcon:Z8},tet=L({},eet,{BaseCheckbox:Nxe,BaseTextField:G_e,BaseFormControl:Aee,BaseSelect:FF,BaseSwitch:n_e,BaseButton:LF,BaseIconButton:cf,BaseTooltip:qSe,BasePopper:ig,BaseInputLabel:Iee,BaseSelectOption:JJe}),ret=tet,net=L({},ret,{Cell:P7e,SkeletonCell:fKe,ColumnHeaderFilterIconButton:eXe,ColumnMenu:iYe,ColumnHeaders:KJe,Footer:pQe,Toolbar:null,PreferencesPanel:DYe,LoadingOverlay:gQe,NoResultsOverlay:XJe,NoRowsOverlay:vQe,Pagination:bQe,FilterPanel:QYe,ColumnsPanel:EYe,Panel:IYe,Row:BQe}),Joe=e=>{if(e!==void 0)return Object.keys(e).reduce((t,r)=>L({},t,{[`${r.charAt(0).toLowerCase()}${r.slice(1)}`]:e[r]}),{})};function iet({defaultSlots:e,slots:t,components:r}){const n=t??(r?Joe(r):null);return!n||Object.keys(n).length===0?e:L({},e,n)}const oet=["components","componentsProps"],aet={disableMultipleColumnsFiltering:!0,disableMultipleColumnsSorting:!0,disableMultipleRowSelection:!0,throttleRowsMs:void 0,hideFooterRowCount:!1,pagination:!0,checkboxSelectionVisibleOnly:!1,disableColumnReorder:!0,disableColumnResize:!0,keepColumnPositionIfDraggedOutside:!1,signature:"DataGrid"},eae={autoHeight:!1,autoPageSize:!1,checkboxSelection:!1,checkboxSelectionVisibleOnly:!1,columnBuffer:3,rowBuffer:3,columnThreshold:3,rowThreshold:3,rowSelection:!0,density:"standard",disableColumnFilter:!1,disableColumnMenu:!1,disableColumnSelector:!1,disableDensitySelector:!1,disableMultipleColumnsFiltering:!1,disableMultipleRowSelection:!1,disableMultipleColumnsSorting:!1,disableRowSelectionOnClick:!1,disableVirtualization:!1,editMode:zu.Cell,filterMode:"client",columnHeaderHeight:56,hideFooter:!1,hideFooterPagination:!1,hideFooterRowCount:!1,hideFooterSelectedRowCount:!1,logger:console,logLevel:"error",pagination:!1,paginationMode:"client",rowHeight:52,pageSizeOptions:[25,50,100],rowSpacingType:"margin",showCellVerticalBorder:!1,showColumnVerticalBorder:!1,sortingOrder:["asc","desc",null],sortingMode:"client",throttleRowsMs:0,disableColumnReorder:!1,disableColumnResize:!1,keepNonExistentRowsSelected:!1,keepColumnPositionIfDraggedOutside:!1},set=Joe(net),uet=e=>{const t=pr({props:e,name:"MuiDataGrid"}),{components:r,componentsProps:n}=t,i=Ie(t,oet),o=P.useMemo(()=>L({},xJe,i.localeText),[i.localeText]),a=P.useMemo(()=>iet({defaultSlots:set,slots:i.slots,components:r}),[r,i.slots]);return P.useMemo(()=>{var s;return L({},eae,i,{localeText:o,slots:a,slotProps:(s=i.slotProps)!=null?s:n},aet)},[i,o,a,n])},cet=e=>L({},e,{rowsMeta:{currentPageTotalHeight:0,positions:[]}}),y9=(e,t,r)=>typeof e=="number"&&e>0?e:t,det=(e,t)=>{const{getRowHeight:r,getRowSpacing:n,getEstimatedRowHeight:i}=t,o=P.useRef({}),a=P.useRef(-1),s=P.useRef(!1),l=St(e,dg),u=St(e,ea),d=St(e,Ioe),c=St(e,_l),h=hg(e,t),f=St(e,KS),m=y9(t.rowHeight,eae.rowHeight),p=Math.floor(m*l),g=P.useCallback(()=>{var I,O;s.current=!1;const T=k=>{o.current[k.id]||(o.current[k.id]={sizes:{baseCenter:p},isResized:!1,autoHeight:!1,needsFirstMeasurement:!0});const{isResized:R,needsFirstMeasurement:z,sizes:j}=o.current[k.id];let $=typeof p=="number"&&p>0?p:52;const U=j.baseCenter;if(R)$=U;else if(r){const J=r(L({},k,{densityFactor:l}));if(J==="auto"){if(z){const W=i?i(L({},k,{densityFactor:l})):p;$=W??p}else $=U;s.current=!0,o.current[k.id].autoHeight=!0}else $=y9(J,p),o.current[k.id].needsFirstMeasurement=!1,o.current[k.id].autoHeight=!1}else o.current[k.id].needsFirstMeasurement=!1;const H=Object.entries(j).reduce((J,[W,te])=>(/^base[A-Z]/.test(W)&&(J[W]=te),J),{}),V=L({},H,{baseCenter:$});if(n){var Q,X;const J=e.current.getRowIndexRelativeToVisibleRows(k.id),W=n(L({},k,{isFirstVisible:J===0,isLastVisible:J===h.rows.length-1,indexRelativeToCurrentPage:J}));V.spacingTop=(Q=W.top)!=null?Q:0,V.spacingBottom=(X=W.bottom)!=null?X:0}const ne=e.current.unstable_applyPipeProcessors("rowHeight",V,k);return o.current[k.id].sizes=ne,ne},D=[],N=h.rows.reduce((k,R)=>{D.push(k);let z=0,j=0;const $=T(R);return Object.entries($).forEach(([U,H])=>{/^base[A-Z]/.test(U)?z=H>z?H:z:j+=H}),k+z+j},0);f==null||(I=f.top)==null||I.forEach(k=>{T(k)}),f==null||(O=f.bottom)==null||O.forEach(k=>{T(k)}),e.current.setState(k=>L({},k,{rowsMeta:{currentPageTotalHeight:N,positions:D}})),s.current||(a.current=1/0),e.current.forceUpdate()},[e,h.rows,p,r,n,i,f,l]),v=P.useCallback(I=>{const O=o.current[I];return O?O.sizes.baseCenter:p},[p]),b=I=>{var O;return(O=o.current[I])==null?void 0:O.sizes},y=P.useCallback((I,O)=>{o.current[I].sizes.baseCenter=O,o.current[I].isResized=!0,o.current[I].needsFirstMeasurement=!1,g()},[g]),x=P.useMemo(()=>yS(g),[g]),S=P.useCallback((I,O,T)=>{if(!o.current[I]||!o.current[I].autoHeight)return;const D=o.current[I].sizes[`base${$e(T)}`]!==O;o.current[I].needsFirstMeasurement=!1,o.current[I].sizes[`base${$e(T)}`]=O,D&&x()},[x]),w=P.useCallback(I=>{var O;return((O=o.current[I])==null?void 0:O.autoHeight)||!1},[]),_=P.useCallback(()=>a.current,[]),C=P.useCallback(I=>{s.current&&I>a.current&&(a.current=I)},[]),E=P.useCallback(()=>{o.current={},g()},[g]);P.useEffect(()=>{g()},[p,u,d,c,g]),M4(e,"rowHeight",g);const A={unstable_setLastMeasuredRowIndex:C,unstable_getRowHeight:v,unstable_getRowInternalSizes:b,unstable_setRowHeight:y,unstable_storeRowHeightMeasurement:S,resetRowHeights:E},M={getLastMeasuredRowIndex:_,rowHasAutoHeight:w};wr(e,A,"public"),wr(e,M,"private")},het=e=>{const t=P.useCallback((i={})=>e.current.unstable_applyPipeProcessors("exportState",{},i),[e]),r=P.useCallback(i=>{e.current.unstable_applyPipeProcessors("restoreState",{callbacks:[]},{stateToRestore:i}).callbacks.forEach(a=>{a()}),e.current.forceUpdate()},[e]);wr(e,{exportState:t,restoreState:r},"public")},fet=e=>{const t=P.useRef({}),r=P.useCallback((u,d,c)=>{const h=t.current;h[u]||(h[u]={}),h[u][d]=c},[]),n=P.useCallback((u,d)=>{var c;return(c=t.current[u])==null?void 0:c[d]},[]),i=P.useCallback(u=>{const{columnIndex:d,rowId:c,minFirstColumnIndex:h,maxLastColumnIndex:f,columns:m}=u,p=m.length,g=m[d],v=typeof g.colSpan=="function"?g.colSpan(e.current.getCellParams(c,g.field)):g.colSpan;if(!v||v===1)return r(c,d,{spannedByColSpan:!1,cellProps:{colSpan:1,width:g.computedWidth}}),{colSpan:1};let b=g.computedWidth;for(let y=1;y<v;y+=1){const x=d+y;if(x>=h&&x<f){const S=m[x];b+=S.computedWidth,r(c,d+y,{spannedByColSpan:!0,rightVisibleCellIndex:Math.min(d+v,p-1),leftVisibleCellIndex:d})}r(c,d,{spannedByColSpan:!1,cellProps:{colSpan:v,width:b}})}return{colSpan:v}},[e,r]),o=P.useCallback(({rowId:u,minFirstColumn:d,maxLastColumn:c,columns:h})=>{for(let f=d;f<c;f+=1){const m=i({columnIndex:f,rowId:u,minFirstColumnIndex:d,maxLastColumnIndex:c,columns:h});m.colSpan>1&&(f+=m.colSpan-1)}},[i]),a={unstable_getCellColSpanInfo:n},s={calculateColSpan:o};wr(e,a,"public"),wr(e,s,"private");const l=P.useCallback(()=>{t.current={}},[]);Lt(e,"columnOrderChange",l)},tae=(e,t,r)=>{if(voe(e)){if(r[e.field]!==void 0)throw new Error(["MUI: columnGroupingModel contains duplicated field",`column field ${e.field} occurrs two times in the grouping model:`,`- ${r[e.field].join(" > ")}`,`- ${t.join(" > ")}`].join(`
`));r[e.field]=t;return}const{groupId:n,children:i}=e;i.forEach(o=>{tae(o,[...t,n],r)})},bN=e=>{if(!e)return{};const t={};return e.forEach(r=>{tae(r,[],t)}),t},xN=(e,t)=>{const r=a=>{var s;return(s=t[a])!=null?s:[]},n=[],i=Math.max(...e.map(a=>r(a).length)),o=(a,s,l)=>Cm(r(a).slice(0,l+1),r(s).slice(0,l+1));for(let a=0;a<i;a+=1){const s=e.reduce((l,u)=>{var d;const c=(d=r(u)[a])!=null?d:null;if(l.length===0)return[{columnFields:[u],groupId:c}];const h=l[l.length-1],f=h.columnFields[h.columnFields.length-1];return h.groupId!==c||!o(f,u,a)?[...l,{columnFields:[u],groupId:c}]:[...l.slice(0,l.length-1),{columnFields:[...h.columnFields,u],groupId:c}]},[]);n.push(s)}return n},pet=["groupId","children"],O4=e=>{let t={};return e.forEach(r=>{if(voe(r))return;const{groupId:n,children:i}=r,o=Ie(r,pet);if(!n)throw new Error("MUI: An element of the columnGroupingModel does not have either `field` or `groupId`.");i||console.warn(`MUI: group groupId=${n} has no children.`);const a=L({},o,{groupId:n}),s=O4(i);if(s[n]!==void 0||t[n]!==void 0)throw new Error(`MUI: The groupId ${n} is used multiple times in the columnGroupingModel.`);t=L({},t,s,{[n]:a})}),L({},t)},met=(e,t,r)=>{var n,i,o;if(!((n=t.experimentalFeatures)!=null&&n.columnGrouping))return e;const a=Hc(r),s=ioe(r),l=O4((i=t.columnGroupingModel)!=null?i:[]),u=bN((o=t.columnGroupingModel)!=null?o:[]),d=xN(a,u),c=s.length===0?0:Math.max(...s.map(h=>{var f,m;return(f=(m=u[h])==null?void 0:m.length)!=null?f:0}));return L({},e,{columnGrouping:{lookup:l,unwrappedGroupingModel:u,headerStructure:d,maxDepth:c}})},get=(e,t)=>{var r;const n=P.useCallback(u=>{var d;return(d=h7e(e)[u])!=null?d:[]},[e]),i=P.useCallback(()=>doe(e),[e]);wr(e,{unstable_getColumnGroupPath:n,unstable_getAllGroupDetails:i},"public");const a=P.useCallback(()=>{var u;const d=bN((u=t.columnGroupingModel)!=null?u:[]);e.current.setState(c=>{var h,f;const m=(h=(f=c.columns)==null?void 0:f.orderedFields)!=null?h:[],p=xN(m,d);return L({},c,{columnGrouping:L({},c.columnGrouping,{headerStructure:p})})})},[e,t.columnGroupingModel]);Lt(e,"columnIndexChange",a);const s=St(e,Hc),l=St(e,ioe);P.useEffect(()=>{var u,d,c;if(!((u=t.experimentalFeatures)!=null&&u.columnGrouping))return;const h=O4((d=t.columnGroupingModel)!=null?d:[]),f=bN((c=t.columnGroupingModel)!=null?c:[]),m=xN(s,f),p=l.length===0?0:Math.max(...l.map(g=>{var v,b;return(v=(b=f[g])==null?void 0:b.length)!=null?v:0}));e.current.setState(g=>L({},g,{columnGrouping:{lookup:h,unwrappedGroupingModel:f,headerStructure:m,maxDepth:p}}))},[e,s,l,t.columnGroupingModel,(r=t.experimentalFeatures)==null?void 0:r.columnGrouping])},vet=(e,t)=>{const r=rZe(e,t);return SJe(r,t),gJe(r),Ds(yJe,r,t),Ds(AZe,r,t),Ds(dJe,r,t),Ds(uJe,r,t),Ds(qZe,r,t),Ds(_Je,r,t),Ds(JZe,r,t),Ds(GZe,r,t),Ds(TZe,r,t),Ds(QZe,r,t),Ds(cet,r,t),Ds(oZe,r,t),Ds(met,r,t),YZe(r,t),bJe(r,t),EZe(r,t),hJe(r,t),vJe(r),fet(r),get(r,t),cJe(r,t),KZe(r,t),eJe(r,t),WZe(r,t),CJe(r,t),OZe(r,t),ZZe(r,t),det(r,t),AJe(r,t),aZe(r),LZe(r),zZe(r,t),iZe(r),PJe(r,t),EJe(r,t),het(r),r},yet=["className"],bet=e=>{const{classes:t}=e;return lt({root:["virtualScroller"]},Er,t)},xet=wi("div",{name:"MuiDataGrid",slot:"VirtualScroller",overridesResolver:(e,t)=>t.virtualScroller})({overflow:"auto",height:"100%",position:"relative","@media print":{overflow:"hidden"}}),wet=P.forwardRef(function(t,r){const{className:n}=t,i=Ie(t,yet),o=Mt(),a=bet(o);return B.jsx(xet,L({ref:r,className:zr(a.root,n),ownerState:o},i))}),_et=["className","style"],Cet=e=>{const{classes:t,overflowedContent:r}=e;return lt({root:["virtualScrollerContent",r&&"virtualScrollerContent--overflowed"]},Er,t)},Aet=wi("div",{name:"MuiDataGrid",slot:"VirtualScrollerContent",overridesResolver:(e,t)=>t.virtualScrollerContent})({}),Eet=P.forwardRef(function(t,r){const{className:n,style:i}=t,o=Ie(t,_et),a=Mt(),s=L({},a,{overflowedContent:!a.autoHeight&&(i==null?void 0:i.minHeight)==="auto"}),l=Cet(s);return B.jsx(Aet,L({ref:r,className:zr(l.root,n),ownerState:s,style:i},o))}),Met=["className"],Pet=e=>{const{classes:t}=e;return lt({root:["virtualScrollerRenderZone"]},Er,t)},Tet=wi("div",{name:"MuiDataGrid",slot:"VirtualScrollerRenderZone",overridesResolver:(e,t)=>t.virtualScrollerRenderZone})({position:"absolute",display:"flex",flexDirection:"column"}),Oet=P.forwardRef(function(t,r){const{className:n}=t,i=Ie(t,Met),o=Mt(),a=Pet(o);return B.jsx(Tet,L({ref:r,className:zr(a.root,n),ownerState:o},i))}),Iet=["className","disableVirtualization"],Det=P.forwardRef(function(t,r){const{className:n,disableVirtualization:i}=t,o=Ie(t,Iet),{getRootProps:a,getContentProps:s,getRenderZoneProps:l,getRows:u}=kJe({ref:r,disableVirtualization:i});return B.jsxs(wet,L({className:n},a(o),{children:[B.jsx(_7e,{}),B.jsx(Eet,L({},s(),{children:B.jsx(Oet,L({},l(),{children:u()}))}))]}))}),rae=P.forwardRef(function(t,r){const n=uet(t),i=vet(n.apiRef,n);return B.jsx(VQe,{privateApiRef:i,props:n,children:B.jsxs(yKe,{className:n.className,style:n.style,sx:n.sx,ref:r,children:[B.jsx(mQe,{}),B.jsx(p7e,{VirtualScrollerComponent:Det}),B.jsx(m7e,{})]})})}),b9=P.memo(rae);rae.propTypes={apiRef:ve.shape({current:ve.object.isRequired}),"aria-label":ve.string,"aria-labelledby":ve.string,autoHeight:ve.bool,autoPageSize:ve.bool,cellModesModel:ve.object,checkboxSelection:ve.bool,classes:ve.object,columnBuffer:ve.number,columnGroupingModel:ve.arrayOf(ve.object),columnHeaderHeight:ve.number,columns:Pfe(ve.array.isRequired),columnThreshold:ve.number,columnVisibilityModel:ve.object,components:ve.object,componentsProps:ve.object,density:ve.oneOf(["comfortable","compact","standard"]),disableColumnFilter:ve.bool,disableColumnMenu:ve.bool,disableColumnSelector:ve.bool,disableDensitySelector:ve.bool,disableRowSelectionOnClick:ve.bool,disableVirtualization:ve.bool,editMode:ve.oneOf(["cell","row"]),experimentalFeatures:ve.shape({columnGrouping:ve.bool,warnIfFocusStateIsNotSynced:ve.bool}),filterMode:ve.oneOf(["client","server"]),filterModel:ve.shape({items:ve.arrayOf(ve.shape({field:ve.string.isRequired,id:ve.oneOfType([ve.number,ve.string]),operator:ve.string.isRequired,value:ve.any})).isRequired,logicOperator:ve.oneOf(["and","or"]),quickFilterLogicOperator:ve.oneOf(["and","or"]),quickFilterValues:ve.array}),getCellClassName:ve.func,getDetailPanelContent:ve.func,getEstimatedRowHeight:ve.func,getRowClassName:ve.func,getRowHeight:ve.func,getRowId:ve.func,getRowSpacing:ve.func,hideFooter:ve.bool,hideFooterPagination:ve.bool,hideFooterSelectedRowCount:ve.bool,initialState:ve.object,isCellEditable:ve.func,isRowSelectable:ve.func,keepNonExistentRowsSelected:ve.bool,loading:ve.bool,localeText:ve.object,logger:ve.shape({debug:ve.func.isRequired,error:ve.func.isRequired,info:ve.func.isRequired,warn:ve.func.isRequired}),logLevel:ve.oneOf(["debug","error","info","warn",!1]),nonce:ve.string,onCellClick:ve.func,onCellDoubleClick:ve.func,onCellEditStart:ve.func,onCellEditStop:ve.func,onCellKeyDown:ve.func,onCellModesModelChange:ve.func,onColumnHeaderClick:ve.func,onColumnHeaderDoubleClick:ve.func,onColumnHeaderEnter:ve.func,onColumnHeaderLeave:ve.func,onColumnHeaderOut:ve.func,onColumnHeaderOver:ve.func,onColumnOrderChange:ve.func,onColumnVisibilityModelChange:ve.func,onFilterModelChange:ve.func,onMenuClose:ve.func,onMenuOpen:ve.func,onPaginationModelChange:ve.func,onPreferencePanelClose:ve.func,onPreferencePanelOpen:ve.func,onProcessRowUpdateError:ve.func,onResize:ve.func,onRowClick:ve.func,onRowDoubleClick:ve.func,onRowEditCommit:ve.func,onRowEditStart:ve.func,onRowEditStop:ve.func,onRowModesModelChange:ve.func,onRowSelectionModelChange:ve.func,onSortModelChange:ve.func,onStateChange:ve.func,pageSizeOptions:ve.arrayOf(ve.number),pagination:e=>e.pagination===!1?new Error(["MUI: `<DataGrid pagination={false} />` is not a valid prop.","Infinite scrolling is not available in the MIT version.","","You need to upgrade to DataGridPro or DataGridPremium component to disable the pagination."].join(`
`)):null,paginationMode:ve.oneOf(["client","server"]),paginationModel:ve.shape({page:ve.number.isRequired,pageSize:ve.number.isRequired}),processRowUpdate:ve.func,rowBuffer:ve.number,rowCount:ve.number,rowHeight:ve.number,rowModesModel:ve.object,rows:ve.arrayOf(ve.object).isRequired,rowSelection:ve.bool,rowSelectionModel:ve.oneOfType([ve.arrayOf(ve.oneOfType([ve.number,ve.string]).isRequired),ve.number,ve.string]),rowSpacingType:ve.oneOf(["border","margin"]),rowThreshold:ve.number,scrollbarSize:ve.number,showCellVerticalBorder:ve.bool,showColumnVerticalBorder:ve.bool,slotProps:ve.object,slots:ve.object,sortingMode:ve.oneOf(["client","server"]),sortingOrder:ve.arrayOf(ve.oneOf(["asc","desc"])),sortModel:ve.arrayOf(ve.shape({field:ve.string.isRequired,sort:ve.oneOf(["asc","desc"])})),sx:ve.oneOfType([ve.arrayOf(ve.oneOfType([ve.func,ve.object,ve.bool])),ve.func,ve.object])};const Ret=()=>{const{palette:e}=Qa(),{data:t}=Zte(),{data:r}=UMe();console.log(r);const n=[{field:"_id",headerName:"id",flex:1},{field:"expense",headerName:"Expense",flex:.5,renderCell:o=>`$${o.value}`},{field:"price",headerName:"Price",flex:.5,renderCell:o=>`$${o.value}`}],i=[{field:"_id",headerName:"id",flex:1},{field:"buyer",headerName:"Buyer",flex:.67},{field:"amount",headerName:"Amount",flex:.35,renderCell:o=>`$${o.value}`},{field:"productIds",headerName:"Count",flex:.1,renderCell:o=>o.value.length}];return B.jsxs(B.Fragment,{children:[B.jsxs(xu,{gridArea:"g",children:[B.jsx(Tc,{title:"Supplier Status",sideText:`${t==null?void 0:t.length} products`}),B.jsx(Na,{mt:"0.5rem",p:"0 0.5rem",height:"75%",sx:{"& .MuiDataGrid-root":{color:e.grey[300],border:"none"},"& .MuiDataGrid-cell":{borderBottom:`1px solid ${e.grey[800]} !important`},"& .MuiDataGrid-columnHeaders":{borderBottom:`1px solid ${e.grey[800]} !important`},"& .MuiDataGrid-columnSeparator":{visibility:"hidden"}},children:B.jsx(b9,{columnHeaderHeight:25,rowHeight:35,hideFooter:!0,rows:t||[],columns:n})})]}),B.jsxs(xu,{gridArea:"h",children:[B.jsx(Tc,{title:"Client Transactions",sideText:`${r==null?void 0:r.length} latest transactions`}),B.jsx(Na,{mt:"1rem",p:"0 0.5rem",height:"80%",sx:{"& .MuiDataGrid-root":{color:e.grey[300],border:"none"},"& .MuiDataGrid-cell":{borderBottom:`1px solid ${e.grey[800]} !important`},"& .MuiDataGrid-columnHeaders":{borderBottom:`1px solid ${e.grey[800]} !important`},"& .MuiDataGrid-columnSeparator":{visibility:"hidden"}},children:B.jsx(b9,{columnHeaderHeight:25,rowHeight:35,hideFooter:!0,rows:r||[],columns:i})})]}),B.jsxs(xu,{gridArea:"i",children:[B.jsx(Tc,{title:"Geo-Analytics",sideText:"+4%"}),B.jsx(Lf,{mt:"0.5rem",gap:"0.5rem",p:"0 1rem",textAlign:"center"})]}),B.jsxs(xu,{gridArea:"j",children:[B.jsx(Tc,{title:"Overall Summary and Explanation Data",sideText:"+15%"}),B.jsx(Na,{height:"15px",margin:"1.25rem 1rem 0.4rem 1rem",bgcolor:e.primary[800],borderRadius:"1rem",children:B.jsx(Na,{height:"15px",bgcolor:e.primary[600],borderRadius:"1rem",width:"40%"})}),B.jsx(vi,{margin:"0 1rem",variant:"h6",children:"Orci aliquam enim vel diam. Venenatis euismod id donec mus lorem etiam ullamcorper odio sed. Ipsum non sed gravida etiam urna egestas molestie volutpat et. Malesuada quis pretium aliquet lacinia ornare sed. In volutpat nullam at est id cum pulvinar nunc."})]})]})},ket=`
"a b c"
"a b c"
"a b c"
"a b f"
"d e f"
"d e f"
"d h i"
"g h i"
"g h j"
"g h j"
`,Let=`
"a"
"a"
"a"
"a"
"b"
"b"
"b"
"b"
"c"
"c"
"c"
"d"
"d"
"d"
"e"
"e"
"f"
"f"
"f"
"g"
"g"
"g"
"h"
"h"
"h"
"h"
"i"
"i"
"j"
"j"
`,Net=()=>{const e=K1e("(min-width: 1200px)");return B.jsxs(Na,{display:"grid",gap:"1.5rem",width:"100%",height:"100%",sx:e?{gridTemplateColumns:"repeat(3, minmax(370px, 1fr))",gridTemplateRows:"repeat(10, minmax(60px, 1fr))",gridTemplateAreas:ket}:{gridAutoColumns:"1fr",gridAutoRows:"80px",gridTemplateAreas:Let},children:[B.jsx(Uqe,{}),B.jsx($qe,{}),B.jsx(Ret,{})]})};var nae={exports:{}};(function(e,t){(function(r,n){n(e)})(mu,function(r){function n(h,f,m){return f in h?Object.defineProperty(h,f,{value:m,enumerable:!0,configurable:!0,writable:!0}):h[f]=m,h}var i=Object.assign||function(h){for(var f=1;f<arguments.length;f++){var m=arguments[f];for(var p in m)Object.prototype.hasOwnProperty.call(m,p)&&(h[p]=m[p])}return h};function o(h){if(Array.isArray(h)){for(var f=0,m=Array(h.length);f<h.length;f++)m[f]=h[f];return m}else return Array.from(h)}var a={order:2,precision:2,period:null};function s(h,f){var m=[],p=[];h.forEach(function(x,S){x[1]!==null&&(p.push(x),m.push(f[S]))});var g=p.reduce(function(x,S){return x+S[1]},0),v=g/p.length,b=p.reduce(function(x,S){var w=S[1]-v;return x+w*w},0),y=p.reduce(function(x,S,w){var _=m[w],C=S[1]-_[1];return x+C*C},0);return 1-y/b}function l(h,f){for(var m=h,p=h.length-1,g=[f],v=0;v<p;v++){for(var b=v,y=v+1;y<p;y++)Math.abs(m[v][y])>Math.abs(m[v][b])&&(b=y);for(var x=v;x<p+1;x++){var S=m[x][v];m[x][v]=m[x][b],m[x][b]=S}for(var w=v+1;w<p;w++)for(var _=p;_>=v;_--)m[_][w]-=m[_][v]*m[v][w]/m[v][v]}for(var C=p-1;C>=0;C--){for(var E=0,A=C+1;A<p;A++)E+=m[A][C]*g[A];g[C]=(m[p][C]-E)/m[C][C]}return g}function u(h,f){var m=Math.pow(10,f);return Math.round(h*m)/m}var d={linear:function(f,m){for(var p=[0,0,0,0,0],g=0,v=0;v<f.length;v++)f[v][1]!==null&&(g++,p[0]+=f[v][0],p[1]+=f[v][1],p[2]+=f[v][0]*f[v][0],p[3]+=f[v][0]*f[v][1],p[4]+=f[v][1]*f[v][1]);var b=g*p[2]-p[0]*p[0],y=g*p[3]-p[0]*p[1],x=b===0?0:u(y/b,m.precision),S=u(p[1]/g-x*p[0]/g,m.precision),w=function(E){return[u(E,m.precision),u(x*E+S,m.precision)]},_=f.map(function(C){return w(C[0])});return{points:_,predict:w,equation:[x,S],r2:u(s(f,_),m.precision),string:S===0?"y = "+x+"x":"y = "+x+"x + "+S}},exponential:function(f,m){for(var p=[0,0,0,0,0,0],g=0;g<f.length;g++)f[g][1]!==null&&(p[0]+=f[g][0],p[1]+=f[g][1],p[2]+=f[g][0]*f[g][0]*f[g][1],p[3]+=f[g][1]*Math.log(f[g][1]),p[4]+=f[g][0]*f[g][1]*Math.log(f[g][1]),p[5]+=f[g][0]*f[g][1]);var v=p[1]*p[2]-p[5]*p[5],b=Math.exp((p[2]*p[3]-p[5]*p[4])/v),y=(p[1]*p[4]-p[5]*p[3])/v,x=u(b,m.precision),S=u(y,m.precision),w=function(E){return[u(E,m.precision),u(x*Math.exp(S*E),m.precision)]},_=f.map(function(C){return w(C[0])});return{points:_,predict:w,equation:[x,S],string:"y = "+x+"e^("+S+"x)",r2:u(s(f,_),m.precision)}},logarithmic:function(f,m){for(var p=[0,0,0,0],g=f.length,v=0;v<g;v++)f[v][1]!==null&&(p[0]+=Math.log(f[v][0]),p[1]+=f[v][1]*Math.log(f[v][0]),p[2]+=f[v][1],p[3]+=Math.pow(Math.log(f[v][0]),2));var b=(g*p[1]-p[2]*p[0])/(g*p[3]-p[0]*p[0]),y=u(b,m.precision),x=u((p[2]-y*p[0])/g,m.precision),S=function(C){return[u(C,m.precision),u(u(x+y*Math.log(C),m.precision),m.precision)]},w=f.map(function(_){return S(_[0])});return{points:w,predict:S,equation:[x,y],string:"y = "+x+" + "+y+" ln(x)",r2:u(s(f,w),m.precision)}},power:function(f,m){for(var p=[0,0,0,0,0],g=f.length,v=0;v<g;v++)f[v][1]!==null&&(p[0]+=Math.log(f[v][0]),p[1]+=Math.log(f[v][1])*Math.log(f[v][0]),p[2]+=Math.log(f[v][1]),p[3]+=Math.pow(Math.log(f[v][0]),2));var b=(g*p[1]-p[0]*p[2])/(g*p[3]-Math.pow(p[0],2)),y=(p[2]-b*p[0])/g,x=u(Math.exp(y),m.precision),S=u(b,m.precision),w=function(E){return[u(E,m.precision),u(u(x*Math.pow(E,S),m.precision),m.precision)]},_=f.map(function(C){return w(C[0])});return{points:_,predict:w,equation:[x,S],string:"y = "+x+"x^"+S,r2:u(s(f,_),m.precision)}},polynomial:function(f,m){for(var p=[],g=[],v=0,b=0,y=f.length,x=m.order+1,S=0;S<x;S++){for(var w=0;w<y;w++)f[w][1]!==null&&(v+=Math.pow(f[w][0],S)*f[w][1]);p.push(v),v=0;for(var _=[],C=0;C<x;C++){for(var E=0;E<y;E++)f[E][1]!==null&&(b+=Math.pow(f[E][0],S+C));_.push(b),b=0}g.push(_)}g.push(p);for(var A=l(g,x).map(function(D){return u(D,m.precision)}),M=function(N){return[u(N,m.precision),u(A.reduce(function(k,R,z){return k+R*Math.pow(N,z)},0),m.precision)]},I=f.map(function(D){return M(D[0])}),O="y = ",T=A.length-1;T>=0;T--)T>1?O+=A[T]+"x^"+T+" + ":T===1?O+=A[T]+"x + ":O+=A[T];return{string:O,points:I,predict:M,equation:[].concat(o(A)).reverse(),r2:u(s(f,I),m.precision)}}};function c(){var h=function(m,p){return i({_round:u},m,n({},p,function(g,v){return d[p](g,i({},a,v))}))};return Object.keys(d).reduce(h,{})}r.exports=c()})})(nae);var zet=nae.exports;const Bet=Ur(zet),Fet=()=>{const{palette:e}=Qa(),[t,r]=P.useState(!1),{data:n}=sj(),i=P.useMemo(()=>{if(!n)return[];const o=n[0].monthlyData,a=o.map(({revenue:l},u)=>[u,l]),s=Bet.linear(a);return o.map(({month:l,revenue:u},d)=>({name:l,"Actual Revenue":u,"Regression Line":s.points[d][1],"Predicted Revenue":s.predict(d+12)[1]}))},[n]);return B.jsxs(xu,{width:"100%",height:"100%",p:"1rem",overflow:"hidden",children:[B.jsxs(Lf,{m:"1rem 2.5rem",gap:"1rem",children:[B.jsxs(Na,{children:[B.jsx(vi,{variant:"h3",children:"Next Revenues by OpenAI"}),B.jsx(vi,{variant:"h6",children:"charted revenue and predicted revenue based on a simple linear regression model"})]}),B.jsx(LF,{onClick:()=>r(!t),sx:{color:e.grey[200],backgroundColor:e.grey[800],boxShadow:"0.1rem 0.1rem 0.1rem 0.1rem rgba(0,0,0,.4)"},children:"Show Predicted Revenue for Next Year"})]}),B.jsx(ly,{width:"100%",height:"100%",children:B.jsxs(u4,{data:i,margin:{top:20,right:75,left:20,bottom:80},children:[B.jsx(Wm,{strokeDasharray:"3 3",stroke:e.grey[800]}),B.jsx(Ul,{dataKey:"name",tickLine:!1,style:{fontSize:"10px"},children:B.jsx($i,{value:"Month",offset:-5,position:"insideBottom"})}),B.jsx(ps,{domain:[12e3,26e3],axisLine:{strokeWidth:"0"},style:{fontSize:"10px"},tickFormatter:o=>`$${o}`,children:B.jsx($i,{value:"Revenue in USD",angle:-90,offset:-5,position:"insideLeft"})}),B.jsx(Nl,{}),B.jsx($m,{verticalAlign:"top"}),B.jsx(Iu,{type:"monotone",dataKey:"Actual Revenue",stroke:e.primary.main,strokeWidth:0,dot:{strokeWidth:5}}),B.jsx(Iu,{type:"monotone",dataKey:"Regression Line",stroke:"#8884d8",dot:!1}),t&&B.jsx(Iu,{strokeDasharray:"5 5",dataKey:"Predicted Revenue",stroke:e.secondary[500]})]})})]})},jet="modulepreload",Uet=function(e){return"/"+e},x9={},ZS=function(t,r,n){if(!r||r.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(r.map(o=>{if(o=Uet(o),o in x9)return;x9[o]=!0;const a=o.endsWith(".css"),s=a?'[rel="stylesheet"]':"";if(!!n)for(let d=i.length-1;d>=0;d--){const c=i[d];if(c.href===o&&(!a||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${s}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":jet,a||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),a)return new Promise((d,c)=>{u.addEventListener("load",d),u.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})};var $et=Object.create,oO=Object.defineProperty,Vet=Object.getOwnPropertyDescriptor,Het=Object.getOwnPropertyNames,Get=Object.getPrototypeOf,Wet=Object.prototype.hasOwnProperty,qet=(e,t,r)=>t in e?oO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ga=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ket=(e,t)=>{for(var r in t)oO(e,r,{get:t[r],enumerable:!0})},Xet=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Het(t))!Wet.call(e,i)&&i!==r&&oO(e,i,{get:()=>t[i],enumerable:!(n=Vet(t,i))||n.enumerable});return e},Lo=(e,t,r)=>(r=e!=null?$et(Get(e)):{},Xet(t||!e||!e.__esModule?oO(r,"default",{value:e,enumerable:!0}):r,e)),Ma=(e,t,r)=>(qet(e,typeof t!="symbol"?t+"":t,r),r),Yet=ga((e,t)=>{(function(r,n){typeof e=="object"?t.exports=n():typeof define=="function"&&define.amd?define(n):r.Alea=n()})(e,function(){return r.importState=function(i){var o=new r;return o.importState(i),o},r;function r(){return function(i){var o=0,a=0,s=0,l=1;i.length==0&&(i=[+new Date]);var u=n();o=u(" "),a=u(" "),s=u(" ");for(var d=0;d<i.length;d++)o-=u(i[d]),o<0&&(o+=1),a-=u(i[d]),a<0&&(a+=1),s-=u(i[d]),s<0&&(s+=1);u=null;var c=function(){var h=2091639*o+l*23283064365386963e-26;return o=a,a=s,s=h-(l=h|0)};return c.next=c,c.uint32=function(){return c()*4294967296},c.fract53=function(){return c()+(c()*2097152|0)*11102230246251565e-32},c.version="Alea 0.9",c.args=i,c.exportState=function(){return[o,a,s,l]},c.importState=function(h){o=+h[0]||0,a=+h[1]||0,s=+h[2]||0,l=+h[3]||0},c}(Array.prototype.slice.call(arguments))}function n(){var i=4022871197,o=function(a){a=a.toString();for(var s=0;s<a.length;s++){i+=a.charCodeAt(s);var l=.02519603282416938*i;i=l>>>0,l-=i,l*=i,i=l>>>0,l-=i,i+=l*4294967296}return(i>>>0)*23283064365386963e-26};return o.version="Mash 0.9",o}})}),iae=ga((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?n(e):typeof define=="function"&&define.amd?define(["exports"],n):n((r=typeof globalThis<"u"?globalThis:r||self).SVDJS={})})(e,function(r){r.SVD=function(n,i,o,a,s){if(i=i===void 0||i,o=o===void 0||o,s=1e-64/(a=a||Math.pow(2,-52)),!n)throw new TypeError("Matrix a is not defined");var l,u,d,c,h,f,m,p,g,v,b,y,x=n[0].length,S=n.length;if(S<x)throw new TypeError("Invalid matrix: m < n");for(var w=[],_=[],C=[],E=i==="f"?S:x,A=v=m=0;A<S;A++)_[A]=new Array(E).fill(0);for(A=0;A<x;A++)C[A]=new Array(x).fill(0);var M,I=new Array(x).fill(0);for(A=0;A<S;A++)for(l=0;l<x;l++)_[A][l]=n[A][l];for(A=0;A<x;A++){for(w[A]=m,g=0,d=A+1,l=A;l<S;l++)g+=Math.pow(_[l][A],2);if(g<s)m=0;else for(p=(f=_[A][A])*(m=f<0?Math.sqrt(g):-Math.sqrt(g))-g,_[A][A]=f-m,l=d;l<x;l++){for(g=0,u=A;u<S;u++)g+=_[u][A]*_[u][l];for(f=g/p,u=A;u<S;u++)_[u][l]=_[u][l]+f*_[u][A]}for(I[A]=m,g=0,l=d;l<x;l++)g+=Math.pow(_[A][l],2);if(g<s)m=0;else{for(p=(f=_[A][A+1])*(m=f<0?Math.sqrt(g):-Math.sqrt(g))-g,_[A][A+1]=f-m,l=d;l<x;l++)w[l]=_[A][l]/p;for(l=d;l<S;l++){for(g=0,u=d;u<x;u++)g+=_[l][u]*_[A][u];for(u=d;u<x;u++)_[l][u]=_[l][u]+g*w[u]}}v<(b=Math.abs(I[A])+Math.abs(w[A]))&&(v=b)}if(o)for(A=x-1;0<=A;A--){if(m!==0){for(p=_[A][A+1]*m,l=d;l<x;l++)C[l][A]=_[A][l]/p;for(l=d;l<x;l++){for(g=0,u=d;u<x;u++)g+=_[A][u]*C[u][l];for(u=d;u<x;u++)C[u][l]=C[u][l]+g*C[u][A]}}for(l=d;l<x;l++)C[A][l]=0,C[l][A]=0;C[A][A]=1,m=w[A],d=A}if(i){if(i==="f")for(A=x;A<S;A++){for(l=x;l<S;l++)_[A][l]=0;_[A][A]=1}for(A=x-1;0<=A;A--){for(d=A+1,m=I[A],l=d;l<E;l++)_[A][l]=0;if(m!==0){for(p=_[A][A]*m,l=d;l<E;l++){for(g=0,u=d;u<S;u++)g+=_[u][A]*_[u][l];for(f=g/p,u=A;u<S;u++)_[u][l]=_[u][l]+f*_[u][A]}for(l=A;l<S;l++)_[l][A]=_[l][A]/m}else for(l=A;l<S;l++)_[l][A]=0;_[A][A]=_[A][A]+1}}for(a*=v,u=x-1;0<=u;u--)for(var O=0;O<50;O++){for(M=!1,d=u;0<=d;d--){if(Math.abs(w[d])<=a){M=!0;break}if(Math.abs(I[d-1])<=a)break}if(!M){for(h=0,c=d-(g=1),A=d;A<u+1&&(f=g*w[A],w[A]=h*w[A],!(Math.abs(f)<=a));A++)if(m=I[A],I[A]=Math.sqrt(f*f+m*m),h=m/(p=I[A]),g=-f/p,i)for(l=0;l<S;l++)b=_[l][c],y=_[l][A],_[l][c]=b*h+y*g,_[l][A]=-b*g+y*h}if(y=I[u],d===u){if(y<0&&(I[u]=-y,o))for(l=0;l<x;l++)C[l][u]=-C[l][u];break}for(v=I[d],f=(((b=I[u-1])-y)*(b+y)+((m=w[u-1])-(p=w[u]))*(m+p))/(2*p*b),m=Math.sqrt(f*f+1),f=((v-y)*(v+y)+p*(b/(f<0?f-m:f+m)-p))/v,A=d+(g=h=1);A<u+1;A++){if(m=w[A],b=I[A],p=g*m,m*=h,y=Math.sqrt(f*f+p*p),f=v*(h=f/(w[A-1]=y))+m*(g=p/y),m=-v*g+m*h,p=b*g,b*=h,o)for(l=0;l<x;l++)v=C[l][A-1],y=C[l][A],C[l][A-1]=v*h+y*g,C[l][A]=-v*g+y*h;if(y=Math.sqrt(f*f+p*p),f=(h=f/(I[A-1]=y))*m+(g=p/y)*b,v=-g*m+h*b,i)for(l=0;l<S;l++)b=_[l][A-1],y=_[l][A],_[l][A-1]=b*h+y*g,_[l][A]=-b*g+y*h}w[d]=0,w[u]=f,I[u]=v}for(A=0;A<x;A++)I[A]<a&&(I[A]=0);return{u:_,q:I,v:C}},r.VERSION="1.1.1",Object.defineProperty(r,"__esModule",{value:!0})})}),Qet=ga((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?t.exports=n():typeof define=="function"&&define.amd?define(n):(r=r||self,r.TinyQueue=n())})(e,function(){var r=function(i,o){if(i===void 0&&(i=[]),o===void 0&&(o=n),this.data=i,this.length=this.data.length,this.compare=o,this.length>0)for(var a=(this.length>>1)-1;a>=0;a--)this._down(a)};r.prototype.push=function(i){this.data.push(i),this.length++,this._up(this.length-1)},r.prototype.pop=function(){if(this.length!==0){var i=this.data[0],o=this.data.pop();return this.length--,this.length>0&&(this.data[0]=o,this._down(0)),i}},r.prototype.peek=function(){return this.data[0]},r.prototype._up=function(i){for(var o=this,a=o.data,s=o.compare,l=a[i];i>0;){var u=i-1>>1,d=a[u];if(s(l,d)>=0)break;a[i]=d,i=u}a[i]=l},r.prototype._down=function(i){for(var o=this,a=o.data,s=o.compare,l=this.length>>1,u=a[i];i<l;){var d=(i<<1)+1,c=a[d],h=d+1;if(h<this.length&&s(a[h],c)<0&&(d=h,c=a[h]),s(c,u)>=0)break;a[i]=c,i=d}a[i]=u};function n(i,o){return i<o?-1:i>o?1:0}return r})}),Zet=ga((e,t)=>{var r=Qet();r.default&&(r=r.default),t.exports=n,t.exports.default=n;function n(u,d,c){d=d||1;for(var h,f,m,p,g=0;g<u[0].length;g++){var v=u[0][g];(!g||v[0]<h)&&(h=v[0]),(!g||v[1]<f)&&(f=v[1]),(!g||v[0]>m)&&(m=v[0]),(!g||v[1]>p)&&(p=v[1])}var b=m-h,y=p-f,x=Math.min(b,y),S=x/2;if(x===0){var w=[h,f];return w.distance=0,w}for(var _=new r(void 0,i),C=h;C<m;C+=x)for(var E=f;E<p;E+=x)_.push(new o(C+S,E+S,S,u));var A=s(u),M=new o(h+b/2,f+y/2,0,u);M.d>A.d&&(A=M);for(var I=_.length;_.length;){var O=_.pop();O.d>A.d&&(A=O,c&&console.log("found best %d after %d probes",Math.round(1e4*O.d)/1e4,I)),!(O.max-A.d<=d)&&(S=O.h/2,_.push(new o(O.x-S,O.y-S,S,u)),_.push(new o(O.x+S,O.y-S,S,u)),_.push(new o(O.x-S,O.y+S,S,u)),_.push(new o(O.x+S,O.y+S,S,u)),I+=4)}c&&(console.log("num probes: "+I),console.log("best distance: "+A.d));var T=[A.x,A.y];return T.distance=A.d,T}function i(u,d){return d.max-u.max}function o(u,d,c,h){this.x=u,this.y=d,this.h=c,this.d=a(u,d,h),this.max=this.d+this.h*Math.SQRT2}function a(u,d,c){for(var h=!1,f=1/0,m=0;m<c.length;m++)for(var p=c[m],g=0,v=p.length,b=v-1;g<v;b=g++){var y=p[g],x=p[b];y[1]>d!=x[1]>d&&u<(x[0]-y[0])*(d-y[1])/(x[1]-y[1])+y[0]&&(h=!h),f=Math.min(f,l(u,d,y,x))}return f===0?0:(h?1:-1)*Math.sqrt(f)}function s(u){for(var d=0,c=0,h=0,f=u[0],m=0,p=f.length,g=p-1;m<p;g=m++){var v=f[m],b=f[g],y=v[0]*b[1]-b[0]*v[1];c+=(v[0]+b[0])*y,h+=(v[1]+b[1])*y,d+=y*3}return d===0?new o(f[0][0],f[0][1],0,u):new o(c/d,h/d,0,u)}function l(u,d,c,h){var f=c[0],m=c[1],p=h[0]-f,g=h[1]-m;if(p!==0||g!==0){var v=((u-f)*p+(d-m)*g)/(p*p+g*g);v>1?(f=h[0],m=h[1]):v>0&&(f+=p*v,m+=g*v)}return p=u-f,g=d-m,p*p+g*g}}),Jet=ga((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;function r(n){if(n===null||n===!0||n===!1)return NaN;var i=Number(n);return isNaN(i)?i:i<0?Math.ceil(i):Math.floor(i)}t.exports=e.default}),ett=ga((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;function r(n){var i=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return i.setUTCFullYear(n.getFullYear()),n.getTime()-i.getTime()}t.exports=e.default}),ttt=ga(e=>{(function(){var t=function(){this.init()};t.prototype={init:function(){var c=this||r;return c._counter=1e3,c._html5AudioPool=[],c.html5PoolSize=10,c._codecs={},c._howls=[],c._muted=!1,c._volume=1,c._canPlayEvent="canplaythrough",c._navigator=typeof window<"u"&&window.navigator?window.navigator:null,c.masterGain=null,c.noAudio=!1,c.usingWebAudio=!0,c.autoSuspend=!0,c.ctx=null,c.autoUnlock=!0,c._setup(),c},volume:function(c){var h=this||r;if(c=parseFloat(c),h.ctx||d(),typeof c<"u"&&c>=0&&c<=1){if(h._volume=c,h._muted)return h;h.usingWebAudio&&h.masterGain.gain.setValueAtTime(c,r.ctx.currentTime);for(var f=0;f<h._howls.length;f++)if(!h._howls[f]._webAudio)for(var m=h._howls[f]._getSoundIds(),p=0;p<m.length;p++){var g=h._howls[f]._soundById(m[p]);g&&g._node&&(g._node.volume=g._volume*c)}return h}return h._volume},mute:function(c){var h=this||r;h.ctx||d(),h._muted=c,h.usingWebAudio&&h.masterGain.gain.setValueAtTime(c?0:h._volume,r.ctx.currentTime);for(var f=0;f<h._howls.length;f++)if(!h._howls[f]._webAudio)for(var m=h._howls[f]._getSoundIds(),p=0;p<m.length;p++){var g=h._howls[f]._soundById(m[p]);g&&g._node&&(g._node.muted=c?!0:g._muted)}return h},stop:function(){for(var c=this||r,h=0;h<c._howls.length;h++)c._howls[h].stop();return c},unload:function(){for(var c=this||r,h=c._howls.length-1;h>=0;h--)c._howls[h].unload();return c.usingWebAudio&&c.ctx&&typeof c.ctx.close<"u"&&(c.ctx.close(),c.ctx=null,d()),c},codecs:function(c){return(this||r)._codecs[c.replace(/^x-/,"")]},_setup:function(){var c=this||r;if(c.state=c.ctx&&c.ctx.state||"suspended",c._autoSuspend(),!c.usingWebAudio)if(typeof Audio<"u")try{var h=new Audio;typeof h.oncanplaythrough>"u"&&(c._canPlayEvent="canplay")}catch{c.noAudio=!0}else c.noAudio=!0;try{var h=new Audio;h.muted&&(c.noAudio=!0)}catch{}return c.noAudio||c._setupCodecs(),c},_setupCodecs:function(){var c=this||r,h=null;try{h=typeof Audio<"u"?new Audio:null}catch{return c}if(!h||typeof h.canPlayType!="function")return c;var f=h.canPlayType("audio/mpeg;").replace(/^no$/,""),m=c._navigator?c._navigator.userAgent:"",p=m.match(/OPR\/([0-6].)/g),g=p&&parseInt(p[0].split("/")[1],10)<33,v=m.indexOf("Safari")!==-1&&m.indexOf("Chrome")===-1,b=m.match(/Version\/(.*?) /),y=v&&b&&parseInt(b[1],10)<15;return c._codecs={mp3:!!(!g&&(f||h.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!f,opus:!!h.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!h.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!h.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(h.canPlayType('audio/wav; codecs="1"')||h.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!h.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!h.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(h.canPlayType("audio/x-m4a;")||h.canPlayType("audio/m4a;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(h.canPlayType("audio/x-m4b;")||h.canPlayType("audio/m4b;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(h.canPlayType("audio/x-mp4;")||h.canPlayType("audio/mp4;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!y&&h.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!y&&h.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!h.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(h.canPlayType("audio/x-flac;")||h.canPlayType("audio/flac;")).replace(/^no$/,"")},c},_unlockAudio:function(){var c=this||r;if(!(c._audioUnlocked||!c.ctx)){c._audioUnlocked=!1,c.autoUnlock=!1,!c._mobileUnloaded&&c.ctx.sampleRate!==44100&&(c._mobileUnloaded=!0,c.unload()),c._scratchBuffer=c.ctx.createBuffer(1,1,22050);var h=function(f){for(;c._html5AudioPool.length<c.html5PoolSize;)try{var m=new Audio;m._unlocked=!0,c._releaseHtml5Audio(m)}catch{c.noAudio=!0;break}for(var p=0;p<c._howls.length;p++)if(!c._howls[p]._webAudio)for(var g=c._howls[p]._getSoundIds(),v=0;v<g.length;v++){var b=c._howls[p]._soundById(g[v]);b&&b._node&&!b._node._unlocked&&(b._node._unlocked=!0,b._node.load())}c._autoResume();var y=c.ctx.createBufferSource();y.buffer=c._scratchBuffer,y.connect(c.ctx.destination),typeof y.start>"u"?y.noteOn(0):y.start(0),typeof c.ctx.resume=="function"&&c.ctx.resume(),y.onended=function(){y.disconnect(0),c._audioUnlocked=!0,document.removeEventListener("touchstart",h,!0),document.removeEventListener("touchend",h,!0),document.removeEventListener("click",h,!0),document.removeEventListener("keydown",h,!0);for(var x=0;x<c._howls.length;x++)c._howls[x]._emit("unlock")}};return document.addEventListener("touchstart",h,!0),document.addEventListener("touchend",h,!0),document.addEventListener("click",h,!0),document.addEventListener("keydown",h,!0),c}},_obtainHtml5Audio:function(){var c=this||r;if(c._html5AudioPool.length)return c._html5AudioPool.pop();var h=new Audio().play();return h&&typeof Promise<"u"&&(h instanceof Promise||typeof h.then=="function")&&h.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(c){var h=this||r;return c._unlocked&&h._html5AudioPool.push(c),h},_autoSuspend:function(){var c=this;if(!(!c.autoSuspend||!c.ctx||typeof c.ctx.suspend>"u"||!r.usingWebAudio)){for(var h=0;h<c._howls.length;h++)if(c._howls[h]._webAudio){for(var f=0;f<c._howls[h]._sounds.length;f++)if(!c._howls[h]._sounds[f]._paused)return c}return c._suspendTimer&&clearTimeout(c._suspendTimer),c._suspendTimer=setTimeout(function(){if(c.autoSuspend){c._suspendTimer=null,c.state="suspending";var m=function(){c.state="suspended",c._resumeAfterSuspend&&(delete c._resumeAfterSuspend,c._autoResume())};c.ctx.suspend().then(m,m)}},3e4),c}},_autoResume:function(){var c=this;if(!(!c.ctx||typeof c.ctx.resume>"u"||!r.usingWebAudio))return c.state==="running"&&c.ctx.state!=="interrupted"&&c._suspendTimer?(clearTimeout(c._suspendTimer),c._suspendTimer=null):c.state==="suspended"||c.state==="running"&&c.ctx.state==="interrupted"?(c.ctx.resume().then(function(){c.state="running";for(var h=0;h<c._howls.length;h++)c._howls[h]._emit("resume")}),c._suspendTimer&&(clearTimeout(c._suspendTimer),c._suspendTimer=null)):c.state==="suspending"&&(c._resumeAfterSuspend=!0),c}};var r=new t,n=function(c){var h=this;if(!c.src||c.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}h.init(c)};n.prototype={init:function(c){var h=this;return r.ctx||d(),h._autoplay=c.autoplay||!1,h._format=typeof c.format!="string"?c.format:[c.format],h._html5=c.html5||!1,h._muted=c.mute||!1,h._loop=c.loop||!1,h._pool=c.pool||5,h._preload=typeof c.preload=="boolean"||c.preload==="metadata"?c.preload:!0,h._rate=c.rate||1,h._sprite=c.sprite||{},h._src=typeof c.src!="string"?c.src:[c.src],h._volume=c.volume!==void 0?c.volume:1,h._xhr={method:c.xhr&&c.xhr.method?c.xhr.method:"GET",headers:c.xhr&&c.xhr.headers?c.xhr.headers:null,withCredentials:c.xhr&&c.xhr.withCredentials?c.xhr.withCredentials:!1},h._duration=0,h._state="unloaded",h._sounds=[],h._endTimers={},h._queue=[],h._playLock=!1,h._onend=c.onend?[{fn:c.onend}]:[],h._onfade=c.onfade?[{fn:c.onfade}]:[],h._onload=c.onload?[{fn:c.onload}]:[],h._onloaderror=c.onloaderror?[{fn:c.onloaderror}]:[],h._onplayerror=c.onplayerror?[{fn:c.onplayerror}]:[],h._onpause=c.onpause?[{fn:c.onpause}]:[],h._onplay=c.onplay?[{fn:c.onplay}]:[],h._onstop=c.onstop?[{fn:c.onstop}]:[],h._onmute=c.onmute?[{fn:c.onmute}]:[],h._onvolume=c.onvolume?[{fn:c.onvolume}]:[],h._onrate=c.onrate?[{fn:c.onrate}]:[],h._onseek=c.onseek?[{fn:c.onseek}]:[],h._onunlock=c.onunlock?[{fn:c.onunlock}]:[],h._onresume=[],h._webAudio=r.usingWebAudio&&!h._html5,typeof r.ctx<"u"&&r.ctx&&r.autoUnlock&&r._unlockAudio(),r._howls.push(h),h._autoplay&&h._queue.push({event:"play",action:function(){h.play()}}),h._preload&&h._preload!=="none"&&h.load(),h},load:function(){var c=this,h=null;if(r.noAudio){c._emit("loaderror",null,"No audio support.");return}typeof c._src=="string"&&(c._src=[c._src]);for(var f=0;f<c._src.length;f++){var m,p;if(c._format&&c._format[f])m=c._format[f];else{if(p=c._src[f],typeof p!="string"){c._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}m=/^data:audio\/([^;,]+);/i.exec(p),m||(m=/\.([^.]+)$/.exec(p.split("?",1)[0])),m&&(m=m[1].toLowerCase())}if(m||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),m&&r.codecs(m)){h=c._src[f];break}}if(!h){c._emit("loaderror",null,"No codec support for selected audio sources.");return}return c._src=h,c._state="loading",window.location.protocol==="https:"&&h.slice(0,5)==="http:"&&(c._html5=!0,c._webAudio=!1),new i(c),c._webAudio&&a(c),c},play:function(c,h){var f=this,m=null;if(typeof c=="number")m=c,c=null;else{if(typeof c=="string"&&f._state==="loaded"&&!f._sprite[c])return null;if(typeof c>"u"&&(c="__default",!f._playLock)){for(var p=0,g=0;g<f._sounds.length;g++)f._sounds[g]._paused&&!f._sounds[g]._ended&&(p++,m=f._sounds[g]._id);p===1?c=null:m=null}}var v=m?f._soundById(m):f._inactiveSound();if(!v)return null;if(m&&!c&&(c=v._sprite||"__default"),f._state!=="loaded"){v._sprite=c,v._ended=!1;var b=v._id;return f._queue.push({event:"play",action:function(){f.play(b)}}),b}if(m&&!v._paused)return h||f._loadQueue("play"),v._id;f._webAudio&&r._autoResume();var y=Math.max(0,v._seek>0?v._seek:f._sprite[c][0]/1e3),x=Math.max(0,(f._sprite[c][0]+f._sprite[c][1])/1e3-y),S=x*1e3/Math.abs(v._rate),w=f._sprite[c][0]/1e3,_=(f._sprite[c][0]+f._sprite[c][1])/1e3;v._sprite=c,v._ended=!1;var C=function(){v._paused=!1,v._seek=y,v._start=w,v._stop=_,v._loop=!!(v._loop||f._sprite[c][2])};if(y>=_){f._ended(v);return}var E=v._node;if(f._webAudio){var A=function(){f._playLock=!1,C(),f._refreshBuffer(v);var T=v._muted||f._muted?0:v._volume;E.gain.setValueAtTime(T,r.ctx.currentTime),v._playStart=r.ctx.currentTime,typeof E.bufferSource.start>"u"?v._loop?E.bufferSource.noteGrainOn(0,y,86400):E.bufferSource.noteGrainOn(0,y,x):v._loop?E.bufferSource.start(0,y,86400):E.bufferSource.start(0,y,x),S!==1/0&&(f._endTimers[v._id]=setTimeout(f._ended.bind(f,v),S)),h||setTimeout(function(){f._emit("play",v._id),f._loadQueue()},0)};r.state==="running"&&r.ctx.state!=="interrupted"?A():(f._playLock=!0,f.once("resume",A),f._clearTimer(v._id))}else{var M=function(){E.currentTime=y,E.muted=v._muted||f._muted||r._muted||E.muted,E.volume=v._volume*r.volume(),E.playbackRate=v._rate;try{var T=E.play();if(T&&typeof Promise<"u"&&(T instanceof Promise||typeof T.then=="function")?(f._playLock=!0,C(),T.then(function(){f._playLock=!1,E._unlocked=!0,h?f._loadQueue():f._emit("play",v._id)}).catch(function(){f._playLock=!1,f._emit("playerror",v._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),v._ended=!0,v._paused=!0})):h||(f._playLock=!1,C(),f._emit("play",v._id)),E.playbackRate=v._rate,E.paused){f._emit("playerror",v._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}c!=="__default"||v._loop?f._endTimers[v._id]=setTimeout(f._ended.bind(f,v),S):(f._endTimers[v._id]=function(){f._ended(v),E.removeEventListener("ended",f._endTimers[v._id],!1)},E.addEventListener("ended",f._endTimers[v._id],!1))}catch(D){f._emit("playerror",v._id,D)}};E.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(E.src=f._src,E.load());var I=window&&window.ejecta||!E.readyState&&r._navigator.isCocoonJS;if(E.readyState>=3||I)M();else{f._playLock=!0,f._state="loading";var O=function(){f._state="loaded",M(),E.removeEventListener(r._canPlayEvent,O,!1)};E.addEventListener(r._canPlayEvent,O,!1),f._clearTimer(v._id)}}return v._id},pause:function(c){var h=this;if(h._state!=="loaded"||h._playLock)return h._queue.push({event:"pause",action:function(){h.pause(c)}}),h;for(var f=h._getSoundIds(c),m=0;m<f.length;m++){h._clearTimer(f[m]);var p=h._soundById(f[m]);if(p&&!p._paused&&(p._seek=h.seek(f[m]),p._rateSeek=0,p._paused=!0,h._stopFade(f[m]),p._node))if(h._webAudio){if(!p._node.bufferSource)continue;typeof p._node.bufferSource.stop>"u"?p._node.bufferSource.noteOff(0):p._node.bufferSource.stop(0),h._cleanBuffer(p._node)}else(!isNaN(p._node.duration)||p._node.duration===1/0)&&p._node.pause();arguments[1]||h._emit("pause",p?p._id:null)}return h},stop:function(c,h){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"stop",action:function(){f.stop(c)}}),f;for(var m=f._getSoundIds(c),p=0;p<m.length;p++){f._clearTimer(m[p]);var g=f._soundById(m[p]);g&&(g._seek=g._start||0,g._rateSeek=0,g._paused=!0,g._ended=!0,f._stopFade(m[p]),g._node&&(f._webAudio?g._node.bufferSource&&(typeof g._node.bufferSource.stop>"u"?g._node.bufferSource.noteOff(0):g._node.bufferSource.stop(0),f._cleanBuffer(g._node)):(!isNaN(g._node.duration)||g._node.duration===1/0)&&(g._node.currentTime=g._start||0,g._node.pause(),g._node.duration===1/0&&f._clearSound(g._node))),h||f._emit("stop",g._id))}return f},mute:function(c,h){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"mute",action:function(){f.mute(c,h)}}),f;if(typeof h>"u")if(typeof c=="boolean")f._muted=c;else return f._muted;for(var m=f._getSoundIds(h),p=0;p<m.length;p++){var g=f._soundById(m[p]);g&&(g._muted=c,g._interval&&f._stopFade(g._id),f._webAudio&&g._node?g._node.gain.setValueAtTime(c?0:g._volume,r.ctx.currentTime):g._node&&(g._node.muted=r._muted?!0:c),f._emit("mute",g._id))}return f},volume:function(){var c=this,h=arguments,f,m;if(h.length===0)return c._volume;if(h.length===1||h.length===2&&typeof h[1]>"u"){var p=c._getSoundIds(),g=p.indexOf(h[0]);g>=0?m=parseInt(h[0],10):f=parseFloat(h[0])}else h.length>=2&&(f=parseFloat(h[0]),m=parseInt(h[1],10));var v;if(typeof f<"u"&&f>=0&&f<=1){if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"volume",action:function(){c.volume.apply(c,h)}}),c;typeof m>"u"&&(c._volume=f),m=c._getSoundIds(m);for(var b=0;b<m.length;b++)v=c._soundById(m[b]),v&&(v._volume=f,h[2]||c._stopFade(m[b]),c._webAudio&&v._node&&!v._muted?v._node.gain.setValueAtTime(f,r.ctx.currentTime):v._node&&!v._muted&&(v._node.volume=f*r.volume()),c._emit("volume",v._id))}else return v=m?c._soundById(m):c._sounds[0],v?v._volume:0;return c},fade:function(c,h,f,m){var p=this;if(p._state!=="loaded"||p._playLock)return p._queue.push({event:"fade",action:function(){p.fade(c,h,f,m)}}),p;c=Math.min(Math.max(0,parseFloat(c)),1),h=Math.min(Math.max(0,parseFloat(h)),1),f=parseFloat(f),p.volume(c,m);for(var g=p._getSoundIds(m),v=0;v<g.length;v++){var b=p._soundById(g[v]);if(b){if(m||p._stopFade(g[v]),p._webAudio&&!b._muted){var y=r.ctx.currentTime,x=y+f/1e3;b._volume=c,b._node.gain.setValueAtTime(c,y),b._node.gain.linearRampToValueAtTime(h,x)}p._startFadeInterval(b,c,h,f,g[v],typeof m>"u")}}return p},_startFadeInterval:function(c,h,f,m,p,g){var v=this,b=h,y=f-h,x=Math.abs(y/.01),S=Math.max(4,x>0?m/x:m),w=Date.now();c._fadeTo=f,c._interval=setInterval(function(){var _=(Date.now()-w)/m;w=Date.now(),b+=y*_,b=Math.round(b*100)/100,y<0?b=Math.max(f,b):b=Math.min(f,b),v._webAudio?c._volume=b:v.volume(b,c._id,!0),g&&(v._volume=b),(f<h&&b<=f||f>h&&b>=f)&&(clearInterval(c._interval),c._interval=null,c._fadeTo=null,v.volume(f,c._id),v._emit("fade",c._id))},S)},_stopFade:function(c){var h=this,f=h._soundById(c);return f&&f._interval&&(h._webAudio&&f._node.gain.cancelScheduledValues(r.ctx.currentTime),clearInterval(f._interval),f._interval=null,h.volume(f._fadeTo,c),f._fadeTo=null,h._emit("fade",c)),h},loop:function(){var c=this,h=arguments,f,m,p;if(h.length===0)return c._loop;if(h.length===1)if(typeof h[0]=="boolean")f=h[0],c._loop=f;else return p=c._soundById(parseInt(h[0],10)),p?p._loop:!1;else h.length===2&&(f=h[0],m=parseInt(h[1],10));for(var g=c._getSoundIds(m),v=0;v<g.length;v++)p=c._soundById(g[v]),p&&(p._loop=f,c._webAudio&&p._node&&p._node.bufferSource&&(p._node.bufferSource.loop=f,f&&(p._node.bufferSource.loopStart=p._start||0,p._node.bufferSource.loopEnd=p._stop,c.playing(g[v])&&(c.pause(g[v],!0),c.play(g[v],!0)))));return c},rate:function(){var c=this,h=arguments,f,m;if(h.length===0)m=c._sounds[0]._id;else if(h.length===1){var p=c._getSoundIds(),g=p.indexOf(h[0]);g>=0?m=parseInt(h[0],10):f=parseFloat(h[0])}else h.length===2&&(f=parseFloat(h[0]),m=parseInt(h[1],10));var v;if(typeof f=="number"){if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"rate",action:function(){c.rate.apply(c,h)}}),c;typeof m>"u"&&(c._rate=f),m=c._getSoundIds(m);for(var b=0;b<m.length;b++)if(v=c._soundById(m[b]),v){c.playing(m[b])&&(v._rateSeek=c.seek(m[b]),v._playStart=c._webAudio?r.ctx.currentTime:v._playStart),v._rate=f,c._webAudio&&v._node&&v._node.bufferSource?v._node.bufferSource.playbackRate.setValueAtTime(f,r.ctx.currentTime):v._node&&(v._node.playbackRate=f);var y=c.seek(m[b]),x=(c._sprite[v._sprite][0]+c._sprite[v._sprite][1])/1e3-y,S=x*1e3/Math.abs(v._rate);(c._endTimers[m[b]]||!v._paused)&&(c._clearTimer(m[b]),c._endTimers[m[b]]=setTimeout(c._ended.bind(c,v),S)),c._emit("rate",v._id)}}else return v=c._soundById(m),v?v._rate:c._rate;return c},seek:function(){var c=this,h=arguments,f,m;if(h.length===0)c._sounds.length&&(m=c._sounds[0]._id);else if(h.length===1){var p=c._getSoundIds(),g=p.indexOf(h[0]);g>=0?m=parseInt(h[0],10):c._sounds.length&&(m=c._sounds[0]._id,f=parseFloat(h[0]))}else h.length===2&&(f=parseFloat(h[0]),m=parseInt(h[1],10));if(typeof m>"u")return 0;if(typeof f=="number"&&(c._state!=="loaded"||c._playLock))return c._queue.push({event:"seek",action:function(){c.seek.apply(c,h)}}),c;var v=c._soundById(m);if(v)if(typeof f=="number"&&f>=0){var b=c.playing(m);b&&c.pause(m,!0),v._seek=f,v._ended=!1,c._clearTimer(m),!c._webAudio&&v._node&&!isNaN(v._node.duration)&&(v._node.currentTime=f);var y=function(){b&&c.play(m,!0),c._emit("seek",m)};if(b&&!c._webAudio){var x=function(){c._playLock?setTimeout(x,0):y()};setTimeout(x,0)}else y()}else if(c._webAudio){var S=c.playing(m)?r.ctx.currentTime-v._playStart:0,w=v._rateSeek?v._rateSeek-v._seek:0;return v._seek+(w+S*Math.abs(v._rate))}else return v._node.currentTime;return c},playing:function(c){var h=this;if(typeof c=="number"){var f=h._soundById(c);return f?!f._paused:!1}for(var m=0;m<h._sounds.length;m++)if(!h._sounds[m]._paused)return!0;return!1},duration:function(c){var h=this,f=h._duration,m=h._soundById(c);return m&&(f=h._sprite[m._sprite][1]/1e3),f},state:function(){return this._state},unload:function(){for(var c=this,h=c._sounds,f=0;f<h.length;f++)h[f]._paused||c.stop(h[f]._id),c._webAudio||(c._clearSound(h[f]._node),h[f]._node.removeEventListener("error",h[f]._errorFn,!1),h[f]._node.removeEventListener(r._canPlayEvent,h[f]._loadFn,!1),h[f]._node.removeEventListener("ended",h[f]._endFn,!1),r._releaseHtml5Audio(h[f]._node)),delete h[f]._node,c._clearTimer(h[f]._id);var m=r._howls.indexOf(c);m>=0&&r._howls.splice(m,1);var p=!0;for(f=0;f<r._howls.length;f++)if(r._howls[f]._src===c._src||c._src.indexOf(r._howls[f]._src)>=0){p=!1;break}return o&&p&&delete o[c._src],r.noAudio=!1,c._state="unloaded",c._sounds=[],c=null,null},on:function(c,h,f,m){var p=this,g=p["_on"+c];return typeof h=="function"&&g.push(m?{id:f,fn:h,once:m}:{id:f,fn:h}),p},off:function(c,h,f){var m=this,p=m["_on"+c],g=0;if(typeof h=="number"&&(f=h,h=null),h||f)for(g=0;g<p.length;g++){var v=f===p[g].id;if(h===p[g].fn&&v||!h&&v){p.splice(g,1);break}}else if(c)m["_on"+c]=[];else{var b=Object.keys(m);for(g=0;g<b.length;g++)b[g].indexOf("_on")===0&&Array.isArray(m[b[g]])&&(m[b[g]]=[])}return m},once:function(c,h,f){var m=this;return m.on(c,h,f,1),m},_emit:function(c,h,f){for(var m=this,p=m["_on"+c],g=p.length-1;g>=0;g--)(!p[g].id||p[g].id===h||c==="load")&&(setTimeout((function(v){v.call(this,h,f)}).bind(m,p[g].fn),0),p[g].once&&m.off(c,p[g].fn,p[g].id));return m._loadQueue(c),m},_loadQueue:function(c){var h=this;if(h._queue.length>0){var f=h._queue[0];f.event===c&&(h._queue.shift(),h._loadQueue()),c||f.action()}return h},_ended:function(c){var h=this,f=c._sprite;if(!h._webAudio&&c._node&&!c._node.paused&&!c._node.ended&&c._node.currentTime<c._stop)return setTimeout(h._ended.bind(h,c),100),h;var m=!!(c._loop||h._sprite[f][2]);if(h._emit("end",c._id),!h._webAudio&&m&&h.stop(c._id,!0).play(c._id),h._webAudio&&m){h._emit("play",c._id),c._seek=c._start||0,c._rateSeek=0,c._playStart=r.ctx.currentTime;var p=(c._stop-c._start)*1e3/Math.abs(c._rate);h._endTimers[c._id]=setTimeout(h._ended.bind(h,c),p)}return h._webAudio&&!m&&(c._paused=!0,c._ended=!0,c._seek=c._start||0,c._rateSeek=0,h._clearTimer(c._id),h._cleanBuffer(c._node),r._autoSuspend()),!h._webAudio&&!m&&h.stop(c._id,!0),h},_clearTimer:function(c){var h=this;if(h._endTimers[c]){if(typeof h._endTimers[c]!="function")clearTimeout(h._endTimers[c]);else{var f=h._soundById(c);f&&f._node&&f._node.removeEventListener("ended",h._endTimers[c],!1)}delete h._endTimers[c]}return h},_soundById:function(c){for(var h=this,f=0;f<h._sounds.length;f++)if(c===h._sounds[f]._id)return h._sounds[f];return null},_inactiveSound:function(){var c=this;c._drain();for(var h=0;h<c._sounds.length;h++)if(c._sounds[h]._ended)return c._sounds[h].reset();return new i(c)},_drain:function(){var c=this,h=c._pool,f=0,m=0;if(!(c._sounds.length<h)){for(m=0;m<c._sounds.length;m++)c._sounds[m]._ended&&f++;for(m=c._sounds.length-1;m>=0;m--){if(f<=h)return;c._sounds[m]._ended&&(c._webAudio&&c._sounds[m]._node&&c._sounds[m]._node.disconnect(0),c._sounds.splice(m,1),f--)}}},_getSoundIds:function(c){var h=this;if(typeof c>"u"){for(var f=[],m=0;m<h._sounds.length;m++)f.push(h._sounds[m]._id);return f}else return[c]},_refreshBuffer:function(c){var h=this;return c._node.bufferSource=r.ctx.createBufferSource(),c._node.bufferSource.buffer=o[h._src],c._panner?c._node.bufferSource.connect(c._panner):c._node.bufferSource.connect(c._node),c._node.bufferSource.loop=c._loop,c._loop&&(c._node.bufferSource.loopStart=c._start||0,c._node.bufferSource.loopEnd=c._stop||0),c._node.bufferSource.playbackRate.setValueAtTime(c._rate,r.ctx.currentTime),h},_cleanBuffer:function(c){var h=this,f=r._navigator&&r._navigator.vendor.indexOf("Apple")>=0;if(r._scratchBuffer&&c.bufferSource&&(c.bufferSource.onended=null,c.bufferSource.disconnect(0),f))try{c.bufferSource.buffer=r._scratchBuffer}catch{}return c.bufferSource=null,h},_clearSound:function(c){var h=/MSIE |Trident\//.test(r._navigator&&r._navigator.userAgent);h||(c.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var i=function(c){this._parent=c,this.init()};i.prototype={init:function(){var c=this,h=c._parent;return c._muted=h._muted,c._loop=h._loop,c._volume=h._volume,c._rate=h._rate,c._seek=0,c._paused=!0,c._ended=!0,c._sprite="__default",c._id=++r._counter,h._sounds.push(c),c.create(),c},create:function(){var c=this,h=c._parent,f=r._muted||c._muted||c._parent._muted?0:c._volume;return h._webAudio?(c._node=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),c._node.gain.setValueAtTime(f,r.ctx.currentTime),c._node.paused=!0,c._node.connect(r.masterGain)):r.noAudio||(c._node=r._obtainHtml5Audio(),c._errorFn=c._errorListener.bind(c),c._node.addEventListener("error",c._errorFn,!1),c._loadFn=c._loadListener.bind(c),c._node.addEventListener(r._canPlayEvent,c._loadFn,!1),c._endFn=c._endListener.bind(c),c._node.addEventListener("ended",c._endFn,!1),c._node.src=h._src,c._node.preload=h._preload===!0?"auto":h._preload,c._node.volume=f*r.volume(),c._node.load()),c},reset:function(){var c=this,h=c._parent;return c._muted=h._muted,c._loop=h._loop,c._volume=h._volume,c._rate=h._rate,c._seek=0,c._rateSeek=0,c._paused=!0,c._ended=!0,c._sprite="__default",c._id=++r._counter,c},_errorListener:function(){var c=this;c._parent._emit("loaderror",c._id,c._node.error?c._node.error.code:0),c._node.removeEventListener("error",c._errorFn,!1)},_loadListener:function(){var c=this,h=c._parent;h._duration=Math.ceil(c._node.duration*10)/10,Object.keys(h._sprite).length===0&&(h._sprite={__default:[0,h._duration*1e3]}),h._state!=="loaded"&&(h._state="loaded",h._emit("load"),h._loadQueue()),c._node.removeEventListener(r._canPlayEvent,c._loadFn,!1)},_endListener:function(){var c=this,h=c._parent;h._duration===1/0&&(h._duration=Math.ceil(c._node.duration*10)/10,h._sprite.__default[1]===1/0&&(h._sprite.__default[1]=h._duration*1e3),h._ended(c)),c._node.removeEventListener("ended",c._endFn,!1)}};var o={},a=function(c){var h=c._src;if(o[h]){c._duration=o[h].duration,u(c);return}if(/^data:[^;]+;base64,/.test(h)){for(var f=atob(h.split(",")[1]),m=new Uint8Array(f.length),p=0;p<f.length;++p)m[p]=f.charCodeAt(p);l(m.buffer,c)}else{var g=new XMLHttpRequest;g.open(c._xhr.method,h,!0),g.withCredentials=c._xhr.withCredentials,g.responseType="arraybuffer",c._xhr.headers&&Object.keys(c._xhr.headers).forEach(function(v){g.setRequestHeader(v,c._xhr.headers[v])}),g.onload=function(){var v=(g.status+"")[0];if(v!=="0"&&v!=="2"&&v!=="3"){c._emit("loaderror",null,"Failed loading audio file with status: "+g.status+".");return}l(g.response,c)},g.onerror=function(){c._webAudio&&(c._html5=!0,c._webAudio=!1,c._sounds=[],delete o[h],c.load())},s(g)}},s=function(c){try{c.send()}catch{c.onerror()}},l=function(c,h){var f=function(){h._emit("loaderror",null,"Decoding audio data failed.")},m=function(p){p&&h._sounds.length>0?(o[h._src]=p,u(h,p)):f()};typeof Promise<"u"&&r.ctx.decodeAudioData.length===1?r.ctx.decodeAudioData(c).then(m).catch(f):r.ctx.decodeAudioData(c,m,f)},u=function(c,h){h&&!c._duration&&(c._duration=h.duration),Object.keys(c._sprite).length===0&&(c._sprite={__default:[0,c._duration*1e3]}),c._state!=="loaded"&&(c._state="loaded",c._emit("load"),c._loadQueue())},d=function(){if(r.usingWebAudio){try{typeof AudioContext<"u"?r.ctx=new AudioContext:typeof webkitAudioContext<"u"?r.ctx=new webkitAudioContext:r.usingWebAudio=!1}catch{r.usingWebAudio=!1}r.ctx||(r.usingWebAudio=!1);var c=/iP(hone|od|ad)/.test(r._navigator&&r._navigator.platform),h=r._navigator&&r._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),f=h?parseInt(h[1],10):null;if(c&&f&&f<9){var m=/safari/.test(r._navigator&&r._navigator.userAgent.toLowerCase());r._navigator&&!m&&(r.usingWebAudio=!1)}r.usingWebAudio&&(r.masterGain=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),r.masterGain.gain.setValueAtTime(r._muted?0:r._volume,r.ctx.currentTime),r.masterGain.connect(r.ctx.destination)),r._setup()}};typeof define=="function"&&define.amd&&define([],function(){return{Howler:r,Howl:n}}),typeof e<"u"&&(e.Howler=r,e.Howl=n),typeof global<"u"?(global.HowlerGlobal=t,global.Howler=r,global.Howl=n,global.Sound=i):typeof window<"u"&&(window.HowlerGlobal=t,window.Howler=r,window.Howl=n,window.Sound=i)})(),function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(r){var n=this;if(!n.ctx||!n.ctx.listener)return n;for(var i=n._howls.length-1;i>=0;i--)n._howls[i].stereo(r);return n},HowlerGlobal.prototype.pos=function(r,n,i){var o=this;if(!o.ctx||!o.ctx.listener)return o;if(n=typeof n!="number"?o._pos[1]:n,i=typeof i!="number"?o._pos[2]:i,typeof r=="number")o._pos=[r,n,i],typeof o.ctx.listener.positionX<"u"?(o.ctx.listener.positionX.setTargetAtTime(o._pos[0],Howler.ctx.currentTime,.1),o.ctx.listener.positionY.setTargetAtTime(o._pos[1],Howler.ctx.currentTime,.1),o.ctx.listener.positionZ.setTargetAtTime(o._pos[2],Howler.ctx.currentTime,.1)):o.ctx.listener.setPosition(o._pos[0],o._pos[1],o._pos[2]);else return o._pos;return o},HowlerGlobal.prototype.orientation=function(r,n,i,o,a,s){var l=this;if(!l.ctx||!l.ctx.listener)return l;var u=l._orientation;if(n=typeof n!="number"?u[1]:n,i=typeof i!="number"?u[2]:i,o=typeof o!="number"?u[3]:o,a=typeof a!="number"?u[4]:a,s=typeof s!="number"?u[5]:s,typeof r=="number")l._orientation=[r,n,i,o,a,s],typeof l.ctx.listener.forwardX<"u"?(l.ctx.listener.forwardX.setTargetAtTime(r,Howler.ctx.currentTime,.1),l.ctx.listener.forwardY.setTargetAtTime(n,Howler.ctx.currentTime,.1),l.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),l.ctx.listener.upX.setTargetAtTime(o,Howler.ctx.currentTime,.1),l.ctx.listener.upY.setTargetAtTime(a,Howler.ctx.currentTime,.1),l.ctx.listener.upZ.setTargetAtTime(s,Howler.ctx.currentTime,.1)):l.ctx.listener.setOrientation(r,n,i,o,a,s);else return u;return l},Howl.prototype.init=function(r){return function(n){var i=this;return i._orientation=n.orientation||[1,0,0],i._stereo=n.stereo||null,i._pos=n.pos||null,i._pannerAttr={coneInnerAngle:typeof n.coneInnerAngle<"u"?n.coneInnerAngle:360,coneOuterAngle:typeof n.coneOuterAngle<"u"?n.coneOuterAngle:360,coneOuterGain:typeof n.coneOuterGain<"u"?n.coneOuterGain:0,distanceModel:typeof n.distanceModel<"u"?n.distanceModel:"inverse",maxDistance:typeof n.maxDistance<"u"?n.maxDistance:1e4,panningModel:typeof n.panningModel<"u"?n.panningModel:"HRTF",refDistance:typeof n.refDistance<"u"?n.refDistance:1,rolloffFactor:typeof n.rolloffFactor<"u"?n.rolloffFactor:1},i._onstereo=n.onstereo?[{fn:n.onstereo}]:[],i._onpos=n.onpos?[{fn:n.onpos}]:[],i._onorientation=n.onorientation?[{fn:n.onorientation}]:[],r.call(this,n)}}(Howl.prototype.init),Howl.prototype.stereo=function(r,n){var i=this;if(!i._webAudio)return i;if(i._state!=="loaded")return i._queue.push({event:"stereo",action:function(){i.stereo(r,n)}}),i;var o=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof n>"u")if(typeof r=="number")i._stereo=r,i._pos=[r,0,0];else return i._stereo;for(var a=i._getSoundIds(n),s=0;s<a.length;s++){var l=i._soundById(a[s]);if(l)if(typeof r=="number")l._stereo=r,l._pos=[r,0,0],l._node&&(l._pannerAttr.panningModel="equalpower",(!l._panner||!l._panner.pan)&&t(l,o),o==="spatial"?typeof l._panner.positionX<"u"?(l._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):l._panner.setPosition(r,0,0):l._panner.pan.setValueAtTime(r,Howler.ctx.currentTime)),i._emit("stereo",l._id);else return l._stereo}return i},Howl.prototype.pos=function(r,n,i,o){var a=this;if(!a._webAudio)return a;if(a._state!=="loaded")return a._queue.push({event:"pos",action:function(){a.pos(r,n,i,o)}}),a;if(n=typeof n!="number"?0:n,i=typeof i!="number"?-.5:i,typeof o>"u")if(typeof r=="number")a._pos=[r,n,i];else return a._pos;for(var s=a._getSoundIds(o),l=0;l<s.length;l++){var u=a._soundById(s[l]);if(u)if(typeof r=="number")u._pos=[r,n,i],u._node&&((!u._panner||u._panner.pan)&&t(u,"spatial"),typeof u._panner.positionX<"u"?(u._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(i,Howler.ctx.currentTime)):u._panner.setPosition(r,n,i)),a._emit("pos",u._id);else return u._pos}return a},Howl.prototype.orientation=function(r,n,i,o){var a=this;if(!a._webAudio)return a;if(a._state!=="loaded")return a._queue.push({event:"orientation",action:function(){a.orientation(r,n,i,o)}}),a;if(n=typeof n!="number"?a._orientation[1]:n,i=typeof i!="number"?a._orientation[2]:i,typeof o>"u")if(typeof r=="number")a._orientation=[r,n,i];else return a._orientation;for(var s=a._getSoundIds(o),l=0;l<s.length;l++){var u=a._soundById(s[l]);if(u)if(typeof r=="number")u._orientation=[r,n,i],u._node&&(u._panner||(u._pos||(u._pos=a._pos||[0,0,-.5]),t(u,"spatial")),typeof u._panner.orientationX<"u"?(u._panner.orientationX.setValueAtTime(r,Howler.ctx.currentTime),u._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),u._panner.orientationZ.setValueAtTime(i,Howler.ctx.currentTime)):u._panner.setOrientation(r,n,i)),a._emit("orientation",u._id);else return u._orientation}return a},Howl.prototype.pannerAttr=function(){var r=this,n=arguments,i,o,a;if(!r._webAudio)return r;if(n.length===0)return r._pannerAttr;if(n.length===1)if(typeof n[0]=="object")i=n[0],typeof o>"u"&&(i.pannerAttr||(i.pannerAttr={coneInnerAngle:i.coneInnerAngle,coneOuterAngle:i.coneOuterAngle,coneOuterGain:i.coneOuterGain,distanceModel:i.distanceModel,maxDistance:i.maxDistance,refDistance:i.refDistance,rolloffFactor:i.rolloffFactor,panningModel:i.panningModel}),r._pannerAttr={coneInnerAngle:typeof i.pannerAttr.coneInnerAngle<"u"?i.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:typeof i.pannerAttr.coneOuterAngle<"u"?i.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:typeof i.pannerAttr.coneOuterGain<"u"?i.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:typeof i.pannerAttr.distanceModel<"u"?i.pannerAttr.distanceModel:r._distanceModel,maxDistance:typeof i.pannerAttr.maxDistance<"u"?i.pannerAttr.maxDistance:r._maxDistance,refDistance:typeof i.pannerAttr.refDistance<"u"?i.pannerAttr.refDistance:r._refDistance,rolloffFactor:typeof i.pannerAttr.rolloffFactor<"u"?i.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:typeof i.pannerAttr.panningModel<"u"?i.pannerAttr.panningModel:r._panningModel});else return a=r._soundById(parseInt(n[0],10)),a?a._pannerAttr:r._pannerAttr;else n.length===2&&(i=n[0],o=parseInt(n[1],10));for(var s=r._getSoundIds(o),l=0;l<s.length;l++)if(a=r._soundById(s[l]),a){var u=a._pannerAttr;u={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:u.coneInnerAngle,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:u.coneOuterAngle,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:u.coneOuterGain,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:u.distanceModel,maxDistance:typeof i.maxDistance<"u"?i.maxDistance:u.maxDistance,refDistance:typeof i.refDistance<"u"?i.refDistance:u.refDistance,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:u.rolloffFactor,panningModel:typeof i.panningModel<"u"?i.panningModel:u.panningModel};var d=a._panner;d?(d.coneInnerAngle=u.coneInnerAngle,d.coneOuterAngle=u.coneOuterAngle,d.coneOuterGain=u.coneOuterGain,d.distanceModel=u.distanceModel,d.maxDistance=u.maxDistance,d.refDistance=u.refDistance,d.rolloffFactor=u.rolloffFactor,d.panningModel=u.panningModel):(a._pos||(a._pos=r._pos||[0,0,-.5]),t(a,"spatial"))}return r},Sound.prototype.init=function(r){return function(){var n=this,i=n._parent;n._orientation=i._orientation,n._stereo=i._stereo,n._pos=i._pos,n._pannerAttr=i._pannerAttr,r.call(this),n._stereo?i.stereo(n._stereo):n._pos&&i.pos(n._pos[0],n._pos[1],n._pos[2],n._id)}}(Sound.prototype.init),Sound.prototype.reset=function(r){return function(){var n=this,i=n._parent;return n._orientation=i._orientation,n._stereo=i._stereo,n._pos=i._pos,n._pannerAttr=i._pannerAttr,n._stereo?i.stereo(n._stereo):n._pos?i.pos(n._pos[0],n._pos[1],n._pos[2],n._id):n._panner&&(n._panner.disconnect(0),n._panner=void 0,i._refreshBuffer(n)),r.call(this)}}(Sound.prototype.reset);var t=function(r,n){n=n||"spatial",n==="spatial"?(r._panner=Howler.ctx.createPanner(),r._panner.coneInnerAngle=r._pannerAttr.coneInnerAngle,r._panner.coneOuterAngle=r._pannerAttr.coneOuterAngle,r._panner.coneOuterGain=r._pannerAttr.coneOuterGain,r._panner.distanceModel=r._pannerAttr.distanceModel,r._panner.maxDistance=r._pannerAttr.maxDistance,r._panner.refDistance=r._pannerAttr.refDistance,r._panner.rolloffFactor=r._pannerAttr.rolloffFactor,r._panner.panningModel=r._pannerAttr.panningModel,typeof r._panner.positionX<"u"?(r._panner.positionX.setValueAtTime(r._pos[0],Howler.ctx.currentTime),r._panner.positionY.setValueAtTime(r._pos[1],Howler.ctx.currentTime),r._panner.positionZ.setValueAtTime(r._pos[2],Howler.ctx.currentTime)):r._panner.setPosition(r._pos[0],r._pos[1],r._pos[2]),typeof r._panner.orientationX<"u"?(r._panner.orientationX.setValueAtTime(r._orientation[0],Howler.ctx.currentTime),r._panner.orientationY.setValueAtTime(r._orientation[1],Howler.ctx.currentTime),r._panner.orientationZ.setValueAtTime(r._orientation[2],Howler.ctx.currentTime)):r._panner.setOrientation(r._orientation[0],r._orientation[1],r._orientation[2])):(r._panner=Howler.ctx.createStereoPanner(),r._panner.pan.setValueAtTime(r._stereo,Howler.ctx.currentTime)),r._panner.connect(r._node),r._paused||r._parent.pause(r._id,!0).play(r._id,!0)}}()}),rtt=ga((e,t)=>{function r(n){for(var i=new Array(n),o=0;o<n;++o)i[o]=o;return i}t.exports=r}),ntt=ga((e,t)=>{t.exports=function(i){return i!=null&&(r(i)||n(i)||!!i._isBuffer)};function r(i){return!!i.constructor&&typeof i.constructor.isBuffer=="function"&&i.constructor.isBuffer(i)}function n(i){return typeof i.readFloatLE=="function"&&typeof i.slice=="function"&&r(i.slice(0,0))}}),JS=ga((e,t)=>{var r=rtt(),n=ntt(),i=typeof Float64Array<"u";function o(c,h){return c[0]-h[0]}function a(){var c=this.stride,h=new Array(c.length),f;for(f=0;f<h.length;++f)h[f]=[Math.abs(c[f]),f];h.sort(o);var m=new Array(h.length);for(f=0;f<m.length;++f)m[f]=h[f][1];return m}function s(c,h){var f=["View",h,"d",c].join("");h<0&&(f="View_Nil"+c);var m=c==="generic";if(h===-1){var p="function "+f+"(a){this.data=a;};var proto="+f+".prototype;proto.dtype='"+c+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+f+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+f+"(a){return new "+f+"(a);}",A=new Function(p);return A()}else if(h===0){var p="function "+f+"(a,d) {this.data = a;this.offset = d};var proto="+f+".prototype;proto.dtype='"+c+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+f+"_copy() {return new "+f+"(this.data,this.offset)};proto.pick=function "+f+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+f+"_get(){return "+(m?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+f+"_set(v){return "+(m?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+f+"(a,b,c,d){return new "+f+"(a,d)}",A=new Function("TrivialArray",p);return A(u[c][0])}var p=["'use strict'"],g=r(h),v=g.map(function(M){return"i"+M}),b="this.offset+"+g.map(function(M){return"this.stride["+M+"]*i"+M}).join("+"),y=g.map(function(M){return"b"+M}).join(","),x=g.map(function(M){return"c"+M}).join(",");p.push("function "+f+"(a,"+y+","+x+",d){this.data=a","this.shape=["+y+"]","this.stride=["+x+"]","this.offset=d|0}","var proto="+f+".prototype","proto.dtype='"+c+"'","proto.dimension="+h),p.push("Object.defineProperty(proto,'size',{get:function "+f+"_size(){return "+g.map(function(M){return"this.shape["+M+"]"}).join("*"),"}})"),h===1?p.push("proto.order=[0]"):(p.push("Object.defineProperty(proto,'order',{get:"),h<4?(p.push("function "+f+"_order(){"),h===2?p.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):h===3&&p.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):p.push("ORDER})")),p.push("proto.set=function "+f+"_set("+v.join(",")+",v){"),m?p.push("return this.data.set("+b+",v)}"):p.push("return this.data["+b+"]=v}"),p.push("proto.get=function "+f+"_get("+v.join(",")+"){"),m?p.push("return this.data.get("+b+")}"):p.push("return this.data["+b+"]}"),p.push("proto.index=function "+f+"_index(",v.join(),"){return "+b+"}"),p.push("proto.hi=function "+f+"_hi("+v.join(",")+"){return new "+f+"(this.data,"+g.map(function(M){return["(typeof i",M,"!=='number'||i",M,"<0)?this.shape[",M,"]:i",M,"|0"].join("")}).join(",")+","+g.map(function(M){return"this.stride["+M+"]"}).join(",")+",this.offset)}");var S=g.map(function(M){return"a"+M+"=this.shape["+M+"]"}),w=g.map(function(M){return"c"+M+"=this.stride["+M+"]"});p.push("proto.lo=function "+f+"_lo("+v.join(",")+"){var b=this.offset,d=0,"+S.join(",")+","+w.join(","));for(var _=0;_<h;++_)p.push("if(typeof i"+_+"==='number'&&i"+_+">=0){d=i"+_+"|0;b+=c"+_+"*d;a"+_+"-=d}");p.push("return new "+f+"(this.data,"+g.map(function(M){return"a"+M}).join(",")+","+g.map(function(M){return"c"+M}).join(",")+",b)}"),p.push("proto.step=function "+f+"_step("+v.join(",")+"){var "+g.map(function(M){return"a"+M+"=this.shape["+M+"]"}).join(",")+","+g.map(function(M){return"b"+M+"=this.stride["+M+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var _=0;_<h;++_)p.push("if(typeof i"+_+"==='number'){d=i"+_+"|0;if(d<0){c+=b"+_+"*(a"+_+"-1);a"+_+"=ceil(-a"+_+"/d)}else{a"+_+"=ceil(a"+_+"/d)}b"+_+"*=d}");p.push("return new "+f+"(this.data,"+g.map(function(M){return"a"+M}).join(",")+","+g.map(function(M){return"b"+M}).join(",")+",c)}");for(var C=new Array(h),E=new Array(h),_=0;_<h;++_)C[_]="a[i"+_+"]",E[_]="b[i"+_+"]";p.push("proto.transpose=function "+f+"_transpose("+v+"){"+v.map(function(M,I){return M+"=("+M+"===undefined?"+I+":"+M+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+f+"(this.data,"+C.join(",")+","+E.join(",")+",this.offset)}"),p.push("proto.pick=function "+f+"_pick("+v+"){var a=[],b=[],c=this.offset");for(var _=0;_<h;++_)p.push("if(typeof i"+_+"==='number'&&i"+_+">=0){c=(c+this.stride["+_+"]*i"+_+")|0}else{a.push(this.shape["+_+"]);b.push(this.stride["+_+"])}");p.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),p.push("return function construct_"+f+"(data,shape,stride,offset){return new "+f+"(data,"+g.map(function(M){return"shape["+M+"]"}).join(",")+","+g.map(function(M){return"stride["+M+"]"}).join(",")+",offset)}");var A=new Function("CTOR_LIST","ORDER",p.join(`
`));return A(u[c],a)}function l(c){if(n(c))return"buffer";if(i)switch(Object.prototype.toString.call(c)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(c)?"array":"generic"}var u={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function d(c,h,f,m){if(c===void 0){var x=u.array[0];return x([])}else typeof c=="number"&&(c=[c]);h===void 0&&(h=[c.length]);var p=h.length;if(f===void 0){f=new Array(p);for(var g=p-1,v=1;g>=0;--g)f[g]=v,v*=h[g]}if(m===void 0){m=0;for(var g=0;g<p;++g)f[g]<0&&(m-=(h[g]-1)*f[g])}for(var b=l(c),y=u[b];y.length<=p+1;)y.push(s(b,y.length-1));var x=y[p+1];return x(c,h,f,m)}t.exports=d}),itt=ga((e,t)=>{function r(o,a){for(var s=1,l=o.length,u=o[0],d=o[0],c=1;c<l;++c)if(d=u,u=o[c],a(u,d)){if(c===s){s++;continue}o[s++]=u}return o.length=s,o}function n(o){for(var a=1,s=o.length,l=o[0],u=o[0],d=1;d<s;++d,u=l)if(u=l,l=o[d],l!==u){if(d===a){a++;continue}o[a++]=l}return o.length=a,o}function i(o,a,s){return o.length===0?o:a?(s||o.sort(a),r(o,a)):(s||o.sort(),n(o))}t.exports=i}),ott=ga((e,t)=>{var r=itt();function n(u,d,c){var h=u.length,f=d.arrayArgs.length,m=d.indexArgs.length>0,p=[],g=[],v=0,b=0,y,x;for(y=0;y<h;++y)g.push(["i",y,"=0"].join(""));for(x=0;x<f;++x)for(y=0;y<h;++y)b=v,v=u[y],y===0?g.push(["d",x,"s",y,"=t",x,"p",v].join("")):g.push(["d",x,"s",y,"=(t",x,"p",v,"-s",b,"*t",x,"p",b,")"].join(""));for(g.length>0&&p.push("var "+g.join(",")),y=h-1;y>=0;--y)v=u[y],p.push(["for(i",y,"=0;i",y,"<s",v,";++i",y,"){"].join(""));for(p.push(c),y=0;y<h;++y){for(b=v,v=u[y],x=0;x<f;++x)p.push(["p",x,"+=d",x,"s",y].join(""));m&&(y>0&&p.push(["index[",b,"]-=s",b].join("")),p.push(["++index[",v,"]"].join(""))),p.push("}")}return p.join(`
`)}function i(u,d,c,h){for(var f=d.length,m=c.arrayArgs.length,p=c.blockSize,g=c.indexArgs.length>0,v=[],b=0;b<m;++b)v.push(["var offset",b,"=p",b].join(""));for(var b=u;b<f;++b)v.push(["for(var j"+b+"=SS[",d[b],"]|0;j",b,">0;){"].join("")),v.push(["if(j",b,"<",p,"){"].join("")),v.push(["s",d[b],"=j",b].join("")),v.push(["j",b,"=0"].join("")),v.push(["}else{s",d[b],"=",p].join("")),v.push(["j",b,"-=",p,"}"].join("")),g&&v.push(["index[",d[b],"]=j",b].join(""));for(var b=0;b<m;++b){for(var y=["offset"+b],x=u;x<f;++x)y.push(["j",x,"*t",b,"p",d[x]].join(""));v.push(["p",b,"=(",y.join("+"),")"].join(""))}v.push(n(d,c,h));for(var b=u;b<f;++b)v.push("}");return v.join(`
`)}function o(u){for(var d=0,c=u[0].length;d<c;){for(var h=1;h<u.length;++h)if(u[h][d]!==u[0][d])return d;++d}return d}function a(u,d,c){for(var h=u.body,f=[],m=[],p=0;p<u.args.length;++p){var g=u.args[p];if(!(g.count<=0)){var v=new RegExp(g.name,"g"),b="",y=d.arrayArgs.indexOf(p);switch(d.argTypes[p]){case"offset":var x=d.offsetArgIndex.indexOf(p),S=d.offsetArgs[x];y=S.array,b="+q"+x;case"array":b="p"+y+b;var w="l"+p,_="a"+y;if(d.arrayBlockIndices[y]===0)g.count===1?c[y]==="generic"?g.lvalue?(f.push(["var ",w,"=",_,".get(",b,")"].join("")),h=h.replace(v,w),m.push([_,".set(",b,",",w,")"].join(""))):h=h.replace(v,[_,".get(",b,")"].join("")):h=h.replace(v,[_,"[",b,"]"].join("")):c[y]==="generic"?(f.push(["var ",w,"=",_,".get(",b,")"].join("")),h=h.replace(v,w),g.lvalue&&m.push([_,".set(",b,",",w,")"].join(""))):(f.push(["var ",w,"=",_,"[",b,"]"].join("")),h=h.replace(v,w),g.lvalue&&m.push([_,"[",b,"]=",w].join("")));else{for(var C=[g.name],E=[b],A=0;A<Math.abs(d.arrayBlockIndices[y]);A++)C.push("\\s*\\[([^\\]]+)\\]"),E.push("$"+(A+1)+"*t"+y+"b"+A);if(v=new RegExp(C.join(""),"g"),b=E.join("+"),c[y]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");h=h.replace(v,[_,"[",b,"]"].join(""))}break;case"scalar":h=h.replace(v,"Y"+d.scalarArgs.indexOf(p));break;case"index":h=h.replace(v,"index");break;case"shape":h=h.replace(v,"shape");break}}}return[f.join(`
`),h,m.join(`
`)].join(`
`).trim()}function s(u){for(var d=new Array(u.length),c=!0,h=0;h<u.length;++h){var f=u[h],m=f.match(/\d+/);m?m=m[0]:m="",f.charAt(0)===0?d[h]="u"+f.charAt(1)+m:d[h]=f.charAt(0)+m,h>0&&(c=c&&d[h]===d[h-1])}return c?d[0]:d.join("")}function l(u,d){for(var c=d[1].length-Math.abs(u.arrayBlockIndices[0])|0,h=new Array(u.arrayArgs.length),f=new Array(u.arrayArgs.length),m=0;m<u.arrayArgs.length;++m)f[m]=d[2*m],h[m]=d[2*m+1];for(var p=[],g=[],v=[],b=[],y=[],m=0;m<u.arrayArgs.length;++m){u.arrayBlockIndices[m]<0?(v.push(0),b.push(c),p.push(c),g.push(c+u.arrayBlockIndices[m])):(v.push(u.arrayBlockIndices[m]),b.push(u.arrayBlockIndices[m]+c),p.push(0),g.push(u.arrayBlockIndices[m]));for(var x=[],S=0;S<h[m].length;S++)v[m]<=h[m][S]&&h[m][S]<b[m]&&x.push(h[m][S]-v[m]);y.push(x)}for(var w=["SS"],_=["'use strict'"],C=[],S=0;S<c;++S)C.push(["s",S,"=SS[",S,"]"].join(""));for(var m=0;m<u.arrayArgs.length;++m){w.push("a"+m),w.push("t"+m),w.push("p"+m);for(var S=0;S<c;++S)C.push(["t",m,"p",S,"=t",m,"[",v[m]+S,"]"].join(""));for(var S=0;S<Math.abs(u.arrayBlockIndices[m]);++S)C.push(["t",m,"b",S,"=t",m,"[",p[m]+S,"]"].join(""))}for(var m=0;m<u.scalarArgs.length;++m)w.push("Y"+m);if(u.shapeArgs.length>0&&C.push("shape=SS.slice(0)"),u.indexArgs.length>0){for(var E=new Array(c),m=0;m<c;++m)E[m]="0";C.push(["index=[",E.join(","),"]"].join(""))}for(var m=0;m<u.offsetArgs.length;++m){for(var A=u.offsetArgs[m],M=[],S=0;S<A.offset.length;++S)A.offset[S]!==0&&(A.offset[S]===1?M.push(["t",A.array,"p",S].join("")):M.push([A.offset[S],"*t",A.array,"p",S].join("")));M.length===0?C.push("q"+m+"=0"):C.push(["q",m,"=",M.join("+")].join(""))}var I=r([].concat(u.pre.thisVars).concat(u.body.thisVars).concat(u.post.thisVars));C=C.concat(I),C.length>0&&_.push("var "+C.join(","));for(var m=0;m<u.arrayArgs.length;++m)_.push("p"+m+"|=0");u.pre.body.length>3&&_.push(a(u.pre,u,f));var O=a(u.body,u,f),T=o(y);T<c?_.push(i(T,y[0],u,O)):_.push(n(y[0],u,O)),u.post.body.length>3&&_.push(a(u.post,u,f)),u.debug&&console.log("-----Generated cwise routine for ",d,`:
`+_.join(`
`)+`
----------`);var D=[u.funcName||"unnamed","_cwise_loop_",h[0].join("s"),"m",T,s(f)].join(""),N=new Function(["function ",D,"(",w.join(","),"){",_.join(`
`),"} return ",D].join(""));return N()}t.exports=l}),att=ga((e,t)=>{var r=ott();function n(i){var o=["'use strict'","var CACHED={}"],a=[],s=i.funcName+"_cwise_thunk";o.push(["return function ",s,"(",i.shimArgs.join(","),"){"].join(""));for(var l=[],u=[],d=[["array",i.arrayArgs[0],".shape.slice(",Math.max(0,i.arrayBlockIndices[0]),i.arrayBlockIndices[0]<0?","+i.arrayBlockIndices[0]+")":")"].join("")],c=[],h=[],f=0;f<i.arrayArgs.length;++f){var m=i.arrayArgs[f];a.push(["t",m,"=array",m,".dtype,","r",m,"=array",m,".order"].join("")),l.push("t"+m),l.push("r"+m),u.push("t"+m),u.push("r"+m+".join()"),d.push("array"+m+".data"),d.push("array"+m+".stride"),d.push("array"+m+".offset|0"),f>0&&(c.push("array"+i.arrayArgs[0]+".shape.length===array"+m+".shape.length+"+(Math.abs(i.arrayBlockIndices[0])-Math.abs(i.arrayBlockIndices[f]))),h.push("array"+i.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,i.arrayBlockIndices[0])+"]===array"+m+".shape[shapeIndex+"+Math.max(0,i.arrayBlockIndices[f])+"]"))}i.arrayArgs.length>1&&(o.push("if (!("+c.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),o.push("for(var shapeIndex=array"+i.arrayArgs[0]+".shape.length-"+Math.abs(i.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),o.push("if (!("+h.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),o.push("}"));for(var f=0;f<i.scalarArgs.length;++f)d.push("scalar"+i.scalarArgs[f]);a.push(["type=[",u.join(","),"].join()"].join("")),a.push("proc=CACHED[type]"),o.push("var "+a.join(",")),o.push(["if(!proc){","CACHED[type]=proc=compile([",l.join(","),"])}","return proc(",d.join(","),")}"].join("")),i.debug&&console.log(`-----Generated thunk:
`+o.join(`
`)+`
----------`);var p=new Function("compile",o.join(`
`));return p(r.bind(void 0,i))}t.exports=n}),stt=ga((e,t)=>{var r=att();function n(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function i(o){var a=new n;a.pre=o.pre,a.body=o.body,a.post=o.post;var s=o.args.slice(0);a.argTypes=s;for(var l=0;l<s.length;++l){var u=s[l];if(u==="array"||typeof u=="object"&&u.blockIndices){if(a.argTypes[l]="array",a.arrayArgs.push(l),a.arrayBlockIndices.push(u.blockIndices?u.blockIndices:0),a.shimArgs.push("array"+l),l<a.pre.args.length&&a.pre.args[l].count>0)throw new Error("cwise: pre() block may not reference array args");if(l<a.post.args.length&&a.post.args[l].count>0)throw new Error("cwise: post() block may not reference array args")}else if(u==="scalar")a.scalarArgs.push(l),a.shimArgs.push("scalar"+l);else if(u==="index"){if(a.indexArgs.push(l),l<a.pre.args.length&&a.pre.args[l].count>0)throw new Error("cwise: pre() block may not reference array index");if(l<a.body.args.length&&a.body.args[l].lvalue)throw new Error("cwise: body() block may not write to array index");if(l<a.post.args.length&&a.post.args[l].count>0)throw new Error("cwise: post() block may not reference array index")}else if(u==="shape"){if(a.shapeArgs.push(l),l<a.pre.args.length&&a.pre.args[l].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(l<a.body.args.length&&a.body.args[l].lvalue)throw new Error("cwise: body() block may not write to array shape");if(l<a.post.args.length&&a.post.args[l].lvalue)throw new Error("cwise: post() block may not write to array shape")}else if(typeof u=="object"&&u.offset)a.argTypes[l]="offset",a.offsetArgs.push({array:u.array,offset:u.offset}),a.offsetArgIndex.push(l);else throw new Error("cwise: Unknown argument type "+s[l])}if(a.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(a.pre.args.length>s.length)throw new Error("cwise: Too many arguments in pre() block");if(a.body.args.length>s.length)throw new Error("cwise: Too many arguments in body() block");if(a.post.args.length>s.length)throw new Error("cwise: Too many arguments in post() block");return a.debug=!!o.printCode||!!o.debug,a.funcName=o.funcName||"cwise",a.blockSize=o.blockSize||64,r(a)}t.exports=i}),e_=ga(e=>{var t=stt(),r={body:"",args:[],thisVars:[],localVars:[]};function n(h){if(!h)return r;for(var f=0;f<h.args.length;++f){var m=h.args[f];f===0?h.args[f]={name:m,lvalue:!0,rvalue:!!h.rvalue,count:h.count||1}:h.args[f]={name:m,lvalue:!1,rvalue:!0,count:1}}return h.thisVars||(h.thisVars=[]),h.localVars||(h.localVars=[]),h}function i(h){return t({args:h.args,pre:n(h.pre),body:n(h.body),post:n(h.proc),funcName:h.funcName})}function o(h){for(var f=[],m=0;m<h.args.length;++m)f.push("a"+m);var p=new Function("P",["return function ",h.funcName,"_ndarrayops(",f.join(","),") {P(",f.join(","),");return a0}"].join(""));return p(i(h))}var a={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var h in a){var f=a[h];e[h]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+f+"c"},funcName:h}),e[h+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a"+f+"=b"},rvalue:!0,funcName:h+"eq"}),e[h+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+f+"s"},funcName:h+"s"}),e[h+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a"+f+"=s"},rvalue:!0,funcName:h+"seq"})}})();var s={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var h in s){var f=s[h];e[h]=o({args:["array","array"],body:{args:["a","b"],body:"a="+f+"b"},funcName:h}),e[h+"eq"]=o({args:["array"],body:{args:["a"],body:"a="+f+"a"},rvalue:!0,count:2,funcName:h+"eq"})}})();var l={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var h in l){var f=l[h];e[h]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+f+"c"},funcName:h}),e[h+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+f+"s"},funcName:h+"s"}),e[h+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a=a"+f+"b"},rvalue:!0,count:2,funcName:h+"eq"}),e[h+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+f+"s"},rvalue:!0,count:2,funcName:h+"seq"})}})();var u=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var h=0;h<u.length;++h){var f=u[h];e[f]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:f}),e[f+"eq"]=o({args:["array"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:f+"eq"})}})();var d=["max","min","atan2","pow"];(function(){for(var h=0;h<d.length;++h){var f=d[h];e[f]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:f}),e[f+"s"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:f+"s"}),e[f+"eq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:f+"eq"}),e[f+"seq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:f+"seq"})}})();var c=["atan2","pow"];(function(){for(var h=0;h<c.length;++h){var f=c[h];e[f+"op"]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:f+"op"}),e[f+"ops"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:f+"ops"}),e[f+"opeq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:f+"opeq"}),e[f+"opseq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:f+"opseq"})}})(),e.any=t({args:["array"],pre:r,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),e.all=t({args:["array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),e.sum=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),e.prod=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),e.norm2squared=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),e.norm2=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),e.norminf=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),e.norm1=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),e.sup=t({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),e.inf=t({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),e.argmin=t({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),e.argmax=t({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),e.random=o({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),e.assign=o({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),e.assigns=o({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),e.equals=t({args:["array","array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})}),ltt=ga((e,t)=>{t.exports=function(r,n){for(var i=r.split("."),o=n.split("."),a=0;a<3;a++){var s=Number(i[a]),l=Number(o[a]);if(s>l)return 1;if(l>s)return-1;if(!isNaN(s)&&isNaN(l))return 1;if(isNaN(s)&&!isNaN(l))return-1}return 0}}),ob="149",pl={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},utt=0,w9=1,ctt=2,I4=1,dtt=2,jx=3,Bu=0,Po=1,ms=2,Xi=0,Am=1,S9=2,_9=3,C9=4,htt=5,gv=100,ftt=101,ptt=102,A9=103,E9=104,mtt=200,gtt=201,vtt=202,ytt=203,oae=204,aae=205,btt=206,xtt=207,wtt=208,Stt=209,_tt=210,Ctt=0,Att=1,Ett=2,wN=3,Mtt=4,Ptt=5,Ttt=6,Ott=7,sae=0,Itt=1,Dtt=2,Qd=0,Rtt=1,ktt=2,Ltt=3,Ntt=4,ztt=5,lae=300,qm=301,Km=302,SN=303,_N=304,t_=306,Wd=1e3,Ti=1001,CN=1002,Pn=1003,M9=1004,yD=1005,yr=1006,Btt=1007,y0=1008,pa=1009,Ftt=1010,jtt=1011,uae=1012,Utt=1013,qd=1014,Ba=1015,Xm=1016,$tt=1017,Vtt=1018,Em=1020,Htt=1021,qs=1023,Gtt=1024,Wtt=1025,Mm=1026,Ym=1027,qtt=1028,Ktt=1029,ZM=1030,Xtt=1031,cae=1033,bD=33776,xD=33777,wD=33778,SD=33779,P9=35840,T9=35841,O9=35842,I9=35843,Ytt=36196,D9=37492,R9=37496,k9=37808,L9=37809,N9=37810,z9=37811,B9=37812,F9=37813,j9=37814,U9=37815,$9=37816,V9=37817,H9=37818,G9=37819,W9=37820,q9=37821,_D=36492,Qtt=36283,K9=36284,X9=36285,Y9=36286,dae=2200,hae=2201,D4=2202,JM=2300,eP=2301,CD=2302,zv=2400,Bv=2401,tP=2402,R4=2500,Ztt=2501,Zc=3e3,ir=3001,_h=3200,fae=3201,Jtt=0,ert=1,fc="srgb",rP="srgb-linear",AD=7680,trt=519,AN=35044,rrt=35048,Q9="300 es",EN=1035,qo=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;let r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;let r=this._listeners[e];if(r!==void 0){let n=r.indexOf(t);n!==-1&&r.splice(n,1)}}dispatchEvent(e){if(this._listeners===void 0)return;let t=this._listeners[e.type];if(t!==void 0){e.target=this;let r=t.slice(0);for(let n=0,i=r.length;n<i;n++)r[n].call(this,e);e.target=null}}},Qo=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Z9=1234567,x1=Math.PI/180,Xw=180/Math.PI;function $l(){let e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Qo[e&255]+Qo[e>>8&255]+Qo[e>>16&255]+Qo[e>>24&255]+"-"+Qo[t&255]+Qo[t>>8&255]+"-"+Qo[t>>16&15|64]+Qo[t>>24&255]+"-"+Qo[r&63|128]+Qo[r>>8&255]+"-"+Qo[r>>16&255]+Qo[r>>24&255]+Qo[n&255]+Qo[n>>8&255]+Qo[n>>16&255]+Qo[n>>24&255]).toLowerCase()}function Vi(e,t,r){return Math.max(t,Math.min(r,e))}function k4(e,t){return(e%t+t)%t}function nrt(e,t,r,n,i){return n+(e-t)*(i-n)/(r-t)}function irt(e,t,r){return e!==t?(r-e)/(t-e):0}function w1(e,t,r){return(1-r)*e+r*t}function ort(e,t,r,n){return w1(e,t,1-Math.exp(-r*n))}function art(e,t=1){return t-Math.abs(k4(e,t*2)-t)}function srt(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t),e*e*(3-2*e))}function lrt(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t),e*e*e*(e*(e*6-15)+10))}function urt(e,t){return e+Math.floor(Math.random()*(t-e+1))}function crt(e,t){return e+Math.random()*(t-e)}function drt(e){return e*(.5-Math.random())}function hrt(e){e!==void 0&&(Z9=e);let t=Z9+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function frt(e){return e*x1}function prt(e){return e*Xw}function MN(e){return(e&e-1)===0&&e!==0}function pae(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function nP(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function mrt(e,t,r,n,i){let o=Math.cos,a=Math.sin,s=o(r/2),l=a(r/2),u=o((t+n)/2),d=a((t+n)/2),c=o((t-n)/2),h=a((t-n)/2),f=o((n-t)/2),m=a((n-t)/2);switch(i){case"XYX":e.set(s*d,l*c,l*h,s*u);break;case"YZY":e.set(l*h,s*d,l*c,s*u);break;case"ZXZ":e.set(l*c,l*h,s*d,s*u);break;case"XZX":e.set(s*d,l*m,l*f,s*u);break;case"YXY":e.set(l*f,s*d,l*m,s*u);break;case"ZYZ":e.set(l*m,l*f,s*d,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Kd(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function Mn(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(e*65535);case Uint8Array:return Math.round(e*255);case Int16Array:return Math.round(e*32767);case Int8Array:return Math.round(e*127);default:throw new Error("Invalid component type.")}}var Et=Object.freeze({__proto__:null,DEG2RAD:x1,RAD2DEG:Xw,ceilPowerOfTwo:pae,clamp:Vi,damp:ort,degToRad:frt,denormalize:Kd,euclideanModulo:k4,floorPowerOfTwo:nP,generateUUID:$l,inverseLerp:irt,isPowerOfTwo:MN,lerp:w1,mapLinear:nrt,normalize:Mn,pingpong:art,radToDeg:prt,randFloat:crt,randFloatSpread:drt,randInt:urt,seededRandom:hrt,setQuaternionFromProperEuler:mrt,smootherstep:lrt,smoothstep:srt}),ue=class{constructor(e=0,t=0){ue.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,r=this.y,n=e.elements;return this.x=n[0]*t+n[3]*r+n[6],this.y=n[1]*t+n[4]*r+n[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let r=Math.cos(t),n=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*r-o*n+e.x,this.y=i*n+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Ii=class{constructor(){Ii.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,r,n,i,o,a,s,l){let u=this.elements;return u[0]=e,u[1]=n,u[2]=a,u[3]=t,u[4]=i,u[5]=s,u[6]=r,u[7]=o,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let r=e.elements,n=t.elements,i=this.elements,o=r[0],a=r[3],s=r[6],l=r[1],u=r[4],d=r[7],c=r[2],h=r[5],f=r[8],m=n[0],p=n[3],g=n[6],v=n[1],b=n[4],y=n[7],x=n[2],S=n[5],w=n[8];return i[0]=o*m+a*v+s*x,i[3]=o*p+a*b+s*S,i[6]=o*g+a*y+s*w,i[1]=l*m+u*v+d*x,i[4]=l*p+u*b+d*S,i[7]=l*g+u*y+d*w,i[2]=c*m+h*v+f*x,i[5]=c*p+h*b+f*S,i[8]=c*g+h*y+f*w,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8];return t*o*u-t*a*l-r*i*u+r*a*s+n*i*l-n*o*s}invert(){let e=this.elements,t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],d=u*o-a*l,c=a*s-u*i,h=l*i-o*s,f=t*d+r*c+n*h;if(f===0)return this.set(0,0,0,0,0,0,0,0,0);let m=1/f;return e[0]=d*m,e[1]=(n*l-u*r)*m,e[2]=(a*r-n*o)*m,e[3]=c*m,e[4]=(u*t-n*s)*m,e[5]=(n*i-a*t)*m,e[6]=h*m,e[7]=(r*s-l*t)*m,e[8]=(o*t-r*i)*m,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,n,i,o,a){let s=Math.cos(i),l=Math.sin(i);return this.set(r*s,r*l,-r*(s*o+l*a)+o+e,-n*l,n*s,-n*(-l*o+s*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(ED.makeScale(e,t)),this}rotate(e){return this.premultiply(ED.makeRotation(-e)),this}translate(e,t){return this.premultiply(ED.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,r=e.elements;for(let n=0;n<9;n++)if(t[n]!==r[n])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){let r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}},ED=new Ii;function mae(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}var grt={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function oC(e,t){return new grt[e](t)}function iP(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function Pm(e){return e<.04045?e*.0773993808:Math.pow(e*.9478672986+.0521327014,2.4)}function qA(e){return e<.0031308?e*12.92:1.055*Math.pow(e,.41666)-.055}var MD={[fc]:{[rP]:Pm},[rP]:{[fc]:qA}},wa={legacyMode:!0,get workingColorSpace(){return rP},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,r){if(this.legacyMode||t===r||!t||!r)return e;if(MD[t]&&MD[t][r]!==void 0){let n=MD[t][r];return e.r=n(e.r),e.g=n(e.g),e.b=n(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},gae={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ro={r:0,g:0,b:0},ru={h:0,s:0,l:0},aC={h:0,s:0,l:0};function PD(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*6*(2/3-r):e}function sC(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}var Bt=class{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&r===void 0?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=fc){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,wa.toWorkingColorSpace(this,t),this}setRGB(e,t,r,n=wa.workingColorSpace){return this.r=e,this.g=t,this.b=r,wa.toWorkingColorSpace(this,n),this}setHSL(e,t,r,n=wa.workingColorSpace){if(e=k4(e,1),t=Vi(t,0,1),r=Vi(r,0,1),t===0)this.r=this.g=this.b=r;else{let i=r<=.5?r*(1+t):r+t-r*t,o=2*r-i;this.r=PD(o,i,e+1/3),this.g=PD(o,i,e),this.b=PD(o,i,e-1/3)}return wa.toWorkingColorSpace(this,n),this}setStyle(e,t=fc){function r(i){i!==void 0&&parseFloat(i)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let i,o=n[1],a=n[2];switch(o){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,wa.toWorkingColorSpace(this,t),r(i[4]),this;if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,wa.toWorkingColorSpace(this,t),r(i[4]),this;break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){let s=parseFloat(i[1])/360,l=parseFloat(i[2])/100,u=parseFloat(i[3])/100;return r(i[4]),this.setHSL(s,l,u,t)}break}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){let i=n[1],o=i.length;if(o===3)return this.r=parseInt(i.charAt(0)+i.charAt(0),16)/255,this.g=parseInt(i.charAt(1)+i.charAt(1),16)/255,this.b=parseInt(i.charAt(2)+i.charAt(2),16)/255,wa.toWorkingColorSpace(this,t),this;if(o===6)return this.r=parseInt(i.charAt(0)+i.charAt(1),16)/255,this.g=parseInt(i.charAt(2)+i.charAt(3),16)/255,this.b=parseInt(i.charAt(4)+i.charAt(5),16)/255,wa.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=fc){let r=gae[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Pm(e.r),this.g=Pm(e.g),this.b=Pm(e.b),this}copyLinearToSRGB(e){return this.r=qA(e.r),this.g=qA(e.g),this.b=qA(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=fc){return wa.fromWorkingColorSpace(sC(this,ro),e),Vi(ro.r*255,0,255)<<16^Vi(ro.g*255,0,255)<<8^Vi(ro.b*255,0,255)<<0}getHexString(e=fc){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=wa.workingColorSpace){wa.fromWorkingColorSpace(sC(this,ro),t);let r=ro.r,n=ro.g,i=ro.b,o=Math.max(r,n,i),a=Math.min(r,n,i),s,l,u=(a+o)/2;if(a===o)s=0,l=0;else{let d=o-a;switch(l=u<=.5?d/(o+a):d/(2-o-a),o){case r:s=(n-i)/d+(n<i?6:0);break;case n:s=(i-r)/d+2;break;case i:s=(r-n)/d+4;break}s/=6}return e.h=s,e.s=l,e.l=u,e}getRGB(e,t=wa.workingColorSpace){return wa.fromWorkingColorSpace(sC(this,ro),t),e.r=ro.r,e.g=ro.g,e.b=ro.b,e}getStyle(e=fc){return wa.fromWorkingColorSpace(sC(this,ro),e),e!==fc?`color(${e} ${ro.r} ${ro.g} ${ro.b})`:`rgb(${ro.r*255|0},${ro.g*255|0},${ro.b*255|0})`}offsetHSL(e,t,r){return this.getHSL(ru),ru.h+=e,ru.s+=t,ru.l+=r,this.setHSL(ru.h,ru.s,ru.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(ru),e.getHSL(aC);let r=w1(ru.h,aC.h,t),n=w1(ru.s,aC.s,t),i=w1(ru.l,aC.l,t);return this.setHSL(r,n,i),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};Bt.NAMES=gae;var Rg,vae=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Rg===void 0&&(Rg=iP("canvas")),Rg.width=e.width,Rg.height=e.height;let r=Rg.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Rg}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=iP("canvas");t.width=e.width,t.height=e.height;let r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);let n=r.getImageData(0,0,e.width,e.height),i=n.data;for(let o=0;o<i.length;o++)i[o]=Pm(i[o]/255)*255;return r.putImageData(n,0,0),t}else if(e.data){let t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Pm(t[r]/255)*255):t[r]=Pm(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},yae=class{constructor(e=null){this.isSource=!0,this.uuid=$l(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let r={uuid:this.uuid,url:""},n=this.data;if(n!==null){let i;if(Array.isArray(n)){i=[];for(let o=0,a=n.length;o<a;o++)n[o].isDataTexture?i.push(TD(n[o].image)):i.push(TD(n[o]))}else i=TD(n);r.url=i}return t||(e.images[this.uuid]=r),r}};function TD(e){return typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?vae.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var vrt=0,co=class extends qo{constructor(e=co.DEFAULT_IMAGE,t=co.DEFAULT_MAPPING,r=Ti,n=Ti,i=yr,o=y0,a=qs,s=pa,l=co.DEFAULT_ANISOTROPY,u=Zc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:vrt++}),this.uuid=$l(),this.name="",this.source=new yae(e),this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=n,this.magFilter=i,this.minFilter=o,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=s,this.offset=new ue(0,0),this.repeat=new ue(1,1),this.center=new ue(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ii,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];let r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==lae)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Wd:e.x=e.x-Math.floor(e.x);break;case Ti:e.x=e.x<0?0:1;break;case CN:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Wd:e.y=e.y-Math.floor(e.y);break;case Ti:e.y=e.y<0?0:1;break;case CN:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}};co.DEFAULT_IMAGE=null;co.DEFAULT_MAPPING=lae;co.DEFAULT_ANISOTROPY=1;var or=class{constructor(e=0,t=0,r=0,n=1){or.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=n}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,n){return this.x=e,this.y=t,this.z=r,this.w=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,r=this.y,n=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*n+o[12]*i,this.y=o[1]*t+o[5]*r+o[9]*n+o[13]*i,this.z=o[2]*t+o[6]*r+o[10]*n+o[14]*i,this.w=o[3]*t+o[7]*r+o[11]*n+o[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,n,i,o=e.elements,a=o[0],s=o[4],l=o[8],u=o[1],d=o[5],c=o[9],h=o[2],f=o[6],m=o[10];if(Math.abs(s-u)<.01&&Math.abs(l-h)<.01&&Math.abs(c-f)<.01){if(Math.abs(s+u)<.1&&Math.abs(l+h)<.1&&Math.abs(c+f)<.1&&Math.abs(a+d+m-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let g=(a+1)/2,v=(d+1)/2,b=(m+1)/2,y=(s+u)/4,x=(l+h)/4,S=(c+f)/4;return g>v&&g>b?g<.01?(r=0,n=.707106781,i=.707106781):(r=Math.sqrt(g),n=y/r,i=x/r):v>b?v<.01?(r=.707106781,n=0,i=.707106781):(n=Math.sqrt(v),r=y/n,i=S/n):b<.01?(r=.707106781,n=.707106781,i=0):(i=Math.sqrt(b),r=x/i,n=S/i),this.set(r,n,i,t),this}let p=Math.sqrt((f-c)*(f-c)+(l-h)*(l-h)+(u-s)*(u-s));return Math.abs(p)<.001&&(p=1),this.x=(f-c)/p,this.y=(l-h)/p,this.z=(u-s)/p,this.w=Math.acos((a+d+m-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},cn=class extends qo{constructor(e=1,t=1,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new or(0,0,e,t),this.scissorTest=!1,this.viewport=new or(0,0,e,t);let n={width:e,height:t,depth:1};this.texture=new co(n,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:yr,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;let t=Object.assign({},e.texture.image);return this.texture.source=new yae(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},bae=class extends co{constructor(e=null,t=1,r=1,n=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:n},this.magFilter=Pn,this.minFilter=Pn,this.wrapR=Ti,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},yrt=class extends co{constructor(e=null,t=1,r=1,n=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:n},this.magFilter=Pn,this.minFilter=Pn,this.wrapR=Ti,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},brt=class extends cn{constructor(e=1,t=1,r=1,n={}){super(e,t,n),this.isWebGLMultipleRenderTargets=!0;let i=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=i.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let n=0,i=this.texture.length;n<i;n++)this.texture[n].image.width=e,this.texture[n].image.height=t,this.texture[n].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}},Jt=class{constructor(e=0,t=0,r=0,n=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=n}static slerpFlat(e,t,r,n,i,o,a){let s=r[n+0],l=r[n+1],u=r[n+2],d=r[n+3],c=i[o+0],h=i[o+1],f=i[o+2],m=i[o+3];if(a===0){e[t+0]=s,e[t+1]=l,e[t+2]=u,e[t+3]=d;return}if(a===1){e[t+0]=c,e[t+1]=h,e[t+2]=f,e[t+3]=m;return}if(d!==m||s!==c||l!==h||u!==f){let p=1-a,g=s*c+l*h+u*f+d*m,v=g>=0?1:-1,b=1-g*g;if(b>Number.EPSILON){let x=Math.sqrt(b),S=Math.atan2(x,g*v);p=Math.sin(p*S)/x,a=Math.sin(a*S)/x}let y=a*v;if(s=s*p+c*y,l=l*p+h*y,u=u*p+f*y,d=d*p+m*y,p===1-a){let x=1/Math.sqrt(s*s+l*l+u*u+d*d);s*=x,l*=x,u*=x,d*=x}}e[t]=s,e[t+1]=l,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,r,n,i,o){let a=r[n],s=r[n+1],l=r[n+2],u=r[n+3],d=i[o],c=i[o+1],h=i[o+2],f=i[o+3];return e[t]=a*f+u*d+s*h-l*c,e[t+1]=s*f+u*c+l*d-a*h,e[t+2]=l*f+u*h+a*c-s*d,e[t+3]=u*f-a*d-s*c-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,n){return this._x=e,this._y=t,this._z=r,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){let r=e._x,n=e._y,i=e._z,o=e._order,a=Math.cos,s=Math.sin,l=a(r/2),u=a(n/2),d=a(i/2),c=s(r/2),h=s(n/2),f=s(i/2);switch(o){case"XYZ":this._x=c*u*d+l*h*f,this._y=l*h*d-c*u*f,this._z=l*u*f+c*h*d,this._w=l*u*d-c*h*f;break;case"YXZ":this._x=c*u*d+l*h*f,this._y=l*h*d-c*u*f,this._z=l*u*f-c*h*d,this._w=l*u*d+c*h*f;break;case"ZXY":this._x=c*u*d-l*h*f,this._y=l*h*d+c*u*f,this._z=l*u*f+c*h*d,this._w=l*u*d-c*h*f;break;case"ZYX":this._x=c*u*d-l*h*f,this._y=l*h*d+c*u*f,this._z=l*u*f-c*h*d,this._w=l*u*d+c*h*f;break;case"YZX":this._x=c*u*d+l*h*f,this._y=l*h*d+c*u*f,this._z=l*u*f-c*h*d,this._w=l*u*d-c*h*f;break;case"XZY":this._x=c*u*d-l*h*f,this._y=l*h*d-c*u*f,this._z=l*u*f+c*h*d,this._w=l*u*d+c*h*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let r=t/2,n=Math.sin(r);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,r=t[0],n=t[4],i=t[8],o=t[1],a=t[5],s=t[9],l=t[2],u=t[6],d=t[10],c=r+a+d;if(c>0){let h=.5/Math.sqrt(c+1);this._w=.25/h,this._x=(u-s)*h,this._y=(i-l)*h,this._z=(o-n)*h}else if(r>a&&r>d){let h=2*Math.sqrt(1+r-a-d);this._w=(u-s)/h,this._x=.25*h,this._y=(n+o)/h,this._z=(i+l)/h}else if(a>d){let h=2*Math.sqrt(1+a-r-d);this._w=(i-l)/h,this._x=(n+o)/h,this._y=.25*h,this._z=(s+u)/h}else{let h=2*Math.sqrt(1+d-r-a);this._w=(o-n)/h,this._x=(i+l)/h,this._y=(s+u)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Vi(this.dot(e),-1,1)))}rotateTowards(e,t){let r=this.angleTo(e);if(r===0)return this;let n=Math.min(1,t/r);return this.slerp(e,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let r=e._x,n=e._y,i=e._z,o=e._w,a=t._x,s=t._y,l=t._z,u=t._w;return this._x=r*u+o*a+n*l-i*s,this._y=n*u+o*s+i*a-r*l,this._z=i*u+o*l+r*s-n*a,this._w=o*u-r*a-n*s-i*l,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);let r=this._x,n=this._y,i=this._z,o=this._w,a=o*e._w+r*e._x+n*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=n,this._z=i,this;let s=1-a*a;if(s<=Number.EPSILON){let h=1-t;return this._w=h*o+t*this._w,this._x=h*r+t*this._x,this._y=h*n+t*this._y,this._z=h*i+t*this._z,this.normalize(),this._onChangeCallback(),this}let l=Math.sqrt(s),u=Math.atan2(l,a),d=Math.sin((1-t)*u)/l,c=Math.sin(t*u)/l;return this._w=o*d+this._w*c,this._x=r*d+this._x*c,this._y=n*d+this._y*c,this._z=i*d+this._z*c,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){let e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),n=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(n),r*Math.sin(i),r*Math.cos(i),t*Math.sin(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},F=class{constructor(e=0,t=0,r=0){F.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(J9.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(J9.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,r=this.y,n=this.z,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6]*n,this.y=i[1]*t+i[4]*r+i[7]*n,this.z=i[2]*t+i[5]*r+i[8]*n,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,r=this.y,n=this.z,i=e.elements,o=1/(i[3]*t+i[7]*r+i[11]*n+i[15]);return this.x=(i[0]*t+i[4]*r+i[8]*n+i[12])*o,this.y=(i[1]*t+i[5]*r+i[9]*n+i[13])*o,this.z=(i[2]*t+i[6]*r+i[10]*n+i[14])*o,this}applyQuaternion(e){let t=this.x,r=this.y,n=this.z,i=e.x,o=e.y,a=e.z,s=e.w,l=s*t+o*n-a*r,u=s*r+a*t-i*n,d=s*n+i*r-o*t,c=-i*t-o*r-a*n;return this.x=l*s+c*-i+u*-a-d*-o,this.y=u*s+c*-o+d*-i-l*-a,this.z=d*s+c*-a+l*-o-u*-i,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,r=this.y,n=this.z,i=e.elements;return this.x=i[0]*t+i[4]*r+i[8]*n,this.y=i[1]*t+i[5]*r+i[9]*n,this.z=i[2]*t+i[6]*r+i[10]*n,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let r=e.x,n=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=n*s-i*a,this.y=i*o-r*s,this.z=r*a-n*o,this}projectOnVector(e){let t=e.lengthSq();if(t===0)return this.set(0,0,0);let r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return OD.copy(this).projectOnVector(e),this.sub(OD)}reflect(e){return this.sub(OD.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let r=this.dot(e)/t;return Math.acos(Vi(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,r=this.y-e.y,n=this.z-e.z;return t*t+r*r+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){let n=Math.sin(t)*e;return this.x=n*Math.sin(r),this.y=Math.cos(t)*e,this.z=n*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=n,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},OD=new F,J9=new Jt,ki=class{constructor(e=new F(1/0,1/0,1/0),t=new F(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,n=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,l=e.length;s<l;s+=3){let u=e[s],d=e[s+1],c=e[s+2];u<t&&(t=u),d<r&&(r=d),c<n&&(n=c),u>i&&(i=u),d>o&&(o=d),c>a&&(a=c)}return this.min.set(t,r,n),this.max.set(i,o,a),this}setFromBufferAttribute(e){let t=1/0,r=1/0,n=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,l=e.count;s<l;s++){let u=e.getX(s),d=e.getY(s),c=e.getZ(s);u<t&&(t=u),d<r&&(r=d),c<n&&(n=c),u>i&&(i=u),d>o&&(o=d),c>a&&(a=c)}return this.min.set(t,r,n),this.max.set(i,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let r=Cp.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let r=e.geometry;if(r!==void 0)if(t&&r.attributes!=null&&r.attributes.position!==void 0){let i=r.attributes.position;for(let o=0,a=i.count;o<a;o++)Cp.fromBufferAttribute(i,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Cp)}else r.boundingBox===null&&r.computeBoundingBox(),ID.copy(r.boundingBox),ID.applyMatrix4(e.matrixWorld),this.union(ID);let n=e.children;for(let i=0,o=n.length;i<o;i++)this.expandByObject(n[i],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Cp),Cp.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Qb),lC.subVectors(this.max,Qb),kg.subVectors(e.a,Qb),Lg.subVectors(e.b,Qb),Ng.subVectors(e.c,Qb),Th.subVectors(Lg,kg),Oh.subVectors(Ng,Lg),Ap.subVectors(kg,Ng);let t=[0,-Th.z,Th.y,0,-Oh.z,Oh.y,0,-Ap.z,Ap.y,Th.z,0,-Th.x,Oh.z,0,-Oh.x,Ap.z,0,-Ap.x,-Th.y,Th.x,0,-Oh.y,Oh.x,0,-Ap.y,Ap.x,0];return!DD(t,kg,Lg,Ng,lC)||(t=[1,0,0,0,1,0,0,0,1],!DD(t,kg,Lg,Ng,lC))?!1:(uC.crossVectors(Th,Oh),t=[uC.x,uC.y,uC.z],DD(t,kg,Lg,Ng,lC))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Cp.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Cp).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(dd[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),dd[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),dd[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),dd[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),dd[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),dd[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),dd[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),dd[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(dd),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},dd=[new F,new F,new F,new F,new F,new F,new F,new F],Cp=new F,ID=new ki,kg=new F,Lg=new F,Ng=new F,Th=new F,Oh=new F,Ap=new F,Qb=new F,lC=new F,uC=new F,Ep=new F;function DD(e,t,r,n,i){for(let o=0,a=e.length-3;o<=a;o+=3){Ep.fromArray(e,o);let s=i.x*Math.abs(Ep.x)+i.y*Math.abs(Ep.y)+i.z*Math.abs(Ep.z),l=t.dot(Ep),u=r.dot(Ep),d=n.dot(Ep);if(Math.max(-Math.max(l,u,d),Math.min(l,u,d))>s)return!1}return!0}var xrt=new ki,Zb=new F,RD=new F,Ps=class{constructor(e=new F,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let r=this.center;t!==void 0?r.copy(t):xrt.setFromPoints(e).getCenter(r);let n=0;for(let i=0,o=e.length;i<o;i++)n=Math.max(n,r.distanceToSquared(e[i]));return this.radius=Math.sqrt(n),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Zb.subVectors(e,this.center);let t=Zb.lengthSq();if(t>this.radius*this.radius){let r=Math.sqrt(t),n=(r-this.radius)*.5;this.center.addScaledVector(Zb,n/r),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(RD.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Zb.copy(e.center).add(RD)),this.expandByPoint(Zb.copy(e.center).sub(RD))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},hd=new F,kD=new F,cC=new F,Ih=new F,LD=new F,dC=new F,ND=new F,ab=class{constructor(e=new F,t=new F(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,hd)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=hd.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(hd.copy(this.direction).multiplyScalar(t).add(this.origin),hd.distanceToSquared(e))}distanceSqToSegment(e,t,r,n){kD.copy(e).add(t).multiplyScalar(.5),cC.copy(t).sub(e).normalize(),Ih.copy(this.origin).sub(kD);let i=e.distanceTo(t)*.5,o=-this.direction.dot(cC),a=Ih.dot(this.direction),s=-Ih.dot(cC),l=Ih.lengthSq(),u=Math.abs(1-o*o),d,c,h,f;if(u>0)if(d=o*s-a,c=o*a-s,f=i*u,d>=0)if(c>=-f)if(c<=f){let m=1/u;d*=m,c*=m,h=d*(d+o*c+2*a)+c*(o*d+c+2*s)+l}else c=i,d=Math.max(0,-(o*c+a)),h=-d*d+c*(c+2*s)+l;else c=-i,d=Math.max(0,-(o*c+a)),h=-d*d+c*(c+2*s)+l;else c<=-f?(d=Math.max(0,-(-o*i+a)),c=d>0?-i:Math.min(Math.max(-i,-s),i),h=-d*d+c*(c+2*s)+l):c<=f?(d=0,c=Math.min(Math.max(-i,-s),i),h=c*(c+2*s)+l):(d=Math.max(0,-(o*i+a)),c=d>0?i:Math.min(Math.max(-i,-s),i),h=-d*d+c*(c+2*s)+l);else c=o>0?-i:i,d=Math.max(0,-(o*c+a)),h=-d*d+c*(c+2*s)+l;return r&&r.copy(this.direction).multiplyScalar(d).add(this.origin),n&&n.copy(cC).multiplyScalar(c).add(kD),h}intersectSphere(e,t){hd.subVectors(e.center,this.origin);let r=hd.dot(this.direction),n=hd.dot(hd)-r*r,i=e.radius*e.radius;if(n>i)return null;let o=Math.sqrt(i-n),a=r-o,s=r+o;return a<0&&s<0?null:a<0?this.at(s,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){let r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,n,i,o,a,s,l=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,c=this.origin;return l>=0?(r=(e.min.x-c.x)*l,n=(e.max.x-c.x)*l):(r=(e.max.x-c.x)*l,n=(e.min.x-c.x)*l),u>=0?(i=(e.min.y-c.y)*u,o=(e.max.y-c.y)*u):(i=(e.max.y-c.y)*u,o=(e.min.y-c.y)*u),r>o||i>n||((i>r||isNaN(r))&&(r=i),(o<n||isNaN(n))&&(n=o),d>=0?(a=(e.min.z-c.z)*d,s=(e.max.z-c.z)*d):(a=(e.max.z-c.z)*d,s=(e.min.z-c.z)*d),r>s||a>n)||((a>r||r!==r)&&(r=a),(s<n||n!==n)&&(n=s),n<0)?null:this.at(r>=0?r:n,t)}intersectsBox(e){return this.intersectBox(e,hd)!==null}intersectTriangle(e,t,r,n,i){LD.subVectors(t,e),dC.subVectors(r,e),ND.crossVectors(LD,dC);let o=this.direction.dot(ND),a;if(o>0){if(n)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Ih.subVectors(this.origin,e);let s=a*this.direction.dot(dC.crossVectors(Ih,dC));if(s<0)return null;let l=a*this.direction.dot(LD.cross(Ih));if(l<0||s+l>o)return null;let u=-a*Ih.dot(ND);return u<0?null:this.at(u/o,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},qe=class{constructor(){qe.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,r,n,i,o,a,s,l,u,d,c,h,f,m,p){let g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=n,g[1]=i,g[5]=o,g[9]=a,g[13]=s,g[2]=l,g[6]=u,g[10]=d,g[14]=c,g[3]=h,g[7]=f,g[11]=m,g[15]=p,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new qe().fromArray(this.elements)}copy(e){let t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){let t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,r=e.elements,n=1/zg.setFromMatrixColumn(e,0).length(),i=1/zg.setFromMatrixColumn(e,1).length(),o=1/zg.setFromMatrixColumn(e,2).length();return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=0,t[4]=r[4]*i,t[5]=r[5]*i,t[6]=r[6]*i,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,r=e.x,n=e.y,i=e.z,o=Math.cos(r),a=Math.sin(r),s=Math.cos(n),l=Math.sin(n),u=Math.cos(i),d=Math.sin(i);if(e.order==="XYZ"){let c=o*u,h=o*d,f=a*u,m=a*d;t[0]=s*u,t[4]=-s*d,t[8]=l,t[1]=h+f*l,t[5]=c-m*l,t[9]=-a*s,t[2]=m-c*l,t[6]=f+h*l,t[10]=o*s}else if(e.order==="YXZ"){let c=s*u,h=s*d,f=l*u,m=l*d;t[0]=c+m*a,t[4]=f*a-h,t[8]=o*l,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=h*a-f,t[6]=m+c*a,t[10]=o*s}else if(e.order==="ZXY"){let c=s*u,h=s*d,f=l*u,m=l*d;t[0]=c-m*a,t[4]=-o*d,t[8]=f+h*a,t[1]=h+f*a,t[5]=o*u,t[9]=m-c*a,t[2]=-o*l,t[6]=a,t[10]=o*s}else if(e.order==="ZYX"){let c=o*u,h=o*d,f=a*u,m=a*d;t[0]=s*u,t[4]=f*l-h,t[8]=c*l+m,t[1]=s*d,t[5]=m*l+c,t[9]=h*l-f,t[2]=-l,t[6]=a*s,t[10]=o*s}else if(e.order==="YZX"){let c=o*s,h=o*l,f=a*s,m=a*l;t[0]=s*u,t[4]=m-c*d,t[8]=f*d+h,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-l*u,t[6]=h*d+f,t[10]=c-m*d}else if(e.order==="XZY"){let c=o*s,h=o*l,f=a*s,m=a*l;t[0]=s*u,t[4]=-d,t[8]=l*u,t[1]=c*d+m,t[5]=o*u,t[9]=h*d-f,t[2]=f*d-h,t[6]=a*u,t[10]=m*d+c}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(wrt,e,Srt)}lookAt(e,t,r){let n=this.elements;return Rs.subVectors(e,t),Rs.lengthSq()===0&&(Rs.z=1),Rs.normalize(),Dh.crossVectors(r,Rs),Dh.lengthSq()===0&&(Math.abs(r.z)===1?Rs.x+=1e-4:Rs.z+=1e-4,Rs.normalize(),Dh.crossVectors(r,Rs)),Dh.normalize(),hC.crossVectors(Rs,Dh),n[0]=Dh.x,n[4]=hC.x,n[8]=Rs.x,n[1]=Dh.y,n[5]=hC.y,n[9]=Rs.y,n[2]=Dh.z,n[6]=hC.z,n[10]=Rs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let r=e.elements,n=t.elements,i=this.elements,o=r[0],a=r[4],s=r[8],l=r[12],u=r[1],d=r[5],c=r[9],h=r[13],f=r[2],m=r[6],p=r[10],g=r[14],v=r[3],b=r[7],y=r[11],x=r[15],S=n[0],w=n[4],_=n[8],C=n[12],E=n[1],A=n[5],M=n[9],I=n[13],O=n[2],T=n[6],D=n[10],N=n[14],k=n[3],R=n[7],z=n[11],j=n[15];return i[0]=o*S+a*E+s*O+l*k,i[4]=o*w+a*A+s*T+l*R,i[8]=o*_+a*M+s*D+l*z,i[12]=o*C+a*I+s*N+l*j,i[1]=u*S+d*E+c*O+h*k,i[5]=u*w+d*A+c*T+h*R,i[9]=u*_+d*M+c*D+h*z,i[13]=u*C+d*I+c*N+h*j,i[2]=f*S+m*E+p*O+g*k,i[6]=f*w+m*A+p*T+g*R,i[10]=f*_+m*M+p*D+g*z,i[14]=f*C+m*I+p*N+g*j,i[3]=v*S+b*E+y*O+x*k,i[7]=v*w+b*A+y*T+x*R,i[11]=v*_+b*M+y*D+x*z,i[15]=v*C+b*I+y*N+x*j,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],r=e[4],n=e[8],i=e[12],o=e[1],a=e[5],s=e[9],l=e[13],u=e[2],d=e[6],c=e[10],h=e[14],f=e[3],m=e[7],p=e[11],g=e[15];return f*(+i*s*d-n*l*d-i*a*c+r*l*c+n*a*h-r*s*h)+m*(+t*s*h-t*l*c+i*o*c-n*o*h+n*l*u-i*s*u)+p*(+t*l*d-t*a*h-i*o*d+r*o*h+i*a*u-r*l*u)+g*(-n*a*u-t*s*d+t*a*c+n*o*d-r*o*c+r*s*u)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){let n=this.elements;return e.isVector3?(n[12]=e.x,n[13]=e.y,n[14]=e.z):(n[12]=e,n[13]=t,n[14]=r),this}invert(){let e=this.elements,t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],d=e[9],c=e[10],h=e[11],f=e[12],m=e[13],p=e[14],g=e[15],v=d*p*l-m*c*l+m*s*h-a*p*h-d*s*g+a*c*g,b=f*c*l-u*p*l-f*s*h+o*p*h+u*s*g-o*c*g,y=u*m*l-f*d*l+f*a*h-o*m*h-u*a*g+o*d*g,x=f*d*s-u*m*s-f*a*c+o*m*c+u*a*p-o*d*p,S=t*v+r*b+n*y+i*x;if(S===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let w=1/S;return e[0]=v*w,e[1]=(m*c*i-d*p*i-m*n*h+r*p*h+d*n*g-r*c*g)*w,e[2]=(a*p*i-m*s*i+m*n*l-r*p*l-a*n*g+r*s*g)*w,e[3]=(d*s*i-a*c*i-d*n*l+r*c*l+a*n*h-r*s*h)*w,e[4]=b*w,e[5]=(u*p*i-f*c*i+f*n*h-t*p*h-u*n*g+t*c*g)*w,e[6]=(f*s*i-o*p*i-f*n*l+t*p*l+o*n*g-t*s*g)*w,e[7]=(o*c*i-u*s*i+u*n*l-t*c*l-o*n*h+t*s*h)*w,e[8]=y*w,e[9]=(f*d*i-u*m*i-f*r*h+t*m*h+u*r*g-t*d*g)*w,e[10]=(o*m*i-f*a*i+f*r*l-t*m*l-o*r*g+t*a*g)*w,e[11]=(u*a*i-o*d*i-u*r*l+t*d*l+o*r*h-t*a*h)*w,e[12]=x*w,e[13]=(u*m*n-f*d*n+f*r*c-t*m*c-u*r*p+t*d*p)*w,e[14]=(f*a*n-o*m*n-f*r*s+t*m*s+o*r*p-t*a*p)*w,e[15]=(o*d*n-u*a*n+u*r*s-t*d*s-o*r*c+t*a*c)*w,this}scale(e){let t=this.elements,r=e.x,n=e.y,i=e.z;return t[0]*=r,t[4]*=n,t[8]*=i,t[1]*=r,t[5]*=n,t[9]*=i,t[2]*=r,t[6]*=n,t[10]*=i,t[3]*=r,t[7]*=n,t[11]*=i,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,n))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let r=Math.cos(t),n=Math.sin(t),i=1-r,o=e.x,a=e.y,s=e.z,l=i*o,u=i*a;return this.set(l*o+r,l*a-n*s,l*s+n*a,0,l*a+n*s,u*a+r,u*s-n*o,0,l*s-n*a,u*s+n*o,i*s*s+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,n,i,o){return this.set(1,r,i,0,e,1,o,0,t,n,1,0,0,0,0,1),this}compose(e,t,r){let n=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,l=i+i,u=o+o,d=a+a,c=i*l,h=i*u,f=i*d,m=o*u,p=o*d,g=a*d,v=s*l,b=s*u,y=s*d,x=r.x,S=r.y,w=r.z;return n[0]=(1-(m+g))*x,n[1]=(h+y)*x,n[2]=(f-b)*x,n[3]=0,n[4]=(h-y)*S,n[5]=(1-(c+g))*S,n[6]=(p+v)*S,n[7]=0,n[8]=(f+b)*w,n[9]=(p-v)*w,n[10]=(1-(c+m))*w,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this}decompose(e,t,r){let n=this.elements,i=zg.set(n[0],n[1],n[2]).length(),o=zg.set(n[4],n[5],n[6]).length(),a=zg.set(n[8],n[9],n[10]).length();this.determinant()<0&&(i=-i),e.x=n[12],e.y=n[13],e.z=n[14],nu.copy(this);let s=1/i,l=1/o,u=1/a;return nu.elements[0]*=s,nu.elements[1]*=s,nu.elements[2]*=s,nu.elements[4]*=l,nu.elements[5]*=l,nu.elements[6]*=l,nu.elements[8]*=u,nu.elements[9]*=u,nu.elements[10]*=u,t.setFromRotationMatrix(nu),r.x=i,r.y=o,r.z=a,this}makePerspective(e,t,r,n,i,o){let a=this.elements,s=2*i/(t-e),l=2*i/(r-n),u=(t+e)/(t-e),d=(r+n)/(r-n),c=-(o+i)/(o-i),h=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=l,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=c,a[14]=h,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,r,n,i,o){let a=this.elements,s=1/(t-e),l=1/(r-n),u=1/(o-i),d=(t+e)*s,c=(r+n)*l,h=(o+i)*u;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-c,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-h,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){let t=this.elements,r=e.elements;for(let n=0;n<16;n++)if(t[n]!==r[n])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){let r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}},zg=new F,nu=new qe,wrt=new F(0,0,0),Srt=new F(1,1,1),Dh=new F,hC=new F,Rs=new F,eq=new qe,tq=new Jt,Eo=class{constructor(e=0,t=0,r=0,n=Eo.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=n}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,n=this._order){return this._x=e,this._y=t,this._z=r,this._order=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){let n=e.elements,i=n[0],o=n[4],a=n[8],s=n[1],l=n[5],u=n[9],d=n[2],c=n[6],h=n[10];switch(t){case"XYZ":this._y=Math.asin(Vi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,h),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(c,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Vi(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,h),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-d,i),this._z=0);break;case"ZXY":this._x=Math.asin(Vi(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(-d,h),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-Vi(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(c,h),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(Vi(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-d,i)):(this._x=0,this._y=Math.atan2(a,h));break;case"XZY":this._z=Math.asin(-Vi(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(c,l),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-u,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return eq.makeRotationFromQuaternion(e),this.setFromRotationMatrix(eq,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return tq.setFromEuler(this),this.setFromQuaternion(tq,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};Eo.DEFAULT_ORDER="XYZ";var L4=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},_rt=0,rq=new F,Bg=new Jt,fd=new qe,fC=new F,Jb=new F,Crt=new F,Art=new Jt,nq=new F(1,0,0),iq=new F(0,1,0),oq=new F(0,0,1),Ert={type:"added"},aq={type:"removed"},hn=class extends qo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_rt++}),this.uuid=$l(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=hn.DEFAULT_UP.clone();let e=new F,t=new Eo,r=new Jt,n=new F(1,1,1);function i(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(i),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new qe},normalMatrix:{value:new Ii}}),this.matrix=new qe,this.matrixWorld=new qe,this.matrixAutoUpdate=hn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=hn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new L4,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Bg.setFromAxisAngle(e,t),this.quaternion.multiply(Bg),this}rotateOnWorldAxis(e,t){return Bg.setFromAxisAngle(e,t),this.quaternion.premultiply(Bg),this}rotateX(e){return this.rotateOnAxis(nq,e)}rotateY(e){return this.rotateOnAxis(iq,e)}rotateZ(e){return this.rotateOnAxis(oq,e)}translateOnAxis(e,t){return rq.copy(e).applyQuaternion(this.quaternion),this.position.add(rq.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(nq,e)}translateY(e){return this.translateOnAxis(iq,e)}translateZ(e){return this.translateOnAxis(oq,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(fd.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?fC.copy(e):fC.set(e,t,r);let n=this.parent;this.updateWorldMatrix(!0,!1),Jb.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?fd.lookAt(Jb,fC,this.up):fd.lookAt(fC,Jb,this.up),this.quaternion.setFromRotationMatrix(fd),n&&(fd.extractRotation(n.matrixWorld),Bg.setFromRotationMatrix(fd),this.quaternion.premultiply(Bg.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Ert)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(aq)),this}removeFromParent(){let e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){let t=this.children[e];t.parent=null,t.dispatchEvent(aq)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),fd.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),fd.multiply(e.parent.matrixWorld)),e.applyMatrix4(fd),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,n=this.children.length;r<n;r++){let i=this.children[r].getObjectByProperty(e,t);if(i!==void 0)return i}}getObjectsByProperty(e,t){let r=[];this[e]===t&&r.push(this);for(let n=0,i=this.children.length;n<i;n++){let o=this.children[n].getObjectsByProperty(e,t);o.length>0&&(r=r.concat(o))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Jb,e,Crt),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Jb,Art,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);let t=this.children;for(let r=0,n=t.length;r<n;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);let t=this.children;for(let r=0,n=t.length;r<n;r++)t[r].traverseVisible(e)}traverseAncestors(e){let t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);let t=this.children;for(let r=0,n=t.length;r<n;r++){let i=t[r];(i.matrixWorldAutoUpdate===!0||e===!0)&&i.updateMatrixWorld(e)}}updateWorldMatrix(e,t){let r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){let n=this.children;for(let i=0,o=n.length;i<o;i++){let a=n[i];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){let t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});let n={};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.castShadow===!0&&(n.castShadow=!0),this.receiveShadow===!0&&(n.receiveShadow=!0),this.visible===!1&&(n.visible=!1),this.frustumCulled===!1&&(n.frustumCulled=!1),this.renderOrder!==0&&(n.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(n.instanceColor=this.instanceColor.toJSON()));function i(a,s){return a[s.uuid]===void 0&&(a[s.uuid]=s.toJSON(e)),s.uuid}if(this.isScene)this.background&&(this.background.isColor?n.background=this.background.toJSON():this.background.isTexture&&(n.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(n.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){n.geometry=i(e.geometries,this.geometry);let a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){let s=a.shapes;if(Array.isArray(s))for(let l=0,u=s.length;l<u;l++){let d=s[l];i(e.shapes,d)}else i(e.shapes,s)}}if(this.isSkinnedMesh&&(n.bindMode=this.bindMode,n.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(i(e.skeletons,this.skeleton),n.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let a=[];for(let s=0,l=this.material.length;s<l;s++)a.push(i(e.materials,this.material[s]));n.material=a}else n.material=i(e.materials,this.material);if(this.children.length>0){n.children=[];for(let a=0;a<this.children.length;a++)n.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){n.animations=[];for(let a=0;a<this.animations.length;a++){let s=this.animations[a];n.animations.push(i(e.animations,s))}}if(t){let a=o(e.geometries),s=o(e.materials),l=o(e.textures),u=o(e.images),d=o(e.shapes),c=o(e.skeletons),h=o(e.animations),f=o(e.nodes);a.length>0&&(r.geometries=a),s.length>0&&(r.materials=s),l.length>0&&(r.textures=l),u.length>0&&(r.images=u),d.length>0&&(r.shapes=d),c.length>0&&(r.skeletons=c),h.length>0&&(r.animations=h),f.length>0&&(r.nodes=f)}return r.object=n,r;function o(a){let s=[];for(let l in a){let u=a[l];delete u.metadata,s.push(u)}return s}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){let n=e.children[r];this.add(n.clone())}return this}};hn.DEFAULT_UP=new F(0,1,0);hn.DEFAULT_MATRIX_AUTO_UPDATE=!0;hn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var iu=new F,pd=new F,zD=new F,md=new F,Fg=new F,jg=new F,sq=new F,BD=new F,FD=new F,jD=new F,aa=class{constructor(e=new F,t=new F,r=new F){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,n){n.subVectors(r,t),iu.subVectors(e,t),n.cross(iu);let i=n.lengthSq();return i>0?n.multiplyScalar(1/Math.sqrt(i)):n.set(0,0,0)}static getBarycoord(e,t,r,n,i){iu.subVectors(n,t),pd.subVectors(r,t),zD.subVectors(e,t);let o=iu.dot(iu),a=iu.dot(pd),s=iu.dot(zD),l=pd.dot(pd),u=pd.dot(zD),d=o*l-a*a;if(d===0)return i.set(-2,-1,-1);let c=1/d,h=(l*s-a*u)*c,f=(o*u-a*s)*c;return i.set(1-h-f,f,h)}static containsPoint(e,t,r,n){return this.getBarycoord(e,t,r,n,md),md.x>=0&&md.y>=0&&md.x+md.y<=1}static getUV(e,t,r,n,i,o,a,s){return this.getBarycoord(e,t,r,n,md),s.set(0,0),s.addScaledVector(i,md.x),s.addScaledVector(o,md.y),s.addScaledVector(a,md.z),s}static isFrontFacing(e,t,r,n){return iu.subVectors(r,t),pd.subVectors(e,t),iu.cross(pd).dot(n)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,n){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[n]),this}setFromAttributeAndIndices(e,t,r,n){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return iu.subVectors(this.c,this.b),pd.subVectors(this.a,this.b),iu.cross(pd).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return aa.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return aa.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,n,i){return aa.getUV(e,this.a,this.b,this.c,t,r,n,i)}containsPoint(e){return aa.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return aa.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let r=this.a,n=this.b,i=this.c,o,a;Fg.subVectors(n,r),jg.subVectors(i,r),BD.subVectors(e,r);let s=Fg.dot(BD),l=jg.dot(BD);if(s<=0&&l<=0)return t.copy(r);FD.subVectors(e,n);let u=Fg.dot(FD),d=jg.dot(FD);if(u>=0&&d<=u)return t.copy(n);let c=s*d-u*l;if(c<=0&&s>=0&&u<=0)return o=s/(s-u),t.copy(r).addScaledVector(Fg,o);jD.subVectors(e,i);let h=Fg.dot(jD),f=jg.dot(jD);if(f>=0&&h<=f)return t.copy(i);let m=h*l-s*f;if(m<=0&&l>=0&&f<=0)return a=l/(l-f),t.copy(r).addScaledVector(jg,a);let p=u*f-h*d;if(p<=0&&d-u>=0&&h-f>=0)return sq.subVectors(i,n),a=(d-u)/(d-u+(h-f)),t.copy(n).addScaledVector(sq,a);let g=1/(p+m+c);return o=m*g,a=c*g,t.copy(r).addScaledVector(Fg,o).addScaledVector(jg,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},Mrt=0,r_=class extends qo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Mrt++}),this.uuid=$l(),this.name="",this.type="Material",this.blending=Am,this.side=Bu,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=oae,this.blendDst=aae,this.blendEquation=gv,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=wN,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=trt,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=AD,this.stencilZFail=AD,this.stencilZPass=AD,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let r=e[t];if(r===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}let n=this[t];if(n===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}n&&n.isColor?n.set(r):n&&n.isVector3&&r&&r.isVector3?n.copy(r):this[t]=r}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Am&&(r.blending=this.blending),this.side!==Bu&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(r.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function n(i){let o=[];for(let a in i){let s=i[a];delete s.metadata,o.push(s)}return o}if(t){let i=n(e.textures),o=n(e.images);i.length>0&&(r.textures=i),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,r=null;if(t!==null){let n=t.length;r=new Array(n);for(let i=0;i!==n;++i)r[i]=t[i].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},n_=class extends r_{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Bt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=sae,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},Bi=new F,pC=new ue,Kt=class{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=AN,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let n=0,i=this.itemSize;n<i;n++)this.array[e+n]=t.array[r+n];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)pC.fromBufferAttribute(this,t),pC.applyMatrix3(e),this.setXY(t,pC.x,pC.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Bi.fromBufferAttribute(this,t),Bi.applyMatrix3(e),this.setXYZ(t,Bi.x,Bi.y,Bi.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Bi.fromBufferAttribute(this,t),Bi.applyMatrix4(e),this.setXYZ(t,Bi.x,Bi.y,Bi.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Bi.fromBufferAttribute(this,t),Bi.applyNormalMatrix(e),this.setXYZ(t,Bi.x,Bi.y,Bi.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Bi.fromBufferAttribute(this,t),Bi.transformDirection(e),this.setXYZ(t,Bi.x,Bi.y,Bi.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Kd(t,this.array)),t}setX(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Kd(t,this.array)),t}setY(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Kd(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Kd(t,this.array)),t}setW(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),r=Mn(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,n){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),r=Mn(r,this.array),n=Mn(n,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=n,this}setXYZW(e,t,r,n,i){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),r=Mn(r,this.array),n=Mn(n,this.array),i=Mn(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=n,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==AN&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}},xae=class extends Kt{constructor(e,t,r){super(new Uint16Array(e),t,r)}},hy=class extends Kt{constructor(e,t,r){super(new Uint32Array(e),t,r)}},ft=class extends Kt{constructor(e,t,r){super(new Float32Array(e),t,r)}},Prt=0,ml=new qe,UD=new hn,Ug=new F,ks=new ki,ex=new ki,vo=new F,Nt=class extends qo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Prt++}),this.uuid=$l(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(mae(e)?hy:xae)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let r=this.attributes.normal;if(r!==void 0){let i=new Ii().getNormalMatrix(e);r.applyNormalMatrix(i),r.needsUpdate=!0}let n=this.attributes.tangent;return n!==void 0&&(n.transformDirection(e),n.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ml.makeRotationFromQuaternion(e),this.applyMatrix4(ml),this}rotateX(e){return ml.makeRotationX(e),this.applyMatrix4(ml),this}rotateY(e){return ml.makeRotationY(e),this.applyMatrix4(ml),this}rotateZ(e){return ml.makeRotationZ(e),this.applyMatrix4(ml),this}translate(e,t,r){return ml.makeTranslation(e,t,r),this.applyMatrix4(ml),this}scale(e,t,r){return ml.makeScale(e,t,r),this.applyMatrix4(ml),this}lookAt(e){return UD.lookAt(e),UD.updateMatrix(),this.applyMatrix4(UD.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ug).negate(),this.translate(Ug.x,Ug.y,Ug.z),this}setFromPoints(e){let t=[];for(let r=0,n=e.length;r<n;r++){let i=e[r];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new ft(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ki);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new F(-1/0,-1/0,-1/0),new F(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,n=t.length;r<n;r++){let i=t[r];ks.setFromBufferAttribute(i),this.morphTargetsRelative?(vo.addVectors(this.boundingBox.min,ks.min),this.boundingBox.expandByPoint(vo),vo.addVectors(this.boundingBox.max,ks.max),this.boundingBox.expandByPoint(vo)):(this.boundingBox.expandByPoint(ks.min),this.boundingBox.expandByPoint(ks.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ps);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new F,1/0);return}if(e){let r=this.boundingSphere.center;if(ks.setFromBufferAttribute(e),t)for(let i=0,o=t.length;i<o;i++){let a=t[i];ex.setFromBufferAttribute(a),this.morphTargetsRelative?(vo.addVectors(ks.min,ex.min),ks.expandByPoint(vo),vo.addVectors(ks.max,ex.max),ks.expandByPoint(vo)):(ks.expandByPoint(ex.min),ks.expandByPoint(ex.max))}ks.getCenter(r);let n=0;for(let i=0,o=e.count;i<o;i++)vo.fromBufferAttribute(e,i),n=Math.max(n,r.distanceToSquared(vo));if(t)for(let i=0,o=t.length;i<o;i++){let a=t[i],s=this.morphTargetsRelative;for(let l=0,u=a.count;l<u;l++)vo.fromBufferAttribute(a,l),s&&(Ug.fromBufferAttribute(e,l),vo.add(Ug)),n=Math.max(n,r.distanceToSquared(vo))}this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let r=e.array,n=t.position.array,i=t.normal.array,o=t.uv.array,a=n.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Kt(new Float32Array(4*a),4));let s=this.getAttribute("tangent").array,l=[],u=[];for(let E=0;E<a;E++)l[E]=new F,u[E]=new F;let d=new F,c=new F,h=new F,f=new ue,m=new ue,p=new ue,g=new F,v=new F;function b(E,A,M){d.fromArray(n,E*3),c.fromArray(n,A*3),h.fromArray(n,M*3),f.fromArray(o,E*2),m.fromArray(o,A*2),p.fromArray(o,M*2),c.sub(d),h.sub(d),m.sub(f),p.sub(f);let I=1/(m.x*p.y-p.x*m.y);!isFinite(I)||(g.copy(c).multiplyScalar(p.y).addScaledVector(h,-m.y).multiplyScalar(I),v.copy(h).multiplyScalar(m.x).addScaledVector(c,-p.x).multiplyScalar(I),l[E].add(g),l[A].add(g),l[M].add(g),u[E].add(v),u[A].add(v),u[M].add(v))}let y=this.groups;y.length===0&&(y=[{start:0,count:r.length}]);for(let E=0,A=y.length;E<A;++E){let M=y[E],I=M.start,O=M.count;for(let T=I,D=I+O;T<D;T+=3)b(r[T+0],r[T+1],r[T+2])}let x=new F,S=new F,w=new F,_=new F;function C(E){w.fromArray(i,E*3),_.copy(w);let A=l[E];x.copy(A),x.sub(w.multiplyScalar(w.dot(A))).normalize(),S.crossVectors(_,A);let M=S.dot(u[E])<0?-1:1;s[E*4]=x.x,s[E*4+1]=x.y,s[E*4+2]=x.z,s[E*4+3]=M}for(let E=0,A=y.length;E<A;++E){let M=y[E],I=M.start,O=M.count;for(let T=I,D=I+O;T<D;T+=3)C(r[T+0]),C(r[T+1]),C(r[T+2])}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Kt(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let c=0,h=r.count;c<h;c++)r.setXYZ(c,0,0,0);let n=new F,i=new F,o=new F,a=new F,s=new F,l=new F,u=new F,d=new F;if(e)for(let c=0,h=e.count;c<h;c+=3){let f=e.getX(c+0),m=e.getX(c+1),p=e.getX(c+2);n.fromBufferAttribute(t,f),i.fromBufferAttribute(t,m),o.fromBufferAttribute(t,p),u.subVectors(o,i),d.subVectors(n,i),u.cross(d),a.fromBufferAttribute(r,f),s.fromBufferAttribute(r,m),l.fromBufferAttribute(r,p),a.add(u),s.add(u),l.add(u),r.setXYZ(f,a.x,a.y,a.z),r.setXYZ(m,s.x,s.y,s.z),r.setXYZ(p,l.x,l.y,l.z)}else for(let c=0,h=t.count;c<h;c+=3)n.fromBufferAttribute(t,c+0),i.fromBufferAttribute(t,c+1),o.fromBufferAttribute(t,c+2),u.subVectors(o,i),d.subVectors(n,i),u.cross(d),r.setXYZ(c+0,u.x,u.y,u.z),r.setXYZ(c+1,u.x,u.y,u.z),r.setXYZ(c+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){let e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)vo.fromBufferAttribute(e,t),vo.normalize(),e.setXYZ(t,vo.x,vo.y,vo.z)}toNonIndexed(){function e(a,s){let l=a.array,u=a.itemSize,d=a.normalized,c=new l.constructor(s.length*u),h=0,f=0;for(let m=0,p=s.length;m<p;m++){a.isInterleavedBufferAttribute?h=s[m]*a.data.stride+a.offset:h=s[m]*u;for(let g=0;g<u;g++)c[f++]=l[h++]}return new Kt(c,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new Nt,r=this.index.array,n=this.attributes;for(let a in n){let s=n[a],l=e(s,r);t.setAttribute(a,l)}let i=this.morphAttributes;for(let a in i){let s=[],l=i[a];for(let u=0,d=l.length;u<d;u++){let c=l[u],h=e(c,r);s.push(h)}t.morphAttributes[a]=s}t.morphTargetsRelative=this.morphTargetsRelative;let o=this.groups;for(let a=0,s=o.length;a<s;a++){let l=o[a];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){let e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let s=this.parameters;for(let l in s)s[l]!==void 0&&(e[l]=s[l]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let r=this.attributes;for(let s in r){let l=r[s];e.data.attributes[s]=l.toJSON(e.data)}let n={},i=!1;for(let s in this.morphAttributes){let l=this.morphAttributes[s],u=[];for(let d=0,c=l.length;d<c;d++){let h=l[d];u.push(h.toJSON(e.data))}u.length>0&&(n[s]=u,i=!0)}i&&(e.data.morphAttributes=n,e.data.morphTargetsRelative=this.morphTargetsRelative);let o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));let a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let r=e.index;r!==null&&this.setIndex(r.clone(t));let n=e.attributes;for(let l in n){let u=n[l];this.setAttribute(l,u.clone(t))}let i=e.morphAttributes;for(let l in i){let u=[],d=i[l];for(let c=0,h=d.length;c<h;c++)u.push(d[c].clone(t));this.morphAttributes[l]=u}this.morphTargetsRelative=e.morphTargetsRelative;let o=e.groups;for(let l=0,u=o.length;l<u;l++){let d=o[l];this.addGroup(d.start,d.count,d.materialIndex)}let a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());let s=e.boundingSphere;return s!==null&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}},lq=new qe,$g=new ab,$D=new Ps,tx=new F,rx=new F,nx=new F,VD=new F,mC=new F,gC=new ue,vC=new ue,yC=new ue,HD=new F,bC=new F,Fa=class extends hn{constructor(e=new Nt,t=new n_){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let n=0,i=r.length;n<i;n++){let o=r[n].name||String(n);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=n}}}}getVertexPosition(e,t){let r=this.geometry,n=r.attributes.position,i=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(n,e);let a=this.morphTargetInfluences;if(i&&a){mC.set(0,0,0);for(let s=0,l=i.length;s<l;s++){let u=a[s],d=i[s];u!==0&&(VD.fromBufferAttribute(d,e),o?mC.addScaledVector(VD,u):mC.addScaledVector(VD.sub(t),u))}t.add(mC)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){let r=this.geometry,n=this.material,i=this.matrixWorld;if(n===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),$D.copy(r.boundingSphere),$D.applyMatrix4(i),e.ray.intersectsSphere($D)===!1)||(lq.copy(i).invert(),$g.copy(e.ray).applyMatrix4(lq),r.boundingBox!==null&&$g.intersectsBox(r.boundingBox)===!1))return;let o,a=r.index,s=r.attributes.position,l=r.attributes.uv,u=r.attributes.uv2,d=r.groups,c=r.drawRange;if(a!==null)if(Array.isArray(n))for(let h=0,f=d.length;h<f;h++){let m=d[h],p=n[m.materialIndex],g=Math.max(m.start,c.start),v=Math.min(a.count,Math.min(m.start+m.count,c.start+c.count));for(let b=g,y=v;b<y;b+=3){let x=a.getX(b),S=a.getX(b+1),w=a.getX(b+2);o=xC(this,p,e,$g,l,u,x,S,w),o&&(o.faceIndex=Math.floor(b/3),o.face.materialIndex=m.materialIndex,t.push(o))}}else{let h=Math.max(0,c.start),f=Math.min(a.count,c.start+c.count);for(let m=h,p=f;m<p;m+=3){let g=a.getX(m),v=a.getX(m+1),b=a.getX(m+2);o=xC(this,n,e,$g,l,u,g,v,b),o&&(o.faceIndex=Math.floor(m/3),t.push(o))}}else if(s!==void 0)if(Array.isArray(n))for(let h=0,f=d.length;h<f;h++){let m=d[h],p=n[m.materialIndex],g=Math.max(m.start,c.start),v=Math.min(s.count,Math.min(m.start+m.count,c.start+c.count));for(let b=g,y=v;b<y;b+=3){let x=b,S=b+1,w=b+2;o=xC(this,p,e,$g,l,u,x,S,w),o&&(o.faceIndex=Math.floor(b/3),o.face.materialIndex=m.materialIndex,t.push(o))}}else{let h=Math.max(0,c.start),f=Math.min(s.count,c.start+c.count);for(let m=h,p=f;m<p;m+=3){let g=m,v=m+1,b=m+2;o=xC(this,n,e,$g,l,u,g,v,b),o&&(o.faceIndex=Math.floor(m/3),t.push(o))}}}};function Trt(e,t,r,n,i,o,a,s){let l;if(t.side===Po?l=n.intersectTriangle(a,o,i,!0,s):l=n.intersectTriangle(i,o,a,t.side===Bu,s),l===null)return null;bC.copy(s),bC.applyMatrix4(e.matrixWorld);let u=r.ray.origin.distanceTo(bC);return u<r.near||u>r.far?null:{distance:u,point:bC.clone(),object:e}}function xC(e,t,r,n,i,o,a,s,l){e.getVertexPosition(a,tx),e.getVertexPosition(s,rx),e.getVertexPosition(l,nx);let u=Trt(e,t,r,n,tx,rx,nx,HD);if(u){i&&(gC.fromBufferAttribute(i,a),vC.fromBufferAttribute(i,s),yC.fromBufferAttribute(i,l),u.uv=aa.getUV(HD,tx,rx,nx,gC,vC,yC,new ue)),o&&(gC.fromBufferAttribute(o,a),vC.fromBufferAttribute(o,s),yC.fromBufferAttribute(o,l),u.uv2=aa.getUV(HD,tx,rx,nx,gC,vC,yC,new ue));let d={a,b:s,c:l,normal:new F,materialIndex:0};aa.getNormal(tx,rx,nx,d.normal),u.face=d}return u}var Jc=class extends Nt{constructor(e=1,t=1,r=1,n=1,i=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:n,heightSegments:i,depthSegments:o};let a=this;n=Math.floor(n),i=Math.floor(i),o=Math.floor(o);let s=[],l=[],u=[],d=[],c=0,h=0;f("z","y","x",-1,-1,r,t,e,o,i,0),f("z","y","x",1,-1,r,t,-e,o,i,1),f("x","z","y",1,1,e,r,t,n,o,2),f("x","z","y",1,-1,e,r,-t,n,o,3),f("x","y","z",1,-1,e,t,r,n,i,4),f("x","y","z",-1,-1,e,t,-r,n,i,5),this.setIndex(s),this.setAttribute("position",new ft(l,3)),this.setAttribute("normal",new ft(u,3)),this.setAttribute("uv",new ft(d,2));function f(m,p,g,v,b,y,x,S,w,_,C){let E=y/w,A=x/_,M=y/2,I=x/2,O=S/2,T=w+1,D=_+1,N=0,k=0,R=new F;for(let z=0;z<D;z++){let j=z*A-I;for(let $=0;$<T;$++){let U=$*E-M;R[m]=U*v,R[p]=j*b,R[g]=O,l.push(R.x,R.y,R.z),R[m]=0,R[p]=0,R[g]=S>0?1:-1,u.push(R.x,R.y,R.z),d.push($/w),d.push(1-z/_),N+=1}}for(let z=0;z<_;z++)for(let j=0;j<w;j++){let $=c+j+T*z,U=c+j+T*(z+1),H=c+(j+1)+T*(z+1),V=c+(j+1)+T*z;s.push($,U,V),s.push(U,H,V),k+=6}a.addGroup(h,k,C),h+=k,c+=N}}static fromJSON(e){return new Jc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function b0(e){let t={};for(let r in e){t[r]={};for(let n in e[r]){let i=e[r][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[r][n]=i.clone():Array.isArray(i)?t[r][n]=i.slice():t[r][n]=i}}return t}function Aa(e){let t={};for(let r=0;r<e.length;r++){let n=b0(e[r]);for(let i in n)t[i]=n[i]}return t}function Ort(e){let t=[];for(let r=0;r<e.length;r++)t.push(e[r].clone());return t}function wae(e){return e.getRenderTarget()===null&&e.outputEncoding===ir?fc:rP}var sb={clone:b0,merge:Aa},Irt=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Drt=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,Sn=class extends r_{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Irt,this.fragmentShader=Drt,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=b0(e.uniforms),this.uniformsGroups=Ort(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let n in this.uniforms){let i=this.uniforms[n].value;i&&i.isTexture?t.uniforms[n]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[n]={type:"m4",value:i.toArray()}:t.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;let r={};for(let n in this.extensions)this.extensions[n]===!0&&(r[n]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}},lb=class extends hn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new qe,this.projectionMatrix=new qe,this.projectionMatrixInverse=new qe}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},oa=class extends lb{constructor(e=50,t=1,r=.1,n=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=n,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=Xw*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(x1*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Xw*2*Math.atan(Math.tan(x1*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,n,i,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=n,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(x1*.5*this.fov)/this.zoom,r=2*t,n=this.aspect*r,i=-.5*n,o=this.view;if(this.view!==null&&this.view.enabled){let s=o.fullWidth,l=o.fullHeight;i+=o.offsetX*n/s,t-=o.offsetY*r/l,n*=o.width/s,r*=o.height/l}let a=this.filmOffset;a!==0&&(i+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+n,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},Vg=-90,Hg=1,Rrt=class extends hn{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r;let n=new oa(Vg,Hg,e,t);n.layers=this.layers,n.up.set(0,1,0),n.lookAt(1,0,0),this.add(n);let i=new oa(Vg,Hg,e,t);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(-1,0,0),this.add(i);let o=new oa(Vg,Hg,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);let a=new oa(Vg,Hg,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);let s=new oa(Vg,Hg,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(0,0,1),this.add(s);let l=new oa(Vg,Hg,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(e,t){this.parent===null&&this.updateMatrixWorld();let r=this.renderTarget,[n,i,o,a,s,l]=this.children,u=e.getRenderTarget(),d=e.toneMapping,c=e.xr.enabled;e.toneMapping=Qd,e.xr.enabled=!1;let h=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,n),e.setRenderTarget(r,1),e.render(t,i),e.setRenderTarget(r,2),e.render(t,o),e.setRenderTarget(r,3),e.render(t,a),e.setRenderTarget(r,4),e.render(t,s),r.texture.generateMipmaps=h,e.setRenderTarget(r,5),e.render(t,l),e.setRenderTarget(u),e.toneMapping=d,e.xr.enabled=c,r.texture.needsPMREMUpdate=!0}},N4=class extends co{constructor(e,t,r,n,i,o,a,s,l,u){e=e!==void 0?e:[],t=t!==void 0?t:qm,super(e,t,r,n,i,o,a,s,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},krt=class extends cn{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let r={width:e,height:e,depth:1},n=[r,r,r,r,r,r];this.texture=new N4(n,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:yr}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},n=new Jc(5,5,5),i=new Sn({name:"CubemapFromEquirect",uniforms:b0(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Po,blending:Xi});i.uniforms.tEquirect.value=t;let o=new Fa(n,i),a=t.minFilter;return t.minFilter===y0&&(t.minFilter=yr),new Rrt(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,n){let i=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,n);e.setRenderTarget(i)}},GD=new F,Lrt=new F,Nrt=new Ii,Hs=class{constructor(e=new F(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,n){return this.normal.set(e,t,r),this.constant=n,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){let n=GD.subVectors(r,t).cross(Lrt.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(n,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){let r=e.delta(GD),n=this.normal.dot(r);if(n===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let i=-(e.start.dot(this.normal)+this.constant)/n;return i<0||i>1?null:t.copy(r).multiplyScalar(i).add(e.start)}intersectsLine(e){let t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let r=t||Nrt.getNormalMatrix(e),n=this.coplanarPoint(GD).applyMatrix4(e),i=this.normal.applyMatrix3(r).normalize();return this.constant=-n.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},Gg=new Ps,wC=new F,z4=class{constructor(e=new Hs,t=new Hs,r=new Hs,n=new Hs,i=new Hs,o=new Hs){this.planes=[e,t,r,n,i,o]}set(e,t,r,n,i,o){let a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(n),a[4].copy(i),a[5].copy(o),this}copy(e){let t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){let t=this.planes,r=e.elements,n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],l=r[5],u=r[6],d=r[7],c=r[8],h=r[9],f=r[10],m=r[11],p=r[12],g=r[13],v=r[14],b=r[15];return t[0].setComponents(a-n,d-s,m-c,b-p).normalize(),t[1].setComponents(a+n,d+s,m+c,b+p).normalize(),t[2].setComponents(a+i,d+l,m+h,b+g).normalize(),t[3].setComponents(a-i,d-l,m-h,b-g).normalize(),t[4].setComponents(a-o,d-u,m-f,b-v).normalize(),t[5].setComponents(a+o,d+u,m+f,b+v).normalize(),this}intersectsObject(e){let t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),Gg.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Gg)}intersectsSprite(e){return Gg.center.set(0,0,0),Gg.radius=.7071067811865476,Gg.applyMatrix4(e.matrixWorld),this.intersectsSphere(Gg)}intersectsSphere(e){let t=this.planes,r=e.center,n=-e.radius;for(let i=0;i<6;i++)if(t[i].distanceToPoint(r)<n)return!1;return!0}intersectsBox(e){let t=this.planes;for(let r=0;r<6;r++){let n=t[r];if(wC.x=n.normal.x>0?e.max.x:e.min.x,wC.y=n.normal.y>0?e.max.y:e.min.y,wC.z=n.normal.z>0?e.max.z:e.min.z,n.distanceToPoint(wC)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function Sae(){let e=null,t=!1,r=null,n=null;function i(o,a){r(o,a),n=e.requestAnimationFrame(i)}return{start:function(){t!==!0&&r!==null&&(n=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(o){r=o},setContext:function(o){e=o}}}function zrt(e,t){let r=t.isWebGL2,n=new WeakMap;function i(u,d){let c=u.array,h=u.usage,f=e.createBuffer();e.bindBuffer(d,f),e.bufferData(d,c,h),u.onUploadCallback();let m;if(c instanceof Float32Array)m=5126;else if(c instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(r)m=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else m=5123;else if(c instanceof Int16Array)m=5122;else if(c instanceof Uint32Array)m=5125;else if(c instanceof Int32Array)m=5124;else if(c instanceof Int8Array)m=5120;else if(c instanceof Uint8Array)m=5121;else if(c instanceof Uint8ClampedArray)m=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:f,type:m,bytesPerElement:c.BYTES_PER_ELEMENT,version:u.version}}function o(u,d,c){let h=d.array,f=d.updateRange;e.bindBuffer(c,u),f.count===-1?e.bufferSubData(c,0,h):(r?e.bufferSubData(c,f.offset*h.BYTES_PER_ELEMENT,h,f.offset,f.count):e.bufferSubData(c,f.offset*h.BYTES_PER_ELEMENT,h.subarray(f.offset,f.offset+f.count)),f.count=-1),d.onUploadCallback()}function a(u){return u.isInterleavedBufferAttribute&&(u=u.data),n.get(u)}function s(u){u.isInterleavedBufferAttribute&&(u=u.data);let d=n.get(u);d&&(e.deleteBuffer(d.buffer),n.delete(u))}function l(u,d){if(u.isGLBufferAttribute){let h=n.get(u);(!h||h.version<u.version)&&n.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);let c=n.get(u);c===void 0?n.set(u,i(u,d)):c.version<u.version&&(o(c.buffer,u,d),c.version=u.version)}return{get:a,remove:s,update:l}}var aO=class extends Nt{constructor(e=1,t=1,r=1,n=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:n};let i=e/2,o=t/2,a=Math.floor(r),s=Math.floor(n),l=a+1,u=s+1,d=e/a,c=t/s,h=[],f=[],m=[],p=[];for(let g=0;g<u;g++){let v=g*c-o;for(let b=0;b<l;b++){let y=b*d-i;f.push(y,-v,0),m.push(0,0,1),p.push(b/a),p.push(1-g/s)}}for(let g=0;g<s;g++)for(let v=0;v<a;v++){let b=v+l*g,y=v+l*(g+1),x=v+1+l*(g+1),S=v+1+l*g;h.push(b,y,S),h.push(y,x,S)}this.setIndex(h),this.setAttribute("position",new ft(f,3)),this.setAttribute("normal",new ft(m,3)),this.setAttribute("uv",new ft(p,2))}static fromJSON(e){return new aO(e.width,e.height,e.widthSegments,e.heightSegments)}},Brt=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,Frt=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,jrt=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Urt=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,$rt=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Vrt=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Hrt="vec3 transformed = vec3( position );",Grt=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Wrt=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,qrt=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Krt=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Xrt=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Yrt=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Qrt=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Zrt=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Jrt=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,ent=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,tnt=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,rnt=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,nnt=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,int=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,ont=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,ant=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,snt=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,lnt=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,unt=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,cnt="gl_FragColor = linearToOutputTexel( gl_FragColor );",dnt=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,hnt=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,fnt=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,pnt=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,mnt=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,gnt=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,vnt=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,ynt=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,bnt=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,xnt=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,wnt=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Snt=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,_nt=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Cnt=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Ant=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Ent=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Mnt=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,Pnt=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Tnt=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Ont=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Int=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Dnt=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,Rnt=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,knt=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Lnt=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Nnt=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,znt=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Bnt=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Fnt=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,jnt=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Unt=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,$nt=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Vnt=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Hnt=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Gnt=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Wnt=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,qnt=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Knt=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Xnt=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Ynt=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Qnt=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,Znt=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Jnt=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,eit=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,tit=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,rit=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,nit=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,iit=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,oit=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,ait=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,sit=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,lit=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,uit=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,cit=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dit=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,hit=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,fit=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,pit=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,mit=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,git=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,vit=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,yit=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,bit=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,xit=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,wit=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Sit=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,_it=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Cit=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Ait=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Eit=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Mit=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,Pit=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,Tit=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,Oit=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,Iit=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,Dit=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,Rit=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,kit=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,Lit=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,Nit=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,zit=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Bit=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Fit=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,jit=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Uit=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,$it=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Vit=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Hit=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Git=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Wit=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,qit=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Kit=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Xit=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Yit=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Qit=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Zit=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Jit=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,eot=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,tot=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rot=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,not=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,iot=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,oot=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,aot=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,sot=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lot=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,uot=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,cot=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,dot=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,hot=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fot=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,pot=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,mot=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,sr={alphamap_fragment:Brt,alphamap_pars_fragment:Frt,alphatest_fragment:jrt,alphatest_pars_fragment:Urt,aomap_fragment:$rt,aomap_pars_fragment:Vrt,begin_vertex:Hrt,beginnormal_vertex:Grt,bsdfs:Wrt,iridescence_fragment:qrt,bumpmap_pars_fragment:Krt,clipping_planes_fragment:Xrt,clipping_planes_pars_fragment:Yrt,clipping_planes_pars_vertex:Qrt,clipping_planes_vertex:Zrt,color_fragment:Jrt,color_pars_fragment:ent,color_pars_vertex:tnt,color_vertex:rnt,common:nnt,cube_uv_reflection_fragment:int,defaultnormal_vertex:ont,displacementmap_pars_vertex:ant,displacementmap_vertex:snt,emissivemap_fragment:lnt,emissivemap_pars_fragment:unt,encodings_fragment:cnt,encodings_pars_fragment:dnt,envmap_fragment:hnt,envmap_common_pars_fragment:fnt,envmap_pars_fragment:pnt,envmap_pars_vertex:mnt,envmap_physical_pars_fragment:Mnt,envmap_vertex:gnt,fog_vertex:vnt,fog_pars_vertex:ynt,fog_fragment:bnt,fog_pars_fragment:xnt,gradientmap_pars_fragment:wnt,lightmap_fragment:Snt,lightmap_pars_fragment:_nt,lights_lambert_fragment:Cnt,lights_lambert_pars_fragment:Ant,lights_pars_begin:Ent,lights_toon_fragment:Pnt,lights_toon_pars_fragment:Tnt,lights_phong_fragment:Ont,lights_phong_pars_fragment:Int,lights_physical_fragment:Dnt,lights_physical_pars_fragment:Rnt,lights_fragment_begin:knt,lights_fragment_maps:Lnt,lights_fragment_end:Nnt,logdepthbuf_fragment:znt,logdepthbuf_pars_fragment:Bnt,logdepthbuf_pars_vertex:Fnt,logdepthbuf_vertex:jnt,map_fragment:Unt,map_pars_fragment:$nt,map_particle_fragment:Vnt,map_particle_pars_fragment:Hnt,metalnessmap_fragment:Gnt,metalnessmap_pars_fragment:Wnt,morphcolor_vertex:qnt,morphnormal_vertex:Knt,morphtarget_pars_vertex:Xnt,morphtarget_vertex:Ynt,normal_fragment_begin:Qnt,normal_fragment_maps:Znt,normal_pars_fragment:Jnt,normal_pars_vertex:eit,normal_vertex:tit,normalmap_pars_fragment:rit,clearcoat_normal_fragment_begin:nit,clearcoat_normal_fragment_maps:iit,clearcoat_pars_fragment:oit,iridescence_pars_fragment:ait,output_fragment:sit,packing:lit,premultiplied_alpha_fragment:uit,project_vertex:cit,dithering_fragment:dit,dithering_pars_fragment:hit,roughnessmap_fragment:fit,roughnessmap_pars_fragment:pit,shadowmap_pars_fragment:mit,shadowmap_pars_vertex:git,shadowmap_vertex:vit,shadowmask_pars_fragment:yit,skinbase_vertex:bit,skinning_pars_vertex:xit,skinning_vertex:wit,skinnormal_vertex:Sit,specularmap_fragment:_it,specularmap_pars_fragment:Cit,tonemapping_fragment:Ait,tonemapping_pars_fragment:Eit,transmission_fragment:Mit,transmission_pars_fragment:Pit,uv_pars_fragment:Tit,uv_pars_vertex:Oit,uv_vertex:Iit,uv2_pars_fragment:Dit,uv2_pars_vertex:Rit,uv2_vertex:kit,worldpos_vertex:Lit,background_vert:Nit,background_frag:zit,backgroundCube_vert:Bit,backgroundCube_frag:Fit,cube_vert:jit,cube_frag:Uit,depth_vert:$it,depth_frag:Vit,distanceRGBA_vert:Hit,distanceRGBA_frag:Git,equirect_vert:Wit,equirect_frag:qit,linedashed_vert:Kit,linedashed_frag:Xit,meshbasic_vert:Yit,meshbasic_frag:Qit,meshlambert_vert:Zit,meshlambert_frag:Jit,meshmatcap_vert:eot,meshmatcap_frag:tot,meshnormal_vert:rot,meshnormal_frag:not,meshphong_vert:iot,meshphong_frag:oot,meshphysical_vert:aot,meshphysical_frag:sot,meshtoon_vert:lot,meshtoon_frag:uot,points_vert:cot,points_frag:dot,shadow_vert:hot,shadow_frag:fot,sprite_vert:pot,sprite_frag:mot},it={common:{diffuse:{value:new Bt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Ii},uv2Transform:{value:new Ii},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ue(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Bt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Bt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ii}},sprite:{diffuse:{value:new Bt(16777215)},opacity:{value:1},center:{value:new ue(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ii}}},bc={basic:{uniforms:Aa([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.fog]),vertexShader:sr.meshbasic_vert,fragmentShader:sr.meshbasic_frag},lambert:{uniforms:Aa([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.fog,it.lights,{emissive:{value:new Bt(0)}}]),vertexShader:sr.meshlambert_vert,fragmentShader:sr.meshlambert_frag},phong:{uniforms:Aa([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.fog,it.lights,{emissive:{value:new Bt(0)},specular:{value:new Bt(1118481)},shininess:{value:30}}]),vertexShader:sr.meshphong_vert,fragmentShader:sr.meshphong_frag},standard:{uniforms:Aa([it.common,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.roughnessmap,it.metalnessmap,it.fog,it.lights,{emissive:{value:new Bt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:sr.meshphysical_vert,fragmentShader:sr.meshphysical_frag},toon:{uniforms:Aa([it.common,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.gradientmap,it.fog,it.lights,{emissive:{value:new Bt(0)}}]),vertexShader:sr.meshtoon_vert,fragmentShader:sr.meshtoon_frag},matcap:{uniforms:Aa([it.common,it.bumpmap,it.normalmap,it.displacementmap,it.fog,{matcap:{value:null}}]),vertexShader:sr.meshmatcap_vert,fragmentShader:sr.meshmatcap_frag},points:{uniforms:Aa([it.points,it.fog]),vertexShader:sr.points_vert,fragmentShader:sr.points_frag},dashed:{uniforms:Aa([it.common,it.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:sr.linedashed_vert,fragmentShader:sr.linedashed_frag},depth:{uniforms:Aa([it.common,it.displacementmap]),vertexShader:sr.depth_vert,fragmentShader:sr.depth_frag},normal:{uniforms:Aa([it.common,it.bumpmap,it.normalmap,it.displacementmap,{opacity:{value:1}}]),vertexShader:sr.meshnormal_vert,fragmentShader:sr.meshnormal_frag},sprite:{uniforms:Aa([it.sprite,it.fog]),vertexShader:sr.sprite_vert,fragmentShader:sr.sprite_frag},background:{uniforms:{uvTransform:{value:new Ii},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:sr.background_vert,fragmentShader:sr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:sr.backgroundCube_vert,fragmentShader:sr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:sr.cube_vert,fragmentShader:sr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:sr.equirect_vert,fragmentShader:sr.equirect_frag},distanceRGBA:{uniforms:Aa([it.common,it.displacementmap,{referencePosition:{value:new F},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:sr.distanceRGBA_vert,fragmentShader:sr.distanceRGBA_frag},shadow:{uniforms:Aa([it.lights,it.fog,{color:{value:new Bt(0)},opacity:{value:1}}]),vertexShader:sr.shadow_vert,fragmentShader:sr.shadow_frag}};bc.physical={uniforms:Aa([bc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new ue(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Bt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new ue},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Bt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Bt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:sr.meshphysical_vert,fragmentShader:sr.meshphysical_frag};var SC={r:0,b:0,g:0};function got(e,t,r,n,i,o,a){let s=new Bt(0),l=o===!0?0:1,u,d,c=null,h=0,f=null;function m(g,v){let b=!1,y=v.isScene===!0?v.background:null;y&&y.isTexture&&(y=(v.backgroundBlurriness>0?r:t).get(y));let x=e.xr,S=x.getSession&&x.getSession();S&&S.environmentBlendMode==="additive"&&(y=null),y===null?p(s,l):y&&y.isColor&&(p(y,1),b=!0),(e.autoClear||b)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),y&&(y.isCubeTexture||y.mapping===t_)?(d===void 0&&(d=new Fa(new Jc(1,1,1),new Sn({name:"BackgroundCubeMaterial",uniforms:b0(bc.backgroundCube.uniforms),vertexShader:bc.backgroundCube.vertexShader,fragmentShader:bc.backgroundCube.fragmentShader,side:Po,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(w,_,C){this.matrixWorld.copyPosition(C.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(d)),d.material.uniforms.envMap.value=y,d.material.uniforms.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,d.material.toneMapped=y.encoding!==ir,(c!==y||h!==y.version||f!==e.toneMapping)&&(d.material.needsUpdate=!0,c=y,h=y.version,f=e.toneMapping),d.layers.enableAll(),g.unshift(d,d.geometry,d.material,0,0,null)):y&&y.isTexture&&(u===void 0&&(u=new Fa(new aO(2,2),new Sn({name:"BackgroundMaterial",uniforms:b0(bc.background.uniforms),vertexShader:bc.background.vertexShader,fragmentShader:bc.background.fragmentShader,side:Bu,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=y,u.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,u.material.toneMapped=y.encoding!==ir,y.matrixAutoUpdate===!0&&y.updateMatrix(),u.material.uniforms.uvTransform.value.copy(y.matrix),(c!==y||h!==y.version||f!==e.toneMapping)&&(u.material.needsUpdate=!0,c=y,h=y.version,f=e.toneMapping),u.layers.enableAll(),g.unshift(u,u.geometry,u.material,0,0,null))}function p(g,v){g.getRGB(SC,wae(e)),n.buffers.color.setClear(SC.r,SC.g,SC.b,v,a)}return{getClearColor:function(){return s},setClearColor:function(g,v=1){s.set(g),l=v,p(s,l)},getClearAlpha:function(){return l},setClearAlpha:function(g){l=g,p(s,l)},render:m}}function vot(e,t,r,n){let i=e.getParameter(34921),o=n.isWebGL2?null:t.get("OES_vertex_array_object"),a=n.isWebGL2||o!==null,s={},l=g(null),u=l,d=!1;function c(T,D,N,k,R){let z=!1;if(a){let j=p(k,N,D);u!==j&&(u=j,f(u.object)),z=v(T,k,N,R),z&&b(T,k,N,R)}else{let j=D.wireframe===!0;(u.geometry!==k.id||u.program!==N.id||u.wireframe!==j)&&(u.geometry=k.id,u.program=N.id,u.wireframe=j,z=!0)}R!==null&&r.update(R,34963),(z||d)&&(d=!1,C(T,D,N,k),R!==null&&e.bindBuffer(34963,r.get(R).buffer))}function h(){return n.isWebGL2?e.createVertexArray():o.createVertexArrayOES()}function f(T){return n.isWebGL2?e.bindVertexArray(T):o.bindVertexArrayOES(T)}function m(T){return n.isWebGL2?e.deleteVertexArray(T):o.deleteVertexArrayOES(T)}function p(T,D,N){let k=N.wireframe===!0,R=s[T.id];R===void 0&&(R={},s[T.id]=R);let z=R[D.id];z===void 0&&(z={},R[D.id]=z);let j=z[k];return j===void 0&&(j=g(h()),z[k]=j),j}function g(T){let D=[],N=[],k=[];for(let R=0;R<i;R++)D[R]=0,N[R]=0,k[R]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:D,enabledAttributes:N,attributeDivisors:k,object:T,attributes:{},index:null}}function v(T,D,N,k){let R=u.attributes,z=D.attributes,j=0,$=N.getAttributes();for(let U in $)if($[U].location>=0){let H=R[U],V=z[U];if(V===void 0&&(U==="instanceMatrix"&&T.instanceMatrix&&(V=T.instanceMatrix),U==="instanceColor"&&T.instanceColor&&(V=T.instanceColor)),H===void 0||H.attribute!==V||V&&H.data!==V.data)return!0;j++}return u.attributesNum!==j||u.index!==k}function b(T,D,N,k){let R={},z=D.attributes,j=0,$=N.getAttributes();for(let U in $)if($[U].location>=0){let H=z[U];H===void 0&&(U==="instanceMatrix"&&T.instanceMatrix&&(H=T.instanceMatrix),U==="instanceColor"&&T.instanceColor&&(H=T.instanceColor));let V={};V.attribute=H,H&&H.data&&(V.data=H.data),R[U]=V,j++}u.attributes=R,u.attributesNum=j,u.index=k}function y(){let T=u.newAttributes;for(let D=0,N=T.length;D<N;D++)T[D]=0}function x(T){S(T,0)}function S(T,D){let N=u.newAttributes,k=u.enabledAttributes,R=u.attributeDivisors;N[T]=1,k[T]===0&&(e.enableVertexAttribArray(T),k[T]=1),R[T]!==D&&((n.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](T,D),R[T]=D)}function w(){let T=u.newAttributes,D=u.enabledAttributes;for(let N=0,k=D.length;N<k;N++)D[N]!==T[N]&&(e.disableVertexAttribArray(N),D[N]=0)}function _(T,D,N,k,R,z){n.isWebGL2===!0&&(N===5124||N===5125)?e.vertexAttribIPointer(T,D,N,R,z):e.vertexAttribPointer(T,D,N,k,R,z)}function C(T,D,N,k){if(n.isWebGL2===!1&&(T.isInstancedMesh||k.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;y();let R=k.attributes,z=N.getAttributes(),j=D.defaultAttributeValues;for(let $ in z){let U=z[$];if(U.location>=0){let H=R[$];if(H===void 0&&($==="instanceMatrix"&&T.instanceMatrix&&(H=T.instanceMatrix),$==="instanceColor"&&T.instanceColor&&(H=T.instanceColor)),H!==void 0){let V=H.normalized,Q=H.itemSize,X=r.get(H);if(X===void 0)continue;let ne=X.buffer,J=X.type,W=X.bytesPerElement;if(H.isInterleavedBufferAttribute){let te=H.data,Z=te.stride,q=H.offset;if(te.isInstancedInterleavedBuffer){for(let ie=0;ie<U.locationSize;ie++)S(U.location+ie,te.meshPerAttribute);T.isInstancedMesh!==!0&&k._maxInstanceCount===void 0&&(k._maxInstanceCount=te.meshPerAttribute*te.count)}else for(let ie=0;ie<U.locationSize;ie++)x(U.location+ie);e.bindBuffer(34962,ne);for(let ie=0;ie<U.locationSize;ie++)_(U.location+ie,Q/U.locationSize,J,V,Z*W,(q+Q/U.locationSize*ie)*W)}else{if(H.isInstancedBufferAttribute){for(let te=0;te<U.locationSize;te++)S(U.location+te,H.meshPerAttribute);T.isInstancedMesh!==!0&&k._maxInstanceCount===void 0&&(k._maxInstanceCount=H.meshPerAttribute*H.count)}else for(let te=0;te<U.locationSize;te++)x(U.location+te);e.bindBuffer(34962,ne);for(let te=0;te<U.locationSize;te++)_(U.location+te,Q/U.locationSize,J,V,Q*W,Q/U.locationSize*te*W)}}else if(j!==void 0){let V=j[$];if(V!==void 0)switch(V.length){case 2:e.vertexAttrib2fv(U.location,V);break;case 3:e.vertexAttrib3fv(U.location,V);break;case 4:e.vertexAttrib4fv(U.location,V);break;default:e.vertexAttrib1fv(U.location,V)}}}}w()}function E(){I();for(let T in s){let D=s[T];for(let N in D){let k=D[N];for(let R in k)m(k[R].object),delete k[R];delete D[N]}delete s[T]}}function A(T){if(s[T.id]===void 0)return;let D=s[T.id];for(let N in D){let k=D[N];for(let R in k)m(k[R].object),delete k[R];delete D[N]}delete s[T.id]}function M(T){for(let D in s){let N=s[D];if(N[T.id]===void 0)continue;let k=N[T.id];for(let R in k)m(k[R].object),delete k[R];delete N[T.id]}}function I(){O(),d=!0,u!==l&&(u=l,f(u.object))}function O(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:c,reset:I,resetDefaultState:O,dispose:E,releaseStatesOfGeometry:A,releaseStatesOfProgram:M,initAttributes:y,enableAttribute:x,disableUnusedAttributes:w}}function yot(e,t,r,n){let i=n.isWebGL2,o;function a(u){o=u}function s(u,d){e.drawArrays(o,u,d),r.update(d,o,1)}function l(u,d,c){if(c===0)return;let h,f;if(i)h=e,f="drawArraysInstanced";else if(h=t.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[f](o,u,d,c),r.update(d,o,c)}this.setMode=a,this.render=s,this.renderInstances=l}function bot(e,t,r){let n;function i(){if(n!==void 0)return n;if(t.has("EXT_texture_filter_anisotropic")===!0){let _=t.get("EXT_texture_filter_anisotropic");n=e.getParameter(_.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n}function o(_){if(_==="highp"){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";_="mediump"}return _==="mediump"&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}let a=typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext,s=r.precision!==void 0?r.precision:"highp",l=o(s);l!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",l,"instead."),s=l);let u=a||t.has("WEBGL_draw_buffers"),d=r.logarithmicDepthBuffer===!0,c=e.getParameter(34930),h=e.getParameter(35660),f=e.getParameter(3379),m=e.getParameter(34076),p=e.getParameter(34921),g=e.getParameter(36347),v=e.getParameter(36348),b=e.getParameter(36349),y=h>0,x=a||t.has("OES_texture_float"),S=y&&x,w=a?e.getParameter(36183):0;return{isWebGL2:a,drawBuffers:u,getMaxAnisotropy:i,getMaxPrecision:o,precision:s,logarithmicDepthBuffer:d,maxTextures:c,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:m,maxAttributes:p,maxVertexUniforms:g,maxVaryings:v,maxFragmentUniforms:b,vertexTextures:y,floatFragmentTextures:x,floatVertexTextures:S,maxSamples:w}}function xot(e){let t=this,r=null,n=0,i=!1,o=!1,a=new Hs,s=new Ii,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(c,h){let f=c.length!==0||h||n!==0||i;return i=h,n=c.length,f},this.beginShadows=function(){o=!0,d(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(c,h){r=d(c,h,0)},this.setState=function(c,h,f){let m=c.clippingPlanes,p=c.clipIntersection,g=c.clipShadows,v=e.get(c);if(!i||m===null||m.length===0||o&&!g)o?d(null):u();else{let b=o?0:n,y=b*4,x=v.clippingState||null;l.value=x,x=d(m,h,y,f);for(let S=0;S!==y;++S)x[S]=r[S];v.clippingState=x,this.numIntersection=p?this.numPlanes:0,this.numPlanes+=b}};function u(){l.value!==r&&(l.value=r,l.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function d(c,h,f,m){let p=c!==null?c.length:0,g=null;if(p!==0){if(g=l.value,m!==!0||g===null){let v=f+p*4,b=h.matrixWorldInverse;s.getNormalMatrix(b),(g===null||g.length<v)&&(g=new Float32Array(v));for(let y=0,x=f;y!==p;++y,x+=4)a.copy(c[y]).applyMatrix4(b,s),a.normal.toArray(g,x),g[x+3]=a.constant}l.value=g,l.needsUpdate=!0}return t.numPlanes=p,t.numIntersection=0,g}}function wot(e){let t=new WeakMap;function r(a,s){return s===SN?a.mapping=qm:s===_N&&(a.mapping=Km),a}function n(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){let s=a.mapping;if(s===SN||s===_N)if(t.has(a)){let l=t.get(a).texture;return r(l,a.mapping)}else{let l=a.image;if(l&&l.height>0){let u=new krt(l.height/2);return u.fromEquirectangularTexture(e,a),t.set(a,u),a.addEventListener("dispose",i),r(u.texture,a.mapping)}else return null}}return a}function i(a){let s=a.target;s.removeEventListener("dispose",i);let l=t.get(s);l!==void 0&&(t.delete(s),l.dispose())}function o(){t=new WeakMap}return{get:n,dispose:o}}var B4=class extends lb{constructor(e=-1,t=1,r=1,n=-1,i=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=n,this.near=i,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,n,i,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=n,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,n=(this.top+this.bottom)/2,i=r-e,o=r+e,a=n+t,s=n-t;if(this.view!==null&&this.view.enabled){let l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=l*this.view.offsetX,o=i+l*this.view.width,a-=u*this.view.offsetY,s=a-u*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}},Fv=4,uq=[.125,.215,.35,.446,.526,.582],Xp=20,WD=new B4,cq=new Bt,qD=null,Up=(1+Math.sqrt(5))/2,Wg=1/Up,dq=[new F(1,1,1),new F(-1,1,1),new F(1,1,-1),new F(-1,1,-1),new F(0,Up,Wg),new F(0,Up,-Wg),new F(Wg,0,Up),new F(-Wg,0,Up),new F(Up,Wg,0),new F(-Up,Wg,0)],hq=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,n=100){qD=this._renderer.getRenderTarget(),this._setSize(256);let i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,r,n,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=mq(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=pq(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(qD),e.scissorTest=!1,_C(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===qm||e.mapping===Km?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),qD=this._renderer.getRenderTarget();let r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:yr,minFilter:yr,generateMipmaps:!1,type:Xm,format:qs,encoding:Zc,depthBuffer:!1},n=fq(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=fq(e,t,r);let{_lodMax:i}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Sot(i)),this._blurMaterial=_ot(i,e,t)}return n}_compileMaterial(e){let t=new Fa(this._lodPlanes[0],e);this._renderer.compile(t,WD)}_sceneToCubeUV(e,t,r,n){let i=new oa(90,1,t,r),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,u=s.toneMapping;s.getClearColor(cq),s.toneMapping=Qd,s.autoClear=!1;let d=new n_({name:"PMREM.Background",side:Po,depthWrite:!1,depthTest:!1}),c=new Fa(new Jc,d),h=!1,f=e.background;f?f.isColor&&(d.color.copy(f),e.background=null,h=!0):(d.color.copy(cq),h=!0);for(let m=0;m<6;m++){let p=m%3;p===0?(i.up.set(0,o[m],0),i.lookAt(a[m],0,0)):p===1?(i.up.set(0,0,o[m]),i.lookAt(0,a[m],0)):(i.up.set(0,o[m],0),i.lookAt(0,0,a[m]));let g=this._cubeSize;_C(n,p*g,m>2?g:0,g,g),s.setRenderTarget(n),h&&s.render(c,i),s.render(e,i)}c.geometry.dispose(),c.material.dispose(),s.toneMapping=u,s.autoClear=l,e.background=f}_textureToCubeUV(e,t){let r=this._renderer,n=e.mapping===qm||e.mapping===Km;n?(this._cubemapMaterial===null&&(this._cubemapMaterial=mq()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=pq());let i=n?this._cubemapMaterial:this._equirectMaterial,o=new Fa(this._lodPlanes[0],i),a=i.uniforms;a.envMap.value=e;let s=this._cubeSize;_C(t,0,0,3*s,2*s),r.setRenderTarget(t),r.render(o,WD)}_applyPMREM(e){let t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let n=1;n<this._lodPlanes.length;n++){let i=Math.sqrt(this._sigmas[n]*this._sigmas[n]-this._sigmas[n-1]*this._sigmas[n-1]),o=dq[(n-1)%dq.length];this._blur(e,n-1,n,i,o)}t.autoClear=r}_blur(e,t,r,n,i){let o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,n,"latitudinal",i),this._halfBlur(o,e,r,r,n,"longitudinal",i)}_halfBlur(e,t,r,n,i,o,a){let s=this._renderer,l=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let u=3,d=new Fa(this._lodPlanes[n],l),c=l.uniforms,h=this._sizeLods[r]-1,f=isFinite(i)?Math.PI/(2*h):2*Math.PI/(2*Xp-1),m=i/f,p=isFinite(i)?1+Math.floor(u*m):Xp;p>Xp&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${p} samples when the maximum is set to ${Xp}`);let g=[],v=0;for(let w=0;w<Xp;++w){let _=w/m,C=Math.exp(-_*_/2);g.push(C),w===0?v+=C:w<p&&(v+=2*C)}for(let w=0;w<g.length;w++)g[w]=g[w]/v;c.envMap.value=e.texture,c.samples.value=p,c.weights.value=g,c.latitudinal.value=o==="latitudinal",a&&(c.poleAxis.value=a);let{_lodMax:b}=this;c.dTheta.value=f,c.mipInt.value=b-r;let y=this._sizeLods[n],x=3*y*(n>b-Fv?n-b+Fv:0),S=4*(this._cubeSize-y);_C(t,x,S,3*y,2*y),s.setRenderTarget(t),s.render(d,WD)}};function Sot(e){let t=[],r=[],n=[],i=e,o=e-Fv+1+uq.length;for(let a=0;a<o;a++){let s=Math.pow(2,i);r.push(s);let l=1/s;a>e-Fv?l=uq[a-e+Fv-1]:a===0&&(l=0),n.push(l);let u=1/(s-2),d=-u,c=1+u,h=[d,d,c,d,c,c,d,d,c,c,d,c],f=6,m=6,p=3,g=2,v=1,b=new Float32Array(p*m*f),y=new Float32Array(g*m*f),x=new Float32Array(v*m*f);for(let w=0;w<f;w++){let _=w%3*2/3-1,C=w>2?0:-1,E=[_,C,0,_+2/3,C,0,_+2/3,C+1,0,_,C,0,_+2/3,C+1,0,_,C+1,0];b.set(E,p*m*w),y.set(h,g*m*w);let A=[w,w,w,w,w,w];x.set(A,v*m*w)}let S=new Nt;S.setAttribute("position",new Kt(b,p)),S.setAttribute("uv",new Kt(y,g)),S.setAttribute("faceIndex",new Kt(x,v)),t.push(S),i>Fv&&i--}return{lodPlanes:t,sizeLods:r,sigmas:n}}function fq(e,t,r){let n=new cn(e,t,r);return n.texture.mapping=t_,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function _C(e,t,r,n,i){e.viewport.set(t,r,n,i),e.scissor.set(t,r,n,i)}function _ot(e,t,r){let n=new Float32Array(Xp),i=new F(0,1,0);return new Sn({name:"SphericalGaussianBlur",defines:{n:Xp,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/r,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:F4(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Xi,depthTest:!1,depthWrite:!1})}function pq(){return new Sn({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:F4(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Xi,depthTest:!1,depthWrite:!1})}function mq(){return new Sn({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:F4(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Xi,depthTest:!1,depthWrite:!1})}function F4(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Cot(e){let t=new WeakMap,r=null;function n(s){if(s&&s.isTexture){let l=s.mapping,u=l===SN||l===_N,d=l===qm||l===Km;if(u||d)if(s.isRenderTargetTexture&&s.needsPMREMUpdate===!0){s.needsPMREMUpdate=!1;let c=t.get(s);return r===null&&(r=new hq(e)),c=u?r.fromEquirectangular(s,c):r.fromCubemap(s,c),t.set(s,c),c.texture}else{if(t.has(s))return t.get(s).texture;{let c=s.image;if(u&&c&&c.height>0||d&&c&&i(c)){r===null&&(r=new hq(e));let h=u?r.fromEquirectangular(s):r.fromCubemap(s);return t.set(s,h),s.addEventListener("dispose",o),h.texture}else return null}}}return s}function i(s){let l=0,u=6;for(let d=0;d<u;d++)s[d]!==void 0&&l++;return l===u}function o(s){let l=s.target;l.removeEventListener("dispose",o);let u=t.get(l);u!==void 0&&(t.delete(l),u.dispose())}function a(){t=new WeakMap,r!==null&&(r.dispose(),r=null)}return{get:n,dispose:a}}function Aot(e){let t={};function r(n){if(t[n]!==void 0)return t[n];let i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,i}return{has:function(n){return r(n)!==null},init:function(n){n.isWebGL2?r("EXT_color_buffer_float"):(r("WEBGL_depth_texture"),r("OES_texture_float"),r("OES_texture_half_float"),r("OES_texture_half_float_linear"),r("OES_standard_derivatives"),r("OES_element_index_uint"),r("OES_vertex_array_object"),r("ANGLE_instanced_arrays")),r("OES_texture_float_linear"),r("EXT_color_buffer_half_float"),r("WEBGL_multisampled_render_to_texture")},get:function(n){let i=r(n);return i===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),i}}}function Eot(e,t,r,n){let i={},o=new WeakMap;function a(c){let h=c.target;h.index!==null&&t.remove(h.index);for(let m in h.attributes)t.remove(h.attributes[m]);h.removeEventListener("dispose",a),delete i[h.id];let f=o.get(h);f&&(t.remove(f),o.delete(h)),n.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,r.memory.geometries--}function s(c,h){return i[h.id]===!0||(h.addEventListener("dispose",a),i[h.id]=!0,r.memory.geometries++),h}function l(c){let h=c.attributes;for(let m in h)t.update(h[m],34962);let f=c.morphAttributes;for(let m in f){let p=f[m];for(let g=0,v=p.length;g<v;g++)t.update(p[g],34962)}}function u(c){let h=[],f=c.index,m=c.attributes.position,p=0;if(f!==null){let b=f.array;p=f.version;for(let y=0,x=b.length;y<x;y+=3){let S=b[y+0],w=b[y+1],_=b[y+2];h.push(S,w,w,_,_,S)}}else{let b=m.array;p=m.version;for(let y=0,x=b.length/3-1;y<x;y+=3){let S=y+0,w=y+1,_=y+2;h.push(S,w,w,_,_,S)}}let g=new(mae(h)?hy:xae)(h,1);g.version=p;let v=o.get(c);v&&t.remove(v),o.set(c,g)}function d(c){let h=o.get(c);if(h){let f=c.index;f!==null&&h.version<f.version&&u(c)}else u(c);return o.get(c)}return{get:s,update:l,getWireframeAttribute:d}}function Mot(e,t,r,n){let i=n.isWebGL2,o;function a(h){o=h}let s,l;function u(h){s=h.type,l=h.bytesPerElement}function d(h,f){e.drawElements(o,f,s,h*l),r.update(f,o,1)}function c(h,f,m){if(m===0)return;let p,g;if(i)p=e,g="drawElementsInstanced";else if(p=t.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",p===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}p[g](o,f,s,h*l,m),r.update(f,o,m)}this.setMode=a,this.setIndex=u,this.render=d,this.renderInstances=c}function Pot(e){let t={geometries:0,textures:0},r={frame:0,calls:0,triangles:0,points:0,lines:0};function n(o,a,s){switch(r.calls++,a){case 4:r.triangles+=s*(o/3);break;case 1:r.lines+=s*(o/2);break;case 3:r.lines+=s*(o-1);break;case 2:r.lines+=s*o;break;case 0:r.points+=s*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function i(){r.frame++,r.calls=0,r.triangles=0,r.points=0,r.lines=0}return{memory:t,render:r,programs:null,autoReset:!0,reset:i,update:n}}function Tot(e,t){return e[0]-t[0]}function Oot(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Iot(e,t,r){let n={},i=new Float32Array(8),o=new WeakMap,a=new or,s=[];for(let u=0;u<8;u++)s[u]=[u,0];function l(u,d,c,h){let f=u.morphTargetInfluences;if(t.isWebGL2===!0){let m=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,p=m!==void 0?m.length:0,g=o.get(d);if(g===void 0||g.count!==p){let y=function(){T.dispose(),o.delete(d),d.removeEventListener("dispose",y)};g!==void 0&&g.texture.dispose();let x=d.morphAttributes.position!==void 0,S=d.morphAttributes.normal!==void 0,w=d.morphAttributes.color!==void 0,_=d.morphAttributes.position||[],C=d.morphAttributes.normal||[],E=d.morphAttributes.color||[],A=0;x===!0&&(A=1),S===!0&&(A=2),w===!0&&(A=3);let M=d.attributes.position.count*A,I=1;M>t.maxTextureSize&&(I=Math.ceil(M/t.maxTextureSize),M=t.maxTextureSize);let O=new Float32Array(M*I*4*p),T=new bae(O,M,I,p);T.type=Ba,T.needsUpdate=!0;let D=A*4;for(let N=0;N<p;N++){let k=_[N],R=C[N],z=E[N],j=M*I*4*N;for(let $=0;$<k.count;$++){let U=$*D;x===!0&&(a.fromBufferAttribute(k,$),O[j+U+0]=a.x,O[j+U+1]=a.y,O[j+U+2]=a.z,O[j+U+3]=0),S===!0&&(a.fromBufferAttribute(R,$),O[j+U+4]=a.x,O[j+U+5]=a.y,O[j+U+6]=a.z,O[j+U+7]=0),w===!0&&(a.fromBufferAttribute(z,$),O[j+U+8]=a.x,O[j+U+9]=a.y,O[j+U+10]=a.z,O[j+U+11]=z.itemSize===4?a.w:1)}}g={count:p,texture:T,size:new ue(M,I)},o.set(d,g),d.addEventListener("dispose",y)}let v=0;for(let y=0;y<f.length;y++)v+=f[y];let b=d.morphTargetsRelative?1:1-v;h.getUniforms().setValue(e,"morphTargetBaseInfluence",b),h.getUniforms().setValue(e,"morphTargetInfluences",f),h.getUniforms().setValue(e,"morphTargetsTexture",g.texture,r),h.getUniforms().setValue(e,"morphTargetsTextureSize",g.size)}else{let m=f===void 0?0:f.length,p=n[d.id];if(p===void 0||p.length!==m){p=[];for(let x=0;x<m;x++)p[x]=[x,0];n[d.id]=p}for(let x=0;x<m;x++){let S=p[x];S[0]=x,S[1]=f[x]}p.sort(Oot);for(let x=0;x<8;x++)x<m&&p[x][1]?(s[x][0]=p[x][0],s[x][1]=p[x][1]):(s[x][0]=Number.MAX_SAFE_INTEGER,s[x][1]=0);s.sort(Tot);let g=d.morphAttributes.position,v=d.morphAttributes.normal,b=0;for(let x=0;x<8;x++){let S=s[x],w=S[0],_=S[1];w!==Number.MAX_SAFE_INTEGER&&_?(g&&d.getAttribute("morphTarget"+x)!==g[w]&&d.setAttribute("morphTarget"+x,g[w]),v&&d.getAttribute("morphNormal"+x)!==v[w]&&d.setAttribute("morphNormal"+x,v[w]),i[x]=_,b+=_):(g&&d.hasAttribute("morphTarget"+x)===!0&&d.deleteAttribute("morphTarget"+x),v&&d.hasAttribute("morphNormal"+x)===!0&&d.deleteAttribute("morphNormal"+x),i[x]=0)}let y=d.morphTargetsRelative?1:1-b;h.getUniforms().setValue(e,"morphTargetBaseInfluence",y),h.getUniforms().setValue(e,"morphTargetInfluences",i)}}return{update:l}}function Dot(e,t,r,n){let i=new WeakMap;function o(l){let u=n.render.frame,d=l.geometry,c=t.get(l,d);return i.get(c)!==u&&(t.update(c),i.set(c,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",s)===!1&&l.addEventListener("dispose",s),r.update(l.instanceMatrix,34962),l.instanceColor!==null&&r.update(l.instanceColor,34962)),c}function a(){i=new WeakMap}function s(l){let u=l.target;u.removeEventListener("dispose",s),r.remove(u.instanceMatrix),u.instanceColor!==null&&r.remove(u.instanceColor)}return{update:o,dispose:a}}var _ae=new co,Cae=new bae,Aae=new yrt,Eae=new N4,gq=[],vq=[],yq=new Float32Array(16),bq=new Float32Array(9),xq=new Float32Array(4);function ub(e,t,r){let n=e[0];if(n<=0||n>0)return e;let i=t*r,o=gq[i];if(o===void 0&&(o=new Float32Array(i),gq[i]=o),t!==0){n.toArray(o,0);for(let a=1,s=0;a!==t;++a)s+=r,e[a].toArray(o,s)}return o}function fo(e,t){if(e.length!==t.length)return!1;for(let r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0}function po(e,t){for(let r=0,n=t.length;r<n;r++)e[r]=t[r]}function sO(e,t){let r=vq[t];r===void 0&&(r=new Int32Array(t),vq[t]=r);for(let n=0;n!==t;++n)r[n]=e.allocateTextureUnit();return r}function Rot(e,t){let r=this.cache;r[0]!==t&&(e.uniform1f(this.addr,t),r[0]=t)}function kot(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(fo(r,t))return;e.uniform2fv(this.addr,t),po(r,t)}}function Lot(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else if(t.r!==void 0)(r[0]!==t.r||r[1]!==t.g||r[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),r[0]=t.r,r[1]=t.g,r[2]=t.b);else{if(fo(r,t))return;e.uniform3fv(this.addr,t),po(r,t)}}function Not(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(fo(r,t))return;e.uniform4fv(this.addr,t),po(r,t)}}function zot(e,t){let r=this.cache,n=t.elements;if(n===void 0){if(fo(r,t))return;e.uniformMatrix2fv(this.addr,!1,t),po(r,t)}else{if(fo(r,n))return;xq.set(n),e.uniformMatrix2fv(this.addr,!1,xq),po(r,n)}}function Bot(e,t){let r=this.cache,n=t.elements;if(n===void 0){if(fo(r,t))return;e.uniformMatrix3fv(this.addr,!1,t),po(r,t)}else{if(fo(r,n))return;bq.set(n),e.uniformMatrix3fv(this.addr,!1,bq),po(r,n)}}function Fot(e,t){let r=this.cache,n=t.elements;if(n===void 0){if(fo(r,t))return;e.uniformMatrix4fv(this.addr,!1,t),po(r,t)}else{if(fo(r,n))return;yq.set(n),e.uniformMatrix4fv(this.addr,!1,yq),po(r,n)}}function jot(e,t){let r=this.cache;r[0]!==t&&(e.uniform1i(this.addr,t),r[0]=t)}function Uot(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y)&&(e.uniform2i(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(fo(r,t))return;e.uniform2iv(this.addr,t),po(r,t)}}function $ot(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(e.uniform3i(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else{if(fo(r,t))return;e.uniform3iv(this.addr,t),po(r,t)}}function Vot(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(fo(r,t))return;e.uniform4iv(this.addr,t),po(r,t)}}function Hot(e,t){let r=this.cache;r[0]!==t&&(e.uniform1ui(this.addr,t),r[0]=t)}function Got(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y)&&(e.uniform2ui(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(fo(r,t))return;e.uniform2uiv(this.addr,t),po(r,t)}}function Wot(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(e.uniform3ui(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else{if(fo(r,t))return;e.uniform3uiv(this.addr,t),po(r,t)}}function qot(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(fo(r,t))return;e.uniform4uiv(this.addr,t),po(r,t)}}function Kot(e,t,r){let n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(e.uniform1i(this.addr,i),n[0]=i),r.setTexture2D(t||_ae,i)}function Xot(e,t,r){let n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(e.uniform1i(this.addr,i),n[0]=i),r.setTexture3D(t||Aae,i)}function Yot(e,t,r){let n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(e.uniform1i(this.addr,i),n[0]=i),r.setTextureCube(t||Eae,i)}function Qot(e,t,r){let n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(e.uniform1i(this.addr,i),n[0]=i),r.setTexture2DArray(t||Cae,i)}function Zot(e){switch(e){case 5126:return Rot;case 35664:return kot;case 35665:return Lot;case 35666:return Not;case 35674:return zot;case 35675:return Bot;case 35676:return Fot;case 5124:case 35670:return jot;case 35667:case 35671:return Uot;case 35668:case 35672:return $ot;case 35669:case 35673:return Vot;case 5125:return Hot;case 36294:return Got;case 36295:return Wot;case 36296:return qot;case 35678:case 36198:case 36298:case 36306:case 35682:return Kot;case 35679:case 36299:case 36307:return Xot;case 35680:case 36300:case 36308:case 36293:return Yot;case 36289:case 36303:case 36311:case 36292:return Qot}}function Jot(e,t){e.uniform1fv(this.addr,t)}function eat(e,t){let r=ub(t,this.size,2);e.uniform2fv(this.addr,r)}function tat(e,t){let r=ub(t,this.size,3);e.uniform3fv(this.addr,r)}function rat(e,t){let r=ub(t,this.size,4);e.uniform4fv(this.addr,r)}function nat(e,t){let r=ub(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,r)}function iat(e,t){let r=ub(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,r)}function oat(e,t){let r=ub(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,r)}function aat(e,t){e.uniform1iv(this.addr,t)}function sat(e,t){e.uniform2iv(this.addr,t)}function lat(e,t){e.uniform3iv(this.addr,t)}function uat(e,t){e.uniform4iv(this.addr,t)}function cat(e,t){e.uniform1uiv(this.addr,t)}function dat(e,t){e.uniform2uiv(this.addr,t)}function hat(e,t){e.uniform3uiv(this.addr,t)}function fat(e,t){e.uniform4uiv(this.addr,t)}function pat(e,t,r){let n=this.cache,i=t.length,o=sO(r,i);fo(n,o)||(e.uniform1iv(this.addr,o),po(n,o));for(let a=0;a!==i;++a)r.setTexture2D(t[a]||_ae,o[a])}function mat(e,t,r){let n=this.cache,i=t.length,o=sO(r,i);fo(n,o)||(e.uniform1iv(this.addr,o),po(n,o));for(let a=0;a!==i;++a)r.setTexture3D(t[a]||Aae,o[a])}function gat(e,t,r){let n=this.cache,i=t.length,o=sO(r,i);fo(n,o)||(e.uniform1iv(this.addr,o),po(n,o));for(let a=0;a!==i;++a)r.setTextureCube(t[a]||Eae,o[a])}function vat(e,t,r){let n=this.cache,i=t.length,o=sO(r,i);fo(n,o)||(e.uniform1iv(this.addr,o),po(n,o));for(let a=0;a!==i;++a)r.setTexture2DArray(t[a]||Cae,o[a])}function yat(e){switch(e){case 5126:return Jot;case 35664:return eat;case 35665:return tat;case 35666:return rat;case 35674:return nat;case 35675:return iat;case 35676:return oat;case 5124:case 35670:return aat;case 35667:case 35671:return sat;case 35668:case 35672:return lat;case 35669:case 35673:return uat;case 5125:return cat;case 36294:return dat;case 36295:return hat;case 36296:return fat;case 35678:case 36198:case 36298:case 36306:case 35682:return pat;case 35679:case 36299:case 36307:return mat;case 35680:case 36300:case 36308:case 36293:return gat;case 36289:case 36303:case 36311:case 36292:return vat}}var bat=class{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=Zot(t.type)}},xat=class{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=yat(t.type)}},wat=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){let n=this.seq;for(let i=0,o=n.length;i!==o;++i){let a=n[i];a.setValue(e,t[a.id],r)}}},KD=/(\w+)(\])?(\[|\.)?/g;function wq(e,t){e.seq.push(t),e.map[t.id]=t}function Sat(e,t,r){let n=e.name,i=n.length;for(KD.lastIndex=0;;){let o=KD.exec(n),a=KD.lastIndex,s=o[1],l=o[2]==="]",u=o[3];if(l&&(s=s|0),u===void 0||u==="["&&a+2===i){wq(r,u===void 0?new bat(s,e,t):new xat(s,e,t));break}else{let d=r.map[s];d===void 0&&(d=new wat(s),wq(r,d)),r=d}}}var KA=class{constructor(e,t){this.seq=[],this.map={};let r=e.getProgramParameter(t,35718);for(let n=0;n<r;++n){let i=e.getActiveUniform(t,n),o=e.getUniformLocation(t,i.name);Sat(i,o,this)}}setValue(e,t,r,n){let i=this.map[t];i!==void 0&&i.setValue(e,r,n)}setOptional(e,t,r){let n=t[r];n!==void 0&&this.setValue(e,r,n)}static upload(e,t,r,n){for(let i=0,o=t.length;i!==o;++i){let a=t[i],s=r[a.id];s.needsUpdate!==!1&&a.setValue(e,s.value,n)}}static seqWithValue(e,t){let r=[];for(let n=0,i=e.length;n!==i;++n){let o=e[n];o.id in t&&r.push(o)}return r}};function Sq(e,t,r){let n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),n}var _at=0;function Cat(e,t){let r=e.split(`
`),n=[],i=Math.max(t-6,0),o=Math.min(t+6,r.length);for(let a=i;a<o;a++){let s=a+1;n.push(`${s===t?">":" "} ${s}: ${r[a]}`)}return n.join(`
`)}function Aat(e){switch(e){case Zc:return["Linear","( value )"];case ir:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function _q(e,t,r){let n=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();if(n&&i==="")return"";let o=/ERROR: 0:(\d+)/.exec(i);if(o){let a=parseInt(o[1]);return r.toUpperCase()+`

`+i+`

`+Cat(e.getShaderSource(t),a)}else return i}function Eat(e,t){let r=Aat(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function Mat(e,t){let r;switch(t){case Rtt:r="Linear";break;case ktt:r="Reinhard";break;case Ltt:r="OptimizedCineon";break;case Ntt:r="ACESFilmic";break;case ztt:r="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),r="Linear"}return"vec3 "+e+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function Pat(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||e.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ux).join(`
`)}function Tat(e){let t=[];for(let r in e){let n=e[r];n!==!1&&t.push("#define "+r+" "+n)}return t.join(`
`)}function Oat(e,t){let r={},n=e.getProgramParameter(t,35721);for(let i=0;i<n;i++){let o=e.getActiveAttrib(t,i),a=o.name,s=1;o.type===35674&&(s=2),o.type===35675&&(s=3),o.type===35676&&(s=4),r[a]={type:o.type,location:e.getAttribLocation(t,a),locationSize:s}}return r}function Ux(e){return e!==""}function Cq(e,t){let r=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,r).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Aq(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var Iat=/^[ \t]*#include +<([\w\d./]+)>/gm;function PN(e){return e.replace(Iat,Dat)}function Dat(e,t){let r=sr[t];if(r===void 0)throw new Error("Can not resolve #include <"+t+">");return PN(r)}var Rat=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Eq(e){return e.replace(Rat,kat)}function kat(e,t,r,n){let i="";for(let o=parseInt(t);o<parseInt(r);o++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function Mq(e){let t="precision "+e.precision+` float;
precision `+e.precision+" int;";return e.precision==="highp"?t+=`
#define HIGH_PRECISION`:e.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:e.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function Lat(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===I4?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===dtt?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===jx&&(t="SHADOWMAP_TYPE_VSM"),t}function Nat(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case qm:case Km:t="ENVMAP_TYPE_CUBE";break;case t_:t="ENVMAP_TYPE_CUBE_UV";break}return t}function zat(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case Km:t="ENVMAP_MODE_REFRACTION";break}return t}function Bat(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case sae:t="ENVMAP_BLENDING_MULTIPLY";break;case Itt:t="ENVMAP_BLENDING_MIX";break;case Dtt:t="ENVMAP_BLENDING_ADD";break}return t}function Fat(e){let t=e.envMapCubeUVHeight;if(t===null)return null;let r=Math.log2(t)-2,n=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,r),7*16)),texelHeight:n,maxMip:r}}function jat(e,t,r,n){let i=e.getContext(),o=r.defines,a=r.vertexShader,s=r.fragmentShader,l=Lat(r),u=Nat(r),d=zat(r),c=Bat(r),h=Fat(r),f=r.isWebGL2?"":Pat(r),m=Tat(o),p=i.createProgram(),g,v,b=r.glslVersion?"#version "+r.glslVersion+`
`:"";r.isRawShaderMaterial?(g=[m].filter(Ux).join(`
`),g.length>0&&(g+=`
`),v=[f,m].filter(Ux).join(`
`),v.length>0&&(v+=`
`)):(g=[Mq(r),"#define SHADER_NAME "+r.shaderName,m,r.instancing?"#define USE_INSTANCING":"",r.instancingColor?"#define USE_INSTANCING_COLOR":"",r.supportsVertexTextures?"#define VERTEX_TEXTURES":"",r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+d:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",r.specularColorMap?"#define USE_SPECULARCOLORMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.sheenColorMap?"#define USE_SHEENCOLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&r.flatShading===!1?"#define USE_MORPHNORMALS":"",r.morphColors&&r.isWebGL2?"#define USE_MORPHCOLORS":"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+r.morphTextureStride:"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_COUNT "+r.morphTargetsCount:"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+l:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ux).join(`
`),v=[f,Mq(r),"#define SHADER_NAME "+r.shaderName,m,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+u:"",r.envMap?"#define "+d:"",r.envMap?"#define "+c:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoat?"#define USE_CLEARCOAT":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescence?"#define USE_IRIDESCENCE":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",r.specularColorMap?"#define USE_SPECULARCOLORMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaTest?"#define USE_ALPHATEST":"",r.sheen?"#define USE_SHEEN":"",r.sheenColorMap?"#define USE_SHEENCOLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors||r.instancingColor?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+l:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",r.toneMapping!==Qd?"#define TONE_MAPPING":"",r.toneMapping!==Qd?sr.tonemapping_pars_fragment:"",r.toneMapping!==Qd?Mat("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.opaque?"#define OPAQUE":"",sr.encodings_pars_fragment,Eat("linearToOutputTexel",r.outputEncoding),r.useDepthPacking?"#define DEPTH_PACKING "+r.depthPacking:"",`
`].filter(Ux).join(`
`)),a=PN(a),a=Cq(a,r),a=Aq(a,r),s=PN(s),s=Cq(s,r),s=Aq(s,r),a=Eq(a),s=Eq(s),r.isWebGL2&&r.isRawShaderMaterial!==!0&&(b=`#version 300 es
`,g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,v=["#define varying in",r.glslVersion===Q9?"":"layout(location = 0) out highp vec4 pc_fragColor;",r.glslVersion===Q9?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);let y=b+g+a,x=b+v+s,S=Sq(i,35633,y),w=Sq(i,35632,x);if(i.attachShader(p,S),i.attachShader(p,w),r.index0AttributeName!==void 0?i.bindAttribLocation(p,0,r.index0AttributeName):r.morphTargets===!0&&i.bindAttribLocation(p,0,"position"),i.linkProgram(p),e.debug.checkShaderErrors){let E=i.getProgramInfoLog(p).trim(),A=i.getShaderInfoLog(S).trim(),M=i.getShaderInfoLog(w).trim(),I=!0,O=!0;if(i.getProgramParameter(p,35714)===!1){I=!1;let T=_q(i,S,"vertex"),D=_q(i,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(p,35715)+`

Program Info Log: `+E+`
`+T+`
`+D)}else E!==""?console.warn("THREE.WebGLProgram: Program Info Log:",E):(A===""||M==="")&&(O=!1);O&&(this.diagnostics={runnable:I,programLog:E,vertexShader:{log:A,prefix:g},fragmentShader:{log:M,prefix:v}})}i.deleteShader(S),i.deleteShader(w);let _;this.getUniforms=function(){return _===void 0&&(_=new KA(i,p)),_};let C;return this.getAttributes=function(){return C===void 0&&(C=Oat(i,p)),C},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(p),this.program=void 0},this.name=r.shaderName,this.id=_at++,this.cacheKey=t,this.usedTimes=1,this.program=p,this.vertexShader=S,this.fragmentShader=w,this}var Uat=0,$at=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,r=e.fragmentShader,n=this._getShaderStage(t),i=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(n)===!1&&(o.add(n),n.usedTimes++),o.has(i)===!1&&(o.add(i),i.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){let t=this.shaderCache,r=t.get(e);return r===void 0&&(r=new Vat(e),t.set(e,r)),r}},Vat=class{constructor(e){this.id=Uat++,this.code=e,this.usedTimes=0}};function Hat(e,t,r,n,i,o,a){let s=new L4,l=new $at,u=[],d=i.isWebGL2,c=i.logarithmicDepthBuffer,h=i.vertexTextures,f=i.precision,m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function p(C,E,A,M,I){let O=M.fog,T=I.geometry,D=C.isMeshStandardMaterial?M.environment:null,N=(C.isMeshStandardMaterial?r:t).get(C.envMap||D),k=N&&N.mapping===t_?N.image.height:null,R=m[C.type];C.precision!==null&&(f=i.getMaxPrecision(C.precision),f!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",f,"instead."));let z=T.morphAttributes.position||T.morphAttributes.normal||T.morphAttributes.color,j=z!==void 0?z.length:0,$=0;T.morphAttributes.position!==void 0&&($=1),T.morphAttributes.normal!==void 0&&($=2),T.morphAttributes.color!==void 0&&($=3);let U,H,V,Q;if(R){let te=bc[R];U=te.vertexShader,H=te.fragmentShader}else U=C.vertexShader,H=C.fragmentShader,l.update(C),V=l.getVertexShaderID(C),Q=l.getFragmentShaderID(C);let X=e.getRenderTarget(),ne=C.alphaTest>0,J=C.clearcoat>0,W=C.iridescence>0;return{isWebGL2:d,shaderID:R,shaderName:C.type,vertexShader:U,fragmentShader:H,defines:C.defines,customVertexShaderID:V,customFragmentShaderID:Q,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:f,instancing:I.isInstancedMesh===!0,instancingColor:I.isInstancedMesh===!0&&I.instanceColor!==null,supportsVertexTextures:h,outputEncoding:X===null?e.outputEncoding:X.isXRRenderTarget===!0?X.texture.encoding:Zc,map:!!C.map,matcap:!!C.matcap,envMap:!!N,envMapMode:N&&N.mapping,envMapCubeUVHeight:k,lightMap:!!C.lightMap,aoMap:!!C.aoMap,emissiveMap:!!C.emissiveMap,bumpMap:!!C.bumpMap,normalMap:!!C.normalMap,objectSpaceNormalMap:C.normalMapType===ert,tangentSpaceNormalMap:C.normalMapType===Jtt,decodeVideoTexture:!!C.map&&C.map.isVideoTexture===!0&&C.map.encoding===ir,clearcoat:J,clearcoatMap:J&&!!C.clearcoatMap,clearcoatRoughnessMap:J&&!!C.clearcoatRoughnessMap,clearcoatNormalMap:J&&!!C.clearcoatNormalMap,iridescence:W,iridescenceMap:W&&!!C.iridescenceMap,iridescenceThicknessMap:W&&!!C.iridescenceThicknessMap,displacementMap:!!C.displacementMap,roughnessMap:!!C.roughnessMap,metalnessMap:!!C.metalnessMap,specularMap:!!C.specularMap,specularIntensityMap:!!C.specularIntensityMap,specularColorMap:!!C.specularColorMap,opaque:C.transparent===!1&&C.blending===Am,alphaMap:!!C.alphaMap,alphaTest:ne,gradientMap:!!C.gradientMap,sheen:C.sheen>0,sheenColorMap:!!C.sheenColorMap,sheenRoughnessMap:!!C.sheenRoughnessMap,transmission:C.transmission>0,transmissionMap:!!C.transmissionMap,thicknessMap:!!C.thicknessMap,combine:C.combine,vertexTangents:!!C.normalMap&&!!T.attributes.tangent,vertexColors:C.vertexColors,vertexAlphas:C.vertexColors===!0&&!!T.attributes.color&&T.attributes.color.itemSize===4,vertexUvs:!!C.map||!!C.bumpMap||!!C.normalMap||!!C.specularMap||!!C.alphaMap||!!C.emissiveMap||!!C.roughnessMap||!!C.metalnessMap||!!C.clearcoatMap||!!C.clearcoatRoughnessMap||!!C.clearcoatNormalMap||!!C.iridescenceMap||!!C.iridescenceThicknessMap||!!C.displacementMap||!!C.transmissionMap||!!C.thicknessMap||!!C.specularIntensityMap||!!C.specularColorMap||!!C.sheenColorMap||!!C.sheenRoughnessMap,uvsVertexOnly:!(C.map||C.bumpMap||C.normalMap||C.specularMap||C.alphaMap||C.emissiveMap||C.roughnessMap||C.metalnessMap||C.clearcoatNormalMap||C.iridescenceMap||C.iridescenceThicknessMap||C.transmission>0||C.transmissionMap||C.thicknessMap||C.specularIntensityMap||C.specularColorMap||C.sheen>0||C.sheenColorMap||C.sheenRoughnessMap)&&!!C.displacementMap,fog:!!O,useFog:C.fog===!0,fogExp2:O&&O.isFogExp2,flatShading:!!C.flatShading,sizeAttenuation:C.sizeAttenuation,logarithmicDepthBuffer:c,skinning:I.isSkinnedMesh===!0,morphTargets:T.morphAttributes.position!==void 0,morphNormals:T.morphAttributes.normal!==void 0,morphColors:T.morphAttributes.color!==void 0,morphTargetsCount:j,morphTextureStride:$,numDirLights:E.directional.length,numPointLights:E.point.length,numSpotLights:E.spot.length,numSpotLightMaps:E.spotLightMap.length,numRectAreaLights:E.rectArea.length,numHemiLights:E.hemi.length,numDirLightShadows:E.directionalShadowMap.length,numPointLightShadows:E.pointShadowMap.length,numSpotLightShadows:E.spotShadowMap.length,numSpotLightShadowsWithMaps:E.numSpotLightShadowsWithMaps,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:C.dithering,shadowMapEnabled:e.shadowMap.enabled&&A.length>0,shadowMapType:e.shadowMap.type,toneMapping:C.toneMapped?e.toneMapping:Qd,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===ms,flipSided:C.side===Po,useDepthPacking:!!C.depthPacking,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionDerivatives:C.extensions&&C.extensions.derivatives,extensionFragDepth:C.extensions&&C.extensions.fragDepth,extensionDrawBuffers:C.extensions&&C.extensions.drawBuffers,extensionShaderTextureLOD:C.extensions&&C.extensions.shaderTextureLOD,rendererExtensionFragDepth:d||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||n.has("EXT_shader_texture_lod"),customProgramCacheKey:C.customProgramCacheKey()}}function g(C){let E=[];if(C.shaderID?E.push(C.shaderID):(E.push(C.customVertexShaderID),E.push(C.customFragmentShaderID)),C.defines!==void 0)for(let A in C.defines)E.push(A),E.push(C.defines[A]);return C.isRawShaderMaterial===!1&&(v(E,C),b(E,C),E.push(e.outputEncoding)),E.push(C.customProgramCacheKey),E.join()}function v(C,E){C.push(E.precision),C.push(E.outputEncoding),C.push(E.envMapMode),C.push(E.envMapCubeUVHeight),C.push(E.combine),C.push(E.vertexUvs),C.push(E.fogExp2),C.push(E.sizeAttenuation),C.push(E.morphTargetsCount),C.push(E.morphAttributeCount),C.push(E.numDirLights),C.push(E.numPointLights),C.push(E.numSpotLights),C.push(E.numSpotLightMaps),C.push(E.numHemiLights),C.push(E.numRectAreaLights),C.push(E.numDirLightShadows),C.push(E.numPointLightShadows),C.push(E.numSpotLightShadows),C.push(E.numSpotLightShadowsWithMaps),C.push(E.shadowMapType),C.push(E.toneMapping),C.push(E.numClippingPlanes),C.push(E.numClipIntersection),C.push(E.depthPacking)}function b(C,E){s.disableAll(),E.isWebGL2&&s.enable(0),E.supportsVertexTextures&&s.enable(1),E.instancing&&s.enable(2),E.instancingColor&&s.enable(3),E.map&&s.enable(4),E.matcap&&s.enable(5),E.envMap&&s.enable(6),E.lightMap&&s.enable(7),E.aoMap&&s.enable(8),E.emissiveMap&&s.enable(9),E.bumpMap&&s.enable(10),E.normalMap&&s.enable(11),E.objectSpaceNormalMap&&s.enable(12),E.tangentSpaceNormalMap&&s.enable(13),E.clearcoat&&s.enable(14),E.clearcoatMap&&s.enable(15),E.clearcoatRoughnessMap&&s.enable(16),E.clearcoatNormalMap&&s.enable(17),E.iridescence&&s.enable(18),E.iridescenceMap&&s.enable(19),E.iridescenceThicknessMap&&s.enable(20),E.displacementMap&&s.enable(21),E.specularMap&&s.enable(22),E.roughnessMap&&s.enable(23),E.metalnessMap&&s.enable(24),E.gradientMap&&s.enable(25),E.alphaMap&&s.enable(26),E.alphaTest&&s.enable(27),E.vertexColors&&s.enable(28),E.vertexAlphas&&s.enable(29),E.vertexUvs&&s.enable(30),E.vertexTangents&&s.enable(31),E.uvsVertexOnly&&s.enable(32),C.push(s.mask),s.disableAll(),E.fog&&s.enable(0),E.useFog&&s.enable(1),E.flatShading&&s.enable(2),E.logarithmicDepthBuffer&&s.enable(3),E.skinning&&s.enable(4),E.morphTargets&&s.enable(5),E.morphNormals&&s.enable(6),E.morphColors&&s.enable(7),E.premultipliedAlpha&&s.enable(8),E.shadowMapEnabled&&s.enable(9),E.physicallyCorrectLights&&s.enable(10),E.doubleSided&&s.enable(11),E.flipSided&&s.enable(12),E.useDepthPacking&&s.enable(13),E.dithering&&s.enable(14),E.specularIntensityMap&&s.enable(15),E.specularColorMap&&s.enable(16),E.transmission&&s.enable(17),E.transmissionMap&&s.enable(18),E.thicknessMap&&s.enable(19),E.sheen&&s.enable(20),E.sheenColorMap&&s.enable(21),E.sheenRoughnessMap&&s.enable(22),E.decodeVideoTexture&&s.enable(23),E.opaque&&s.enable(24),C.push(s.mask)}function y(C){let E=m[C.type],A;if(E){let M=bc[E];A=sb.clone(M.uniforms)}else A=C.uniforms;return A}function x(C,E){let A;for(let M=0,I=u.length;M<I;M++){let O=u[M];if(O.cacheKey===E){A=O,++A.usedTimes;break}}return A===void 0&&(A=new jat(e,E,C,o),u.push(A)),A}function S(C){if(--C.usedTimes===0){let E=u.indexOf(C);u[E]=u[u.length-1],u.pop(),C.destroy()}}function w(C){l.remove(C)}function _(){l.dispose()}return{getParameters:p,getProgramCacheKey:g,getUniforms:y,acquireProgram:x,releaseProgram:S,releaseShaderCache:w,programs:u,dispose:_}}function Gat(){let e=new WeakMap;function t(o){let a=e.get(o);return a===void 0&&(a={},e.set(o,a)),a}function r(o){e.delete(o)}function n(o,a,s){e.get(o)[a]=s}function i(){e=new WeakMap}return{get:t,remove:r,update:n,dispose:i}}function Wat(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Pq(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Tq(){let e=[],t=0,r=[],n=[],i=[];function o(){t=0,r.length=0,n.length=0,i.length=0}function a(c,h,f,m,p,g){let v=e[t];return v===void 0?(v={id:c.id,object:c,geometry:h,material:f,groupOrder:m,renderOrder:c.renderOrder,z:p,group:g},e[t]=v):(v.id=c.id,v.object=c,v.geometry=h,v.material=f,v.groupOrder=m,v.renderOrder=c.renderOrder,v.z=p,v.group=g),t++,v}function s(c,h,f,m,p,g){let v=a(c,h,f,m,p,g);f.transmission>0?n.push(v):f.transparent===!0?i.push(v):r.push(v)}function l(c,h,f,m,p,g){let v=a(c,h,f,m,p,g);f.transmission>0?n.unshift(v):f.transparent===!0?i.unshift(v):r.unshift(v)}function u(c,h){r.length>1&&r.sort(c||Wat),n.length>1&&n.sort(h||Pq),i.length>1&&i.sort(h||Pq)}function d(){for(let c=t,h=e.length;c<h;c++){let f=e[c];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:r,transmissive:n,transparent:i,init:o,push:s,unshift:l,finish:d,sort:u}}function qat(){let e=new WeakMap;function t(n,i){let o=e.get(n),a;return o===void 0?(a=new Tq,e.set(n,[a])):i>=o.length?(a=new Tq,o.push(a)):a=o[i],a}function r(){e=new WeakMap}return{get:t,dispose:r}}function Kat(){let e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let r;switch(t.type){case"DirectionalLight":r={direction:new F,color:new Bt};break;case"SpotLight":r={position:new F,direction:new F,color:new Bt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new F,color:new Bt,distance:0,decay:0};break;case"HemisphereLight":r={direction:new F,skyColor:new Bt,groundColor:new Bt};break;case"RectAreaLight":r={color:new Bt,position:new F,halfWidth:new F,halfHeight:new F};break}return e[t.id]=r,r}}}function Xat(){let e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let r;switch(t.type){case"DirectionalLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ue};break;case"SpotLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ue};break;case"PointLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ue,shadowCameraNear:1,shadowCameraFar:1e3};break}return e[t.id]=r,r}}}var Yat=0;function Qat(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function Zat(e,t){let r=new Kat,n=Xat(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let d=0;d<9;d++)i.probe.push(new F);let o=new F,a=new qe,s=new qe;function l(d,c){let h=0,f=0,m=0;for(let M=0;M<9;M++)i.probe[M].set(0,0,0);let p=0,g=0,v=0,b=0,y=0,x=0,S=0,w=0,_=0,C=0;d.sort(Qat);let E=c!==!0?Math.PI:1;for(let M=0,I=d.length;M<I;M++){let O=d[M],T=O.color,D=O.intensity,N=O.distance,k=O.shadow&&O.shadow.map?O.shadow.map.texture:null;if(O.isAmbientLight)h+=T.r*D*E,f+=T.g*D*E,m+=T.b*D*E;else if(O.isLightProbe)for(let R=0;R<9;R++)i.probe[R].addScaledVector(O.sh.coefficients[R],D);else if(O.isDirectionalLight){let R=r.get(O);if(R.color.copy(O.color).multiplyScalar(O.intensity*E),O.castShadow){let z=O.shadow,j=n.get(O);j.shadowBias=z.bias,j.shadowNormalBias=z.normalBias,j.shadowRadius=z.radius,j.shadowMapSize=z.mapSize,i.directionalShadow[p]=j,i.directionalShadowMap[p]=k,i.directionalShadowMatrix[p]=O.shadow.matrix,x++}i.directional[p]=R,p++}else if(O.isSpotLight){let R=r.get(O);R.position.setFromMatrixPosition(O.matrixWorld),R.color.copy(T).multiplyScalar(D*E),R.distance=N,R.coneCos=Math.cos(O.angle),R.penumbraCos=Math.cos(O.angle*(1-O.penumbra)),R.decay=O.decay,i.spot[v]=R;let z=O.shadow;if(O.map&&(i.spotLightMap[_]=O.map,_++,z.updateMatrices(O),O.castShadow&&C++),i.spotLightMatrix[v]=z.matrix,O.castShadow){let j=n.get(O);j.shadowBias=z.bias,j.shadowNormalBias=z.normalBias,j.shadowRadius=z.radius,j.shadowMapSize=z.mapSize,i.spotShadow[v]=j,i.spotShadowMap[v]=k,w++}v++}else if(O.isRectAreaLight){let R=r.get(O);R.color.copy(T).multiplyScalar(D),R.halfWidth.set(O.width*.5,0,0),R.halfHeight.set(0,O.height*.5,0),i.rectArea[b]=R,b++}else if(O.isPointLight){let R=r.get(O);if(R.color.copy(O.color).multiplyScalar(O.intensity*E),R.distance=O.distance,R.decay=O.decay,O.castShadow){let z=O.shadow,j=n.get(O);j.shadowBias=z.bias,j.shadowNormalBias=z.normalBias,j.shadowRadius=z.radius,j.shadowMapSize=z.mapSize,j.shadowCameraNear=z.camera.near,j.shadowCameraFar=z.camera.far,i.pointShadow[g]=j,i.pointShadowMap[g]=k,i.pointShadowMatrix[g]=O.shadow.matrix,S++}i.point[g]=R,g++}else if(O.isHemisphereLight){let R=r.get(O);R.skyColor.copy(O.color).multiplyScalar(D*E),R.groundColor.copy(O.groundColor).multiplyScalar(D*E),i.hemi[y]=R,y++}}b>0&&(t.isWebGL2||e.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=it.LTC_FLOAT_1,i.rectAreaLTC2=it.LTC_FLOAT_2):e.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=it.LTC_HALF_1,i.rectAreaLTC2=it.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=h,i.ambient[1]=f,i.ambient[2]=m;let A=i.hash;(A.directionalLength!==p||A.pointLength!==g||A.spotLength!==v||A.rectAreaLength!==b||A.hemiLength!==y||A.numDirectionalShadows!==x||A.numPointShadows!==S||A.numSpotShadows!==w||A.numSpotMaps!==_)&&(i.directional.length=p,i.spot.length=v,i.rectArea.length=b,i.point.length=g,i.hemi.length=y,i.directionalShadow.length=x,i.directionalShadowMap.length=x,i.pointShadow.length=S,i.pointShadowMap.length=S,i.spotShadow.length=w,i.spotShadowMap.length=w,i.directionalShadowMatrix.length=x,i.pointShadowMatrix.length=S,i.spotLightMatrix.length=w+_-C,i.spotLightMap.length=_,i.numSpotLightShadowsWithMaps=C,A.directionalLength=p,A.pointLength=g,A.spotLength=v,A.rectAreaLength=b,A.hemiLength=y,A.numDirectionalShadows=x,A.numPointShadows=S,A.numSpotShadows=w,A.numSpotMaps=_,i.version=Yat++)}function u(d,c){let h=0,f=0,m=0,p=0,g=0,v=c.matrixWorldInverse;for(let b=0,y=d.length;b<y;b++){let x=d[b];if(x.isDirectionalLight){let S=i.directional[h];S.direction.setFromMatrixPosition(x.matrixWorld),o.setFromMatrixPosition(x.target.matrixWorld),S.direction.sub(o),S.direction.transformDirection(v),h++}else if(x.isSpotLight){let S=i.spot[m];S.position.setFromMatrixPosition(x.matrixWorld),S.position.applyMatrix4(v),S.direction.setFromMatrixPosition(x.matrixWorld),o.setFromMatrixPosition(x.target.matrixWorld),S.direction.sub(o),S.direction.transformDirection(v),m++}else if(x.isRectAreaLight){let S=i.rectArea[p];S.position.setFromMatrixPosition(x.matrixWorld),S.position.applyMatrix4(v),s.identity(),a.copy(x.matrixWorld),a.premultiply(v),s.extractRotation(a),S.halfWidth.set(x.width*.5,0,0),S.halfHeight.set(0,x.height*.5,0),S.halfWidth.applyMatrix4(s),S.halfHeight.applyMatrix4(s),p++}else if(x.isPointLight){let S=i.point[f];S.position.setFromMatrixPosition(x.matrixWorld),S.position.applyMatrix4(v),f++}else if(x.isHemisphereLight){let S=i.hemi[g];S.direction.setFromMatrixPosition(x.matrixWorld),S.direction.transformDirection(v),g++}}}return{setup:l,setupView:u,state:i}}function Oq(e,t){let r=new Zat(e,t),n=[],i=[];function o(){n.length=0,i.length=0}function a(d){n.push(d)}function s(d){i.push(d)}function l(d){r.setup(n,d)}function u(d){r.setupView(n,d)}return{init:o,state:{lightsArray:n,shadowsArray:i,lights:r},setupLights:l,setupLightsView:u,pushLight:a,pushShadow:s}}function Jat(e,t){let r=new WeakMap;function n(o,a=0){let s=r.get(o),l;return s===void 0?(l=new Oq(e,t),r.set(o,[l])):a>=s.length?(l=new Oq(e,t),s.push(l)):l=s[a],l}function i(){r=new WeakMap}return{get:n,dispose:i}}var Mae=class extends r_{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=_h,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},est=class extends r_{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new F,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}},tst=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,rst=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function nst(e,t,r){let n=new z4,i=new ue,o=new ue,a=new or,s=new Mae({depthPacking:fae}),l=new est,u={},d=r.maxTextureSize,c={[Bu]:Po,[Po]:Bu,[ms]:ms},h=new Sn({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ue},radius:{value:4}},vertexShader:tst,fragmentShader:rst}),f=h.clone();f.defines.HORIZONTAL_PASS=1;let m=new Nt;m.setAttribute("position",new Kt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let p=new Fa(m,h),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=I4,this.render=function(x,S,w){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||x.length===0)return;let _=e.getRenderTarget(),C=e.getActiveCubeFace(),E=e.getActiveMipmapLevel(),A=e.state;A.setBlending(Xi),A.buffers.color.setClear(1,1,1,1),A.buffers.depth.setTest(!0),A.setScissorTest(!1);for(let M=0,I=x.length;M<I;M++){let O=x[M],T=O.shadow;if(T===void 0){console.warn("THREE.WebGLShadowMap:",O,"has no shadow.");continue}if(T.autoUpdate===!1&&T.needsUpdate===!1)continue;i.copy(T.mapSize);let D=T.getFrameExtents();if(i.multiply(D),o.copy(T.mapSize),(i.x>d||i.y>d)&&(i.x>d&&(o.x=Math.floor(d/D.x),i.x=o.x*D.x,T.mapSize.x=o.x),i.y>d&&(o.y=Math.floor(d/D.y),i.y=o.y*D.y,T.mapSize.y=o.y)),T.map===null){let k=this.type!==jx?{minFilter:Pn,magFilter:Pn}:{};T.map=new cn(i.x,i.y,k),T.map.texture.name=O.name+".shadowMap",T.camera.updateProjectionMatrix()}e.setRenderTarget(T.map),e.clear();let N=T.getViewportCount();for(let k=0;k<N;k++){let R=T.getViewport(k);a.set(o.x*R.x,o.y*R.y,o.x*R.z,o.y*R.w),A.viewport(a),T.updateMatrices(O,k),n=T.getFrustum(),y(S,w,T.camera,O,this.type)}T.isPointLightShadow!==!0&&this.type===jx&&v(T,w),T.needsUpdate=!1}g.needsUpdate=!1,e.setRenderTarget(_,C,E)};function v(x,S){let w=t.update(p);h.defines.VSM_SAMPLES!==x.blurSamples&&(h.defines.VSM_SAMPLES=x.blurSamples,f.defines.VSM_SAMPLES=x.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),x.mapPass===null&&(x.mapPass=new cn(i.x,i.y)),h.uniforms.shadow_pass.value=x.map.texture,h.uniforms.resolution.value=x.mapSize,h.uniforms.radius.value=x.radius,e.setRenderTarget(x.mapPass),e.clear(),e.renderBufferDirect(S,null,w,h,p,null),f.uniforms.shadow_pass.value=x.mapPass.texture,f.uniforms.resolution.value=x.mapSize,f.uniforms.radius.value=x.radius,e.setRenderTarget(x.map),e.clear(),e.renderBufferDirect(S,null,w,f,p,null)}function b(x,S,w,_,C,E){let A=null,M=w.isPointLight===!0?x.customDistanceMaterial:x.customDepthMaterial;if(M!==void 0)A=M;else if(A=w.isPointLight===!0?l:s,e.localClippingEnabled&&S.clipShadows===!0&&Array.isArray(S.clippingPlanes)&&S.clippingPlanes.length!==0||S.displacementMap&&S.displacementScale!==0||S.alphaMap&&S.alphaTest>0||S.map&&S.alphaTest>0){let I=A.uuid,O=S.uuid,T=u[I];T===void 0&&(T={},u[I]=T);let D=T[O];D===void 0&&(D=A.clone(),T[O]=D),A=D}return A.visible=S.visible,A.wireframe=S.wireframe,E===jx?A.side=S.shadowSide!==null?S.shadowSide:S.side:A.side=S.shadowSide!==null?S.shadowSide:c[S.side],A.alphaMap=S.alphaMap,A.alphaTest=S.alphaTest,A.map=S.map,A.clipShadows=S.clipShadows,A.clippingPlanes=S.clippingPlanes,A.clipIntersection=S.clipIntersection,A.displacementMap=S.displacementMap,A.displacementScale=S.displacementScale,A.displacementBias=S.displacementBias,A.wireframeLinewidth=S.wireframeLinewidth,A.linewidth=S.linewidth,w.isPointLight===!0&&A.isMeshDistanceMaterial===!0&&(A.referencePosition.setFromMatrixPosition(w.matrixWorld),A.nearDistance=_,A.farDistance=C),A}function y(x,S,w,_,C){if(x.visible===!1)return;if(x.layers.test(S.layers)&&(x.isMesh||x.isLine||x.isPoints)&&(x.castShadow||x.receiveShadow&&C===jx)&&(!x.frustumCulled||n.intersectsObject(x))){x.modelViewMatrix.multiplyMatrices(w.matrixWorldInverse,x.matrixWorld);let A=t.update(x),M=x.material;if(Array.isArray(M)){let I=A.groups;for(let O=0,T=I.length;O<T;O++){let D=I[O],N=M[D.materialIndex];if(N&&N.visible){let k=b(x,N,_,w.near,w.far,C);e.renderBufferDirect(w,null,A,k,x,D)}}}else if(M.visible){let I=b(x,M,_,w.near,w.far,C);e.renderBufferDirect(w,null,A,I,x,null)}}let E=x.children;for(let A=0,M=E.length;A<M;A++)y(E[A],S,w,_,C)}}function ist(e,t,r){let n=r.isWebGL2;function i(){let fe=!1,Oe=new or,ze=null,Je=new or(0,0,0,0);return{setMask:function(Tt){ze!==Tt&&!fe&&(e.colorMask(Tt,Tt,Tt,Tt),ze=Tt)},setLocked:function(Tt){fe=Tt},setClear:function(Tt,Zt,$r,On,Ko){Ko===!0&&(Tt*=On,Zt*=On,$r*=On),Oe.set(Tt,Zt,$r,On),Je.equals(Oe)===!1&&(e.clearColor(Tt,Zt,$r,On),Je.copy(Oe))},reset:function(){fe=!1,ze=null,Je.set(-1,0,0,0)}}}function o(){let fe=!1,Oe=null,ze=null,Je=null;return{setTest:function(Tt){Tt?ne(2929):J(2929)},setMask:function(Tt){Oe!==Tt&&!fe&&(e.depthMask(Tt),Oe=Tt)},setFunc:function(Tt){if(ze!==Tt){switch(Tt){case Ctt:e.depthFunc(512);break;case Att:e.depthFunc(519);break;case Ett:e.depthFunc(513);break;case wN:e.depthFunc(515);break;case Mtt:e.depthFunc(514);break;case Ptt:e.depthFunc(518);break;case Ttt:e.depthFunc(516);break;case Ott:e.depthFunc(517);break;default:e.depthFunc(515)}ze=Tt}},setLocked:function(Tt){fe=Tt},setClear:function(Tt){Je!==Tt&&(e.clearDepth(Tt),Je=Tt)},reset:function(){fe=!1,Oe=null,ze=null,Je=null}}}function a(){let fe=!1,Oe=null,ze=null,Je=null,Tt=null,Zt=null,$r=null,On=null,Ko=null;return{setTest:function(Br){fe||(Br?ne(2960):J(2960))},setMask:function(Br){Oe!==Br&&!fe&&(e.stencilMask(Br),Oe=Br)},setFunc:function(Br,Zi,Vr){(ze!==Br||Je!==Zi||Tt!==Vr)&&(e.stencilFunc(Br,Zi,Vr),ze=Br,Je=Zi,Tt=Vr)},setOp:function(Br,Zi,Vr){(Zt!==Br||$r!==Zi||On!==Vr)&&(e.stencilOp(Br,Zi,Vr),Zt=Br,$r=Zi,On=Vr)},setLocked:function(Br){fe=Br},setClear:function(Br){Ko!==Br&&(e.clearStencil(Br),Ko=Br)},reset:function(){fe=!1,Oe=null,ze=null,Je=null,Tt=null,Zt=null,$r=null,On=null,Ko=null}}}let s=new i,l=new o,u=new a,d=new WeakMap,c=new WeakMap,h={},f={},m=new WeakMap,p=[],g=null,v=!1,b=null,y=null,x=null,S=null,w=null,_=null,C=null,E=!1,A=null,M=null,I=null,O=null,T=null,D=e.getParameter(35661),N=!1,k=0,R=e.getParameter(7938);R.indexOf("WebGL")!==-1?(k=parseFloat(/^WebGL (\d)/.exec(R)[1]),N=k>=1):R.indexOf("OpenGL ES")!==-1&&(k=parseFloat(/^OpenGL ES (\d)/.exec(R)[1]),N=k>=2);let z=null,j={},$=e.getParameter(3088),U=e.getParameter(2978),H=new or().fromArray($),V=new or().fromArray(U);function Q(fe,Oe,ze){let Je=new Uint8Array(4),Tt=e.createTexture();e.bindTexture(fe,Tt),e.texParameteri(fe,10241,9728),e.texParameteri(fe,10240,9728);for(let Zt=0;Zt<ze;Zt++)e.texImage2D(Oe+Zt,0,6408,1,1,0,6408,5121,Je);return Tt}let X={};X[3553]=Q(3553,3553,1),X[34067]=Q(34067,34069,6),s.setClear(0,0,0,1),l.setClear(1),u.setClear(0),ne(2929),l.setFunc(wN),be(!1),ye(w9),ne(2884),he(Xi);function ne(fe){h[fe]!==!0&&(e.enable(fe),h[fe]=!0)}function J(fe){h[fe]!==!1&&(e.disable(fe),h[fe]=!1)}function W(fe,Oe){return f[fe]!==Oe?(e.bindFramebuffer(fe,Oe),f[fe]=Oe,n&&(fe===36009&&(f[36160]=Oe),fe===36160&&(f[36009]=Oe)),!0):!1}function te(fe,Oe){let ze=p,Je=!1;if(fe)if(ze=m.get(Oe),ze===void 0&&(ze=[],m.set(Oe,ze)),fe.isWebGLMultipleRenderTargets){let Tt=fe.texture;if(ze.length!==Tt.length||ze[0]!==36064){for(let Zt=0,$r=Tt.length;Zt<$r;Zt++)ze[Zt]=36064+Zt;ze.length=Tt.length,Je=!0}}else ze[0]!==36064&&(ze[0]=36064,Je=!0);else ze[0]!==1029&&(ze[0]=1029,Je=!0);Je&&(r.isWebGL2?e.drawBuffers(ze):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(ze))}function Z(fe){return g!==fe?(e.useProgram(fe),g=fe,!0):!1}let q={[gv]:32774,[ftt]:32778,[ptt]:32779};if(n)q[A9]=32775,q[E9]=32776;else{let fe=t.get("EXT_blend_minmax");fe!==null&&(q[A9]=fe.MIN_EXT,q[E9]=fe.MAX_EXT)}let ie={[mtt]:0,[gtt]:1,[vtt]:768,[oae]:770,[_tt]:776,[wtt]:774,[btt]:772,[ytt]:769,[aae]:771,[Stt]:775,[xtt]:773};function he(fe,Oe,ze,Je,Tt,Zt,$r,On){if(fe===Xi){v===!0&&(J(3042),v=!1);return}if(v===!1&&(ne(3042),v=!0),fe!==htt){if(fe!==b||On!==E){if((y!==gv||w!==gv)&&(e.blendEquation(32774),y=gv,w=gv),On)switch(fe){case Am:e.blendFuncSeparate(1,771,1,771);break;case S9:e.blendFunc(1,1);break;case _9:e.blendFuncSeparate(0,769,0,1);break;case C9:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",fe);break}else switch(fe){case Am:e.blendFuncSeparate(770,771,1,771);break;case S9:e.blendFunc(770,1);break;case _9:e.blendFuncSeparate(0,769,0,1);break;case C9:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",fe);break}x=null,S=null,_=null,C=null,b=fe,E=On}return}Tt=Tt||Oe,Zt=Zt||ze,$r=$r||Je,(Oe!==y||Tt!==w)&&(e.blendEquationSeparate(q[Oe],q[Tt]),y=Oe,w=Tt),(ze!==x||Je!==S||Zt!==_||$r!==C)&&(e.blendFuncSeparate(ie[ze],ie[Je],ie[Zt],ie[$r]),x=ze,S=Je,_=Zt,C=$r),b=fe,E=!1}function ae(fe,Oe){fe.side===ms?J(2884):ne(2884);let ze=fe.side===Po;Oe&&(ze=!ze),be(ze),fe.blending===Am&&fe.transparent===!1?he(Xi):he(fe.blending,fe.blendEquation,fe.blendSrc,fe.blendDst,fe.blendEquationAlpha,fe.blendSrcAlpha,fe.blendDstAlpha,fe.premultipliedAlpha),l.setFunc(fe.depthFunc),l.setTest(fe.depthTest),l.setMask(fe.depthWrite),s.setMask(fe.colorWrite);let Je=fe.stencilWrite;u.setTest(Je),Je&&(u.setMask(fe.stencilWriteMask),u.setFunc(fe.stencilFunc,fe.stencilRef,fe.stencilFuncMask),u.setOp(fe.stencilFail,fe.stencilZFail,fe.stencilZPass)),me(fe.polygonOffset,fe.polygonOffsetFactor,fe.polygonOffsetUnits),fe.alphaToCoverage===!0?ne(32926):J(32926)}function be(fe){A!==fe&&(fe?e.frontFace(2304):e.frontFace(2305),A=fe)}function ye(fe){fe!==utt?(ne(2884),fe!==M&&(fe===w9?e.cullFace(1029):fe===ctt?e.cullFace(1028):e.cullFace(1032))):J(2884),M=fe}function Se(fe){fe!==I&&(N&&e.lineWidth(fe),I=fe)}function me(fe,Oe,ze){fe?(ne(32823),(O!==Oe||T!==ze)&&(e.polygonOffset(Oe,ze),O=Oe,T=ze)):J(32823)}function Pe(fe){fe?ne(3089):J(3089)}function Ae(fe){fe===void 0&&(fe=33984+D-1),z!==fe&&(e.activeTexture(fe),z=fe)}function K(fe,Oe,ze){ze===void 0&&(z===null?ze=33984+D-1:ze=z);let Je=j[ze];Je===void 0&&(Je={type:void 0,texture:void 0},j[ze]=Je),(Je.type!==fe||Je.texture!==Oe)&&(z!==ze&&(e.activeTexture(ze),z=ze),e.bindTexture(fe,Oe||X[fe]),Je.type=fe,Je.texture=Oe)}function G(){let fe=j[z];fe!==void 0&&fe.type!==void 0&&(e.bindTexture(fe.type,null),fe.type=void 0,fe.texture=void 0)}function de(){try{e.compressedTexImage2D.apply(e,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function Ee(){try{e.compressedTexImage3D.apply(e,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function Me(){try{e.texSubImage2D.apply(e,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function Le(){try{e.texSubImage3D.apply(e,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function De(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function Ce(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function pe(){try{e.texStorage2D.apply(e,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function Ge(){try{e.texStorage3D.apply(e,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function Ke(){try{e.texImage2D.apply(e,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function Xe(){try{e.texImage3D.apply(e,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function et(fe){H.equals(fe)===!1&&(e.scissor(fe.x,fe.y,fe.z,fe.w),H.copy(fe))}function st(fe){V.equals(fe)===!1&&(e.viewport(fe.x,fe.y,fe.z,fe.w),V.copy(fe))}function Ut(fe,Oe){let ze=c.get(Oe);ze===void 0&&(ze=new WeakMap,c.set(Oe,ze));let Je=ze.get(fe);Je===void 0&&(Je=e.getUniformBlockIndex(Oe,fe.name),ze.set(fe,Je))}function Cr(fe,Oe){let ze=c.get(Oe).get(fe);d.get(Oe)!==ze&&(e.uniformBlockBinding(Oe,ze,fe.__bindingPointIndex),d.set(Oe,ze))}function Mr(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),n===!0&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),h={},z=null,j={},f={},m=new WeakMap,p=[],g=null,v=!1,b=null,y=null,x=null,S=null,w=null,_=null,C=null,E=!1,A=null,M=null,I=null,O=null,T=null,H.set(0,0,e.canvas.width,e.canvas.height),V.set(0,0,e.canvas.width,e.canvas.height),s.reset(),l.reset(),u.reset()}return{buffers:{color:s,depth:l,stencil:u},enable:ne,disable:J,bindFramebuffer:W,drawBuffers:te,useProgram:Z,setBlending:he,setMaterial:ae,setFlipSided:be,setCullFace:ye,setLineWidth:Se,setPolygonOffset:me,setScissorTest:Pe,activeTexture:Ae,bindTexture:K,unbindTexture:G,compressedTexImage2D:de,compressedTexImage3D:Ee,texImage2D:Ke,texImage3D:Xe,updateUBOMapping:Ut,uniformBlockBinding:Cr,texStorage2D:pe,texStorage3D:Ge,texSubImage2D:Me,texSubImage3D:Le,compressedTexSubImage2D:De,compressedTexSubImage3D:Ce,scissor:et,viewport:st,reset:Mr}}function ost(e,t,r,n,i,o,a){let s=i.isWebGL2,l=i.maxTextures,u=i.maxCubemapSize,d=i.maxTextureSize,c=i.maxSamples,h=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,f=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),m=new WeakMap,p,g=new WeakMap,v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b(K,G){return v?new OffscreenCanvas(K,G):iP("canvas")}function y(K,G,de,Ee){let Me=1;if((K.width>Ee||K.height>Ee)&&(Me=Ee/Math.max(K.width,K.height)),Me<1||G===!0)if(typeof HTMLImageElement<"u"&&K instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&K instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&K instanceof ImageBitmap){let Le=G?nP:Math.floor,De=Le(Me*K.width),Ce=Le(Me*K.height);p===void 0&&(p=b(De,Ce));let pe=de?b(De,Ce):p;return pe.width=De,pe.height=Ce,pe.getContext("2d").drawImage(K,0,0,De,Ce),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+K.width+"x"+K.height+") to ("+De+"x"+Ce+")."),pe}else return"data"in K&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+K.width+"x"+K.height+")."),K;return K}function x(K){return MN(K.width)&&MN(K.height)}function S(K){return s?!1:K.wrapS!==Ti||K.wrapT!==Ti||K.minFilter!==Pn&&K.minFilter!==yr}function w(K,G){return K.generateMipmaps&&G&&K.minFilter!==Pn&&K.minFilter!==yr}function _(K){e.generateMipmap(K)}function C(K,G,de,Ee,Me=!1){if(s===!1)return G;if(K!==null){if(e[K]!==void 0)return e[K];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+K+"'")}let Le=G;return G===6403&&(de===5126&&(Le=33326),de===5131&&(Le=33325),de===5121&&(Le=33321)),G===33319&&(de===5126&&(Le=33328),de===5131&&(Le=33327),de===5121&&(Le=33323)),G===6408&&(de===5126&&(Le=34836),de===5131&&(Le=34842),de===5121&&(Le=Ee===ir&&Me===!1?35907:32856),de===32819&&(Le=32854),de===32820&&(Le=32855)),(Le===33325||Le===33326||Le===33327||Le===33328||Le===34842||Le===34836)&&t.get("EXT_color_buffer_float"),Le}function E(K,G,de){return w(K,de)===!0||K.isFramebufferTexture&&K.minFilter!==Pn&&K.minFilter!==yr?Math.log2(Math.max(G.width,G.height))+1:K.mipmaps!==void 0&&K.mipmaps.length>0?K.mipmaps.length:K.isCompressedTexture&&Array.isArray(K.image)?G.mipmaps.length:1}function A(K){return K===Pn||K===M9||K===yD?9728:9729}function M(K){let G=K.target;G.removeEventListener("dispose",M),O(G),G.isVideoTexture&&m.delete(G)}function I(K){let G=K.target;G.removeEventListener("dispose",I),D(G)}function O(K){let G=n.get(K);if(G.__webglInit===void 0)return;let de=K.source,Ee=g.get(de);if(Ee){let Me=Ee[G.__cacheKey];Me.usedTimes--,Me.usedTimes===0&&T(K),Object.keys(Ee).length===0&&g.delete(de)}n.remove(K)}function T(K){let G=n.get(K);e.deleteTexture(G.__webglTexture);let de=K.source,Ee=g.get(de);delete Ee[G.__cacheKey],a.memory.textures--}function D(K){let G=K.texture,de=n.get(K),Ee=n.get(G);if(Ee.__webglTexture!==void 0&&(e.deleteTexture(Ee.__webglTexture),a.memory.textures--),K.depthTexture&&K.depthTexture.dispose(),K.isWebGLCubeRenderTarget)for(let Me=0;Me<6;Me++)e.deleteFramebuffer(de.__webglFramebuffer[Me]),de.__webglDepthbuffer&&e.deleteRenderbuffer(de.__webglDepthbuffer[Me]);else{if(e.deleteFramebuffer(de.__webglFramebuffer),de.__webglDepthbuffer&&e.deleteRenderbuffer(de.__webglDepthbuffer),de.__webglMultisampledFramebuffer&&e.deleteFramebuffer(de.__webglMultisampledFramebuffer),de.__webglColorRenderbuffer)for(let Me=0;Me<de.__webglColorRenderbuffer.length;Me++)de.__webglColorRenderbuffer[Me]&&e.deleteRenderbuffer(de.__webglColorRenderbuffer[Me]);de.__webglDepthRenderbuffer&&e.deleteRenderbuffer(de.__webglDepthRenderbuffer)}if(K.isWebGLMultipleRenderTargets)for(let Me=0,Le=G.length;Me<Le;Me++){let De=n.get(G[Me]);De.__webglTexture&&(e.deleteTexture(De.__webglTexture),a.memory.textures--),n.remove(G[Me])}n.remove(G),n.remove(K)}let N=0;function k(){N=0}function R(){let K=N;return K>=l&&console.warn("THREE.WebGLTextures: Trying to use "+K+" texture units while this GPU supports only "+l),N+=1,K}function z(K){let G=[];return G.push(K.wrapS),G.push(K.wrapT),G.push(K.wrapR||0),G.push(K.magFilter),G.push(K.minFilter),G.push(K.anisotropy),G.push(K.internalFormat),G.push(K.format),G.push(K.type),G.push(K.generateMipmaps),G.push(K.premultiplyAlpha),G.push(K.flipY),G.push(K.unpackAlignment),G.push(K.encoding),G.join()}function j(K,G){let de=n.get(K);if(K.isVideoTexture&&Pe(K),K.isRenderTargetTexture===!1&&K.version>0&&de.__version!==K.version){let Ee=K.image;if(Ee===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ee.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{J(de,K,G);return}}r.bindTexture(3553,de.__webglTexture,33984+G)}function $(K,G){let de=n.get(K);if(K.version>0&&de.__version!==K.version){J(de,K,G);return}r.bindTexture(35866,de.__webglTexture,33984+G)}function U(K,G){let de=n.get(K);if(K.version>0&&de.__version!==K.version){J(de,K,G);return}r.bindTexture(32879,de.__webglTexture,33984+G)}function H(K,G){let de=n.get(K);if(K.version>0&&de.__version!==K.version){W(de,K,G);return}r.bindTexture(34067,de.__webglTexture,33984+G)}let V={[Wd]:10497,[Ti]:33071,[CN]:33648},Q={[Pn]:9728,[M9]:9984,[yD]:9986,[yr]:9729,[Btt]:9985,[y0]:9987};function X(K,G,de){if(de?(e.texParameteri(K,10242,V[G.wrapS]),e.texParameteri(K,10243,V[G.wrapT]),(K===32879||K===35866)&&e.texParameteri(K,32882,V[G.wrapR]),e.texParameteri(K,10240,Q[G.magFilter]),e.texParameteri(K,10241,Q[G.minFilter])):(e.texParameteri(K,10242,33071),e.texParameteri(K,10243,33071),(K===32879||K===35866)&&e.texParameteri(K,32882,33071),(G.wrapS!==Ti||G.wrapT!==Ti)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(K,10240,A(G.magFilter)),e.texParameteri(K,10241,A(G.minFilter)),G.minFilter!==Pn&&G.minFilter!==yr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),t.has("EXT_texture_filter_anisotropic")===!0){let Ee=t.get("EXT_texture_filter_anisotropic");if(G.magFilter===Pn||G.minFilter!==yD&&G.minFilter!==y0||G.type===Ba&&t.has("OES_texture_float_linear")===!1||s===!1&&G.type===Xm&&t.has("OES_texture_half_float_linear")===!1)return;(G.anisotropy>1||n.get(G).__currentAnisotropy)&&(e.texParameterf(K,Ee.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(G.anisotropy,i.getMaxAnisotropy())),n.get(G).__currentAnisotropy=G.anisotropy)}}function ne(K,G){let de=!1;K.__webglInit===void 0&&(K.__webglInit=!0,G.addEventListener("dispose",M));let Ee=G.source,Me=g.get(Ee);Me===void 0&&(Me={},g.set(Ee,Me));let Le=z(G);if(Le!==K.__cacheKey){Me[Le]===void 0&&(Me[Le]={texture:e.createTexture(),usedTimes:0},a.memory.textures++,de=!0),Me[Le].usedTimes++;let De=Me[K.__cacheKey];De!==void 0&&(Me[K.__cacheKey].usedTimes--,De.usedTimes===0&&T(G)),K.__cacheKey=Le,K.__webglTexture=Me[Le].texture}return de}function J(K,G,de){let Ee=3553;(G.isDataArrayTexture||G.isCompressedArrayTexture)&&(Ee=35866),G.isData3DTexture&&(Ee=32879);let Me=ne(K,G),Le=G.source;r.bindTexture(Ee,K.__webglTexture,33984+de);let De=n.get(Le);if(Le.version!==De.__version||Me===!0){r.activeTexture(33984+de),e.pixelStorei(37440,G.flipY),e.pixelStorei(37441,G.premultiplyAlpha),e.pixelStorei(3317,G.unpackAlignment),e.pixelStorei(37443,0);let Ce=S(G)&&x(G.image)===!1,pe=y(G.image,Ce,!1,d);pe=Ae(G,pe);let Ge=x(pe)||s,Ke=o.convert(G.format,G.encoding),Xe=o.convert(G.type),et=C(G.internalFormat,Ke,Xe,G.encoding,G.isVideoTexture);X(Ee,G,Ge);let st,Ut=G.mipmaps,Cr=s&&G.isVideoTexture!==!0,Mr=De.__version===void 0||Me===!0,fe=E(G,pe,Ge);if(G.isDepthTexture)et=6402,s?G.type===Ba?et=36012:G.type===qd?et=33190:G.type===Em?et=35056:et=33189:G.type===Ba&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),G.format===Mm&&et===6402&&G.type!==uae&&G.type!==qd&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),G.type=qd,Xe=o.convert(G.type)),G.format===Ym&&et===6402&&(et=34041,G.type!==Em&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),G.type=Em,Xe=o.convert(G.type))),Mr&&(Cr?r.texStorage2D(3553,1,et,pe.width,pe.height):r.texImage2D(3553,0,et,pe.width,pe.height,0,Ke,Xe,null));else if(G.isDataTexture)if(Ut.length>0&&Ge){Cr&&Mr&&r.texStorage2D(3553,fe,et,Ut[0].width,Ut[0].height);for(let Oe=0,ze=Ut.length;Oe<ze;Oe++)st=Ut[Oe],Cr?r.texSubImage2D(3553,Oe,0,0,st.width,st.height,Ke,Xe,st.data):r.texImage2D(3553,Oe,et,st.width,st.height,0,Ke,Xe,st.data);G.generateMipmaps=!1}else Cr?(Mr&&r.texStorage2D(3553,fe,et,pe.width,pe.height),r.texSubImage2D(3553,0,0,0,pe.width,pe.height,Ke,Xe,pe.data)):r.texImage2D(3553,0,et,pe.width,pe.height,0,Ke,Xe,pe.data);else if(G.isCompressedTexture)if(G.isCompressedArrayTexture){Cr&&Mr&&r.texStorage3D(35866,fe,et,Ut[0].width,Ut[0].height,pe.depth);for(let Oe=0,ze=Ut.length;Oe<ze;Oe++)st=Ut[Oe],G.format!==qs?Ke!==null?Cr?r.compressedTexSubImage3D(35866,Oe,0,0,0,st.width,st.height,pe.depth,Ke,st.data,0,0):r.compressedTexImage3D(35866,Oe,et,st.width,st.height,pe.depth,0,st.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Cr?r.texSubImage3D(35866,Oe,0,0,0,st.width,st.height,pe.depth,Ke,Xe,st.data):r.texImage3D(35866,Oe,et,st.width,st.height,pe.depth,0,Ke,Xe,st.data)}else{Cr&&Mr&&r.texStorage2D(3553,fe,et,Ut[0].width,Ut[0].height);for(let Oe=0,ze=Ut.length;Oe<ze;Oe++)st=Ut[Oe],G.format!==qs?Ke!==null?Cr?r.compressedTexSubImage2D(3553,Oe,0,0,st.width,st.height,Ke,st.data):r.compressedTexImage2D(3553,Oe,et,st.width,st.height,0,st.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Cr?r.texSubImage2D(3553,Oe,0,0,st.width,st.height,Ke,Xe,st.data):r.texImage2D(3553,Oe,et,st.width,st.height,0,Ke,Xe,st.data)}else if(G.isDataArrayTexture)Cr?(Mr&&r.texStorage3D(35866,fe,et,pe.width,pe.height,pe.depth),r.texSubImage3D(35866,0,0,0,0,pe.width,pe.height,pe.depth,Ke,Xe,pe.data)):r.texImage3D(35866,0,et,pe.width,pe.height,pe.depth,0,Ke,Xe,pe.data);else if(G.isData3DTexture)Cr?(Mr&&r.texStorage3D(32879,fe,et,pe.width,pe.height,pe.depth),r.texSubImage3D(32879,0,0,0,0,pe.width,pe.height,pe.depth,Ke,Xe,pe.data)):r.texImage3D(32879,0,et,pe.width,pe.height,pe.depth,0,Ke,Xe,pe.data);else if(G.isFramebufferTexture){if(Mr)if(Cr)r.texStorage2D(3553,fe,et,pe.width,pe.height);else{let Oe=pe.width,ze=pe.height;for(let Je=0;Je<fe;Je++)r.texImage2D(3553,Je,et,Oe,ze,0,Ke,Xe,null),Oe>>=1,ze>>=1}}else if(Ut.length>0&&Ge){Cr&&Mr&&r.texStorage2D(3553,fe,et,Ut[0].width,Ut[0].height);for(let Oe=0,ze=Ut.length;Oe<ze;Oe++)st=Ut[Oe],Cr?r.texSubImage2D(3553,Oe,0,0,Ke,Xe,st):r.texImage2D(3553,Oe,et,Ke,Xe,st);G.generateMipmaps=!1}else Cr?(Mr&&r.texStorage2D(3553,fe,et,pe.width,pe.height),r.texSubImage2D(3553,0,0,0,Ke,Xe,pe)):r.texImage2D(3553,0,et,Ke,Xe,pe);w(G,Ge)&&_(Ee),De.__version=Le.version,G.onUpdate&&G.onUpdate(G)}K.__version=G.version}function W(K,G,de){if(G.image.length!==6)return;let Ee=ne(K,G),Me=G.source;r.bindTexture(34067,K.__webglTexture,33984+de);let Le=n.get(Me);if(Me.version!==Le.__version||Ee===!0){r.activeTexture(33984+de),e.pixelStorei(37440,G.flipY),e.pixelStorei(37441,G.premultiplyAlpha),e.pixelStorei(3317,G.unpackAlignment),e.pixelStorei(37443,0);let De=G.isCompressedTexture||G.image[0].isCompressedTexture,Ce=G.image[0]&&G.image[0].isDataTexture,pe=[];for(let Oe=0;Oe<6;Oe++)!De&&!Ce?pe[Oe]=y(G.image[Oe],!1,!0,u):pe[Oe]=Ce?G.image[Oe].image:G.image[Oe],pe[Oe]=Ae(G,pe[Oe]);let Ge=pe[0],Ke=x(Ge)||s,Xe=o.convert(G.format,G.encoding),et=o.convert(G.type),st=C(G.internalFormat,Xe,et,G.encoding),Ut=s&&G.isVideoTexture!==!0,Cr=Le.__version===void 0||Ee===!0,Mr=E(G,Ge,Ke);X(34067,G,Ke);let fe;if(De){Ut&&Cr&&r.texStorage2D(34067,Mr,st,Ge.width,Ge.height);for(let Oe=0;Oe<6;Oe++){fe=pe[Oe].mipmaps;for(let ze=0;ze<fe.length;ze++){let Je=fe[ze];G.format!==qs?Xe!==null?Ut?r.compressedTexSubImage2D(34069+Oe,ze,0,0,Je.width,Je.height,Xe,Je.data):r.compressedTexImage2D(34069+Oe,ze,st,Je.width,Je.height,0,Je.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ut?r.texSubImage2D(34069+Oe,ze,0,0,Je.width,Je.height,Xe,et,Je.data):r.texImage2D(34069+Oe,ze,st,Je.width,Je.height,0,Xe,et,Je.data)}}}else{fe=G.mipmaps,Ut&&Cr&&(fe.length>0&&Mr++,r.texStorage2D(34067,Mr,st,pe[0].width,pe[0].height));for(let Oe=0;Oe<6;Oe++)if(Ce){Ut?r.texSubImage2D(34069+Oe,0,0,0,pe[Oe].width,pe[Oe].height,Xe,et,pe[Oe].data):r.texImage2D(34069+Oe,0,st,pe[Oe].width,pe[Oe].height,0,Xe,et,pe[Oe].data);for(let ze=0;ze<fe.length;ze++){let Je=fe[ze].image[Oe].image;Ut?r.texSubImage2D(34069+Oe,ze+1,0,0,Je.width,Je.height,Xe,et,Je.data):r.texImage2D(34069+Oe,ze+1,st,Je.width,Je.height,0,Xe,et,Je.data)}}else{Ut?r.texSubImage2D(34069+Oe,0,0,0,Xe,et,pe[Oe]):r.texImage2D(34069+Oe,0,st,Xe,et,pe[Oe]);for(let ze=0;ze<fe.length;ze++){let Je=fe[ze];Ut?r.texSubImage2D(34069+Oe,ze+1,0,0,Xe,et,Je.image[Oe]):r.texImage2D(34069+Oe,ze+1,st,Xe,et,Je.image[Oe])}}}w(G,Ke)&&_(34067),Le.__version=Me.version,G.onUpdate&&G.onUpdate(G)}K.__version=G.version}function te(K,G,de,Ee,Me){let Le=o.convert(de.format,de.encoding),De=o.convert(de.type),Ce=C(de.internalFormat,Le,De,de.encoding);n.get(G).__hasExternalTextures||(Me===32879||Me===35866?r.texImage3D(Me,0,Ce,G.width,G.height,G.depth,0,Le,De,null):r.texImage2D(Me,0,Ce,G.width,G.height,0,Le,De,null)),r.bindFramebuffer(36160,K),me(G)?h.framebufferTexture2DMultisampleEXT(36160,Ee,Me,n.get(de).__webglTexture,0,Se(G)):(Me===3553||Me>=34069&&Me<=34074)&&e.framebufferTexture2D(36160,Ee,Me,n.get(de).__webglTexture,0),r.bindFramebuffer(36160,null)}function Z(K,G,de){if(e.bindRenderbuffer(36161,K),G.depthBuffer&&!G.stencilBuffer){let Ee=33189;if(de||me(G)){let Me=G.depthTexture;Me&&Me.isDepthTexture&&(Me.type===Ba?Ee=36012:Me.type===qd&&(Ee=33190));let Le=Se(G);me(G)?h.renderbufferStorageMultisampleEXT(36161,Le,Ee,G.width,G.height):e.renderbufferStorageMultisample(36161,Le,Ee,G.width,G.height)}else e.renderbufferStorage(36161,Ee,G.width,G.height);e.framebufferRenderbuffer(36160,36096,36161,K)}else if(G.depthBuffer&&G.stencilBuffer){let Ee=Se(G);de&&me(G)===!1?e.renderbufferStorageMultisample(36161,Ee,35056,G.width,G.height):me(G)?h.renderbufferStorageMultisampleEXT(36161,Ee,35056,G.width,G.height):e.renderbufferStorage(36161,34041,G.width,G.height),e.framebufferRenderbuffer(36160,33306,36161,K)}else{let Ee=G.isWebGLMultipleRenderTargets===!0?G.texture:[G.texture];for(let Me=0;Me<Ee.length;Me++){let Le=Ee[Me],De=o.convert(Le.format,Le.encoding),Ce=o.convert(Le.type),pe=C(Le.internalFormat,De,Ce,Le.encoding),Ge=Se(G);de&&me(G)===!1?e.renderbufferStorageMultisample(36161,Ge,pe,G.width,G.height):me(G)?h.renderbufferStorageMultisampleEXT(36161,Ge,pe,G.width,G.height):e.renderbufferStorage(36161,pe,G.width,G.height)}}e.bindRenderbuffer(36161,null)}function q(K,G){if(G&&G.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(36160,K),!(G.depthTexture&&G.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(G.depthTexture).__webglTexture||G.depthTexture.image.width!==G.width||G.depthTexture.image.height!==G.height)&&(G.depthTexture.image.width=G.width,G.depthTexture.image.height=G.height,G.depthTexture.needsUpdate=!0),j(G.depthTexture,0);let de=n.get(G.depthTexture).__webglTexture,Ee=Se(G);if(G.depthTexture.format===Mm)me(G)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,de,0,Ee):e.framebufferTexture2D(36160,36096,3553,de,0);else if(G.depthTexture.format===Ym)me(G)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,de,0,Ee):e.framebufferTexture2D(36160,33306,3553,de,0);else throw new Error("Unknown depthTexture format")}function ie(K){let G=n.get(K),de=K.isWebGLCubeRenderTarget===!0;if(K.depthTexture&&!G.__autoAllocateDepthBuffer){if(de)throw new Error("target.depthTexture not supported in Cube render targets");q(G.__webglFramebuffer,K)}else if(de){G.__webglDepthbuffer=[];for(let Ee=0;Ee<6;Ee++)r.bindFramebuffer(36160,G.__webglFramebuffer[Ee]),G.__webglDepthbuffer[Ee]=e.createRenderbuffer(),Z(G.__webglDepthbuffer[Ee],K,!1)}else r.bindFramebuffer(36160,G.__webglFramebuffer),G.__webglDepthbuffer=e.createRenderbuffer(),Z(G.__webglDepthbuffer,K,!1);r.bindFramebuffer(36160,null)}function he(K,G,de){let Ee=n.get(K);G!==void 0&&te(Ee.__webglFramebuffer,K,K.texture,36064,3553),de!==void 0&&ie(K)}function ae(K){let G=K.texture,de=n.get(K),Ee=n.get(G);K.addEventListener("dispose",I),K.isWebGLMultipleRenderTargets!==!0&&(Ee.__webglTexture===void 0&&(Ee.__webglTexture=e.createTexture()),Ee.__version=G.version,a.memory.textures++);let Me=K.isWebGLCubeRenderTarget===!0,Le=K.isWebGLMultipleRenderTargets===!0,De=x(K)||s;if(Me){de.__webglFramebuffer=[];for(let Ce=0;Ce<6;Ce++)de.__webglFramebuffer[Ce]=e.createFramebuffer()}else{if(de.__webglFramebuffer=e.createFramebuffer(),Le)if(i.drawBuffers){let Ce=K.texture;for(let pe=0,Ge=Ce.length;pe<Ge;pe++){let Ke=n.get(Ce[pe]);Ke.__webglTexture===void 0&&(Ke.__webglTexture=e.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(s&&K.samples>0&&me(K)===!1){let Ce=Le?G:[G];de.__webglMultisampledFramebuffer=e.createFramebuffer(),de.__webglColorRenderbuffer=[],r.bindFramebuffer(36160,de.__webglMultisampledFramebuffer);for(let pe=0;pe<Ce.length;pe++){let Ge=Ce[pe];de.__webglColorRenderbuffer[pe]=e.createRenderbuffer(),e.bindRenderbuffer(36161,de.__webglColorRenderbuffer[pe]);let Ke=o.convert(Ge.format,Ge.encoding),Xe=o.convert(Ge.type),et=C(Ge.internalFormat,Ke,Xe,Ge.encoding,K.isXRRenderTarget===!0),st=Se(K);e.renderbufferStorageMultisample(36161,st,et,K.width,K.height),e.framebufferRenderbuffer(36160,36064+pe,36161,de.__webglColorRenderbuffer[pe])}e.bindRenderbuffer(36161,null),K.depthBuffer&&(de.__webglDepthRenderbuffer=e.createRenderbuffer(),Z(de.__webglDepthRenderbuffer,K,!0)),r.bindFramebuffer(36160,null)}}if(Me){r.bindTexture(34067,Ee.__webglTexture),X(34067,G,De);for(let Ce=0;Ce<6;Ce++)te(de.__webglFramebuffer[Ce],K,G,36064,34069+Ce);w(G,De)&&_(34067),r.unbindTexture()}else if(Le){let Ce=K.texture;for(let pe=0,Ge=Ce.length;pe<Ge;pe++){let Ke=Ce[pe],Xe=n.get(Ke);r.bindTexture(3553,Xe.__webglTexture),X(3553,Ke,De),te(de.__webglFramebuffer,K,Ke,36064+pe,3553),w(Ke,De)&&_(3553)}r.unbindTexture()}else{let Ce=3553;(K.isWebGL3DRenderTarget||K.isWebGLArrayRenderTarget)&&(s?Ce=K.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),r.bindTexture(Ce,Ee.__webglTexture),X(Ce,G,De),te(de.__webglFramebuffer,K,G,36064,Ce),w(G,De)&&_(Ce),r.unbindTexture()}K.depthBuffer&&ie(K)}function be(K){let G=x(K)||s,de=K.isWebGLMultipleRenderTargets===!0?K.texture:[K.texture];for(let Ee=0,Me=de.length;Ee<Me;Ee++){let Le=de[Ee];if(w(Le,G)){let De=K.isWebGLCubeRenderTarget?34067:3553,Ce=n.get(Le).__webglTexture;r.bindTexture(De,Ce),_(De),r.unbindTexture()}}}function ye(K){if(s&&K.samples>0&&me(K)===!1){let G=K.isWebGLMultipleRenderTargets?K.texture:[K.texture],de=K.width,Ee=K.height,Me=16384,Le=[],De=K.stencilBuffer?33306:36096,Ce=n.get(K),pe=K.isWebGLMultipleRenderTargets===!0;if(pe)for(let Ge=0;Ge<G.length;Ge++)r.bindFramebuffer(36160,Ce.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+Ge,36161,null),r.bindFramebuffer(36160,Ce.__webglFramebuffer),e.framebufferTexture2D(36009,36064+Ge,3553,null,0);r.bindFramebuffer(36008,Ce.__webglMultisampledFramebuffer),r.bindFramebuffer(36009,Ce.__webglFramebuffer);for(let Ge=0;Ge<G.length;Ge++){Le.push(36064+Ge),K.depthBuffer&&Le.push(De);let Ke=Ce.__ignoreDepthValues!==void 0?Ce.__ignoreDepthValues:!1;if(Ke===!1&&(K.depthBuffer&&(Me|=256),K.stencilBuffer&&(Me|=1024)),pe&&e.framebufferRenderbuffer(36008,36064,36161,Ce.__webglColorRenderbuffer[Ge]),Ke===!0&&(e.invalidateFramebuffer(36008,[De]),e.invalidateFramebuffer(36009,[De])),pe){let Xe=n.get(G[Ge]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,Xe,0)}e.blitFramebuffer(0,0,de,Ee,0,0,de,Ee,Me,9728),f&&e.invalidateFramebuffer(36008,Le)}if(r.bindFramebuffer(36008,null),r.bindFramebuffer(36009,null),pe)for(let Ge=0;Ge<G.length;Ge++){r.bindFramebuffer(36160,Ce.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+Ge,36161,Ce.__webglColorRenderbuffer[Ge]);let Ke=n.get(G[Ge]).__webglTexture;r.bindFramebuffer(36160,Ce.__webglFramebuffer),e.framebufferTexture2D(36009,36064+Ge,3553,Ke,0)}r.bindFramebuffer(36009,Ce.__webglMultisampledFramebuffer)}}function Se(K){return Math.min(c,K.samples)}function me(K){let G=n.get(K);return s&&K.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&G.__useRenderToTexture!==!1}function Pe(K){let G=a.render.frame;m.get(K)!==G&&(m.set(K,G),K.update())}function Ae(K,G){let de=K.encoding,Ee=K.format,Me=K.type;return K.isCompressedTexture===!0||K.isVideoTexture===!0||K.format===EN||de!==Zc&&(de===ir?s===!1?t.has("EXT_sRGB")===!0&&Ee===qs?(K.format=EN,K.minFilter=yr,K.generateMipmaps=!1):G=vae.sRGBToLinear(G):(Ee!==qs||Me!==pa)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",de)),G}this.allocateTextureUnit=R,this.resetTextureUnits=k,this.setTexture2D=j,this.setTexture2DArray=$,this.setTexture3D=U,this.setTextureCube=H,this.rebindTextures=he,this.setupRenderTarget=ae,this.updateRenderTargetMipmap=be,this.updateMultisampleRenderTarget=ye,this.setupDepthRenderbuffer=ie,this.setupFrameBufferTexture=te,this.useMultisampledRTT=me}function ast(e,t,r){let n=r.isWebGL2;function i(o,a=null){let s;if(o===pa)return 5121;if(o===$tt)return 32819;if(o===Vtt)return 32820;if(o===Ftt)return 5120;if(o===jtt)return 5122;if(o===uae)return 5123;if(o===Utt)return 5124;if(o===qd)return 5125;if(o===Ba)return 5126;if(o===Xm)return n?5131:(s=t.get("OES_texture_half_float"),s!==null?s.HALF_FLOAT_OES:null);if(o===Htt)return 6406;if(o===qs)return 6408;if(o===Gtt)return 6409;if(o===Wtt)return 6410;if(o===Mm)return 6402;if(o===Ym)return 34041;if(o===EN)return s=t.get("EXT_sRGB"),s!==null?s.SRGB_ALPHA_EXT:null;if(o===qtt)return 6403;if(o===Ktt)return 36244;if(o===ZM)return 33319;if(o===Xtt)return 33320;if(o===cae)return 36249;if(o===bD||o===xD||o===wD||o===SD)if(a===ir)if(s=t.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(o===bD)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(o===xD)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(o===wD)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(o===SD)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=t.get("WEBGL_compressed_texture_s3tc"),s!==null){if(o===bD)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===xD)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===wD)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===SD)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===P9||o===T9||o===O9||o===I9)if(s=t.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(o===P9)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===T9)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===O9)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===I9)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===Ytt)return s=t.get("WEBGL_compressed_texture_etc1"),s!==null?s.COMPRESSED_RGB_ETC1_WEBGL:null;if(o===D9||o===R9)if(s=t.get("WEBGL_compressed_texture_etc"),s!==null){if(o===D9)return a===ir?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(o===R9)return a===ir?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(o===k9||o===L9||o===N9||o===z9||o===B9||o===F9||o===j9||o===U9||o===$9||o===V9||o===H9||o===G9||o===W9||o===q9)if(s=t.get("WEBGL_compressed_texture_astc"),s!==null){if(o===k9)return a===ir?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(o===L9)return a===ir?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(o===N9)return a===ir?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(o===z9)return a===ir?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(o===B9)return a===ir?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(o===F9)return a===ir?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(o===j9)return a===ir?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(o===U9)return a===ir?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(o===$9)return a===ir?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(o===V9)return a===ir?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(o===H9)return a===ir?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(o===G9)return a===ir?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(o===W9)return a===ir?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(o===q9)return a===ir?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(o===_D)if(s=t.get("EXT_texture_compression_bptc"),s!==null){if(o===_D)return a===ir?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(o===Qtt||o===K9||o===X9||o===Y9)if(s=t.get("EXT_texture_compression_rgtc"),s!==null){if(o===_D)return s.COMPRESSED_RED_RGTC1_EXT;if(o===K9)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(o===X9)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(o===Y9)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return o===Em?n?34042:(s=t.get("WEBGL_depth_texture"),s!==null?s.UNSIGNED_INT_24_8_WEBGL:null):e[o]!==void 0?e[o]:null}return{convert:i}}var sst=class extends oa{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},jv=class extends hn{constructor(){super(),this.isGroup=!0,this.type="Group"}},lst={type:"move"},XD=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new jv,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new jv,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new F,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new F),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new jv,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new F,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new F),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let n=null,i=null,o=null,a=this._targetRay,s=this._grip,l=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(l&&e.hand){o=!0;for(let m of e.hand.values()){let p=t.getJointPose(m,r),g=this._getHandJoint(l,m);p!==null&&(g.matrix.fromArray(p.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.jointRadius=p.radius),g.visible=p!==null}let u=l.joints["index-finger-tip"],d=l.joints["thumb-tip"],c=u.position.distanceTo(d.position),h=.02,f=.005;l.inputState.pinching&&c>h+f?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&c<=h-f&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else s!==null&&e.gripSpace&&(i=t.getPose(e.gripSpace,r),i!==null&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1));a!==null&&(n=t.getPose(e.targetRaySpace,r),n===null&&i!==null&&(n=i),n!==null&&(a.matrix.fromArray(n.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),n.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(n.linearVelocity)):a.hasLinearVelocity=!1,n.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(n.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(lst)))}return a!==null&&(a.visible=n!==null),s!==null&&(s.visible=i!==null),l!==null&&(l.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){let r=new jv;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}},x0=class extends co{constructor(e,t,r,n,i,o,a,s,l,u){if(u=u!==void 0?u:Mm,u!==Mm&&u!==Ym)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===Mm&&(r=qd),r===void 0&&u===Ym&&(r=Em),super(null,n,i,o,a,s,u,r,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Pn,this.minFilter=s!==void 0?s:Pn,this.flipY=!1,this.generateMipmaps=!1}},ust=class extends qo{constructor(e,t){super();let r=this,n=null,i=1,o=null,a="local-floor",s=1,l=null,u=null,d=null,c=null,h=null,f=null,m=t.getContextAttributes(),p=null,g=null,v=[],b=[],y=new Set,x=new Map,S=new oa;S.layers.enable(1),S.viewport=new or;let w=new oa;w.layers.enable(2),w.viewport=new or;let _=[S,w],C=new sst;C.layers.enable(1),C.layers.enable(2);let E=null,A=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function($){let U=v[$];return U===void 0&&(U=new XD,v[$]=U),U.getTargetRaySpace()},this.getControllerGrip=function($){let U=v[$];return U===void 0&&(U=new XD,v[$]=U),U.getGripSpace()},this.getHand=function($){let U=v[$];return U===void 0&&(U=new XD,v[$]=U),U.getHandSpace()};function M($){let U=b.indexOf($.inputSource);if(U===-1)return;let H=v[U];H!==void 0&&H.dispatchEvent({type:$.type,data:$.inputSource})}function I(){n.removeEventListener("select",M),n.removeEventListener("selectstart",M),n.removeEventListener("selectend",M),n.removeEventListener("squeeze",M),n.removeEventListener("squeezestart",M),n.removeEventListener("squeezeend",M),n.removeEventListener("end",I),n.removeEventListener("inputsourceschange",O);for(let $=0;$<v.length;$++){let U=b[$];U!==null&&(b[$]=null,v[$].disconnect(U))}E=null,A=null,e.setRenderTarget(p),h=null,c=null,d=null,n=null,g=null,j.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function($){i=$,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function($){a=$,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function($){l=$},this.getBaseLayer=function(){return c!==null?c:h},this.getBinding=function(){return d},this.getFrame=function(){return f},this.getSession=function(){return n},this.setSession=async function($){if(n=$,n!==null){if(p=e.getRenderTarget(),n.addEventListener("select",M),n.addEventListener("selectstart",M),n.addEventListener("selectend",M),n.addEventListener("squeeze",M),n.addEventListener("squeezestart",M),n.addEventListener("squeezeend",M),n.addEventListener("end",I),n.addEventListener("inputsourceschange",O),m.xrCompatible!==!0&&await t.makeXRCompatible(),n.renderState.layers===void 0||e.capabilities.isWebGL2===!1){let U={antialias:n.renderState.layers===void 0?m.antialias:!0,alpha:m.alpha,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:i};h=new XRWebGLLayer(n,t,U),n.updateRenderState({baseLayer:h}),g=new cn(h.framebufferWidth,h.framebufferHeight,{format:qs,type:pa,encoding:e.outputEncoding,stencilBuffer:m.stencil})}else{let U=null,H=null,V=null;m.depth&&(V=m.stencil?35056:33190,U=m.stencil?Ym:Mm,H=m.stencil?Em:qd);let Q={colorFormat:32856,depthFormat:V,scaleFactor:i};d=new XRWebGLBinding(n,t),c=d.createProjectionLayer(Q),n.updateRenderState({layers:[c]}),g=new cn(c.textureWidth,c.textureHeight,{format:qs,type:pa,depthTexture:new x0(c.textureWidth,c.textureHeight,H,void 0,void 0,void 0,void 0,void 0,void 0,U),stencilBuffer:m.stencil,encoding:e.outputEncoding,samples:m.antialias?4:0});let X=e.properties.get(g);X.__ignoreDepthValues=c.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(s),l=null,o=await n.requestReferenceSpace(a),j.setContext(n),j.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function O($){for(let U=0;U<$.removed.length;U++){let H=$.removed[U],V=b.indexOf(H);V>=0&&(b[V]=null,v[V].disconnect(H))}for(let U=0;U<$.added.length;U++){let H=$.added[U],V=b.indexOf(H);if(V===-1){for(let X=0;X<v.length;X++)if(X>=b.length){b.push(H),V=X;break}else if(b[X]===null){b[X]=H,V=X;break}if(V===-1)break}let Q=v[V];Q&&Q.connect(H)}}let T=new F,D=new F;function N($,U,H){T.setFromMatrixPosition(U.matrixWorld),D.setFromMatrixPosition(H.matrixWorld);let V=T.distanceTo(D),Q=U.projectionMatrix.elements,X=H.projectionMatrix.elements,ne=Q[14]/(Q[10]-1),J=Q[14]/(Q[10]+1),W=(Q[9]+1)/Q[5],te=(Q[9]-1)/Q[5],Z=(Q[8]-1)/Q[0],q=(X[8]+1)/X[0],ie=ne*Z,he=ne*q,ae=V/(-Z+q),be=ae*-Z;U.matrixWorld.decompose($.position,$.quaternion,$.scale),$.translateX(be),$.translateZ(ae),$.matrixWorld.compose($.position,$.quaternion,$.scale),$.matrixWorldInverse.copy($.matrixWorld).invert();let ye=ne+ae,Se=J+ae,me=ie-be,Pe=he+(V-be),Ae=W*J/Se*ye,K=te*J/Se*ye;$.projectionMatrix.makePerspective(me,Pe,Ae,K,ye,Se)}function k($,U){U===null?$.matrixWorld.copy($.matrix):$.matrixWorld.multiplyMatrices(U.matrixWorld,$.matrix),$.matrixWorldInverse.copy($.matrixWorld).invert()}this.updateCamera=function($){if(n===null)return;C.near=w.near=S.near=$.near,C.far=w.far=S.far=$.far,(E!==C.near||A!==C.far)&&(n.updateRenderState({depthNear:C.near,depthFar:C.far}),E=C.near,A=C.far);let U=$.parent,H=C.cameras;k(C,U);for(let Q=0;Q<H.length;Q++)k(H[Q],U);C.matrixWorld.decompose(C.position,C.quaternion,C.scale),$.matrix.copy(C.matrix),$.matrix.decompose($.position,$.quaternion,$.scale);let V=$.children;for(let Q=0,X=V.length;Q<X;Q++)V[Q].updateMatrixWorld(!0);H.length===2?N(C,S,w):C.projectionMatrix.copy(S.projectionMatrix)},this.getCamera=function(){return C},this.getFoveation=function(){if(!(c===null&&h===null))return s},this.setFoveation=function($){s=$,c!==null&&(c.fixedFoveation=$),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=$)},this.getPlanes=function(){return y};let R=null;function z($,U){if(u=U.getViewerPose(l||o),f=U,u!==null){let H=u.views;h!==null&&(e.setRenderTargetFramebuffer(g,h.framebuffer),e.setRenderTarget(g));let V=!1;H.length!==C.cameras.length&&(C.cameras.length=0,V=!0);for(let Q=0;Q<H.length;Q++){let X=H[Q],ne=null;if(h!==null)ne=h.getViewport(X);else{let W=d.getViewSubImage(c,X);ne=W.viewport,Q===0&&(e.setRenderTargetTextures(g,W.colorTexture,c.ignoreDepthValues?void 0:W.depthStencilTexture),e.setRenderTarget(g))}let J=_[Q];J===void 0&&(J=new oa,J.layers.enable(Q),J.viewport=new or,_[Q]=J),J.matrix.fromArray(X.transform.matrix),J.projectionMatrix.fromArray(X.projectionMatrix),J.viewport.set(ne.x,ne.y,ne.width,ne.height),Q===0&&C.matrix.copy(J.matrix),V===!0&&C.cameras.push(J)}}for(let H=0;H<v.length;H++){let V=b[H],Q=v[H];V!==null&&Q!==void 0&&Q.update(V,U,l||o)}if(R&&R($,U),U.detectedPlanes){r.dispatchEvent({type:"planesdetected",data:U.detectedPlanes});let H=null;for(let V of y)U.detectedPlanes.has(V)||(H===null&&(H=[]),H.push(V));if(H!==null)for(let V of H)y.delete(V),x.delete(V),r.dispatchEvent({type:"planeremoved",data:V});for(let V of U.detectedPlanes)if(!y.has(V))y.add(V),x.set(V,U.lastChangedTime),r.dispatchEvent({type:"planeadded",data:V});else{let Q=x.get(V);V.lastChangedTime>Q&&(x.set(V,V.lastChangedTime),r.dispatchEvent({type:"planechanged",data:V}))}}f=null}let j=new Sae;j.setAnimationLoop(z),this.setAnimationLoop=function($){R=$},this.dispose=function(){}}};function cst(e,t){function r(p,g){g.color.getRGB(p.fogColor.value,wae(e)),g.isFog?(p.fogNear.value=g.near,p.fogFar.value=g.far):g.isFogExp2&&(p.fogDensity.value=g.density)}function n(p,g,v,b,y){g.isMeshBasicMaterial||g.isMeshLambertMaterial?i(p,g):g.isMeshToonMaterial?(i(p,g),d(p,g)):g.isMeshPhongMaterial?(i(p,g),u(p,g)):g.isMeshStandardMaterial?(i(p,g),c(p,g),g.isMeshPhysicalMaterial&&h(p,g,y)):g.isMeshMatcapMaterial?(i(p,g),f(p,g)):g.isMeshDepthMaterial?i(p,g):g.isMeshDistanceMaterial?(i(p,g),m(p,g)):g.isMeshNormalMaterial?i(p,g):g.isLineBasicMaterial?(o(p,g),g.isLineDashedMaterial&&a(p,g)):g.isPointsMaterial?s(p,g,v,b):g.isSpriteMaterial?l(p,g):g.isShadowMaterial?(p.color.value.copy(g.color),p.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function i(p,g){p.opacity.value=g.opacity,g.color&&p.diffuse.value.copy(g.color),g.emissive&&p.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(p.map.value=g.map),g.alphaMap&&(p.alphaMap.value=g.alphaMap),g.bumpMap&&(p.bumpMap.value=g.bumpMap,p.bumpScale.value=g.bumpScale,g.side===Po&&(p.bumpScale.value*=-1)),g.displacementMap&&(p.displacementMap.value=g.displacementMap,p.displacementScale.value=g.displacementScale,p.displacementBias.value=g.displacementBias),g.emissiveMap&&(p.emissiveMap.value=g.emissiveMap),g.normalMap&&(p.normalMap.value=g.normalMap,p.normalScale.value.copy(g.normalScale),g.side===Po&&p.normalScale.value.negate()),g.specularMap&&(p.specularMap.value=g.specularMap),g.alphaTest>0&&(p.alphaTest.value=g.alphaTest);let v=t.get(g).envMap;if(v&&(p.envMap.value=v,p.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,p.reflectivity.value=g.reflectivity,p.ior.value=g.ior,p.refractionRatio.value=g.refractionRatio),g.lightMap){p.lightMap.value=g.lightMap;let x=e.physicallyCorrectLights!==!0?Math.PI:1;p.lightMapIntensity.value=g.lightMapIntensity*x}g.aoMap&&(p.aoMap.value=g.aoMap,p.aoMapIntensity.value=g.aoMapIntensity);let b;g.map?b=g.map:g.specularMap?b=g.specularMap:g.displacementMap?b=g.displacementMap:g.normalMap?b=g.normalMap:g.bumpMap?b=g.bumpMap:g.roughnessMap?b=g.roughnessMap:g.metalnessMap?b=g.metalnessMap:g.alphaMap?b=g.alphaMap:g.emissiveMap?b=g.emissiveMap:g.clearcoatMap?b=g.clearcoatMap:g.clearcoatNormalMap?b=g.clearcoatNormalMap:g.clearcoatRoughnessMap?b=g.clearcoatRoughnessMap:g.iridescenceMap?b=g.iridescenceMap:g.iridescenceThicknessMap?b=g.iridescenceThicknessMap:g.specularIntensityMap?b=g.specularIntensityMap:g.specularColorMap?b=g.specularColorMap:g.transmissionMap?b=g.transmissionMap:g.thicknessMap?b=g.thicknessMap:g.sheenColorMap?b=g.sheenColorMap:g.sheenRoughnessMap&&(b=g.sheenRoughnessMap),b!==void 0&&(b.isWebGLRenderTarget&&(b=b.texture),b.matrixAutoUpdate===!0&&b.updateMatrix(),p.uvTransform.value.copy(b.matrix));let y;g.aoMap?y=g.aoMap:g.lightMap&&(y=g.lightMap),y!==void 0&&(y.isWebGLRenderTarget&&(y=y.texture),y.matrixAutoUpdate===!0&&y.updateMatrix(),p.uv2Transform.value.copy(y.matrix))}function o(p,g){p.diffuse.value.copy(g.color),p.opacity.value=g.opacity}function a(p,g){p.dashSize.value=g.dashSize,p.totalSize.value=g.dashSize+g.gapSize,p.scale.value=g.scale}function s(p,g,v,b){p.diffuse.value.copy(g.color),p.opacity.value=g.opacity,p.size.value=g.size*v,p.scale.value=b*.5,g.map&&(p.map.value=g.map),g.alphaMap&&(p.alphaMap.value=g.alphaMap),g.alphaTest>0&&(p.alphaTest.value=g.alphaTest);let y;g.map?y=g.map:g.alphaMap&&(y=g.alphaMap),y!==void 0&&(y.matrixAutoUpdate===!0&&y.updateMatrix(),p.uvTransform.value.copy(y.matrix))}function l(p,g){p.diffuse.value.copy(g.color),p.opacity.value=g.opacity,p.rotation.value=g.rotation,g.map&&(p.map.value=g.map),g.alphaMap&&(p.alphaMap.value=g.alphaMap),g.alphaTest>0&&(p.alphaTest.value=g.alphaTest);let v;g.map?v=g.map:g.alphaMap&&(v=g.alphaMap),v!==void 0&&(v.matrixAutoUpdate===!0&&v.updateMatrix(),p.uvTransform.value.copy(v.matrix))}function u(p,g){p.specular.value.copy(g.specular),p.shininess.value=Math.max(g.shininess,1e-4)}function d(p,g){g.gradientMap&&(p.gradientMap.value=g.gradientMap)}function c(p,g){p.roughness.value=g.roughness,p.metalness.value=g.metalness,g.roughnessMap&&(p.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(p.metalnessMap.value=g.metalnessMap),t.get(g).envMap&&(p.envMapIntensity.value=g.envMapIntensity)}function h(p,g,v){p.ior.value=g.ior,g.sheen>0&&(p.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),p.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(p.sheenColorMap.value=g.sheenColorMap),g.sheenRoughnessMap&&(p.sheenRoughnessMap.value=g.sheenRoughnessMap)),g.clearcoat>0&&(p.clearcoat.value=g.clearcoat,p.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(p.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(p.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(p.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),p.clearcoatNormalMap.value=g.clearcoatNormalMap,g.side===Po&&p.clearcoatNormalScale.value.negate())),g.iridescence>0&&(p.iridescence.value=g.iridescence,p.iridescenceIOR.value=g.iridescenceIOR,p.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],p.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(p.iridescenceMap.value=g.iridescenceMap),g.iridescenceThicknessMap&&(p.iridescenceThicknessMap.value=g.iridescenceThicknessMap)),g.transmission>0&&(p.transmission.value=g.transmission,p.transmissionSamplerMap.value=v.texture,p.transmissionSamplerSize.value.set(v.width,v.height),g.transmissionMap&&(p.transmissionMap.value=g.transmissionMap),p.thickness.value=g.thickness,g.thicknessMap&&(p.thicknessMap.value=g.thicknessMap),p.attenuationDistance.value=g.attenuationDistance,p.attenuationColor.value.copy(g.attenuationColor)),p.specularIntensity.value=g.specularIntensity,p.specularColor.value.copy(g.specularColor),g.specularIntensityMap&&(p.specularIntensityMap.value=g.specularIntensityMap),g.specularColorMap&&(p.specularColorMap.value=g.specularColorMap)}function f(p,g){g.matcap&&(p.matcap.value=g.matcap)}function m(p,g){p.referencePosition.value.copy(g.referencePosition),p.nearDistance.value=g.nearDistance,p.farDistance.value=g.farDistance}return{refreshFogUniforms:r,refreshMaterialUniforms:n}}function dst(e,t,r,n){let i={},o={},a=[],s=r.isWebGL2?e.getParameter(35375):0;function l(b,y){let x=y.program;n.uniformBlockBinding(b,x)}function u(b,y){let x=i[b.id];x===void 0&&(m(b),x=d(b),i[b.id]=x,b.addEventListener("dispose",g));let S=y.program;n.updateUBOMapping(b,S);let w=t.render.frame;o[b.id]!==w&&(h(b),o[b.id]=w)}function d(b){let y=c();b.__bindingPointIndex=y;let x=e.createBuffer(),S=b.__size,w=b.usage;return e.bindBuffer(35345,x),e.bufferData(35345,S,w),e.bindBuffer(35345,null),e.bindBufferBase(35345,y,x),x}function c(){for(let b=0;b<s;b++)if(a.indexOf(b)===-1)return a.push(b),b;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(b){let y=i[b.id],x=b.uniforms,S=b.__cache;e.bindBuffer(35345,y);for(let w=0,_=x.length;w<_;w++){let C=x[w];if(f(C,w,S)===!0){let E=C.__offset,A=Array.isArray(C.value)?C.value:[C.value],M=0;for(let I=0;I<A.length;I++){let O=A[I],T=p(O);typeof O=="number"?(C.__data[0]=O,e.bufferSubData(35345,E+M,C.__data)):O.isMatrix3?(C.__data[0]=O.elements[0],C.__data[1]=O.elements[1],C.__data[2]=O.elements[2],C.__data[3]=O.elements[0],C.__data[4]=O.elements[3],C.__data[5]=O.elements[4],C.__data[6]=O.elements[5],C.__data[7]=O.elements[0],C.__data[8]=O.elements[6],C.__data[9]=O.elements[7],C.__data[10]=O.elements[8],C.__data[11]=O.elements[0]):(O.toArray(C.__data,M),M+=T.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(35345,E,C.__data)}}e.bindBuffer(35345,null)}function f(b,y,x){let S=b.value;if(x[y]===void 0){if(typeof S=="number")x[y]=S;else{let w=Array.isArray(S)?S:[S],_=[];for(let C=0;C<w.length;C++)_.push(w[C].clone());x[y]=_}return!0}else if(typeof S=="number"){if(x[y]!==S)return x[y]=S,!0}else{let w=Array.isArray(x[y])?x[y]:[x[y]],_=Array.isArray(S)?S:[S];for(let C=0;C<w.length;C++){let E=w[C];if(E.equals(_[C])===!1)return E.copy(_[C]),!0}}return!1}function m(b){let y=b.uniforms,x=0,S=16,w=0;for(let _=0,C=y.length;_<C;_++){let E=y[_],A={boundary:0,storage:0},M=Array.isArray(E.value)?E.value:[E.value];for(let I=0,O=M.length;I<O;I++){let T=M[I],D=p(T);A.boundary+=D.boundary,A.storage+=D.storage}if(E.__data=new Float32Array(A.storage/Float32Array.BYTES_PER_ELEMENT),E.__offset=x,_>0){w=x%S;let I=S-w;w!==0&&I-A.boundary<0&&(x+=S-w,E.__offset=x)}x+=A.storage}return w=x%S,w>0&&(x+=S-w),b.__size=x,b.__cache={},this}function p(b){let y={boundary:0,storage:0};return typeof b=="number"?(y.boundary=4,y.storage=4):b.isVector2?(y.boundary=8,y.storage=8):b.isVector3||b.isColor?(y.boundary=16,y.storage=12):b.isVector4?(y.boundary=16,y.storage=16):b.isMatrix3?(y.boundary=48,y.storage=48):b.isMatrix4?(y.boundary=64,y.storage=64):b.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",b),y}function g(b){let y=b.target;y.removeEventListener("dispose",g);let x=a.indexOf(y.__bindingPointIndex);a.splice(x,1),e.deleteBuffer(i[y.id]),delete i[y.id],delete o[y.id]}function v(){for(let b in i)e.deleteBuffer(i[b]);a=[],i={},o={}}return{bind:l,update:u,dispose:v}}function hst(){let e=iP("canvas");return e.style.display="block",e}function Pae(e={}){this.isWebGLRenderer=!0;let t=e.canvas!==void 0?e.canvas:hst(),r=e.context!==void 0?e.context:null,n=e.depth!==void 0?e.depth:!0,i=e.stencil!==void 0?e.stencil:!0,o=e.antialias!==void 0?e.antialias:!1,a=e.premultipliedAlpha!==void 0?e.premultipliedAlpha:!0,s=e.preserveDrawingBuffer!==void 0?e.preserveDrawingBuffer:!1,l=e.powerPreference!==void 0?e.powerPreference:"default",u=e.failIfMajorPerformanceCaveat!==void 0?e.failIfMajorPerformanceCaveat:!1,d;r!==null?d=r.getContextAttributes().alpha:d=e.alpha!==void 0?e.alpha:!1;let c=null,h=null,f=[],m=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Zc,this.physicallyCorrectLights=!1,this.toneMapping=Qd,this.toneMappingExposure=1;let p=this,g=!1,v=0,b=0,y=null,x=-1,S=null,w=new or,_=new or,C=null,E=t.width,A=t.height,M=1,I=null,O=null,T=new or(0,0,E,A),D=new or(0,0,E,A),N=!1,k=new z4,R=!1,z=!1,j=null,$=new qe,U=new ue,H=new F,V={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Q(){return y===null?M:1}let X=r;function ne(ee,_e){for(let ke=0;ke<ee.length;ke++){let Y=ee[ke],se=t.getContext(Y,_e);if(se!==null)return se}return null}try{let ee={alpha:!0,depth:n,stencil:i,antialias:o,premultipliedAlpha:a,preserveDrawingBuffer:s,powerPreference:l,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${ob}`),t.addEventListener("webglcontextlost",et,!1),t.addEventListener("webglcontextrestored",st,!1),t.addEventListener("webglcontextcreationerror",Ut,!1),X===null){let _e=["webgl2","webgl","experimental-webgl"];if(p.isWebGL1Renderer===!0&&_e.shift(),X=ne(_e,ee),X===null)throw ne(_e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}X.getShaderPrecisionFormat===void 0&&(X.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ee){throw console.error("THREE.WebGLRenderer: "+ee.message),ee}let J,W,te,Z,q,ie,he,ae,be,ye,Se,me,Pe,Ae,K,G,de,Ee,Me,Le,De,Ce,pe,Ge;function Ke(){J=new Aot(X),W=new bot(X,J,e),J.init(W),Ce=new ast(X,J,W),te=new ist(X,J,W),Z=new Pot,q=new Gat,ie=new ost(X,J,te,q,W,Ce,Z),he=new wot(p),ae=new Cot(p),be=new zrt(X,W),pe=new vot(X,J,be,W),ye=new Eot(X,be,Z,pe),Se=new Dot(X,ye,be,Z),Me=new Iot(X,W,ie),G=new xot(q),me=new Hat(p,he,ae,J,W,pe,G),Pe=new cst(p,q),Ae=new qat,K=new Jat(J,W),Ee=new got(p,he,ae,te,Se,d,a),de=new nst(p,Se,W),Ge=new dst(X,Z,W,te),Le=new yot(X,J,Z,W),De=new Mot(X,J,Z,W),Z.programs=me.programs,p.capabilities=W,p.extensions=J,p.properties=q,p.renderLists=Ae,p.shadowMap=de,p.state=te,p.info=Z}Ke();let Xe=new ust(p,X);this.xr=Xe,this.getContext=function(){return X},this.getContextAttributes=function(){return X.getContextAttributes()},this.forceContextLoss=function(){let ee=J.get("WEBGL_lose_context");ee&&ee.loseContext()},this.forceContextRestore=function(){let ee=J.get("WEBGL_lose_context");ee&&ee.restoreContext()},this.getPixelRatio=function(){return M},this.setPixelRatio=function(ee){ee!==void 0&&(M=ee,this.setSize(E,A,!1))},this.getSize=function(ee){return ee.set(E,A)},this.setSize=function(ee,_e,ke){if(Xe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}E=ee,A=_e,t.width=Math.floor(ee*M),t.height=Math.floor(_e*M),ke!==!1&&(t.style.width=ee+"px",t.style.height=_e+"px"),this.setViewport(0,0,ee,_e)},this.getDrawingBufferSize=function(ee){return ee.set(E*M,A*M).floor()},this.setDrawingBufferSize=function(ee,_e,ke){E=ee,A=_e,M=ke,t.width=Math.floor(ee*ke),t.height=Math.floor(_e*ke),this.setViewport(0,0,ee,_e)},this.getCurrentViewport=function(ee){return ee.copy(w)},this.getViewport=function(ee){return ee.copy(T)},this.setViewport=function(ee,_e,ke,Y){ee.isVector4?T.set(ee.x,ee.y,ee.z,ee.w):T.set(ee,_e,ke,Y),te.viewport(w.copy(T).multiplyScalar(M).floor())},this.getScissor=function(ee){return ee.copy(D)},this.setScissor=function(ee,_e,ke,Y){ee.isVector4?D.set(ee.x,ee.y,ee.z,ee.w):D.set(ee,_e,ke,Y),te.scissor(_.copy(D).multiplyScalar(M).floor())},this.getScissorTest=function(){return N},this.setScissorTest=function(ee){te.setScissorTest(N=ee)},this.setOpaqueSort=function(ee){I=ee},this.setTransparentSort=function(ee){O=ee},this.getClearColor=function(ee){return ee.copy(Ee.getClearColor())},this.setClearColor=function(){Ee.setClearColor.apply(Ee,arguments)},this.getClearAlpha=function(){return Ee.getClearAlpha()},this.setClearAlpha=function(){Ee.setClearAlpha.apply(Ee,arguments)},this.clear=function(ee=!0,_e=!0,ke=!0){let Y=0;ee&&(Y|=16384),_e&&(Y|=256),ke&&(Y|=1024),X.clear(Y)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",et,!1),t.removeEventListener("webglcontextrestored",st,!1),t.removeEventListener("webglcontextcreationerror",Ut,!1),Ae.dispose(),K.dispose(),q.dispose(),he.dispose(),ae.dispose(),Se.dispose(),pe.dispose(),Ge.dispose(),me.dispose(),Xe.dispose(),Xe.removeEventListener("sessionstart",Je),Xe.removeEventListener("sessionend",Tt),j&&(j.dispose(),j=null),Zt.stop()};function et(ee){ee.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function st(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;let ee=Z.autoReset,_e=de.enabled,ke=de.autoUpdate,Y=de.needsUpdate,se=de.type;Ke(),Z.autoReset=ee,de.enabled=_e,de.autoUpdate=ke,de.needsUpdate=Y,de.type=se}function Ut(ee){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ee.statusMessage)}function Cr(ee){let _e=ee.target;_e.removeEventListener("dispose",Cr),Mr(_e)}function Mr(ee){fe(ee),q.remove(ee)}function fe(ee){let _e=q.get(ee).programs;_e!==void 0&&(_e.forEach(function(ke){me.releaseProgram(ke)}),ee.isShaderMaterial&&me.releaseShaderCache(ee))}this.renderBufferDirect=function(ee,_e,ke,Y,se,re){_e===null&&(_e=V);let oe=se.isMesh&&se.matrixWorld.determinant()<0,ce=No(ee,_e,ke,Y,se);te.setMaterial(Y,oe);let we=ke.index,Be=1;Y.wireframe===!0&&(we=ye.getWireframeAttribute(ke),Be=2);let Ye=ke.drawRange,Fe=ke.attributes.position,tt=Ye.start*Be,je=(Ye.start+Ye.count)*Be;re!==null&&(tt=Math.max(tt,re.start*Be),je=Math.min(je,(re.start+re.count)*Be)),we!==null?(tt=Math.max(tt,0),je=Math.min(je,we.count)):Fe!=null&&(tt=Math.max(tt,0),je=Math.min(je,Fe.count));let Ne=je-tt;if(Ne<0||Ne===1/0)return;pe.setup(se,Y,ce,ke,we);let ut,pt=Le;if(we!==null&&(ut=be.get(we),pt=De,pt.setIndex(ut)),se.isMesh)Y.wireframe===!0?(te.setLineWidth(Y.wireframeLinewidth*Q()),pt.setMode(1)):pt.setMode(4);else if(se.isLine){let ot=Y.linewidth;ot===void 0&&(ot=1),te.setLineWidth(ot*Q()),se.isLineSegments?pt.setMode(1):se.isLineLoop?pt.setMode(2):pt.setMode(3)}else se.isPoints?pt.setMode(0):se.isSprite&&pt.setMode(4);if(se.isInstancedMesh)pt.renderInstances(tt,Ne,se.count);else if(ke.isInstancedBufferGeometry){let ot=ke._maxInstanceCount!==void 0?ke._maxInstanceCount:1/0,er=Math.min(ke.instanceCount,ot);pt.renderInstances(tt,Ne,er)}else pt.render(tt,Ne)},this.compile=function(ee,_e){function ke(Y,se,re){Y.transparent===!0&&Y.side===ms&&Y.forceSinglePass===!1?(Y.side=Po,Y.needsUpdate=!0,Vr(Y,se,re),Y.side=Bu,Y.needsUpdate=!0,Vr(Y,se,re),Y.side=ms):Vr(Y,se,re)}h=K.get(ee),h.init(),m.push(h),ee.traverseVisible(function(Y){Y.isLight&&Y.layers.test(_e.layers)&&(h.pushLight(Y),Y.castShadow&&h.pushShadow(Y))}),h.setupLights(p.physicallyCorrectLights),ee.traverse(function(Y){let se=Y.material;if(se)if(Array.isArray(se))for(let re=0;re<se.length;re++){let oe=se[re];ke(oe,ee,Y)}else ke(se,ee,Y)}),m.pop(),h=null};let Oe=null;function ze(ee){Oe&&Oe(ee)}function Je(){Zt.stop()}function Tt(){Zt.start()}let Zt=new Sae;Zt.setAnimationLoop(ze),typeof self<"u"&&Zt.setContext(self),this.setAnimationLoop=function(ee){Oe=ee,Xe.setAnimationLoop(ee),ee===null?Zt.stop():Zt.start()},Xe.addEventListener("sessionstart",Je),Xe.addEventListener("sessionend",Tt),this.render=function(ee,_e){if(_e!==void 0&&_e.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(g===!0)return;ee.matrixWorldAutoUpdate===!0&&ee.updateMatrixWorld(),_e.parent===null&&_e.matrixWorldAutoUpdate===!0&&_e.updateMatrixWorld(),Xe.enabled===!0&&Xe.isPresenting===!0&&(Xe.cameraAutoUpdate===!0&&Xe.updateCamera(_e),_e=Xe.getCamera()),ee.isScene===!0&&ee.onBeforeRender(p,ee,_e,y),h=K.get(ee,m.length),h.init(),m.push(h),$.multiplyMatrices(_e.projectionMatrix,_e.matrixWorldInverse),k.setFromProjectionMatrix($),z=this.localClippingEnabled,R=G.init(this.clippingPlanes,z),c=Ae.get(ee,f.length),c.init(),f.push(c),$r(ee,_e,0,p.sortObjects),c.finish(),p.sortObjects===!0&&c.sort(I,O),R===!0&&G.beginShadows();let ke=h.state.shadowsArray;if(de.render(ke,ee,_e),R===!0&&G.endShadows(),this.info.autoReset===!0&&this.info.reset(),Ee.render(c,ee),h.setupLights(p.physicallyCorrectLights),_e.isArrayCamera){let Y=_e.cameras;for(let se=0,re=Y.length;se<re;se++){let oe=Y[se];On(c,ee,oe,oe.viewport)}}else On(c,ee,_e);y!==null&&(ie.updateMultisampleRenderTarget(y),ie.updateRenderTargetMipmap(y)),ee.isScene===!0&&ee.onAfterRender(p,ee,_e),pe.resetDefaultState(),x=-1,S=null,m.pop(),m.length>0?h=m[m.length-1]:h=null,f.pop(),f.length>0?c=f[f.length-1]:c=null};function $r(ee,_e,ke,Y){if(ee.visible===!1)return;if(ee.layers.test(_e.layers)){if(ee.isGroup)ke=ee.renderOrder;else if(ee.isLOD)ee.autoUpdate===!0&&ee.update(_e);else if(ee.isLight)h.pushLight(ee),ee.castShadow&&h.pushShadow(ee);else if(ee.isSprite){if(!ee.frustumCulled||k.intersectsSprite(ee)){Y&&H.setFromMatrixPosition(ee.matrixWorld).applyMatrix4($);let re=Se.update(ee),oe=ee.material;oe.visible&&c.push(ee,re,oe,ke,H.z,null)}}else if((ee.isMesh||ee.isLine||ee.isPoints)&&(ee.isSkinnedMesh&&ee.skeleton.frame!==Z.render.frame&&(ee.skeleton.update(),ee.skeleton.frame=Z.render.frame),!ee.frustumCulled||k.intersectsObject(ee))){Y&&H.setFromMatrixPosition(ee.matrixWorld).applyMatrix4($);let re=Se.update(ee),oe=ee.material;if(Array.isArray(oe)){let ce=re.groups;for(let we=0,Be=ce.length;we<Be;we++){let Ye=ce[we],Fe=oe[Ye.materialIndex];Fe&&Fe.visible&&c.push(ee,re,Fe,ke,H.z,Ye)}}else oe.visible&&c.push(ee,re,oe,ke,H.z,null)}}let se=ee.children;for(let re=0,oe=se.length;re<oe;re++)$r(se[re],_e,ke,Y)}function On(ee,_e,ke,Y){let se=ee.opaque,re=ee.transmissive,oe=ee.transparent;h.setupLightsView(ke),R===!0&&G.setGlobalState(p.clippingPlanes,ke),re.length>0&&Ko(se,_e,ke),Y&&te.viewport(w.copy(Y)),se.length>0&&Br(se,_e,ke),re.length>0&&Br(re,_e,ke),oe.length>0&&Br(oe,_e,ke),te.buffers.depth.setTest(!0),te.buffers.depth.setMask(!0),te.buffers.color.setMask(!0),te.setPolygonOffset(!1)}function Ko(ee,_e,ke){let Y=W.isWebGL2;j===null&&(j=new cn(1,1,{generateMipmaps:!0,type:J.has("EXT_color_buffer_half_float")?Xm:pa,minFilter:y0,samples:Y&&o===!0?4:0})),p.getDrawingBufferSize(U),Y?j.setSize(U.x,U.y):j.setSize(nP(U.x),nP(U.y));let se=p.getRenderTarget();p.setRenderTarget(j),p.clear();let re=p.toneMapping;p.toneMapping=Qd,Br(ee,_e,ke),p.toneMapping=re,ie.updateMultisampleRenderTarget(j),ie.updateRenderTargetMipmap(j),p.setRenderTarget(se)}function Br(ee,_e,ke){let Y=_e.isScene===!0?_e.overrideMaterial:null;for(let se=0,re=ee.length;se<re;se++){let oe=ee[se],ce=oe.object,we=oe.geometry,Be=Y===null?oe.material:Y,Ye=oe.group;ce.layers.test(ke.layers)&&Zi(ce,_e,ke,we,Be,Ye)}}function Zi(ee,_e,ke,Y,se,re){ee.onBeforeRender(p,_e,ke,Y,se,re),ee.modelViewMatrix.multiplyMatrices(ke.matrixWorldInverse,ee.matrixWorld),ee.normalMatrix.getNormalMatrix(ee.modelViewMatrix),se.onBeforeRender(p,_e,ke,Y,ee,re),se.transparent===!0&&se.side===ms&&se.forceSinglePass===!1?(se.side=Po,se.needsUpdate=!0,p.renderBufferDirect(ke,_e,Y,se,ee,re),se.side=Bu,se.needsUpdate=!0,p.renderBufferDirect(ke,_e,Y,se,ee,re),se.side=ms):p.renderBufferDirect(ke,_e,Y,se,ee,re),ee.onAfterRender(p,_e,ke,Y,se,re)}function Vr(ee,_e,ke){_e.isScene!==!0&&(_e=V);let Y=q.get(ee),se=h.state.lights,re=h.state.shadowsArray,oe=se.state.version,ce=me.getParameters(ee,se.state,re,_e,ke),we=me.getProgramCacheKey(ce),Be=Y.programs;Y.environment=ee.isMeshStandardMaterial?_e.environment:null,Y.fog=_e.fog,Y.envMap=(ee.isMeshStandardMaterial?ae:he).get(ee.envMap||Y.environment),Be===void 0&&(ee.addEventListener("dispose",Cr),Be=new Map,Y.programs=Be);let Ye=Be.get(we);if(Ye!==void 0){if(Y.currentProgram===Ye&&Y.lightsStateVersion===oe)return Cn(ee,ce),Ye}else ce.uniforms=me.getUniforms(ee),ee.onBuild(ke,ce,p),ee.onBeforeCompile(ce,p),Ye=me.acquireProgram(ce,we),Be.set(we,Ye),Y.uniforms=ce.uniforms;let Fe=Y.uniforms;(!ee.isShaderMaterial&&!ee.isRawShaderMaterial||ee.clipping===!0)&&(Fe.clippingPlanes=G.uniform),Cn(ee,ce),Y.needsLights=ll(ee),Y.lightsStateVersion=oe,Y.needsLights&&(Fe.ambientLightColor.value=se.state.ambient,Fe.lightProbe.value=se.state.probe,Fe.directionalLights.value=se.state.directional,Fe.directionalLightShadows.value=se.state.directionalShadow,Fe.spotLights.value=se.state.spot,Fe.spotLightShadows.value=se.state.spotShadow,Fe.rectAreaLights.value=se.state.rectArea,Fe.ltc_1.value=se.state.rectAreaLTC1,Fe.ltc_2.value=se.state.rectAreaLTC2,Fe.pointLights.value=se.state.point,Fe.pointLightShadows.value=se.state.pointShadow,Fe.hemisphereLights.value=se.state.hemi,Fe.directionalShadowMap.value=se.state.directionalShadowMap,Fe.directionalShadowMatrix.value=se.state.directionalShadowMatrix,Fe.spotShadowMap.value=se.state.spotShadowMap,Fe.spotLightMatrix.value=se.state.spotLightMatrix,Fe.spotLightMap.value=se.state.spotLightMap,Fe.pointShadowMap.value=se.state.pointShadowMap,Fe.pointShadowMatrix.value=se.state.pointShadowMatrix);let tt=Ye.getUniforms(),je=KA.seqWithValue(tt.seq,Fe);return Y.currentProgram=Ye,Y.uniformsList=je,Ye}function Cn(ee,_e){let ke=q.get(ee);ke.outputEncoding=_e.outputEncoding,ke.instancing=_e.instancing,ke.skinning=_e.skinning,ke.morphTargets=_e.morphTargets,ke.morphNormals=_e.morphNormals,ke.morphColors=_e.morphColors,ke.morphTargetsCount=_e.morphTargetsCount,ke.numClippingPlanes=_e.numClippingPlanes,ke.numIntersection=_e.numClipIntersection,ke.vertexAlphas=_e.vertexAlphas,ke.vertexTangents=_e.vertexTangents,ke.toneMapping=_e.toneMapping}function No(ee,_e,ke,Y,se){_e.isScene!==!0&&(_e=V),ie.resetTextureUnits();let re=_e.fog,oe=Y.isMeshStandardMaterial?_e.environment:null,ce=y===null?p.outputEncoding:y.isXRRenderTarget===!0?y.texture.encoding:Zc,we=(Y.isMeshStandardMaterial?ae:he).get(Y.envMap||oe),Be=Y.vertexColors===!0&&!!ke.attributes.color&&ke.attributes.color.itemSize===4,Ye=!!Y.normalMap&&!!ke.attributes.tangent,Fe=!!ke.morphAttributes.position,tt=!!ke.morphAttributes.normal,je=!!ke.morphAttributes.color,Ne=Y.toneMapped?p.toneMapping:Qd,ut=ke.morphAttributes.position||ke.morphAttributes.normal||ke.morphAttributes.color,pt=ut!==void 0?ut.length:0,ot=q.get(Y),er=h.state.lights;if(R===!0&&(z===!0||ee!==S)){let gn=ee===S&&Y.id===x;G.setState(Y,ee,gn)}let dr=!1;Y.version===ot.__version?(ot.needsLights&&ot.lightsStateVersion!==er.state.version||ot.outputEncoding!==ce||se.isInstancedMesh&&ot.instancing===!1||!se.isInstancedMesh&&ot.instancing===!0||se.isSkinnedMesh&&ot.skinning===!1||!se.isSkinnedMesh&&ot.skinning===!0||ot.envMap!==we||Y.fog===!0&&ot.fog!==re||ot.numClippingPlanes!==void 0&&(ot.numClippingPlanes!==G.numPlanes||ot.numIntersection!==G.numIntersection)||ot.vertexAlphas!==Be||ot.vertexTangents!==Ye||ot.morphTargets!==Fe||ot.morphNormals!==tt||ot.morphColors!==je||ot.toneMapping!==Ne||W.isWebGL2===!0&&ot.morphTargetsCount!==pt)&&(dr=!0):(dr=!0,ot.__version=Y.version);let hr=ot.currentProgram;dr===!0&&(hr=Vr(Y,_e,se));let br=!1,fr=!1,Gr=!1,rr=hr.getUniforms(),ci=ot.uniforms;if(te.useProgram(hr.program)&&(br=!0,fr=!0,Gr=!0),Y.id!==x&&(x=Y.id,fr=!0),br||S!==ee){if(rr.setValue(X,"projectionMatrix",ee.projectionMatrix),W.logarithmicDepthBuffer&&rr.setValue(X,"logDepthBufFC",2/(Math.log(ee.far+1)/Math.LN2)),S!==ee&&(S=ee,fr=!0,Gr=!0),Y.isShaderMaterial||Y.isMeshPhongMaterial||Y.isMeshToonMaterial||Y.isMeshStandardMaterial||Y.envMap){let gn=rr.map.cameraPosition;gn!==void 0&&gn.setValue(X,H.setFromMatrixPosition(ee.matrixWorld))}(Y.isMeshPhongMaterial||Y.isMeshToonMaterial||Y.isMeshLambertMaterial||Y.isMeshBasicMaterial||Y.isMeshStandardMaterial||Y.isShaderMaterial)&&rr.setValue(X,"isOrthographic",ee.isOrthographicCamera===!0),(Y.isMeshPhongMaterial||Y.isMeshToonMaterial||Y.isMeshLambertMaterial||Y.isMeshBasicMaterial||Y.isMeshStandardMaterial||Y.isShaderMaterial||Y.isShadowMaterial||se.isSkinnedMesh)&&rr.setValue(X,"viewMatrix",ee.matrixWorldInverse)}if(se.isSkinnedMesh){rr.setOptional(X,se,"bindMatrix"),rr.setOptional(X,se,"bindMatrixInverse");let gn=se.skeleton;gn&&(W.floatVertexTextures?(gn.boneTexture===null&&gn.computeBoneTexture(),rr.setValue(X,"boneTexture",gn.boneTexture,ie),rr.setValue(X,"boneTextureSize",gn.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}let va=ke.morphAttributes;if((va.position!==void 0||va.normal!==void 0||va.color!==void 0&&W.isWebGL2===!0)&&Me.update(se,ke,Y,hr),(fr||ot.receiveShadow!==se.receiveShadow)&&(ot.receiveShadow=se.receiveShadow,rr.setValue(X,"receiveShadow",se.receiveShadow)),Y.isMeshGouraudMaterial&&Y.envMap!==null&&(ci.envMap.value=we,ci.flipEnvMap.value=we.isCubeTexture&&we.isRenderTargetTexture===!1?-1:1),fr&&(rr.setValue(X,"toneMappingExposure",p.toneMappingExposure),ot.needsLights&&Ji(ci,Gr),re&&Y.fog===!0&&Pe.refreshFogUniforms(ci,re),Pe.refreshMaterialUniforms(ci,Y,M,A,j),KA.upload(X,ot.uniformsList,ci,ie)),Y.isShaderMaterial&&Y.uniformsNeedUpdate===!0&&(KA.upload(X,ot.uniformsList,ci,ie),Y.uniformsNeedUpdate=!1),Y.isSpriteMaterial&&rr.setValue(X,"center",se.center),rr.setValue(X,"modelViewMatrix",se.modelViewMatrix),rr.setValue(X,"normalMatrix",se.normalMatrix),rr.setValue(X,"modelMatrix",se.matrixWorld),se.previousModelViewMatrix&&rr.setValue(X,"previousModelViewMatrix",se.previousModelViewMatrix),ee.previousProjectionMatrix&&rr.setValue(X,"previousProjectionMatrix",ee.previousProjectionMatrix),Y.isShaderMaterial||Y.isRawShaderMaterial){let gn=Y.uniformsGroups;for(let ei=0,zo=gn.length;ei<zo;ei++)if(W.isWebGL2){let Bn=gn[ei];Ge.update(Bn,hr),Ge.bind(Bn,hr)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return hr}function Ji(ee,_e){ee.ambientLightColor.needsUpdate=_e,ee.lightProbe.needsUpdate=_e,ee.directionalLights.needsUpdate=_e,ee.directionalLightShadows.needsUpdate=_e,ee.pointLights.needsUpdate=_e,ee.pointLightShadows.needsUpdate=_e,ee.spotLights.needsUpdate=_e,ee.spotLightShadows.needsUpdate=_e,ee.rectAreaLights.needsUpdate=_e,ee.hemisphereLights.needsUpdate=_e}function ll(ee){return ee.isMeshLambertMaterial||ee.isMeshToonMaterial||ee.isMeshPhongMaterial||ee.isMeshStandardMaterial||ee.isShadowMaterial||ee.isShaderMaterial&&ee.lights===!0}this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return b},this.getRenderTarget=function(){return y},this.setRenderTargetTextures=function(ee,_e,ke){q.get(ee.texture).__webglTexture=_e,q.get(ee.depthTexture).__webglTexture=ke;let Y=q.get(ee);Y.__hasExternalTextures=!0,Y.__hasExternalTextures&&(Y.__autoAllocateDepthBuffer=ke===void 0,Y.__autoAllocateDepthBuffer||J.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Y.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(ee,_e){let ke=q.get(ee);ke.__webglFramebuffer=_e,ke.__useDefaultFramebuffer=_e===void 0},this.setRenderTarget=function(ee,_e=0,ke=0){y=ee,v=_e,b=ke;let Y=!0,se=null,re=!1,oe=!1;if(ee){let ce=q.get(ee);ce.__useDefaultFramebuffer!==void 0?(te.bindFramebuffer(36160,null),Y=!1):ce.__webglFramebuffer===void 0?ie.setupRenderTarget(ee):ce.__hasExternalTextures&&ie.rebindTextures(ee,q.get(ee.texture).__webglTexture,q.get(ee.depthTexture).__webglTexture);let we=ee.texture;(we.isData3DTexture||we.isDataArrayTexture||we.isCompressedArrayTexture)&&(oe=!0);let Be=q.get(ee).__webglFramebuffer;ee.isWebGLCubeRenderTarget?(se=Be[_e],re=!0):W.isWebGL2&&ee.samples>0&&ie.useMultisampledRTT(ee)===!1?se=q.get(ee).__webglMultisampledFramebuffer:se=Be,w.copy(ee.viewport),_.copy(ee.scissor),C=ee.scissorTest}else w.copy(T).multiplyScalar(M).floor(),_.copy(D).multiplyScalar(M).floor(),C=N;if(te.bindFramebuffer(36160,se)&&W.drawBuffers&&Y&&te.drawBuffers(ee,se),te.viewport(w),te.scissor(_),te.setScissorTest(C),re){let ce=q.get(ee.texture);X.framebufferTexture2D(36160,36064,34069+_e,ce.__webglTexture,ke)}else if(oe){let ce=q.get(ee.texture),we=_e||0;X.framebufferTextureLayer(36160,36064,ce.__webglTexture,ke||0,we)}x=-1},this.readRenderTargetPixels=function(ee,_e,ke,Y,se,re,oe){if(!(ee&&ee.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ce=q.get(ee).__webglFramebuffer;if(ee.isWebGLCubeRenderTarget&&oe!==void 0&&(ce=ce[oe]),ce){te.bindFramebuffer(36160,ce);try{let we=ee.texture,Be=we.format,Ye=we.type;if(Be!==qs&&Ce.convert(Be)!==X.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}let Fe=Ye===Xm&&(J.has("EXT_color_buffer_half_float")||W.isWebGL2&&J.has("EXT_color_buffer_float"));if(Ye!==pa&&Ce.convert(Ye)!==X.getParameter(35738)&&!(Ye===Ba&&(W.isWebGL2||J.has("OES_texture_float")||J.has("WEBGL_color_buffer_float")))&&!Fe){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}_e>=0&&_e<=ee.width-Y&&ke>=0&&ke<=ee.height-se&&X.readPixels(_e,ke,Y,se,Ce.convert(Be),Ce.convert(Ye),re)}finally{let we=y!==null?q.get(y).__webglFramebuffer:null;te.bindFramebuffer(36160,we)}}},this.copyFramebufferToTexture=function(ee,_e,ke=0){let Y=Math.pow(2,-ke),se=Math.floor(_e.image.width*Y),re=Math.floor(_e.image.height*Y);ie.setTexture2D(_e,0),X.copyTexSubImage2D(3553,ke,0,0,ee.x,ee.y,se,re),te.unbindTexture()},this.copyTextureToTexture=function(ee,_e,ke,Y=0){let se=_e.image.width,re=_e.image.height,oe=Ce.convert(ke.format),ce=Ce.convert(ke.type);ie.setTexture2D(ke,0),X.pixelStorei(37440,ke.flipY),X.pixelStorei(37441,ke.premultiplyAlpha),X.pixelStorei(3317,ke.unpackAlignment),_e.isDataTexture?X.texSubImage2D(3553,Y,ee.x,ee.y,se,re,oe,ce,_e.image.data):_e.isCompressedTexture?X.compressedTexSubImage2D(3553,Y,ee.x,ee.y,_e.mipmaps[0].width,_e.mipmaps[0].height,oe,_e.mipmaps[0].data):X.texSubImage2D(3553,Y,ee.x,ee.y,oe,ce,_e.image),Y===0&&ke.generateMipmaps&&X.generateMipmap(3553),te.unbindTexture()},this.copyTextureToTexture3D=function(ee,_e,ke,Y,se=0){if(p.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}let re=ee.max.x-ee.min.x+1,oe=ee.max.y-ee.min.y+1,ce=ee.max.z-ee.min.z+1,we=Ce.convert(Y.format),Be=Ce.convert(Y.type),Ye;if(Y.isData3DTexture)ie.setTexture3D(Y,0),Ye=32879;else if(Y.isDataArrayTexture)ie.setTexture2DArray(Y,0),Ye=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}X.pixelStorei(37440,Y.flipY),X.pixelStorei(37441,Y.premultiplyAlpha),X.pixelStorei(3317,Y.unpackAlignment);let Fe=X.getParameter(3314),tt=X.getParameter(32878),je=X.getParameter(3316),Ne=X.getParameter(3315),ut=X.getParameter(32877),pt=ke.isCompressedTexture?ke.mipmaps[0]:ke.image;X.pixelStorei(3314,pt.width),X.pixelStorei(32878,pt.height),X.pixelStorei(3316,ee.min.x),X.pixelStorei(3315,ee.min.y),X.pixelStorei(32877,ee.min.z),ke.isDataTexture||ke.isData3DTexture?X.texSubImage3D(Ye,se,_e.x,_e.y,_e.z,re,oe,ce,we,Be,pt.data):ke.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),X.compressedTexSubImage3D(Ye,se,_e.x,_e.y,_e.z,re,oe,ce,we,pt.data)):X.texSubImage3D(Ye,se,_e.x,_e.y,_e.z,re,oe,ce,we,Be,pt),X.pixelStorei(3314,Fe),X.pixelStorei(32878,tt),X.pixelStorei(3316,je),X.pixelStorei(3315,Ne),X.pixelStorei(32877,ut),se===0&&Y.generateMipmaps&&X.generateMipmap(Ye),te.unbindTexture()},this.initTexture=function(ee){ee.isCubeTexture?ie.setTextureCube(ee,0):ee.isData3DTexture?ie.setTexture3D(ee,0):ee.isDataArrayTexture||ee.isCompressedArrayTexture?ie.setTexture2DArray(ee,0):ie.setTexture2D(ee,0),te.unbindTexture()},this.resetState=function(){v=0,b=0,y=null,te.reset(),pe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var fst=class extends Pae{};fst.prototype.isWebGL1Renderer=!0;var Tae=class{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new Bt(e),this.near=t,this.far=r}clone(){return new Tae(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}},Uf=class extends hn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}},pst=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=AN,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=$l()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let n=0,i=this.stride;n<i;n++)this.array[e+n]=t.array[r+n];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=$l()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=$l()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},Sa=new F,TN=class{constructor(e,t,r,n=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=n}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Sa.fromBufferAttribute(this,t),Sa.applyMatrix4(e),this.setXYZ(t,Sa.x,Sa.y,Sa.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Sa.fromBufferAttribute(this,t),Sa.applyNormalMatrix(e),this.setXYZ(t,Sa.x,Sa.y,Sa.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Sa.fromBufferAttribute(this,t),Sa.transformDirection(e),this.setXYZ(t,Sa.x,Sa.y,Sa.z);return this}setX(e,t){return this.normalized&&(t=Mn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Mn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Mn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Mn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Kd(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Kd(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Kd(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Kd(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Mn(t,this.array),r=Mn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Mn(t,this.array),r=Mn(r,this.array),n=Mn(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=n,this}setXYZW(e,t,r,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Mn(t,this.array),r=Mn(r,this.array),n=Mn(n,this.array),i=Mn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=n,this.data.array[e+3]=i,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let r=0;r<this.count;r++){let n=r*this.data.stride+this.offset;for(let i=0;i<this.itemSize;i++)t.push(this.data.array[n+i])}return new Kt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new TN(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let r=0;r<this.count;r++){let n=r*this.data.stride+this.offset;for(let i=0;i<this.itemSize;i++)t.push(this.data.array[n+i])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},Oae=class extends hn{constructor(){super(),this.isBone=!0,this.type="Bone"}},gf=class extends co{constructor(e=null,t=1,r=1,n,i,o,a,s,l=Pn,u=Pn,d,c){super(null,o,a,s,l,u,n,i,d,c),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},Iq=new qe,mst=new qe,j4=class{constructor(e=[],t=[]){this.uuid=$l(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){let e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,n=this.bones.length;r<n;r++)this.boneInverses.push(new qe)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){let r=new qe;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){let r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){let r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){let e=this.bones,t=this.boneInverses,r=this.boneMatrices,n=this.boneTexture;for(let i=0,o=e.length;i<o;i++){let a=e[i]?e[i].matrixWorld:mst;Iq.multiplyMatrices(a,t[i]),Iq.toArray(r,i*16)}n!==null&&(n.needsUpdate=!0)}clone(){return new j4(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=pae(e),e=Math.max(e,4);let t=new Float32Array(e*e*4);t.set(this.boneMatrices);let r=new gf(t,e,e,qs,Ba);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){let n=this.bones[t];if(n.name===e)return n}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,n=e.bones.length;r<n;r++){let i=e.bones[r],o=t[i];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),o=new Oae),this.bones.push(o),this.boneInverses.push(new qe().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){let e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let t=this.bones,r=this.boneInverses;for(let n=0,i=t.length;n<i;n++){let o=t[n];e.bones.push(o.uuid);let a=r[n];e.boneInverses.push(a.toArray())}return e}},Iae=class extends Kt{constructor(e,t,r,n=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},bp=class extends r_{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Bt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},Dq=new F,Rq=new F,kq=new qe,YD=new ab,CC=new Ps,oP=class extends hn{constructor(e=new Nt,t=new bp){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,r=[0];for(let n=1,i=t.count;n<i;n++)Dq.fromBufferAttribute(t,n-1),Rq.fromBufferAttribute(t,n),r[n]=r[n-1],r[n]+=Dq.distanceTo(Rq);e.setAttribute("lineDistance",new ft(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let r=this.geometry,n=this.matrixWorld,i=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),CC.copy(r.boundingSphere),CC.applyMatrix4(n),CC.radius+=i,e.ray.intersectsSphere(CC)===!1)return;kq.copy(n).invert(),YD.copy(e.ray).applyMatrix4(kq);let a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,l=new F,u=new F,d=new F,c=new F,h=this.isLineSegments?2:1,f=r.index,m=r.attributes.position;if(f!==null){let p=Math.max(0,o.start),g=Math.min(f.count,o.start+o.count);for(let v=p,b=g-1;v<b;v+=h){let y=f.getX(v),x=f.getX(v+1);if(l.fromBufferAttribute(m,y),u.fromBufferAttribute(m,x),YD.distanceSqToSegment(l,u,c,d)>s)continue;c.applyMatrix4(this.matrixWorld);let S=e.ray.origin.distanceTo(c);S<e.near||S>e.far||t.push({distance:S,point:d.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else{let p=Math.max(0,o.start),g=Math.min(m.count,o.start+o.count);for(let v=p,b=g-1;v<b;v+=h){if(l.fromBufferAttribute(m,v),u.fromBufferAttribute(m,v+1),YD.distanceSqToSegment(l,u,c,d)>s)continue;c.applyMatrix4(this.matrixWorld);let y=e.ray.origin.distanceTo(c);y<e.near||y>e.far||t.push({distance:y,point:d.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let n=0,i=r.length;n<i;n++){let o=r[n].name||String(n);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=n}}}}},Lq=new F,Nq=new F,i_=class extends oP{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,r=[];for(let n=0,i=t.count;n<i;n+=2)Lq.fromBufferAttribute(t,n),Nq.fromBufferAttribute(t,n+1),r[n]=n===0?0:r[n-1],r[n+1]=r[n]+Lq.distanceTo(Nq);e.setAttribute("lineDistance",new ft(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},gst=class extends co{constructor(e,t,r,n,i,o,a,s,l){super(e,t,r,n,i,o,a,s,l),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:yr,this.magFilter=i!==void 0?i:yr,this.generateMipmaps=!1;let u=this;function d(){u.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){let e=this.image;!("requestVideoFrameCallback"in e)&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},ad=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){let r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){let t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){let t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],r,n=this.getPoint(0),i=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),i+=r.distanceTo(n),t.push(i),n=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){let r=this.getLengths(),n=0,i=r.length,o;t?o=t:o=e*r[i-1];let a=0,s=i-1,l;for(;a<=s;)if(n=Math.floor(a+(s-a)/2),l=r[n]-o,l<0)a=n+1;else if(l>0)s=n-1;else{s=n;break}if(n=s,r[n]===o)return n/(i-1);let u=r[n],d=r[n+1]-u,c=(o-u)/d;return(n+c)/(i-1)}getTangent(e,t){let r=e-1e-4,n=e+1e-4;r<0&&(r=0),n>1&&(n=1);let i=this.getPoint(r),o=this.getPoint(n),a=t||(i.isVector2?new ue:new F);return a.copy(o).sub(i).normalize(),a}getTangentAt(e,t){let r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){let r=new F,n=[],i=[],o=[],a=new F,s=new qe;for(let h=0;h<=e;h++){let f=h/e;n[h]=this.getTangentAt(f,new F)}i[0]=new F,o[0]=new F;let l=Number.MAX_VALUE,u=Math.abs(n[0].x),d=Math.abs(n[0].y),c=Math.abs(n[0].z);u<=l&&(l=u,r.set(1,0,0)),d<=l&&(l=d,r.set(0,1,0)),c<=l&&r.set(0,0,1),a.crossVectors(n[0],r).normalize(),i[0].crossVectors(n[0],a),o[0].crossVectors(n[0],i[0]);for(let h=1;h<=e;h++){if(i[h]=i[h-1].clone(),o[h]=o[h-1].clone(),a.crossVectors(n[h-1],n[h]),a.length()>Number.EPSILON){a.normalize();let f=Math.acos(Vi(n[h-1].dot(n[h]),-1,1));i[h].applyMatrix4(s.makeRotationAxis(a,f))}o[h].crossVectors(n[h],i[h])}if(t===!0){let h=Math.acos(Vi(i[0].dot(i[e]),-1,1));h/=e,n[0].dot(a.crossVectors(i[0],i[e]))>0&&(h=-h);for(let f=1;f<=e;f++)i[f].applyMatrix4(s.makeRotationAxis(n[f],h*f)),o[f].crossVectors(n[f],i[f])}return{tangents:n,normals:i,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},lO=class extends ad{constructor(e=0,t=0,r=1,n=1,i=0,o=Math.PI*2,a=!1,s=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=n,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=a,this.aRotation=s}getPoint(e,t){let r=t||new ue,n=Math.PI*2,i=this.aEndAngle-this.aStartAngle,o=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=n;for(;i>n;)i-=n;i<Number.EPSILON&&(o?i=0:i=n),this.aClockwise===!0&&!o&&(i===n?i=-n:i=i-n);let a=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){let u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),c=s-this.aX,h=l-this.aY;s=c*u-h*d+this.aX,l=c*d+h*u+this.aY}return r.set(s,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},vst=class extends lO{constructor(e,t,r,n,i,o){super(e,t,r,r,n,i,o),this.isArcCurve=!0,this.type="ArcCurve"}};function U4(){let e=0,t=0,r=0,n=0;function i(o,a,s,l){e=o,t=s,r=-3*o+3*a-2*s-l,n=2*o-2*a+s+l}return{initCatmullRom:function(o,a,s,l,u){i(a,s,u*(s-o),u*(l-a))},initNonuniformCatmullRom:function(o,a,s,l,u,d,c){let h=(a-o)/u-(s-o)/(u+d)+(s-a)/d,f=(s-a)/d-(l-a)/(d+c)+(l-s)/c;h*=d,f*=d,i(a,s,h,f)},calc:function(o){let a=o*o,s=a*o;return e+t*o+r*a+n*s}}}var AC=new F,QD=new U4,ZD=new U4,JD=new U4,yst=class extends ad{constructor(e=[],t=!1,r="centripetal",n=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=n}getPoint(e,t=new F){let r=t,n=this.points,i=n.length,o=(i-(this.closed?0:1))*e,a=Math.floor(o),s=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/i)+1)*i:s===0&&a===i-1&&(a=i-2,s=1);let l,u;this.closed||a>0?l=n[(a-1)%i]:(AC.subVectors(n[0],n[1]).add(n[0]),l=AC);let d=n[a%i],c=n[(a+1)%i];if(this.closed||a+2<i?u=n[(a+2)%i]:(AC.subVectors(n[i-1],n[i-2]).add(n[i-1]),u=AC),this.curveType==="centripetal"||this.curveType==="chordal"){let h=this.curveType==="chordal"?.5:.25,f=Math.pow(l.distanceToSquared(d),h),m=Math.pow(d.distanceToSquared(c),h),p=Math.pow(c.distanceToSquared(u),h);m<1e-4&&(m=1),f<1e-4&&(f=m),p<1e-4&&(p=m),QD.initNonuniformCatmullRom(l.x,d.x,c.x,u.x,f,m,p),ZD.initNonuniformCatmullRom(l.y,d.y,c.y,u.y,f,m,p),JD.initNonuniformCatmullRom(l.z,d.z,c.z,u.z,f,m,p)}else this.curveType==="catmullrom"&&(QD.initCatmullRom(l.x,d.x,c.x,u.x,this.tension),ZD.initCatmullRom(l.y,d.y,c.y,u.y,this.tension),JD.initCatmullRom(l.z,d.z,c.z,u.z,this.tension));return r.set(QD.calc(s),ZD.calc(s),JD.calc(s)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){let n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let n=e.points[t];this.points.push(new F().fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};function zq(e,t,r,n,i){let o=(n-t)*.5,a=(i-r)*.5,s=e*e,l=e*s;return(2*r-2*n+o+a)*l+(-3*r+3*n-2*o-a)*s+o*e+r}function bst(e,t){let r=1-e;return r*r*t}function xst(e,t){return 2*(1-e)*e*t}function wst(e,t){return e*e*t}function S1(e,t,r,n){return bst(e,t)+xst(e,r)+wst(e,n)}function Sst(e,t){let r=1-e;return r*r*r*t}function _st(e,t){let r=1-e;return 3*r*r*e*t}function Cst(e,t){return 3*(1-e)*e*e*t}function Ast(e,t){return e*e*e*t}function _1(e,t,r,n,i){return Sst(e,t)+_st(e,r)+Cst(e,n)+Ast(e,i)}var _u=class extends ad{constructor(e=new ue,t=new ue,r=new ue,n=new ue){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=n}getPoint(e,t=new ue){let r=t,n=this.v0,i=this.v1,o=this.v2,a=this.v3;return r.set(_1(e,n.x,i.x,o.x,a.x),_1(e,n.y,i.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},XA=class extends ad{constructor(e=new F,t=new F,r=new F,n=new F){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=n}getPoint(e,t=new F){let r=t,n=this.v0,i=this.v1,o=this.v2,a=this.v3;return r.set(_1(e,n.x,i.x,o.x,a.x),_1(e,n.y,i.y,o.y,a.y),_1(e,n.z,i.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},Ru=class extends ad{constructor(e=new ue,t=new ue){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ue){let r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){let r=t||new ue;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Dae=class extends ad{constructor(e=new F,t=new F){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new F){let r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},np=class extends ad{constructor(e=new ue,t=new ue,r=new ue){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new ue){let r=t,n=this.v0,i=this.v1,o=this.v2;return r.set(S1(e,n.x,i.x,o.x),S1(e,n.y,i.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Est=class extends ad{constructor(e=new F,t=new F,r=new F){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new F){let r=t,n=this.v0,i=this.v1,o=this.v2;return r.set(S1(e,n.x,i.x,o.x),S1(e,n.y,i.y,o.y),S1(e,n.z,i.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},$4=class extends ad{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new ue){let r=t,n=this.points,i=(n.length-1)*e,o=Math.floor(i),a=i-o,s=n[o===0?o:o-1],l=n[o],u=n[o>n.length-2?n.length-1:o+1],d=n[o>n.length-3?n.length-1:o+2];return r.set(zq(a,s.x,l.x,u.x,d.x),zq(a,s.y,l.y,u.y,d.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let n=e.points[t];this.points.push(n.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){let n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let n=e.points[t];this.points.push(new ue().fromArray(n))}return this}},Mst=Object.freeze({__proto__:null,ArcCurve:vst,CatmullRomCurve3:yst,CubicBezierCurve:_u,CubicBezierCurve3:XA,EllipseCurve:lO,LineCurve:Ru,LineCurve3:Dae,QuadraticBezierCurve:np,QuadraticBezierCurve3:Est,SplineCurve:$4}),Rae=class extends ad{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Ru(t,e))}getPoint(e,t){let r=e*this.getLength(),n=this.getCurveLengths(),i=0;for(;i<n.length;){if(n[i]>=r){let o=n[i]-r,a=this.curves[i],s=a.getLength(),l=s===0?0:1-o/s;return a.getPointAt(l,t)}i++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let r=0,n=this.curves.length;r<n;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t=[],r;for(let n=0,i=this.curves;n<i.length;n++){let o=i[n],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a);for(let l=0;l<s.length;l++){let u=s[l];r&&r.equals(u)||(t.push(u),r=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){let n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){let n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){let n=e.curves[t];this.curves.push(new Mst[n.type]().fromJSON(n))}return this}},aP=class extends Rae{constructor(e){super(),this.type="Path",this.currentPoint=new ue,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let r=new Ru(this.currentPoint.clone(),new ue(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,n){let i=new np(this.currentPoint.clone(),new ue(e,t),new ue(r,n));return this.curves.push(i),this.currentPoint.set(r,n),this}bezierCurveTo(e,t,r,n,i,o){let a=new _u(this.currentPoint.clone(),new ue(e,t),new ue(r,n),new ue(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this}splineThru(e){let t=[this.currentPoint.clone()].concat(e),r=new $4(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,n,i,o){let a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+a,t+s,r,n,i,o),this}absarc(e,t,r,n,i,o){return this.absellipse(e,t,r,r,n,i,o),this}ellipse(e,t,r,n,i,o,a,s){let l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,r,n,i,o,a,s),this}absellipse(e,t,r,n,i,o,a,s){let l=new lO(e,t,r,n,i,o,a,s);if(this.curves.length>0){let d=l.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(l);let u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},kae=class extends Nt{constructor(e=[new ue(0,-.5),new ue(.5,0),new ue(0,.5)],t=12,r=0,n=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:n},t=Math.floor(t),n=Vi(n,0,Math.PI*2);let i=[],o=[],a=[],s=[],l=[],u=1/t,d=new F,c=new ue,h=new F,f=new F,m=new F,p=0,g=0;for(let v=0;v<=e.length-1;v++)switch(v){case 0:p=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,h.x=g*1,h.y=-p,h.z=g*0,m.copy(h),h.normalize(),s.push(h.x,h.y,h.z);break;case e.length-1:s.push(m.x,m.y,m.z);break;default:p=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,h.x=g*1,h.y=-p,h.z=g*0,f.copy(h),h.x+=m.x,h.y+=m.y,h.z+=m.z,h.normalize(),s.push(h.x,h.y,h.z),m.copy(f)}for(let v=0;v<=t;v++){let b=r+v*u*n,y=Math.sin(b),x=Math.cos(b);for(let S=0;S<=e.length-1;S++){d.x=e[S].x*y,d.y=e[S].y,d.z=e[S].x*x,o.push(d.x,d.y,d.z),c.x=v/t,c.y=S/(e.length-1),a.push(c.x,c.y);let w=s[3*S+0]*y,_=s[3*S+1],C=s[3*S+0]*x;l.push(w,_,C)}}for(let v=0;v<t;v++)for(let b=0;b<e.length-1;b++){let y=b+v*e.length,x=y,S=y+e.length,w=y+e.length+1,_=y+1;i.push(x,S,_),i.push(w,_,S)}this.setIndex(i),this.setAttribute("position",new ft(o,3)),this.setAttribute("uv",new ft(a,2)),this.setAttribute("normal",new ft(l,3))}static fromJSON(e){return new kae(e.points,e.segments,e.phiStart,e.phiLength)}},V4=class extends Nt{constructor(e=1,t=1,r=1,n=32,i=1,o=!1,a=0,s=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:n,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};let l=this;n=Math.floor(n),i=Math.floor(i);let u=[],d=[],c=[],h=[],f=0,m=[],p=r/2,g=0;v(),o===!1&&(e>0&&b(!0),t>0&&b(!1)),this.setIndex(u),this.setAttribute("position",new ft(d,3)),this.setAttribute("normal",new ft(c,3)),this.setAttribute("uv",new ft(h,2));function v(){let y=new F,x=new F,S=0,w=(t-e)/r;for(let _=0;_<=i;_++){let C=[],E=_/i,A=E*(t-e)+e;for(let M=0;M<=n;M++){let I=M/n,O=I*s+a,T=Math.sin(O),D=Math.cos(O);x.x=A*T,x.y=-E*r+p,x.z=A*D,d.push(x.x,x.y,x.z),y.set(T,w,D).normalize(),c.push(y.x,y.y,y.z),h.push(I,1-E),C.push(f++)}m.push(C)}for(let _=0;_<n;_++)for(let C=0;C<i;C++){let E=m[C][_],A=m[C+1][_],M=m[C+1][_+1],I=m[C][_+1];u.push(E,A,I),u.push(A,M,I),S+=6}l.addGroup(g,S,0),g+=S}function b(y){let x=f,S=new ue,w=new F,_=0,C=y===!0?e:t,E=y===!0?1:-1;for(let M=1;M<=n;M++)d.push(0,p*E,0),c.push(0,E,0),h.push(.5,.5),f++;let A=f;for(let M=0;M<=n;M++){let I=M/n*s+a,O=Math.cos(I),T=Math.sin(I);w.x=C*T,w.y=p*E,w.z=C*O,d.push(w.x,w.y,w.z),c.push(0,E,0),S.x=O*.5+.5,S.y=T*.5*E+.5,h.push(S.x,S.y),f++}for(let M=0;M<n;M++){let I=x+M,O=A+M;y===!0?u.push(O,O+1,I):u.push(O+1,O,I),_+=3}l.addGroup(g,_,y===!0?1:2),g+=_}}static fromJSON(e){return new V4(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},Lae=class extends V4{constructor(e=1,t=1,r=32,n=1,i=!1,o=0,a=Math.PI*2){super(0,e,t,r,n,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:n,openEnded:i,thetaStart:o,thetaLength:a}}static fromJSON(e){return new Lae(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},H4=class extends Nt{constructor(e=[],t=[],r=1,n=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:n};let i=[],o=[];a(n),l(r),u(),this.setAttribute("position",new ft(i,3)),this.setAttribute("normal",new ft(i.slice(),3)),this.setAttribute("uv",new ft(o,2)),n===0?this.computeVertexNormals():this.normalizeNormals();function a(v){let b=new F,y=new F,x=new F;for(let S=0;S<t.length;S+=3)h(t[S+0],b),h(t[S+1],y),h(t[S+2],x),s(b,y,x,v)}function s(v,b,y,x){let S=x+1,w=[];for(let _=0;_<=S;_++){w[_]=[];let C=v.clone().lerp(y,_/S),E=b.clone().lerp(y,_/S),A=S-_;for(let M=0;M<=A;M++)M===0&&_===S?w[_][M]=C:w[_][M]=C.clone().lerp(E,M/A)}for(let _=0;_<S;_++)for(let C=0;C<2*(S-_)-1;C++){let E=Math.floor(C/2);C%2===0?(c(w[_][E+1]),c(w[_+1][E]),c(w[_][E])):(c(w[_][E+1]),c(w[_+1][E+1]),c(w[_+1][E]))}}function l(v){let b=new F;for(let y=0;y<i.length;y+=3)b.x=i[y+0],b.y=i[y+1],b.z=i[y+2],b.normalize().multiplyScalar(v),i[y+0]=b.x,i[y+1]=b.y,i[y+2]=b.z}function u(){let v=new F;for(let b=0;b<i.length;b+=3){v.x=i[b+0],v.y=i[b+1],v.z=i[b+2];let y=p(v)/2/Math.PI+.5,x=g(v)/Math.PI+.5;o.push(y,1-x)}f(),d()}function d(){for(let v=0;v<o.length;v+=6){let b=o[v+0],y=o[v+2],x=o[v+4],S=Math.max(b,y,x),w=Math.min(b,y,x);S>.9&&w<.1&&(b<.2&&(o[v+0]+=1),y<.2&&(o[v+2]+=1),x<.2&&(o[v+4]+=1))}}function c(v){i.push(v.x,v.y,v.z)}function h(v,b){let y=v*3;b.x=e[y+0],b.y=e[y+1],b.z=e[y+2]}function f(){let v=new F,b=new F,y=new F,x=new F,S=new ue,w=new ue,_=new ue;for(let C=0,E=0;C<i.length;C+=9,E+=6){v.set(i[C+0],i[C+1],i[C+2]),b.set(i[C+3],i[C+4],i[C+5]),y.set(i[C+6],i[C+7],i[C+8]),S.set(o[E+0],o[E+1]),w.set(o[E+2],o[E+3]),_.set(o[E+4],o[E+5]),x.copy(v).add(b).add(y).divideScalar(3);let A=p(x);m(S,E+0,v,A),m(w,E+2,b,A),m(_,E+4,y,A)}}function m(v,b,y,x){x<0&&v.x===1&&(o[b]=v.x-1),y.x===0&&y.z===0&&(o[b]=x/2/Math.PI+.5)}function p(v){return Math.atan2(v.z,-v.x)}function g(v){return Math.atan2(-v.y,Math.sqrt(v.x*v.x+v.z*v.z))}}static fromJSON(e){return new H4(e.vertices,e.indices,e.radius,e.details)}},Nae=class extends H4{constructor(e=1,t=0){let r=(1+Math.sqrt(5))/2,n=1/r,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-r,0,-n,r,0,n,-r,0,n,r,-n,-r,0,-n,r,0,n,-r,0,n,r,0,-r,0,-n,r,0,-n,-r,0,n,r,0,n],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(i,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Nae(e.radius,e.detail)}},sP=class extends aP{constructor(e){super(e),this.uuid=$l(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let r=0,n=this.holes.length;r<n;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){let n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){let n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){let n=e.holes[t];this.holes.push(new aP().fromJSON(n))}return this}},Pst={triangulate:function(e,t,r=2){let n=t&&t.length,i=n?t[0]*r:e.length,o=zae(e,0,i,r,!0),a=[];if(!o||o.next===o.prev)return a;let s,l,u,d,c,h,f;if(n&&(o=Rst(e,t,o,r)),e.length>80*r){s=u=e[0],l=d=e[1];for(let m=r;m<i;m+=r)c=e[m],h=e[m+1],c<s&&(s=c),h<l&&(l=h),c>u&&(u=c),h>d&&(d=h);f=Math.max(u-s,d-l),f=f!==0?32767/f:0}return Yw(o,a,r,s,l,f,0),a}};function zae(e,t,r,n,i){let o,a;if(i===Hst(e,t,r,n)>0)for(o=t;o<r;o+=n)a=Bq(o,e[o],e[o+1],a);else for(o=r-n;o>=t;o-=n)a=Bq(o,e[o],e[o+1],a);return a&&uO(a,a.next)&&(Zw(a),a=a.next),a}function Qm(e,t){if(!e)return e;t||(t=e);let r=e,n;do if(n=!1,!r.steiner&&(uO(r,r.next)||oi(r.prev,r,r.next)===0)){if(Zw(r),r=t=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==t);return t}function Yw(e,t,r,n,i,o,a){if(!e)return;!a&&o&&Bst(e,n,i,o);let s=e,l,u;for(;e.prev!==e.next;){if(l=e.prev,u=e.next,o?Ost(e,n,i,o):Tst(e)){t.push(l.i/r|0),t.push(e.i/r|0),t.push(u.i/r|0),Zw(e),e=u.next,s=u.next;continue}if(e=u,e===s){a?a===1?(e=Ist(Qm(e),t,r),Yw(e,t,r,n,i,o,2)):a===2&&Dst(e,t,r,n,i,o):Yw(Qm(e),t,r,n,i,o,1);break}}}function Tst(e){let t=e.prev,r=e,n=e.next;if(oi(t,r,n)>=0)return!1;let i=t.x,o=r.x,a=n.x,s=t.y,l=r.y,u=n.y,d=i<o?i<a?i:a:o<a?o:a,c=s<l?s<u?s:u:l<u?l:u,h=i>o?i>a?i:a:o>a?o:a,f=s>l?s>u?s:u:l>u?l:u,m=n.next;for(;m!==t;){if(m.x>=d&&m.x<=h&&m.y>=c&&m.y<=f&&Uv(i,s,o,l,a,u,m.x,m.y)&&oi(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function Ost(e,t,r,n){let i=e.prev,o=e,a=e.next;if(oi(i,o,a)>=0)return!1;let s=i.x,l=o.x,u=a.x,d=i.y,c=o.y,h=a.y,f=s<l?s<u?s:u:l<u?l:u,m=d<c?d<h?d:h:c<h?c:h,p=s>l?s>u?s:u:l>u?l:u,g=d>c?d>h?d:h:c>h?c:h,v=ON(f,m,t,r,n),b=ON(p,g,t,r,n),y=e.prevZ,x=e.nextZ;for(;y&&y.z>=v&&x&&x.z<=b;){if(y.x>=f&&y.x<=p&&y.y>=m&&y.y<=g&&y!==i&&y!==a&&Uv(s,d,l,c,u,h,y.x,y.y)&&oi(y.prev,y,y.next)>=0||(y=y.prevZ,x.x>=f&&x.x<=p&&x.y>=m&&x.y<=g&&x!==i&&x!==a&&Uv(s,d,l,c,u,h,x.x,x.y)&&oi(x.prev,x,x.next)>=0))return!1;x=x.nextZ}for(;y&&y.z>=v;){if(y.x>=f&&y.x<=p&&y.y>=m&&y.y<=g&&y!==i&&y!==a&&Uv(s,d,l,c,u,h,y.x,y.y)&&oi(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;x&&x.z<=b;){if(x.x>=f&&x.x<=p&&x.y>=m&&x.y<=g&&x!==i&&x!==a&&Uv(s,d,l,c,u,h,x.x,x.y)&&oi(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function Ist(e,t,r){let n=e;do{let i=n.prev,o=n.next.next;!uO(i,o)&&Bae(i,n,n.next,o)&&Qw(i,o)&&Qw(o,i)&&(t.push(i.i/r|0),t.push(n.i/r|0),t.push(o.i/r|0),Zw(n),Zw(n.next),n=e=o),n=n.next}while(n!==e);return Qm(n)}function Dst(e,t,r,n,i,o){let a=e;do{let s=a.next.next;for(;s!==a.prev;){if(a.i!==s.i&&Ust(a,s)){let l=Fae(a,s);a=Qm(a,a.next),l=Qm(l,l.next),Yw(a,t,r,n,i,o,0),Yw(l,t,r,n,i,o,0);return}s=s.next}a=a.next}while(a!==e)}function Rst(e,t,r,n){let i=[],o,a,s,l,u;for(o=0,a=t.length;o<a;o++)s=t[o]*n,l=o<a-1?t[o+1]*n:e.length,u=zae(e,s,l,n,!1),u===u.next&&(u.steiner=!0),i.push(jst(u));for(i.sort(kst),o=0;o<i.length;o++)r=Lst(i[o],r);return r}function kst(e,t){return e.x-t.x}function Lst(e,t){let r=Nst(e,t);if(!r)return t;let n=Fae(r,e);return Qm(n,n.next),Qm(r,r.next)}function Nst(e,t){let r=t,n=-1/0,i,o=e.x,a=e.y;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){let h=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(h<=o&&h>n&&(n=h,i=r.x<r.next.x?r:r.next,h===o))return i}r=r.next}while(r!==t);if(!i)return null;let s=i,l=i.x,u=i.y,d=1/0,c;r=i;do o>=r.x&&r.x>=l&&o!==r.x&&Uv(a<u?o:n,a,l,u,a<u?n:o,a,r.x,r.y)&&(c=Math.abs(a-r.y)/(o-r.x),Qw(r,e)&&(c<d||c===d&&(r.x>i.x||r.x===i.x&&zst(i,r)))&&(i=r,d=c)),r=r.next;while(r!==s);return i}function zst(e,t){return oi(e.prev,e,t.prev)<0&&oi(t.next,e,e.next)<0}function Bst(e,t,r,n){let i=e;do i.z===0&&(i.z=ON(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,Fst(i)}function Fst(e){let t,r,n,i,o,a,s,l,u=1;do{for(r=e,e=null,o=null,a=0;r;){for(a++,n=r,s=0,t=0;t<u&&(s++,n=n.nextZ,!!n);t++);for(l=u;s>0||l>0&&n;)s!==0&&(l===0||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}o.nextZ=null,u*=2}while(a>1);return e}function ON(e,t,r,n,i){return e=(e-r)*i|0,t=(t-n)*i|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function jst(e){let t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function Uv(e,t,r,n,i,o,a,s){return(i-a)*(t-s)>=(e-a)*(o-s)&&(e-a)*(n-s)>=(r-a)*(t-s)&&(r-a)*(o-s)>=(i-a)*(n-s)}function Ust(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!$st(e,t)&&(Qw(e,t)&&Qw(t,e)&&Vst(e,t)&&(oi(e.prev,e,t.prev)||oi(e,t.prev,t))||uO(e,t)&&oi(e.prev,e,e.next)>0&&oi(t.prev,t,t.next)>0)}function oi(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function uO(e,t){return e.x===t.x&&e.y===t.y}function Bae(e,t,r,n){let i=MC(oi(e,t,r)),o=MC(oi(e,t,n)),a=MC(oi(r,n,e)),s=MC(oi(r,n,t));return!!(i!==o&&a!==s||i===0&&EC(e,r,t)||o===0&&EC(e,n,t)||a===0&&EC(r,e,n)||s===0&&EC(r,t,n))}function EC(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function MC(e){return e>0?1:e<0?-1:0}function $st(e,t){let r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&Bae(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function Qw(e,t){return oi(e.prev,e,e.next)<0?oi(e,t,e.next)>=0&&oi(e,e.prev,t)>=0:oi(e,t,e.prev)<0||oi(e,e.next,t)<0}function Vst(e,t){let r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==e);return n}function Fae(e,t){let r=new IN(e.i,e.x,e.y),n=new IN(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function Bq(e,t,r,n){let i=new IN(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Zw(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function IN(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Hst(e,t,r,n){let i=0;for(let o=t,a=r-n;o<r;o+=n)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}var jae=class{static area(e){let t=e.length,r=0;for(let n=t-1,i=0;i<t;n=i++)r+=e[n].x*e[i].y-e[i].x*e[n].y;return r*.5}static isClockWise(e){return jae.area(e)<0}static triangulateShape(e,t){let r=[],n=[],i=[];Fq(e),jq(r,e);let o=e.length;t.forEach(Fq);for(let s=0;s<t.length;s++)n.push(o),o+=t[s].length,jq(r,t[s]);let a=Pst.triangulate(r,n);for(let s=0;s<a.length;s+=3)i.push(a.slice(s,s+3));return i}};function Fq(e){let t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function jq(e,t){for(let r=0;r<t.length;r++)e.push(t[r].x),e.push(t[r].y)}var Uae=class extends H4{constructor(e=1,t=0){let r=(1+Math.sqrt(5))/2,n=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],i=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(n,i,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Uae(e.radius,e.detail)}},G4=class extends Nt{constructor(e=1,t=32,r=16,n=0,i=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:n,phiLength:i,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));let s=Math.min(o+a,Math.PI),l=0,u=[],d=new F,c=new F,h=[],f=[],m=[],p=[];for(let g=0;g<=r;g++){let v=[],b=g/r,y=0;g==0&&o==0?y=.5/t:g==r&&s==Math.PI&&(y=-.5/t);for(let x=0;x<=t;x++){let S=x/t;d.x=-e*Math.cos(n+S*i)*Math.sin(o+b*a),d.y=e*Math.cos(o+b*a),d.z=e*Math.sin(n+S*i)*Math.sin(o+b*a),f.push(d.x,d.y,d.z),c.copy(d).normalize(),m.push(c.x,c.y,c.z),p.push(S+y,1-b),v.push(l++)}u.push(v)}for(let g=0;g<r;g++)for(let v=0;v<t;v++){let b=u[g][v+1],y=u[g][v],x=u[g+1][v],S=u[g+1][v+1];(g!==0||o>0)&&h.push(b,y,S),(g!==r-1||s<Math.PI)&&h.push(y,x,S)}this.setIndex(h),this.setAttribute("position",new ft(f,3)),this.setAttribute("normal",new ft(m,3)),this.setAttribute("uv",new ft(p,2))}static fromJSON(e){return new G4(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}},$ae=class extends Nt{constructor(e=1,t=.4,r=64,n=8,i=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:n,p:i,q:o},r=Math.floor(r),n=Math.floor(n);let a=[],s=[],l=[],u=[],d=new F,c=new F,h=new F,f=new F,m=new F,p=new F,g=new F;for(let b=0;b<=r;++b){let y=b/r*i*Math.PI*2;v(y,i,o,e,h),v(y+.01,i,o,e,f),p.subVectors(f,h),g.addVectors(f,h),m.crossVectors(p,g),g.crossVectors(m,p),m.normalize(),g.normalize();for(let x=0;x<=n;++x){let S=x/n*Math.PI*2,w=-t*Math.cos(S),_=t*Math.sin(S);d.x=h.x+(w*g.x+_*m.x),d.y=h.y+(w*g.y+_*m.y),d.z=h.z+(w*g.z+_*m.z),s.push(d.x,d.y,d.z),c.subVectors(d,h).normalize(),l.push(c.x,c.y,c.z),u.push(b/r),u.push(x/n)}}for(let b=1;b<=r;b++)for(let y=1;y<=n;y++){let x=(n+1)*(b-1)+(y-1),S=(n+1)*b+(y-1),w=(n+1)*b+y,_=(n+1)*(b-1)+y;a.push(x,S,_),a.push(S,w,_)}this.setIndex(a),this.setAttribute("position",new ft(s,3)),this.setAttribute("normal",new ft(l,3)),this.setAttribute("uv",new ft(u,2));function v(b,y,x,S,w){let _=Math.cos(b),C=Math.sin(b),E=x/y*b,A=Math.cos(E);w.x=S*(2+A)*.5*_,w.y=S*(2+A)*C*.5,w.z=S*Math.sin(E)*.5}}static fromJSON(e){return new $ae(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}};function Rh(e,t,r){return Vae(e)?new e.constructor(e.subarray(t,r!==void 0?r:e.length)):e.slice(t,r)}function PC(e,t,r){return!e||!r&&e.constructor===t?e:typeof t.BYTES_PER_ELEMENT=="number"?new t(e):Array.prototype.slice.call(e)}function Vae(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Gst(e){function t(i,o){return e[i]-e[o]}let r=e.length,n=new Array(r);for(let i=0;i!==r;++i)n[i]=i;return n.sort(t),n}function Uq(e,t,r){let n=e.length,i=new e.constructor(n);for(let o=0,a=0;a!==n;++o){let s=r[o]*t;for(let l=0;l!==t;++l)i[a++]=e[s+l]}return i}function Hae(e,t,r,n){let i=1,o=e[0];for(;o!==void 0&&o[n]===void 0;)o=e[i++];if(o===void 0)return;let a=o[n];if(a!==void 0)if(Array.isArray(a))do a=o[n],a!==void 0&&(t.push(o.time),r.push.apply(r,a)),o=e[i++];while(o!==void 0);else if(a.toArray!==void 0)do a=o[n],a!==void 0&&(t.push(o.time),a.toArray(r,r.length)),o=e[i++];while(o!==void 0);else do a=o[n],a!==void 0&&(t.push(o.time),r.push(a)),o=e[i++];while(o!==void 0)}var cO=class{constructor(e,t,r,n){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=n!==void 0?n:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,r=this._cachedIndex,n=t[r],i=t[r-1];e:{t:{let o;r:{n:if(!(e<n)){for(let a=r+2;;){if(n===void 0){if(e<i)break n;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(i=n,n=t[++r],e<n)break t}o=t.length;break r}if(!(e>=i)){let a=t[1];e<a&&(r=2,i=a);for(let s=r-2;;){if(i===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===s)break;if(n=i,i=t[--r-1],e>=i)break t}o=r,r=0;break r}break e}for(;r<o;){let a=r+o>>>1;e<t[a]?o=a:r=a+1}if(n=t[r],i=t[r-1],i===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,i,n)}return this.interpolate_(r,i,e,n)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,r=this.sampleValues,n=this.valueSize,i=e*n;for(let o=0;o!==n;++o)t[o]=r[i+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},Wst=class extends cO{constructor(e,t,r,n){super(e,t,r,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:zv,endingEnd:zv}}intervalChanged_(e,t,r){let n=this.parameterPositions,i=e-2,o=e+1,a=n[i],s=n[o];if(a===void 0)switch(this.getSettings_().endingStart){case Bv:i=e,a=2*t-r;break;case tP:i=n.length-2,a=t+n[i]-n[i+1];break;default:i=e,a=r}if(s===void 0)switch(this.getSettings_().endingEnd){case Bv:o=e,s=2*r-t;break;case tP:o=1,s=r+n[1]-n[0];break;default:o=e-1,s=t}let l=(r-t)*.5,u=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(s-r),this._offsetPrev=i*u,this._offsetNext=o*u}interpolate_(e,t,r,n){let i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,u=this._offsetPrev,d=this._offsetNext,c=this._weightPrev,h=this._weightNext,f=(r-t)/(n-t),m=f*f,p=m*f,g=-c*p+2*c*m-c*f,v=(1+c)*p+(-1.5-2*c)*m+(-.5+c)*f+1,b=(-1-h)*p+(1.5+h)*m+.5*f,y=h*p-h*m;for(let x=0;x!==a;++x)i[x]=g*o[u+x]+v*o[l+x]+b*o[s+x]+y*o[d+x];return i}},Gae=class extends cO{constructor(e,t,r,n){super(e,t,r,n)}interpolate_(e,t,r,n){let i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,u=(r-t)/(n-t),d=1-u;for(let c=0;c!==a;++c)i[c]=o[l+c]*d+o[s+c]*u;return i}},qst=class extends cO{constructor(e,t,r,n){super(e,t,r,n)}interpolate_(e){return this.copySampleValue_(e-1)}},sd=class{constructor(e,t,r,n){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=PC(t,this.TimeBufferType),this.values=PC(r,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}static toJSON(e){let t=e.constructor,r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:PC(e.times,Array),values:PC(e.values,Array)};let n=e.getInterpolation();n!==e.DefaultInterpolation&&(r.interpolation=n)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new qst(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Gae(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Wst(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case JM:t=this.InterpolantFactoryMethodDiscrete;break;case eP:t=this.InterpolantFactoryMethodLinear;break;case CD:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){let r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return JM;case this.InterpolantFactoryMethodLinear:return eP;case this.InterpolantFactoryMethodSmooth:return CD}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let t=this.times;for(let r=0,n=t.length;r!==n;++r)t[r]+=e}return this}scale(e){if(e!==1){let t=this.times;for(let r=0,n=t.length;r!==n;++r)t[r]*=e}return this}trim(e,t){let r=this.times,n=r.length,i=0,o=n-1;for(;i!==n&&r[i]<e;)++i;for(;o!==-1&&r[o]>t;)--o;if(++o,i!==0||o!==n){i>=o&&(o=Math.max(o,1),i=o-1);let a=this.getValueSize();this.times=Rh(r,i,o),this.values=Rh(this.values,i*a,o*a)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let r=this.times,n=this.values,i=r.length;i===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==i;a++){let s=r[a];if(typeof s=="number"&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),e=!1;break}if(o!==null&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),e=!1;break}o=s}if(n!==void 0&&Vae(n))for(let a=0,s=n.length;a!==s;++a){let l=n[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}return e}optimize(){let e=Rh(this.times),t=Rh(this.values),r=this.getValueSize(),n=this.getInterpolation()===CD,i=e.length-1,o=1;for(let a=1;a<i;++a){let s=!1,l=e[a],u=e[a+1];if(l!==u&&(a!==1||l!==e[0]))if(n)s=!0;else{let d=a*r,c=d-r,h=d+r;for(let f=0;f!==r;++f){let m=t[d+f];if(m!==t[c+f]||m!==t[h+f]){s=!0;break}}}if(s){if(a!==o){e[o]=e[a];let d=a*r,c=o*r;for(let h=0;h!==r;++h)t[c+h]=t[d+h]}++o}}if(i>0){e[o]=e[i];for(let a=i*r,s=o*r,l=0;l!==r;++l)t[s+l]=t[a+l];++o}return o!==e.length?(this.times=Rh(e,0,o),this.values=Rh(t,0,o*r)):(this.times=e,this.values=t),this}clone(){let e=Rh(this.times,0),t=Rh(this.values,0),r=this.constructor,n=new r(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}};sd.prototype.TimeBufferType=Float32Array;sd.prototype.ValueBufferType=Float32Array;sd.prototype.DefaultInterpolation=eP;var cb=class extends sd{};cb.prototype.ValueTypeName="bool";cb.prototype.ValueBufferType=Array;cb.prototype.DefaultInterpolation=JM;cb.prototype.InterpolantFactoryMethodLinear=void 0;cb.prototype.InterpolantFactoryMethodSmooth=void 0;var Wae=class extends sd{};Wae.prototype.ValueTypeName="color";var lP=class extends sd{};lP.prototype.ValueTypeName="number";var Kst=class extends cO{constructor(e,t,r,n){super(e,t,r,n)}interpolate_(e,t,r,n){let i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(r-t)/(n-t),l=e*a;for(let u=l+a;l!==u;l+=4)Jt.slerpFlat(i,0,o,l-a,o,l,s);return i}},o_=class extends sd{InterpolantFactoryMethodLinear(e){return new Kst(this.times,this.values,this.getValueSize(),e)}};o_.prototype.ValueTypeName="quaternion";o_.prototype.DefaultInterpolation=eP;o_.prototype.InterpolantFactoryMethodSmooth=void 0;var db=class extends sd{};db.prototype.ValueTypeName="string";db.prototype.ValueBufferType=Array;db.prototype.DefaultInterpolation=JM;db.prototype.InterpolantFactoryMethodLinear=void 0;db.prototype.InterpolantFactoryMethodSmooth=void 0;var uP=class extends sd{};uP.prototype.ValueTypeName="vector";var DN=class{constructor(e,t=-1,r,n=R4){this.name=e,this.tracks=r,this.duration=t,this.blendMode=n,this.uuid=$l(),this.duration<0&&this.resetDuration()}static parse(e){let t=[],r=e.tracks,n=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(Yst(r[o]).scale(n));let i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){let t=[],r=e.tracks,n={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let i=0,o=r.length;i!==o;++i)t.push(sd.toJSON(r[i]));return n}static CreateFromMorphTargetSequence(e,t,r,n){let i=t.length,o=[];for(let a=0;a<i;a++){let s=[],l=[];s.push((a+i-1)%i,a,(a+1)%i),l.push(0,1,0);let u=Gst(s);s=Uq(s,1,u),l=Uq(l,1,u),!n&&s[0]===0&&(s.push(i),l.push(l[0])),o.push(new lP(".morphTargetInfluences["+t[a].name+"]",s,l).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){let n=e;r=n.geometry&&n.geometry.animations||n.animations}for(let n=0;n<r.length;n++)if(r[n].name===t)return r[n];return null}static CreateClipsFromMorphTargetSequences(e,t,r){let n={},i=/^([\w-]*?)([\d]+)$/;for(let a=0,s=e.length;a<s;a++){let l=e[a],u=l.name.match(i);if(u&&u.length>1){let d=u[1],c=n[d];c||(n[d]=c=[]),c.push(l)}}let o=[];for(let a in n)o.push(this.CreateFromMorphTargetSequence(a,n[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let r=function(u,d,c,h,f){if(c.length!==0){let m=[],p=[];Hae(c,m,p,h),m.length!==0&&f.push(new u(d,m,p))}},n=[],i=e.name||"default",o=e.fps||30,a=e.blendMode,s=e.length||-1,l=e.hierarchy||[];for(let u=0;u<l.length;u++){let d=l[u].keys;if(!(!d||d.length===0))if(d[0].morphTargets){let c={},h;for(h=0;h<d.length;h++)if(d[h].morphTargets)for(let f=0;f<d[h].morphTargets.length;f++)c[d[h].morphTargets[f]]=-1;for(let f in c){let m=[],p=[];for(let g=0;g!==d[h].morphTargets.length;++g){let v=d[h];m.push(v.time),p.push(v.morphTarget===f?1:0)}n.push(new lP(".morphTargetInfluence["+f+"]",m,p))}s=c.length*o}else{let c=".bones["+t[u].name+"]";r(uP,c+".position",d,"pos",n),r(o_,c+".quaternion",d,"rot",n),r(uP,c+".scale",d,"scl",n)}}return n.length===0?null:new this(i,s,n,a)}resetDuration(){let e=this.tracks,t=0;for(let r=0,n=e.length;r!==n;++r){let i=this.tracks[r];t=Math.max(t,i.times[i.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function Xst(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return lP;case"vector":case"vector2":case"vector3":case"vector4":return uP;case"color":return Wae;case"quaternion":return o_;case"bool":case"boolean":return cb;case"string":return db}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function Yst(e){if(e.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let t=Xst(e.type);if(e.times===void 0){let r=[],n=[];Hae(e.keys,r,n,"value"),e.times=r,e.values=n}return t.parse!==void 0?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var $q={enabled:!1,files:{},add:function(e,t){this.enabled!==!1&&(this.files[e]=t)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},qae=class{constructor(e,t,r){let n=this,i=!1,o=0,a=0,s,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(u){a++,i===!1&&n.onStart!==void 0&&n.onStart(u,o,a),i=!0},this.itemEnd=function(u){o++,n.onProgress!==void 0&&n.onProgress(u,o,a),o===a&&(i=!1,n.onLoad!==void 0&&n.onLoad())},this.itemError=function(u){n.onError!==void 0&&n.onError(u)},this.resolveURL=function(u){return s?s(u):u},this.setURLModifier=function(u){return s=u,this},this.addHandler=function(u,d){return l.push(u,d),this},this.removeHandler=function(u){let d=l.indexOf(u);return d!==-1&&l.splice(d,2),this},this.getHandler=function(u){for(let d=0,c=l.length;d<c;d+=2){let h=l[d],f=l[d+1];if(h.global&&(h.lastIndex=0),h.test(u))return f}return null}}},Qst=new qae,W4=class{constructor(e){this.manager=e!==void 0?e:Qst,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){let r=this;return new Promise(function(n,i){r.load(e,n,t,i)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}},gd={},Zst=class extends Error{constructor(e,t){super(e),this.response=t}},RN=class extends W4{constructor(e){super(e)}load(e,t,r,n){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let i=$q.get(e);if(i!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(i),this.manager.itemEnd(e)},0),i;if(gd[e]!==void 0){gd[e].push({onLoad:t,onProgress:r,onError:n});return}gd[e]=[],gd[e].push({onLoad:t,onProgress:r,onError:n});let o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,s=this.responseType;fetch(o).then(l=>{if(l.status===200||l.status===0){if(l.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||l.body===void 0||l.body.getReader===void 0)return l;let u=gd[e],d=l.body.getReader(),c=l.headers.get("Content-Length")||l.headers.get("X-File-Size"),h=c?parseInt(c):0,f=h!==0,m=0,p=new ReadableStream({start(g){v();function v(){d.read().then(({done:b,value:y})=>{if(b)g.close();else{m+=y.byteLength;let x=new ProgressEvent("progress",{lengthComputable:f,loaded:m,total:h});for(let S=0,w=u.length;S<w;S++){let _=u[S];_.onProgress&&_.onProgress(x)}g.enqueue(y),v()}})}}});return new Response(p)}else throw new Zst(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(s){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return l.json();default:if(a===void 0)return l.text();{let u=/charset="?([^;"\s]*)"?/i.exec(a),d=u&&u[1]?u[1].toLowerCase():void 0,c=new TextDecoder(d);return l.arrayBuffer().then(h=>c.decode(h))}}}).then(l=>{$q.add(e,l);let u=gd[e];delete gd[e];for(let d=0,c=u.length;d<c;d++){let h=u[d];h.onLoad&&h.onLoad(l)}}).catch(l=>{let u=gd[e];if(u===void 0)throw this.manager.itemError(e),l;delete gd[e];for(let d=0,c=u.length;d<c;d++){let h=u[d];h.onError&&h.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}},a_=class extends hn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Bt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}},Jst=class extends a_{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(hn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Bt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}},eR=new qe,Vq=new F,Hq=new F,q4=class{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ue(512,512),this.map=null,this.mapPass=null,this.matrix=new qe,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new z4,this._frameExtents=new ue(1,1),this._viewportCount=1,this._viewports=[new or(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,r=this.matrix;Vq.setFromMatrixPosition(e.matrixWorld),t.position.copy(Vq),Hq.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Hq),t.updateMatrixWorld(),eR.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(eR),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(eR)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},elt=class extends q4{constructor(){super(new oa(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,r=Xw*2*e.angle*this.focus,n=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;(r!==t.fov||n!==t.aspect||i!==t.far)&&(t.fov=r,t.aspect=n,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},tlt=class extends a_{constructor(e,t,r=0,n=Math.PI/3,i=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(hn.DEFAULT_UP),this.updateMatrix(),this.target=new hn,this.distance=r,this.angle=n,this.penumbra=i,this.decay=o,this.map=null,this.shadow=new elt}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},Gq=new qe,ix=new F,tR=new F,rlt=class extends q4{constructor(){super(new oa(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ue(4,2),this._viewportCount=6,this._viewports=[new or(2,1,1,1),new or(0,1,1,1),new or(3,1,1,1),new or(1,1,1,1),new or(3,0,1,1),new or(1,0,1,1)],this._cubeDirections=[new F(1,0,0),new F(-1,0,0),new F(0,0,1),new F(0,0,-1),new F(0,1,0),new F(0,-1,0)],this._cubeUps=[new F(0,1,0),new F(0,1,0),new F(0,1,0),new F(0,1,0),new F(0,0,1),new F(0,0,-1)]}updateMatrices(e,t=0){let r=this.camera,n=this.matrix,i=e.distance||r.far;i!==r.far&&(r.far=i,r.updateProjectionMatrix()),ix.setFromMatrixPosition(e.matrixWorld),r.position.copy(ix),tR.copy(r.position),tR.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(tR),r.updateMatrixWorld(),n.makeTranslation(-ix.x,-ix.y,-ix.z),Gq.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Gq)}},nlt=class extends a_{constructor(e,t,r=0,n=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=n,this.shadow=new rlt}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},ilt=class extends q4{constructor(){super(new B4(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},olt=class extends a_{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(hn.DEFAULT_UP),this.updateMatrix(),this.target=new hn,this.shadow=new ilt}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},Kae=class extends Nt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){let e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}},Xae=class extends W4{constructor(e){super(e)}load(e,t,r,n){let i=this,o=new RN(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,function(a){try{t(i.parse(JSON.parse(a)))}catch(s){n?n(s):console.error(s),i.manager.itemError(e)}},r,n)}parse(e){let t={},r={};function n(c,h){if(t[h]!==void 0)return t[h];let f=c.interleavedBuffers[h],m=i(c,f.buffer),p=oC(f.type,m),g=new pst(p,f.stride);return g.uuid=f.uuid,t[h]=g,g}function i(c,h){if(r[h]!==void 0)return r[h];let f=c.arrayBuffers[h],m=new Uint32Array(f).buffer;return r[h]=m,m}let o=e.isInstancedBufferGeometry?new Kae:new Nt,a=e.data.index;if(a!==void 0){let c=oC(a.type,a.array);o.setIndex(new Kt(c,1))}let s=e.data.attributes;for(let c in s){let h=s[c],f;if(h.isInterleavedBufferAttribute){let m=n(e.data,h.data);f=new TN(m,h.itemSize,h.offset,h.normalized)}else{let m=oC(h.type,h.array),p=h.isInstancedBufferAttribute?Iae:Kt;f=new p(m,h.itemSize,h.normalized)}h.name!==void 0&&(f.name=h.name),h.usage!==void 0&&f.setUsage(h.usage),h.updateRange!==void 0&&(f.updateRange.offset=h.updateRange.offset,f.updateRange.count=h.updateRange.count),o.setAttribute(c,f)}let l=e.data.morphAttributes;if(l)for(let c in l){let h=l[c],f=[];for(let m=0,p=h.length;m<p;m++){let g=h[m],v;if(g.isInterleavedBufferAttribute){let b=n(e.data,g.data);v=new TN(b,g.itemSize,g.offset,g.normalized)}else{let b=oC(g.type,g.array);v=new Kt(b,g.itemSize,g.normalized)}g.name!==void 0&&(v.name=g.name),f.push(v)}o.morphAttributes[c]=f}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);let u=e.data.groups||e.data.drawcalls||e.data.offsets;if(u!==void 0)for(let c=0,h=u.length;c!==h;++c){let f=u[c];o.addGroup(f.start,f.count,f.materialIndex)}let d=e.data.boundingSphere;if(d!==void 0){let c=new F;d.center!==void 0&&c.fromArray(d.center),o.boundingSphere=new Ps(c,d.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}},alt=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Wq(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let t=Wq();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};function Wq(){return(typeof performance>"u"?Date:performance).now()}var slt=class{constructor(e,t,r){this.binding=e,this.valueSize=r;let n,i,o;switch(t){case"quaternion":n=this._slerp,i=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":n=this._select,i=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:n=this._lerp,i=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=n,this._mixBufferRegionAdditive=i,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){let r=this.buffer,n=this.valueSize,i=e*n+n,o=this.cumulativeWeight;if(o===0){for(let a=0;a!==n;++a)r[i+a]=r[a];o=t}else{o+=t;let a=t/o;this._mixBufferRegion(r,i,0,a,n)}this.cumulativeWeight=o}accumulateAdditive(e){let t=this.buffer,r=this.valueSize,n=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,n,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){let t=this.valueSize,r=this.buffer,n=e*t+t,i=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){let s=t*this._origIndex;this._mixBufferRegion(r,n,s,1-i,t)}o>0&&this._mixBufferRegionAdditive(r,n,this._addIndex*t,1,t);for(let s=t,l=t+t;s!==l;++s)if(r[s]!==r[s+t]){a.setValue(r,n);break}}saveOriginalState(){let e=this.binding,t=this.buffer,r=this.valueSize,n=r*this._origIndex;e.getValue(t,n);for(let i=r,o=n;i!==o;++i)t[i]=t[n+i%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){let e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,n,i){if(n>=.5)for(let o=0;o!==i;++o)e[t+o]=e[r+o]}_slerp(e,t,r,n){Jt.slerpFlat(e,t,e,t,e,r,n)}_slerpAdditive(e,t,r,n,i){let o=this._workIndex*i;Jt.multiplyQuaternionsFlat(e,o,e,t,e,r),Jt.slerpFlat(e,t,e,t,e,o,n)}_lerp(e,t,r,n,i){let o=1-n;for(let a=0;a!==i;++a){let s=t+a;e[s]=e[s]*o+e[r+a]*n}}_lerpAdditive(e,t,r,n,i){for(let o=0;o!==i;++o){let a=t+o;e[a]=e[a]+e[r+o]*n}}},K4="\\[\\]\\.:\\/",llt=new RegExp("["+K4+"]","g"),X4="[^"+K4+"]",ult="[^"+K4.replace("\\.","")+"]",clt=/((?:WC+[\/:])*)/.source.replace("WC",X4),dlt=/(WCOD+)?/.source.replace("WCOD",ult),hlt=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",X4),flt=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",X4),plt=new RegExp("^"+clt+dlt+hlt+flt+"$"),mlt=["material","materials","bones","map"],glt=class{constructor(e,t,r){let n=r||bn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,n)}getValue(e,t){this.bind();let r=this._targetGroup.nCachedObjects_,n=this._bindings[r];n!==void 0&&n.getValue(e,t)}setValue(e,t){let r=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=r.length;n!==i;++n)r[n].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}},bn=class{constructor(e,t,r){this.path=t,this.parsedPath=r||bn.parseTrackName(t),this.node=bn.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new bn.Composite(e,t,r):new bn(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(llt,"")}static parseTrackName(e){let t=plt.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);let r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},n=r.nodeName&&r.nodeName.lastIndexOf(".");if(n!==void 0&&n!==-1){let i=r.nodeName.substring(n+1);mlt.indexOf(i)!==-1&&(r.nodeName=r.nodeName.substring(0,n),r.objectName=i)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){let r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){let r=function(i){for(let o=0;o<i.length;o++){let a=i[o];if(a.name===t||a.uuid===t)return a;let s=r(a.children);if(s)return s}return null},n=r(e.children);if(n)return n}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){let r=this.resolvedProperty;for(let n=0,i=r.length;n!==i;++n)e[t++]=r[n]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){let r=this.resolvedProperty;for(let n=0,i=r.length;n!==i;++n)r[n]=e[t++]}_setValue_array_setNeedsUpdate(e,t){let r=this.resolvedProperty;for(let n=0,i=r.length;n!==i;++n)r[n]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){let r=this.resolvedProperty;for(let n=0,i=r.length;n!==i;++n)r[n]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node,t=this.parsedPath,r=t.objectName,n=t.propertyName,i=t.propertyIndex;if(e||(e=bn.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let l=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===l){l=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(l!==void 0){if(e[l]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[l]}}let o=e[n];if(o===void 0){let l=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+n+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(i!==void 0){if(n==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[i]!==void 0&&(i=e.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else o.fromArray!==void 0&&o.toArray!==void 0?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=n;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}};bn.Composite=glt;bn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};bn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};bn.prototype.GetterByBindingType=[bn.prototype._getValue_direct,bn.prototype._getValue_array,bn.prototype._getValue_arrayElement,bn.prototype._getValue_toArray];bn.prototype.SetterByBindingTypeAndVersioning=[[bn.prototype._setValue_direct,bn.prototype._setValue_direct_setNeedsUpdate,bn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[bn.prototype._setValue_array,bn.prototype._setValue_array_setNeedsUpdate,bn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[bn.prototype._setValue_arrayElement,bn.prototype._setValue_arrayElement_setNeedsUpdate,bn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[bn.prototype._setValue_fromArray,bn.prototype._setValue_fromArray_setNeedsUpdate,bn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var vlt=class{constructor(e,t,r=null,n=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=n;let i=t.tracks,o=i.length,a=new Array(o),s={endingStart:zv,endingEnd:zv};for(let l=0;l!==o;++l){let u=i[l].createInterpolant(null);a[l]=u,u.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=hae,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){let n=this._clip.duration,i=e._clip.duration,o=i/n,a=n/i;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){let e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){let n=this._mixer,i=n.time,o=this.timeScale,a=this._timeScaleInterpolant;a===null&&(a=n._lendControlInterpolant(),this._timeScaleInterpolant=a);let s=a.parameterPositions,l=a.sampleValues;return s[0]=i,s[1]=i+r,l[0]=e/o,l[1]=t/o,this}stopWarping(){let e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,n){if(!this.enabled){this._updateWeight(e);return}let i=this._startTime;if(i!==null){let s=(e-i)*r;s<0||r===0?t=0:(this._startTime=null,t=r*s)}t*=this._updateTimeScale(e);let o=this._updateTime(t),a=this._updateWeight(e);if(a>0){let s=this._interpolants,l=this._propertyBindings;switch(this.blendMode){case Ztt:for(let u=0,d=s.length;u!==d;++u)s[u].evaluate(o),l[u].accumulateAdditive(a);break;case R4:default:for(let u=0,d=s.length;u!==d;++u)s[u].evaluate(o),l[u].accumulate(n,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;let r=this._weightInterpolant;if(r!==null){let n=r.evaluate(e)[0];t*=n,e>r.parameterPositions[1]&&(this.stopFading(),n===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;let r=this._timeScaleInterpolant;if(r!==null){let n=r.evaluate(e)[0];t*=n,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){let t=this._clip.duration,r=this.loop,n=this.time+e,i=this._loopCount,o=r===D4;if(e===0)return i===-1?n:o&&(i&1)===1?t-n:n;if(r===dae){i===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(n>=t)n=t;else if(n<0)n=0;else{this.time=n;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(i===-1&&(e>=0?(i=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),n>=t||n<0){let a=Math.floor(n/t);n-=t*a,i+=Math.abs(a);let s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,n=e>0?t:0,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(s===1){let l=e<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=n,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=n;if(o&&(i&1)===1)return t-n}return n}_setEndings(e,t,r){let n=this._interpolantSettings;r?(n.endingStart=Bv,n.endingEnd=Bv):(e?n.endingStart=this.zeroSlopeAtStart?Bv:zv:n.endingStart=tP,t?n.endingEnd=this.zeroSlopeAtEnd?Bv:zv:n.endingEnd=tP)}_scheduleFading(e,t,r){let n=this._mixer,i=n.time,o=this._weightInterpolant;o===null&&(o=n._lendControlInterpolant(),this._weightInterpolant=o);let a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=r,this}},ylt=new Float32Array(1),blt=class extends qo{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){let r=e._localRoot||this._root,n=e._clip.tracks,i=n.length,o=e._propertyBindings,a=e._interpolants,s=r.uuid,l=this._bindingsByRootAndName,u=l[s];u===void 0&&(u={},l[s]=u);for(let d=0;d!==i;++d){let c=n[d],h=c.name,f=u[h];if(f!==void 0)++f.referenceCount,o[d]=f;else{if(f=o[d],f!==void 0){f._cacheIndex===null&&(++f.referenceCount,this._addInactiveBinding(f,s,h));continue}let m=t&&t._propertyBindings[d].binding.parsedPath;f=new slt(bn.create(r,h,m),c.ValueTypeName,c.getValueSize()),++f.referenceCount,this._addInactiveBinding(f,s,h),o[d]=f}a[d].resultBuffer=f.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){let r=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,r)}let t=e._propertyBindings;for(let r=0,n=t.length;r!==n;++r){let i=t[r];i.useCount++===0&&(this._lendBinding(i),i.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){let t=e._propertyBindings;for(let r=0,n=t.length;r!==n;++r){let i=t[r];--i.useCount===0&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){let t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){let n=this._actions,i=this._actionsByClip,o=i[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{let a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=n.length,n.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){let t=this._actions,r=t[t.length-1],n=e._cacheIndex;r._cacheIndex=n,t[n]=r,t.pop(),e._cacheIndex=null;let i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,l=s[s.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,s[u]=l,s.pop(),e._byClipCacheIndex=null;let d=a.actionByRoot,c=(e._localRoot||this._root).uuid;delete d[c],s.length===0&&delete o[i],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){let t=e._propertyBindings;for(let r=0,n=t.length;r!==n;++r){let i=t[r];--i.referenceCount===0&&this._removeInactiveBinding(i)}}_lendAction(e){let t=this._actions,r=e._cacheIndex,n=this._nActiveActions++,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i}_takeBackAction(e){let t=this._actions,r=e._cacheIndex,n=--this._nActiveActions,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i}_addInactiveBinding(e,t,r){let n=this._bindingsByRootAndName,i=this._bindings,o=n[t];o===void 0&&(o={},n[t]=o),o[r]=e,e._cacheIndex=i.length,i.push(e)}_removeInactiveBinding(e){let t=this._bindings,r=e.binding,n=r.rootNode.uuid,i=r.path,o=this._bindingsByRootAndName,a=o[n],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete a[i],Object.keys(a).length===0&&delete o[n]}_lendBinding(e){let t=this._bindings,r=e._cacheIndex,n=this._nActiveBindings++,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i}_takeBackBinding(e){let t=this._bindings,r=e._cacheIndex,n=--this._nActiveBindings,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i}_lendControlInterpolant(){let e=this._controlInterpolants,t=this._nActiveControlInterpolants++,r=e[t];return r===void 0&&(r=new Gae(new Float32Array(2),new Float32Array(2),1,ylt),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){let t=this._controlInterpolants,r=e.__cacheIndex,n=--this._nActiveControlInterpolants,i=t[n];e.__cacheIndex=n,t[n]=e,i.__cacheIndex=r,t[r]=i}clipAction(e,t,r){let n=t||this._root,i=n.uuid,o=typeof e=="string"?DN.findByName(n,e):e,a=o!==null?o.uuid:e,s=this._actionsByClip[a],l=null;if(r===void 0&&(o!==null?r=o.blendMode:r=R4),s!==void 0){let d=s.actionByRoot[i];if(d!==void 0&&d.blendMode===r)return d;l=s.knownActions[0],o===null&&(o=l._clip)}if(o===null)return null;let u=new vlt(this,o,t,r);return this._bindAction(u,l),this._addInactiveAction(u,a,i),u}existingAction(e,t){let r=t||this._root,n=r.uuid,i=typeof e=="string"?DN.findByName(r,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[n]||null}stopAllAction(){let e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;let t=this._actions,r=this._nActiveActions,n=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1;for(let l=0;l!==r;++l)t[l]._update(n,e,i,o);let a=this._bindings,s=this._nActiveBindings;for(let l=0;l!==s;++l)a[l].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){let t=this._actions,r=e.uuid,n=this._actionsByClip,i=n[r];if(i!==void 0){let o=i.knownActions;for(let a=0,s=o.length;a!==s;++a){let l=o[a];this._deactivateAction(l);let u=l._cacheIndex,d=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,d._cacheIndex=u,t[u]=d,t.pop(),this._removeInactiveBindingsForAction(l)}delete n[r]}}uncacheRoot(e){let t=e.uuid,r=this._actionsByClip;for(let o in r){let a=r[o].actionByRoot,s=a[t];s!==void 0&&(this._deactivateAction(s),this._removeInactiveAction(s))}let n=this._bindingsByRootAndName,i=n[t];if(i!==void 0)for(let o in i){let a=i[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){let r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}},We=class{constructor(e){this.value=e}clone(){return new We(this.value.clone===void 0?this.value:this.value.clone())}},Yae=class{constructor(e,t,r=0,n=1/0){this.ray=new ab(e,t),this.near=r,this.far=n,this.camera=null,this.layers=new L4,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return kN(e,this,r,t),r.sort(qq),r}intersectObjects(e,t=!0,r=[]){for(let n=0,i=e.length;n<i;n++)kN(e[n],this,r,t);return r.sort(qq),r}};function qq(e,t){return e.distance-t.distance}function kN(e,t,r,n){if(e.layers.test(t.layers)&&e.raycast(t,r),n===!0){let i=e.children;for(let o=0,a=i.length;o<a;o++)kN(i[o],t,r,!0)}}var Kq=class{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Vi(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}},Xq=new ue,Qae=class{constructor(e=new ue(1/0,1/0),t=new ue(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let r=Xq.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Xq.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},Yq=new F,TC=new F,Vl=class{constructor(e=new F,t=new F){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Yq.subVectors(e,this.start),TC.subVectors(this.end,this.start);let r=TC.dot(TC),n=TC.dot(Yq)/r;return t&&(n=Vi(n,0,1)),n}closestPointToPoint(e,t,r){let n=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(n).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}},Qq=new F,xlt=class extends hn{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";let r=new Nt,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,s=32;o<s;o++,a++){let l=o/s*Math.PI*2,u=a/s*Math.PI*2;n.push(Math.cos(l),Math.sin(l),1,Math.cos(u),Math.sin(u),1)}r.setAttribute("position",new ft(n,3));let i=new bp({fog:!1,toneMapped:!1});this.cone=new i_(r,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);let e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Qq.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Qq),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},wlt=class extends Fa{constructor(e,t,r){let n=new G4(t,4,2),i=new n_({wireframe:!0,fog:!1,toneMapped:!1});super(n,i),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},Zq=new F,OC=new F,Jq=new F,Slt=class extends hn{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let n=new Nt;n.setAttribute("position",new ft([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));let i=new bp({fog:!1,toneMapped:!1});this.lightPlane=new oP(n,i),this.add(this.lightPlane),n=new Nt,n.setAttribute("position",new ft([0,0,0,0,0,1],3)),this.targetLine=new oP(n,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),Zq.setFromMatrixPosition(this.light.matrixWorld),OC.setFromMatrixPosition(this.light.target.matrixWorld),Jq.subVectors(OC,Zq),this.lightPlane.lookAt(OC),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(OC),this.targetLine.scale.z=Jq.length()}},IC=new F,di=new lb,cP=class extends i_{constructor(e){let t=new Nt,r=new bp({color:16777215,vertexColors:!0,toneMapped:!1}),n=[],i=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(f,m){s(f),s(m)}function s(f){n.push(0,0,0),i.push(0,0,0),o[f]===void 0&&(o[f]=[]),o[f].push(n.length/3-1)}t.setAttribute("position",new ft(n,3)),t.setAttribute("color",new ft(i,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();let l=new Bt(16755200),u=new Bt(16711680),d=new Bt(43775),c=new Bt(16777215),h=new Bt(3355443);this.setColors(l,u,d,c,h)}setColors(e,t,r,n,i){let o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,r.r,r.g,r.b),o.setXYZ(33,r.r,r.g,r.b),o.setXYZ(34,r.r,r.g,r.b),o.setXYZ(35,r.r,r.g,r.b),o.setXYZ(36,r.r,r.g,r.b),o.setXYZ(37,r.r,r.g,r.b),o.setXYZ(38,n.r,n.g,n.b),o.setXYZ(39,n.r,n.g,n.b),o.setXYZ(40,i.r,i.g,i.b),o.setXYZ(41,i.r,i.g,i.b),o.setXYZ(42,i.r,i.g,i.b),o.setXYZ(43,i.r,i.g,i.b),o.setXYZ(44,i.r,i.g,i.b),o.setXYZ(45,i.r,i.g,i.b),o.setXYZ(46,i.r,i.g,i.b),o.setXYZ(47,i.r,i.g,i.b),o.setXYZ(48,i.r,i.g,i.b),o.setXYZ(49,i.r,i.g,i.b),o.needsUpdate=!0}update(){let e=this.geometry,t=this.pointMap,r=1,n=1;di.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Si("c",t,e,di,0,0,-1),Si("t",t,e,di,0,0,1),Si("n1",t,e,di,-r,-n,-1),Si("n2",t,e,di,r,-n,-1),Si("n3",t,e,di,-r,n,-1),Si("n4",t,e,di,r,n,-1),Si("f1",t,e,di,-r,-n,1),Si("f2",t,e,di,r,-n,1),Si("f3",t,e,di,-r,n,1),Si("f4",t,e,di,r,n,1),Si("u1",t,e,di,r*.7,n*1.1,-1),Si("u2",t,e,di,-r*.7,n*1.1,-1),Si("u3",t,e,di,0,n*2,-1),Si("cf1",t,e,di,-r,0,1),Si("cf2",t,e,di,r,0,1),Si("cf3",t,e,di,0,-n,1),Si("cf4",t,e,di,0,n,1),Si("cn1",t,e,di,-r,0,-1),Si("cn2",t,e,di,r,0,-1),Si("cn3",t,e,di,0,-n,-1),Si("cn4",t,e,di,0,n,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function Si(e,t,r,n,i,o,a){IC.set(i,o,a).unproject(n);let s=t[e];if(s!==void 0){let l=r.getAttribute("position");for(let u=0,d=s.length;u<d;u++)l.setXYZ(s[u],IC.x,IC.y,IC.z)}}var dP=class extends i_{constructor(e,t=16776960){let r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],i=new Nt;i.setIndex(new Kt(r,1)),i.setAttribute("position",new ft(n,3)),super(i,new bp({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}},_lt=class extends i_{constructor(e=1){let t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],n=new Nt;n.setAttribute("position",new ft(t,3)),n.setAttribute("color",new ft(r,3));let i=new bp({vertexColors:!0,toneMapped:!1});super(n,i),this.type="AxesHelper"}setColors(e,t,r){let n=new Bt,i=this.geometry.attributes.color.array;return n.set(e),n.toArray(i,0),n.toArray(i,3),n.set(t),n.toArray(i,6),n.toArray(i,9),n.set(r),n.toArray(i,12),n.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},Fd=Clt();function Clt(){let e=new ArrayBuffer(4),t=new Float32Array(e),r=new Uint32Array(e),n=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){let u=l-127;u<-27?(n[l]=0,n[l|256]=32768,i[l]=24,i[l|256]=24):u<-14?(n[l]=1024>>-u-14,n[l|256]=1024>>-u-14|32768,i[l]=-u-1,i[l|256]=-u-1):u<=15?(n[l]=u+15<<10,n[l|256]=u+15<<10|32768,i[l]=13,i[l|256]=13):u<128?(n[l]=31744,n[l|256]=64512,i[l]=24,i[l|256]=24):(n[l]=31744,n[l|256]=64512,i[l]=13,i[l|256]=13)}let o=new Uint32Array(2048),a=new Uint32Array(64),s=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,d=0;for(;!(u&8388608);)u<<=1,d-=8388608;u&=-8388609,d+=947912704,o[l]=u|d}for(let l=1024;l<2048;++l)o[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(s[l]=1024);return{floatView:t,uint32View:r,baseTable:n,shiftTable:i,mantissaTable:o,exponentTable:a,offsetTable:s}}function Alt(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=Vi(e,-65504,65504),Fd.floatView[0]=e;let t=Fd.uint32View[0],r=t>>23&511;return Fd.baseTable[r]+((t&8388607)>>Fd.shiftTable[r])}function Elt(e){let t=e>>10;return Fd.uint32View[0]=Fd.mantissaTable[Fd.offsetTable[t]+(e&1023)]+Fd.exponentTable[t],Fd.floatView[0]}var Mlt=Object.freeze({__proto__:null,fromHalfFloat:Elt,toHalfFloat:Alt});typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ob}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ob);var ox=".",Y4=Symbol("target"),Zae=Symbol("unsubscribe");function LN(e){return e instanceof Date||e instanceof Set||e instanceof Map||e instanceof WeakSet||e instanceof WeakMap||ArrayBuffer.isView(e)}function Plt(e){return(typeof e=="object"?e===null:typeof e!="function")||e instanceof RegExp}var Ac=Array.isArray;function Q4(e){return typeof e=="symbol"}var Tlt={after:(e,t)=>Ac(e)?e.slice(t.length):t===""?e:e.slice(t.length+1),concat:(e,t)=>Ac(e)?(e=[...e],t&&e.push(t),e):t&&t.toString!==void 0?(e!==""&&(e+=ox),Q4(t)?e+t.toString():e+t):e,initial:e=>{if(Ac(e))return e.slice(0,-1);if(e==="")return e;let t=e.lastIndexOf(ox);return t===-1?"":e.slice(0,t)},last:e=>{if(Ac(e))return e[e.length-1]||"";if(e==="")return e;let t=e.lastIndexOf(ox);return t===-1?e:e.slice(t+1)},walk:(e,t)=>{if(Ac(e))for(let r of e)t(r);else if(e!==""){let r=0,n=e.indexOf(ox);if(n===-1)t(e);else for(;r<e.length;)n===-1&&(n=e.length),t(e.slice(r,n)),r=n+1,n=e.indexOf(ox,r)}},get(e,t){return this.walk(t,r=>{e&&(e=e[r])}),e}},Al=Tlt;function Olt(e){return typeof e=="object"&&typeof e.next=="function"}function Ilt(e,t,r,n,i){let o=e.next;if(t.name==="entries")e.next=function(){let a=o.call(this);return a.done===!1&&(a.value[0]=i(a.value[0],t,a.value[0],n),a.value[1]=i(a.value[1],t,a.value[0],n)),a};else if(t.name==="values"){let a=r[Y4].keys();e.next=function(){let s=o.call(this);return s.done===!1&&(s.value=i(s.value,t,a.next().value,n)),s}}else e.next=function(){let a=o.call(this);return a.done===!1&&(a.value=i(a.value,t,a.value,n)),a};return e}function e7(e,t,r){return e.isUnsubscribed||t.ignoreSymbols&&Q4(r)||t.ignoreUnderscores&&r.charAt(0)==="_"||"ignoreKeys"in t&&t.ignoreKeys.includes(r)}var Dlt=class{constructor(e){this._equals=e,this._proxyCache=new WeakMap,this._pathCache=new WeakMap,this.isUnsubscribed=!1}_getDescriptorCache(){return this._descriptorCache===void 0&&(this._descriptorCache=new WeakMap),this._descriptorCache}_getProperties(e){let t=this._getDescriptorCache(),r=t.get(e);return r===void 0&&(r={},t.set(e,r)),r}_getOwnPropertyDescriptor(e,t){if(this.isUnsubscribed)return Reflect.getOwnPropertyDescriptor(e,t);let r=this._getProperties(e),n=r[t];return n===void 0&&(n=Reflect.getOwnPropertyDescriptor(e,t),r[t]=n),n}getProxy(e,t,r,n){if(this.isUnsubscribed)return e;let i=e[n],o=i||e;this._pathCache.set(o,t);let a=this._proxyCache.get(o);return a===void 0&&(a=i===void 0?new Proxy(e,r):e,this._proxyCache.set(o,a)),a}getPath(e){return this.isUnsubscribed?void 0:this._pathCache.get(e)}isDetached(e,t){return!Object.is(e,Al.get(t,this.getPath(e)))}defineProperty(e,t,r){return Reflect.defineProperty(e,t,r)?(this.isUnsubscribed||(this._getProperties(e)[t]=r),!0):!1}setProperty(e,t,r,n,i){if(!this._equals(i,r)||!(t in e)){let o=this._getOwnPropertyDescriptor(e,t);return o!==void 0&&"set"in o?Reflect.set(e,t,r,n):Reflect.set(e,t,r)}return!0}deleteProperty(e,t,r){if(Reflect.deleteProperty(e,t)){if(!this.isUnsubscribed){let n=this._getDescriptorCache().get(e);n&&(delete n[t],this._pathCache.delete(r))}return!0}return!1}isSameDescriptor(e,t,r){let n=this._getOwnPropertyDescriptor(t,r);return e!==void 0&&n!==void 0&&Object.is(e.value,n.value)&&(e.writable||!1)===(n.writable||!1)&&(e.enumerable||!1)===(n.enumerable||!1)&&(e.configurable||!1)===(n.configurable||!1)&&e.get===n.get&&e.set===n.set}isGetInvariant(e,t){let r=this._getOwnPropertyDescriptor(e,t);return r!==void 0&&r.configurable!==!0&&r.writable!==!0}unsubscribe(){this._descriptorCache=null,this._pathCache=null,this._proxyCache=null,this.isUnsubscribed=!0}};function NN(e){return toString.call(e)==="[object Object]"}function DC(){return!0}function qg(e,t){return e.length!==t.length||e.some((r,n)=>t[n]!==r)}var Jae=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),Rlt=new Set(["concat","includes","indexOf","join","keys","lastIndexOf"]),ese={push:DC,pop:DC,shift:DC,unshift:DC,copyWithin:qg,reverse:qg,sort:qg,splice:qg,flat:qg,fill:qg},klt=new Set([...Jae,...Rlt,...Object.keys(ese)]);function RC(e,t){if(e.size!==t.size)return!0;for(let r of e)if(!t.has(r))return!0;return!1}var tse=["keys","values","entries"],rse=new Set(["has","toString"]),nse={add:RC,clear:RC,delete:RC,forEach:RC},Llt=new Set([...rse,...Object.keys(nse),...tse]);function kC(e,t){if(e.size!==t.size)return!0;let r;for(let[n,i]of e)if(r=t.get(n),r!==i||r===void 0&&!t.has(n))return!0;return!1}var Nlt=new Set([...rse,"get"]),ise={set:kC,clear:kC,delete:kC,forEach:kC},zlt=new Set([...Nlt,...Object.keys(ise),...tse]),ip=class{constructor(e,t,r,n){this._path=t,this._isChanged=!1,this._clonedCache=new Set,this._hasOnValidate=n,this._changes=n?[]:null,this.clone=t===void 0?e:this._shallowClone(e)}static isHandledMethod(e){return Jae.has(e)}_shallowClone(e){let t=e;if(NN(e))t={...e};else if(Ac(e))t=[...e];else if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set([...e].map(r=>this._shallowClone(r)));else if(e instanceof Map){t=new Map;for(let[r,n]of e.entries())t.set(r,this._shallowClone(n))}return this._clonedCache.add(t),t}preferredThisArg(e,t,r,n){return e?(Ac(n)?this._onIsChanged=ese[t]:n instanceof Set?this._onIsChanged=nse[t]:n instanceof Map&&(this._onIsChanged=ise[t]),n):r}update(e,t,r){let n=Al.after(e,this._path);if(t!=="length"){let i=this.clone;Al.walk(n,o=>{i&&i[o]&&(this._clonedCache.has(i[o])||(i[o]=this._shallowClone(i[o])),i=i[o])}),this._hasOnValidate&&this._changes.push({path:n,property:t,previous:r}),i&&i[t]&&(i[t]=r)}this._isChanged=!0}undo(e){let t;for(let r=this._changes.length-1;r!==-1;r--)t=this._changes[r],Al.get(e,t.path)[t.property]=t.previous}isChanged(e){return this._onIsChanged===void 0?this._isChanged:this._onIsChanged(this.clone,e)}},t7=class extends ip{static isHandledMethod(e){return klt.has(e)}},Blt=class extends ip{undo(e){e.setTime(this.clone.getTime())}isChanged(e,t){return!t(this.clone.valueOf(),e.valueOf())}},r7=class extends ip{static isHandledMethod(e){return Llt.has(e)}undo(e){for(let t of this.clone)e.add(t);for(let t of e)this.clone.has(t)||e.delete(t)}},n7=class extends ip{static isHandledMethod(e){return zlt.has(e)}undo(e){for(let[t,r]of this.clone.entries())e.set(t,r);for(let t of e.keys())this.clone.has(t)||e.delete(t)}},Flt=class extends ip{constructor(e,t,r,n){super(void 0,t,r,n),this._arg1=r[0],this._weakValue=e.has(this._arg1)}isChanged(e){return this._weakValue!==e.has(this._arg1)}undo(e){this._weakValue&&!e.has(this._arg1)?e.add(this._arg1):e.delete(this._arg1)}},jlt=class extends ip{constructor(e,t,r,n){super(void 0,t,r,n),this._weakKey=r[0],this._weakHas=e.has(this._weakKey),this._weakValue=e.get(this._weakKey)}isChanged(e){return this._weakValue!==e.get(this._weakKey)}undo(e){let t=e.has(this._weakKey);this._weakHas&&!t?e.set(this._weakKey,this._weakValue):!this._weakHas&&t?e.delete(this._weakKey):this._weakValue!==e.get(this._weakKey)&&e.set(this._weakKey,this._weakValue)}},vv=class{constructor(e){this._stack=[],this._hasOnValidate=e}static isHandledType(e){return NN(e)||Ac(e)||LN(e)}static isHandledMethod(e,t){return NN(e)?ip.isHandledMethod(t):Ac(e)?t7.isHandledMethod(t):e instanceof Set?r7.isHandledMethod(t):e instanceof Map?n7.isHandledMethod(t):LN(e)}get isCloning(){return this._stack.length>0}start(e,t,r){let n=ip;Ac(e)?n=t7:e instanceof Date?n=Blt:e instanceof Set?n=r7:e instanceof Map?n=n7:e instanceof WeakSet?n=Flt:e instanceof WeakMap&&(n=jlt),this._stack.push(new n(e,t,r,this._hasOnValidate))}update(e,t,r){this._stack[this._stack.length-1].update(e,t,r)}preferredThisArg(e,t,r){let{name:n}=e,i=vv.isHandledMethod(r,n);return this._stack[this._stack.length-1].preferredThisArg(i,n,t,r)}isChanged(e,t,r){return this._stack[this._stack.length-1].isChanged(e,t,r)}undo(e){this._previousClone!==void 0&&this._previousClone.undo(e)}stop(){return this._previousClone=this._stack.pop(),this._previousClone.clone}},Ult={equals:Object.is,isShallow:!1,pathAsArray:!1,ignoreSymbols:!1,ignoreUnderscores:!1,ignoreDetached:!1,details:!1},Z4=(e,t,r={})=>{r={...Ult,...r};let n=Symbol("ProxyTarget"),{equals:i,isShallow:o,ignoreDetached:a,details:s}=r,l=new Dlt(i),u=typeof r.onValidate=="function",d=new vv(u),c=(b,y,x,S,w)=>!u||d.isCloning||r.onValidate(Al.concat(l.getPath(b),y),x,S,w)===!0,h=(b,y,x,S)=>{!e7(l,r,y)&&!(a&&l.isDetached(b,e))&&f(l.getPath(b),y,x,S)},f=(b,y,x,S,w)=>{d.isCloning?d.update(b,y,S):t(Al.concat(b,y),x,S,w)},m=b=>b&&(b[n]||b),p=(b,y,x,S)=>Plt(b)||x==="constructor"||o&&!vv.isHandledMethod(y,x)||e7(l,r,x)||l.isGetInvariant(y,x)||a&&l.isDetached(y,e)?b:(S===void 0&&(S=l.getPath(y)),l.getProxy(b,Al.concat(S,x),g,n)),g={get(b,y,x){if(Q4(y)){if(y===n||y===Y4)return b;if(y===Zae&&!l.isUnsubscribed&&l.getPath(b).length===0)return l.unsubscribe(),b}let S=LN(b)?Reflect.get(b,y):Reflect.get(b,y,x);return p(S,b,y)},set(b,y,x,S){x=m(x);let w=b[n]||b,_=w[y];if(i(_,x)&&y in b)return!0;let C=c(b,y,x,_);return C&&l.setProperty(w,y,x,S,_)?(h(b,y,b[y],_),!0):!C},defineProperty(b,y,x){if(!l.isSameDescriptor(x,b,y)){let S=b[y];c(b,y,x.value,S)&&l.defineProperty(b,y,x,S)&&h(b,y,x.value,S)}return!0},deleteProperty(b,y){if(!Reflect.has(b,y))return!0;let x=Reflect.get(b,y),S=c(b,y,void 0,x);return S&&l.deleteProperty(b,y,x)?(h(b,y,void 0,x),!0):!S},apply(b,y,x){let S=y[n]||y;if(l.isUnsubscribed)return Reflect.apply(b,S,x);if((s===!1||s!==!0&&!s.includes(b.name))&&vv.isHandledType(S)){let w=Al.initial(l.getPath(b)),_=vv.isHandledMethod(S,b.name);d.start(S,w,x);let C=Reflect.apply(b,d.preferredThisArg(b,y,S),_?x.map(M=>m(M)):x),E=d.isChanged(S,i),A=d.stop();if(vv.isHandledType(C)&&_&&(y instanceof Map&&b.name==="get"&&(w=Al.concat(w,x[0])),C=l.getProxy(C,w,g)),E){let M={name:b.name,args:x,result:C},I=d.isCloning?Al.initial(w):w,O=d.isCloning?Al.last(w):"";c(Al.get(e,I),O,S,A,M)?f(I,O,S,A,M):d.undo(S)}return(y instanceof Map||y instanceof Set)&&Olt(C)?Ilt(C,b,y,w,p):C}return Reflect.apply(b,y,x)}},v=l.getProxy(e,r.pathAsArray?[]:"",g);return t=t.bind(v),u&&(r.onValidate=r.onValidate.bind(v)),v};Z4.target=e=>e&&e[Y4]||e;Z4.unsubscribe=e=>e[Zae]||e;var i7=Z4,$lt=typeof global=="object"&&global&&global.Object===Object&&global,ose=$lt,Vlt=typeof self=="object"&&self&&self.Object===Object&&self,Hlt=ose||Vlt||Function("return this")(),Vu=Hlt,Glt=Vu.Symbol,Yl=Glt,ase=Object.prototype,Wlt=ase.hasOwnProperty,qlt=ase.toString,ax=Yl?Yl.toStringTag:void 0;function Klt(e){var t=Wlt.call(e,ax),r=e[ax];try{e[ax]=void 0;var n=!0}catch{}var i=qlt.call(e);return n&&(t?e[ax]=r:delete e[ax]),i}var Xlt=Klt,Ylt=Object.prototype,Qlt=Ylt.toString;function Zlt(e){return Qlt.call(e)}var Jlt=Zlt,eut="[object Null]",tut="[object Undefined]",o7=Yl?Yl.toStringTag:void 0;function rut(e){return e==null?e===void 0?tut:eut:o7&&o7 in Object(e)?Xlt(e):Jlt(e)}var fg=rut;function nut(e){return e!=null&&typeof e=="object"}var fh=nut,iut="[object Symbol]";function out(e){return typeof e=="symbol"||fh(e)&&fg(e)==iut}var dO=out;function aut(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var sse=aut,sut=Array.isArray,ed=sut,lut=1/0,a7=Yl?Yl.prototype:void 0,s7=a7?a7.toString:void 0;function lse(e){if(typeof e=="string")return e;if(ed(e))return sse(e,lse)+"";if(dO(e))return s7?s7.call(e):"";var t=e+"";return t=="0"&&1/e==-lut?"-0":t}var uut=lse,cut=/\s/;function dut(e){for(var t=e.length;t--&&cut.test(e.charAt(t)););return t}var hut=dut,fut=/^\s+/;function put(e){return e&&e.slice(0,hut(e)+1).replace(fut,"")}var mut=put;function gut(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Fu=gut,l7=0/0,vut=/^[-+]0x[0-9a-f]+$/i,yut=/^0b[01]+$/i,but=/^0o[0-7]+$/i,xut=parseInt;function wut(e){if(typeof e=="number")return e;if(dO(e))return l7;if(Fu(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Fu(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=mut(e);var r=yut.test(e);return r||but.test(e)?xut(e.slice(2),r?2:8):vut.test(e)?l7:+e}var u7=wut;function Sut(e){return e}var _ut=Sut,Cut="[object AsyncFunction]",Aut="[object Function]",Eut="[object GeneratorFunction]",Mut="[object Proxy]";function Put(e){if(!Fu(e))return!1;var t=fg(e);return t==Aut||t==Eut||t==Cut||t==Mut}var use=Put,Tut=Vu["__core-js_shared__"],rR=Tut,c7=function(){var e=/[^.]+$/.exec(rR&&rR.keys&&rR.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Out(e){return!!c7&&c7 in e}var Iut=Out,Dut=Function.prototype,Rut=Dut.toString;function kut(e){if(e!=null){try{return Rut.call(e)}catch{}try{return e+""}catch{}}return""}var pg=kut,Lut=/[\\^$.*+?()[\]{}|]/g,Nut=/^\[object .+?Constructor\]$/,zut=Function.prototype,But=Object.prototype,Fut=zut.toString,jut=But.hasOwnProperty,Uut=RegExp("^"+Fut.call(jut).replace(Lut,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function $ut(e){if(!Fu(e)||Iut(e))return!1;var t=use(e)?Uut:Nut;return t.test(pg(e))}var Vut=$ut;function Hut(e,t){return e==null?void 0:e[t]}var Gut=Hut;function Wut(e,t){var r=Gut(e,t);return Vut(r)?r:void 0}var mg=Wut,qut=mg(Vu,"WeakMap"),zN=qut,d7=Object.create,Kut=function(){function e(){}return function(t){if(!Fu(t))return{};if(d7)return d7(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),Xut=Kut;function Yut(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var Qut=Yut;function Zut(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var Jut=Zut,ect=800,tct=16,rct=Date.now;function nct(e){var t=0,r=0;return function(){var n=rct(),i=tct-(n-r);if(r=n,i>0){if(++t>=ect)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var ict=nct;function oct(e){return function(){return e}}var act=oct,sct=function(){try{var e=mg(Object,"defineProperty");return e({},"",{}),e}catch{}}(),hP=sct,lct=hP?function(e,t){return hP(e,"toString",{configurable:!0,enumerable:!1,value:act(t),writable:!0})}:_ut,uct=lct,cct=ict(uct),dct=cct;function hct(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var fct=hct,pct=9007199254740991,mct=/^(?:0|[1-9]\d*)$/;function gct(e,t){var r=typeof e;return t=t??pct,!!t&&(r=="number"||r!="symbol"&&mct.test(e))&&e>-1&&e%1==0&&e<t}var J4=gct;function vct(e,t,r){t=="__proto__"&&hP?hP(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var cse=vct;function yct(e,t){return e===t||e!==e&&t!==t}var eU=yct,bct=Object.prototype,xct=bct.hasOwnProperty;function wct(e,t,r){var n=e[t];(!(xct.call(e,t)&&eU(n,r))||r===void 0&&!(t in e))&&cse(e,t,r)}var tU=wct;function Sct(e,t,r,n){var i=!r;r||(r={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=n?n(r[s],e[s],s,r,e):void 0;l===void 0&&(l=e[s]),i?cse(r,s,l):tU(r,s,l)}return r}var s_=Sct,h7=Math.max;function _ct(e,t,r){return t=h7(t===void 0?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=h7(n.length-t,0),a=Array(o);++i<o;)a[i]=n[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=n[i];return s[t]=r(a),Qut(e,this,s)}}var Cct=_ct,Act=9007199254740991;function Ect(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Act}var rU=Ect;function Mct(e){return e!=null&&rU(e.length)&&!use(e)}var dse=Mct,Pct=Object.prototype;function Tct(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Pct;return e===r}var nU=Tct;function Oct(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var Ict=Oct,Dct="[object Arguments]";function Rct(e){return fh(e)&&fg(e)==Dct}var f7=Rct,hse=Object.prototype,kct=hse.hasOwnProperty,Lct=hse.propertyIsEnumerable,Nct=f7(function(){return arguments}())?f7:function(e){return fh(e)&&kct.call(e,"callee")&&!Lct.call(e,"callee")},iU=Nct;function zct(){return!1}var Bct=zct,fse=typeof Qs=="object"&&Qs&&!Qs.nodeType&&Qs,p7=fse&&typeof Zs=="object"&&Zs&&!Zs.nodeType&&Zs,Fct=p7&&p7.exports===fse,m7=Fct?Vu.Buffer:void 0,jct=m7?m7.isBuffer:void 0,Uct=jct||Bct,fP=Uct,$ct="[object Arguments]",Vct="[object Array]",Hct="[object Boolean]",Gct="[object Date]",Wct="[object Error]",qct="[object Function]",Kct="[object Map]",Xct="[object Number]",Yct="[object Object]",Qct="[object RegExp]",Zct="[object Set]",Jct="[object String]",edt="[object WeakMap]",tdt="[object ArrayBuffer]",rdt="[object DataView]",ndt="[object Float32Array]",idt="[object Float64Array]",odt="[object Int8Array]",adt="[object Int16Array]",sdt="[object Int32Array]",ldt="[object Uint8Array]",udt="[object Uint8ClampedArray]",cdt="[object Uint16Array]",ddt="[object Uint32Array]",$n={};$n[ndt]=$n[idt]=$n[odt]=$n[adt]=$n[sdt]=$n[ldt]=$n[udt]=$n[cdt]=$n[ddt]=!0;$n[$ct]=$n[Vct]=$n[tdt]=$n[Hct]=$n[rdt]=$n[Gct]=$n[Wct]=$n[qct]=$n[Kct]=$n[Xct]=$n[Yct]=$n[Qct]=$n[Zct]=$n[Jct]=$n[edt]=!1;function hdt(e){return fh(e)&&rU(e.length)&&!!$n[fg(e)]}var fdt=hdt;function pdt(e){return function(t){return e(t)}}var oU=pdt,pse=typeof Qs=="object"&&Qs&&!Qs.nodeType&&Qs,C1=pse&&typeof Zs=="object"&&Zs&&!Zs.nodeType&&Zs,mdt=C1&&C1.exports===pse,nR=mdt&&ose.process,gdt=function(){try{var e=C1&&C1.require&&C1.require("util").types;return e||nR&&nR.binding&&nR.binding("util")}catch{}}(),w0=gdt,g7=w0&&w0.isTypedArray,vdt=g7?oU(g7):fdt,mse=vdt,ydt=Object.prototype,bdt=ydt.hasOwnProperty;function xdt(e,t){var r=ed(e),n=!r&&iU(e),i=!r&&!n&&fP(e),o=!r&&!n&&!i&&mse(e),a=r||n||i||o,s=a?Ict(e.length,String):[],l=s.length;for(var u in e)(t||bdt.call(e,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||J4(u,l)))&&s.push(u);return s}var gse=xdt;function wdt(e,t){return function(r){return e(t(r))}}var vse=wdt,Sdt=vse(Object.keys,Object),_dt=Sdt,Cdt=Object.prototype,Adt=Cdt.hasOwnProperty;function Edt(e){if(!nU(e))return _dt(e);var t=[];for(var r in Object(e))Adt.call(e,r)&&r!="constructor"&&t.push(r);return t}var Mdt=Edt;function Pdt(e){return dse(e)?gse(e):Mdt(e)}var aU=Pdt;function Tdt(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var Odt=Tdt,Idt=Object.prototype,Ddt=Idt.hasOwnProperty;function Rdt(e){if(!Fu(e))return Odt(e);var t=nU(e),r=[];for(var n in e)n=="constructor"&&(t||!Ddt.call(e,n))||r.push(n);return r}var kdt=Rdt;function Ldt(e){return dse(e)?gse(e,!0):kdt(e)}var sU=Ldt,Ndt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,zdt=/^\w*$/;function Bdt(e,t){if(ed(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||dO(e)?!0:zdt.test(e)||!Ndt.test(e)||t!=null&&e in Object(t)}var Fdt=Bdt,jdt=mg(Object,"create"),Jw=jdt;function Udt(){this.__data__=Jw?Jw(null):{},this.size=0}var $dt=Udt;function Vdt(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Hdt=Vdt,Gdt="__lodash_hash_undefined__",Wdt=Object.prototype,qdt=Wdt.hasOwnProperty;function Kdt(e){var t=this.__data__;if(Jw){var r=t[e];return r===Gdt?void 0:r}return qdt.call(t,e)?t[e]:void 0}var Xdt=Kdt,Ydt=Object.prototype,Qdt=Ydt.hasOwnProperty;function Zdt(e){var t=this.__data__;return Jw?t[e]!==void 0:Qdt.call(t,e)}var Jdt=Zdt,eht="__lodash_hash_undefined__";function tht(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Jw&&t===void 0?eht:t,this}var rht=tht;function hb(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}hb.prototype.clear=$dt;hb.prototype.delete=Hdt;hb.prototype.get=Xdt;hb.prototype.has=Jdt;hb.prototype.set=rht;var v7=hb;function nht(){this.__data__=[],this.size=0}var iht=nht;function oht(e,t){for(var r=e.length;r--;)if(eU(e[r][0],t))return r;return-1}var hO=oht,aht=Array.prototype,sht=aht.splice;function lht(e){var t=this.__data__,r=hO(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():sht.call(t,r,1),--this.size,!0}var uht=lht;function cht(e){var t=this.__data__,r=hO(t,e);return r<0?void 0:t[r][1]}var dht=cht;function hht(e){return hO(this.__data__,e)>-1}var fht=hht;function pht(e,t){var r=this.__data__,n=hO(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var mht=pht;function fb(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}fb.prototype.clear=iht;fb.prototype.delete=uht;fb.prototype.get=dht;fb.prototype.has=fht;fb.prototype.set=mht;var fO=fb,ght=mg(Vu,"Map"),eS=ght;function vht(){this.size=0,this.__data__={hash:new v7,map:new(eS||fO),string:new v7}}var yht=vht;function bht(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var xht=bht;function wht(e,t){var r=e.__data__;return xht(t)?r[typeof t=="string"?"string":"hash"]:r.map}var pO=wht;function Sht(e){var t=pO(this,e).delete(e);return this.size-=t?1:0,t}var _ht=Sht;function Cht(e){return pO(this,e).get(e)}var Aht=Cht;function Eht(e){return pO(this,e).has(e)}var Mht=Eht;function Pht(e,t){var r=pO(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var Tht=Pht;function pb(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}pb.prototype.clear=yht;pb.prototype.delete=_ht;pb.prototype.get=Aht;pb.prototype.has=Mht;pb.prototype.set=Tht;var mO=pb,Oht="Expected a function";function lU(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Oht);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=e.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(lU.Cache||mO),r}lU.Cache=mO;var Iht=lU,Dht=500;function Rht(e){var t=Iht(e,function(n){return r.size===Dht&&r.clear(),n}),r=t.cache;return t}var kht=Rht,Lht=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Nht=/\\(\\)?/g,zht=kht(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Lht,function(r,n,i,o){t.push(i?o.replace(Nht,"$1"):n||r)}),t}),Bht=zht;function Fht(e){return e==null?"":uut(e)}var jht=Fht;function Uht(e,t){return ed(e)?e:Fdt(e,t)?[e]:Bht(jht(e))}var mb=Uht,$ht=1/0;function Vht(e){if(typeof e=="string"||dO(e))return e;var t=e+"";return t=="0"&&1/e==-$ht?"-0":t}var gO=Vht;function Hht(e,t){t=mb(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[gO(t[r++])];return r&&r==n?e:void 0}var yse=Hht;function Ght(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var uU=Ght,y7=Yl?Yl.isConcatSpreadable:void 0;function Wht(e){return ed(e)||iU(e)||!!(y7&&e&&e[y7])}var qht=Wht;function bse(e,t,r,n,i){var o=-1,a=e.length;for(r||(r=qht),i||(i=[]);++o<a;){var s=e[o];t>0&&r(s)?t>1?bse(s,t-1,r,n,i):uU(i,s):n||(i[i.length]=s)}return i}var Kht=bse;function Xht(e){var t=e==null?0:e.length;return t?Kht(e,1):[]}var Yht=Xht;function Qht(e){return dct(Cct(e,void 0,Yht),e+"")}var xse=Qht,Zht=vse(Object.getPrototypeOf,Object),cU=Zht,Jht="[object Object]",eft=Function.prototype,tft=Object.prototype,wse=eft.toString,rft=tft.hasOwnProperty,nft=wse.call(Object);function ift(e){if(!fh(e)||fg(e)!=Jht)return!1;var t=cU(e);if(t===null)return!0;var r=rft.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&wse.call(r)==nft}var oft=ift;function aft(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),r=r>i?i:r,r<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(i);++n<i;)o[n]=e[n+t];return o}var sft=aft;function lft(){this.__data__=new fO,this.size=0}var uft=lft;function cft(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var dft=cft;function hft(e){return this.__data__.get(e)}var fft=hft;function pft(e){return this.__data__.has(e)}var mft=pft,gft=200;function vft(e,t){var r=this.__data__;if(r instanceof fO){var n=r.__data__;if(!eS||n.length<gft-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new mO(n)}return r.set(e,t),this.size=r.size,this}var yft=vft;function gb(e){var t=this.__data__=new fO(e);this.size=t.size}gb.prototype.clear=uft;gb.prototype.delete=dft;gb.prototype.get=fft;gb.prototype.has=mft;gb.prototype.set=yft;var YA=gb;function bft(e,t){return e&&s_(t,aU(t),e)}var xft=bft;function wft(e,t){return e&&s_(t,sU(t),e)}var Sft=wft,Sse=typeof Qs=="object"&&Qs&&!Qs.nodeType&&Qs,b7=Sse&&typeof Zs=="object"&&Zs&&!Zs.nodeType&&Zs,_ft=b7&&b7.exports===Sse,x7=_ft?Vu.Buffer:void 0,w7=x7?x7.allocUnsafe:void 0;function Cft(e,t){if(t)return e.slice();var r=e.length,n=w7?w7(r):new e.constructor(r);return e.copy(n),n}var Aft=Cft;function Eft(e,t){for(var r=-1,n=e==null?0:e.length,i=0,o=[];++r<n;){var a=e[r];t(a,r,e)&&(o[i++]=a)}return o}var Mft=Eft;function Pft(){return[]}var _se=Pft,Tft=Object.prototype,Oft=Tft.propertyIsEnumerable,S7=Object.getOwnPropertySymbols,Ift=S7?function(e){return e==null?[]:(e=Object(e),Mft(S7(e),function(t){return Oft.call(e,t)}))}:_se,dU=Ift;function Dft(e,t){return s_(e,dU(e),t)}var Rft=Dft,kft=Object.getOwnPropertySymbols,Lft=kft?function(e){for(var t=[];e;)uU(t,dU(e)),e=cU(e);return t}:_se,Cse=Lft;function Nft(e,t){return s_(e,Cse(e),t)}var zft=Nft;function Bft(e,t,r){var n=t(e);return ed(e)?n:uU(n,r(e))}var Ase=Bft;function Fft(e){return Ase(e,aU,dU)}var BN=Fft;function jft(e){return Ase(e,sU,Cse)}var Ese=jft,Uft=mg(Vu,"DataView"),FN=Uft,$ft=mg(Vu,"Promise"),jN=$ft,Vft=mg(Vu,"Set"),UN=Vft,_7="[object Map]",Hft="[object Object]",C7="[object Promise]",A7="[object Set]",E7="[object WeakMap]",M7="[object DataView]",Gft=pg(FN),Wft=pg(eS),qft=pg(jN),Kft=pg(UN),Xft=pg(zN),$p=fg;(FN&&$p(new FN(new ArrayBuffer(1)))!=M7||eS&&$p(new eS)!=_7||jN&&$p(jN.resolve())!=C7||UN&&$p(new UN)!=A7||zN&&$p(new zN)!=E7)&&($p=function(e){var t=fg(e),r=t==Hft?e.constructor:void 0,n=r?pg(r):"";if(n)switch(n){case Gft:return M7;case Wft:return _7;case qft:return C7;case Kft:return A7;case Xft:return E7}return t});var tS=$p,Yft=Object.prototype,Qft=Yft.hasOwnProperty;function Zft(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&Qft.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var Jft=Zft,ept=Vu.Uint8Array,pP=ept;function tpt(e){var t=new e.constructor(e.byteLength);return new pP(t).set(new pP(e)),t}var hU=tpt;function rpt(e,t){var r=t?hU(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var npt=rpt,ipt=/\w*$/;function opt(e){var t=new e.constructor(e.source,ipt.exec(e));return t.lastIndex=e.lastIndex,t}var apt=opt,P7=Yl?Yl.prototype:void 0,T7=P7?P7.valueOf:void 0;function spt(e){return T7?Object(T7.call(e)):{}}var lpt=spt;function upt(e,t){var r=t?hU(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var cpt=upt,dpt="[object Boolean]",hpt="[object Date]",fpt="[object Map]",ppt="[object Number]",mpt="[object RegExp]",gpt="[object Set]",vpt="[object String]",ypt="[object Symbol]",bpt="[object ArrayBuffer]",xpt="[object DataView]",wpt="[object Float32Array]",Spt="[object Float64Array]",_pt="[object Int8Array]",Cpt="[object Int16Array]",Apt="[object Int32Array]",Ept="[object Uint8Array]",Mpt="[object Uint8ClampedArray]",Ppt="[object Uint16Array]",Tpt="[object Uint32Array]";function Opt(e,t,r){var n=e.constructor;switch(t){case bpt:return hU(e);case dpt:case hpt:return new n(+e);case xpt:return npt(e,r);case wpt:case Spt:case _pt:case Cpt:case Apt:case Ept:case Mpt:case Ppt:case Tpt:return cpt(e,r);case fpt:return new n;case ppt:case vpt:return new n(e);case mpt:return apt(e);case gpt:return new n;case ypt:return lpt(e)}}var Ipt=Opt;function Dpt(e){return typeof e.constructor=="function"&&!nU(e)?Xut(cU(e)):{}}var Rpt=Dpt,kpt="[object Map]";function Lpt(e){return fh(e)&&tS(e)==kpt}var Npt=Lpt,O7=w0&&w0.isMap,zpt=O7?oU(O7):Npt,Bpt=zpt,Fpt="[object Set]";function jpt(e){return fh(e)&&tS(e)==Fpt}var Upt=jpt,I7=w0&&w0.isSet,$pt=I7?oU(I7):Upt,Vpt=$pt,Hpt=1,Gpt=2,Wpt=4,Mse="[object Arguments]",qpt="[object Array]",Kpt="[object Boolean]",Xpt="[object Date]",Ypt="[object Error]",Pse="[object Function]",Qpt="[object GeneratorFunction]",Zpt="[object Map]",Jpt="[object Number]",Tse="[object Object]",emt="[object RegExp]",tmt="[object Set]",rmt="[object String]",nmt="[object Symbol]",imt="[object WeakMap]",omt="[object ArrayBuffer]",amt="[object DataView]",smt="[object Float32Array]",lmt="[object Float64Array]",umt="[object Int8Array]",cmt="[object Int16Array]",dmt="[object Int32Array]",hmt="[object Uint8Array]",fmt="[object Uint8ClampedArray]",pmt="[object Uint16Array]",mmt="[object Uint32Array]",Rn={};Rn[Mse]=Rn[qpt]=Rn[omt]=Rn[amt]=Rn[Kpt]=Rn[Xpt]=Rn[smt]=Rn[lmt]=Rn[umt]=Rn[cmt]=Rn[dmt]=Rn[Zpt]=Rn[Jpt]=Rn[Tse]=Rn[emt]=Rn[tmt]=Rn[rmt]=Rn[nmt]=Rn[hmt]=Rn[fmt]=Rn[pmt]=Rn[mmt]=!0;Rn[Ypt]=Rn[Pse]=Rn[imt]=!1;function QA(e,t,r,n,i,o){var a,s=t&Hpt,l=t&Gpt,u=t&Wpt;if(r&&(a=i?r(e,n,i,o):r(e)),a!==void 0)return a;if(!Fu(e))return e;var d=ed(e);if(d){if(a=Jft(e),!s)return Jut(e,a)}else{var c=tS(e),h=c==Pse||c==Qpt;if(fP(e))return Aft(e,s);if(c==Tse||c==Mse||h&&!i){if(a=l||h?{}:Rpt(e),!s)return l?zft(e,Sft(a,e)):Rft(e,xft(a,e))}else{if(!Rn[c])return i?e:{};a=Ipt(e,c,s)}}o||(o=new YA);var f=o.get(e);if(f)return f;o.set(e,a),Vpt(e)?e.forEach(function(g){a.add(QA(g,t,r,g,e,o))}):Bpt(e)&&e.forEach(function(g,v){a.set(v,QA(g,t,r,v,e,o))});var m=u?l?Ese:BN:l?sU:aU,p=d?void 0:m(e);return fct(p||e,function(g,v){p&&(v=g,g=e[v]),tU(a,v,QA(g,t,r,v,e,o))}),a}var Ose=QA,gmt=1,vmt=4;function ymt(e){return Ose(e,gmt|vmt)}var vO=ymt,bmt="__lodash_hash_undefined__";function xmt(e){return this.__data__.set(e,bmt),this}var wmt=xmt;function Smt(e){return this.__data__.has(e)}var _mt=Smt;function mP(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new mO;++t<r;)this.add(e[t])}mP.prototype.add=mP.prototype.push=wmt;mP.prototype.has=_mt;var Cmt=mP;function Amt(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var Emt=Amt;function Mmt(e,t){return e.has(t)}var Pmt=Mmt,Tmt=1,Omt=2;function Imt(e,t,r,n,i,o){var a=r&Tmt,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var u=o.get(e),d=o.get(t);if(u&&d)return u==t&&d==e;var c=-1,h=!0,f=r&Omt?new Cmt:void 0;for(o.set(e,t),o.set(t,e);++c<s;){var m=e[c],p=t[c];if(n)var g=a?n(p,m,c,t,e,o):n(m,p,c,e,t,o);if(g!==void 0){if(g)continue;h=!1;break}if(f){if(!Emt(t,function(v,b){if(!Pmt(f,b)&&(m===v||i(m,v,r,n,o)))return f.push(b)})){h=!1;break}}else if(!(m===p||i(m,p,r,n,o))){h=!1;break}}return o.delete(e),o.delete(t),h}var Ise=Imt;function Dmt(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}var Rmt=Dmt;function kmt(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var Lmt=kmt,Nmt=1,zmt=2,Bmt="[object Boolean]",Fmt="[object Date]",jmt="[object Error]",Umt="[object Map]",$mt="[object Number]",Vmt="[object RegExp]",Hmt="[object Set]",Gmt="[object String]",Wmt="[object Symbol]",qmt="[object ArrayBuffer]",Kmt="[object DataView]",D7=Yl?Yl.prototype:void 0,iR=D7?D7.valueOf:void 0;function Xmt(e,t,r,n,i,o,a){switch(r){case Kmt:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case qmt:return!(e.byteLength!=t.byteLength||!o(new pP(e),new pP(t)));case Bmt:case Fmt:case $mt:return eU(+e,+t);case jmt:return e.name==t.name&&e.message==t.message;case Vmt:case Gmt:return e==t+"";case Umt:var s=Rmt;case Hmt:var l=n&Nmt;if(s||(s=Lmt),e.size!=t.size&&!l)return!1;var u=a.get(e);if(u)return u==t;n|=zmt,a.set(e,t);var d=Ise(s(e),s(t),n,i,o,a);return a.delete(e),d;case Wmt:if(iR)return iR.call(e)==iR.call(t)}return!1}var Ymt=Xmt,Qmt=1,Zmt=Object.prototype,Jmt=Zmt.hasOwnProperty;function egt(e,t,r,n,i,o){var a=r&Qmt,s=BN(e),l=s.length,u=BN(t),d=u.length;if(l!=d&&!a)return!1;for(var c=l;c--;){var h=s[c];if(!(a?h in t:Jmt.call(t,h)))return!1}var f=o.get(e),m=o.get(t);if(f&&m)return f==t&&m==e;var p=!0;o.set(e,t),o.set(t,e);for(var g=a;++c<l;){h=s[c];var v=e[h],b=t[h];if(n)var y=a?n(b,v,h,t,e,o):n(v,b,h,e,t,o);if(!(y===void 0?v===b||i(v,b,r,n,o):y)){p=!1;break}g||(g=h=="constructor")}if(p&&!g){var x=e.constructor,S=t.constructor;x!=S&&"constructor"in e&&"constructor"in t&&!(typeof x=="function"&&x instanceof x&&typeof S=="function"&&S instanceof S)&&(p=!1)}return o.delete(e),o.delete(t),p}var tgt=egt,rgt=1,R7="[object Arguments]",k7="[object Array]",LC="[object Object]",ngt=Object.prototype,L7=ngt.hasOwnProperty;function igt(e,t,r,n,i,o){var a=ed(e),s=ed(t),l=a?k7:tS(e),u=s?k7:tS(t);l=l==R7?LC:l,u=u==R7?LC:u;var d=l==LC,c=u==LC,h=l==u;if(h&&fP(e)){if(!fP(t))return!1;a=!0,d=!1}if(h&&!d)return o||(o=new YA),a||mse(e)?Ise(e,t,r,n,i,o):Ymt(e,t,l,r,n,i,o);if(!(r&rgt)){var f=d&&L7.call(e,"__wrapped__"),m=c&&L7.call(t,"__wrapped__");if(f||m){var p=f?e.value():e,g=m?t.value():t;return o||(o=new YA),i(p,g,r,n,o)}}return h?(o||(o=new YA),tgt(e,t,r,n,i,o)):!1}var ogt=igt;function Dse(e,t,r,n,i){return e===t?!0:e==null||t==null||!fh(e)&&!fh(t)?e!==e&&t!==t:ogt(e,t,r,n,Dse,i)}var agt=Dse;function sgt(e,t){return e!=null&&t in Object(e)}var lgt=sgt;function ugt(e,t,r){t=mb(t,e);for(var n=-1,i=t.length,o=!1;++n<i;){var a=gO(t[n]);if(!(o=e!=null&&r(e,a)))break;e=e[a]}return o||++n!=i?o:(i=e==null?0:e.length,!!i&&rU(i)&&J4(a,i)&&(ed(e)||iU(e)))}var cgt=ugt;function dgt(e,t){return e!=null&&cgt(e,t,lgt)}var hgt=dgt,fgt=function(){return Vu.Date.now()},oR=fgt,pgt="Expected a function",mgt=Math.max,ggt=Math.min;function vgt(e,t,r){var n,i,o,a,s,l,u=0,d=!1,c=!1,h=!0;if(typeof e!="function")throw new TypeError(pgt);t=u7(t)||0,Fu(r)&&(d=!!r.leading,c="maxWait"in r,o=c?mgt(u7(r.maxWait)||0,t):o,h="trailing"in r?!!r.trailing:h);function f(w){var _=n,C=i;return n=i=void 0,u=w,a=e.apply(C,_),a}function m(w){return u=w,s=setTimeout(v,t),d?f(w):a}function p(w){var _=w-l,C=w-u,E=t-_;return c?ggt(E,o-C):E}function g(w){var _=w-l,C=w-u;return l===void 0||_>=t||_<0||c&&C>=o}function v(){var w=oR();if(g(w))return b(w);s=setTimeout(v,p(w))}function b(w){return s=void 0,h&&n?f(w):(n=i=void 0,a)}function y(){s!==void 0&&clearTimeout(s),u=0,n=l=i=s=void 0}function x(){return s===void 0?a:b(oR())}function S(){var w=oR(),_=g(w);if(n=arguments,i=this,l=w,_){if(s===void 0)return m(l);if(c)return clearTimeout(s),s=setTimeout(v,t),f(l)}return s===void 0&&(s=setTimeout(v,t)),a}return S.cancel=y,S.flush=x,S}var fU=vgt;function ygt(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var bgt=ygt;function xgt(e,t){return t.length<2?e:yse(e,sft(t,0,-1))}var wgt=xgt;function Sgt(e,t){return agt(e,t)}var Rse=Sgt;function _gt(e,t){return t=mb(t,e),e=wgt(e,t),e==null||delete e[gO(bgt(t))]}var Cgt=_gt;function Agt(e){return oft(e)?void 0:e}var Egt=Agt,Mgt=1,Pgt=2,Tgt=4,Ogt=xse(function(e,t){var r={};if(e==null)return r;var n=!1;t=sse(t,function(o){return o=mb(o,e),n||(n=o.length>1),o}),s_(e,Ese(e),r),n&&(r=Ose(r,Mgt|Pgt|Tgt,Egt));for(var i=t.length;i--;)Cgt(r,t[i]);return r}),$N=Ogt;function Igt(e,t,r,n){if(!Fu(e))return e;t=mb(t,e);for(var i=-1,o=t.length,a=o-1,s=e;s!=null&&++i<o;){var l=gO(t[i]),u=r;if(l==="__proto__"||l==="constructor"||l==="prototype")return e;if(i!=a){var d=s[l];u=n?n(d,l,s):void 0,u===void 0&&(u=Fu(d)?d:J4(t[i+1])?[]:{})}tU(s,l,u),s=s[l]}return e}var Dgt=Igt;function Rgt(e,t,r){for(var n=-1,i=t.length,o={};++n<i;){var a=t[n],s=yse(e,a);r(s,a)&&Dgt(o,mb(a,e),s)}return o}var kgt=Rgt;function Lgt(e,t){return kgt(e,t,function(r,n){return hgt(e,n)})}var Ngt=Lgt,zgt=xse(function(e,t){return e==null?{}:Ngt(e,t)}),Zd=zgt,Bgt="Expected a function";function Fgt(e,t,r){var n=!0,i=!0;if(typeof e!="function")throw new TypeError(Bgt);return Fu(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),fU(e,t,{leading:n,maxWait:t,trailing:i})}var jgt=Fgt;function Ugt(e){for(let t of Object.keys(e))e[t]===void 0&&delete e[t];return e}function ph(e,t){return Object.setPrototypeOf(e,t),e}var $gt=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().includes(" electron/"),Vgt=()=>typeof window>"u"?!1:window.navigator.platform.toUpperCase().includes("MAC"),Hgt=()=>typeof window>"u"?!1:/iPad|iPhone|iPod/.test(window.navigator.userAgent)||yO&&"ontouchend"in document,Ggt=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1,Wgt=()=>typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0,qgt=()=>{if(typeof window>"u")return!1;let e=navigator.userAgent,t=navigator.vendor;return/Safari/i.test(e)&&/Apple Computer/.test(t)},Kgt=()=>{if(typeof window>"u")return null;let e=navigator.userAgent.match(/Version\/(\d+\.\d)/);return e&&e[1]},Xgt=()=>{if(typeof window>"u")return;let e=new URLSearchParams(window.location.search).get("desktop-app-version");return e?(window.localStorage.setItem("desktop-app-version",e),e):window.localStorage.getItem("desktop-app-version")??"0.0.6"},Ygt=$gt();Ygt&&Xgt();var yO=Vgt(),kse=Hgt(),Qgt=Ggt(),Xs=Wgt(),N7=qgt(),z7=Number(Kgt());function Lse(e){return Array.isArray(e)?e:[e]}function Zgt(e,t){let r=0;for(;r<e.length&&r<t.length;){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1;r+=1}return r!==t.length?-1:r!==e.length?1:0}function NC(e){return yO?e.metaKey:e.ctrlKey}var Gt=[],gP={},$x={},ZA={};function Nse(e){Gt.includes(e)||Gt.push(e)}function fy(e){delete gP[e.pointerId];for(let t=0;t<Gt.length;t++)if(Gt[t].pointerId===e.pointerId){Gt.splice(t,1);break}}function Jgt(){Gt.splice(0,Gt.length)}function vP(e){if(e.pointerType!=="touch")return;let t=gP[e.pointerId];t===void 0&&(t={x:0,y:0},gP[e.pointerId]=t),t.x=e.pageX,t.y=e.pageY}function aR(e){let t=e.pointerId===Gt[0].pointerId?Gt[1]:Gt[0];return gP[t.pointerId]}function zse(e){$x[e.key]=!0,ZA[e.key]=ZA[e.key]===void 0?1:ZA[e.key]+1}function Bse(e){if(yO&&$x.Meta)for(let t in $x)$x[t]=!1;else $x[e.key]=!1;ZA={}}function evt(e){e.addEventListener("pointerdown",Nse,!0),e.addEventListener("pointerdown",vP,!0),e.addEventListener("pointermove",vP,!0),e.addEventListener("pointerup",fy,!0),e.addEventListener("pointercancel",fy,!0),e.addEventListener("pointerleave",fy,!0),window.addEventListener("keydown",zse,!0),window.addEventListener("keyup",Bse,!0)}function tvt(e){e.removeEventListener("pointerdown",Nse,!0),e.removeEventListener("pointerdown",vP,!0),e.removeEventListener("pointermove",vP,!0),e.removeEventListener("pointerup",fy,!0),e.removeEventListener("pointercancel",fy,!0),e.removeEventListener("pointerleave",fy,!0),window.removeEventListener("keydown",zse,!0),window.removeEventListener("keyup",Bse,!0)}var Fse,rvt=new Promise(e=>{Fse=e}),zC;function nvt(){if(zC)return zC;async function e(){let t="https://unpkg.com/@splinetool/navmesh-wasm@0.9.504/build",r=ZS(()=>import("./navmesh-0b92f809.js"),[]),[n,i]=await Promise.all([r,fetch(`${t}/navmesh.wasm`).then(s=>s.arrayBuffer())]),o=n.default,a=await o({wasmBinary:i});Fse(a)}return zC=e(),zC}var jse,ivt=new Promise(e=>{jse=e}),BC;function ovt(){if(BC)return BC;async function e(){let t=await ZS(()=>import("./physics-dee4de67.js"),[]);await t.init(),jse(t)}return BC=e(),BC}var vr=class{modifyById(e,t){let r=this;if(r[e]===void 0)throw new Error("not expected");{let n={...r,[e]:t};return Object.setPrototypeOf(n,vr.prototype),n}}add(e,t){var r;return((r=this.runOp({type:1,id:e,data:t}))==null?void 0:r.data)??this}runOp(e){let t=this;if(e.type===1){let r=t[e.id],n;r===void 0?n={type:2,id:e.id}:n={type:1,id:e.id,data:r};let{id:i,data:o}=e,a={...t,[i]:o};return Object.setPrototypeOf(a,vr.prototype),{data:a,actual:e,reverse:n}}else if(e.type===2){let{id:r}=e,n=t[r];if(n===void 0)return null;{let i={...t};return Object.setPrototypeOf(i,vr.prototype),delete i[r],{data:i,actual:e,reverse:{type:1,id:r,data:n}}}}return null}};function pU(e){if(e.deepFreeze!==void 0){e.deepFreeze(e);return}let t=Object.getOwnPropertyNames(e);for(let r of t){let n=e[r];n&&typeof n=="object"&&pU(n)}return Object.freeze(e)}function avt(e,t){let r=0;for(;r<e.length&&r<t.length;){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1;r+=1}return r!==t.length?-1:r!==e.length?1:0}var Use=class extends Error{};function sR(e){let t={...e};return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}function vf(e,t,r){if(e===void 0?t===void 0?(e=0,t=10):e=t-10:t===void 0&&(t=e+10),e>t){let o=e;e=t,t=o}let n=[],i=1/(r+1);for(let o=0;o<r;o++){let a=e+(t-e)*(o+.75+Math.random()*.5)*i;n.push(a)}return n}function mU(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array}function svt(){return typeof process<"u"}function $se(e,t){for(let r of e)t(r.id,r.data)!==!0&&$se(r.children,t)}function Vse(e,t){if(t(e.id,e.data)!==!0)for(let r of e.children)Vse(r,t)}var Cs=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Cs.prototype)}deepFreeze(){let e=0;for(;e<this.length;)pU(this[e]),e++}fillCaches0(e,t){this.objCaches.set(e.id,e),this.parentCaches.set(e.id,t);for(let r of e.children)this.fillCaches0(r,e.id)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,this.parentCaches=new Map;for(let e of this)this.fillCaches0(e,null)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(e.length!==0)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}nonExistOrDescendantOf(e,t){if(!this.has(e))return!0;for(;e;){let r=this.parent(e);if(r===t)return!0;e=r}return!1}rootAcestor(e){for(;e;){let t=this.parent(e);if(t)e=t;else return e}return e}isDescendantOf(e,t){for(;e;){let r=this.parent(e);if(r===t)return!0;e=r}return!1}data(e){var t;return(t=this.get(e))==null?void 0:t.data}has(e){return this.childrenOf(e)!==void 0}get(e){return this.fillCaches(),this.objCaches.get(e)}childrenOf(e){var t;return e===null?this:(t=this.get(e))==null?void 0:t.children}traverseFrom(e,t){if(e===null)this.traverse(t);else{let r=this.get(e);r&&Vse(r,t)}}traverse(e){$se(this,e)}totalSize(){return this.fillCaches(),this.objCaches.size}parent(e){return this.fillCaches(),this.parentCaches.get(e)}childrenArray(e){return e===null?this:this.get(e).children}modifyById(e,t){if(this.get(e)===void 0)throw new Error("not expected");{let r=this.parent(e),n=this.childrenArray(r),i=n.findIndex(a=>a.id===e);if(i<0)throw new Error("not expected");let o=n[i];return n=[...n],n[i]={...o,data:t},this.modifyArrayBy(r,n)}}modifyArrayBy(e,t){let r=e,n=t;for(;r!==null;){let o=n,a=r;if(r=this.parent(r),r===void 0)throw new Error;n=this.childrenArray(r);let s=n.findIndex(l=>l.id===a);if(s<0)throw new Error;n=[...n],n[s]={...n[s],children:o}}Object.setPrototypeOf(n,Cs.prototype);let i=n;return i.fillCaches(),i}runOp(e){switch(e.type){case 7:return this.addOp(e);case 8:return this.deleteOp(e);case 9:return this.moveOp(e)}return null}checkDuplicatedIdRec({id:e,children:t}){if(this.get(e)!==void 0)return!0;for(let r of t)if(this.checkDuplicatedIdRec(r))return!0;return!1}addOp(e){let{parent:t,fi:r,id:n,data:i,children:o}=e;if(t!==null&&this.get(t)===void 0||this.checkDuplicatedIdRec(e))return null;{let a=t,s=this.childrenArray(a),l={fi:r,id:n,data:i,children:o};return s=[...s,l],s.sort((u,d)=>u.fi-d.fi),e.localIndex=s.indexOf(l),{data:this.modifyArrayBy(a,s),actual:e,reverse:{type:8,id:n}}}}deleteOp(e){let{id:t}=e;if(this.get(t)===null)return null;{let r=this.parent(t);if(r===void 0)return null;let n=this.childrenArray(r),i=n.findIndex(a=>a.id===t);e.localIndex=i,n=[...n];let o=n.splice(i,1)[0];return{data:this.modifyArrayBy(r,n),actual:e,reverse:{type:7,...o,parent:r}}}}moveOp(e){let{parent:t,fi:r,id:n}=e;if(t!==null&&this.get(t)===void 0)return this.deleteOp({type:8,id:n});if(t!==null){let c=t;for(;c!==null;){if(c===void 0)throw new Error;if(c===n)throw new Use("cyclic tree");c=this.parent(c)}}let i=this.parent(n);if(i===void 0)return null;let o=i,a=this.childrenArray(i),s=a.findIndex(c=>c.id===n);a=[...a];let l=a.splice(s,1)[0],u=this.modifyArrayBy(i,a);i=t,a=u.childrenArray(i);let d=l.fi;return l={...l,fi:r},a=[...a,l],a.sort((c,h)=>c.fi-h.fi),e.localIndex=a.indexOf(l),u=u.modifyArrayBy(i,a),{data:u,actual:e,reverse:{type:9,parent:o,fi:d,id:n}}}previous(e,t){if(t===null){let n=this.childrenArray(e);return n.length===0?null:n[n.length-1].id}let r=null;for(let n of this.childrenArray(e)){if(n.id===t)return r;r=n.id}return null}traverseSortNext(e){let t=this.parent(e);if(t!==void 0){let r=this.childrenArray(t),n=r.findIndex(i=>i.id===e)+1;if(n<r.length)return r[n].id;if(t)return this.traverseSortNext(t)}}sortNext(e){let t=this.childrenArray(e);return t.length>0?t[0].id:this.traverseSortNext(e)}traverseSortPrevious(e){let t=this.childrenArray(e);return t.length>0?this.traverseSortPrevious(t[t.length-1].id):e}sortPrevious(e){let t=this.parent(e);if(t!==void 0){let r=this.childrenArray(t),n=r.findIndex(i=>i.id===e)-1;return n>=0?this.traverseSortPrevious(r[n].id):t}}getAllSorted(e){let t=[];for(let r of e){let n=this.getWithSortKey(r.id);n!==void 0&&t.push({...r,...n})}t.sort((r,n)=>avt(r.sortKey,n.sortKey));for(let r of t)delete r.sortKey;return t}getWithSortKey(e){var t=e;let r=[],n=this.get(t),i=n;if(n!==void 0){for(;t;)r.splice(0,0,n.fi),t=this.parent(t),t!==null&&(n=this.get(t));return{...i,sortKey:r}}}insertBeforeHelper(e,t,r){return this.insertAfterHelper(e,this.previous(e,t),r)}insertAfterHelper(e,t,r){let n=this.childrenArray(e);if(t===null){if(n.length===0)return vf(0,r,r);{let i=n[0].fi;return vf(i-r,i,r)}}else{let i=this.get(t);if(i===void 0||this.parent(t)!==e)throw new Error("illegal args");let o=n.find(a=>a.fi>i.fi);if(o===void 0){let a=n[n.length-1].fi;return vf(a,a+r,r)}else return vf(i.fi,o.fi,r)}}},yP;(e=>{function t(r,n){if(n.type!==0)return null;if(Array.isArray(r)){let i=n.props,o={},a=[...r],s=!1;if(i)for(let l of Object.keys(i)){let u=parseInt(l);if(isNaN(u))throw new Error("wrong index");o[l]=a[u],a[u]=i[l],s=!0}return s?{data:a,actual:n,reverse:{type:0,props:o}}:null}else{let i=n.props,o={},a={...r},s=!1;if(i)for(let l of Object.keys(i)){o[l]=a[l];let u=i[l];u===void 0?delete a[l]:a[l]=u,s=!0}return s?{data:a,actual:n,reverse:{type:0,props:o}}:null}}e.runOp=t})(yP||(yP={}));var $t=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,$t.prototype)}deepFreeze(){let e=0;for(;e<this.length;)pU(this[e]),e++}fillCaches0(e){this.objCaches.set(e.id,e)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,Object.getOwnPropertyDescriptor(this,"objCaches").enumerable=!1;for(let e of this)this.fillCaches0(e)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(e.length!==0)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}data(e){var t;return(t=this.get(e))==null?void 0:t.data}get(e){return this.fillCaches(),this.objCaches.get(e)}modifyById(e,t){if(this.get(e)===void 0)throw new Error("not expected");{let r=this,n=r.findIndex(o=>o.id===e);if(n<0)throw new Error("not expected");let i=r[n];return r=[...r],r[n]={...i,data:t},this.modifyArrayBy(r)}}modifyArrayBy(e){Object.setPrototypeOf(e,$t.prototype);let t=e;return svt()||t.fillCaches(),t}runOp(e){switch(e.type){case 4:return this.addOp(e);case 5:return this.deleteOp(e);case 6:return this.moveOp(e)}return null}addOp(e){let{fi:t,id:r,data:n}=e,i=this,o={fi:t,id:r,data:n};return i=[...i,o],i.sort((a,s)=>a.fi-s.fi),e.localIndex=i.indexOf(o),{data:this.modifyArrayBy(i),actual:e,reverse:{type:5,id:r}}}deleteOp(e){let{id:t}=e,r=this,n=r.findIndex(o=>o.id===t);if(n===-1)return null;e.localIndex=n,r=[...r];let i=r.splice(n,1)[0];return{data:this.modifyArrayBy(r),actual:e,reverse:{type:4,...i}}}moveOp(e){let{fi:t,id:r}=e,n=this;n=[...n];let i=n.findIndex(s=>s.id===r);if(i===-1)return null;let o=n[i].fi,a={...n[i],fi:t};return n[i]=a,n.sort((s,l)=>s.fi-l.fi),e.localIndex=n.indexOf(a),{data:this.modifyArrayBy(n),actual:e,reverse:{type:6,fi:o,id:r}}}previous(e){if(e===null)return this.length===0?null:this[this.length-1].id;let t=null;for(let r of this){if(r.id===e)return t;t=r.id}return null}insertBeforeHelper(e,t){return this.insertAfterHelper(this.previous(e),t)}insertAfterHelper(e,t){let r=this;if(e===null){if(r.length===0)return vf(0,t,t);{let n=r[0].fi;return vf(n-t,n,t)}}else{let n=this.get(e);if(n===void 0)throw new Error("illegal args");let i=r.find(o=>o.fi>n.fi);if(i===void 0){let o=r[r.length-1].fi;return vf(o,o+t,t)}else return vf(n.fi,i.fi,t)}}};function S0(e){return e&&typeof e=="object"&&e instanceof ho}var ho=class{unusedFunOverridesTable(e){}runOp(e){let t=[],r=this,n=0,i={};for(;n<e.path.length;){if(t.push(r),r=r===void 0?void 0:r[e.path[n]],r!==void 0&&!S0(r))return null;n+=1}r=r?sR(r):new ho;for(let[s,l]of Object.entries(e.props)){let u=r[s];i[s]=u,l===void 0?delete r[s]:r[s]=l}for(;n>0;){if(Object.keys(r).length===0){let s=t[n-1];s&&(r=sR(s),delete r[e.path[n-1]])}else{let s=t[n-1];if(s){let l=sR(s);l[e.path[n-1]]=r,r=l}else{let l=new ho;l[e.path[n-1]]=r,r=l}}n-=1}let o=Object.setPrototypeOf(r,ho.prototype),a={...e,props:i};return{data:o,actual:e,reverse:a}}},$f;(e=>{function t(i,o){return rS(i,o)??i}e.apply=t;function r(i,o){return vU(i,o)}e.merge=r;function n(i,o){let a=0,s=o.path,l=i;for(;a<s.length&&l!==void 0;){if(l=Ra.zoomOnce(l,s[a]),l===void 0)return o;if(!S0(l))return;a+=1}if(l===void 0)return o;if(S0(l))if(o.type===0){let u={...o.props};for(let d of Object.keys(l))delete u[d];return{...o,props:u}}else if(o.type===1||o.type===4||o.type===7){let u=gU([o],l);return u?(console.log(u),u):o}else return o}e.filterOp=n})($f||($f={}));function gU(e,t){if(t===void 0)return;let r=!1,n=e.map(i=>{let o=i.id,a=rS(i.data,t[o]);if(r=r||a!==void 0,a===void 0&&(a=i.data),i.children){let s=gU(i.children,t);return s!==void 0?r=!0:s=i.children,{...i,id:o,data:a,children:s}}else return{...i,id:o,data:a}});if(r)return n}function lvt(e,t){if(t===void 0)return;let r=!1,n=e.map(i=>{let o=i.id,a=rS(i.data,t[o]);return r=r||a!==void 0,a===void 0&&(a=i.data),{...i,id:o,data:a}});if(r)return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n}function rS(e,t){if(!S0(t))return t;if(e instanceof Cs){let r=gU(e,t);return r!==void 0&&Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r}else{if(e instanceof $t)return lvt(e,t);if(Array.isArray(e)){let r=!1,n=e.map((i,o)=>{let a=rS(i,t[o]);return r=r||a!==void 0,a===void 0&&(a=i),a});return r?(Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n):void 0}else{if(e instanceof ho)return vU(e,t);if(e&&typeof e=="object"){let r={},n=!1;for(let[i,o]of Object.entries(e)){let a=rS(o,t[i]);n=n||a!==void 0,a===void 0&&(a=o),r[i]=a}return n?(Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r):void 0}}}}function vU(e,t){if(e===void 0)return t;if(t===void 0)return e;if(!S0(t))return t;if(!S0(e))return $f.apply(e,t);let r=new Set;for(let i of Object.keys(e))r.add(i);for(let i of Object.keys(t))r.add(i);let n=new ho;for(let i of r){let o=vU(e===void 0?void 0:e[i],t===void 0?void 0:t[i]);n[i]=o}return n}function uvt(e,t){let r={cur:[],result:[],len:0};return e=nS(e,t,r)??e,[e,r.result]}function bP(e,t){return e===null?null:(e.cur[e.len]=t,e.len+=1,e)}function xP(e){e&&(e.len-=1)}function cvt(e){if(e===null)return null;e.result.push(e.cur.slice(0,e.len))}function Hse(e,t,r){let n=!1,i=e.map(o=>{let a=o.id,s=t[a];if(s!==void 0&&typeof s=="string"&&(n=!0,a=s,r!==null))throw new Error("not supported");let l=nS(o.data,t,bP(r,a));xP(r),n=n||l!==void 0,l===void 0&&(l=o.data);let u=Hse(o.children,t,r);return u!==void 0?n=!0:u=o.children,{...o,id:a,data:l,children:u}});if(n)return i}function dvt(e,t,r){let n=!1,i=e.map(o=>{let a=o.id,s=t[a];if(s!==void 0&&typeof s=="string"&&(n=!0,a=s,r!==null))throw new Error("not supported");let l=nS(o.data,t,bP(r,a));return xP(r),n=n||l!==void 0,l===void 0&&(l=o.data),{...o,id:a,data:l}});if(n)return Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i}function nS(e,t,r){if(e instanceof Cs){let n=Hse(e,t,r);return n!==void 0&&Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n}else{if(e instanceof $t)return dvt(e,t,r);if(Array.isArray(e)){let n=!1,i=e.map((o,a)=>{let s=nS(o,t,bP(r,a));return xP(r),n=n||s!==void 0,s===void 0&&(s=o),s});return n?(Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i):void 0}else if(e&&typeof e=="object"&&!mU(e)){let n={},i=!1;for(let[o,a]of Object.entries(e))if(o!=="name"){let s=t[o];if(typeof s=="string"){if(r!==null)throw new Error("not supported");i=!0,o=s}let l=nS(a,t,bP(r,o));xP(r),i=i||l!==void 0,l===void 0&&(l=a),n[o]=l}else n[o]=a;return i?(Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n):void 0}else if(typeof e=="string"){let n=t[e];return n!==void 0&&cvt(r),n}else return}}var VN;(e=>{function t(r,n){let i=Ra.zoom(n,r.path);if(typeof i=="object"){let o={};for(let a of Object.keys(r.props))o[a]=i[a];return{...r,props:o}}else return{...r,props:{}}}e.replaceProps=t})(VN||(VN={}));var sa;(e=>{function t(l,u){return{...l,path:l.path.slice(u)}}e.drop=t;function r(l,u){var d;return((d=n(l,u))==null?void 0:d.data)??l}e.applySimple=r;function n(l,u){var h,f;let d=u.path;for(var c=[];;){let m;if(l instanceof ho&&u.type===0&&(m=l.runOp({...u,path:d.slice(c.length)}),m===null&&(m=void 0)),m===void 0&&c.length===d.length&&(l instanceof Cs||l instanceof $t||l instanceof vr?m=l.runOp(u):m=yP.runOp(l,u)),m!==void 0)if(m!==null){let v=m.data;for(let b=c.length-1;b>=0;b--){let y=d[b],x=c[b];if(x instanceof Cs){if(typeof y=="number")throw new Error("illegal arg");v=x.modifyById(y,v)}else if(x instanceof $t){if(typeof y=="number")throw new Error("illegal arg");v=x.modifyById(y,v)}else if(x instanceof vr){if(typeof y=="number")throw new Error("illegal arg");v=x.modifyById(y,v)}else if(x instanceof ho){let S={...x,[y]:v};v=Object.setPrototypeOf(S,ho.prototype)}else if(typeof x=="object")if(Array.isArray(x)){if(typeof y=="string"&&(y=parseInt(y),isNaN(y)))throw new Error("Invalid path");let S=v;v=[...x],v[y]=S}else v={...x,[y]:v};else return null}return{data:v,actual:{...m.actual,path:d},reverse:{...m.reverse,path:d}}}else return null;let p=d[c.length],g;if(l instanceof Cs){if(typeof p=="number")throw new Error("");g=(h=l.get(p))==null?void 0:h.data}else if(l instanceof $t){if(typeof p=="number")throw new Error("");g=(f=l.get(p))==null?void 0:f.data}else l!==null&&(g=l[p]);if(g!==void 0)c.push(l),l=g;else return null}}e.apply=n;function i(l,u){for(let d=0;d<l.length&&d<u.length;d++)if(l[d]!==u[d])return!0;return!1}e.pathDisjoint=i;function o(l,u){if(l.length!==u.length)return!1;for(let d=0;d<l.length;d++)if(l[d]!==u[d])return!1;return!0}e.pathEq=o;function a(l,u){return i(l.path,u.path)}e.commutative=a;function s(l,u){return l.type===0&&u.type===0&&o(l.path,u.path)?Object.keys(l.props).every(d=>u.props[d]!==void 0):!1}e.subsumed=s})(sa||(sa={}));var HN;(e=>{function t(){return[]}e.empty=t;function r(u,d){let c=[];for(let h of u){let[f,...m]=h.path;f===d&&c.push({...h,path:m})}return c}e.removePrefix=r;function n(u,d){return u.map(c=>({...c,path:[d,...c.path]}))}e.addPrefix=n;function i(u,d){return[...u,...d]}e.concat=i;function o(u,d){return[...u.filter(c=>!d.some(h=>sa.subsumed(c,h))),...d]}e.compress=o;function a(u,d){return u.every(c=>d.every(h=>sa.commutative(c,h)))}e.commutative=a;function s(u,d){for(let c of d){let h=l(u,c);h!==null&&(u=h.data)}return u}e.applyAll=s;function l(u,d){var c=u;let h=[],f=[];for(let m of d)try{if(m.type===3||m.type===5&&m.path[m.path.length-1]==="variables"){let p,g,v;if(m.type===3?(p=Ra.zoom(c,[...m.path,m.id]),v=sa.apply(c,{...m,type:2})):(p=Ra.zoom(c,[...m.path,m.id,"value"]),v=sa.apply(c,m)),v!==null){c=v.data;let[b,y]=uvt(c,{[m.id]:p});c=b;for(let x=0;x<y.length;x++){let S=y[x],w=S.pop();if(typeof w=="number"){let _=[w];for(let E=x+1;E<y.length;E++){let A=y[E],M=A[A.length-1];if(typeof M=="number"&&Ra.equal(S,A.slice(0,A.length-1)))_.push(M),y.splice(E,1);else break}let C=Ra.zoom(c,S);g=C.map((E,A)=>_.includes(A)?m.id:E),p=C,w=S.pop()}else{if(w==="alphaOverride"||w==="alpha"){p/=100;let _=p,C=Ra.zoom(c,S.slice(0,S.length-2)),E=C.layers.map(A=>A.id===S[S.length-1]?{...A,data:{...A.data,[w]:_}}:A);Object.setPrototypeOf(E,Object.getPrototypeOf(C.layers)),C.layers=E}g=m.id}h.push({type:0,path:S,props:{[w]:p}}),f.push({type:0,path:S,props:{[w]:g}})}f.push(v.reverse),h.push(v.actual)}}else{let p=sa.apply(c,m);p!==null&&(h.push(p.actual),c=p.data,f.push(p.reverse))}}catch(p){if(p instanceof Use)return null;throw p}return{data:c,actual:h,reverse:f.reverse()}}e.apply=l})(HN||(HN={}));var Gse=Symbol(),hvt=Symbol(),bO=Symbol(),l_=class{reportOp(e,t,r=[]){let n=this;if(t===null)return;n._current=t.data;let i=r;for(;!(n instanceof qse);){let o=n._path,a=n._current;if(o!==""&&i.splice(0,0,o),n=n._parent,n===null)return;n.update(o,a)}n.push(i,e,t.actual,t.reverse)}deleteChildren(e){if(this._children){let t=this._children[e];if(t){let r=t[bO];r&&r(),delete this._children[e]}}}},fvt=class extends l_{constructor(e,t,r){super(),this._parent=e,this._path=t,this._current=r}update(e,t){if(Array.isArray(this._current)){if(typeof e=="string"&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid path");this._current=[...this._current],this._current[e]=t}else this._current={...this._current,[e]:t}}runOp(e){this.reportOp(e,yP.runOp(this._current,e),e.path)}},pvt=class extends l_{constructor(e,t,r){super(),this._parent=e,this._path=t,this._current=r}update(e,t){this._current={...this._current,[e]:t},Object.setPrototypeOf(this._current,vr.prototype)}runOp(e){this.reportOp(e,this._current.runOp(e))}},Wse={get(e,t){if(t===bO)return()=>{e._parent=null};if(t===Gse)return e._current;if(t===hvt)return e;let{_current:r,_children:n}=e;if(t==="push"&&Array.isArray(r))throw new Error("not supported to expand array");let i=n===void 0?void 0:n[t];if(i!==void 0)return i;let o=r[t],a=xO(e,t,o);return a!==o?(n===void 0&&(n={},e._children=n),n[t]=a,a):o},has(e,t){return t in e._current},ownKeys(e){return Reflect.ownKeys(e._current)},defineProperty(){throw Error("not supported")},getPrototypeOf(e){return Object.getPrototypeOf(e._current)},setPrototypeOf(){throw Error("not supported")},getOwnPropertyDescriptor(e,t){let r=e._current,n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:!0,enumerable:n.enumerable,value:r[t]}}},mvt={...Wse,set(e,t,r){let n={type:0,props:{[t]:Yi(r)??r}};return e.deleteChildren(t),e.runOp(n),!0},deleteProperty(e,t){let r={type:0,props:{[t]:void 0}};return e.deleteChildren(t),e.runOp(r),!0}},gvt={...Wse,set(e,t,r){return r===void 0?this.deleteProperty(e,t):(e.deleteChildren(t),e.runOp({type:1,id:t,data:r})),!0},deleteProperty(e,t){return e.runOp({type:2,id:t}),!0}},yU=class extends l_{constructor(e,t,r){super(),this._children={},this._parent=e,this._path=t,this._current=r,this[bO]=()=>{this._parent=null}}unproxy(){return this._current}update(e,t){this._current=this._current.modifyById(e,t)}runOp(e){this.reportOp(e,this._current.runOp(e))}randomId(){return this._current.randomId()}isDescendantOf(e,t){return this._current.isDescendantOf(e,t)}childrenOf(e){return this._current.childrenOf(e)}traverse(e){return this._current.traverse(e)}get(e){return this._current.get(e)}parent(e){return this._current.parent(e)}traverse(e){this._current.traverse((t,r)=>{e(t,this.data(t))})}data(e){var a;let{_current:t,_children:r}=this,n=r===void 0?void 0:r[e];if(n!==void 0)return n;let i=(a=t.get(e))==null?void 0:a.data,o=xO(this,e,i);return o!==i?(r===void 0&&(r={},this._children=r),r[e]=o,o):i}add(e,t,r,n,i){this.runOp({type:7,parent:e,fi:t,id:r,data:n,children:i})}move(e,t,r){this.runOp({type:9,parent:e,fi:t,id:r})}insertAfter(e,t,r){let n=this._current.insertAfterHelper(e,t,r.length);for(let i=0;i<r.length;i++){let o=r[i];this.add(e,n[i],o.id,o.data,o.children)}}insertBefore(e,t,r){let n=this._current.insertBeforeHelper(e,t,r.length);for(let i=0;i<r.length;i++){let o=r[i];this.add(e,n[i],o.id,o.data,o.children)}}moveAfter(e,t,r){let n=this._current.insertAfterHelper(e,t,r.length);for(let i=0;i<r.length;i++){let o=r[i];this.move(e,n[i],o)}}moveBefore(e,t,r){let n=this._current.insertBeforeHelper(e,t,r.length);for(let i=0;i<r.length;i++){let o=r[i];this.move(e,n[i],o)}}delete(e){this.deleteChildren(e),this.runOp({type:8,id:e})}sortNext(e){return this._current.sortNext(e)}sortPrevious(e){return this._current.sortPrevious(e)}getAllSorted(e){return this._current.getAllSorted(e)}},bU=class extends l_{constructor(e,t,r){super(),this._children={},this._parent=e,this._path=t,this._current=r,this[bO]=()=>{this._parent=null}}unproxy(){return this._current}get length(){return this._current.length}forEach(e){let t=this.length;for(let r=0;r<t;r++){let n=this._current[r].id,i=this._current[r].fi;e(this.data(this._current[r].id),n,i)}}find(e){let t=this.length;for(let r=0;r<t;r++){let n=this._current[r].id;if(e(this.data(n),n))return this.get(n)}}update(e,t){this._current=this._current.modifyById(e,t)}randomId(){return this._current.randomId()}get(e){return{...this._current.get(e),data:this.data(e)}}data(e){var a;let{_current:t,_children:r}=this,n=r===void 0?void 0:r[e];if(n!==void 0)return n;let i=(a=t.get(e))==null?void 0:a.data,o=xO(this,e,i);return o!==i?(r===void 0&&(r={},this._children=r),r[e]=o,o):i}runOp(e){this.reportOp(e,this._current.runOp(e))}add(e,t,r){this.runOp({type:4,fi:e,id:t,data:r})}move(e,t){this.runOp({type:6,fi:e,id:t})}insertAfter(e,t){let r=this._current.insertAfterHelper(e,t.length);for(let n=0;n<t.length;n++){let i=t[n];this.add(r[n],i.id,i.data)}}insertBefore(e,t){let r=this._current.insertBeforeHelper(e,t.length);for(let n=0;n<t.length;n++){let i=t[n];this.add(r[n],i.id,i.data)}}moveAfter(e,t){let r=this._current.insertAfterHelper(e,t.length);for(let n=0;n<t.length;n++){let i=t[n];this.move(r[n],i)}}moveBefore(e,t){let r=this._current.insertBeforeHelper(e,t.length);for(let n=0;n<t.length;n++){let i=t[n];this.move(r[n],i)}}delete(e){this.deleteChildren(e),this.runOp({type:5,id:e})}};function lR(e,t,r){if(e.length>0){let n=e[e.length-1];if(n.type===0&&t.type===0&&Ra.equal(n.path,r)){Object.assign(n.props,t.props);return}}e.push({...t,path:r})}var qse=class extends l_{constructor(e){super(),this.ts=[],this.actual=[],this.reverse=[],this._current=e}update(e,t){if(e!=="")throw new Error("");this._current=t}push(e,t,r,n){lR(this.ts,t,e),lR(this.actual,r,e),lR(this.reverse,n,e)}result(){return{data:this._current,ts:this.ts,actual:this.actual,reverse:this.reverse.reverse()}}};function xO(e,t,r){return r instanceof Cs?new yU(e,t,r):r instanceof $t?new bU(e,t,r):r instanceof vr?new Proxy(new pvt(e,t,r),gvt):r!==null&&typeof r=="object"?mU(r)?r:new Proxy(new fvt(e,t,r),mvt):r}function Kse(e){let t=new qse(e);return[xO(t,"",e),t]}function iS(e,t){let[r,n]=Kse(e);return t(r),n.result()}function Yi(e){return e instanceof yU||e instanceof bU?e._current:e!==null&&typeof e=="object"?e[Gse]:e}var Ra;(e=>{function t(o,a){if(a.length===o.length)for(var s=0;s<o.length;){if(o[s]!==a[s])return!1;s+=1}else return!1;return!0}e.equal=t;function r(o,a,s){let l=i(s,o);if(l!==void 0&&typeof l=="object"&&l!==null){let u={...a};return Object.keys(l).forEach(d=>{delete u[d]}),u}else return a}e.removeOverridden=r;function n(o,a){if((o instanceof Cs||o instanceof yU)&&typeof a=="string"||(o instanceof $t||o instanceof bU)&&typeof a=="string")return o.data(a);if(typeof a=="number"&&Array.isArray(o)||typeof a=="string"&&typeof o=="object"&&o!==null)return o[a]}e.zoomOnce=n;function i(o,a,s=0){for(;s<a.length&&o!==void 0;)o=n(o,a[s]),s+=1;return o}e.zoom=i})(Ra||(Ra={}));function vvt(e,t){let r=[];if(t.length===e.length)for(var n=0;n<e.length;){if(t[n]==="*")r.push(e[n]);else if(e[n]!==t[n])return null;n+=1}else return null;return r}function kl(e,t){let r=[];if(t.length<=e.length)for(var n=0;n<t.length;){if(t[n]==="*")r.push(e[n]);else if(e[n]!==t[n])return null;n+=1}else return null;return r}var Xse=class{},B7=class extends Xse{constructor(e){super(),this.id=e}},F7=class extends Xse{constructor(e){super(),this.data=e}},GN;try{GN=new TextDecoder}catch{}var yt,Vf,xe=0,ls={},qr,yf,El=0,Ec=0,Vs,Jd,qa=[],rn,j7={useRecords:!1,mapsAsObjects:!0},Yse=class{},Qse=new Yse;Qse.name="MessagePack 0xC1";var _0=!1,wP=class{constructor(e){e&&(e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0)),Object.assign(this,e)}unpack(e,t){if(yt)return nle(()=>(qN(),this?this.unpack(e,t):wP.prototype.unpack.call(j7,e,t)));Vf=t>-1?t:e.length,xe=0,Ec=0,yf=null,Vs=null,yt=e;try{rn=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(r){throw yt=null,e instanceof Uint8Array?r:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof wP){if(ls=this,this.structures)return qr=this.structures,FC();(!qr||qr.length>0)&&(qr=[])}else ls=j7,(!qr||qr.length>0)&&(qr=[]);return FC()}unpackMultiple(e,t){let r,n=0;try{_0=!0;let i=e.length,o=this?this.unpack(e,i):SO.unpack(e,i);if(t){for(t(o);xe<i;)if(n=xe,t(FC())===!1)return}else{for(r=[o];xe<i;)n=xe,r.push(FC());return r}}catch(i){throw i.lastPosition=n,i.values=r,i}finally{_0=!1,qN()}}_mergeStructures(e,t){e=e||[];for(let r=0,n=e.length;r<n;r++){let i=e[r];i&&(i.isShared=!0,r>=32&&(i.highByte=r-32>>5))}e.sharedLength=e.length;for(let r in t||[])if(r>=0){let n=e[r],i=t[r];i&&(n&&((e.restoreStructures||(e.restoreStructures=[]))[r]=n),e[r]=i)}return this.structures=e}decode(e,t){return this.unpack(e,t)}};function FC(){try{if(!ls.trusted&&!_0){let t=qr.sharedLength||0;t<qr.length&&(qr.length=t)}let e=yi();if(xe==Vf)qr.restoreStructures&&U7(),qr=null,yt=null,Jd&&(Jd=null);else if(xe>Vf){let t=new Error("Unexpected end of MessagePack data");throw t.incomplete=!0,t}else if(!_0)throw new Error("Data read, but end of buffer not reached");return e}catch(e){throw qr.restoreStructures&&U7(),qN(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer"))&&(e.incomplete=!0),e}}function U7(){for(let e in qr.restoreStructures)qr[e]=qr.restoreStructures[e];qr.restoreStructures=null}function yi(){let e=yt[xe++];if(e<160)if(e<128){if(e<64)return e;{let t=qr[e&63]||ls.getStructures&&Zse()[e&63];return t?(t.read||(t.read=xU(t,e&63)),t.read()):e}}else if(e<144)if(e-=128,ls.mapsAsObjects){let t={};for(let r=0;r<e;r++)t[ele()]=yi();return t}else{let t=new Map;for(let r=0;r<e;r++)t.set(yi(),yi());return t}else{e-=144;let t=new Array(e);for(let r=0;r<e;r++)t[r]=yi();return t}else if(e<192){let t=e-160;if(Ec>=xe)return yf.slice(xe-El,(xe+=t)-El);if(Ec==0&&Vf<140){let r=t<16?wU(t):Jse(t);if(r!=null)return r}return WN(t)}else{let t;switch(e){case 192:return null;case 193:return Vs?(t=yi(),t>0?Vs[1].slice(Vs.position1,Vs.position1+=t):Vs[0].slice(Vs.position0,Vs.position0-=t)):Qse;case 194:return!1;case 195:return!0;case 196:return uR(yt[xe++]);case 197:return t=rn.getUint16(xe),xe+=2,uR(t);case 198:return t=rn.getUint32(xe),xe+=4,uR(t);case 199:return Mp(yt[xe++]);case 200:return t=rn.getUint16(xe),xe+=2,Mp(t);case 201:return t=rn.getUint32(xe),xe+=4,Mp(t);case 202:if(t=rn.getFloat32(xe),ls.useFloat32>2){let r=SU[(yt[xe]&127)<<1|yt[xe+1]>>7];return xe+=4,(r*t+(t>0?.5:-.5)>>0)/r}return xe+=4,t;case 203:return t=rn.getFloat64(xe),xe+=8,t;case 204:return yt[xe++];case 205:return t=rn.getUint16(xe),xe+=2,t;case 206:return t=rn.getUint32(xe),xe+=4,t;case 207:return ls.int64AsNumber?(t=rn.getUint32(xe)*4294967296,t+=rn.getUint32(xe+4)):t=rn.getBigUint64(xe),xe+=8,t;case 208:return rn.getInt8(xe++);case 209:return t=rn.getInt16(xe),xe+=2,t;case 210:return t=rn.getInt32(xe),xe+=4,t;case 211:return ls.int64AsNumber?(t=rn.getInt32(xe)*4294967296,t+=rn.getUint32(xe+4)):t=rn.getBigInt64(xe),xe+=8,t;case 212:if(t=yt[xe++],t==114)return W7(yt[xe++]&63);{let r=qa[t];if(r)return r.read?(xe++,r.read(yi())):r.noBuffer?(xe++,r()):r(yt.subarray(xe,++xe));throw new Error("Unknown extension "+t)}case 213:return t=yt[xe],t==114?(xe++,W7(yt[xe++]&63,yt[xe++])):Mp(2);case 214:return Mp(4);case 215:return Mp(8);case 216:return Mp(16);case 217:return t=yt[xe++],Ec>=xe?yf.slice(xe-El,(xe+=t)-El):bvt(t);case 218:return t=rn.getUint16(xe),xe+=2,Ec>=xe?yf.slice(xe-El,(xe+=t)-El):xvt(t);case 219:return t=rn.getUint32(xe),xe+=4,Ec>=xe?yf.slice(xe-El,(xe+=t)-El):wvt(t);case 220:return t=rn.getUint16(xe),xe+=2,V7(t);case 221:return t=rn.getUint32(xe),xe+=4,V7(t);case 222:return t=rn.getUint16(xe),xe+=2,H7(t);case 223:return t=rn.getUint32(xe),xe+=4,H7(t);default:if(e>=224)return e-256;if(e===void 0){let r=new Error("Unexpected end of MessagePack data");throw r.incomplete=!0,r}throw new Error("Unknown MessagePack token "+e)}}}var yvt=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function xU(e,t){function r(){if(r.count++>2){let i=e.read=new Function("r","return function(){return {"+e.map(o=>yvt.test(o)?o+":r()":"["+JSON.stringify(o)+"]:r()").join(",")+"}}")(yi);return e.highByte===0&&(e.read=$7(t,e.read)),i()}let n={};for(let i=0,o=e.length;i<o;i++){let a=e[i];n[a]=yi()}return n}return r.count=0,e.highByte===0?$7(t,r):r}var $7=(e,t)=>function(){let r=yt[xe++];if(r===0)return t();let n=e<32?-(e+(r<<5)):e+(r<<5),i=qr[n]||Zse()[n];if(!i)throw new Error("Record id is not defined for "+n);return i.read||(i.read=xU(i,e)),i.read()};function Zse(){let e=nle(()=>(yt=null,ls.getStructures()));return qr=ls._mergeStructures(e,qr)}var WN=wO,bvt=wO,xvt=wO,wvt=wO;function wO(e){let t;if(e<16&&(t=wU(e)))return t;if(e>64&&GN)return GN.decode(yt.subarray(xe,xe+=e));let r=xe+e,n=[];for(t="";xe<r;){let i=yt[xe++];if(!(i&128))n.push(i);else if((i&224)===192){let o=yt[xe++]&63;n.push((i&31)<<6|o)}else if((i&240)===224){let o=yt[xe++]&63,a=yt[xe++]&63;n.push((i&31)<<12|o<<6|a)}else if((i&248)===240){let o=yt[xe++]&63,a=yt[xe++]&63,s=yt[xe++]&63,l=(i&7)<<18|o<<12|a<<6|s;l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|l&1023),n.push(l)}else n.push(i);n.length>=4096&&(t+=bo.apply(String,n),n.length=0)}return n.length>0&&(t+=bo.apply(String,n)),t}function V7(e){let t=new Array(e);for(let r=0;r<e;r++)t[r]=yi();return t}function H7(e){if(ls.mapsAsObjects){let t={};for(let r=0;r<e;r++)t[ele()]=yi();return t}else{let t=new Map;for(let r=0;r<e;r++)t.set(yi(),yi());return t}}var bo=String.fromCharCode;function Jse(e){let t=xe,r=new Array(e);for(let n=0;n<e;n++){let i=yt[xe++];if((i&128)>0){xe=t;return}r[n]=i}return bo.apply(String,r)}function wU(e){if(e<4)if(e<2){if(e===0)return"";{let t=yt[xe++];if((t&128)>1){xe-=1;return}return bo(t)}}else{let t=yt[xe++],r=yt[xe++];if((t&128)>0||(r&128)>0){xe-=2;return}if(e<3)return bo(t,r);let n=yt[xe++];if((n&128)>0){xe-=3;return}return bo(t,r,n)}else{let t=yt[xe++],r=yt[xe++],n=yt[xe++],i=yt[xe++];if((t&128)>0||(r&128)>0||(n&128)>0||(i&128)>0){xe-=4;return}if(e<6){if(e===4)return bo(t,r,n,i);{let o=yt[xe++];if((o&128)>0){xe-=5;return}return bo(t,r,n,i,o)}}else if(e<8){let o=yt[xe++],a=yt[xe++];if((o&128)>0||(a&128)>0){xe-=6;return}if(e<7)return bo(t,r,n,i,o,a);let s=yt[xe++];if((s&128)>0){xe-=7;return}return bo(t,r,n,i,o,a,s)}else{let o=yt[xe++],a=yt[xe++],s=yt[xe++],l=yt[xe++];if((o&128)>0||(a&128)>0||(s&128)>0||(l&128)>0){xe-=8;return}if(e<10){if(e===8)return bo(t,r,n,i,o,a,s,l);{let u=yt[xe++];if((u&128)>0){xe-=9;return}return bo(t,r,n,i,o,a,s,l,u)}}else if(e<12){let u=yt[xe++],d=yt[xe++];if((u&128)>0||(d&128)>0){xe-=10;return}if(e<11)return bo(t,r,n,i,o,a,s,l,u,d);let c=yt[xe++];if((c&128)>0){xe-=11;return}return bo(t,r,n,i,o,a,s,l,u,d,c)}else{let u=yt[xe++],d=yt[xe++],c=yt[xe++],h=yt[xe++];if((u&128)>0||(d&128)>0||(c&128)>0||(h&128)>0){xe-=12;return}if(e<14){if(e===12)return bo(t,r,n,i,o,a,s,l,u,d,c,h);{let f=yt[xe++];if((f&128)>0){xe-=13;return}return bo(t,r,n,i,o,a,s,l,u,d,c,h,f)}}else{let f=yt[xe++],m=yt[xe++];if((f&128)>0||(m&128)>0){xe-=14;return}if(e<15)return bo(t,r,n,i,o,a,s,l,u,d,c,h,f,m);let p=yt[xe++];if((p&128)>0){xe-=15;return}return bo(t,r,n,i,o,a,s,l,u,d,c,h,f,m,p)}}}}}function uR(e){return ls.copyBuffers?Uint8Array.prototype.slice.call(yt,xe,xe+=e):yt.subarray(xe,xe+=e)}function Mp(e){let t=yt[xe++];if(qa[t])return qa[t](yt.subarray(xe,xe+=e));throw new Error("Unknown extension type "+t)}var G7=new Array(4096);function ele(){let e=yt[xe++];if(e>=160&&e<192){if(e=e-160,Ec>=xe)return yf.slice(xe-El,(xe+=e)-El);if(!(Ec==0&&Vf<180))return WN(e)}else return xe--,yi();let t=(e<<5^(e>1?rn.getUint16(xe):e>0?yt[xe]:0))&4095,r=G7[t],n=xe,i=xe+e-3,o,a=0;if(r&&r.bytes==e){for(;n<i;){if(o=rn.getUint32(n),o!=r[a++]){n=1879048192;break}n+=4}for(i+=3;n<i;)if(o=yt[n++],o!=r[a++]){n=1879048192;break}if(n===i)return xe=n,r.string;i-=3,n=xe}for(r=[],G7[t]=r,r.bytes=e;n<i;)o=rn.getUint32(n),r.push(o),n+=4;for(i+=3;n<i;)o=yt[n++],r.push(o);let s=e<16?wU(e):Jse(e);return s!=null?r.string=s:r.string=WN(e)}var W7=(e,t)=>{var r=yi();let n=e;t!==void 0&&(e=e<32?-((t<<5)+e):(t<<5)+e,r.highByte=t);let i=qr[e];return i&&i.isShared&&((qr.restoreStructures||(qr.restoreStructures=[]))[e]=i),qr[e]=r,r.read=xU(r,n),r.read()},tle=typeof self=="object"?self:global;qa[0]=()=>{};qa[0].noBuffer=!0;qa[101]=()=>{let e=yi();return(tle[e[0]]||Error)(e[1])};qa[105]=e=>{let t=rn.getUint32(xe-4);Jd||(Jd=new Map);let r=yt[xe],n;r>=144&&r<160||r==220||r==221?n=[]:n={};let i={target:n};Jd.set(t,i);let o=yi();return i.used?Object.assign(n,o):(i.target=o,o)};qa[112]=e=>{let t=rn.getUint32(xe-4),r=Jd.get(t);return r.used=!0,r.target};qa[115]=()=>new Set(yi());var rle=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(e=>e+"Array");qa[116]=e=>{let t=e[0],r=rle[t];if(!r)throw new Error("Could not find typed array for code "+t);return new tle[r](Uint8Array.prototype.slice.call(e,1).buffer)};qa[120]=()=>{let e=yi();return new RegExp(e[0],e[1])};qa[98]=e=>{let t=(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3],r=xe;xe+=t-4,Vs=[yi(),yi()],Vs.position0=0,Vs.position1=0;let n=xe;xe=r;try{return yi()}finally{xe=n}};qa[255]=e=>e.length==4?new Date((e[0]*16777216+(e[1]<<16)+(e[2]<<8)+e[3])*1e3):e.length==8?new Date(((e[0]<<22)+(e[1]<<14)+(e[2]<<6)+(e[3]>>2))/1e6+((e[3]&3)*4294967296+e[4]*16777216+(e[5]<<16)+(e[6]<<8)+e[7])*1e3):e.length==12?new Date(((e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3])/1e6+((e[4]&128?-281474976710656:0)+e[6]*1099511627776+e[7]*4294967296+e[8]*16777216+(e[9]<<16)+(e[10]<<8)+e[11])*1e3):new Date("invalid");function nle(e){let t=Vf,r=xe,n=El,i=Ec,o=yf,a=Jd,s=Vs,l=new Uint8Array(yt.slice(0,Vf)),u=qr,d=qr.slice(0,qr.length),c=ls,h=_0,f=e();return Vf=t,xe=r,El=n,Ec=i,yf=o,Jd=a,Vs=s,yt=l,_0=h,qr=u,qr.splice(0,qr.length,...d),ls=c,rn=new DataView(yt.buffer,yt.byteOffset,yt.byteLength),f}function qN(){yt=null,Jd=null,qr=null}function Svt(e){e.unpack?qa[e.type]=e.unpack:qa[e.type]=e}var SU=new Array(147);for(let e=0;e<256;e++)SU[e]=+("1e"+Math.floor(45.15-e*.30103));var SO=new wP({useRecords:!1});SO.unpack;SO.unpackMultiple;SO.unpack;var _vt=new Float32Array(1);new Uint8Array(_vt.buffer,0,4);var JA;try{JA=new TextEncoder}catch{}var SP,_U,_O=typeof Buffer<"u",cR=_O?Buffer.allocUnsafeSlow:Uint8Array,ile=_O?Buffer:Uint8Array,q7=_O?4294967296:2144337920,Ue,_i,Te=0,Ku,Xu=null,Cvt=/[\u0080-\uFFFF]/,sx=Symbol("record-id"),ole=class extends wP{constructor(e){super(e),this.offset=0;let t,r,n,i,o,a=0,s=ile.prototype.utf8Write?function(w,_,C){return Ue.utf8Write(w,_,C)}:JA&&JA.encodeInto?function(w,_){return JA.encodeInto(w,Ue.subarray(_)).written}:!1,l=this;e||(e={});let u=e&&e.sequential,d=e.structures||e.saveStructures,c=e.maxSharedStructures;if(c==null&&(c=d?32:0),c>8160)throw new Error("Maximum maxSharedStructure is 8160");let h=e.maxOwnStructures;h==null&&(h=d?32:64),u&&!e.saveStructures&&(this.structures=[]);let f=c>32||h+c>64,m=c+64,p=c+h+64;if(p>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let g=[],v=0,b=0;this.pack=this.encode=function(w,_){if(Ue||(Ue=new cR(8192),_i=new DataView(Ue.buffer,0,8192),Te=0),Ku=Ue.length-10,Ku-Te<2048?(Ue=new cR(Ue.length),_i=new DataView(Ue.buffer,0,Ue.length),Ku=Ue.length-10,Te=0):Te=Te+7&2147483640,t=Te,o=l.structuredClone?new Map:null,l.bundleStrings?(Xu=["",""],Ue[Te++]=214,Ue[Te++]=98,Xu.position=Te-t,Te+=4):Xu=null,r=l.structures,r){r.uninitialized&&(r=l._mergeStructures(l.getStructures()));let C=r.sharedLength||0;if(C>c)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+r.sharedLength);if(!r.transitions){r.transitions=Object.create(null);for(let E=0;E<C;E++){let A=r[E];if(!A)continue;let M,I=r.transitions;for(let O=0,T=A.length;O<T;O++){let D=A[O];M=I[D],M||(M=I[D]=Object.create(null)),I=M}I[sx]=E+64}a=C}u||(r.nextId=C+64)}n&&(n=!1),i=r||[];try{if(y(w),Xu){_i.setUint32(Xu.position+t,Te-Xu.position-t);let C=Xu;Xu=null,y(C[0]),y(C[1])}if(l.offset=Te,o&&o.idsToInsert){Te+=o.idsToInsert.length*6,Te>Ku&&S(Te),l.offset=Te;let C=Evt(Ue.subarray(t,Te),o.idsToInsert);return o=null,C}return _&Mvt?(Ue.start=t,Ue.end=Te,Ue):Ue.subarray(t,Te)}finally{if(r){if(b<10&&b++,v>1e4)r.transitions=null,b=0,v=0,g.length>0&&(g=[]);else if(g.length>0&&!u){for(let C=0,E=g.length;C<E;C++)g[C][sx]=0;g=[]}if(n&&l.saveStructures){let C=r.sharedLength||c;r.length>C&&(r=r.slice(0,C));let E=Ue.subarray(t,Te);return l.saveStructures(r,a)===!1?(l._mergeStructures(l.getStructures()),l.pack(w)):(a=C,E)}}_&Pvt&&(Te=t)}};let y=w=>{Te>Ku&&(Ue=S(Te));var _=typeof w,C;if(_==="string"){let E=w.length;if(Xu&&E>=8&&E<4096){let I=Cvt.test(w);Xu[I?0:1]+=w,Ue[Te++]=193,y(I?-E:E);return}let A;E<32?A=1:E<256?A=2:E<65536?A=3:A=5;let M=E*3;if(Te+M>Ku&&(Ue=S(Te+M)),E<64||!s){let I,O,T,D=Te+A;for(I=0;I<E;I++)O=w.charCodeAt(I),O<128?Ue[D++]=O:O<2048?(Ue[D++]=O>>6|192,Ue[D++]=O&63|128):(O&64512)===55296&&((T=w.charCodeAt(I+1))&64512)===56320?(O=65536+((O&1023)<<10)+(T&1023),I++,Ue[D++]=O>>18|240,Ue[D++]=O>>12&63|128,Ue[D++]=O>>6&63|128,Ue[D++]=O&63|128):(Ue[D++]=O>>12|224,Ue[D++]=O>>6&63|128,Ue[D++]=O&63|128);C=D-Te-A}else C=s(w,Te+A,M);C<32?Ue[Te++]=160|C:C<256?(A<2&&Ue.copyWithin(Te+2,Te+1,Te+1+C),Ue[Te++]=217,Ue[Te++]=C):C<65536?(A<3&&Ue.copyWithin(Te+3,Te+2,Te+2+C),Ue[Te++]=218,Ue[Te++]=C>>8,Ue[Te++]=C&255):(A<5&&Ue.copyWithin(Te+5,Te+3,Te+3+C),Ue[Te++]=219,_i.setUint32(Te,C),Te+=4),Te+=C}else if(_==="number")if(w>>>0===w)w<64?Ue[Te++]=w:w<256?(Ue[Te++]=204,Ue[Te++]=w):w<65536?(Ue[Te++]=205,Ue[Te++]=w>>8,Ue[Te++]=w&255):(Ue[Te++]=206,_i.setUint32(Te,w),Te+=4);else if(w>>0===w)w>=-32?Ue[Te++]=256+w:w>=-128?(Ue[Te++]=208,Ue[Te++]=w+256):w>=-32768?(Ue[Te++]=209,_i.setInt16(Te,w),Te+=2):(Ue[Te++]=210,_i.setInt32(Te,w),Te+=4);else{let E;if((E=this.useFloat32)>0&&w<4294967296&&w>=-2147483648){Ue[Te++]=202,_i.setFloat32(Te,w);let A;if(E<4||(A=w*SU[(Ue[Te]&127)<<1|Ue[Te+1]>>7])>>0===A){Te+=4;return}else Te--}Ue[Te++]=203,_i.setFloat64(Te,w),Te+=8}else if(_==="object")if(!w)Ue[Te++]=192;else{if(o){let A=o.get(w);if(A){if(!A.id){let M=o.idsToInsert||(o.idsToInsert=[]);A.id=M.push(A)}Ue[Te++]=214,Ue[Te++]=112,_i.setUint32(Te,A.id),Te+=4;return}else o.set(w,{offset:Te-t})}let E=w.constructor;if(E===Object)x(w,!0);else if(E===Array){C=w.length,C<16?Ue[Te++]=144|C:C<65536?(Ue[Te++]=220,Ue[Te++]=C>>8,Ue[Te++]=C&255):(Ue[Te++]=221,_i.setUint32(Te,C),Te+=4);for(let A=0;A<C;A++)y(w[A])}else if(E===Map){C=w.size,C<16?Ue[Te++]=128|C:C<65536?(Ue[Te++]=222,Ue[Te++]=C>>8,Ue[Te++]=C&255):(Ue[Te++]=223,_i.setUint32(Te,C),Te+=4);for(let[A,M]of w)y(A),y(M)}else{for(let A=0,M=SP.length;A<M;A++){let I=_U[A];if(w instanceof I){let O=SP[A];if(O.write){O.type&&(Ue[Te++]=212,Ue[Te++]=O.type,Ue[Te++]=0),y(O.write.call(this,w));return}let T=Ue,D=_i,N=Te;Ue=null;let k;try{k=O.pack.call(this,w,R=>(Ue=T,T=null,Te+=R,Te>Ku&&S(Te),{target:Ue,targetView:_i,position:Te-R}),y)}finally{T&&(Ue=T,_i=D,Te=N,Ku=Ue.length-10)}k&&(k.length+Te>Ku&&S(k.length+Te),Te=Avt(k,Ue,Te,O.type));return}}x(w,!w.hasOwnProperty)}}else if(_==="boolean")Ue[Te++]=w?195:194;else if(_==="bigint"){if(w<BigInt(1)<<BigInt(63)&&w>=-(BigInt(1)<<BigInt(63)))Ue[Te++]=211,_i.setBigInt64(Te,w);else if(w<BigInt(1)<<BigInt(64)&&w>0)Ue[Te++]=207,_i.setBigUint64(Te,w);else if(this.largeBigIntToFloat)Ue[Te++]=203,_i.setFloat64(Te,Number(w));else throw new RangeError(w+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");Te+=8}else if(_==="undefined")this.encodeUndefinedAsNil?Ue[Te++]=192:(Ue[Te++]=212,Ue[Te++]=0,Ue[Te++]=0);else if(_==="function")y(this.writeFunction&&this.writeFunction());else throw new Error("Unknown type: "+_)},x=this.useRecords===!1?this.variableMapSize?w=>{let _=Object.keys(w),C=_.length;C<16?Ue[Te++]=128|C:C<65536?(Ue[Te++]=222,Ue[Te++]=C>>8,Ue[Te++]=C&255):(Ue[Te++]=223,_i.setUint32(Te,C),Te+=4);let E;for(let A=0;A<C;A++)y(E=_[A]),y(w[E])}:(w,_)=>{Ue[Te++]=222;let C=Te-t;Te+=2;let E=0;for(let A in w)(_||w.hasOwnProperty(A))&&(y(A),y(w[A]),E++);Ue[C+++t]=E>>8,Ue[C+t]=E&255}:w=>{let _=Object.keys(w),C,E=i.transitions||(i.transitions=Object.create(null)),A=0;for(let I=0,O=_.length;I<O;I++){let T=_[I];C=E[T],C||(C=E[T]=Object.create(null),A++),E=C}let M=E[sx];if(M)M>=96&&f?(Ue[Te++]=((M-=96)&31)+96,Ue[Te++]=M>>5):Ue[Te++]=M;else{M=i.nextId,M||(M=64),M<m&&this.shouldShareStructure&&!this.shouldShareStructure(_)?(M=i.nextOwnId,M<p||(M=m),i.nextOwnId=M+1):(M>=p&&(M=m),i.nextId=M+1);let I=_.highByte=M>=96&&f?M-96>>5:-1;E[sx]=M,i[M-64]=_,M<m?(_.isShared=!0,i.sharedLength=M-63,n=!0,I>=0?(Ue[Te++]=(M&31)+96,Ue[Te++]=I):Ue[Te++]=M):(I>=0?(Ue[Te++]=213,Ue[Te++]=114,Ue[Te++]=(M&31)+96,Ue[Te++]=I):(Ue[Te++]=212,Ue[Te++]=114,Ue[Te++]=M),A&&(v+=b*A),g.length>=h&&(g.shift()[sx]=0),g.push(E),y(_))}for(let I=0,O=_.length;I<O;I++)y(w[_[I]])},S=w=>{let _;if(w>16777216){if(w-t>q7)throw new Error("Packed buffer would be larger than maximum buffer size");_=Math.min(q7,Math.round(Math.max((w-t)*(w>67108864?1.25:2),4194304)/4096)*4096)}else _=(Math.max(w-t<<2,Ue.length-1)>>12)+1<<12;let C=new cR(_);return _i=new DataView(C.buffer,0,_),Ue.copy?Ue.copy(C,0,t,w):C.set(Ue.slice(t,w)),Te-=t,t=0,Ku=C.length-10,Ue=C}}useBuffer(e){Ue=e,_i=new DataView(Ue.buffer,Ue.byteOffset,Ue.byteLength),Te=0}};_U=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,Yse];SP=[{pack(e,t,r){let n=e.getTime()/1e3;if((this.useTimestamp32||e.getMilliseconds()===0)&&n>=0&&n<4294967296){let{target:i,targetView:o,position:a}=t(6);i[a++]=214,i[a++]=255,o.setUint32(a,n)}else if(n>0&&n<17179869184){let{target:i,targetView:o,position:a}=t(10);i[a++]=215,i[a++]=255,o.setUint32(a,e.getMilliseconds()*4e6+(n/1e3/4294967296>>0)),o.setUint32(a+4,n)}else if(isNaN(n)){if(this.onInvalidDate)return t(0),r(this.onInvalidDate());let{target:i,targetView:o,position:a}=t(3);i[a++]=212,i[a++]=255,i[a++]=255}else{let{target:i,targetView:o,position:a}=t(15);i[a++]=199,i[a++]=12,i[a++]=255,o.setUint32(a,e.getMilliseconds()*1e6),o.setBigInt64(a+4,BigInt(Math.floor(n)))}}},{pack(e,t,r){let n=Array.from(e),{target:i,position:o}=t(this.structuredClone?3:0);this.structuredClone&&(i[o++]=212,i[o++]=115,i[o++]=0),r(n)}},{pack(e,t,r){let{target:n,position:i}=t(this.structuredClone?3:0);this.structuredClone&&(n[i++]=212,n[i++]=101,n[i++]=0),r([e.name,e.message])}},{pack(e,t,r){let{target:n,position:i}=t(this.structuredClone?3:0);this.structuredClone&&(n[i++]=212,n[i++]=120,n[i++]=0),r([e.source,e.flags])}},{pack(e,t){this.structuredClone?K7(e,16,t):X7(_O?Buffer.from(e):new Uint8Array(e),t)}},{pack(e,t){let r=e.constructor;r!==ile&&this.structuredClone?K7(e,rle.indexOf(r.name),t):X7(e,t)}},{pack(e,t){let{target:r,position:n}=t(1);r[n]=193}}];function K7(e,t,r,n){let i=e.byteLength;if(i+1<256){var{target:o,position:a}=r(4+i);o[a++]=199,o[a++]=i+1}else if(i+1<65536){var{target:o,position:a}=r(5+i);o[a++]=200,o[a++]=i+1>>8,o[a++]=i+1&255}else{var{target:o,position:a,targetView:s}=r(7+i);o[a++]=201,s.setUint32(a,i+1),a+=4}o[a++]=116,o[a++]=t,o.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),a)}function X7(e,t){let r=e.byteLength;var n,i;if(r<256){var{target:n,position:i}=t(r+2);n[i++]=196,n[i++]=r}else if(r<65536){var{target:n,position:i}=t(r+3);n[i++]=197,n[i++]=r>>8,n[i++]=r&255}else{var{target:n,position:i,targetView:o}=t(r+5);n[i++]=198,o.setUint32(i,r),i+=4}n.set(e,i)}function Avt(e,t,r,n){let i=e.length;switch(i){case 1:t[r++]=212;break;case 2:t[r++]=213;break;case 4:t[r++]=214;break;case 8:t[r++]=215;break;case 16:t[r++]=216;break;default:i<256?(t[r++]=199,t[r++]=i):i<65536?(t[r++]=200,t[r++]=i>>8,t[r++]=i&255):(t[r++]=201,t[r++]=i>>24,t[r++]=i>>16&255,t[r++]=i>>8&255,t[r++]=i&255)}return t[r++]=n,t.set(e,r),r+=i,r}function Evt(e,t){let r,n=t.length*6,i=e.length-n;for(t.sort((o,a)=>o.offset>a.offset?1:-1);r=t.pop();){let o=r.offset,a=r.id;e.copyWithin(o+n,o,i),n-=6;let s=o+n;e[s++]=214,e[s++]=105,e[s++]=a>>24,e[s++]=a>>16&255,e[s++]=a>>8&255,e[s++]=a&255,i=o}return e}function vb(e){if(e.Class){if(!e.pack&&!e.write)throw new Error("Extension has no pack or write function");if(e.pack&&!e.type)throw new Error("Extension has no type (numeric code to identify the extension)");_U.unshift(e.Class),SP.unshift(e)}Svt(e)}var ale=new ole({useRecords:!1});ale.pack;ale.pack;var Mvt=512,Pvt=1024,Y7=new ole({structuredClone:!0});vb({Class:vr.prototype.constructor,type:1,write(e){return{...e}},read(e){return Object.setPrototypeOf(e,vr.prototype),e}});vb({Class:$t.prototype.constructor,type:2,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,$t.prototype),e}});vb({Class:Cs.prototype.constructor,type:3,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,Cs.prototype),e}});vb({Class:B7.prototype.constructor,type:4,write(e){return e.id},read(e){return new B7(e)}});vb({Class:F7.prototype.constructor,type:5,write(e){return e.data},read(e){return new F7(e)}});vb({Class:ho.prototype.constructor,type:6,write(e){return{...e}},read(e){return Object.setPrototypeOf(e,ho.prototype),e}});function Tvt(e){var t=0;if(e.length===0)return t;for(let r=0;r<e.length;r++){let n=e[r];t=(t<<5)-t+n,t=t&t}return t}function KN(e){if(mU(e))return e;if(Array.isArray(e))return e.map(KN);if(typeof e=="object"&&e!==null){let t={};for(let r of Object.keys(e).sort())t[r]=KN(e[r]);return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}else return e}var XN;(e=>{function t(i){return Y7.pack(i)}e.serialize=t;function r(i){return Y7.unpack(i)}e.deserialize=r;function n(i){return Tvt(t(KN(i))).toString()}e.checksum=n})(XN||(XN={}));var Q7;(e=>{function t(n){return n.type==="Conditional"?n.condition.type==="Distance"?"Distance":"StateChange":n.type}e.toEventUIType=t;function r(n){return n==="Distance"||n==="StateChange"?"Conditional":n}e.fromEventUIType=r})(Q7||(Q7={}));var Ls={LookAt:[],Follow:["Create"],DragDrop:["Transition","Animation","Audio","Create","SetVariable","DynamicVariablePlay","Conditional"],MouseHover:["Transition","Animation","Create","Destroy","SwitchCamera","SceneTransition","SetVariable","DynamicVariablePlay","Conditional"],Scroll:["Transition","Animation","Create","SetVariable","DynamicVariablePlay","Conditional"],Start:["Transition","Animation","Audio","Video","Create","Destroy","SwitchCamera","SceneTransition","SetVariable","DynamicVariablePlay","Conditional"],Conditional:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],MouseDown:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],MouseUp:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],MousePress:["Transition","Animation","Audio","Video","Link","Create","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],KeyDown:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],KeyUp:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],KeyPress:["Transition","Animation","Audio","Video","Link","Create","SwitchCamera","Reset","SetVariable","DynamicVariablePlay","Conditional"],GameControl:["Transition","Animation","Audio","Create","Conditional"],Collision:["Transition","Animation","Audio","Video","Create","Destroy","Reset","SetVariable","DynamicVariablePlay","Conditional"],Trigger:["Transition","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],Resize:["Transition","Animation","Audio","Video","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],VariableChange:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"]},Z7;(e=>{function t(n){return n.type==="MouseDown"||n.type==="MouseUp"||n.type==="MousePress"||n.type==="KeyDown"||n.type==="KeyUp"||n.type==="KeyPress"}e.is=t;function r(n){return n==="MouseDown"||n==="MouseUp"||n==="MousePress"?{type:n,mode:"Object",disabled:!1,runMode:"Once",actions:new $t}:{type:n,disabled:!1,key:void 0,runMode:"Once",actions:new $t}}e.defaultData=r})(Z7||(Z7={}));var _P;(e=>{function t(r){return{type:"Property",value:[r??null,"position","x"]}}e.propertyDefaultData=t,e.valueDefaultData={type:"Literal",value:0}})(_P||(_P={}));var YN;(e=>{function t(i){return{type:"Comparison",operator:"==",lOperand:_P.propertyDefaultData(i),rOperand:{..._P.valueDefaultData}}}e.comparisonDefaultData=t;function r(i){return{type:"Distance",toObject:i??null,fromObject:i??null,distance:200}}e.distanceDefaultData=r;function n(i,o){return{type:"State",object:i??null,state:o??null}}e.stateDefaultData=n})(YN||(YN={}));var J7;(e=>{function t(n){return n.type==="Conditional"}e.is=t;function r(n){return{type:"Conditional",disabled:!1,inActions:new $t,outActions:new $t,condition:YN.distanceDefaultData(n)}}e.defaultData=r})(J7||(J7={}));var eK;(e=>e.defaultData={type:"DragDrop",cursor:"hand",disabled:!1,dampingFactor:1,objects:[],snapTo:"center",snapSurfaceMode:"bbox",snapSurfaceOffset:0,dropOn:"all",autoOrient:!0,dropDestinations:[],plane:"adaptive",planeMode:"locked",referenceFrame:"global",limits:[-1/0,1/0,-1/0,1/0,-1/0,1/0],drop:!1,resetOnSnapFail:!1,snapSpeed:20,resetSpeed:20,dragDropActions:{drag:new $t,drop:new $t}})(eK||(eK={}));var QN;(e=>e.defaultData={type:"Follow",disabled:!1,maxDelta:0,dampingFactor:1,target:"cursor",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledTranslation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5,actions:new $t})(QN||(QN={}));var ZN;(e=>e.defaultData={type:"LookAt",disabled:!1,distance:1e3,dampingFactor:1,target:"cursor",tilt:"up",axis:"z",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledRotation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5})(ZN||(ZN={}));var tK;(e=>{function t(n){return n.type==="MouseHover"}e.is=t;function r(){return{type:"MouseHover",disabled:!1,actions:new $t}}e.defaultData=r})(tK||(tK={}));var rK;(e=>{function t(n){return n.type==="Scroll"}e.is=t;function r(){return{type:"Scroll",disabled:!1,steps:100,trigger:"load",startFrom:"enter",enterAnchor:"top",startOffset:0,endAfter:400,actions:new $t}}e.defaultData=r})(rK||(rK={}));var nK;(e=>{function t(n){return n.type==="Start"}e.is=t;function r(){return{type:"Start",disabled:!1,actions:new $t}}e.defaultData=r})(nK||(nK={}));var iK;(e=>{function t(n){return n.type==="Collision"}e.is=t;function r(){return{type:"Collision",disabled:!1,runMode:"Once",target:"character",actions:new $t}}e.defaultData=r})(iK||(iK={}));var oK;(e=>{function t(n){return n.type==="Trigger"}e.is=t;function r(n,i){return{type:"Trigger",disabled:!1,runMode:"Once",target:"all",triggeringObjects:[],actions:new $t,triggerZone:"box",position:i.toArray(),rotation:[0,0,0],size:n.toArray(),radius:n.length()/2,helperVisible:!0}}e.defaultData=r})(oK||(oK={}));var JN;(e=>{e.defaultSizes={mobile:[480,480],tablet:[768,768],desktop:[1200,1200],custom:[769,1200]};function t(a){return a.type==="Resize"}e.is=t;function r(a){return typeof a=="string"?a:"custom"}e.sizeToDevice=r;function n(a){return typeof a=="string"?[...e.defaultSizes[a]]:[...a]}e.deviceToSize=n;function i(){let a={size:"mobile",operator:"<",actions:new $t},s={size:"tablet",operator:"<",actions:new $t},l={size:[...e.defaultSizes.custom],operator:"<>",actions:new $t},u=new $t;return u.push({id:Et.generateUUID(),fi:0,data:a},{id:Et.generateUUID(),fi:1,data:s},{id:Et.generateUUID(),fi:2,data:l}),{type:"Resize",disabled:!1,orientation:"horizontal",breakpoints:u}}e.defaultData=i;function o(){return{size:[...e.defaultSizes.custom],operator:"<>",actions:new $t}}e.defaultBreakpointData=o})(JN||(JN={}));var ez;(e=>{e.propertyPaths={Position:["position"],"Position X":["position","x"],"Position Y":["position","y"],"Position Z":["position","z"],Rotation:["rotation"],"Rotation X":["rotation","x"],"Rotation Y":["rotation","y"],"Rotation Z":["rotation","z"],Scale:["scale"],"Scale X":["scale","x"],"Scale Y":["scale","y"],"Scale Z":["scale","z"],Width:["width"],Height:["height"],Depth:["depth"],"Mouse Position X":["mouse","x"],"Mouse Position Y":["mouse","y"],"Mouse Pressed":["mouse","pressed"],"Screen Width":["mouse","width"],"Screen Height":["mouse","height"],"Hit Position X":["raycast","x"],"Hit Position Y":["raycast","y"],"Hit Position Z":["raycast","z"],"Hit Object Position X":["raycast","objX"],"Hit Object Position Y":["raycast","objY"],"Hit Object Position Z":["raycast","objZ"]};function t(n){return n.type==="VariableChange"}e.is=t;function r(){return{disabled:!1,type:"VariableChange",actions:new $t,variableId:"",objectId:null,property:"Position X"}}e.defaultData=r})(ez||(ez={}));var yb="personal camera",A1="a218fcc3-276b-49b9-b485-49037fd14f5f",Ovt=2960946,Ql=5526619,$v;(e=>{function t(n,i){return n[0]===i[0]&&n[1]===i[1]}e.isEqual=t;function r(n,i,o){return[n[0]+(i[0]-n[0])*o,n[1]+(i[1]-n[1])*o]}e.lerp=r})($v||($v={}));var Tm;(e=>{function t(l,u){return l[0]===u[0]&&l[1]===u[1]&&l[2]===u[2]}e.isEqual=t;function r(l,u){return[l[0]+u[0],l[1]+u[1],l[2]+u[2]]}e.add=r;function n(l,u){return[l[0]-u[0],l[1]-u[1],l[2]-u[2]]}e.sub=n;function i(l,u){return[l[0]/u[0],l[1]/u[1],l[2]/u[2]]}e.div=i;function o(l,u){return[l[0]*u[0],l[1]*u[1],l[2]*u[2]]}e.mul=o;function a(l,u){return Math.hypot(l[0]-u[0],l[1]-u[1],l[2]-u[2])}e.dist=a;function s(l,u,d){return[l[0]+(u[0]-l[0])*d,l[1]+(u[1]-l[1])*d,l[2]+(u[2]-l[2])*d]}e.lerp=s})(Tm||(Tm={}));var CP;(e=>{function t(n,i){return n[0]===i[0]&&n[1]===i[1]&&n[2]===i[2]&&n[3]===i[3]}e.isEqual=t;function r(n,i,o){return[n[0]+(i[0]-n[0])*o,n[1]+(i[1]-n[1])*o,n[2]+(i[2]-n[2])*o,n[3]+(i[3]-n[3])*o]}e.lerp=r})(CP||(CP={}));var C0;(e=>{e.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function t(i,o){for(let a=0;a<16;a++)if(i[a]!==o[a])return!1;return!0}e.isEqual=t;function r(i){return i??e.identity}e.simplify=r;function n(i,o){let a=o.slice(0);for(var s=0,l=o.length;s<l;s+=3){let u=i[3]*o[s]+i[7]*o[s+1]+i[11]*o[s+2]+i[15];a[s]=(i[0]*o[s]+i[4]*o[s+1]+i[8]*o[s+2]+i[12])/u,a[s+1]=(i[1]*o[s]+i[5]*o[s+1]+i[9]*o[s+2]+i[13])/u,a[s+2]=(i[2]*o[s]+i[6]*o[s+1]+i[10]*o[s+2]+i[14])/u}return a}e.applyMatrix4=n})(C0||(C0={}));var Ta;(e=>{function t(l){return typeof l=="object"&&typeof l.r=="number"&&typeof l.g=="number"&&typeof l.b=="number"}e.isRGB=t,e.white={r:1,g:1,b:1},e.red={r:1,g:0,b:0},e.black={r:0,g:0,b:0};function r(l){return{r:Math.round(l.r*255),g:Math.round(l.g*255),b:Math.round(l.b*255),a:1}}e.toRgb255a1=r;function n(l){return{r:l.r,g:l.g,b:l.b}}e.clone=n;function i(l){return l=Math.floor(l),{r:(l>>16&255)/255,g:(l>>8&255)/255,b:(l&255)/255}}e.fromHex=i;function o(l){return Math.round(l.r*255)*65536+Math.round(l.g*255)*256+Math.round(l.b*255)}e.toHex=o;function a(l,u){return l.r===u.r&&l.g===u.g&&l.b===u.b}e.equals=a;function s(l,u,d){return{r:l.r+(u.r-l.r)*d,g:l.g+(u.g-l.g)*d,b:l.b+(u.b-l.b)*d}}e.lerp=s})(Ta||(Ta={}));var Cu;(e=>{e.white={...Ta.white,a:1},e.transparent={...Ta.white,a:0};function t(a){return{r:a[0],g:a[1],b:a[2],a:a[3]}}e.from0to1=t;function r(a,s){return{...Ta.fromHex(a),a:s}}e.fromHexAndA=r;function n(a){return{r:Math.round(a.r*255),g:Math.round(a.g*255),b:Math.round(a.b*255),a:a.a}}e.toRgb255a1=n;function i(a,s){return Ta.equals(a,s)&&a.a===s.a}e.equals=i;function o(a,s,l){return{r:a.r+(s.r-a.r)*l,g:a.g+(s.g-a.g)*l,b:a.b+(s.b-a.b)*l,a:a.a+(s.a-a.a)*l}}e.lerp=o})(Cu||(Cu={}));var tz;(e=>e.identity={position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]})(tz||(tz={}));var aK;(e=>e.defaultData={mass:1,stiffness:80,damping:10,velocity:0})(aK||(aK={}));var sK;(e=>e.defaultData={control1:[.5,0],control2:[.5,1]})(sK||(sK={}));var Jh;(e=>(e.linear=[0,0,1,1],e.ease=[.25,.1,.25,1],e.easeIn=[.42,0,1,1],e.easeOut=[0,0,.58,1],e.easeInOut=[.42,0,.58,1]))(Jh||(Jh={}));function Ivt(e){return typeof e=="string"&&e.length===36?/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e):!1}var Zm;(e=>{e.all=["PerspectiveCamera","OrthographicCamera"];function t(r){return e.all.includes(r)}e.is=t})(Zm||(Zm={}));var A0;(e=>{e.DefaultUp=[0,1,0],e.DefaultTargetOffset=1e3,e.defaultData={far:1e5,type:"OrthographicCamera",perspective:{near:70,fov:45,zoom:1},orthographic:{near:-1e5,zoom:1},up:e.DefaultUp,isUpVectorFlipped:!1,targetOffset:e.DefaultTargetOffset};function t(r){return r.type==="PerspectiveCamera"?r.perspective.zoom:r.orthographic.zoom}e.getZoom=t})(A0||(A0={}));var bf;(e=>{function t(n,i=.1){return{disabled:!1,type:"linear",hideBase:!1,count:3,radial:{radius:Math.max(n[0],n[1])*2,start:0,end:360,alignment:!1,axis:"y",scale:[1,1,1],rotation:[0,0,0],position:[0,0,0]},toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},linear:{scale:[1,1,1],rotation:[0,0,0],position:[n[0]+n[0]*i,0,0]},grid:{count:[2,2,2],size:n.map(o=>o*(1+i)),useCenter:!0},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}}}e.defaultData=t;function r(n,i){let o={...n};if(sle.forEach(a=>{Object.assign(o,{[a]:i[a]??n[a]})}),o.radial={...n.radial},i.radial){let a=n.radial,s=i.radial;lle.forEach(l=>{Object.assign(o.radial,{[l]:s[l]??a[l]})})}if(o.linear={...n.linear},i.linear){let a=n.linear,s=i.linear;ule.forEach(l=>{Object.assign(o.linear,{[l]:s[l]??a[l]})})}if(o.grid={...n.grid},i.grid){let a=n.grid,s=i.grid;cle.forEach(l=>{Object.assign(o.grid,{[l]:s[l]??a[l]})})}if(o.toObject={...n.toObject},i.toObject){let a=n.toObject,s=i.toObject;dle.forEach(l=>{Object.assign(o.toObject,{[l]:s[l]??a[l]})})}if(o.randomnessObject={...n.randomnessObject},i.randomnessObject){let a=n.randomnessObject,s=i.randomnessObject;hle.forEach(l=>{Object.assign(o.randomnessObject,{[l]:s[l]??a[l]})})}return o}e.merge=r})(bf||(bf={}));var rz;(e=>{e.defaultData={radial:{},linear:{},grid:{},toObject:{},randomnessObject:{}};let t=["radial","linear","grid","toObject","randomnessObject"];function r(n,i){let o=[];n.count!==void 0&&o.push({type:0,path:i,props:{count:n.count}});for(let a of t){let s=n[a];s&&Object.keys(s).length>0&&o.push({type:0,path:[...i,a],props:s})}return o}e.toOps=r})(rz||(rz={}));var sle=["count"],lle=["radius","start","end","position","scale","rotation"],ule=["position","scale","rotation"],cle=["count","size"],dle=["count","position","scale","rotation"],hle=["strength","scale","rotation","position","movement","seed","freqScale"],nz;(e=>{e.all=["PointLight","SpotLight","DirectionalLight","HemisphereLight"];function t(r){return e.all.includes(r)}e.is=t})(nz||(nz={}));var iz;(e=>{function t(n){return r(n)}e.defaultData=t;function r(n){if(n==="PointLight")return{type:n,color:Cu.white,intensity:1,distance:2e3,decay:1,shadows:!0,shadowResolution:1024,shadowRadius:1,penumbraSize:.5,depth:1e5};if(n==="SpotLight")return{type:n,color:Cu.white,intensity:1,distance:2e3,decay:1,shadows:!0,penumbra:0,angle:30/180*Math.PI,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};if(n==="DirectionalLight")return{type:n,color:Cu.white,intensity:1,shadows:!0,size:2e3,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};throw new Error("not implemented")}})(iz||(iz={}));var E0;(e=>e.defaultData={enabled:"visibility",fusedBody:!0,rigidBody:"positioned",density:1,pointMass:0,gravityScale:1,friction:.5,damping:0,restitution:.2,colliderType:"convex",enabledRotation:[!0,!0,!0],enabledTranslation:[!0,!0,!0]})(E0||(E0={}));var oz;(e=>{e.defaultData={castShadow:!0,receiveShadow:!0};function t(r,n){return r.castShadow===n.castShadow&&r.receiveShadow===n.receiveShadow}e.equals=t})(oz||(oz={}));var az;(e=>{e.defaultData={flatShading:!1,wireframe:!1,side:0};function t(r,n){return r.flatShading===n.flatShading&&r.side===n.side&&r.wireframe===n.wireframe}e.equals=t})(az||(az={}));var sz;(e=>e.defaultData={...az.defaultData,...oz.defaultData})(sz||(sz={}));var lK;(e=>{function t(r,n){var o,a;let i=[];if("material"in r){let s=typeof r.material=="string"?n.materials[r.material]??((o=n.lib.materials[r.material])==null?void 0:o.asset):r.material;s&&i.push(s)}else if("materials"in r)for(let s of r.materials){let l=typeof s=="string"?n.materials[s]??((a=n.lib.materials[s])==null?void 0:a.asset):s;l&&i.push(l)}return i}e.getMaterialData=t})(lK||(lK={}));var AP;(e=>(e.defaultVideo={data:"",thumb:"/_assets/_videos/catThumb.png",type:"video",name:"Cat video"},e.maxSize=3e7))(AP||(AP={}));var uK;(e=>{function t(r){return r==="texture"||r==="video"||r==="color"||r==="depth"||r==="normal"||r==="gradient"||r==="noise"||r==="fresnel"||r==="rainbow"||r==="toon"||r==="outline"||r==="transmission"||r==="matcap"||r==="displace"||r==="pattern"||r==="light"}e.is=t})(uK||(uK={}));function Dvt(e){return e.type!=="displace"}var cK;(e=>{function t(r){return r==="phong"||r==="toon"||r==="lambert"||r==="physical"}e.is=t})(cK||(cK={}));var fle=["mode","gradientType","noiseType","displacementType","projection","cnormal","crop","axis","side"],Rvt=["wrapping","image","video","name"],as;(e=>{function t(o,a){let{texture:s,...l}=a;if(Object.assign(o,l),s){let u=o.texture;u&&Object.assign(u,s)}}e.patch=t;function r(o,a){return o==="light"&&a?n(a):i(o)}e.defaultData=r;function n(o){let a={mode:0,isMask:!1,visible:!0,bumpMap:void 0,bumpMapIntensity:5,roughnessMap:void 0,alphaOverride:1};switch(o){case"phong":return{...a,category:"phong",specular:{r:.2,g:.2,b:.2},shininess:5,type:"light",visible:!0,mode:0,occlusion:!0,alpha:.6};case"toon":return{...a,category:"toon",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1};case"lambert":return{...a,category:"lambert",emissive:{r:0,g:0,b:0},type:"light",alpha:1,visible:!0,mode:0,occlusion:!0};case"physical":return{...a,category:"physical",roughness:.2,metalness:.2,reflectivity:.2,type:"light",alpha:1,visible:!0,mode:0,occlusion:!0}}}function i(o){let a={alpha:1,mode:0,isMask:!1,visible:!0};switch(o){case"texture":return{...a,type:"texture",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{image:"image_0",wrapping:1e3,repeat:[1,1],offset:[0,0]},crop:!1};case"video":return{...a,type:"video",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{video:AP.defaultVideo,wrapping:1001,repeat:[1,1],offset:[0,0]},crop:!1};case"color":return{...a,type:"color",color:Ta.fromHex(Ql)};case"depth":return{...a,type:"depth",gradientType:1,smooth:!1,isVector:!0,isWorldSpace:!1,origin:[0,0,0],direction:[1,0,0],colors:[[1,1,1,1],[0,0,0,1]],steps:[0,1],near:50,far:200};case"normal":return{...a,type:"normal",cnormal:[1,1,1]};case"gradient":return{...a,type:"gradient",gradientType:0,smooth:!1,colors:[[0,0,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,angle:0,offset:[0,0],morph:[0,0]};case"noise":return{...a,type:"noise",size:[100,100,100],noiseType:0,scale:1,move:1,colorA:{...Ta.fromHex(6710886),a:1},colorB:{...Ta.fromHex(6710886),a:1},colorC:{...Ta.fromHex(16777215),a:1},colorD:{...Ta.fromHex(16777215),a:1},distortion:[1,1],fA:[1.7,9.2],fB:[8.3,2.8],voronoiStyle:0,highCut:1,lowCut:0,smoothness:.3,seed:0,quality:1};case"fresnel":return{...a,type:"fresnel",color:Cu.fromHexAndA(16777215,1),bias:.1,scale:1,intensity:2,factor:1};case"rainbow":return{...a,type:"rainbow",filmThickness:30,movement:0,wavelengths:[0,0,0],noiseStrength:0,noiseScale:1,offset:[0,0,0]};case"toon":return{...a,type:"toon",positioning:2,colors:[[0,0,0,1],[.5,.5,.5,1],[.5,.5,.5,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,.475,.525,1,1,1,1,1,1,1],num:4,source:[0,1e3,0],isWorldSpace:!0,noiseStrength:0,noiseScale:1,shadowColor:Cu.fromHexAndA(0,0),offset:[0,0,0]};case"outline":return{...a,type:"outline",outlineColor:Cu.fromHexAndA(0,1),contourColor:Cu.fromHexAndA(0,1),outlineWidth:2,contourWidth:5,outlineThreshold:.4,contourThreshold:0,outlineSmoothing:0,contourFrequency:10,contourDirection:[0,1,0],positionalLines:!1,compensation:!0};case"matcap":return{...a,type:"matcap",texture:{image:"matcap_0",wrapping:1001,repeat:[1,1],offset:[0,0]}};case"transmission":return{...a,type:"transmission",thickness:10,ior:1.5,roughness:1};case"displace":return{visible:!0,type:"displace",displacementType:"noise",noiseType:0,scale:10,movement:1,offset:[0,0,0],intensity:8,voronoiStyle:0,smoothness:.3,seed:0,highCut:1,lowCut:0,quality:1};case"pattern":return{...a,type:"pattern",style:0,projection:0,axis:"y",blending:0,offset:[0,0],colorA:{...Ta.fromHex(0),a:1},colorB:{...Ta.fromHex(16777215),a:1},frequency:[10,10],size:.5,variation:0,smoothness:.5,zigzag:0,rotation:0,vertical:[0,1],horizontal:[0,1],sides:6}}}})(as||(as={}));var da;(e=>{function t(u){return!u.layers.some(d=>d.data.type==="texture"&&d.data.projection!==0||d.data.type==="depth"&&!d.data.isWorldSpace||d.data.type==="noise"||d.data.type==="displace")}e.isMergable=t;function r(u){let d="";return u.layers.forEach(c=>{Object.entries(c.data).forEach(([h,f])=>{d+=`${h}${f}`,Array.isArray(f)?f.forEach(m=>d+=`${m}`):typeof f=="object"?Object.values(f).forEach(m=>{typeof m=="number"?d+=`${m.toFixed(4)}`:d+=`${m}`}):d+=`${f}`})}),d}e.getHash=r;function n(){return{layers:new $t}}e.defaultEmptyData=n;function i(u="layer1",d="layer2"){return a("phong",u,d)}e.defaultData=i;function o(u,d){return{...u,name:d}}e.withName=o;function a(u,d="layer1",c="layer2"){let h=new $t;return h.push({fi:0,data:as.defaultData("light",u),id:d}),h.push({fi:1,data:as.defaultData("color"),id:c}),{layers:h}}e.defaultTwoLayerData=a;function s(u,d="phong",c="layer1",h="layer2"){let f=as.defaultData("texture");Object.assign(f.texture,{image:u});let m=new $t;return m.push({fi:0,data:f,id:c}),m.push({fi:1,data:as.defaultData("light",d),id:h}),{layers:m}}e.defaultTwoLayerTextureData=s;function l(u,d="phong",c="layer1",h="layer2"){let f=as.defaultData("video");Object.assign(f.texture,{video:u});let m=new $t;return m.push({fi:0,data:f,id:c}),m.push({fi:1,data:as.defaultData("light",d),id:h}),{layers:m}}e.defaultTwoLayerVideoTextureData=l})(da||(da={}));var EP;(e=>{function t(){return{points:new $t,roundness:0,shapeHoles:[],isClosed:!1}}e.defaultData=t})(EP||(EP={}));var MP;(e=>{function t(){return{points:new $t,lastInsertionPlane:null,subdivisions:12,isClosed:!1}}e.defaultData=t})(MP||(MP={}));var ple={type:"Ellipse",width:50,height:50,spikes:16,angle:360,innerRadius:0},lz;(e=>{function t(r,n){let i={...r};return gle.forEach(o=>{Object.assign(i,{[o]:n[o]??r[o]})}),i}e.merge=t})(lz||(lz={}));var mle={shape:ple,depth:1,offset:0,bevel:50,bevelSides:6,angle:0,twist:0,startScale:1,endScale:1,capType:"flat"},gle=["depth","offset","angle","twist","startScale","endScale"],PP;(e=>{function t(n){return n==="PolygonGeometry"||n==="RectangleGeometry"||n==="StarGeometry"||n==="TriangleGeometry"||n==="EllipseGeometry"}e.is2DParametricMesh=t;function r(n){return n==="PolygonGeometry"||n==="PolygonGeometry"||n==="RectangleGeometry"||n==="StarGeometry"||n==="TriangleGeometry"||n==="EllipseGeometry"||n==="PathGeometry"||n==="VectorGeometry"||n==="ConeGeometry"||n==="CubeGeometry"||n==="CylinderGeometry"||n==="DodecahedronGeometry"||n==="HelixGeometry"||n==="IcosahedronGeometry"||n==="LatheGeometry"||n==="PyramidGeometry"||n==="SphereGeometry"||n==="PlaneGeometry"||n==="BackdropGeometry"||n==="TorusGeometry"||n==="TorusKnotGeometry"||n==="BooleanGeometry"||n==="TextGeometry"}e.isParametricMesh=r})(PP||(PP={}));var uz;(e=>{function t(r,n){let i={...r};return Object.assign(i,n),i.type==="PathGeometry"&&"extrusion"in n&&n.extrusion&&(i.extrusion={...r.extrusion},Object.assign(i.extrusion,lz.merge(i.extrusion,n.extrusion))),i}e.merge=t})(uz||(uz={}));var py;(e=>{function t(r){if(r==="RectangleGeometry")return{width:320,height:320,type:r,cornerRadius:[0,0,0,0],cornerType:0,depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(r==="PathGeometry")return{type:r,width:1,height:1,depth:1,path:MP.defaultData(),extrusion:mle};if(r==="VectorGeometry")return{width:1,height:1,type:r,subdivisions:12,shape:EP.defaultData(),depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(r==="BooleanGeometry")return{type:r,operation:2,width:0,height:0,depth:0,phongAngle:35};if(r==="TextGeometry")return{type:r,width:100,height:100,depth:0,horizontalAlign:1,verticalAlign:1,fontSize:16,lineHeight:1.2,letterSpacing:0,text:{textValue:""},textTransform:1,font:"Roboto_regular",extrudeBevelSize:0,extrudeBevelSegments:1};if(r==="SphereGeometry")return{type:"SphereGeometry",width:100,height:100,depth:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:180};throw new Error("not implemented")}e.defaultData=t})(py||(py={}));var dK=["width","height","depth"],cz;(e=>e.defaultData={enabled:!1,useBackgroundColor:!1,color:Ta.white,near:.1,far:2e3})(cz||(cz={}));var TP;(e=>{let t={opacity:1,blendFunction:13,enabled:!1};e.defaultData={enabled:!1,pixelation:{...t,blendFunction:16,granularity:15},bloom:{...t,blendFunction:16,intensity:1,blurScale:1,luminanceThreshold:.25,luminanceSmoothing:.025,kernelSize:3},chromaticAberration:{...t,offset:[2,2]},vignette:{...t,darkness:1,offset:0},hueSaturation:{...t,hue:3,saturation:0},brightnessContrast:{...t,brightness:.25,contrast:0},depthOfField:{...t,focalLength:2,focusDistance:2,bokehScale:2},noise:{...t,blendFunction:16}}})(TP||(TP={}));var dz;(e=>e.defaultData={softShadowQuality:"low"})(dz||(dz={}));var hz;(e=>e.defaultData={enabled:!0,color:{r:.8274509803921568,g:.8274509803921568,b:.8274509803921568},intensity:.75})(hz||(hz={}));var fz;(e=>e.defaultData={occlusion:!1,aoFullRes:!1,radius:256,bias:.5,aoColor:{r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}})(fz||(fz={}));var M0;(e=>e.defaultData={usePhysics:!1,gravity:-10})(M0||(M0={}));var pz;(e=>e.defaultData={playCamera:yb,gameControlObject:null})(pz||(pz={}));var mz;(e=>e.defaultData={backgroundColor:Cu.fromHexAndA(Ovt,1),postprocessing:TP.defaultData,fog:cz.defaultData,globalPhysics:M0.defaultData,ambient:hz.defaultData,ao:fz.defaultData,shadow:dz.defaultData,publish:pz.defaultData})(mz||(mz={}));var hK;(e=>{function t(n){return n==="Component"||n==="Instance"}e.isComponentRelated=t;function r(n){return n==="Empty"||n==="Instance"}e.isEmptyOrComponent=r})(hK||(hK={}));var P0;(e=>{e.identity={...tz.identity,hiddenMatrix:C0.identity};function t(i){return{position:i.position,rotation:i.rotation,scale:i.scale,hiddenMatrix:i.hiddenMatrix}}e.fromObject=t;function r(i,o){return{position:(o==null?void 0:o.position)||i.position,rotation:(o==null?void 0:o.rotation)||i.rotation,scale:(o==null?void 0:o.scale)||i.scale,hiddenMatrix:(o==null?void 0:o.hiddenMatrix)||i.hiddenMatrix}}e.merge=r;function n(i,o){return Ugt({position:Tm.isEqual(i.position,o.position)?void 0:o.position,rotation:Tm.isEqual(i.rotation,o.rotation)?void 0:o.rotation,scale:Tm.isEqual(i.scale,o.scale)?null:o.scale,hiddenMatrix:C0.isEqual(i.hiddenMatrix,o.hiddenMatrix)?void 0:o.hiddenMatrix})}e.diff=n})(P0||(P0={}));var Ga;(e=>e.defaultData={states:new $t,events:new $t,visible:!0,raycastLock:!1,physics:E0.defaultData,pathSnapping:{pathId:null,slide:0,offset:0,orientation:"tangential"},...P0.identity,cloner:null})(Ga||(Ga={}));var gz;(e=>e.defaultData={type:"Empty",...Ga.defaultData})(gz||(gz={}));var fK;(e=>e.defaultData={type:"Component",...Ga.defaultData})(fK||(fK={}));var my;(e=>e.defaultData={type:"Mesh",...Ga.defaultData,...sz.defaultData})(my||(my={}));var oS;(e=>e.defaultData={...Ga.defaultData,...P0.identity,position:[0,0,A0.DefaultTargetOffset],...A0.defaultData})(oS||(oS={}));var vz;(e=>{function t(r){return{...Ga.defaultData,...iz.defaultData(r)}}e.defaultData=t,e.defaultDirectionalLightData={...e.defaultData("DirectionalLight"),position:[200,300,300],name:"Directional Light",intensity:.7}})(vz||(vz={}));var OP;(e=>{function t(n,i,o=0){for(;o<i.length;){let a=n?n[i[o]]:void 0;if(i.length===o+1)return a;if(a)n=a.descendants,o+=1;else return}}e.resolveWithDes=t;function r(n,i,o=0){let a=t(n,i,o);if(a){let s=Object.keys(a);if(s.length===1&&s[0]==="descendants")return}return a}e.resolve=r})(OP||(OP={}));var xf;(e=>{e.rootOverrideProps=["physics","events"],e.compositeNonOptionalOverrideProps=["geometry"],e.compositeEntireOverrideOverrideProps=["material"];function t(n,i){return{...Ga.defaultData,...i,component:n,overrides:new ho,physics:void 0,events:void 0,type:"Instance"}}e.ofComponent=t;function r(n){let i=P0.fromObject(n.data);return t(n.id,i)}e.fromComponentData=r})(xf||(xf={}));var T0;(e=>e.defaultData={type:"Page",...Ga.defaultData,physics:{...E0.defaultData,fusedBody:!1},...mz.defaultData,camera:oS.defaultData})(T0||(T0={}));var yz;(e=>(e.defaultCamera={position:[0,0,1e3],scale:[1,1,1],rotation:[0,0,0],hiddenMatrix:C0.identity,name:"Play Camera",visible:!0,raycastLock:!1,physics:E0.defaultData,states:new $t,events:new $t,cloner:null,pathSnapping:{pathId:null,orientation:"tangential",slide:0,offset:0},...A0.defaultData},e.KeysByResetCategory={States:["states"],Events:["events"],Material:["material","materials"],Geometry:["geometry"],Position:["position"],Rotation:["rotation"],Scale:["scale"],Transform:["position","scale","rotation","hiddenMatrix"],Name:["name"],Visibility:["visible","raycastLock","flatShading","wireframe","side"],Shadows:["castShadow","receiveShadow"],Cloner:["cloner"],Physics:["physics"]},e.defaultMeshObject={name:"Rectangle",...Ga.defaultData,...my.defaultData,geometry:py.defaultData("RectangleGeometry"),material:da.defaultTwoLayerData("phong","layer1","layer2")},e.defaultBooleanObject={name:"Boolean",...Ga.defaultData,...my.defaultData,geometry:py.defaultData("BooleanGeometry"),material:da.defaultTwoLayerData("phong","layer1","layer2")},e.defaultTextObject={name:"Text",...Ga.defaultData,...my.defaultData,geometry:py.defaultData("TextGeometry"),material:da.defaultTwoLayerData("phong","layer1","layer2")}))(yz||(yz={}));var dm;(e=>{function t(o,a){let s={name:a};return o.type==="Mesh"?(s.geometry={},"material"in o&&(s.material={layers:new ho}),"materials"in o&&(s.materials=o.materials.map(l=>({layers:new ho})))):Zm.is(o.type)&&(s.perspective={},s.orthographic={}),s}e.newEmpty=t;function r(o,a){if(a===void 0)return o;let s={...o};return"material"in s&&"material"in a&&a.material&&(s.material=iS(s.material,l=>{if(typeof l!="string")for(let[u,d]of Object.entries(a.material.layers)){let c=l.layers.data(u);c&&as.patch(c,d)}}).data),s.materials&&a.materials&&(s.materials=iS(s.materials,l=>{var u,d;for(let c=0;c<s.materials.length;c++){let h=a.materials[c];if(typeof h!="string")for(let[f,m]of Object.entries(h.layers)){let p=(d=(u=l[c])==null?void 0:u.layers)==null?void 0:d.data(f);p&&as.patch(p,m)}}}).data),s}function n(o,a){let s,l=[],u={orthographic:0,perspective:0,geometry:0};function d(c,h){for(let[f,m]of Object.entries(h.layers)){let{texture:p,...g}=m;if(p!==void 0&&Object.keys(p).length>0){let v={path:[...c,"layers",f,"texture"],props:p,type:0};l.push(v)}if(Object.keys(g).length>0){let v={path:[...c,"layers",f],props:g,type:0};l.push(v)}}}for(let[c,h]of Object.entries(a))if(c!=="name")if(c==="cloner")l.push(...rz.toOps(h,["cloner"]));else if(c==="pathSnapping")l.push({path:[c],props:{slide:h.slide,offset:h.offset},type:0});else if(c==="material")d(["material"],h);else if(c==="materials")for(let[f,m]of Object.entries(h))d(["materials",f],m);else if(u[c]===0){if(c==="geometry"&&h.extrusion!==void 0){let f={path:[c,"extrusion"],props:h.extrusion,type:0};l.push(f),h={...h},delete h.extrusion}if(Object.keys(h).length>0){let f={path:[c],props:h,type:0};l.push(f)}}else s===void 0&&(s={path:[],props:{},type:0},l.push(s)),s.props[c]=h;return l}e.toOps=n;function i(o,a){var l,u,d,c,h,f;if(a===void 0)return o;let s={...o};if(Object.assign(s,P0.merge(s,a)),Object.assign(s,{pathSnapping:Object.assign({},s.pathSnapping,{slide:((l=a.pathSnapping)==null?void 0:l.slide)??((u=s.pathSnapping)==null?void 0:u.slide)??0,offset:((d=a.pathSnapping)==null?void 0:d.offset)??((c=s.pathSnapping)==null?void 0:c.offset)??0})}),Zm.is(o.type)){s.orthographic={...s.orthographic},s.perspective={...s.perspective};let m=a;((h=m.orthographic)==null?void 0:h.zoom)!==void 0&&(s.orthographic.zoom=m.orthographic.zoom),((f=m.perspective)==null?void 0:f.zoom)!==void 0&&(s.perspective.zoom=m.perspective.zoom),m.isUpVectorFlipped!==void 0&&(s.isUpVectorFlipped=m.isUpVectorFlipped),m.targetOffset!==void 0&&(s.targetOffset=m.targetOffset)}else if(o.type==="Mesh")"geometry"in a&&Object.assign(s,{geometry:uz.merge(s.geometry,a.geometry)}),(a.material||a.materials)&&(s=r(s,a)),s.cloner&&"cloner"in a&&Object.assign(s,{cloner:bf.merge(s.cloner,a.cloner)});else if(o.type==="Empty")s.cloner&&"cloner"in a&&Object.assign(s,{cloner:bf.merge(s.cloner,a.cloner)});else if(nz.is(o.type)){let m=a;m.intensity!==void 0&&(s.intensity=m.intensity),m.color!==void 0&&(typeof m.color=="string"?s.color=m.color:s.color=Ta.clone(m.color))}return s}e.patch=i})(dm||(dm={}));var IP;(e=>e.defaultData={enablePan:!0,enableZoom:!0,enableRotate:!0,enableDamping:!0,rotationLimitsMode:0,rotationVerticalOffset:{min:Math.PI/4,max:Math.PI/4},rotationHorizontalOffset:{min:Math.PI/4,max:Math.PI/4},rotationSoftLimit:2,panLimitsMode:0,panVerticalOffset:{min:250,max:250},panHorizontalOffset:{min:250,max:250},panSoftLimit:2,zoomLimitsEnabled:!1,zoomLimits:{min:.1,max:2},autoRotate:!1,autoRotateSpeed:2,autoRotateClockwise:!0,hoverRotatePanMode:0,hoverRotatePanStrength:20,hoverRotateDamping:.125,isTouchZoom:!0,orbitTouches:2,panTouches:3,resetHoverEffectOnPointerLeave:!0})(IP||(IP={}));var Om;(e=>e.defaultData={orbitControls:IP.defaultData,playPage:A1,withBackground:!0,preventScroll:!1,preventTouchScroll:!1,hideCursor:!1,mouseEventTarget:"canvas",joystickSizeAndXYOffset:Array(12).fill(0).map((t,r)=>{let n=0,i=0;return r<5?i=-30:r<10&&(i=30),r===0||r===10||r===5?n=30:(r===4||r===11||r===9)&&(n=-30),[120,[n,i],"show"]}),settings:{image:{format:"jpg",ratio:1},video:{format:"mp4",imageFormat:"jpg",fps:30,mbps:80,ratio:Math.max(1,typeof window<"u"?Math.floor(window.devicePixelRatio):1),stopMode:"manual",duration:5e3},web:{logo:!0,compress:!0,preset:1,preload:!0,hint:!1}},stopRaycast:!0,hdTransmission:!1})(Om||(Om={}));var bz;(e=>e.defaultData={id:"basic",label:"Basic",style:"None",prompt:""})(bz||(bz={}));var xz;(e=>e.defaultData={weather:0,shadows:0,lightOrigin:0,temperature:0,sun:0,camera:0,environment:0,particles:0,nature:0,floor:0})(xz||(xz={}));var gy;(e=>(e.defaultData=()=>({mode:"line-art-both",prompt:"",negativePrompt:"",style:{...bz.defaultData},isRandomSeed:!0,seed:e.generateSeed(),guessMode:!1,advanced:!1,steps:20,guidanceScale:7.5,controlNetScale:1,modifiers:xz.defaultData}),e.generateSeed=()=>Math.round(Math.random()*1e5)))(gy||(gy={}));var aS;(e=>{function t(n){return n.find(i=>i.data.type==="Page"&&i.data.globalPhysics.usePhysics)!==void 0}e.physicsEnabled=t;function r(n,i,o){n.scene.objects.traverseFrom(i,(a,s)=>{var l;if(s.type==="Instance"){let u=(l=LP.getComponentData(n,s.component))==null?void 0:l.data;u&&o(a,s,u.events)}else o(a,s,s.events)})}e.traverseModuleInstances=r})(aS||(aS={}));var vy;(e=>{e.TRASH_CAN_ID="830a2708-8ed9-49cf-a68e-085299892222";function t(i={withLight:!0,withSquare:!0}){let o=[],a=yz.defaultMeshObject;i.withLight===!0&&o.push({fi:-1,data:vz.defaultDirectionalLightData,id:"830a2708-8ed9-49cf-a68e-085299899103",children:[]}),i.withSquare===!0&&o.push({fi:1,id:"7ba78968-2a55-48f2-b14c-5191da3e075e",data:a,children:[]});let s=new Cs;return s.push({fi:1,id:A1,data:{...T0.defaultData,name:"Scene 1"},children:o}),s}e.defaultData={objects:t(),publish:Om.defaultData,styles:gy.defaultData()},e.emptyDataWithoutPage=function(){return{objects:new Cs,publish:Om.defaultData,styles:gy.defaultData()}},e.emptyDataWithPage=function(i){return{objects:t(i),publish:Om.defaultData,styles:gy.defaultData()}};function r(i){return{...e.defaultData,objects:ph(i,Cs.prototype)}}e.withObjs=r;function n(i,o){return r([{id:i,data:o,children:[],fi:0}])}e.withObj=n})(vy||(vy={}));var E1;(e=>e.defaultData={preset:"fullscreen",allowResponsive:!1,size:[512,512],coords:[0,0],sceneScale:1,color:{r:0,g:0,b:0,a:.5}})(E1||(E1={}));var DP;(e=>e.emptyImage={data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII=",name:"empty"})(DP||(DP={}));var Ys;(e=>{function t(a){return a.textValue!==void 0}e.isTextValue=t;function r(a){return typeof a=="number"}e.isNumber=r;function n(a){return typeof a=="boolean"}e.isBoolean=n;function i(a){return t(a)?"string":n(a)?"boolean":"number"}e.typeOfVariable=i;function o(a){return e.isTextValue(a)?Array.isArray(a.textValue)?a.textValue.map(s=>s.toString().padStart(a.padding??2,"0")).join(a.deliminator??":")+(a.suffix!==void 0?" "+a.suffix:""):a.textValue.toString():e.isBoolean(a)?a?"True":"False":e.isNumber(a)?parseFloat(a.toFixed(3)).toString():a.toString()}e.getDisplayedValue=o})(Ys||(Ys={}));var wz;(e=>e.all=["images","videos","colors","audios","fonts","materials","variables"])(wz||(wz={}));var pK;(e=>e.all=[...wz.all,"components"])(pK||(pK={}));var mK;(e=>{function t(){return{images:new vr,videos:new vr,colors:new vr,audios:new vr,fonts:new vr,materials:new vr,components:new vr,variables:new vr}}e.defaultData=t})(mK||(mK={}));var O0;(e=>{function t(){return{images:new vr,videos:new vr,colors:new vr,audios:new vr,fonts:new vr,materials:new vr,components:new vr,variables:new vr}}e.defaultData=t})(O0||(O0={}));var vu;(e=>{function t(){let a={};return a["89b10010-844c-11ec-a8a3-0242ac120002"]={r:.5,g:.5,b:.5,a:1,name:"Default Color"},ph(a,vr.prototype)}e.defaultColors=t;function r(a){let s={};return a!=null&&a.withAITexture&&(s["a1b10010-844c-a8a3-11ec-0242ac2011ec"]={...DP.emptyImage,name:"AI generated image"}),ph(s,vr.prototype)}e.defaultImages=r;function n(){return{catelogs:new vr,materials:new vr,images:new vr,videos:new vr,colors:new vr,audios:new vr,fonts:new vr,variables:new $t,lib:O0.defaultData()}}e.emptyData=n;function i(a){switch(a){case"number":return{value:0,name:"Number"};case"boolean":return{value:!1,name:"Boolean"};case"string":return{value:{textValue:"String value"},name:"String"};case"time":let s=[0,0,0];return{name:"Time",value:{textValue:s,deliminator:":",padding:2,suffix:"AM"},dynamicVariableType:"time",format:"HH:mm:ss",format12h24h:"12ampm",timeZone:null,hasEnd:!1,endValue:{textValue:s,deliminator:":",padding:2,suffix:"AM"},autoStart:!0,repeat:!1};case"counter":return{name:"Counter",value:0,dynamicVariableType:"counter",updateInterval:1e3,increment:1,autoStart:!0,hasEnd:!0,endValue:60,repeat:!0,randomStart:!1,range:[0,100],decimals:0};case"random":return{name:"Random",value:0,dynamicVariableType:"random",updateInterval:1e3,increment:1,autoStart:!0,isStatic:!1,hasEnd:!0,endValue:60,repeat:!0,min:0,max:100,decimals:0};default:console.error("Unknown variable type",a)}}e.defaultVariables=i;function o(a,s){if(s.format==="HH:mm:ss"){let l=Math.floor(a/3600),u=Math.floor((a-l*3600)/60),d=Math.round(a-l*3600-u*60);return{textValue:[l,u,d]}}else if(s.format==="mm:ss"){let l=Math.floor(a/60),u=Math.round(a-l*60);return{textValue:[l,u]}}else return s.format==="number"?a=Math.round(a):a=Math.round(a*1e3)/1e3,a}e.getFormattedTimerTime=o})(vu||(vu={}));var RP;(e=>e.list=["idle","move","jump","run"])(RP||(RP={}));var kP;(e=>(e.defaultColliderData={type:"capsule",height:200,radius:50,position:[0,0,0],rotation:[0,0,0]},e.defaultDataThirdPerson={moveMode:"walk",forwardDirection:"+z",speedTranslate:1e3,speedRotate:100,runMultiplier:2,rotationMode:"normal",rotBy:"keys",rotByTouch:"drag",delayPos:[.3,.3],delayRot:[.3,.3],keyAssignments:[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX",""],["rotPosY",""],["rotNegX",""],["rotNegY",""],["jump","Space"],["run",""],["none","Ctrl"]],touchControl:!0,joystickPosLoc:5,joystickRotLoc:11,jumpTouchButtonLoc:9,collider:e.defaultColliderData,colliderHelperVisible:!0,collisionEnabled:!0,jumpPower:100,resetYPosition:3e3,alignToGround:!1,autoOrientMove:!0,orientWith:"camera",orientMode:"radial",delayPosCamera:.3,delayRotCamera:.3,camera:"",cameraXAxis:"Limit",cameraYAxis:"Free",cameraRotXLimits:[0,Math.PI/2],cameraRotYLimits:[-Math.PI/2,Math.PI/2],gameActions:{idle:new $t,move:new $t,jump:new $t,run:new $t},navmesh:{enabled:!1,ch:6,cs:6,walkableClimb:5,walkableHeight:1,walkableRadius:0,zones:"all",objects:[],helperVisible:!0,destinationHelperRadius:0,destinationHelperColor:Cu.fromHexAndA(3728051,1)}}))(kP||(kP={}));function gK(e){e.layers.forEach(t=>{if(t.type==="depth"&&t.colorA!==void 0){let r=t.colorA,n=t.colorB,i=[[r.r,r.g,r.b,r.a],[n.r,n.g,n.b,n.a]],o=[0,1];for(let s=2;s<10;s++)i.push(i[1]),o.push(1);let a={...Zd(Yi(t),"type","visible","isVector","isWorldSpace","origin","alpha","mode"),near:Math.max(0,t.near),far:Math.max(0,t.far),colors:i,steps:o,num:2,direction:[1,0,0],smooth:!1,gradientType:1};Object.assign(t,a)}else if(t.type==="depth"&&t.gradientType===1&&(t.near<0||t.far<0)){let r={...Yi(t),near:Math.max(t.near,0),far:Math.max(t.far,0)};Object.assign(t,r)}})}function nf(e,t){Object.values(e.shared.materials).forEach(r=>t(r))}function of(e,t){e.scene.objects.traverse((r,n)=>{"materials"in n?n.materials.forEach((i,o)=>{i===void 0&&(n.materials[o]=da.defaultData(),i=n.materials[o]),typeof i!="string"&&t(i)}):"material"in n?typeof n.material!="string"&&(n.material===void 0&&(n.material=da.defaultData()),t(n.material)):n.type==="Mesh"&&(n.material===void 0&&(n.material=da.defaultData()),t(n.material)),"overrides"in n&&Object.values(n.overrides).forEach(i=>{i.material&&typeof i.material!="string"&&t(i.material)})})}function kvt(e){Object.assign(e.scene.publish,{orbitControls:{...IP.defaultData,...Yi(e.scene.publish.orbitControls)}})}function Lvt(e){Object.assign(e.scene.publish.settings,{video:{...Om.defaultData.settings.video,...Yi(e.scene.publish.settings.video)}})}function Nvt(e){function t(r){if(r.layers){for(let n of Object.values(r.layers))if(n){for(let[i,o]of Object.entries(n))if((fle.includes(i)||typeof o=="boolean")&&delete n[i],i==="texture")for(let[a,s]of Object.entries(o))(Rvt.includes(a)||typeof s=="boolean")&&delete o[a]}}}e.scene.objects.traverse((r,n)=>{n.states.forEach(i=>{let o=i;o.material?t(o.material):o.materials&&o.materials.forEach(a=>{t(a)})})})}function zvt(e){e.scene.publish.withBackground=!0}function Bvt(e){e.scene.publish.settings.web={compress:!0,preload:!0,preset:1,logo:!0,hint:!1}}function Fvt(e){e.scene.objects.traverse((t,r)=>{let n=r.cloner;n&&(n.radial.scale=n.radial.scale.map(i=>i+1),n.linear.scale=n.linear.scale.map(i=>i+1))})}function jvt(e){e.scene.objects.traverse((t,r)=>{let n=r.geometry;n&&(n.type==="DodecahedronGeometry"||n.type==="IcosahedronGeometry")&&(n.detail=Math.round(n.detail))})}function Uvt(e){e.scene.objects.traverse((t,r)=>{let n=e.scene.objects.unproxy().parent(t);if(n){let i=Yi(e.scene.objects.data(n));i&&i.type==="Mesh"&&i.geometry.type==="BooleanGeometry"&&r.type==="Mesh"&&(r.visible=Yi(r).booleanExclude!==!0)}})}function $vt(e){e.scene.objects.traverse((t,r)=>{if(r.type==="Mesh"){let n=r;r.geometry.type==="NonParametricGeometry"?n.material!==void 0&&delete n.material:n.materials!==void 0&&delete n.materials}})}function Vvt(e){function t(n){Object.setPrototypeOf(n,ho.prototype),n.texture&&Object.setPrototypeOf(n.texture,ho.prototype)}function r(n){Object.setPrototypeOf(n,ho.prototype);for(let i in n)t(n[i])}e.scene.objects.traverse((n,i)=>{i.states.forEach(o=>{let a=o;if(a.material){let s=Yi(a.material).layers;r(s),a.material.layers=s}if(a.materials)for(let s=0;s<a.materials.length;s++){let l=a.materials[s],u=Yi(l).layers;r(u),l.layers=u}})})}function vK(e){e.layers===void 0&&Object.assign(e,da.defaultTwoLayerData("lambert"))}function dR(e){!e.layers||e.layers.forEach(t=>{if(t.type==="depth"&&t.colors.length===10){let r=[...t.colors];r.push(t.colors[9]);let n=[...t.steps];n.push(t.steps[9]);let i={...Yi(t),colors:r,steps:n};Object.assign(t,i)}})}function Hvt(e){e.scene.objects.traverse((t,r)=>{r.type==="Mesh"&&(r.geometry.type==="BooleanGeometry"||r.geometry.type==="SubdivGeometry")&&(r.geometry.phongAngle=35)})}function yK(e){e.scene.objects.traverse((t,r)=>{"materials"in r?r.materials.forEach(n=>{typeof n!="string"&&dR(n)}):"material"in r&&typeof r.material!="string"&&dR(r.material)}),Object.values(e.shared.materials).forEach(t=>dR(t))}function Gvt(e){e.scene.environment.ambientLight.softShadows=!1,e.scene.environment.ambientLight.softShadowQuality="low",e.scene.objects.traverse((t,r)=>{(r.type==="DirectionalLight"||r.type==="SpotLight")&&(r.shadowResolution=1024,r.shadowRadius=1,r.depth=1e5)}),e.shared.penumbraSize=new Array(5).fill(.5)}function Wvt(e){e.shared.audios=ph({},vr.prototype)}function qvt(e){e.shared.videos=ph({},vr.prototype)}function Kvt(e){let t=e.shared.materials;Object.entries(t).forEach(([r,n])=>{if(!n.layers){let i={name:"Untitled Material",layers:[{fi:0,data:{type:"light",category:"phong",alpha:.6,visible:!0,mode:0,specular:{r:.2,g:.2,b:.2},shininess:5},id:"layer1"},{fi:1,data:{type:"color",alpha:1,visible:!0,mode:0,color:{r:.2823529411764706,g:.2823529411764706,b:.30196078431372547}},id:"layer2"}]};Object.assign(t,{[r]:i})}})}function Xvt(e){Object.entries(Yi(e.shared.images)).filter(t=>t[1].asset===!1).map(t=>t[0]).forEach(t=>{delete e.shared.images[t]}),Object.entries(Yi(e.shared.audios)).filter(t=>t[1].asset===!1).map(t=>t[0]).forEach(t=>{delete e.shared.audios[t]})}function Yvt(e){e.scene.publish.settings.web.preload=!1}function bK(e){e.layers&&e.layers.forEach(t=>{t.type==="depth"&&t.num!==void 0&&(t.colors=t.colors.slice(0,t.num),t.steps=t.steps.slice(0,t.num),delete t.num)})}function xK(e){e.layers&&e.layers.forEach(t=>{Dvt(t)&&t.isMask===void 0&&(t.isMask=!1),(t.type==="texture"||t.type==="video")&&t.blending===void 0&&(t.blending=0),(t.type==="noise"||t.type==="displace"&&t.displacementType==="noise")&&(t.voronoiStyle===void 0&&(t.voronoiStyle=0),t.highCut===void 0&&(t.highCut=1),t.lowCut===void 0&&(t.lowCut=0),t.smoothness===void 0&&(t.smoothness=.3),t.seed===void 0&&(t.seed=0),t.quality===void 0&&(t.quality=1))})}function Qvt(e){e.shared.fonts=ph({},vr.prototype)}function Zvt(e){return e.replace(".typeface","").replace(/optimer/gi,"open sans").replace("space_mono","space mono").replace(/alma_mono/gi,"varela round").replace(/droid_sans_mono/gi,"noto sans mono").replace(/droid_sans|gentilis|gnomon_(simple|foreground)|helvetiker/gi,"roboto").replace(/droid_serif/gi,"roboto slab").replace("_sans"," sans").replace("crimson_text","crimson text").replace("medium_medium","medium").replace("fatface_fatface","fatface").replace("100hairline","thin").replace("200thin","extralight").replace("300light","light").replace("500medium","medium").replace("600semi","semibold").replace("800heavy","extrabold").replace("900black","black").replace(/bodoni_(11|16|24|36|48|72|96)([^_])/gi,"bodoni_$1_$2").replace(/bodoni_(11|16|24|36|48|72|96)/gi,"bodoni moda").replace(/(thin|hairline)(_regular)?/gi,"100").replace(/(extra|ultra)light(_regular)?/gi,"200").replace(/light(_regular)?/gi,"300").replace(/_book|_normal|_roman/gi,"_regular").replace(/medium(_regular)?/gi,"500").replace(/(semi|demi)bold(_regular)?/gi,"600").replace(/(extra|ultra)bold(_regular)?/gi,"800").replace(/bold(_regular)?/gi,"700").replace(/(black|heavy|fatface)(_regular)?/gi,"900").replace(/([1-9]00)_italic/gi,"$1italic").replace(/regularitalic/gi,"italic").replace(/regularitalic/gi,"italic").split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function Jvt(e){let t=[];e.scene.objects.traverse((r,n)=>{let i=n;if(i.type==="TextFrame"){let o=da.defaultTwoLayerData("phong"),a=typeof i.color=="string"?e.shared.colors[i.color]:i.color;o.layers[1].data.color={r:a.r,g:a.g,b:a.b},o.layers[1].data.alpha=i.alpha;let s=Zvt(i.font);e.shared.fonts[s]===void 0&&(e.shared.fonts[s]={name:s});let l={name:i.name,...Ga.defaultData,...my.defaultData,flatShading:!1,wireframe:!1,geometry:{...py.defaultData("TextGeometry"),width:i.width,height:i.height,font:s,depth:0,horizontalAlign:i.horizontalAlign,verticalAlign:i.verticalAlign,fontSize:i.fontSize*1.40625,lineHeight:i.lineHeight/1.40625,letterSpacing:i.letterSpacing-1,text:i.text,textTransform:i.textTransform,extrudeBevelSize:0,extrudeBevelSegments:1},material:o,states:Yi(i.states),events:Yi(i.events),visible:i.visible,raycastLock:i.raycastLock,position:i.position,rotation:i.rotation,scale:i.scale,hiddenMatrix:i.hiddenMatrix},u=Yi(e.scene.objects).parent(r);e.scene.objects.insertAfter(u??null,r,[{id:r+"new",data:l,children:[]}]),t.push(r)}}),t.forEach(r=>{e.scene.objects.delete(r)})}function eyt(e){let t={0:"MouseDown",1:"MouseUp",2:"MouseHover",5:"KeyDown",6:"KeyUp",7:"Start",9:"LookAt",10:"Follow",11:"Scroll",12:"Audio",13:"GameControl"};e.scene.objects.traverse((r,n)=>{n.events.forEach(i=>{if(t[Number(i.type)])if(Object.assign(i,{type:t[Number(i.type)]}),i.type==="Audio"&&"audioEvent"in i&&(Object.assign(i,{playAudio:i.audioEvent}),delete i.audioEvent),i.type==="GameControl")Object.assign(i,{gameActions:{idle:new $t,move:new $t,jump:new $t}});else{let o=new $t;Object.assign(i,{actions:o}),(i.type==="MouseDown"||i.type==="MouseUp"||i.type==="KeyDown"||i.type==="KeyUp")&&"url"in i&&o.push({fi:0,id:Et.generateUUID(),data:{type:"Link",url:i.url,delay:0}}),"targets"in i&&(i.targets.forEach((a,s,l)=>{let u={state:void 0,repeat:0,delay:0,delayDirection:void 0,direction:"normal",duration:0,easing:4},d={easing:a.easing,duration:a.duration};a.easing===6?Object.assign(d,Zd(a,"mass","stiffness","damping","velocity")):a.easing===5&&Object.assign(d,{control1:{...a.control1},control2:{...a.control2}});let c={repeat:a.repeat?-1:0,delay:a.delay,delayDirection:a.delayDirection,direction:a.cycle&&a.rewind?"pingpong-rewind":a.cycle?"pingpong":"normal"},h={state:a.state,...c,...d},f={allowSlerp:!0,type:"Transition",object:a.object,repeat:0,delay:0,delayDirection:void 0,direction:"normal",tweens:new $t({fi:0,id:Et.generateUUID(),data:u},{fi:1,id:Et.generateUUID(),data:h})};o.push({fi:l,id:s,data:f})}),delete i.targets)}})})}function tyt(e){e.scene.objects.traverse((t,r)=>{function n(i,o){var l;let a=new $t,s=[];if(r.events.forEach((u,d,c)=>{if(u.type==="Audio"&&u.trigger===o){let h;s.push(d),u.interaction==="play"?h={...Zd(u,"interaction","audio","delay","volume","loop"),triggerAfter:"after"in u?u.after:void 0,toggle:"after"in u?u.toggle:void 0,type:"Audio"}:(u.interaction==="pause"||u.interaction==="stop")&&(h={...Zd(u,"interaction","delay","object","playAudio"),type:"Audio"}),h&&a.push({fi:c,id:d,data:h})}}),s.forEach(u=>r.events.delete(u)),a.length){let u=(l=r.events.find(d=>d.type===i))==null?void 0:l.data;u?"actions"in u&&u.actions.insertBefore(null,a):r.events.insertBefore(null,[{id:Et.generateUUID(),data:{type:i,actions:a}}])}}n("Start","start"),n("MouseDown","mouseDown"),n("MouseUp","mouseUp"),n("KeyDown","keyDown"),n("KeyUp","keyUp")})}function wK(e){var r;let t=(r=e.layers.find(n=>n.type==="light"))==null?void 0:r.data;if((t==null?void 0:t.category)==="basic"){let n=as.defaultData("light","phong"),i=t;Object.assign(i,n),i.visible=!1}}function SK(e){nf(e,wK),of(e,wK)}function ryt(e){e.scene.objects.traverse((t,r)=>{r.type==="Mesh"&&r.geometry.type==="SubdivGeometry"&&(r.geometry.scaleBaked||(r.geometry.scaleBaked=[1,1,1]))})}function nyt(e){e.scene.objects.traverse((t,r)=>{(r.type==="Empty"||r.type==="Mesh")&&r.cloner&&!r.cloner.randomnessObject&&!r.cloner.toObject&&!r.cloner.randomness&&(r.cloner={...r.cloner,toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}})})}function iyt(e){e.scene.objects.traverse((t,r)=>{r.type==="Mesh"&&r.geometry.type==="NonParametricGeometry"&&!("material"in r)&&!("materials"in r)&&(r.material=da.defaultTwoLayerData("phong"))})}function oyt(e){e.scene.publish.orbitControls.autoZoom===void 0&&(e.scene.publish.orbitControls.autoZoom=!1),e.scene.objects.traverse((t,r)=>{(r.type==="OrthographicCamera"||r.type==="PerspectiveCamera")&&(r.orthographic.autoZoom===void 0&&(r.orthographic.autoZoom=!1),r.orthographic.autoZoomFrustumSize===void 0&&(r.orthographic.autoZoomFrustumSize=790))})}function ayt(e){e.scene.objects.traverse((t,r)=>{r.pathSnapping===void 0&&(r.pathSnapping={pathId:null,slide:0,offset:0,orientation:"tangential"}),r.pathSnapping.offset===void 0&&(r.pathSnapping.offset=0)})}function syt(e){e.scene.publish.mouseEventTarget===void 0&&(e.scene.publish.mouseEventTarget="canvas"),e.scene.publish.settings.web.hint===void 0&&(e.scene.publish.settings.web.hint=!1)}function lyt(e){let{video:t}=e.scene.publish.settings;t.format==="gif"&&t.fps>48&&(t.fps=15)}function uyt(e){e.scene.objects.traverse((t,r)=>{r.events.forEach(n=>{n.type==="GameControl"&&(n.resetYPosition=Math.abs(n.resetYPosition-r.position[1]))})})}function cyt(e){let t=e.scene.environment.usePhysics;e.scene.objects.traverse((r,n)=>{t&&n.physics===null?n.collision=!1:n.collision="visibility"})}function dyt(e){e.scene.objects.traverse((t,r)=>{r.events.forEach(n=>{n.type==="GameControl"&&(n.navmesh=kP.defaultDataThirdPerson.navmesh)})})}function hyt(e){e.scene.styles||(e.scene.styles=gy.defaultData())}function _K(e){e.layers.forEach(t=>{t.type==="light"&&t.category!=="toon"&&t.occlusion===void 0&&(t.occlusion=!0)})}function fyt(e){e.scene.environment.ambientLight.occlusion===void 0&&(e.scene.environment.ambientLight.occlusion=!1),e.scene.environment.ambientLight.aoFullRes===void 0&&(e.scene.environment.ambientLight.aoFullRes=!1),e.scene.environment.ambientLight.radius===void 0&&(e.scene.environment.ambientLight.radius=256),e.scene.environment.ambientLight.bias===void 0&&(e.scene.environment.ambientLight.bias=.5),e.scene.environment.ambientLight.aoColor===void 0&&(e.scene.environment.ambientLight.aoColor={r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}),of(e,_K),nf(e,_K)}function pyt(e){e.scene.objects.traverse((t,r)=>{r.events.forEach(n=>{n.type==="GameControl"&&Object.assign(n.gameActions,{run:new $t})})})}function myt(e){e.scene.objects.traverse((t,r)=>{r.events.forEach(n=>{n.type==="GameControl"&&(n.keyAssignments=[...n.keyAssignments,["run",""],["none","Ctrl"]])})})}function CK(e){e.layers&&e.layers.forEach(t=>{t.type==="light"&&t.bumpMapIntensity===void 0&&(t.bumpMapIntensity=5)})}function gyt(e,t){if(t<1&&(of(e,gK),nf(e,gK),e.schema=1),t<2&&(kvt(e),e.schema=2),t<3&&(Nvt(e),e.schema=3),t<4&&(zvt(e),e.schema=4),t<5&&(Bvt(e),e.schema=5),t<6&&(Fvt(e),e.schema=6),t<7&&(jvt(e),e.schema=7),t<8&&(e.schema=8),t<9&&(yK(e),e.schema=9),t<10&&(Hvt(e),e.schema=10),t<11&&(Gvt(e),e.schema=11),t<12&&(yK(e),e.schema=12),t<13&&(Wvt(e),e.schema=13),t<14&&(Kvt(e),e.schema=14),t<15&&(Xvt(e),e.schema=15),t<16&&(Yvt(e),e.schema=16),t<17&&(of(e,bK),nf(e,bK),e.schema=17),t<18&&(of(e,vK),nf(e,vK),e.schema=18),t<19&&(Lvt(e),e.schema=19),t<20&&(Qvt(e),Jvt(e),e.schema=20),t<21&&(eyt(e),tyt(e),e.schema=21),t<22&&(SK(e),e.schema=22),t<23&&(ryt(e),e.schema=23),t<24&&(nyt(e),e.schema=24),(t<25||e.shared.videos===void 0)&&(qvt(e),t<25&&(e.schema=25)),t<26&&(Uvt(e),e.schema=26),t<27&&($vt(e),e.schema=27),t<28&&(SK(e),e.schema=28),t<29&&(Vvt(e),e.schema=29),t<30&&(iyt(e),e.schema=30),t<31&&(oyt(e),e.schema=31),t<33&&(ayt(e),e.schema=33),t<34&&(syt(e),e.schema=34),t<35&&(lyt(e),e.schema=35),t<36&&(uyt(e),e.schema=36),t<37&&(cyt(e),e.schema=37),t<38&&(of(e,xK),nf(e,xK),e.schema=38),t<39&&(dyt(e),e.schema=39),t<40&&(hyt(e),e.schema=40),t<41&&(fyt(e),e.schema=41),t<42&&(pyt(e),e.schema=42),t<43&&(myt(e),e.schema=43),t<99){of(e,CK),nf(e,CK),e.scene.publish.playCamera===null&&(e.scene.publish.playCamera=yb);let r=Yi(e.scene.objects),n=e.scene.objects;e.scene.publish.playPage=A1,n.insertBefore(null,null,[{id:A1,data:{...T0.defaultData,backgroundColor:e.scene.backgroundColor,fog:e.scene.fog,postprocessing:e.scene.postprocessing,ao:Zd(e.scene.environment.ambientLight,"occlusion","aoFullRes","radius","bias","aoColor"),publish:{playCamera:e.scene.publish.playCamera,gameControlObject:e.scene.publish.gameControlObject},shadow:Zd(e.scene.environment.ambientLight,"softShadowQuality"),globalPhysics:{...M0.defaultData,...Zd(e.scene.environment,"usePhysics","gravity")},camera:Yi(e.scene.ownerCamera)??T0.defaultData.camera,name:"Scene"},children:[]}]);for(let a of r)a.id!==vy.TRASH_CAN_ID&&n.move(A1,a.fi,a.id);let i=0,o=0;e.shared.penumbraSize&&e.scene.objects.traverse((a,s)=>{s.type==="DirectionalLight"?(s.penumbraSize=e.shared.penumbraSize[Math.min(i,2)],i+=1):s.type==="SpotLight"&&(s.penumbraSize=e.shared.penumbraSize[3+Math.min(o,1)],o+=1),(s.physics===void 0||s.physics===null)&&s.type!=="Instance"&&(s.physics={},Object.assign(s.physics,E0.defaultData)),s.physics!==void 0&&s.physics!==null&&(s.physics.enabled=s.collision??"visibility",delete s.collision)}),e.schema=99}}function AK(e){e.layers&&e.layers.forEach(t=>{t.type==="light"&&t.alphaOverride===void 0&&(t.alphaOverride=1)})}function vyt(e){e.scene.objects.traverse((t,r)=>{let n=r.geometry;n&&n.type==="PathGeometry"&&(n.extrusion.capType="flat",n.extrusion.bevel=50,n.extrusion.bevelSides=6,n.extrusion.shape.type==="Custom"&&(n.extrusion.shape.shapeQuality="low"))})}var yv=180/Math.PI;function EK(e){e.rotation=e.rotation.slice(0,3).map(t=>t*yv)}function vle(e){var r,n;EK(e),e.type==="Page"&&EK(e.camera),(r=e.states)==null||r.forEach(i=>{i.rotation===void 0||i.rotation===null||(i.rotation=i.rotation.slice(0,3).map(o=>o*yv))});let t=e.geometry;t&&t.type==="SphereGeometry"&&(t.thetaLength=(t.thetaLength??180)*yv),t&&t.type==="TorusGeometry"&&(t.arc=t.arc*yv),t&&t.type==="PathGeometry"&&(t.extrusion.angle*=yv,t.extrusion.twist*=yv),e.type==="Mesh"&&e.geometry.type==="TextGeometry"&&(e.geometry.text={textValue:e.geometry.text}),Array.isArray(Yi(e.events))&&((n=e.events)==null||n.forEach(i=>{(i.type==="MouseDown"||i.type==="MouseUp"||i.type==="MousePress"||i.type==="KeyDown"||i.type==="KeyUp"||i.type==="KeyPress"||i.type==="Collision"||i.type==="Trigger")&&(i.runMode=i.toggle?"Toggle":"Once")}))}function yyt(e){e.shared.variables=ph({},vr.prototype)}function byt(e){let t=Yi(e.shared.variables);e.shared.variables=ph(Object.entries(t??{}).map(([r,n],i)=>({fi:i,id:r,data:n})),$t.prototype)}var af=107;function yle(e,t){t(e.data);for(let r of e.children)yle(r,t)}function xyt(e){let t=e.schema??104;t!==af&&t<105&&(yle(e.asset,vle),e.schema=105)}function ble(e){let t=e.schema??0;if(t!==af){console.warn("updating from ",t,"to ",af),gyt(e,t),t<100&&(e.scene.publish.joystickSizeAndXYOffset===void 0&&(e.scene.publish.joystickSizeAndXYOffset=Om.defaultData.joystickSizeAndXYOffset),e.schema=100),t<101&&(of(e,AK),nf(e,AK),e.schema=101),t<102&&(vyt(e),e.schema=102),t<104&&(e.shared.catelogs=new vr,e.shared.lib=O0.defaultData(),e.schema=104),t<105&&(yyt(e),e.scene.objects.traverse((r,n)=>{vle(n)}),e.schema=105);for(let r of Object.values(e.shared.lib.components))xyt(r);t<106&&(byt(e),e.schema=106),t<107&&(e.shared.lib.variables=O0.defaultData().variables,e.schema=107)}}var LP;(e=>{e.defaultData={schema:af,scene:vy.defaultData,frames:new vr().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",E1.defaultData),shared:{...vu.emptyData(),colors:vu.defaultColors()}},e.emptyDataForImports=function(i){let o=vy.emptyDataWithPage(i);return{schema:af,scene:o,frames:new vr().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",E1.defaultData),shared:{...vu.emptyData(),colors:vu.defaultColors(),images:vu.defaultImages(i)}}},e.emptyData=function(){return{schema:af,scene:vy.emptyDataWithPage(),frames:new vr().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",E1.defaultData),shared:vu.emptyData()}},e.collabHelper={...HN,updateSchema(i){return(i.schema??0)<af?iS(i,ble):(i.schema??0)-af}};function t(i){let o=e.collabHelper.updateSchema(i);return typeof o=="number"?o===0?i:null:o.data}e.updateSchemaDirectly=t;function r(i){return{...i,shared:{...i.shared,lib:O0.defaultData()}}}e.withoutLib=r;function n(i,o){let a=i.scene.objects.get(o);if(a&&a.data.type==="Component")return a;{let s=i.shared.lib.components[o];if(s)return s.asset}}e.getComponentData=n})(LP||(LP={}));function hm(e,t=!1){let r=e[0].index!==null,n=new Set(Object.keys(e[0].attributes)),i=new Set(Object.keys(e[0].morphAttributes)),o={},a={},s=e[0].morphTargetsRelative,l=new Nt,u=0;for(let d=0;d<e.length;++d){let c=e[d],h=0;if(r!==(c.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let f in c.attributes){if(!n.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+'. All geometries must have compatible attributes; make sure "'+f+'" attribute exists among all geometries, or in none of them.'),null;o[f]===void 0&&(o[f]=[]),o[f].push(c.attributes[f]),h++}if(h!==n.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". Make sure all geometries have the same number of attributes."),null;if(s!==c.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let f in c.morphAttributes){if(!i.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+".  .morphAttributes must be consistent throughout all geometries."),null;a[f]===void 0&&(a[f]=[]),a[f].push(c.morphAttributes[f])}if(t){let f;if(r)f=c.index.count;else if(c.attributes.position!==void 0)f=c.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". The geometry must have either an index or a position attribute"),null;l.addGroup(u,f,d),u+=f}}if(r){let d=0,c=[];for(let h=0;h<e.length;++h){let f=e[h].index;for(let m=0;m<f.count;++m)c.push(f.getX(m)+d);d+=e[h].attributes.position.count}l.setIndex(c)}for(let d in o){let c=MK(o[d]);if(!c)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+d+" attribute."),null;l.setAttribute(d,c)}for(let d in a){let c=a[d][0].length;if(c===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[d]=[];for(let h=0;h<c;++h){let f=[];for(let p=0;p<a[d].length;++p)f.push(a[d][p][h]);let m=MK(f);if(!m)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+d+" morphAttribute."),null;l.morphAttributes[d].push(m)}}return l}function MK(e){let t,r,n,i=0;for(let s=0;s<e.length;++s){let l=e[s];if(l.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(t===void 0&&(t=l.array.constructor),t!==l.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(r===void 0&&(r=l.itemSize),r!==l.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(n===void 0&&(n=l.normalized),n!==l.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;i+=l.array.length}let o=new t(i),a=0;for(let s=0;s<e.length;++s)o.set(e[s].array,a),a+=e[s].array.length;return new Kt(o,r,n)}var wyt=Math.pow(2,-24),jC=class{constructor(){}};function Mc(e,t,r){return r.min.x=t[e],r.min.y=t[e+1],r.min.z=t[e+2],r.max.x=t[e+3],r.max.y=t[e+4],r.max.z=t[e+5],r}function PK(e){let t=-1,r=-1/0;for(let n=0;n<3;n++){let i=e[n+3]-e[n];i>r&&(r=i,t=n)}return t}function TK(e,t){t.set(e)}function OK(e,t,r){let n,i;for(let o=0;o<3;o++){let a=o+3;n=e[o],i=t[o],r[o]=n<i?n:i,n=e[a],i=t[a],r[a]=n>i?n:i}}function UC(e,t,r){for(let n=0;n<3;n++){let i=t[e+2*n],o=t[e+2*n+1],a=i-o,s=i+o;a<r[n]&&(r[n]=a),s>r[n+3]&&(r[n+3]=s)}}function lx(e){let t=e[3]-e[0],r=e[4]-e[1],n=e[5]-e[2];return 2*(t*r+r*n+n*t)}function Syt(e,t){if(!e.index){let r=e.attributes.position.count,n=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,i;r>65535?i=new Uint32Array(new n(4*r)):i=new Uint16Array(new n(2*r)),e.setIndex(new Kt(i,1));for(let o=0;o<r;o++)i[o]=o}}function _yt(e){if(!e.groups||!e.groups.length)return[{offset:0,count:e.index.count/3}];let t=[],r=new Set;for(let i of e.groups)r.add(i.start),r.add(i.start+i.count);let n=Array.from(r.values()).sort((i,o)=>i-o);for(let i=0;i<n.length-1;i++){let o=n[i],a=n[i+1];t.push({offset:o/3,count:(a-o)/3})}return t}function hR(e,t,r,n,i=null){let o=1/0,a=1/0,s=1/0,l=-1/0,u=-1/0,d=-1/0,c=1/0,h=1/0,f=1/0,m=-1/0,p=-1/0,g=-1/0,v=i!==null;for(let b=t*6,y=(t+r)*6;b<y;b+=6){let x=e[b+0],S=e[b+1],w=x-S,_=x+S;w<o&&(o=w),_>l&&(l=_),v&&x<c&&(c=x),v&&x>m&&(m=x);let C=e[b+2],E=e[b+3],A=C-E,M=C+E;A<a&&(a=A),M>u&&(u=M),v&&C<h&&(h=C),v&&C>p&&(p=C);let I=e[b+4],O=e[b+5],T=I-O,D=I+O;T<s&&(s=T),D>d&&(d=D),v&&I<f&&(f=I),v&&I>g&&(g=I)}n[0]=o,n[1]=a,n[2]=s,n[3]=l,n[4]=u,n[5]=d,v&&(i[0]=c,i[1]=h,i[2]=f,i[3]=m,i[4]=p,i[5]=g)}function Cyt(e,t,r,n){let i=1/0,o=1/0,a=1/0,s=-1/0,l=-1/0,u=-1/0;for(let d=t*6,c=(t+r)*6;d<c;d+=6){let h=e[d+0];h<i&&(i=h),h>s&&(s=h);let f=e[d+2];f<o&&(o=f),f>l&&(l=f);let m=e[d+4];m<a&&(a=m),m>u&&(u=m)}n[0]=i,n[1]=o,n[2]=a,n[3]=s,n[4]=l,n[5]=u}function Ayt(e,t,r,n,i){let o=r,a=r+n-1,s=i.pos,l=i.axis*2;for(;;){for(;o<=a&&t[o*6+l]<s;)o++;for(;o<=a&&t[a*6+l]>=s;)a--;if(o<a){for(let u=0;u<3;u++){let d=e[o*3+u];e[o*3+u]=e[a*3+u],e[a*3+u]=d;let c=t[o*6+u*2+0];t[o*6+u*2+0]=t[a*6+u*2+0],t[a*6+u*2+0]=c;let h=t[o*6+u*2+1];t[o*6+u*2+1]=t[a*6+u*2+1],t[a*6+u*2+1]=h}o++,a--}else return o}}var Ad=32,Eyt=(e,t)=>e.candidate-t.candidate,kh=new Array(Ad).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),$C=new Float32Array(6);function Myt(e,t,r,n,i,o){let a=-1,s=0;if(o===0)a=PK(t),a!==-1&&(s=(t[a]+t[a+3])/2);else if(o===1)a=PK(e),a!==-1&&(s=Pyt(r,n,i,a));else if(o===2){let l=lx(e),u=1.25*i,d=n*6,c=(n+i)*6;for(let h=0;h<3;h++){let f=t[h],m=(t[h+3]-f)/Ad;if(i<Ad/4){let p=[...kh];p.length=i;let g=0;for(let b=d;b<c;b+=6,g++){let y=p[g];y.candidate=r[b+2*h],y.count=0;let{bounds:x,leftCacheBounds:S,rightCacheBounds:w}=y;for(let _=0;_<3;_++)w[_]=1/0,w[_+3]=-1/0,S[_]=1/0,S[_+3]=-1/0,x[_]=1/0,x[_+3]=-1/0;UC(b,r,x)}p.sort(Eyt);let v=i;for(let b=0;b<v;b++){let y=p[b];for(;b+1<v&&p[b+1].candidate===y.candidate;)p.splice(b+1,1),v--}for(let b=d;b<c;b+=6){let y=r[b+2*h];for(let x=0;x<v;x++){let S=p[x];y>=S.candidate?UC(b,r,S.rightCacheBounds):(UC(b,r,S.leftCacheBounds),S.count++)}}for(let b=0;b<v;b++){let y=p[b],x=y.count,S=i-y.count,w=y.leftCacheBounds,_=y.rightCacheBounds,C=0;x!==0&&(C=lx(w)/l);let E=0;S!==0&&(E=lx(_)/l);let A=1+1.25*(C*x+E*S);A<u&&(a=h,u=A,s=y.candidate)}}else{for(let v=0;v<Ad;v++){let b=kh[v];b.count=0,b.candidate=f+m+v*m;let y=b.bounds;for(let x=0;x<3;x++)y[x]=1/0,y[x+3]=-1/0}for(let v=d;v<c;v+=6){let b=~~((r[v+2*h]-f)/m);b>=Ad&&(b=Ad-1);let y=kh[b];y.count++,UC(v,r,y.bounds)}let p=kh[Ad-1];TK(p.bounds,p.rightCacheBounds);for(let v=Ad-2;v>=0;v--){let b=kh[v],y=kh[v+1];OK(b.bounds,y.rightCacheBounds,b.rightCacheBounds)}let g=0;for(let v=0;v<Ad-1;v++){let b=kh[v],y=b.count,x=b.bounds,S=kh[v+1].rightCacheBounds;y!==0&&(g===0?TK(x,$C):OK(x,$C,$C)),g+=y;let w=0,_=0;g!==0&&(w=lx($C)/l);let C=i-g;C!==0&&(_=lx(S)/l);let E=1+1.25*(w*g+_*C);E<u&&(a=h,u=E,s=b.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${o} used.`);return{axis:a,pos:s}}function Pyt(e,t,r,n){let i=0;for(let o=t,a=t+r;o<a;o++)i+=e[o*6+n*2];return i/r}function Tyt(e,t){let r=e.attributes.position,n=e.index.array,i=n.length/3,o=new Float32Array(i*6),a=r.normalized,s=r.array,l=r.offset||0,u=3;r.isInterleavedBufferAttribute&&(u=r.data.stride);let d=["getX","getY","getZ"];for(let c=0;c<i;c++){let h=c*3,f=c*6,m,p,g;a?(m=n[h+0],p=n[h+1],g=n[h+2]):(m=n[h+0]*u+l,p=n[h+1]*u+l,g=n[h+2]*u+l);for(let v=0;v<3;v++){let b,y,x;a?(b=r[d[v]](m),y=r[d[v]](p),x=r[d[v]](g)):(b=s[m+v],y=s[p+v],x=s[g+v]);let S=b;y<S&&(S=y),x<S&&(S=x);let w=b;y>w&&(w=y),x>w&&(w=x);let _=(w-S)/2,C=v*2;o[f+C+0]=S+_,o[f+C+1]=_+(Math.abs(S)+_)*wyt,S<t[v]&&(t[v]=S),w>t[v+3]&&(t[v+3]=w)}}return o}function Oyt(e,t){function r(v){h&&h(v/f)}function n(v,b,y,x=null,S=0){if(!m&&S>=l&&(m=!0,u&&(console.warn(`MeshBVH: Max depth of ${l} reached when generating BVH. Consider increasing maxDepth.`),console.warn(e))),y<=d||S>=l)return r(b+y),v.offset=b,v.count=y,v;let w=Myt(v.boundingData,x,a,b,y,c);if(w.axis===-1)return r(b+y),v.offset=b,v.count=y,v;let _=Ayt(s,a,b,y,w);if(_===b||_===b+y)r(b+y),v.offset=b,v.count=y;else{v.splitAxis=w.axis;let C=new jC,E=b,A=_-b;v.left=C,C.boundingData=new Float32Array(6),hR(a,E,A,C.boundingData,o),n(C,E,A,o,S+1);let M=new jC,I=_,O=y-A;v.right=M,M.boundingData=new Float32Array(6),hR(a,I,O,M.boundingData,o),n(M,I,O,o,S+1)}return v}Syt(e,t);let i=new Float32Array(6),o=new Float32Array(6),a=Tyt(e,i),s=e.index.array,l=t.maxDepth,u=t.verbose,d=t.maxLeafTris,c=t.strategy,h=t.onProgress,f=e.index.count/3,m=!1,p=[],g=_yt(e);if(g.length===1){let v=g[0],b=new jC;b.boundingData=i,Cyt(a,v.offset,v.count,o),n(b,v.offset,v.count,o),p.push(b)}else for(let v of g){let b=new jC;b.boundingData=new Float32Array(6),hR(a,v.offset,v.count,b.boundingData,o),n(b,v.offset,v.count,o),p.push(b)}return p}function Iyt(e,t){let r=Oyt(e,t),n,i,o,a=[],s=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let d=0;d<r.length;d++){let c=r[d],h=l(c),f=new s(32*h);n=new Float32Array(f),i=new Uint32Array(f),o=new Uint16Array(f),u(0,c),a.push(f)}return a;function l(d){return d.count?1:1+l(d.left)+l(d.right)}function u(d,c){let h=d/4,f=d/2,m=!!c.count,p=c.boundingData;for(let g=0;g<6;g++)n[h+g]=p[g];if(m){let g=c.offset,v=c.count;return i[h+6]=g,o[f+14]=v,o[f+15]=65535,d+32}else{let g=c.left,v=c.right,b=c.splitAxis,y;if(y=u(d+32,g),y/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return i[h+6]=y/4,y=u(y,v),i[h+7]=b,y}}}var mh=class{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let r=1/0,n=-1/0;for(let i=0,o=e.length;i<o;i++){let a=e[i][t];r=a<r?a:r,n=a>n?a:n}this.min=r,this.max=n}setFromPoints(e,t){let r=1/0,n=-1/0;for(let i=0,o=t.length;i<o;i++){let a=t[i],s=e.dot(a);r=s<r?s:r,n=s>n?s:n}this.min=r,this.max=n}isSeparated(e){return this.min>e.max||e.min>this.max}};mh.prototype.setFromBox=function(){let e=new F;return function(t,r){let n=r.min,i=r.max,o=1/0,a=-1/0;for(let s=0;s<=1;s++)for(let l=0;l<=1;l++)for(let u=0;u<=1;u++){e.x=n.x*s+i.x*(1-s),e.y=n.y*l+i.y*(1-l),e.z=n.z*u+i.z*(1-u);let d=t.dot(e);o=Math.min(d,o),a=Math.max(d,a)}this.min=o,this.max=a}}();var Dyt=function(){let e=new F,t=new F,r=new F;return function(n,i,o){let a=n.start,s=e,l=i.start,u=t;r.subVectors(a,l),e.subVectors(n.end,n.start),t.subVectors(i.end,i.start);let d=r.dot(u),c=u.dot(s),h=u.dot(u),f=r.dot(s),m=s.dot(s)*h-c*c,p,g;m!==0?p=(d*c-f*h)/m:p=0,g=(d+p*c)/h,o.x=p,o.y=g}}(),CU=function(){let e=new ue,t=new F,r=new F;return function(n,i,o,a){Dyt(n,i,e);let s=e.x,l=e.y;if(s>=0&&s<=1&&l>=0&&l<=1){n.at(s,o),i.at(l,a);return}else if(s>=0&&s<=1){l<0?i.at(0,a):i.at(1,a),n.closestPointToPoint(a,!0,o);return}else if(l>=0&&l<=1){s<0?n.at(0,o):n.at(1,o),i.closestPointToPoint(o,!0,a);return}else{let u;s<0?u=n.start:u=n.end;let d;l<0?d=i.start:d=i.end;let c=t,h=r;if(n.closestPointToPoint(d,!0,t),i.closestPointToPoint(u,!0,r),c.distanceToSquared(d)<=h.distanceToSquared(u)){o.copy(c),a.copy(d);return}else{o.copy(u),a.copy(h);return}}}}(),Ryt=function(){let e=new F,t=new F,r=new Hs,n=new Vl;return function(i,o){let{radius:a,center:s}=i,{a:l,b:u,c:d}=o;if(n.start=l,n.end=u,n.closestPointToPoint(s,!0,e).distanceTo(s)<=a||(n.start=l,n.end=d,n.closestPointToPoint(s,!0,e).distanceTo(s)<=a)||(n.start=u,n.end=d,n.closestPointToPoint(s,!0,e).distanceTo(s)<=a))return!0;let c=o.getPlane(r);if(Math.abs(c.distanceToPoint(s))<=a){let h=c.projectPoint(s,t);if(o.containsPoint(h))return!0}return!1}}(),kyt=1e-15;function Kg(e){return Math.abs(e)<kyt}var gh=class extends aa{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new F),this.satBounds=new Array(4).fill().map(()=>new mh),this.points=[this.a,this.b,this.c],this.sphere=new Ps,this.plane=new Hs,this.needsUpdate=!0}intersectsSphere(e){return Ryt(e,this)}update(){let e=this.a,t=this.b,r=this.c,n=this.points,i=this.satAxes,o=this.satBounds,a=i[0],s=o[0];this.getNormal(a),s.setFromPoints(a,n);let l=i[1],u=o[1];l.subVectors(e,t),u.setFromPoints(l,n);let d=i[2],c=o[2];d.subVectors(t,r),c.setFromPoints(d,n);let h=i[3],f=o[3];h.subVectors(r,e),f.setFromPoints(h,n),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(a,e),this.needsUpdate=!1}};gh.prototype.closestPointToSegment=function(){let e=new F,t=new F,r=new Vl;return function(n,i=null,o=null){let{start:a,end:s}=n,l=this.points,u,d=1/0;for(let c=0;c<3;c++){let h=(c+1)%3;r.start.copy(l[c]),r.end.copy(l[h]),CU(r,n,e,t),u=e.distanceToSquared(t),u<d&&(d=u,i&&i.copy(e),o&&o.copy(t))}return this.closestPointToPoint(a,e),u=a.distanceToSquared(e),u<d&&(d=u,i&&i.copy(e),o&&o.copy(a)),this.closestPointToPoint(s,e),u=s.distanceToSquared(e),u<d&&(d=u,i&&i.copy(e),o&&o.copy(s)),Math.sqrt(d)}}();gh.prototype.intersectsTriangle=function(){let e=new gh,t=new Array(3),r=new Array(3),n=new mh,i=new mh,o=new F,a=new F,s=new F,l=new F,u=new Vl,d=new Vl,c=new Vl;return function(h,f=null,m=!1){this.needsUpdate&&this.update(),h.isExtendedTriangle?h.needsUpdate&&h.update():(e.copy(h),e.update(),h=e);let p=this.plane,g=h.plane;if(Math.abs(p.normal.dot(g.normal))>1-1e-10){let v=this.satBounds,b=this.satAxes;r[0]=h.a,r[1]=h.b,r[2]=h.c;for(let S=0;S<4;S++){let w=v[S],_=b[S];if(n.setFromPoints(_,r),w.isSeparated(n))return!1}let y=h.satBounds,x=h.satAxes;t[0]=this.a,t[1]=this.b,t[2]=this.c;for(let S=0;S<4;S++){let w=y[S],_=x[S];if(n.setFromPoints(_,t),w.isSeparated(n))return!1}for(let S=0;S<4;S++){let w=b[S];for(let _=0;_<4;_++){let C=x[_];if(o.crossVectors(w,C),n.setFromPoints(o,t),i.setFromPoints(o,r),n.isSeparated(i))return!1}}return f&&(m||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),f.start.set(0,0,0),f.end.set(0,0,0)),!0}else{let v=this.points,b=!1,y=0;for(let O=0;O<3;O++){let T=v[O],D=v[(O+1)%3];u.start.copy(T),u.end.copy(D),u.delta(a);let N=b?d.start:d.end,k=Kg(g.distanceToPoint(T));if(Kg(g.normal.dot(a))&&k){d.copy(u),y=2;break}if((g.intersectLine(u,N)||k)&&!Kg(N.distanceTo(D))){if(y++,b)break;b=!0}}if(y===1&&h.containsPoint(d.end))return f&&(f.start.copy(d.end),f.end.copy(d.end)),!0;if(y!==2)return!1;let x=h.points,S=!1,w=0;for(let O=0;O<3;O++){let T=x[O],D=x[(O+1)%3];u.start.copy(T),u.end.copy(D),u.delta(s);let N=S?c.start:c.end,k=Kg(p.distanceToPoint(T));if(Kg(p.normal.dot(s))&&k){c.copy(u),w=2;break}if((p.intersectLine(u,N)||k)&&!Kg(N.distanceTo(D))){if(w++,S)break;S=!0}}if(w===1&&this.containsPoint(c.end))return f&&(f.start.copy(c.end),f.end.copy(c.end)),!0;if(w!==2)return!1;if(d.delta(a),c.delta(s),a.dot(s)<0){let O=c.start;c.start=c.end,c.end=O}let _=d.start.dot(a),C=d.end.dot(a),E=c.start.dot(a),A=c.end.dot(a),M=C<E,I=_<A;return _!==A&&E!==C&&M===I?!1:(f&&(l.subVectors(d.start,c.start),l.dot(a)>0?f.start.copy(d.start):f.start.copy(c.start),l.subVectors(d.end,c.end),l.dot(a)<0?f.end.copy(d.end):f.end.copy(c.end)),!0)}}}();gh.prototype.distanceToPoint=function(){let e=new F;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}();gh.prototype.distanceToTriangle=function(){let e=new F,t=new F,r=["a","b","c"],n=new Vl,i=new Vl;return function(o,a=null,s=null){let l=a||s?n:null;if(this.intersectsTriangle(o,l))return(a||s)&&(a&&l.getCenter(a),s&&l.getCenter(s)),0;let u=1/0;for(let d=0;d<3;d++){let c,h=r[d],f=o[h];this.closestPointToPoint(f,e),c=f.distanceToSquared(e),c<u&&(u=c,a&&a.copy(e),s&&s.copy(f));let m=this[h];o.closestPointToPoint(m,e),c=m.distanceToSquared(e),c<u&&(u=c,a&&a.copy(m),s&&s.copy(e))}for(let d=0;d<3;d++){let c=r[d],h=r[(d+1)%3];n.set(this[c],this[h]);for(let f=0;f<3;f++){let m=r[f],p=r[(f+1)%3];i.set(o[m],o[p]),CU(n,i,e,t);let g=e.distanceToSquared(t);g<u&&(u=g,a&&a.copy(e),s&&s.copy(t))}}return Math.sqrt(u)}}();var td=class{constructor(e,t,r){this.isOrientedBox=!0,this.min=new F,this.max=new F,this.matrix=new qe,this.invMatrix=new qe,this.points=new Array(8).fill().map(()=>new F),this.satAxes=new Array(3).fill().map(()=>new F),this.satBounds=new Array(3).fill().map(()=>new mh),this.alignedSatBounds=new Array(3).fill().map(()=>new mh),this.needsUpdate=!1,e&&this.min.copy(e),t&&this.max.copy(t),r&&this.matrix.copy(r)}set(e,t,r){this.min.copy(e),this.max.copy(t),this.matrix.copy(r),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}};td.prototype.update=function(){return function(){let e=this.matrix,t=this.min,r=this.max,n=this.points;for(let l=0;l<=1;l++)for(let u=0;u<=1;u++)for(let d=0;d<=1;d++){let c=1*l|2*u|4*d,h=n[c];h.x=l?r.x:t.x,h.y=u?r.y:t.y,h.z=d?r.z:t.z,h.applyMatrix4(e)}let i=this.satBounds,o=this.satAxes,a=n[0];for(let l=0;l<3;l++){let u=o[l],d=i[l],c=1<<l,h=n[c];u.subVectors(a,h),d.setFromPoints(u,n)}let s=this.alignedSatBounds;s[0].setFromPointsField(n,"x"),s[1].setFromPointsField(n,"y"),s[2].setFromPointsField(n,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();td.prototype.intersectsBox=function(){let e=new mh;return function(t){this.needsUpdate&&this.update();let r=t.min,n=t.max,i=this.satBounds,o=this.satAxes,a=this.alignedSatBounds;if(e.min=r.x,e.max=n.x,a[0].isSeparated(e)||(e.min=r.y,e.max=n.y,a[1].isSeparated(e))||(e.min=r.z,e.max=n.z,a[2].isSeparated(e)))return!1;for(let s=0;s<3;s++){let l=o[s],u=i[s];if(e.setFromBox(l,t),u.isSeparated(e))return!1}return!0}}();td.prototype.intersectsTriangle=function(){let e=new gh,t=new Array(3),r=new mh,n=new mh,i=new F;return function(o){this.needsUpdate&&this.update(),o.isExtendedTriangle?o.needsUpdate&&o.update():(e.copy(o),e.update(),o=e);let a=this.satBounds,s=this.satAxes;t[0]=o.a,t[1]=o.b,t[2]=o.c;for(let c=0;c<3;c++){let h=a[c],f=s[c];if(r.setFromPoints(f,t),h.isSeparated(r))return!1}let l=o.satBounds,u=o.satAxes,d=this.points;for(let c=0;c<3;c++){let h=l[c],f=u[c];if(r.setFromPoints(f,d),h.isSeparated(r))return!1}for(let c=0;c<3;c++){let h=s[c];for(let f=0;f<4;f++){let m=u[f];if(i.crossVectors(h,m),r.setFromPoints(i,t),n.setFromPoints(i,d),r.isSeparated(n))return!1}}return!0}}();td.prototype.closestPointToPoint=function(){return function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t}}();td.prototype.distanceToPoint=function(){let e=new F;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}();td.prototype.distanceToBox=function(){let e=["x","y","z"],t=new Array(12).fill().map(()=>new Vl),r=new Array(12).fill().map(()=>new Vl),n=new F,i=new F;return function(o,a=0,s=null,l=null){if(this.needsUpdate&&this.update(),this.intersectsBox(o))return(s||l)&&(o.getCenter(i),this.closestPointToPoint(i,n),o.closestPointToPoint(n,i),s&&s.copy(n),l&&l.copy(i)),0;let u=a*a,d=o.min,c=o.max,h=this.points,f=1/0;for(let p=0;p<8;p++){let g=h[p];i.copy(g).clamp(d,c);let v=g.distanceToSquared(i);if(v<f&&(f=v,s&&s.copy(g),l&&l.copy(i),v<u))return Math.sqrt(v)}let m=0;for(let p=0;p<3;p++)for(let g=0;g<=1;g++)for(let v=0;v<=1;v++){let b=(p+1)%3,y=(p+2)%3,x=g<<b|v<<y,S=1<<p|g<<b|v<<y,w=h[x],_=h[S];t[m].set(w,_);let C=e[p],E=e[b],A=e[y],M=r[m],I=M.start,O=M.end;I[C]=d[C],I[E]=g?d[E]:c[E],I[A]=v?d[A]:c[E],O[C]=c[C],O[E]=g?d[E]:c[E],O[A]=v?d[A]:c[E],m++}for(let p=0;p<=1;p++)for(let g=0;g<=1;g++)for(let v=0;v<=1;v++){i.x=p?c.x:d.x,i.y=g?c.y:d.y,i.z=v?c.z:d.z,this.closestPointToPoint(i,n);let b=i.distanceToSquared(n);if(b<f&&(f=b,s&&s.copy(n),l&&l.copy(i),b<u))return Math.sqrt(b)}for(let p=0;p<12;p++){let g=t[p];for(let v=0;v<12;v++){let b=r[v];CU(g,b,n,i);let y=n.distanceToSquared(i);if(y<f&&(f=y,s&&s.copy(n),l&&l.copy(i),y<u))return Math.sqrt(y)}}return Math.sqrt(f)}}();var Xg=new F,Yg=new F,Qg=new F,VC=new ue,HC=new ue,GC=new ue,IK=new F,DK=new F,RK=new F,WC=new F;function Lyt(e,t,r,n,i,o){let a;return o===Po?a=e.intersectTriangle(n,r,t,!0,i):a=e.intersectTriangle(t,r,n,o!==ms,i),a===null?null:{distance:e.origin.distanceTo(i),point:i.clone()}}function Nyt(e,t,r,n,i,o,a,s,l){Xg.fromBufferAttribute(t,o),Yg.fromBufferAttribute(t,a),Qg.fromBufferAttribute(t,s);let u=Lyt(e,Xg,Yg,Qg,WC,l);if(u){n&&(VC.fromBufferAttribute(n,o),HC.fromBufferAttribute(n,a),GC.fromBufferAttribute(n,s),u.uv=aa.getInterpolation(WC,Xg,Yg,Qg,VC,HC,GC,new ue)),i&&(VC.fromBufferAttribute(i,o),HC.fromBufferAttribute(i,a),GC.fromBufferAttribute(i,s),u.uv1=aa.getInterpolation(WC,Xg,Yg,Qg,VC,HC,GC,new ue)),r&&(IK.fromBufferAttribute(r,o),DK.fromBufferAttribute(r,a),RK.fromBufferAttribute(r,s),u.normal=aa.getInterpolation(WC,Xg,Yg,Qg,IK,DK,RK,new F),u.normal.dot(e.direction)>0&&u.normal.multiplyScalar(-1));let d={a:o,b:a,c:s,normal:new F,materialIndex:0};aa.getNormal(Xg,Yg,Qg,d.normal),u.face=d,u.faceIndex=o}return u}function xle(e,t,r,n,i){let o=n*3,a=e.index.getX(o),s=e.index.getX(o+1),l=e.index.getX(o+2),{position:u,normal:d,uv:c,uv1:h}=e.attributes,f=Nyt(r,u,d,c,h,a,s,l,t);return f?(f.faceIndex=n,i&&i.push(f),f):null}function zyt(e,t,r,n,i,o){for(let a=n,s=n+i;a<s;a++)xle(e,t,r,a,o)}function Byt(e,t,r,n,i){let o=1/0,a=null;for(let s=n,l=n+i;s<l;s++){let u=xle(e,t,r,s);u&&u.distance<o&&(a=u,o=u.distance)}return a}function xc(e,t,r,n){let i=e.a,o=e.b,a=e.c,s=t,l=t+1,u=t+2;r&&(s=r.getX(t),l=r.getX(t+1),u=r.getX(t+2)),i.x=n.getX(s),i.y=n.getY(s),i.z=n.getZ(s),o.x=n.getX(l),o.y=n.getY(l),o.z=n.getZ(l),a.x=n.getX(u),a.y=n.getY(u),a.z=n.getZ(u)}function kK(e,t,r,n,i,o,a){let s=r.index,l=r.attributes.position;for(let u=e,d=t+e;u<d;u++)if(xc(a,u*3,s,l),a.needsUpdate=!0,n(a,u,i,o))return!0;return!1}var wle=class{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){let e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}};function sf(e,t){return t[e+15]===65535}function yy(e,t){return t[e+6]}function sS(e,t){return t[e+14]}function lS(e){return e+8}function uS(e,t){return t[e+6]}function Fyt(e,t){return t[e+7]}var Vv=new ki,NP=new F,jyt=["x","y","z"];function Sz(e,t,r,n,i){let o=e*2,a=bb,s=Hf,l=Gf;if(sf(o,s)){let u=yy(e,l),d=sS(o,s);zyt(t,r,n,u,d,i)}else{let u=lS(e);zP(u,a,n,NP)&&Sz(u,t,r,n,i);let d=uS(e,l);zP(d,a,n,NP)&&Sz(d,t,r,n,i)}}function _z(e,t,r,n){let i=e*2,o=bb,a=Hf,s=Gf;if(sf(i,a)){let l=yy(e,s),u=sS(i,a);return Byt(t,r,n,l,u)}else{let l=Fyt(e,s),u=jyt[l],d=n.direction[u]>=0,c,h;d?(c=lS(e),h=uS(e,s)):(c=uS(e,s),h=lS(e));let f=zP(c,o,n,NP)?_z(c,t,r,n):null;if(f){let p=f.point[u];if(d?p<=o[h+l]:p>=o[h+l+3])return f}let m=zP(h,o,n,NP)?_z(h,t,r,n):null;return f&&m?f.distance<=m.distance?f:m:f||m||null}}var Uyt=function(){let e,t,r=[],n=new wle(()=>new ki);return function(...o){e=n.getPrimitive(),t=n.getPrimitive(),r.push(e,t);let a=i(...o);n.releasePrimitive(e),n.releasePrimitive(t),r.pop(),r.pop();let s=r.length;return s>0&&(t=r[s-1],e=r[s-2]),a};function i(o,a,s,l,u=null,d=0,c=0){function h(b){let y=b*2,x=Hf,S=Gf;for(;!sf(y,x);)b=lS(b),y=b*2;return yy(b,S)}function f(b){let y=b*2,x=Hf,S=Gf;for(;!sf(y,x);)b=uS(b,S),y=b*2;return yy(b,S)+sS(y,x)}let m=o*2,p=bb,g=Hf,v=Gf;if(sf(m,g)){let b=yy(o,v),y=sS(m,g);return Mc(o,p,e),l(b,y,!1,c,d+o,e)}else{let b=lS(o),y=uS(o,v),x=b,S=y,w,_,C,E;if(u&&(C=e,E=t,Mc(x,p,C),Mc(S,p,E),w=u(C),_=u(E),_<w)){x=y,S=b;let N=w;w=_,_=N,C=E}C||(C=e,Mc(x,p,C));let A=sf(x*2,g),M=s(C,A,w,c+1,d+x),I;if(M===2){let N=h(x),k=f(x)-N;I=l(N,k,!0,c+1,d+x,C)}else I=M&&i(x,a,s,l,u,d,c+1);if(I)return!0;E=t,Mc(S,p,E);let O=sf(S*2,g),T=s(E,O,_,c+1,d+S),D;if(T===2){let N=h(S),k=f(S)-N;D=l(N,k,!0,c+1,d+S,E)}else D=T&&i(S,a,s,l,u,d,c+1);return!!D}}}(),$yt=function(){let e=new gh,t=new gh,r=new qe,n=new td,i=new td;return function o(a,s,l,u,d=null){let c=a*2,h=bb,f=Hf,m=Gf;if(d===null&&(l.boundingBox||l.computeBoundingBox(),n.set(l.boundingBox.min,l.boundingBox.max,u),d=n),sf(c,f)){let p=s,g=p.index,v=p.attributes.position,b=l.index,y=l.attributes.position,x=yy(a,m),S=sS(c,f);if(r.copy(u).invert(),l.boundsTree)return Mc(a,h,i),i.matrix.copy(r),i.needsUpdate=!0,l.boundsTree.shapecast({intersectsBounds:w=>i.intersectsBox(w),intersectsTriangle:w=>{w.a.applyMatrix4(u),w.b.applyMatrix4(u),w.c.applyMatrix4(u),w.needsUpdate=!0;for(let _=x*3,C=(S+x)*3;_<C;_+=3)if(xc(t,_,g,v),t.needsUpdate=!0,w.intersectsTriangle(t))return!0;return!1}});for(let w=x*3,_=S+x*3;w<_;w+=3){xc(e,w,g,v),e.a.applyMatrix4(r),e.b.applyMatrix4(r),e.c.applyMatrix4(r),e.needsUpdate=!0;for(let C=0,E=b.count;C<E;C+=3)if(xc(t,C,b,y),t.needsUpdate=!0,e.intersectsTriangle(t))return!0}}else{let p=a+8,g=m[a+6];return Mc(p,h,Vv),!!(d.intersectsBox(Vv)&&o(p,s,l,u,d)||(Mc(g,h,Vv),d.intersectsBox(Vv)&&o(g,s,l,u,d)))}}}();function zP(e,t,r,n){return Mc(e,t,Vv),r.intersectBox(Vv,n)}var Cz=[],eE,bb,Hf,Gf;function Vx(e){eE&&Cz.push(eE),eE=e,bb=new Float32Array(e),Hf=new Uint16Array(e),Gf=new Uint32Array(e)}function qC(){eE=null,bb=null,Hf=null,Gf=null,Cz.length&&Vx(Cz.pop())}var fR=Symbol("skip tree generation"),pR=new ki,mR=new ki,Zg=new qe,Pp=new td,ux=new td,cx=new F,KC=new F,Vyt=new F,Hyt=new F,Gyt=new F,LK=new ki,Yu=new wle(()=>new gh),M1=class{static serialize(e,t={}){if(t.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),M1.serialize(arguments[0],{cloneBuffers:arguments[2]===void 0?!0:arguments[2]});t={cloneBuffers:!0,...t};let r=e.geometry,n=e._roots,i=r.getIndex(),o;return t.cloneBuffers?o={roots:n.map(a=>a.slice()),index:i.array.slice()}:o={roots:n,index:i.array},o}static deserialize(e,t,r={}){if(typeof r=="boolean")return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),M1.deserialize(arguments[0],arguments[1],{setIndex:arguments[2]===void 0?!0:arguments[2]});r={setIndex:!0,...r};let{index:n,roots:i}=e,o=new M1(t,{...r,[fR]:!0});if(o._roots=i,r.setIndex){let a=t.getIndex();if(a===null){let s=new Kt(e.index,1,!1);t.setIndex(s)}else a.array!==n&&(a.array.set(n),a.needsUpdate=!0)}return o}constructor(e,t={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(t=Object.assign({strategy:0,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[fR]:!1},t),t.useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,t[fR]||(this._roots=Iyt(e,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new ki))),this.geometry=e}refit(e=null){e&&Array.isArray(e)&&(e=new Set(e));let t=this.geometry,r=t.index.array,n=t.attributes.position,i,o,a,s,l=0,u=this._roots;for(let c=0,h=u.length;c<h;c++)i=u[c],o=new Uint32Array(i),a=new Uint16Array(i),s=new Float32Array(i),d(0,l),l+=i.byteLength;function d(c,h,f=!1){let m=c*2;if(a[m+15]===65535){let p=o[c+6],g=a[m+14],v=1/0,b=1/0,y=1/0,x=-1/0,S=-1/0,w=-1/0;for(let _=3*p,C=3*(p+g);_<C;_++){let E=r[_],A=n.getX(E),M=n.getY(E),I=n.getZ(E);A<v&&(v=A),A>x&&(x=A),M<b&&(b=M),M>S&&(S=M),I<y&&(y=I),I>w&&(w=I)}return s[c+0]!==v||s[c+1]!==b||s[c+2]!==y||s[c+3]!==x||s[c+4]!==S||s[c+5]!==w?(s[c+0]=v,s[c+1]=b,s[c+2]=y,s[c+3]=x,s[c+4]=S,s[c+5]=w,!0):!1}else{let p=c+8,g=o[c+6],v=p+h,b=g+h,y=f,x=!1,S=!1;e?y||(x=e.has(v),S=e.has(b),y=!x&&!S):(x=!0,S=!0);let w=y||x,_=y||S,C=!1;w&&(C=d(p,h,y));let E=!1;_&&(E=d(g,h,y));let A=C||E;if(A)for(let M=0;M<3;M++){let I=p+M,O=g+M,T=s[I],D=s[I+3],N=s[O],k=s[O+3];s[c+M]=T<N?T:N,s[c+M+3]=D>k?D:k}return A}}}traverse(e,t=0){let r=this._roots[t],n=new Uint32Array(r),i=new Uint16Array(r);o(0);function o(a,s=0){let l=a*2,u=i[l+15]===65535;if(u){let d=n[a+6],c=i[l+14];e(s,u,new Float32Array(r,a*4,6),d,c)}else{let d=a+8,c=n[a+6],h=n[a+7];e(s,u,new Float32Array(r,a*4,6),h)||(o(d,s+1),o(c,s+1))}}}raycast(e,t=Bu){let r=this._roots,n=this.geometry,i=[],o=t.isMaterial,a=Array.isArray(t),s=n.groups,l=o?t.side:t;for(let u=0,d=r.length;u<d;u++){let c=a?t[s[u].materialIndex].side:l,h=i.length;if(Vx(r[u]),Sz(0,n,c,e,i),qC(),a){let f=s[u].materialIndex;for(let m=h,p=i.length;m<p;m++)i[m].face.materialIndex=f}}return i}raycastFirst(e,t=Bu){let r=this._roots,n=this.geometry,i=t.isMaterial,o=Array.isArray(t),a=null,s=n.groups,l=i?t.side:t;for(let u=0,d=r.length;u<d;u++){let c=o?t[s[u].materialIndex].side:l;Vx(r[u]);let h=_z(0,n,c,e);qC(),h!=null&&(a==null||h.distance<a.distance)&&(a=h,o&&(h.face.materialIndex=s[u].materialIndex))}return a}intersectsGeometry(e,t){let r=this.geometry,n=!1;for(let i of this._roots)if(Vx(i),n=$yt(0,r,e,t),qC(),n)break;return n}shapecast(e,t,r){let n=this.geometry;if(e instanceof Function){if(t){let c=t;t=(h,f,m,p)=>{let g=f*3;return c(h,g,g+1,g+2,m,p)}}e={boundsTraverseOrder:r,intersectsBounds:e,intersectsTriangle:t,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}let i=Yu.getPrimitive(),{boundsTraverseOrder:o,intersectsBounds:a,intersectsRange:s,intersectsTriangle:l}=e;if(s&&l){let c=s;s=(h,f,m,p,g)=>c(h,f,m,p,g)?!0:kK(h,f,n,l,m,p,i)}else s||(l?s=(c,h,f,m)=>kK(c,h,n,l,f,m,i):s=(c,h,f)=>f);let u=!1,d=0;for(let c of this._roots){if(Vx(c),u=Uyt(0,n,a,s,o,d),qC(),u)break;d+=c.byteLength}return Yu.releasePrimitive(i),u}bvhcast(e,t,r){let{intersectsRanges:n,intersectsTriangles:i}=r,o=this.geometry.index,a=this.geometry.attributes.position,s=e.geometry.index,l=e.geometry.attributes.position;Zg.copy(t).invert();let u=Yu.getPrimitive(),d=Yu.getPrimitive();if(i){let h=function(f,m,p,g,v,b,y,x){for(let S=p,w=p+g;S<w;S++){xc(d,S*3,s,l),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let _=f,C=f+m;_<C;_++)if(xc(u,_*3,o,a),u.needsUpdate=!0,i(u,d,_,S,v,b,y,x))return!0}return!1};if(n){let f=n;n=function(m,p,g,v,b,y,x,S){return f(m,p,g,v,b,y,x,S)?!0:h(m,p,g,v,b,y,x,S)}}else n=h}e.getBoundingBox(mR),mR.applyMatrix4(t);let c=this.shapecast({intersectsBounds:h=>mR.intersectsBox(h),intersectsRange:(h,f,m,p,g,v)=>(pR.copy(v),pR.applyMatrix4(Zg),e.shapecast({intersectsBounds:b=>pR.intersectsBox(b),intersectsRange:(b,y,x,S,w)=>n(h,f,b,y,p,g,S,w)}))});return Yu.releasePrimitive(u),Yu.releasePrimitive(d),c}intersectsBox(e,t){return Pp.set(e.min,e.max,t),Pp.needsUpdate=!0,this.shapecast({intersectsBounds:r=>Pp.intersectsBox(r),intersectsTriangle:r=>Pp.intersectsTriangle(r)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,r={},n={},i=0,o=1/0){e.boundingBox||e.computeBoundingBox(),Pp.set(e.boundingBox.min,e.boundingBox.max,t),Pp.needsUpdate=!0;let a=this.geometry,s=a.attributes.position,l=a.index,u=e.attributes.position,d=e.index,c=Yu.getPrimitive(),h=Yu.getPrimitive(),f=KC,m=Vyt,p=null,g=null;n&&(p=Hyt,g=Gyt);let v=1/0,b=null,y=null;return Zg.copy(t).invert(),ux.matrix.copy(Zg),this.shapecast({boundsTraverseOrder:x=>Pp.distanceToBox(x),intersectsBounds:(x,S,w)=>w<v&&w<o?(S&&(ux.min.copy(x.min),ux.max.copy(x.max),ux.needsUpdate=!0),!0):!1,intersectsRange:(x,S)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:w=>ux.distanceToBox(w),intersectsBounds:(w,_,C)=>C<v&&C<o,intersectsRange:(w,_)=>{for(let C=w*3,E=(w+_)*3;C<E;C+=3){xc(h,C,d,u),h.a.applyMatrix4(t),h.b.applyMatrix4(t),h.c.applyMatrix4(t),h.needsUpdate=!0;for(let A=x*3,M=(x+S)*3;A<M;A+=3){xc(c,A,l,s),c.needsUpdate=!0;let I=c.distanceToTriangle(h,f,p);if(I<v&&(m.copy(f),g&&g.copy(p),v=I,b=A/3,y=C/3),I<i)return!0}}}});{let w=d?d.count:u.count;for(let _=0,C=w;_<C;_+=3){xc(h,_,d,u),h.a.applyMatrix4(t),h.b.applyMatrix4(t),h.c.applyMatrix4(t),h.needsUpdate=!0;for(let E=x*3,A=(x+S)*3;E<A;E+=3){xc(c,E,l,s),c.needsUpdate=!0;let M=c.distanceToTriangle(h,f,p);if(M<v&&(m.copy(f),g&&g.copy(p),v=M,b=E/3,y=_/3),M<i)return!0}}}}}),Yu.releasePrimitive(c),Yu.releasePrimitive(h),v===1/0?null:(r.point?r.point.copy(m):r.point=m.clone(),r.distance=v,r.faceIndex=b,n&&(n.point?n.point.copy(g):n.point=g.clone(),n.point.applyMatrix4(Zg),m.applyMatrix4(Zg),n.distance=m.sub(n.point).length(),n.faceIndex=y),r)}closestPointToPoint(e,t={},r=0,n=1/0){let i=r*r,o=n*n,a=1/0,s=null;if(this.shapecast({boundsTraverseOrder:u=>(cx.copy(e).clamp(u.min,u.max),cx.distanceToSquared(e)),intersectsBounds:(u,d,c)=>c<a&&c<o,intersectsTriangle:(u,d)=>{u.closestPointToPoint(e,cx);let c=e.distanceToSquared(cx);return c<a&&(KC.copy(cx),a=c,s=d),c<i}}),a===1/0)return null;let l=Math.sqrt(a);return t.point?t.point.copy(KC):t.point=KC.clone(),t.distance=l,t.faceIndex=s,t}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(t=>{Mc(0,new Float32Array(t),LK),e.union(LK)}),e}},dx=Lo(Yet()),Wyt=.5*(Math.sqrt(3)-1),hx=(3-Math.sqrt(3))/6,qyt=1/3,Qu=1/6,P1=e=>Math.floor(e)|0,NK=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]),gR=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function vR(e=Math.random){let t=Sle(e),r=new Float64Array(t).map(i=>NK[i%12*2]),n=new Float64Array(t).map(i=>NK[i%12*2+1]);return function(i,o){let a=0,s=0,l=0,u=(i+o)*Wyt,d=P1(i+u),c=P1(o+u),h=(d+c)*hx,f=d-h,m=c-h,p=i-f,g=o-m,v,b;p>g?(v=1,b=0):(v=0,b=1);let y=p-v+hx,x=g-b+hx,S=p-1+2*hx,w=g-1+2*hx,_=d&255,C=c&255,E=.5-p*p-g*g;if(E>=0){let I=_+t[C],O=r[I],T=n[I];E*=E,a=E*E*(O*p+T*g)}let A=.5-y*y-x*x;if(A>=0){let I=_+v+t[C+b],O=r[I],T=n[I];A*=A,s=A*A*(O*y+T*x)}let M=.5-S*S-w*w;if(M>=0){let I=_+1+t[C+1],O=r[I],T=n[I];M*=M,l=M*M*(O*S+T*w)}return 70*(a+s+l)}}function Kyt(e=Math.random){let t=Sle(e),r=new Float64Array(t).map(o=>gR[o%12*3]),n=new Float64Array(t).map(o=>gR[o%12*3+1]),i=new Float64Array(t).map(o=>gR[o%12*3+2]);return function(o,a,s){let l,u,d,c,h=(o+a+s)*qyt,f=P1(o+h),m=P1(a+h),p=P1(s+h),g=(f+m+p)*Qu,v=f-g,b=m-g,y=p-g,x=o-v,S=a-b,w=s-y,_,C,E,A,M,I;x>=S?S>=w?(_=1,C=0,E=0,A=1,M=1,I=0):x>=w?(_=1,C=0,E=0,A=1,M=0,I=1):(_=0,C=0,E=1,A=1,M=0,I=1):S<w?(_=0,C=0,E=1,A=0,M=1,I=1):x<w?(_=0,C=1,E=0,A=0,M=1,I=1):(_=0,C=1,E=0,A=1,M=1,I=0);let O=x-_+Qu,T=S-C+Qu,D=w-E+Qu,N=x-A+2*Qu,k=S-M+2*Qu,R=w-I+2*Qu,z=x-1+3*Qu,j=S-1+3*Qu,$=w-1+3*Qu,U=f&255,H=m&255,V=p&255,Q=.6-x*x-S*S-w*w;if(Q<0)l=0;else{let W=U+t[H+t[V]];Q*=Q,l=Q*Q*(r[W]*x+n[W]*S+i[W]*w)}let X=.6-O*O-T*T-D*D;if(X<0)u=0;else{let W=U+_+t[H+C+t[V+E]];X*=X,u=X*X*(r[W]*O+n[W]*T+i[W]*D)}let ne=.6-N*N-k*k-R*R;if(ne<0)d=0;else{let W=U+A+t[H+M+t[V+I]];ne*=ne,d=ne*ne*(r[W]*N+n[W]*k+i[W]*R)}let J=.6-z*z-j*j-$*$;if(J<0)c=0;else{let W=U+1+t[H+1+t[V+1]];J*=J,c=J*J*(r[W]*z+n[W]*j+i[W]*$)}return 32*(l+u+d+c)}}function Sle(e){let t=new Uint8Array(512);for(let r=0;r<512/2;r++)t[r]=r;for(let r=0;r<512/2-1;r++){let n=r+~~(e()*(256-r)),i=t[r];t[r]=t[n],t[n]=i}for(let r=256;r<512;r++)t[r]=t[r-256];return t}var ou=new aa,Xyt=class{constructor(e){this.weightAttribute=null;let t=e.geometry;if(!t.isBufferGeometry||t.attributes.position.itemSize!==3)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");t.index&&(t=t.toNonIndexed()),this.geometry=t,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.distribution=null}build(){let e=this.positionAttribute,t=new Float32Array(e.count/3);for(let n=0;n<e.count;n+=3){let i=1;ou.a.fromBufferAttribute(e,n),ou.b.fromBufferAttribute(e,n+1),ou.c.fromBufferAttribute(e,n+2),i*=ou.getArea(),t[n/3]=i}this.distribution=new Float32Array(e.count/3);let r=0;for(let n=0;n<t.length;n++)r+=t[n],this.distribution[n]=r;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,t){if(this.distribution){let r=this.distribution[this.distribution.length-1],n=this.binarySearch(this.randomFunction()*r);return this.sampleFace(n,e,t)}}binarySearch(e){if(!this.distribution)return 0;let t=this.distribution,r=0,n=t.length-1,i=-1;for(;r<=n;){let o=Math.ceil((r+n)/2);if(o===0||t[o-1]<=e&&t[o]>e){i=o;break}else e<t[o]?n=o-1:r=o+1}return i}sampleFace(e,t,r){let n=this.randomFunction(),i=this.randomFunction();return n+i>1&&(n=1-n,i=1-i),ou.a.fromBufferAttribute(this.positionAttribute,e*3),ou.b.fromBufferAttribute(this.positionAttribute,e*3+1),ou.c.fromBufferAttribute(this.positionAttribute,e*3+2),t.set(0,0,0).addScaledVector(ou.a,n).addScaledVector(ou.b,i).addScaledVector(ou.c,1-(n+i)),ou.getNormal(r),this}},Yyt=Lo(iae()),Qyt=new qe,Zyt=new qe,Jyt=new qe,cS;(e=>{function t(r){return r&&r.__isSPEObject}e.is=t})(cS||(cS={}));var AU=e=>class extends e{constructor(){super(...arguments),this.previousModelViewMatrix=new qe,this.copyPreviousMatrix=!0,this.hiddenMatrix=new qe,this.matrixWorldRigid=new qe,this.shearScale=new qe,this.shearScaleInv=new qe}get __isSPEObject(){return!0}isDescendantOf(t){t instanceof hn&&(t=t.uuid);let r=this;for(;r.parent;){if(r.parent.uuid===t)return!0;r=r.parent}return!1}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);for(let r of this.children)r.updateMatrixWorld(t)}updateWorldMatrix(t,r){let n=this.parent;if(t&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),r)for(let i of this.children)i.updateWorldMatrix(!1,!0)}traverseChildren(t,r=0){for(let n of this.children)cS.is(n)&&n.traverseObject(t,r+1)}traverseObject(t,r=0){if(t(this,r)!==!0)for(let n of this.children)cS.is(n)&&n.traverseObject(t,r+1)}updateMatrixWorldSVD(){let t=this.matrixWorld.elements,r=[[t[0],t[4],t[8]],[t[1],t[5],t[9]],[t[2],t[6],t[10]]],{u:n,v:i,q:o}=(0,Yyt.SVD)(r),a=Qyt.set(n[0][0],n[0][1],n[0][2],0,n[1][0],n[1][1],n[1][2],0,n[2][0],n[2][1],n[2][2],0,0,0,0,1),s=Zyt.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1),l=Jyt.copy(s).transpose();this.shearScale.makeScale(o[0],o[1],o[2]).multiply(l).premultiply(s),this.shearScaleInv.copy(this.shearScale).invert(),this.matrixWorldRigid.multiplyMatrices(a,l).copyPosition(this.matrixWorld),o.every(u=>Math.abs(o[0]-u)<.01)?this.hasNonUniformScale=!1:this.hasNonUniformScale=!0}attach(t,r){this.updateWorldMatrix(!0,!1);let n=new qe().copy(this.matrixWorld).invert();return t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),n.multiply(t.parent.matrixWorld)),"hiddenMatrix"in t&&t.hiddenMatrix instanceof qe?t.hiddenMatrix.premultiply(n):t.applyMatrix4(n),t.updateWorldMatrix(!1,!1),this.add(t),r!==void 0&&(this.children.pop(),this.children.splice(r,0,t)),this}copy(t,r=!1){return super.copy(t,r),this.hasNonUniformScale=t.hasNonUniformScale,this}onAfterRender(t,r,n,i,o,a){this.copyPreviousMatrix&&this.previousModelViewMatrix.copy(this.modelViewMatrix)}},e0t=class extends AU(hn){},t0t=e=>e.type==="Mesh",ua=class extends e0t{constructor(e){super(),this.object=e,this.matrixAutoUpdate=!1,this.hasNonUniformScale=e.hasNonUniformScale}raycast(e,t){}expand(){let e=0,t=this.object.entityChildren(e);for(;t;){let r=this.children[e];(r==null?void 0:r.object)!==t&&(r&&this.remove(r),r=new ua(t),this.add(r),this.children.splice(e,0,this.children.pop()),r.matrixWorldNeedsUpdate=!0,r.matrixAutoUpdate=!1,r.matrix=t.matrix,r.hiddenMatrix=t.hiddenMatrix),r.expand(),e+=1,t=this.object.entityChildren(e)}for(;this.children.length>e;)this.remove(this.children[e])}get visible(){var e;return this.playModeVisible!==void 0?this.playModeVisible:this.object.visible||this.object.dataPatched.visible&&((e=this.object.dataPatched.cloner)==null?void 0:e.hideBase)===!0}set visible(e){}get castShadow(){return this.object.castShadow}set castShadow(e){}get receiveShadow(){return this.object.receiveShadow}set receiveShadow(e){}get isMesh(){return t0t(this.object)}get isLight(){return this.object.isLight}get layers(){return this.object.layers}set layers(e){}get isCamera(){return!1}get geometry(){if(this.object.geometry)return this.object.geometry}get material(){if(this.object.material)return this.object.material}},Yp=new F,Qp=new F,by=new qe,_le=[new F(-1,1,1),new F(-1,-1,1),new F(1,-1,1),new F(1,1,1),new F(-1,1,-1),new F(-1,-1,-1),new F(1,-1,-1),new F(1,1,-1)],r0t=[[0,3],[1,2],[5,6],[4,7],[0,1],[3,2],[7,6],[4,5],[0,4],[1,5],[2,6],[3,7]],n0t=[[0,2],[7,5],[4,1],[3,6],[4,3],[1,6]],zK=(e,t,r)=>{e.updateEntityBoxSize(Yp,Qp),by.copy(t).multiply(e.matrixWorld),Qp.x===0&&Qp.y===0&&Qp.z===0?r.push(new F(Yp.x,Yp.y,Yp.z).applyMatrix4(by)):_le.forEach(n=>{r.push(n.clone().multiply(Qp).add(Yp).applyMatrix4(by))})},BK=class extends ki{constructor(){super(...arguments),this.matrix=new qe,this.vertices=[],this.faces=[],this.edges=[],this.centerEdges=[]}copy(e){return super.copy(e),this.matrix.copy(e.matrix),this.vertices=e.vertices.map(t=>t.clone()),this.faces=e.faces.map(t=>t.clone()),this.edges=e.edges.map(t=>t.clone()),this.centerEdges=e.centerEdges.map(t=>t.clone()),this}setFromObjectSize(e,t=!1){e.updateWorldMatrix(!1,t),this.makeEmpty(),this.matrix.copy(e.matrixWorld);let r=new qe().copy(e.matrixWorld).invert();return this.expandByObjectSize(e,r,t)}expandByObjectSize(e,t,r=!1){let n=[];return r===!0?e.traverseEntity(i=>{if(i.visible||i.cloner&&i.data.visible){if(!("geometry"in i)){n.push(new F);return}zK(i,t,n)}}):zK(e,t,n),this.setFromPoints(n)}getCenter(e){return e=super.getCenter(e),e.applyMatrix4(this.matrix),e}getPositionToCenter(e){return e=super.getCenter(e),e.applyMatrix4(by.copy(this.matrix).setPosition(0,0,0)),e}computeVertices(){this.getSize(Qp).multiplyScalar(.5),this.getCenter(Yp),by.copy(this.matrix).setPosition(Yp),this.vertices=_le.map(e=>e.clone().multiply(Qp).applyMatrix4(by))}computeEdges(){this.vertices.length>0&&this.computeVertices(),this.edges=r0t.map(([e,t])=>new Vl(this.vertices[e],this.vertices[t])),this.centerEdges=this.edges.map(e=>e.getCenter(new F))}computeFaces(){this.vertices.length>0&&this.computeVertices(),this.faces=n0t.map(([e,t])=>this.vertices[e].clone().add(this.vertices[t]).multiplyScalar(.5))}},wf={Cloner:()=>{},changeEntityProptotype:()=>{},createEntity:()=>{}},i0t=class extends Rae{constructor(){super()}getPoints(e=12){let t=[],r,n=this.getCurveLengths(),i=n[n.length-1]/n.length;for(let o=0,a=this.curves;o<a.length;o++){let s=a[o],l=o===0?n[o]:n[o]-n[o-1],u=Math.ceil(e*l/i),d=s.getPoints(u);for(let c=0;c<d.length;c++){let h=d[c];r&&r.equals(h)||(t.push(h),r=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}},Az=.001;function Ez(e,t,r){return t.clone().sub(e).cross(t.clone().sub(r)).length()<=Az}function yR(e,t){let r=new F(...e.position),n=new F(...e.controlNext.position),i=new F(...t.controlPrevious.position),o=new F(...t.position);return Ez(r,n,o)&&Ez(r,i,o)}function Cle(e){let t=e.points.map(d=>new F(...d.data.position)),r=[e.points[0]],n=new F(...r[0].data.position);for(let d=0;d<e.points.length-1;d++)Ez(n,t[d],t[d+1])||(r.push(e.points[d]),n=t[d]);r.push(e.points[e.points.length-1]);let i=e.isClosed,o=r.length-(i?0:1),a=r.length,s=[];for(let d=0;d<a;d++){let c=r[d].data,h=new F(...c.position),f=new F(...c.controlPrevious.position),m=new F(...c.controlNext.position),p={position:h,baseRoundness:c.roundness,controlPrevious:f,controlNext:m};if(c.roundness===0||!e.isClosed&&(d===0||d===a-1)){s[d]={...p,removedLength:0};continue}let g=i&&d==0?a-1:d-1,v=i&&d==a-1?0:d+1,b=r[g].data,y=r[v].data,x=new F(...b.position),S=new F(...y.position),w=x.clone().sub(h).normalize(),_=S.clone().sub(h).normalize();Object.assign(p,{prevDir:w,nextDir:_});let C=yR(b,c),E=yR(c,y);if(!C||!E)s[d]={...p,removedLength:0};else{let A=w.clone().add(_).normalize(),M=A.clone().cross(w).length()/w.dot(A);s[d]={...p,tan:M,removedLength:c.roundness/M}}}for(let d=0;d<o;d++){let c=d,h=i&&d===a-1?0:d+1,f=s[c],m=s[h];if(f.removedLength!==0||m.removedLength!==0){let p=f.position.distanceTo(m.position);f.removedLength=Math.min(f.removedLength,p/2),m.removedLength=Math.min(m.removedLength,p/2)}}let l=[];for(let d=0;d<o;d++){let c=d,h=i&&d===a-1?0:d+1,f=s[c],m=s[h],p=null;if(!yR(r[c].data,r[h].data))f.position.distanceTo(m.position)>Az&&(p=new XA(f.position,f.controlNext,m.controlPrevious,m.position));else{let g=f.position.clone(),v=m.position.clone();(f.removedLength!==0||m.removedLength!==0)&&(f.nextDir&&g.add(f.nextDir.clone().setLength(f.removedLength)),m.prevDir&&v.add(m.prevDir.clone().setLength(m.removedLength))),g.distanceTo(v)>Az&&(p=new XA(g,g.clone().lerp(v,.3),v.clone().lerp(g,.3),v))}l[2*d+1]=p}for(let d=0;d<a;d++){let c=s[d];if(c.removedLength===0){l[2*d]=null;continue}let h=c.position,f=c.prevDir.clone().multiplyScalar(c.removedLength).add(h),m=c.nextDir.clone().multiplyScalar(c.removedLength).add(h),p=c.tan*c.removedLength,g=c.prevDir.clone().add(c.nextDir).normalize(),v=f.clone().lerp(m,.5),b=f.distanceTo(m)/2,y=g.clone().multiplyScalar(Math.sqrt(Math.pow(p,2)-Math.pow(b,2))).add(v),x=g.clone().multiplyScalar(-p).add(y),S=h.distanceTo(x)/h.distanceTo(v),w=c.prevDir.clone().multiplyScalar(S*h.distanceTo(f)).add(h),_=w.clone().lerp(x,2),C=f.clone().lerp(w,4/3),E=m.clone().lerp(_,4/3);l[2*d]=new XA(f,C,E,m)}let u=new i0t;return l.forEach(d=>{d&&u.add(d)}),u}var Dr;(e=>{function t(r){return r&&r.__isEntity}e.is=t})(Dr||(Dr={}));var Nd=e=>Dr.is(e),o0t={type:"completeState",isfromEntity:!0},a0t=["x","y","z"],bR=new F,s0t=new F().set(0,1,0),EU=e=>class extends AU(e){constructor(){super(...arguments),this.raycastLock=!1,this.scaleLock=!1,this.disposed=!1,this.stateSelection=null,this.destroyedInAction=!1,this.instances=[],this.prevState=null,this.currentState=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this._singleBBox=new BK,this._recursiveBBox=new BK,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this._needApplyPathSnapping=!0,this.attachedPaths=new Set}get __isEntity(){return!0}entityChildren(t){let r=this.children[t];if(Dr.is(r))return r}entityChildrenCount(){let t=this.children.length;for(;t--;)if(Dr.is(this.children[t]))return t+1;return 0}get isConcreteEntity(){return typeof this.identity=="string"}get isVirtualEntity(){return typeof this.identity!="string"}get isInstanceRoot(){return this.isConcreteEntity&&this.data.type==="Instance"}nearestInstanceSelfOrParent(){let t=this;for(;t.data.type!=="Instance";){let r=t.parent;if(Dr.is(r))t=r;else return}return t}forInstancesRec(t){this.instances.forEach(r=>{r.disposed||t(r),r.forInstancesRec(t)})}super_Entity(t,r){typeof t=="string"&&(this.uuid=t),this.identity=t,this.data=r,this.matrixAutoUpdate=!1,this.dataPatched=this.data}changeSelectedState(t,r,n=!1){if(!(this.data.states.length===0&&!n)){for(let i of this.data.states)dm.toOps(this.data,i.data).forEach(o=>{let a=VN.replaceProps(o,this.data);this.dataPatched=this.data,this.updateByPatchedOp(a,this.data,r)});if(t!==null){let i=this.data.states.data(t);i&&(this.dataPatched=dm.patch(this.data,i),dm.toOps(this.data,i).forEach(o=>{this.updateByPatchedOp(o,this.dataPatched,r)}))}n&&this.updateTransformState(this.dataPatched,r),this.stateSelection=t,this.updatePathSnapping(this.dataPatched.pathSnapping)}}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges(),this._singleBBox.computeFaces()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges(),this._recursiveBBox.computeFaces()),this._recursiveBBox}updateEntityBoxSize(t,r){t.setScalar(0),r.setScalar(0)}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors(t=>{Nd(t)&&t.resetBBoxNeedsUpdateSelf()}),this.traverseEntity(t=>{t.resetBBoxNeedsUpdateSelf()})}find(t){let r;return this.traverseEntity(n=>{n.uuid===t&&(r=n)}),r}traverseSortNextHelper(){let t=this.parent;if(t){let r=t.children,n=r.indexOf(this)+1;if(Dr.is(r[n]))return r[n];if(Dr.is(t))return t.traverseSortNextHelper()}}sortNext(){let t=this.children;return this.children.length>0&&Dr.is(this.children[0])?t[0]:this.traverseSortNextHelper()}goUp(t){let r=this;for(;t>0&&r!==null;)r=r.parent,t-=1;return r}hasAnccestorOrSelf(t){return this===t||this.hasAnccestor(t)}hasAnccestor(t){let r=this.parent;for(;r;){if(t===r)return!0;r=r.parent}return!1}countToAccestor(t){let r=0,n=this;for(;n!==t;){if(n===null)return-1;n=n.parent,r+=1}return r}forEachEntity(t){for(let r of this.children)Nd(r)&&t(r)}traverseEntityAncestors(t){this.traverseAncestors(r=>{Dr.is(r)&&t(r)})}traverseConcreteEntity(t,r=0){if(t(this,r)!==!0)for(let n of this.children)Nd(n)&&n.isConcreteEntity&&n.traverseEntity(t,r+1)}traverseEntity(t,r=0){if(t(this,r)!==!0)for(let n of this.children)Nd(n)&&n.traverseEntity(t,r+1)}traverseVisibleEntity(t){t(this);for(let r of this.children)Nd(r)&&r.visible&&r.traverseVisibleEntity(t)}updateMatrix(){super.updateMatrix(),this.cloner&&this.cloner.onObjUpdateMatrix(),this.dispatchEvent({type:"updateMatrix"})}updateMatrixWorld(t){super.updateMatrixWorld(t),this.dispatchEvent({type:"updateMatrixWorld"})}copy(t,r=!1){return super.copy(t,r),this.dataPatched=t.dataPatched,this.raycastLock=t.raycastLock,this.scaleLock=t.scaleLock,this.hiddenMatrix.copy(t.hiddenMatrix),this}hasEntityChild(){return this.children.some(t=>Nd(t))}isAncestorOf(t){if(this.uuid===t)return!1;let r=!1;return this.traverseEntity(n=>{n.uuid===t&&(r=!0)}),r}toObjectTransformState(t=[]){this.updateWorldMatrix(!0,!1);let r={position:this.position.toArray(),rotation:[this.rotation.x*Et.RAD2DEG,this.rotation.y*Et.RAD2DEG,this.rotation.z*Et.RAD2DEG],scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};return $N(r,t)}getTransformValues(t,r,n){return r[t].map((i,o)=>(n==null?void 0:n.shared.getVariable(i,[this.uuid,t,a0t[o]]))??i)}updateTransformState(t,r){let n=!1;return t.position&&(this.position.fromArray(this.getTransformValues("position",t,r)),n=!0),t.rotation&&(bR.fromArray(this.getTransformValues("rotation",t,r)).multiplyScalar(Et.DEG2RAD),this.rotation.setFromVector3(bR),n=!0),t.scale&&(this.scale.fromArray(this.getTransformValues("scale",t,r)),n=!0),t.hiddenMatrix!==void 0&&(n=!0,this.hiddenMatrix.fromArray(t.hiddenMatrix??C0.identity)),n&&(this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(i=>{i.invalidateClonerTransform(this)})),t.position&&t.rotation&&t.scale&&t.hiddenMatrix!==void 0&&this.updateWorldMatrix(!1,!0),n}onVariableUpdate(t=!1){if(t){this.resetBBoxNeedsUpdate();return}this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(r=>{r.invalidateClonerTransform(this)})}dispose(){this.disposed=!0,this.cloner&&(this.cloner.removeFromParent(),this.cloner=void 0)}disposeChildrenRecursively(){for(let t of this.children)Dr.is(t)&&t.disposeRecursively()}disposeRecursively(){this.dispose(),this.children.forEach(t=>{Dr.is(t)&&t.disposeRecursively()})}toState(t=[]){let r={name:this.name,visible:this.visible,raycastLock:this.raycastLock,...this.toObjectTransformState(t)};return $N(r,t)}updateByObjUpdateOp(t,r){t!==void 0&&this.updateByOp({type:0,props:t,path:[]},{...this.data,...t},r,!1)}updateByOp(t,r,n,i){let o=this.data;this.data=r;let a=t,s=kl(t.path,["states","*"]);if(s!==null){if(t.type===0){let[l]=s;if((this==null?void 0:this.stateSelection)===l){let u={...t.props};if(delete u.name,Object.values(t.props).some(d=>d===void 0)){let d=this.data;if(d!==void 0){let c=Ra.zoom(d,t.path.slice(2));if(c)for(let h in t.props)t.props[h]===void 0&&h in c&&(u[h]=c[h])}}a={...t,props:u,path:t.path.slice(2)}}}}else if(t.type===0){let l=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(l!==void 0){if(t.props.name!==void 0&&l.name){let{name:d,...c}=l;l=c}if(t.props.material!==void 0&&"material"in l){let{material:d,...c}=l;l=c}let u=Ra.removeOverridden(t.path,t.props,l);a={...t,props:u}}}if(this.updateByPatchedOpBase(a,dm.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),n),kl(t.path,["overrides"])){let l=[],u=[...t.path];for(l.push(u[1]),u.splice(0,2);u.length>0&&u[0]==="descendants";)l.push(u[1]),u.splice(0,2);if(l[l.length-1]===void 0){if(t.type===0)for(let d of Object.keys(t.props)){l[l.length-1]=d;let c=n.scene.findInstance([this.uuid,...l]);c&&(c.overrideData=t.props[d],c.updateState($f.apply(c.component.data,c.overrideData),n))}}else{let d=n.scene.findInstance([this.uuid,...l]);if(d){let c=Ra.zoom(d.component.data,u);if(t={...t,path:u},t.type===0){let h=t.props;if(c)for(let[f,m]of Object.entries(t.props))m===void 0&&(h===t.props&&(h={...t.props}),h[f]=c[f]);t={...t,props:h}}d.overrideData=OP.resolve(r.overrides,l),d.updateByOp(t,sa.applySimple(d.data,t),n,!1)}}}else if(this.instances.length>0){let l;if(t.path.length===0&&t.type===0){let u;for(let d of xf.rootOverrideProps)d in t.props&&(u===void 0&&(u={}),u[d]=t.props[d]);u&&(l={...t,props:u})}else for(let u of xf.rootOverrideProps)if(kl(t.path,[u])){l=t;break}l!==void 0&&this.instances.forEach(u=>{if(u.isInstanceRoot){let d=$f.filterOp(u.overrideData,l);d&&u.updateByOp(d,sa.applySimple(u.data,d),n,!0)}}),this.instances.forEach(u=>{if(!u.isInstanceRoot){let d=$f.filterOp(u.overrideData,t);if(d){let c;o===u.data&&t===d?c=r:c=sa.applySimple(u.data,d),u.updateByOp(d,c,n,!0)}}})}}updateByPatchedOpBase(t,r,n){if(this.dataPatched=r,t.path.length===0&&t.type===0)t.props.type!==void 0&&!Zm.is(t.props.type)&&wf.changeEntityProptotype(this,r,n);else if(t.path.length===1&&t.path[0]==="geometry"&&t.type===0&&"type"in t.props){wf.changeEntityProptotype(this,r,n);for(let i of this.children)Dr.is(i)&&i.updateVisible(n.scene)}this.updateByPatchedOp(t,r,n)}updateByPatchedOp(t,r,n){if(t.path.length===0&&t.type===0&&this.updateState(t.props,n),kl(t.path,["pathSnapping"])!==null&&this.updatePathSnapping(r.pathSnapping),kl(t.path,["cloner"])!==null){let i=sa.drop(t,1);i.path.length===0&&i.type===0&&i.props.disabled===!0?this.setFromClonerState(null,n):this.cloner?this.cloner.updateState(r.cloner,n.scene):(this.setFromClonerState(r.cloner,n),this.expandCloner(n.scene)),this.updateVisible(n.scene)}}updatePathSnapping(t=this.dataPatched.pathSnapping){this._updatedPathSnapping=t,this._needApplyPathSnapping=!0}get updatedPathSnapping(){return this._updatedPathSnapping}applyPathSnapping(t){var m,p,g,v,b;let r=((m=this._updatedPathSnapping)==null?void 0:m.pathId)??this.dataPatched.pathSnapping.pathId,n=((p=this._updatedPathSnapping)==null?void 0:p.slide)??this.dataPatched.pathSnapping.slide??0,i=((g=this._updatedPathSnapping)==null?void 0:g.offset)??this.dataPatched.pathSnapping.offset??0,o=((v=this._updatedPathSnapping)==null?void 0:v.orientation)??this.dataPatched.pathSnapping.orientation;if(r===null)return;let a=t.find(r);if(!a||this._needApplyPathSnapping===!1)return;this._needApplyPathSnapping=!1;let s=a.data;if(s.geometry.path.points.length<=1)return;let l=Cle(s.geometry.path),u=(n+i)%1;n+i===1&&u===0&&(u=1);let d=l.getPointAt(u),c=this.parent?(b=this.parent)==null?void 0:b.matrixWorld:new qe;a.updateMatrixWorld();let h=new qe().multiplyMatrices(c.clone().invert(),a.matrixWorld);d.applyMatrix4(h);let f={position:d.toArray(),rotation:s.rotation};if(o==="tangential"){let y=new qe().extractRotation(a.matrixWorld),x=l.getTangentAt(u).applyMatrix4(y).add(d),S=new qe().lookAt(d,x,s0t),w=bR.setFromEuler(new Eo().setFromRotationMatrix(S)).multiplyScalar(Et.RAD2DEG);f={...f,rotation:w.toArray()}}this.updateTransformState(f),this.traverseEntity(y=>{y._cameraType&&y.dispatchEvent(o0t)})}updateVisible(t){var n;if(this.visible=this.dataPatched.visible&&(!this.dataPatched.cloner||(this.dataPatched.cloner.disabled??!1)||((n=this.dataPatched.cloner)==null?void 0:n.hideBase)!==!0),!t)return;let r=!1;this.traverseEntity(i=>{if(i.data.type==="Splat")return r=!0,!0}),r&&t.reloadSplats()}updateState_Entity(t,r){t.name!==void 0&&(this.name=t.name),t.raycastLock!==void 0&&(this.raycastLock=t.raycastLock),t.visible!==void 0&&(this.updateVisible(r==null?void 0:r.scene),this.resetBBoxNeedsUpdate()),r&&"cloner"in t&&t.cloner!==void 0&&(this.setFromClonerState(t.cloner,r),this.updateVisible(r.scene)),this.updateTransformState(t,r)}get attachedSurfaceCloners(){return this.children.filter(t=>t instanceof wf.Cloner&&t.parameters.type==="toObject")}setFromClonerState(t,r){this.disposed||(t===null||t.disabled?(this.cloner&&this.cloner.removeFromParent(),this.cloner=void 0):this.cloner===void 0?(this.cloner=new wf.Cloner(this,t),r.scene.addPendingExpandCloner(this)):this.cloner.updateState(t,r.scene))}expandCloner(t){!this.disposed&&this.cloner&&this.cloner.expandClones(t)}invalidateClonerTransform(t){this.cloner&&this.cloner.invalidateTransform(t)}},Ale=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:64,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadius:8,cornerSegments:8,hollow:0},e.parameters);r.thetaLength=Et.clamp(r.thetaLength,0,360);let n=r.width/2,i=r.radiusTop??n,o=r.radiusBottom??n;return i===o?(i=n,o=n):i>o?(i=n,o=o*n/i):(i=i*n/o,o=n),{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width),radiusTop:i,radiusBottom:o})}}static build(e){let{width:t,depth:r,height:n,radialSegments:i,heightSegments:o,openEnded:a,thetaStart:s,thetaLength:l,radiusTop:u,radiusBottom:d,cornerRadius:c,cornerSegments:h,hollow:f}=e.parameters,m;return l===0?(m=new Nt,m.setAttribute("position",new ft([],3))):c||f?m=new Ele(u,d,n,i,o,a,s,l*Math.PI/180,c,c,h,f):m=new V4(u,d,n,i,o,a,s,l*Math.PI/180),m.scale(1,1,r/t),Object.assign(m,{userData:{...e,type:"CylinderGeometry"}})}};function Lh(e,t,r){r.x=e.x*t.x,r.y=e.y,r.z=e.x*t.y}function FK(e){return new ue(e.y,-e.x)}var Ele=class extends Nt{constructor(e,t,r,n,i,o,a,s,l,u,d,c,h=!1){super(),this.type="RoundedCylinderBufferGeometry",e=e!==void 0?e:1,t=t!==void 0?t:1,r=r||1,n=Math.floor(n)||8,i=Math.floor(i)||1,o=o!==void 0?o:!1,a=a!==void 0?a:0,s=s!==void 0?s:Math.PI*2,o&&(l=0,u=0);let f=[],m=[],p=[],g=[],v=0,b=r/2,y=new F,x=new F;h&&e==0&&(e=l),h&&t==0&&(t=u);let S=new ue(e,b),w=new ue(t,-b),_=null,C=null,E=null,A=null,M=S.clone().sub(w),I=0,O=0,T=0;c>0&&(I=Math.min(e,t)*(1-c),O=e-I,T=t-I);let D=S.clone();D.x-=I;let N=Math.PI-M.angle(),k=M.angle(),R=Math.tan(k/2),z=Math.tan(N/2),j=R+z,$=c?j:z,U=c?j:R;if(l=Math.min(l,(e-O)/$,M.length()/j),u=Math.min(u,(t-T)/U,M.length()/j),l>0){let J=l/R;_=S.clone().sub(new ue(J,l)),c&&(E=_.clone(),E.x-=I-j*l),S.sub(M.clone().setLength(J))}if(u>0){let J=u/z;C=w.clone().sub(new ue(J,-u)),w.add(M.clone().setLength(J)),c&&(A=C.clone(),A.x-=I-j*u,D.sub(M.clone().setLength(J)))}M=S.clone().sub(w);let H=M.length()<.5,V=[];for(let J=0;J<=n;J++){let W=[],te=J/n,Z=te*s+a,q=new ue(Math.sin(Z),Math.cos(Z));A&&C?(Q(W,te,q,N,u,A,-1,!0),Q(W,te,q,k,u,C,-1,!1)):C?(X(W,q,C.x,0,-1),Q(W,te,q,k,u,C,-1,!1)):o||X(W,q,t,T,-1);let ie=FK(M).normalize();if(Lh(ie,q,y),!H)for(let he=0;he<=i;he++){let ae=he/i,be=M.clone().multiplyScalar(ae).add(w);Lh(be,q,x),m.push(x.x,x.y,x.z),p.push(y.x,y.y,y.z),g.push(te,.5+x.y/r),W.push(v++)}if(E&&_?(Q(W,te,q,N,l,_,1,!1),Q(W,te,q,k,l,E,1,!0)):_?(Q(W,te,q,N,l,_,1,!1),X(W,q,_.x,0,1)):o||X(W,q,e,O,1),c&&!H){let he=FK(M).multiplyScalar(-1).normalize();Lh(he,q,y);for(let ae=0;ae<=i;ae++){let be=ae/i,ye=M.clone().multiplyScalar(-be).add(D);Lh(ye,q,x),m.push(x.x,x.y,x.z),p.push(y.x,y.y,y.z),g.push(te,.5+x.y/r),W.push(v++)}}c&&!o&&W.push(W[0]),V.push(W)}for(let J=0;J<V.length-1;J++)for(let W=0;W<V[0].length-1;W++){if(o&&c&&W==i)continue;let te=V[J][W],Z=V[J+1][W],q=V[J+1][W+1],ie=V[J][W+1],he=m[q*3+0],ae=m[q*3+2];f.push(te,Z,ie),(he!=0||ae!=0)&&f.push(Z,q,ie)}s<Math.PI*2&&(ne(-1,V[0],a),ne(1,V[V.length-1],a+s)),this.setIndex(f),this.setAttribute("position",new ft(m,3)),this.setAttribute("normal",new ft(p,3)),this.setAttribute("uv",new ft(g,2));function Q(J,W,te,Z,q,ie,he,ae){for(let be=0;be<d+1;be++){let ye=be/d,Se=he<0?ye:1-ye;ae&&(Se-=1),Se*=Z;let me=new ue(Math.sin(Se),Math.cos(Se)*he),Pe=me.clone().multiplyScalar(q).add(ie);Lh(Pe,te,x),m.push(x.x,x.y,x.z),Lh(me,te,y),p.push(y.x,y.y,y.z),g.push(W,.5+x.y/r),J.push(v++)}}function X(J,W,te,Z,q){let ie=new F,he=new ue,ae=[te,Z];q<0&&ae.reverse();for(let be of ae)he.set(be,b*q),Lh(he,W,ie),m.push(ie.x,ie.y,ie.z),p.push(0,q,0),g.push(.5,.5),J.push(v++)}function ne(J,W,te){let Z=new ue(Math.sin(te),Math.cos(te)),q=new ue(-Math.cos(te),Math.sin(te)),ie=new F,he=J<0?(ye,Se,me)=>f.push(ye,Se,me):(ye,Se,me)=>f.push(ye,me,Se),ae=new ue((e+t+O+T)/4,0);Lh(ae,Z,ie),m.push(ie.x,ie.y,ie.z),p.push(q.x,0,q.y),g.push(.5,.5);let be=v++;for(let ye of W){let Se=m.slice(ye*3,ye*3+3);m.push(...Se),p.push(q.x,0,q.y);let me=g.slice(ye*2,ye*2+2);g.push(...me),v++}for(let ye=be+1;ye<v-1;ye++)he(be,ye,ye+1);he(be,v-1,be+1)}}},l0t=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:32,heightSegments:8,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadiusTop:8,cornerRadiusBottom:8,cornerSegments:8},e.parameters);return r.thetaLength=Et.clamp(r.thetaLength,0,360),{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,depth:r,height:n,radialSegments:i,heightSegments:o,openEnded:a,thetaStart:s,thetaLength:l,cornerRadiusTop:u,cornerRadiusBottom:d,cornerSegments:c}=e.parameters,h;return l===0?(h=new Nt,h.setAttribute("position",new ft([],3))):u>0||d>0||l<360?h=new Ele(0,t/2,n,i,o,a,s,l*Math.PI/180,u,d,c,0,!0):h=new Lae(t/2,n,i,o,a),h.scale(1,1,r/t),Object.assign(h,{userData:{...e,type:"ConeGeometry"}})}},u0t=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,widthSegments:1,heightSegments:1,depthSegments:1,cornerRadius:8,cornerSegments:8},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,height:r,depth:n,widthSegments:i,heightSegments:o,depthSegments:a,cornerRadius:s,cornerSegments:l}=e.parameters,u;return s==0?u=new Jc(t,r,n,i,o,a):u=new c0t(t,r,n,i,o,a,s,l),Object.assign(u,{userData:{...e,type:"CubeGeometry"}})}},xR=Math.PI/2,c0t=class extends Nt{constructor(e=1,t=1,r=1,n=1,i=1,o=1,a=0,s=4){super(),this.type="BoxGeometry";let l=this;n=Math.floor(n),i=Math.floor(i),o=Math.floor(o),s=Math.floor(s),a=Math.min(a,e/2,t/2,r/2);let u=[],d=[],c=[],h=[],f=0,m=0;p("z","y","x",-1,-1,r,t,e,o,i,0),p("z","y","x",1,-1,r,t,-e,o,i,1),p("x","z","y",1,1,e,r,t,n,o,2),p("x","z","y",1,-1,e,r,-t,n,o,3),p("x","y","z",1,-1,e,t,r,n,i,4),p("x","y","z",-1,-1,e,t,-r,n,i,5),a>0&&(g("z","y","x",-1,-1,1,r,t,e,o,0),g("z","y","x",1,-1,-1,r,t,e,o,1),g("z","y","x",-1,1,-1,r,t,e,o,1),g("z","y","x",1,1,1,r,t,e,o,0),g("x","y","z",-1,-1,-1,e,t,r,n,0),g("x","y","z",1,-1,1,e,t,r,n,1),g("x","y","z",-1,1,1,e,t,r,n,0),g("x","y","z",1,1,-1,e,t,r,n,1),g("y","x","z",-1,-1,1,t,e,r,i,0),g("y","x","z",1,-1,-1,t,e,r,i,1),g("y","x","z",1,1,1,t,e,r,i,1),g("y","x","z",-1,1,-1,t,e,r,i,0),v(1,1,1),v(-1,1,1),v(1,-1,1),v(-1,-1,1),v(1,1,-1),v(-1,1,-1),v(1,-1,-1),v(-1,-1,-1)),this.setIndex(u),this.setAttribute("position",new ft(d,3)),this.setAttribute("normal",new ft(c,3)),this.setAttribute("uv",new ft(h,2));function p(b,y,x,S,w,_,C,E,A,M,I){let O=(_-2*a)/A,T=(C-2*a)/M,D=_/2-a,N=C/2-a,k=E/2,R=A+1,z=M+1,j=0,$=0,U=new F;for(let H=0;H<z;H++){let V=H*T-N;for(let Q=0;Q<R;Q++){let X=Q*O-D;U[b]=X*S,U[y]=V*w,U[x]=k,d.push(U.x,U.y,U.z),U[b]=0,U[y]=0,U[x]=E>0?1:-1,c.push(U.x,U.y,U.z),h.push(Q/A),h.push(1-H/M),j+=1}}for(let H=0;H<M;H++)for(let V=0;V<A;V++){let Q=f+V+R*H,X=f+V+R*(H+1),ne=f+(V+1)+R*(H+1),J=f+(V+1)+R*H;u.push(Q,X,J),u.push(X,ne,J),$+=6}l.addGroup(m,$,I),m+=$,f+=j}function g(b,y,x,S,w,_,C,E,A,M,I){let O=(C-2*a)/M,T=C/2-a,D=E/2-a,N=A/2,k=M+1,R=0,z=0,j=new F,$=new F;for(let U=0;U<s+1;U++){let H=U/s*xR,V=Math.sin(H)*a,Q=(1-Math.cos(H))*a,X=Math.sin(H),ne=Math.cos(H);j[y]=(D+V)*w,j[x]=(N-Q)*_,$[b]=0,$[y]=X*Math.sign(j[y]),$[x]=ne*Math.sign(j[x]);for(let J=0;J<k;J++){let W=J*O-T;j[b]=W*S,d.push(j.x,j.y,j.z),c.push($.x,$.y,$.z),h.push(J/M),h.push(0),R+=1}}for(let U=0;U<s;U++)for(let H=0;H<M;H++){let V=f+H+k*U,Q=f+H+k*(U+1),X=f+(H+1)+k*(U+1),ne=f+(H+1)+k*U;u.push(V,Q,ne),u.push(Q,X,ne),z+=6}l.addGroup(m,z,I),m+=z,f+=R}function v(b,y,x){let S=new F,w=new F(e/2,t/2,r/2);w.subScalar(a);let _=[],C=b*y*x>0?(A,M,I)=>u.push(A,M,I):(A,M,I)=>u.push(A,I,M);for(let A=0;A<=s;A++){let M=[],I=xR*(1-A/s),O=Math.cos(I),T=Math.sin(I),D=0;for(let N=0;N<=A;N++){let k=Math.cos(D),R=Math.sin(D);S.x=O*k,S.y=T,S.z=O*R;let z=w.clone().addScaledVector(S,a);d.push(b*z.x,y*z.y,x*z.z),c.push(b*S.x,y*S.y,x*S.z),h.push(0,0),M.push(f++),D+=xR/A}_.push(M)}let E=_.length-1;for(let A=0;A<E;A++){let M=_[A],I=_[A+1],O=M.length-1;C(M[0],I[1],I[0]);for(let T=1;T<=O;T++)C(M[T-1],M[T],I[T]),C(M[T],I[T+1],I[T])}}}},MU=class extends Nt{constructor(e=[],t=[],r="",n=1,i=.2,o=4){super(),this.type="PolyhedronGeometryRound";let a=[],s=[],l=[];u(),d(),this.setAttribute("position",new ft(a,3)),this.setAttribute("normal",new ft(l,3)),this.setAttribute("uv",new ft(s,2));return;function u(){var k;i=Math.min(1-1e-5,i),i==0&&(o=0);let c={IcosahedronGeometry:5,DodecahedronGeometry:3,HexahedronGeometry:3,OctahedronGeometry:4,TetrahedronGeometry:3}[r],h=new F,f=h.clone(),m=new aa,p=i*n,g=n-p,v=o+1,b=new F,y=(R,z)=>b.subVectors(R,z).normalize(),x=(R,z)=>Array(R).fill(void 0).map(z),S=x(e.length/3,(R,z)=>new F().fromArray(e,z*3).setLength(n)),w=[],_=1e6;for(let R=0;R<S.length;R++){let z=S[R],j=[],$,U,H,V=1e10,Q=-1;for(;(Q=t.indexOf(R,Q+1))!=-1;){let W=Q-Q%3;$=t[W+(Q+1)%3],U=t[W+(Q+2)%3],H=z.distanceToSquared(S[$]),V=Math.min(V,H),j.push([$,U,H])}V+=1e-6;let X=[],ne=0,J=j.length;for(let W=0;W<J;W++){[$,U,H]=j[ne];let te=((k=w[$])==null?void 0:k.includes(R))==!0;H<=V&&X.push($+ +te*_),ne=j.findIndex(Z=>Z[0]==U)}w.push(X)}let C=[];{let R=0,z=0,j,$,U=c==3;for(let H=0;H<=o;H++){j=H*(H+1)/2,$=(H+1)*(H+2)/2;for(let V=0;V<o-H;V++)[R,z]=[j+V+H+2,$+V+H+3],C.push(j,$,...U?[z,j]:[R,$],z,R),[j,$]=[R,z];C.push(j,$,j+o+2)}}let E=h.clone(),A=h.clone(),M=h.clone(),I=h.clone(),O=h.clone(),T=[],D=x(S.length,()=>x(c,()=>h.clone()));for(let R=0;R<S.length;R++){h.copy(S[R]).normalize(),E.copy(h).multiplyScalar(g);let z=w[R];for(let X=0;X<z.length;X++){let ne=z[X],J=z[(X+1)%c];m.setFromPointsAndIndices(S,R,ne%_,J%_),m.b.sub(m.a).setLength(1e10).add(m.a),m.c.sub(m.a).setLength(1e10).add(m.a),m.closestPointToPoint(E,D[R][X])}let j=[],$=[],U=[],H=new F;o==0&&[...D[R]].reduce((X,ne)=>X.add(ne),H).multiplyScalar(1/c);for(let X=0;X<c;X++){let ne=[],J=(X-1+c)%c,W=D[R][J],te=D[R][X];h.copy(W).sub(E),f.copy(te).sub(E);let Z=E.angleTo(h),q=h.angleTo(f),ie=Math.cos(Z)*p;o==0?A.copy(H):A.copy(E).setLength(g+ie),$.push(ie);let he=[A,W,te];for(let ae=0;ae<2;ae++){let be=he[ae],ye=he[ae+1];I.subVectors(be,E),O.subVectors(ye,E),M.crossVectors(I,O).normalize();for(let Se=0;Se<v;Se++){let me=[Z,q][ae]*Se/v;h.copy(I).applyAxisAngle(M,me).add(E),j.push(h.clone()),ae&&(y(h,E),ne.push([Se==0?be:h.clone(),b.clone()]))}ae&&(y(ye,E),ne.push([ye,b.clone()]))}U.push(ne)}T.push(U);let V=2*v,Q=2;for(let X=0;X<c;X++){let ne=V*X,J=V*((X+1)%c),W=[j[ne]];for(let Z=1;Z<v;Z++){I=j[ne+Z],O=j[J+Z],W.push(I);for(let q=1,ie=Z-Q+1;q<=ie;q++)h.lerpVectors(I,O,q/(ie+1)),h.sub(E).setLength($[X]).add(E),W.push(h.clone());W.push(O)}for(let Z=0;Z<v;Z++)W.push(j[Z+v+ne]);W.push(j[J+v]);let te=C.map(Z=>W[Z]);a.push(...te.map(Z=>[Z.x,Z.y,Z.z]).flat()),l.push(...te.map(Z=>(y(Z,E),[b.x,b.y,b.z])).flat())}}let N=[];for(let R=0;R<w.length;R++)for(let z=0;z<c;z++){let j=w[R][z];if(j<_){let $=w[j].findIndex(V=>V%_==R),U=T[R][z],H=T[j][$];for(let V=0;V<v;V++){let Q=U[V],X=H[v-V],ne=U[V+1],J=H[v-(V+1)];[Q,X,ne,ne,X,J].forEach(W=>{a.push(W[0].x,W[0].y,W[0].z),l.push(W[1].x,W[1].y,W[1].z)})}N.push(U[0][0],H[v][0],U[v][0],H[0][0])}}for(;N.length;){let R,z,j,$;[R,z]=N.splice(0,2);let U=[R];for(;R!=z;)U.push(z),j=N.indexOf(z),$=j%2,z=N.splice(j-$,2)[1-$];b.subVectors(U[0],U[1]).cross(h.subVectors(U[0],U[2])).normalize();let H=b.dot(U[0])<0;H&&b.negate();for(let V=1;V<=U.length-2;V++)[U[V+ +H],U[V+1-+H],U[0]].forEach(Q=>{a.push(Q.x,Q.y,Q.z),l.push(b.x,b.y,b.z)})}}function d(){let c=new F;for(let w=0;w<a.length;w+=3){c.x=a[w+0],c.y=a[w+1],c.z=a[w+2];let _=x(c)/2/Math.PI+.5,C=S(c)/Math.PI+.5;s.push(_,1-C)}let h=new F,f=new F,m=new F,p=new F,g=new ue,v=new ue,b=new ue,y=(w,_,C,E)=>{E<0&&w.x===1&&(s[_]=w.x-1),C.x===0&&C.z===0&&(s[_]=E/2/Math.PI+.5)};for(let w=0,_=0;w<a.length;w+=9,_+=6){h.set(a[w+0],a[w+1],a[w+2]),f.set(a[w+3],a[w+4],a[w+5]),m.set(a[w+6],a[w+7],a[w+8]),g.set(s[_+0],s[_+1]),v.set(s[_+2],s[_+3]),b.set(s[_+4],s[_+5]),p.copy(h).add(f).add(m).divideScalar(3);let C=x(p);y(g,_+0,h,C),y(v,_+2,f,C),y(b,_+4,m,C)}for(let w=0;w<s.length;w+=6){let _=s[w+0],C=s[w+2],E=s[w+4],A=Math.max(_,C,E),M=Math.min(_,C,E);A>.9&&M<.1&&(_<.2&&(s[w+0]+=1),C<.2&&(s[w+2]+=1),E<.2&&(s[w+4]+=1))}function x(w){return Math.atan2(w.z,-w.x)}function S(w){return Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))}}}static fromJSON(e){return new MU(e.vertices,e.indices,e.radius,e.corner,e.cornerSides)}},d0t=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,height:r,depth:n,detail:i,corner:o,cornerSides:a}=e.parameters,s=i===0&&o!==0?new Mle(t*.5,o,a):new Nae(t*.5,i);return s.scale(1,r/t,n/t),Object.assign(s,{userData:{...e,type:"DodecahedronGeometry"}})}},Mle=class extends MU{constructor(e=1,t=.2,r=4){let n=(1+Math.sqrt(5))/2,i=1/n,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],s="DodecahedronGeometry";super(o,a,s,e,t,r),this.type=s}static fromJSON(e){return new Mle(e.radius,e.corner,e.cornerSides)}},fx=1e-12,PU=class{constructor(e){this.position=new ue,this.startPosition=new ue,this.uuid=Et.generateUUID(),this.position=e.clone()}start(){this.reset()}reset(){this.startPosition.copy(this.position)}applyOffset(e){this.position.copy(this.startPosition).add(e)}copy(e){return this.position.copy(e.position),this.startPosition.copy(e.startPosition),this}clone(){return new PU(this.position).copy(this)}toJSON(){return[this.position.x,this.position.y]}},Mz=class extends PU{constructor(e){super(e.position),this.parent=e}copy(e){return super.copy(e),this}clone(){return new Mz(this.parent).copy(this)}},xy=class extends PU{constructor(e,t){super(t),this.controls=[],this.roundness=0,this.areControlsDirectionsMirrored=!0,this.uuid=e,this.controls.push(new Mz(this),new Mz(this))}static create(e,t){let r=new xy(e,new ue(...t.position));return r.controls[0].position.set(...t.controlPrevious.position),r.controls[1].position.set(...t.controlNext.position),r.roundness=t.roundness,r.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored,r}getOppositeControl(e){let t=this.controls.indexOf(e);return t===0?this.controls[1]:t===1?this.controls[0]:null}applyOffsetToControls(e,t=1){for(let r=0,n=this.controls.length;r<n;r++){let i=this.controls[r];this.position.distanceTo(i.position)<=t?i.position.copy(this.position):i.applyOffset(e)}}controlsMoved(){return!(this.position.equals(this.controls[0].position)&&this.position.equals(this.controls[1].position))}copy(e){return super.copy(e),this.controls[0].copy(e.controls[0]),this.controls[1].copy(e.controls[1]),this.roundness=e.roundness,this.uuid=e.uuid,this}clone(){return new xy(this.uuid,this.position).copy(this)}toJSON(){return super.toJSON().concat(this.controls[0].toJSON(),this.controls[1].toJSON(),[this.roundness])}computeTangents(){var r,n;let e=(r=this.curveBefore)==null?void 0:r.getTangentAt(1),t=(n=this.curveAfter)==null?void 0:n.getTangentAt(0);return[e,t]}computeNormals(e=new ue,t=new ue){let[r,n]=this.computeTangents();return r&&n&&(jK(r,e),jK(n,t)),[e,t]}computeTangent(e=new ue){let[t,r]=this.computeTangents();return t&&r&&e.copy(t).add(r).normalize(),e}computeNormal(e=new ue){let[t,r]=this.computeNormals();return e.copy(t).add(r).normalize(),e}};function jK(e,t=new ue){let r=e.length();return t.set(-e.y/r,e.x/r)}var TU=e=>e,xb=new ue,CO=new ue,h0t=new ue,f0t=new ue,p0t=new ue,m0t=new ue,Ple=new F,Tle=new F;function g0t(e){let t=new ue;t.addVectors(e.v0,xb.subVectors(e.v1,e.v0).multiplyScalar(2/3));let r=new ue;return r.addVectors(e.v2,CO.subVectors(e.v1,e.v2).multiplyScalar(2/3)),new _u(e.v0,t,r,e.v2)}function Hx(e,t,r=Number.EPSILON){return Math.abs(e-t)<r}function v0t(e,t,r=Number.EPSILON){return e.distanceTo(t)<r}function y0t(e,t,r=Number.EPSILON){return e.distanceTo(t)<r}function Ole(e,t,r){let n=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),i=Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2)),o=Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2));return Math.acos((i*i+n*n-o*o)/(2*i*n))}function b0t(e,t,r){return $K(e,t)&&$K(t,r)&&Pz(e.position,t.position,r.position)}function Pz(e,t,r){return xb.copy(t).sub(e).cross(CO.copy(r).sub(e))===0}function x0t(e,t,r,n,i){let o=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),a=(e.y+t.y)/2,s=(e.x+t.x)/2,l=Math.sqrt(Math.pow(r,2)-Math.pow(o/2,2))*(e.y-t.y)/o,u=Math.sqrt(Math.pow(r,2)-Math.pow(o/2,2))*(t.x-e.x)/o;return n.set(s+l,a+u),i.set(s-l,a-u),[n,i]}function w0t(e,t,r){let n=e.distanceTo(r),i=t.distanceTo(r);return n<i?t:e}function S0t(e,t,r,n,i,o){let a=t.x-e.x,s=t.y-e.y,l=r.x-e.x,u=r.y-e.y,d=Math.sqrt((a+l)*(a+l)+(s+u)*(s+u)),c;return Ole(t,e,r)>Math.PI&&(d*=-1),Hx(u,s)?c=(s+u)*(n/d-.5)*8/3/(a-l):c=(a+l)*(n/d-.5)*8/3/(u-s),i.set(t.x-c*s,t.y+c*a),o.set(r.x+c*u,r.y-c*l),[i,o]}function UK(e,t){return e.position.equals(e.controls[1].position)&&t.position.equals(t.controls[0].position)}function $K(e,t){return Pz(e.position,e.controls[1].position,t.position)&&Pz(e.position,t.controls[0].position,t.position)}function _0t(e,t,r,n,i=.5){let o=xb.subVectors(t,e).multiplyScalar(i).add(e),a=CO.subVectors(r,t).multiplyScalar(i).add(t),s=h0t.subVectors(n,r).multiplyScalar(i).add(r),l=o,u=f0t.subVectors(a,o).multiplyScalar(i).add(o),d=p0t.subVectors(s,a).multiplyScalar(i).add(a),c=s,h=m0t.subVectors(d,u).multiplyScalar(i).add(u);return[e.x,e.y,l.x,l.y,u.x,u.y,h.x,h.y,d.x,d.y,c.x,c.y,n.x,n.y]}function C0t(e,t,r=12,n=!0){let i=Tle.set(0,0,0),o,a=0;for(let s=0;s<t.length;s++){let l=TU(t[s]),u=xb,d=Im(l,r);for(let c=0;c<=d;c++)if(l instanceof _u||l instanceof np||l instanceof Ru){if(l.getPoint(c/d,u),i.set(u.x,u.y,0),o!==void 0&&y0t(o,i))continue;o===void 0&&(o=Ple),o.copy(i),e.setXYZ(a,i.x,i.y,i.z),a++}}return n&&a>1&&!(e.getX(a-1)===e.getX(0)&&e.getY(a-1)===e.getY(0)&&e.getZ(a-1)===e.getZ(0))&&(e.setXYZ(a,e.getX(0),e.getY(0),e.getZ(0)),a++),e}function A0t(e,t,r,n=12,i=!0){let o=Tle.set(0,0,0),a=0,s=[];for(let l=0;l<t.length;l++){if(r[l]===!1)continue;let u,d=TU(t[l]),c=xb,h=Im(d,n);s.push(h);for(let f=0;f<=h;f++)if(d instanceof _u||d instanceof np||d instanceof Ru){if(d.getPoint(f/h,c),o.set(c.x,c.y,0),u==null?void 0:u.equals(o))continue;u===void 0?u=Ple:(e.setXYZ(a,u.x,u.y,u.z),a++,e.setXYZ(a,o.x,o.y,o.z),a++),u.copy(o)}}return i&&a>1&&!(e.getX(a-1)===e.getX(0)&&e.getY(a-1)===e.getY(0)&&e.getZ(a-1)===e.getZ(0))&&(e.setXYZ(a,e.getX(0),e.getY(0),e.getZ(0)),a++),s}function VK(e,t=12,r=!1){let n=[];for(let i=0,o=e.length;i<o;i++){let a=e[i],s=0;if(r&&a.roundedCurveCorner!==void 0){let l=Im(a.roundedCurveCorner,t)*.5;i>0&&(n[i-1]+=l),s+=l}a.curveAfter!==void 0&&(s+=Im(a.curveAfter,t)),n.push(s)}return e.length>0&&r&&e[0].roundedCurveCorner!==void 0&&(n[e.length-1]+=Im(e[0].roundedCurveCorner,t)*.5),n}function Im(e,t=12){return e&&e instanceof lO?t*2:e&&(e instanceof Ru||e instanceof Dae)?1:e&&e instanceof $4?t*e.points.length:t}function E0t(e,t,r=12,n=!0){let i,o=0;for(let a=0;a<t.length;a++){let s=TU(t[a]),l=Im(s,r),u=xb;for(let d=0;d<=l;d++)if(s instanceof _u||s instanceof np||s instanceof Ru){if(s.getPoint(d/l,u),i!==void 0&&v0t(i,u,fx))continue;i===void 0&&(i=CO),i.copy(u),e.push(u.x,u.y),o++}}return Hx(e[0],e[e.length-2],fx)&&Hx(e[1],e[e.length-1],fx)&&(e.pop(),e.pop()),n&&o>1&&!(Hx(e[o-1],e[1],fx)&&Hx(e[o-2],e[0],fx))&&(e.push(e[0],e[1]),o++),e}var wR=new ue,M0t=new ue,P0t=new ue,T0t=new ue,O0t=new ue,I0t=new ue,bi=class extends sP{constructor(e=100,t=100){super(),this.points=[],this.shapeHoles=[],this.plane=new Hs(new F(0,0,-1)),this.subdivision=0,this.controlSnapDistance=4,this.pointIDs=0,this.isMesh2D=!1,this.isText=!1,this._roundness=0,this.isClosed=!1,this.useCubicForRoundedCorners=!0,this.uuid=Et.generateUUID(),this.needsUpdate=!1,this.roundedCurves=[],this._width=e,this._height=t}static createFromState(e,t,r){let n=new bi;return n.isClosed=e.isClosed,n.points=e.points.map(i=>xy.create(i.id,i.data)),typeof e.roundness=="number"&&(n.roundness=e.roundness),n.shapeHoles=e.shapeHoles.map(i=>bi.createFromState(i)),t!==void 0&&r!==void 0&&n.applySize(t,r),n.update(),n}get width(){return this._width}get height(){return this._height}get roundness(){return this._roundness}set roundness(e){if(this._roundness!==e){this._roundness=e;for(let t=0,r=this.points.length;t<r;t++)this.points[t].roundness=e;this.needsUpdate=!0}}getPointsIndexesByIds(e){return e.map(t=>this.getPointIndexById(t)).filter(t=>t>=0)}getPointIndexById(e){let t=this.points.length,r=this.points.findIndex(n=>n.uuid===e);if(r<0){let n=t;for(let i=0,o=this.shapeHoles.length;i<o;i++){let a=this.shapeHoles[i],s=a.points.length,l=a.getPointIndexById(e);if(l<0)n+=s;else return l+n}}return r}getLineIndexById(e){return this.getPointIndexById(e)}getBezierPoint(e){if(e<=this.points.length-1)return this.points[e];if(this.shapeHoles.length>0){let t=this.points.length;for(let r=0,n=this.shapeHoles.length;r<n;r++){let i=this.shapeHoles[r],o=e-t;if(o<=i.points.length-1)return i.points[o];t+=i.points.length}}throw new Error("This shape does not have a point for this index: "+e)}getBezierPointIndex(e){let t=this.points.indexOf(e);if(t>=0)return t;if(t=this.points.length,this.shapeHoles.length>0)for(let r=0,n=this.shapeHoles.length;r<n;r++){let i=this.shapeHoles[r],o=i.points.indexOf(e);if(o>=0)return t+o;t+=i.points.length}return-1}getAllPoints(){let e=[].concat(...this.shapeHoles.map(t=>t.points));return[...this.points,...e]}applySize(e,t){e===0&&(e=.001),t===0&&(t=.001),this._width=e,this._height=t}applyScale(e,t){let r=wR.set(e,t);for(let n=0,i=this.points.length;n<i;n++){let o=this.points[n];o.position.multiply(r),o.controls[0].position.multiply(r),o.controls[1].position.multiply(r)}for(let n=0,i=this.shapeHoles.length;n<i;n++)this.shapeHoles[n].applyScale(e,t);this._update()}createPoint(e,t=0,r=Et.generateUUID()){let n;e instanceof ue?n=e:n=new ue(e,t);let i=new xy(r,n);return i.roundness=this.roundness,i}addPoint(e){this.points.push(e),this.needsUpdate=!0}addPointAt(e,t){this.points.splice(t,0,e),this.needsUpdate=!0}getPointByUuid(e){for(let t=0,r=this.points.length;t<r;t++){let n=this.points[t];if(n.uuid===e)return n}for(let t=0,r=this.shapeHoles.length;t<r;t++){let n=this.shapeHoles[t].getPointByUuid(e);if(n)return n}}getFirstPoint(){return this.points[0]}getLastPoint(){return this.points[this.points.length-1]}removePoint(e){let t=this.points.indexOf(e);t>=0&&this.points.splice(t,1),this.needsUpdate=!0}removePointById(e){let t=this.points.find(r=>r.uuid===e);t&&this.removePoint(t)}update(){for(let e=0,t=this.shapeHoles.length;e<t;e++)this.shapeHoles[e].update();this._update()}extractShapePointsToBuffer(e,t=12,r=!1){this.subdivision=t,this.curveDivisions===void 0&&this.computeCurveDivisions(t);let n=r?this.roundedCurveDivisions:this.curveDivisions;return C0t(e,r?this.roundedCurves:this.curves,t,this.autoClose),n.reduce((i,o)=>i+o,0)+1}computeCurveDivisions(e=12){return this.curveDivisions=VK(this.points,e,!1),this.roundedCurveDivisions=VK(this.points,e,!0),this.curveDivisions}extractFilteredShapePointsToBuffer(e,t,r=12){return A0t(e,this.curves,t,r,this.autoClose).reduce((n,i)=>n+i,0)*2}extractShapePointsToFlatArray(e,t=12){return this.subdivision=t,this.curveDivisions===void 0&&this.computeCurveDivisions(t),E0t(e,this.roundedCurves,t,this.autoClose)}getCurveIndexFromVertexId(e,t=!1){let r=0;this.curveDivisions===void 0&&this.computeCurveDivisions(this.subdivision);let n=t?this.roundedCurveDivisions:this.curveDivisions,i=0;t&&this.points[0].roundedCurveCorner!==void 0&&(i=Im(this.points[0].roundedCurveCorner,this.subdivision)*.5);let o=e-i;o<0&&(o+=n.reduce((a,s)=>a+s,0));for(let a=0,s=n.length;a<s;a++){let l=n[a];if(o<r+l)return[a,(o-r+1)/l];r+=l}return[0,1]}getCurveT(e,t,r){let n=this.points[e],i=this.points[e>=this.points.length-1?0:e+1],o=this.curveDivisions,a=o[e];if(UK(n,i)){let l=n.position.distanceTo(i.position);return n.position.distanceTo(wR.set(r.x,r.y))/l}let s=0;for(let l=0;l<e;l++)s+=o[l];return(t-s)/a}dispose(){}_applyCurveForPoint(e,t){UK(t,e)?this.lineTo(e.position.x,e.position.y):this.bezierCurveTo(t.controls[1].position.x,t.controls[1].position.y,e.controls[0].position.x,e.controls[0].position.y,e.position.x,e.position.y);let r=this.curves[this.curves.length-1];e.curveBefore=r,t.curveAfter=r;let n=r.clone();e.roundedCurveBefore=n,t.roundedCurveAfter=n,e.roundedCurveCorner=void 0,this.roundedCurves.push(n)}_update(){if(this.curves=[],this.roundedCurves=[],!this.points.length)return;for(let t=0,r=this.points.length;t<r;t++){let n=this.points[t];if(t===0)this.moveTo(n.position.x,n.position.y);else{let i=this.points[t-1];this._applyCurveForPoint(n,i)}}let e=this.getLastPoint();if(e!=null&&e.curveAfter&&(e.curveAfter=void 0),this.isClosed){let t=this.points[0],r=this.points[this.points.length-1];this._applyCurveForPoint(t,r)}if(this.points.length>2){let t=0;for(let r=0,n=this.points.length;r<n;r++){let i=this.points[r],o=this.points[r-1]??this.points[this.points.length-1],a=this.points[r+1]??this.points[0],s=i.roundness,l=o&&a&&b0t(o,i,a);if(!i.controlsMoved()&&s>0&&!l){let u=i.curveBefore,d=i.curveAfter;if(u===void 0||d===void 0)continue;let c=i.roundedCurveBefore,h=i.roundedCurveAfter,f=u.getLength(),m=d.getLength(),p=Math.min(s,f*.499),g=Math.min(s,m*.499),v=Math.min(p,g),b=1-v/f,y=v/m,x=u.getPointAt(b,wR),S=d.getPointAt(y,M0t);this._subSplitCurve(u,c,b,x,void 0),this._subSplitCurve(d,h,y,void 0,S);let w;if(this.useCubicForRoundedCorners){let _=Ole(x,i.position,S)/2,C=Math.tan(_)*x.distanceTo(i.position),[E,A]=x0t(x,S,C,P0t,T0t),M=w0t(E,A,i.position),[I,O]=S0t(M,x,S,C,O0t,I0t);w=new _u(x.clone(),I.clone(),O.clone(),S.clone())}else w=new np(x.clone(),i.position.clone(),S.clone());i.roundedCurveCorner=w,this.roundedCurves.splice(r+t,0,w),t++}}}}_subSplitCurve(e,t,r,n,i){if(e instanceof Ru)n!==void 0&&t.v2.copy(n),i!==void 0&&t.v1.copy(i);else{let o=e,a=t,s=o.getUtoTmapping(r,0),l=_0t(o.v0,o.v1,o.v2,o.v3,s);return n!==void 0&&(a.v0.set(l[0],l[1]),a.v1.set(l[2],l[3]),a.v2.set(l[4],l[5]),a.v3.set(l[6],l[7])),i!==void 0&&(a.v0.set(l[6],l[7]),a.v1.set(l[8],l[9]),a.v2.set(l[10],l[11]),a.v3.set(l[12],l[13])),a}return t}clone(){let e=new bi(this._width,this._height);return e.points=this.points.map(t=>t.clone()),e.isClosed=this.isClosed,e.roundness=this.roundness,e.isMesh2D=this.isMesh2D,e.shapeHoles=this.shapeHoles.map(t=>t.clone()),e}toJSON(){return{points:this.points.reduce((e,t)=>e.concat(t.toJSON()),[]),shapeHoles:this.shapeHoles.map(e=>e.toJSON()),isClosed:this.isClosed,roundness:this.roundness}}fromJSON(e){var r;this.points=[],this.pointIDs=0;let t=e.points.length/7;for(let n=0;n<t;n++){let i=n*7,o=e.points[i+0],a=e.points[i+1],s=e.points[i+2],l=e.points[i+3],u=e.points[i+4],d=e.points[i+5],c=e.points[i+6],h=new xy(Et.generateUUID(),new ue(o,a));h.controls[0].position.set(s,l),h.controls[1].position.set(u,d),h.roundness=c,this.points.push(h)}return this.shapeHoles=(r=e.shapeHoles)!=null&&r.length?e.shapeHoles.map(n=>{let i=new bi;return i.fromJSON(n),i}):[],this.isClosed=e.isClosed,this._roundness=e.roundness,this._update(),this}fromShape(e,t=!1){this.isText=t;let r=(i,o)=>{o instanceof _u&&o.v3.equals(i.position)&&i.controls[0].position.copy(o.v2)},n=i=>{let o=[],a,s;for(a=0,s=i.length;a<s;a++)i[a]instanceof np&&(i[a]=g0t(i[a]));for(a=0,s=i.length;a<s;a++){let d=i[a],c=a>0?i[a-1]:null,h;d instanceof _u?(h=this.createPoint(d.v0),h.controls[1].position.copy(d.v1)):d instanceof Ru&&(h=this.createPoint(d.v1)),h!==void 0&&(c!==null&&r(h,c),o.push(h))}let l=i[i.length-1],u=!1;return l instanceof _u?l.v3.equals(o[0].position)&&(o[0].controls[0].position.copy(l.v2),u=!0):l instanceof Ru&&l.v2.equals(o[0].position)&&(u=!0),this.isClosed=u,o};return this.points=n(e.curves),e instanceof sP&&(this.shapeHoles=e.holes.map(i=>{let o=new bi;return o.fromShape(i),o})),this.update(),this}updatePoint(e,t){let r=this.getPointByUuid(e);r&&(t.position!==void 0&&r.position.fromArray(t.position),t.roundness!==void 0&&(r.roundness=t.roundness),t.areControlsDirectionsMirrored!==void 0&&(r.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored),this.needsUpdate=!0)}updatePreviousControl(e,t){var n;let r=(n=this.getPointByUuid(e))==null?void 0:n.controls[0];r&&(t.position&&r.position.fromArray(t.position),this.needsUpdate=!0)}updateNextControl(e,t){var n;let r=(n=this.getPointByUuid(e))==null?void 0:n.controls[1];r&&(t.position&&r.position.fromArray(t.position),this.needsUpdate=!0)}},Tz=Math.PI*2;function SR({x:e,y:t},r,n,i,o){return{x:e*r+i,y:t*n+o}}function D0t(e,t){let r=t===1.5707963267948966?.551915024494:t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),n=Math.cos(e),i=Math.sin(e),o=Math.cos(e+t),a=Math.sin(e+t);return[{x:n-i*r,y:i+n*r},{x:o+a*r,y:a-o*r},{x:o,y:a}]}function HK(e,t,r,n){let i=e*n-t*r<0?-1:1,o=Math.min(1,Math.max(-1,e*r+t*n));return i*Math.acos(o)}function R0t(e,t,r,n,i,o,a,s,l,u){let d=Math.pow(i,2),c=Math.pow(o,2),h=Math.pow(a,2),f=Math.pow(s,2),m=d*c-d*f-c*h;m<0&&(m=0),m/=d*f+c*h,m=Math.sqrt(m)*(l===u?-1:1);let p=m*i/o*s,g=m*-o/i*a,v=p+(e+r)/2,b=g+(t+n)/2,y=(a-p)/i,x=(s-g)/o,S=(-a-p)/i,w=(-s-g)/o,_=HK(1,0,y,x),C=HK(y,x,S,w);return!u&&C>0&&(C-=Tz),u&&C<0&&(C+=Tz),{centerx:v,centery:b,ang1:_,ang2:C}}function k0t({px:e,py:t,cx:r,cy:n,rx:i,ry:o,largeArcFlag:a,sweepFlag:s}){let l=[];if(i===0||o===0)return[];let u=(e-r)/2,d=(t-n)/2;if(u===0&&d===0)return[];i=Math.abs(i),o=Math.abs(o);let c=Math.pow(u,2)/Math.pow(i,2)+Math.pow(d,2)/Math.pow(o,2);c>1&&(i*=Math.sqrt(c),o*=Math.sqrt(c));let h=R0t(e,t,r,n,i,o,u,d,a,s),{ang1:f,ang2:m}=h,{centerx:p,centery:g}=h,v=Math.abs(m)/(Tz/4);Math.abs(1-v)<1e-7&&(v=1);let b=Math.max(Math.ceil(v),1);m/=b;for(let y=0;y<b;y++)l.push(D0t(f,m)),f+=m;return l.map(y=>{let{x,y:S}=SR(y[0],i,o,p,g),{x:w,y:_}=SR(y[1],i,o,p,g),{x:C,y:E}=SR(y[2],i,o,p,g);return{x1:x,y1:S,x2:w,y2:_,x:C,y:E}})}var un;(function(e){e[e.ODD=0]="ODD",e[e.NONZERO=1]="NONZERO",e[e.POSITIVE=2]="POSITIVE",e[e.NEGATIVE=3]="NEGATIVE",e[e.ABS_GEQ_TWO=4]="ABS_GEQ_TWO"})(un||(un={}));var Gi;(function(e){e[e.POLYGONS=0]="POLYGONS",e[e.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",e[e.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS"})(Gi||(Gi={}));function Wt(e,t){if(!e)throw t||"Assertion Failed!"}var zt=function(){function e(){}return e.vertEq=function(t,r){return t.s===r.s&&t.t===r.t},e.vertLeq=function(t,r){return t.s<r.s||t.s===r.s&&t.t<=r.t},e.transLeq=function(t,r){return t.t<r.t||t.t===r.t&&t.s<=r.s},e.edgeGoesLeft=function(t){return e.vertLeq(t.Dst,t.Org)},e.edgeGoesRight=function(t){return e.vertLeq(t.Org,t.Dst)},e.vertL1dist=function(t,r){return Math.abs(t.s-r.s)+Math.abs(t.t-r.t)},e.edgeEval=function(t,r,n){Wt(e.vertLeq(t,r)&&e.vertLeq(r,n));var i=r.s-t.s,o=n.s-r.s;return i+o>0?i<o?r.t-t.t+(t.t-n.t)*(i/(i+o)):r.t-n.t+(n.t-t.t)*(o/(i+o)):0},e.edgeSign=function(t,r,n){Wt(e.vertLeq(t,r)&&e.vertLeq(r,n));var i=r.s-t.s,o=n.s-r.s;return i+o>0?(r.t-n.t)*i+(r.t-t.t)*o:0},e.transEval=function(t,r,n){Wt(e.transLeq(t,r)&&e.transLeq(r,n));var i=r.t-t.t,o=n.t-r.t;return i+o>0?i<o?r.s-t.s+(t.s-n.s)*(i/(i+o)):r.s-n.s+(n.s-t.s)*(o/(i+o)):0},e.transSign=function(t,r,n){Wt(e.transLeq(t,r)&&e.transLeq(r,n));var i=r.t-t.t,o=n.t-r.t;return i+o>0?(r.s-n.s)*i+(r.s-t.s)*o:0},e.vertCCW=function(t,r,n){return t.s*(r.t-n.t)+r.s*(n.t-t.t)+n.s*(t.t-r.t)>=0},e.interpolate=function(t,r,n,i){return t=t<0?0:t,n=n<0?0:n,t<=n?n===0?(r+i)/2:r+(i-r)*(t/(t+n)):i+(r-i)*(n/(t+n))},e.intersect=function(t,r,n,i,o){var a,s,l;e.vertLeq(t,r)||(l=t,t=r,r=l),e.vertLeq(n,i)||(l=n,n=i,i=l),e.vertLeq(t,n)||(l=t,t=n,n=l,l=r,r=i,i=l),e.vertLeq(n,r)?e.vertLeq(r,i)?(a=e.edgeEval(t,n,r),s=e.edgeEval(n,r,i),a+s<0&&(a=-a,s=-s),o.s=e.interpolate(a,n.s,s,r.s)):(a=e.edgeSign(t,n,r),s=-e.edgeSign(t,i,r),a+s<0&&(a=-a,s=-s),o.s=e.interpolate(a,n.s,s,i.s)):o.s=(n.s+r.s)/2,e.transLeq(t,r)||(l=t,t=r,r=l),e.transLeq(n,i)||(l=n,n=i,i=l),e.transLeq(t,n)||(l=t,t=n,n=l,l=r,r=i,i=l),e.transLeq(n,r)?e.transLeq(r,i)?(a=e.transEval(t,n,r),s=e.transEval(n,r,i),a+s<0&&(a=-a,s=-s),o.t=e.interpolate(a,n.t,s,r.t)):(a=e.transSign(t,n,r),s=-e.transSign(t,i,r),a+s<0&&(a=-a,s=-s),o.t=e.interpolate(a,n.t,s,i.t)):o.t=(n.t+r.t)/2},e}(),px=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1}return e}(),XC=function(){function e(t){this.side=t,this.next=null,this.Org=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Lface=null,this.activeRegion=null,this.winding=0}return Object.defineProperty(e.prototype,"Rface",{get:function(){return this.Sym.Lface},set:function(t){this.Sym.Lface=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dst",{get:function(){return this.Sym.Org},set:function(t){this.Sym.Org=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Oprev",{get:function(){return this.Sym.Lnext},set:function(t){this.Sym.Lnext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Lprev",{get:function(){return this.Onext.Sym},set:function(t){this.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dprev",{get:function(){return this.Lnext.Sym},set:function(t){this.Lnext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rprev",{get:function(){return this.Sym.Onext},set:function(t){this.Sym.Onext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dnext",{get:function(){return this.Sym.Onext.Sym},set:function(t){this.Sym.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rnext",{get:function(){return this.Sym.Lnext.Sym},set:function(t){this.Sym.Lnext.Sym=t},enumerable:!0,configurable:!0}),e}(),bv=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0}return e}(),GK=function(){function e(){var t=new bv,r=new px,n=new XC(0),i=new XC(1);t.next=t.prev=t,t.anEdge=null,r.next=r.prev=r,n.next=n,n.Sym=i,i.next=i,i.Sym=n,this.vHead=t,this.fHead=r,this.eHead=n,this.eHeadSym=i}return e.prototype.makeEdge_=function(t){var r=new XC(0),n=new XC(1);t.Sym.side<t.side&&(t=t.Sym);var i=t.Sym.next;return n.next=i,i.Sym.next=r,r.next=t,t.Sym.next=n,r.Sym=n,r.Onext=r,r.Lnext=n,r.Org=null,r.Lface=null,r.winding=0,r.activeRegion=null,n.Sym=r,n.Onext=n,n.Lnext=r,n.Org=null,n.Lface=null,n.winding=0,n.activeRegion=null,r},e.prototype.splice_=function(t,r){var n=t.Onext,i=r.Onext;n.Sym.Lnext=r,i.Sym.Lnext=t,t.Onext=i,r.Onext=n},e.prototype.makeVertex_=function(t,r,n){var i=t;Wt(i,"Vertex can't be null!");var o=n.prev;i.prev=o,o.next=i,i.next=n,n.prev=i,i.anEdge=r;var a=r;do a.Org=i,a=a.Onext;while(a!==r)},e.prototype.makeFace_=function(t,r,n){var i=t;Wt(i,"Face can't be null");var o=n.prev;i.prev=o,o.next=i,i.next=n,n.prev=i,i.anEdge=r,i.trail=null,i.marked=!1,i.inside=n.inside;var a=r;do a.Lface=i,a=a.Lnext;while(a!==r)},e.prototype.killEdge_=function(t){t.Sym.side<t.side&&(t=t.Sym);var r=t.next,n=t.Sym.next;r.Sym.next=n,n.Sym.next=r},e.prototype.killVertex_=function(t,r){var n=t.anEdge,i=n;do i.Org=r,i=i.Onext;while(i!==n);var o=t.prev,a=t.next;a.prev=o,o.next=a},e.prototype.killFace_=function(t,r){var n=t.anEdge,i=n;do i.Lface=r,i=i.Lnext;while(i!==n);var o=t.prev,a=t.next;a.prev=o,o.next=a},e.prototype.makeEdge=function(){var t=new bv,r=new bv,n=new px,i=this.makeEdge_(this.eHead);return this.makeVertex_(t,i,this.vHead),this.makeVertex_(r,i.Sym,this.vHead),this.makeFace_(n,i,this.fHead),i},e.prototype.splice=function(t,r){var n=!1,i=!1;if(t!==r){if(r.Org!==t.Org&&(i=!0,this.killVertex_(r.Org,t.Org)),r.Lface!==t.Lface&&(n=!0,this.killFace_(r.Lface,t.Lface)),this.splice_(r,t),!i){var o=new bv;this.makeVertex_(o,r,t.Org),t.Org.anEdge=t}if(!n){var a=new px;this.makeFace_(a,r,t.Lface),t.Lface.anEdge=t}}},e.prototype.delete=function(t){var r=t.Sym,n=!1;if(t.Lface!==t.Rface&&(n=!0,this.killFace_(t.Lface,t.Rface)),t.Onext===t)this.killVertex_(t.Org,null);else if(t.Rface.anEdge=t.Oprev,t.Org.anEdge=t.Onext,this.splice_(t,t.Oprev),!n){var i=new px;this.makeFace_(i,t,t.Lface)}r.Onext===r?(this.killVertex_(r.Org,null),this.killFace_(r.Lface,null)):(t.Lface.anEdge=r.Oprev,r.Org.anEdge=r.Onext,this.splice_(r,r.Oprev)),this.killEdge_(t)},e.prototype.addEdgeVertex=function(t){var r=this.makeEdge_(t),n=r.Sym;this.splice_(r,t.Lnext),r.Org=t.Dst;var i=new bv;return this.makeVertex_(i,n,r.Org),r.Lface=n.Lface=t.Lface,r},e.prototype.splitEdge=function(t){var r=this.addEdgeVertex(t),n=r.Sym;return this.splice_(t.Sym,t.Sym.Oprev),this.splice_(t.Sym,n),t.Dst=n.Org,n.Dst.anEdge=n.Sym,n.Rface=t.Rface,n.winding=t.winding,n.Sym.winding=t.Sym.winding,n.idx=t.idx,n.Sym.idx=t.Sym.idx,n},e.prototype.connect=function(t,r){var n=!1,i=this.makeEdge_(t),o=i.Sym;if(r.Lface!==t.Lface&&(n=!0,this.killFace_(r.Lface,t.Lface)),this.splice_(i,t.Lnext),this.splice_(o,r),i.Org=t.Dst,o.Org=r.Org,i.Lface=o.Lface=t.Lface,t.Lface.anEdge=o,!n){var a=new px;this.makeFace_(a,i,t.Lface)}return i},e.prototype.zapFace=function(t){var r=t.anEdge,n,i,o,a,s;i=r.Lnext;do n=i,i=n.Lnext,n.Lface=null,n.Rface===null&&(n.Onext===n?this.killVertex_(n.Org,null):(n.Org.anEdge=n.Onext,this.splice_(n,n.Oprev)),o=n.Sym,o.Onext===o?this.killVertex_(o.Org,null):(o.Org.anEdge=o.Onext,this.splice_(o,o.Oprev)),this.killEdge_(n));while(n!=r);a=t.prev,s=t.next,s.prev=a,a.next=s},e.prototype.countFaceVerts_=function(t){var r=t.anEdge,n=0;do n++,r=r.Lnext;while(r!==t.anEdge);return n},e.prototype.mergeConvexFaces=function(t){var r,n,i,o,a,s,l;for(r=this.fHead.next;r!==this.fHead;r=r.next)if(r.inside)for(n=r.anEdge,a=n.Org;i=n.Lnext,o=n.Sym,o&&o.Lface&&o.Lface.inside&&(s=this.countFaceVerts_(r),l=this.countFaceVerts_(o.Lface),s+l-2<=t&&zt.vertCCW(n.Lprev.Org,n.Org,o.Lnext.Lnext.Org)&&zt.vertCCW(o.Lprev.Org,o.Org,n.Lnext.Lnext.Org)&&(i=o.Lnext,this.delete(o),n=null,o=null)),!(n&&n.Lnext.Org===a);)n=i;return!0},e.prototype.check=function(){var t=this.fHead,r=this.vHead,n=this.eHead,i,o,a,s,l,u;for(o=t,o=t;(i=o.next)!==t;o=i){Wt(i.prev===o),l=i.anEdge;do Wt(l.Sym!==l),Wt(l.Sym.Sym===l),Wt(l.Lnext.Onext.Sym===l),Wt(l.Onext.Sym.Lnext===l),Wt(l.Lface===i),l=l.Lnext;while(l!==i.anEdge)}for(Wt(i.prev===o&&i.anEdge===null),s=r,s=r;(a=s.next)!==r;s=a){Wt(a.prev===s),l=a.anEdge;do Wt(l.Sym!==l),Wt(l.Sym.Sym===l),Wt(l.Lnext.Onext.Sym===l),Wt(l.Onext.Sym.Lnext===l),Wt(l.Org===a),l=l.Onext;while(l!==a.anEdge)}for(Wt(a.prev===s&&a.anEdge===null),u=n,u=n;(l=u.next)!==n;u=l)Wt(l.Sym.next===u.Sym),Wt(l.Sym!==l),Wt(l.Sym.Sym===l),Wt(l.Org!==null),Wt(l.Dst!==null),Wt(l.Lnext.Onext.Sym===l),Wt(l.Onext.Sym.Lnext===l);Wt(l.Sym.next===u.Sym&&l.Sym===this.eHeadSym&&l.Sym.Sym===l&&l.Org===null&&l.Dst===null&&l.Lface===null&&l.Rface===null)},e}(),WK=function(){function e(){this.handle=null}return e}(),qK=function(){function e(){this.key=null,this.node=0}return e}(),L0t=function(){function e(t,r){this.leq=r,this.max=0,this.nodes=[],this.handles=[],this.initialized=!1,this.freeList=0,this.size=0,this.max=t,this.nodes=[],this.handles=[];for(var n=0;n<t+1;n++)this.nodes[n]=new WK,this.handles[n]=new qK;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}return e.prototype.floatDown_=function(t){var r=this.nodes,n=this.handles,i,o,a;for(i=r[t].handle;;){if(a=t<<1,a<this.size&&this.leq(n[r[a+1].handle].key,n[r[a].handle].key)&&++a,Wt(a<=this.max),o=r[a].handle,a>this.size||this.leq(n[i].key,n[o].key)){r[t].handle=i,n[i].node=t;break}r[t].handle=o,n[o].node=t,t=a}},e.prototype.floatUp_=function(t){var r=this.nodes,n=this.handles,i,o,a;for(i=r[t].handle;;){if(a=t>>1,o=r[a].handle,a===0||this.leq(n[o].key,n[i].key)){r[t].handle=i,n[i].node=t;break}r[t].handle=o,n[o].node=t,t=a}},e.prototype.init=function(){for(var t=this.size;t>=1;--t)this.floatDown_(t);this.initialized=!0},e.prototype.min=function(){return this.handles[this.nodes[1].handle].key},e.prototype.insert=function(t){var r,n;if(r=++this.size,r*2>this.max){this.max*=2;var i,o;for(o=this.nodes.length,this.nodes.length=this.max+1,i=o;i<this.nodes.length;i++)this.nodes[i]=new WK;for(o=this.handles.length,this.handles.length=this.max+1,i=o;i<this.handles.length;i++)this.handles[i]=new qK}return this.freeList===0?n=r:(n=this.freeList,this.freeList=this.handles[n].node),this.nodes[r].handle=n,this.handles[n].node=r,this.handles[n].key=t,this.initialized&&this.floatUp_(r),n},e.prototype.extractMin=function(){var t=this.nodes,r=this.handles,n=t[1].handle,i=r[n].key;return this.size>0&&(t[1].handle=t[this.size].handle,r[t[1].handle].node=1,r[n].key=null,r[n].node=this.freeList,this.freeList=n,--this.size,this.size>0&&this.floatDown_(1)),i},e.prototype.delete=function(t){var r=this.nodes,n=this.handles,i;Wt(t>=1&&t<=this.max&&n[t].key!==null),i=n[t].node,r[i].handle=r[this.size].handle,n[r[i].handle].node=i,--this.size,i<=this.size&&(i<=1||this.leq(n[r[i>>1].handle].key,n[r[i].handle].key)?this.floatDown_(i):this.floatUp_(i)),n[t].key=null,n[t].node=this.freeList,this.freeList=t},e}(),_R=function(){function e(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1}return e}(),KK=function(){function e(){this.key=null,this.next=null,this.prev=null}return e}(),N0t=function(){function e(t,r){this.frame=t,this.leq=r,this.head=new KK,this.head.next=this.head,this.head.prev=this.head}return e.prototype.min=function(){return this.head.next},e.prototype.max=function(){return this.head.prev},e.prototype.insert=function(t){return this.insertBefore(this.head,t)},e.prototype.search=function(t){var r=this.head;do r=r.next;while(r.key!==null&&!this.leq(this.frame,t,r.key));return r},e.prototype.insertBefore=function(t,r){do t=t.prev;while(t.key!==null&&!this.leq(this.frame,t.key,r));var n=new KK;return n.key=r,n.next=t.next,t.next.prev=n,n.prev=t,t.next=n,n},e.prototype.delete=function(t){t.next.prev=t.prev,t.prev.next=t.next},e}(),z0t=function(){function e(){}return e.regionBelow=function(t){return t.nodeUp.prev.key},e.regionAbove=function(t){return t.nodeUp.next.key},e.debugEvent=function(t){},e.addWinding=function(t,r){t.winding+=r.winding,t.Sym.winding+=r.Sym.winding},e.edgeLeq=function(t,r,n){var i=t.event,o=r.eUp,a=n.eUp;if(o.Dst===i)return a.Dst===i?zt.vertLeq(o.Org,a.Org)?zt.edgeSign(a.Dst,o.Org,a.Org)<=0:zt.edgeSign(o.Dst,a.Org,o.Org)>=0:zt.edgeSign(a.Dst,i,a.Org)<=0;if(a.Dst===i)return zt.edgeSign(o.Dst,i,o.Org)>=0;var s=zt.edgeEval(o.Dst,i,o.Org),l=zt.edgeEval(a.Dst,i,a.Org);return s>=l},e.deleteRegion=function(t,r){r.fixUpperEdge&&Wt(r.eUp.winding===0),r.eUp.activeRegion=null,t.dict.delete(r.nodeUp)},e.fixUpperEdge=function(t,r,n){Wt(r.fixUpperEdge),t.mesh.delete(r.eUp),r.fixUpperEdge=!1,r.eUp=n,n.activeRegion=r},e.topLeftRegion=function(t,r){var n=r.eUp.Org,i;do r=e.regionAbove(r);while(r.eUp.Org===n);if(r.fixUpperEdge){if(i=t.mesh.connect(e.regionBelow(r).eUp.Sym,r.eUp.Lnext),i===null)return null;e.fixUpperEdge(t,r,i),r=e.regionAbove(r)}return r},e.topRightRegion=function(t){var r=t.eUp.Dst;do t=e.regionAbove(t);while(t.eUp.Dst===r);return t},e.addRegionBelow=function(t,r,n){var i=new _R;return i.eUp=n,i.nodeUp=t.dict.insertBefore(r.nodeUp,i),i.fixUpperEdge=!1,i.sentinel=!1,i.dirty=!1,n.activeRegion=i,i},e.isWindingInside=function(t,r){switch(t.windingRule){case un.ODD:return(r&1)!==0;case un.NONZERO:return r!==0;case un.POSITIVE:return r>0;case un.NEGATIVE:return r<0;case un.ABS_GEQ_TWO:return r>=2||r<=-2}throw new Error("Invalid winding rulle")},e.computeWinding=function(t,r){r.windingNumber=e.regionAbove(r).windingNumber+r.eUp.winding,r.inside=e.isWindingInside(t,r.windingNumber)},e.finishRegion=function(t,r){var n=r.eUp,i=n.Lface;i.inside=r.inside,i.anEdge=n,e.deleteRegion(t,r)},e.finishLeftRegions=function(t,r,n){for(var i,o=null,a=r,s=r.eUp;a!==n;){if(a.fixUpperEdge=!1,o=e.regionBelow(a),i=o.eUp,i.Org!=s.Org){if(!o.fixUpperEdge){e.finishRegion(t,a);break}i=t.mesh.connect(s.Lprev,i.Sym),e.fixUpperEdge(t,o,i)}s.Onext!==i&&(t.mesh.splice(i.Oprev,i),t.mesh.splice(s,i)),e.finishRegion(t,a),s=o.eUp,a=o}return s},e.addRightEdges=function(t,r,n,i,o,a){var s,l,u,d,c=!0;u=n;do Wt(zt.vertLeq(u.Org,u.Dst)),e.addRegionBelow(t,r,u.Sym),u=u.Onext;while(u!==i);for(o===null&&(o=e.regionBelow(r).eUp.Rprev),l=r,d=o;s=e.regionBelow(l),u=s.eUp.Sym,u.Org===d.Org;)u.Onext!==d&&(t.mesh.splice(u.Oprev,u),t.mesh.splice(d.Oprev,u)),s.windingNumber=l.windingNumber-u.winding,s.inside=e.isWindingInside(t,s.windingNumber),l.dirty=!0,!c&&e.checkForRightSplice(t,l)&&(e.addWinding(u,d),e.deleteRegion(t,l),t.mesh.delete(d)),c=!1,l=s,d=u;l.dirty=!0,Wt(l.windingNumber-u.winding===s.windingNumber),a&&e.walkDirtyRegions(t,l)},e.spliceMergeVertices=function(t,r,n){t.mesh.splice(r,n)},e.vertexWeights=function(t,r,n){var i=zt.vertL1dist(r,t),o=zt.vertL1dist(n,t),a=.5*o/(i+o),s=.5*i/(i+o);t.coords[0]+=a*r.coords[0]+s*n.coords[0],t.coords[1]+=a*r.coords[1]+s*n.coords[1],t.coords[2]+=a*r.coords[2]+s*n.coords[2]},e.getIntersectData=function(t,r,n,i,o,a){r.coords[0]=r.coords[1]=r.coords[2]=0,r.idx=-1,e.vertexWeights(r,n,i),e.vertexWeights(r,o,a)},e.checkForRightSplice=function(t,r){var n=e.regionBelow(r),i=r.eUp,o=n.eUp;if(zt.vertLeq(i.Org,o.Org)){if(zt.edgeSign(o.Dst,i.Org,o.Org)>0)return!1;zt.vertEq(i.Org,o.Org)?i.Org!==o.Org&&(t.pq.delete(i.Org.pqHandle),e.spliceMergeVertices(t,o.Oprev,i)):(t.mesh.splitEdge(o.Sym),t.mesh.splice(i,o.Oprev),r.dirty=n.dirty=!0)}else{if(zt.edgeSign(i.Dst,o.Org,i.Org)<0)return!1;e.regionAbove(r).dirty=r.dirty=!0,t.mesh.splitEdge(i.Sym),t.mesh.splice(o.Oprev,i)}return!0},e.checkForLeftSplice=function(t,r){var n=e.regionBelow(r),i=r.eUp,o=n.eUp,a;if(Wt(!zt.vertEq(i.Dst,o.Dst)),zt.vertLeq(i.Dst,o.Dst)){if(zt.edgeSign(i.Dst,o.Dst,i.Org)<0)return!1;e.regionAbove(r).dirty=r.dirty=!0,a=t.mesh.splitEdge(i),t.mesh.splice(o.Sym,a),a.Lface.inside=r.inside}else{if(zt.edgeSign(o.Dst,i.Dst,o.Org)>0)return!1;r.dirty=n.dirty=!0,a=t.mesh.splitEdge(o),t.mesh.splice(i.Lnext,o.Sym),a.Rface.inside=r.inside}return!0},e.checkForIntersect=function(t,r){var n=e.regionBelow(r),i=r.eUp,o=n.eUp,a=i.Org,s=o.Org,l=i.Dst,u=o.Dst,d,c,h=new bv,f,m;if(Wt(!zt.vertEq(u,l)),Wt(zt.edgeSign(l,t.event,a)<=0),Wt(zt.edgeSign(u,t.event,s)>=0),Wt(a!==t.event&&s!==t.event),Wt(!r.fixUpperEdge&&!n.fixUpperEdge),a===s||(d=Math.min(a.t,l.t),c=Math.max(s.t,u.t),d>c))return!1;if(zt.vertLeq(a,s)){if(zt.edgeSign(u,a,s)>0)return!1}else if(zt.edgeSign(l,s,a)<0)return!1;return e.debugEvent(t),zt.intersect(l,a,u,s,h),Wt(Math.min(a.t,l.t)<=h.t),Wt(h.t<=Math.max(s.t,u.t)),Wt(Math.min(u.s,l.s)<=h.s),Wt(h.s<=Math.max(s.s,a.s)),zt.vertLeq(h,t.event)&&(h.s=t.event.s,h.t=t.event.t),f=zt.vertLeq(a,s)?a:s,zt.vertLeq(f,h)&&(h.s=f.s,h.t=f.t),zt.vertEq(h,a)||zt.vertEq(h,s)?(e.checkForRightSplice(t,r),!1):!zt.vertEq(l,t.event)&&zt.edgeSign(l,t.event,h)>=0||!zt.vertEq(u,t.event)&&zt.edgeSign(u,t.event,h)<=0?u===t.event?(t.mesh.splitEdge(i.Sym),t.mesh.splice(o.Sym,i),r=e.topLeftRegion(t,r),i=e.regionBelow(r).eUp,e.finishLeftRegions(t,e.regionBelow(r),n),e.addRightEdges(t,r,i.Oprev,i,i,!0),!0):l===t.event?(t.mesh.splitEdge(o.Sym),t.mesh.splice(i.Lnext,o.Oprev),n=r,r=e.topRightRegion(r),m=e.regionBelow(r).eUp.Rprev,n.eUp=o.Oprev,o=e.finishLeftRegions(t,n,null),e.addRightEdges(t,r,o.Onext,i.Rprev,m,!0),!0):(zt.edgeSign(l,t.event,h)>=0&&(e.regionAbove(r).dirty=r.dirty=!0,t.mesh.splitEdge(i.Sym),i.Org.s=t.event.s,i.Org.t=t.event.t),zt.edgeSign(u,t.event,h)<=0&&(r.dirty=n.dirty=!0,t.mesh.splitEdge(o.Sym),o.Org.s=t.event.s,o.Org.t=t.event.t),!1):(t.mesh.splitEdge(i.Sym),t.mesh.splitEdge(o.Sym),t.mesh.splice(o.Oprev,i),i.Org.s=h.s,i.Org.t=h.t,i.Org.pqHandle=t.pq.insert(i.Org),e.getIntersectData(t,i.Org,a,l,s,u),e.regionAbove(r).dirty=r.dirty=n.dirty=!0,!1)},e.walkDirtyRegions=function(t,r){for(var n=e.regionBelow(r),i,o;;){for(;n.dirty;)r=n,n=e.regionBelow(n);if(!r.dirty&&(n=r,r=e.regionAbove(r),r===null||!r.dirty))return;if(r.dirty=!1,i=r.eUp,o=n.eUp,i.Dst!==o.Dst&&e.checkForLeftSplice(t,r)&&(n.fixUpperEdge?(e.deleteRegion(t,n),t.mesh.delete(o),n=e.regionBelow(r),o=n.eUp):r.fixUpperEdge&&(e.deleteRegion(t,r),t.mesh.delete(i),r=e.regionAbove(n),i=r.eUp)),i.Org!==o.Org)if(i.Dst!==o.Dst&&!r.fixUpperEdge&&!n.fixUpperEdge&&(i.Dst===t.event||o.Dst===t.event)){if(e.checkForIntersect(t,r))return}else e.checkForRightSplice(t,r);i.Org===o.Org&&i.Dst===o.Dst&&(e.addWinding(o,i),e.deleteRegion(t,r),t.mesh.delete(i),r=e.regionAbove(n))}},e.connectRightVertex=function(t,r,n){var i,o=n.Onext,a=e.regionBelow(r),s=r.eUp,l=a.eUp,u=!1;if(s.Dst!==l.Dst&&e.checkForIntersect(t,r),zt.vertEq(s.Org,t.event)&&(t.mesh.splice(o.Oprev,s),r=e.topLeftRegion(t,r),o=e.regionBelow(r).eUp,e.finishLeftRegions(t,e.regionBelow(r),a),u=!0),zt.vertEq(l.Org,t.event)&&(t.mesh.splice(n,l.Oprev),n=e.finishLeftRegions(t,a,null),u=!0),u){e.addRightEdges(t,r,n.Onext,o,o,!0);return}zt.vertLeq(l.Org,s.Org)?i=l.Oprev:i=s,i=t.mesh.connect(n.Lprev,i),e.addRightEdges(t,r,i,i.Onext,i.Onext,!1),i.Sym.activeRegion.fixUpperEdge=!0,e.walkDirtyRegions(t,r)},e.connectLeftDegenerate=function(t,r,n){var i,o,a,s,l;if(i=r.eUp,zt.vertEq(i.Org,n)){Wt(!1),e.spliceMergeVertices(t,i,n.anEdge);return}if(!zt.vertEq(i.Dst,n)){t.mesh.splitEdge(i.Sym),r.fixUpperEdge&&(t.mesh.delete(i.Onext),r.fixUpperEdge=!1),t.mesh.splice(n.anEdge,i),e.sweepEvent(t,n);return}Wt(!1),r=e.topRightRegion(r),l=e.regionBelow(r),a=l.eUp.Sym,o=s=a.Onext,l.fixUpperEdge&&(Wt(o!==a),e.deleteRegion(t,l),t.mesh.delete(a),a=o.Oprev),t.mesh.splice(n.anEdge,a),zt.edgeGoesLeft(o)||(o=null),e.addRightEdges(t,r,a.Onext,s,o,!0)},e.connectLeftVertex=function(t,r){var n,i,o,a,s,l,u=new _R;if(u.eUp=r.anEdge.Sym,n=t.dict.search(u).key,i=e.regionBelow(n),!!i){if(a=n.eUp,s=i.eUp,zt.edgeSign(a.Dst,r,a.Org)===0){e.connectLeftDegenerate(t,n,r);return}if(o=zt.vertLeq(s.Dst,a.Dst)?n:i,n.inside||o.fixUpperEdge){if(o===n)l=t.mesh.connect(r.anEdge.Sym,a.Lnext);else{var d=t.mesh.connect(s.Dnext,r.anEdge);l=d.Sym}o.fixUpperEdge?e.fixUpperEdge(t,o,l):e.computeWinding(t,e.addRegionBelow(t,n,l)),e.sweepEvent(t,r)}else e.addRightEdges(t,n,r.anEdge,r.anEdge,null,!0)}},e.sweepEvent=function(t,r){t.event=r,e.debugEvent(t);for(var n=r.anEdge;n.activeRegion===null;)if(n=n.Onext,n===r.anEdge){e.connectLeftVertex(t,r);return}var i=e.topLeftRegion(t,n.activeRegion);Wt(i!==null);var o=e.regionBelow(i),a=o.eUp,s=e.finishLeftRegions(t,o,null);s.Onext===a?e.connectRightVertex(t,i,s):e.addRightEdges(t,i,s.Onext,a,a,!0)},e.addSentinel=function(t,r,n,i){var o=new _R,a=t.mesh.makeEdge();a.Org.s=n,a.Org.t=i,a.Dst.s=r,a.Dst.t=i,t.event=a.Dst,o.eUp=a,o.windingNumber=0,o.inside=!1,o.fixUpperEdge=!1,o.sentinel=!0,o.dirty=!1,o.nodeUp=t.dict.insert(o)},e.initEdgeDict=function(t){t.dict=new N0t(t,e.edgeLeq);var r=t.bmax[0]-t.bmin[0],n=t.bmax[1]-t.bmin[1],i=t.bmin[0]-r,o=t.bmax[0]+r,a=t.bmin[1]-n,s=t.bmax[1]+n;e.addSentinel(t,i,o,a),e.addSentinel(t,i,o,s)},e.doneEdgeDict=function(t){for(var r,n=0;(r=t.dict.min().key)!==null;)r.sentinel||(Wt(r.fixUpperEdge),Wt(++n===1)),Wt(r.windingNumber===0),e.deleteRegion(t,r)},e.removeDegenerateEdges=function(t){var r,n,i,o=t.mesh.eHead;for(r=o.next;r!==o;r=n)n=r.next,i=r.Lnext,zt.vertEq(r.Org,r.Dst)&&r.Lnext.Lnext!==r&&(e.spliceMergeVertices(t,i,r),t.mesh.delete(r),r=i,i=r.Lnext),i.Lnext===r&&(i!==r&&((i===n||i===n.Sym)&&(n=n.next),t.mesh.delete(i)),(r===n||r===n.Sym)&&(n=n.next),t.mesh.delete(r))},e.initPriorityQ=function(t){var r,n,i,o=0;for(i=t.mesh.vHead,n=i.next;n!==i;n=n.next)o++;for(o+=8,r=t.pq=new L0t(o,zt.vertLeq),i=t.mesh.vHead,n=i.next;n!==i;n=n.next)n.pqHandle=r.insert(n);return n!==i?!1:(r.init(),!0)},e.donePriorityQ=function(t){t.pq=null},e.removeDegenerateFaces=function(t,r){var n,i,o;for(n=r.fHead.next;n!==r.fHead;n=i)i=n.next,o=n.anEdge,Wt(o.Lnext!==o),o.Lnext.Lnext===o&&(e.addWinding(o.Onext,o),t.mesh.delete(o));return!0},e.computeInterior=function(t,r){r===void 0&&(r=!0);var n,i;if(e.removeDegenerateEdges(t),!e.initPriorityQ(t))return!1;for(e.initEdgeDict(t);(n=t.pq.extractMin())!==null;){for(;i=t.pq.min(),!(i===null||!zt.vertEq(i,n));)i=t.pq.extractMin(),e.spliceMergeVertices(t,n.anEdge,i.anEdge);e.sweepEvent(t,n)}return t.event=t.dict.min().key.eUp.Org,e.debugEvent(t),e.doneEdgeDict(t),e.donePriorityQ(t),e.removeDegenerateFaces(t,t.mesh)?(r&&t.mesh.check(),!0):!1},e}(),B0t=function(){function e(){this.mesh=new GK,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=un.ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}return e.prototype.dot_=function(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]},e.prototype.normalize_=function(t){var r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];if(!r)throw"Zero-size vector!";r=Math.sqrt(r),t[0]/=r,t[1]/=r,t[2]/=r},e.prototype.longAxis_=function(t){var r=0;return Math.abs(t[1])>Math.abs(t[0])&&(r=1),Math.abs(t[2])>Math.abs(t[r])&&(r=2),r},e.prototype.computeNormal_=function(t){var r,n,i,o,a,s,l=[0,0,0],u=[0,0,0],d=[0,0,0],c=[0,0,0],h=[0,0,0],f=[null,null,null],m=[null,null,null],p=this.mesh.vHead;r=p.next;for(var g=0;g<3;++g)o=r.coords[g],u[g]=o,m[g]=r,l[g]=o,f[g]=r;for(r=p.next;r!==p;r=r.next)for(var v=0;v<3;++v)o=r.coords[v],o<u[v]&&(u[v]=o,m[v]=r),o>l[v]&&(l[v]=o,f[v]=r);var b=0;if(l[1]-u[1]>l[0]-u[0]&&(b=1),l[2]-u[2]>l[b]-u[b]&&(b=2),u[b]>=l[b]){t[0]=0,t[1]=0,t[2]=1;return}for(s=0,n=m[b],i=f[b],d[0]=n.coords[0]-i.coords[0],d[1]=n.coords[1]-i.coords[1],d[2]=n.coords[2]-i.coords[2],r=p.next;r!==p;r=r.next)c[0]=r.coords[0]-i.coords[0],c[1]=r.coords[1]-i.coords[1],c[2]=r.coords[2]-i.coords[2],h[0]=d[1]*c[2]-d[2]*c[1],h[1]=d[2]*c[0]-d[0]*c[2],h[2]=d[0]*c[1]-d[1]*c[0],a=h[0]*h[0]+h[1]*h[1]+h[2]*h[2],a>s&&(s=a,t[0]=h[0],t[1]=h[1],t[2]=h[2]);s<=0&&(t[0]=t[1]=t[2]=0,t[this.longAxis_(d)]=1)},e.prototype.checkOrientation_=function(){for(var t=this.mesh.fHead,r,n=this.mesh.vHead,i,o=0,a=t.next;a!==t;a=a.next)if(i=a.anEdge,!(i.winding<=0))do o+=(i.Org.s-i.Dst.s)*(i.Org.t+i.Dst.t),i=i.Lnext;while(i!==a.anEdge);if(o<0){for(r=n.next;r!==n;r=r.next)r.t=-r.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},e.prototype.projectPolygon_=function(){var t=this.mesh.vHead,r=[0,0,0],n,i,o=!1;r[0]=this.normal[0],r[1]=this.normal[1],r[2]=this.normal[2],!r[0]&&!r[1]&&!r[2]&&(this.computeNormal_(r),o=!0),n=this.sUnit,i=this.tUnit;var a=this.longAxis_(r);n[a]=0,n[(a+1)%3]=1,n[(a+2)%3]=0,i[a]=0,i[(a+1)%3]=0,i[(a+2)%3]=r[a]>0?1:-1;for(var s=t.next;s!==t;s=s.next)s.s=this.dot_(s.coords,n),s.t=this.dot_(s.coords,i);o&&this.checkOrientation_();for(var l=!0,u=t.next;u!==t;u=u.next)l?(this.bmin[0]=this.bmax[0]=u.s,this.bmin[1]=this.bmax[1]=u.t,l=!1):(u.s<this.bmin[0]&&(this.bmin[0]=u.s),u.s>this.bmax[0]&&(this.bmax[0]=u.s),u.t<this.bmin[1]&&(this.bmin[1]=u.t),u.t>this.bmax[1]&&(this.bmax[1]=u.t))},e.prototype.addWinding_=function(t,r){t.winding+=r.winding,t.Sym.winding+=r.Sym.winding},e.prototype.tessellateMonoRegion_=function(t,r){var n,i;if(n=r.anEdge,!(n.Lnext!==n&&n.Lnext.Lnext!==n))throw"Mono region invalid";for(;zt.vertLeq(n.Dst,n.Org);n=n.Lprev);for(;zt.vertLeq(n.Org,n.Dst);n=n.Lnext);i=n.Lprev;for(var o=void 0;n.Lnext!==i;)if(zt.vertLeq(n.Dst,i.Org)){for(;i.Lnext!==n&&(zt.edgeGoesLeft(i.Lnext)||zt.edgeSign(i.Org,i.Dst,i.Lnext.Dst)<=0);)o=t.connect(i.Lnext,i),i=o.Sym;i=i.Lprev}else{for(;i.Lnext!==n&&(zt.edgeGoesRight(n.Lprev)||zt.edgeSign(n.Dst,n.Org,n.Lprev.Org)>=0);)o=t.connect(n,n.Lprev),n=o.Sym;n=n.Lnext}if(i.Lnext===n)throw"Mono region invalid";for(;i.Lnext.Lnext!==n;)o=t.connect(i.Lnext,i),i=o.Sym;return!0},e.prototype.tessellateInterior_=function(t){for(var r,n=t.fHead.next;n!==t.fHead;n=r)if(r=n.next,n.inside&&!this.tessellateMonoRegion_(t,n))return!1;return!0},e.prototype.discardExterior_=function(t){for(var r,n=t.fHead.next;n!==t.fHead;n=r)r=n.next,n.inside||t.zapFace(n)},e.prototype.setWindingNumber_=function(t,r,n){for(var i,o=t.eHead.next;o!==t.eHead;o=i)i=o.next,o.Rface.inside!==o.Lface.inside?o.winding=o.Lface.inside?r:-r:n?t.delete(o):o.winding=0},e.prototype.getNeighbourFace_=function(t){return!t.Rface||!t.Rface.inside?-1:t.Rface.n},e.prototype.outputPolymesh_=function(t,r,n,i){var o,a=0,s=0,l;n>3&&t.mergeConvexFaces(n);for(var u=t.vHead.next;u!==t.vHead;u=u.next)u.n=-1;for(var d=t.fHead.next;d!==t.fHead;d=d.next)if(d.n=-1,!!d.inside){o=d.anEdge,l=0;do{var u=o.Org;u.n===-1&&(u.n=s,s++),l++,o=o.Lnext}while(o!==d.anEdge);if(l>n)throw"Face vertex greater that support polygon";d.n=a,++a}this.elementCount=a,r===Gi.CONNECTED_POLYGONS&&(a*=2),this.elements=[],this.elements.length=a*n,this.vertexCount=s,this.vertices=[],this.vertices.length=s*i,this.vertexIndices=[],this.vertexIndices.length=s;for(var u=t.vHead.next;u!==t.vHead;u=u.next)if(u.n!==-1){var c=u.n*i;this.vertices[c+0]=u.coords[0],this.vertices[c+1]=u.coords[1],i>2&&(this.vertices[c+2]=u.coords[2]),this.vertexIndices[u.n]=u.idx}for(var h=0,d=t.fHead.next;d!==t.fHead;d=d.next)if(d.inside){o=d.anEdge,l=0;do{var u=o.Org;this.elements[h++]=u.n,l++,o=o.Lnext}while(o!==d.anEdge);for(var f=l;f<n;++f)this.elements[h++]=-1;if(r===Gi.CONNECTED_POLYGONS){o=d.anEdge;do this.elements[h++]=this.getNeighbourFace_(o),o=o.Lnext;while(o!==d.anEdge);for(var m=l;m<n;++m)this.elements[h++]=-1}}},e.prototype.outputContours_=function(t,r){var n,i,o=0,a=0;this.vertexCount=0,this.elementCount=0;for(var s=t.fHead.next;s!==t.fHead;s=s.next)if(s.inside){i=n=s.anEdge;do this.vertexCount++,n=n.Lnext;while(n!==i);this.elementCount++}this.elements=[],this.elements.length=this.elementCount*2,this.vertices=[],this.vertices.length=this.vertexCount*r,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var l=0,u=0,d=0;o=0;for(var s=t.fHead.next;s!==t.fHead;s=s.next)if(s.inside){a=0,i=n=s.anEdge;do this.vertices[l++]=n.Org.coords[0],this.vertices[l++]=n.Org.coords[1],r>2&&(this.vertices[l++]=n.Org.coords[2]),this.vertexIndices[u++]=this.vertexIdCallback?this.vertexIdCallback(n):n.Org.idx,a++,n=n.Lnext;while(n!==i);this.elements[d++]=o,this.elements[d++]=a,o+=a}},e.prototype.addContour=function(t,r){this.mesh===null&&(this.mesh=new GK),t<2&&(t=2),t>3&&(t=3);for(var n=null,i=0;i<r.length;i+=t)n===null?(n=this.mesh.makeEdge(),this.mesh.splice(n,n.Sym)):(this.mesh.splitEdge(n),n=n.Lnext),n.Org.coords[0]=r[i+0],n.Org.coords[1]=r[i+1],t>2?n.Org.coords[2]=r[i+2]:n.Org.coords[2]=0,n.Org.idx=this.vertexIndexCounter++,this.edgeCreateCallback&&this.edgeCreateCallback(n),n.winding=1,n.Sym.winding=-1},e.prototype.tesselate=function(t,r,n,i,o,a){if(t===void 0&&(t=un.ODD),r===void 0&&(r=Gi.POLYGONS),a===void 0&&(a=!0),this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,o&&(this.normal[0]=o[0],this.normal[1]=o[1],this.normal[2]=o[2]),this.windingRule=t,i<2&&(i=2),i>3&&(i=3),!this.mesh)return!1;this.projectPolygon_(),z0t.computeInterior(this,a);var s=this.mesh;return r===Gi.BOUNDARY_CONTOURS?this.setWindingNumber_(s,1,!0):this.tessellateInterior_(s),a&&s.check(),r===Gi.BOUNDARY_CONTOURS?this.outputContours_(s,i):this.outputPolymesh_(s,r,n,i),!0},e}();function Sf(e){var t=e.windingRule,r=t===void 0?un.ODD:t,n=e.elementType,i=n===void 0?Gi.POLYGONS:n,o=e.polySize,a=o===void 0?3:o,s=e.vertexSize,l=s===void 0?2:s,u=e.normal,d=u===void 0?[0,0,1]:u,c=e.contours,h=c===void 0?[]:c,f=e.strict,m=f===void 0?!0:f,p=e.debug,g=p===void 0?!1:p;if(!h&&m)throw new Error("Contours can't be empty");if(h){var v=new B0t;e.edgeCreateCallback&&(v.edgeCreateCallback=e.edgeCreateCallback),e.vertexIdCallback&&(v.vertexIdCallback=e.vertexIdCallback);for(var b=0;b<h.length;b++)v.addContour(l||2,h[b]);return v.tesselate(r,i,a,l,d,m),{vertices:v.vertices,vertexIndices:v.vertexIndices,vertexCount:v.vertexCount,elements:v.elements,elementCount:v.elementCount,mesh:g?v.mesh:void 0}}}un.ODD;un.NONZERO;un.POSITIVE;un.NEGATIVE;un.ABS_GEQ_TWO;Gi.POLYGONS;Gi.CONNECTED_POLYGONS;Gi.BOUNDARY_CONTOURS;var Oz=class{constructor(e=256,t=!1){this.capacity=e,this.size=0,this.debug=t,this.debug&&console.log(`allocating with cap ${e}`);let r=e*Oz.eSize;this.buffer=new ArrayBuffer(r);let n=Float32Array.BYTES_PER_ELEMENT,i=0;this.positions=new Float32Array(this.buffer,i*n,3*e),i+=3*e,this.normals=new Float32Array(this.buffer,i*n,3*e),i+=3*e,this.uvs=new Float32Array(this.buffer,i*n,2*e)}realloc(e,t=!1){if(e<this.size)throw Error("cannot shrink buffer");if(e<=this.capacity&&!t)return;this.debug&&console.log(`resizing from ${this.capacity}  ${e}`);let r=e*Oz.eSize,n=new ArrayBuffer(r),i=Float32Array.BYTES_PER_ELEMENT,o=0,a=new Float32Array(n,o*i,3*e);o+=3*e;let s=new Float32Array(n,o*i,3*e);o+=3*e;let l=new Float32Array(n,o*i,2*e);t?(a.set(this.positions.subarray(0,this.size*3)),s.set(this.normals.subarray(0,this.size*3)),l.set(this.uvs.subarray(0,this.size*2))):(a.set(this.positions),s.set(this.normals),l.set(this.uvs)),this.buffer=n,this.positions=a,this.normals=s,this.uvs=l,this.capacity=e}get(e=1){let t=this.size+e;if(t>this.capacity){let n=this.capacity;for(;t>n;)n*=2;this.realloc(n)}let r=this.size;return this.size=t,r}reserve(e){let t=this.size+e;t>this.capacity&&this.realloc(t)}shrink(){this.debug&&console.log(`shrinking ${this.capacity}  ${this.size}`),this.realloc(this.size,!0)}},Ile=Oz;Ile.eSize=(3+3+2)*Float32Array.BYTES_PER_ELEMENT;var F0t=Lo(Zet()),OU={vertices:[160,160,-160,160,-160,-160,160,-160],vertexIndices:[1,0,3,2],vertexCount:4,elements:[0,4],elementCount:1,mesh:void 0},Dle={vertices:[],vertexIndices:[],vertexCount:0,elements:[],elementCount:0,mesh:void 0},Rle={vertices:[-160,160,160,-160,160,160,-160,-160],vertexIndices:[1,3,0,2],vertexCount:4,elements:[0,1,2,1,0,3],elementCount:2,mesh:void 0},CR=(e,t)=>([r,n])=>(n<r&&(n+=t),(e>=r?e:e+t)<=n),IU=class extends Nt{constructor(e,t,r=0,n=12,i=3,o=un.ODD,a=!1){super(),this.forPathBevel=a,this.type="ShapeGeometry",this.vertexCache={},this._shape=e,this._depth=t,this._curveSegments=n,this._bevelSegmentsInput=i;let s=this._shape.extractShapePointsToFlatArray([],n),l=this._shape.shapeHoles.map(E=>{let A=E.extractShapePointsToFlatArray([],n),M=[];for(let I=A.length-1;I>=1;I-=2){let O=A[I-1],T=A[I-0];M.push(O,T)}return M}),u=[],d=[];for(let E=0;E<s.length;E+=2)d.push([s[E],s[E+1]]);u.push(d);for(let E=0;E<l.length;E++){let A=l[E],M=[];for(let I=0;I<A.length;I+=2)M.push([A[I],A[I+1]]);u.push(M)}let c;e.isText?c=new Qae().setFromPoints(e.points.map(E=>E.position)).getSize(new ue).length()*.1:u[0].length===0?c=r:c=(0,F0t.default)(u).distance,r<=0?(this._bevel=0,this._bevelSegments=0):(this._bevel=Math.min(r,c,t/2),this._bevelSegments=Math.floor(i));let h;try{h=Sf({windingRule:o,elementType:Gi.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[s]})}catch{h=OU}let f;try{f=Sf({windingRule:un.ODD,elementType:Gi.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...l]})}catch{f=Dle}if(!h)throw new Error("error generating geometry");let m=h.elementCount;if(f){h.elementCount+=f.elementCount;for(let E=0;E<f.elements.length;E++){let A=f.elements[E],M=E%2===0?h.vertexCount:0;h.elements.push(A+M)}for(let E=0;E<f.vertexIndices.length;E++){let A=f.vertexIndices[E],M=h.vertexCount;h.vertexIndices.push(A+M)}for(let E=0;E<f.vertices.length;E++){let A=f.vertices[E];h.vertices.push(A)}}let p=1/0,g=-1/0,v=1/0,b=-1/0;for(let E=0,A=h.vertexCount;E<A;E++){let M=E*2,I=h.vertices[M+0],O=h.vertices[M+1];I<p&&(p=I),I>g&&(g=I),O<v&&(v=O),O>b&&(b=O)}this._minX=p,this._minY=v,this._width=g-p,this._height=b-v,this._buffer=new Ile(this._computeBufferEstimatedSize(h));let y=[],x=[];for(let E=h.elementCount-1;E>=0;E--){let A=E>=m,M=E*2,I=h.elements[M+0],O=h.elements[M+1],T=I+O,D={start:I,count:O,normals:[],continuous:[],concave:[]},N=I,k=T-1,R=I+1,z=this._shape.roundedCurves.length;do{let V=N-I,Q=h.vertices[k*2+0],X=h.vertices[k*2+1],ne=h.vertices[N*2+0],J=h.vertices[N*2+1],W=h.vertices[R*2+0],te=h.vertices[R*2+1],Z=ne-Q,q=J-X,ie=Math.sqrt(Z*Z+q*q);Z/=ie,q/=ie;let he=ne-W,ae=J-te,be=Math.sqrt(he*he+ae*ae);he/=be,ae/=be,D.normals[V*2+0]=-ae,D.normals[V*2+1]=he,D.concave[V]=Z*ae-q*he>0;let ye=h.vertexIndices[N];if(Array.isArray(ye))D.continuous[V]=!1;else{let[Se,me]=this._shape.getCurveIndexFromVertexId(ye-1,!0);if(me>0&&me<1)D.continuous[V]=!0;else{let Pe=me===1?Se+1:Se-1;Pe=(Pe+z)%z;let Ae=me===1?0:1,K=this._shape.roundedCurves[Se].getTangent(me),G=this._shape.roundedCurves[Pe].getTangent(Ae);D.continuous[V]=K.dot(G)>.95}}A&&(D.normals[V*2+0]*=-1,D.normals[V*2+1]*=-1),[k,N,R]=[N,R,R+1],R>=T&&(R-=O)}while(R!==I+1);let j=[];j.push({bevelI:0,angle:0,size:0,boundary:{vertices:h.vertices.slice(I*2,T*2),vertexCount:O,vertexIndices:new Array(O).fill(!0).map((V,Q)=>[Q,Q]),elements:[0,O],elementCount:1,mesh:null},reverseMap:[],insetPoints:h.vertices.slice(I*2,T*2)});let $=0;for(let V=1;V<=this._bevelSegments;V++){let Q=V/this._bevelSegments*Math.PI/2,X=(1-Math.cos(Q))*this._bevel,ne=[],J=[],W=0;for(let Z=0;Z<O;Z++){let q=Z*2,ie=(Z-1+O)%O*2,he=h.vertices[D.start*2+q+0],ae=h.vertices[D.start*2+q+1],be=-D.normals[ie+0]*X,ye=-D.normals[ie+1]*X,Se=-D.normals[q+0]*X,me=-D.normals[q+1]*X;if(D.concave[Z]||!D.concave[Z]&&A){let Pe=Math.atan2(ye,be),Ae=Math.atan2(me,Se);Ae>Pe&&(Ae-=Math.PI*2);let K=Ae-Pe;if(D.continuous[Z]||A){let G=Pe+K/2,de=Math.cos(G)*X,Ee=Math.sin(G)*X;ne[2*W+0]=he+de*(A?-1:1),ne[2*W+1]=ae+Ee*(A?-1:1),J[W]=Z,W++}else{let G=Math.max(1,Math.floor(n/4*Math.abs(K)/Math.PI));for(let de=0;de<=G;de++){let Ee=Pe+K*(de/G),Me=Math.cos(Ee)*X,Le=Math.sin(Ee)*X;ne[2*W+0]=he+Me,ne[2*W+1]=ae+Le,J[W]=Z,W++}}}else ne[2*W+0]=he+be,ne[2*W+1]=ae+ye,J[W]=Z,W++,ne[2*W+0]=he,ne[2*W+1]=ae,J[W]=Z,W++,ne[2*W+0]=he+Se,ne[2*W+1]=ae+me,J[W]=Z,W++}let te=Sf({windingRule:un.POSITIVE,elementType:Gi.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[ne],edgeCreateCallback:Z=>{let q=Z.Org.idx,ie=J[q],he=J[(q+1)%J.length];Z.idx=[ie,he],Z.Sym.idx=[he,ie]},vertexIdCallback:Z=>{let q=Z.Lprev.idx;return[q?q[1]:0,Z.idx?Z.idx[0]:0]}});if(!te)throw console.log("Error"),new Error(`error generating bevel geometry for ${V}'th loop`);if(!te.vertexCount){let Z=(V-1)/this._bevelSegments*Math.PI/2;$=(1-Math.sin(Z))*this._bevel;break}for(let Z=0;Z<te.vertexIndices.length;Z++){let[q,ie]=te.vertexIndices[Z];if(q===ie)continue;let he=ie;ie<q&&(he+=O);for(let ae=q;ae<he;ae++){let be=ae%O,ye=(ae+1)%O;if(!D.continuous[be]||!D.continuous[ye]){te.vertexIndices[Z]=[q,be],te.vertexIndices.splice(Z+1,0,[ye,ie]),te.vertices.splice((Z+1)*2,0,te.vertices[Z*2],te.vertices[Z*2+1]);break}}}j.push({bevelI:V,angle:Q,size:X,boundary:te,reverseMap:J,insetPoints:ne})}let U=(V,Q,X)=>{let ne=0,J=V.boundary.vertexIndices.length;for(;ne<J&&X(V.boundary.vertexIndices[Q]);)Q=(Q+1)%J,ne++;return ne},H=y.length;for(let V=1;V<j.length;V++){let Q=j[V-1],X=j[V],ne=Q.boundary.vertexIndices.length,J=X.boundary.vertexIndices.length;if(!ne||!J)break;let W=D.concave.length,te=0,Z=CR(te,O);for(;!Q.boundary.vertexIndices.filter(Z).length||!X.boundary.vertexIndices.filter(Z).length;)te++,Z=CR(te,O);let q=Q.boundary.vertexIndices.findIndex(Z),ie=X.boundary.vertexIndices.findIndex(Z);do q=(q+1)%ne;while(Z(Q.boundary.vertexIndices[q]));do ie=(ie+1)%J;while(Z(X.boundary.vertexIndices[ie]));te=(te+1)%O;let he=te,ae=0,be=this._buildBevelVert(D,Q,(q-1+ne)%ne,void 0,ae),ye=this._buildBevelVert(D,X,(ie-1+J)%J,void 0,ae),Se=be,me=ye,Pe,Ae,K=!1;do{ae=(te||W)/W,Z=CR(te,O);let G=U(Q,q,Z),de=U(X,ie,Z),Ee=K;if(K=!1,G&&!de){for(let Me=0;Me<G;Me++)Pe=this._buildBevelVert(D,Q,(q+Me)%ne,Me/(G-1),ae),y.push(Se.topN,Pe.topP,me.topN),a===!1&&y.push(Pe.bottomP,Se.bottomN,me.bottomN),Se=Pe;K=!0}else if(!G&&de)for(let Me=0;Me<de;Me++)Ae=this._buildBevelVert(D,X,(ie+Me)%J,Me/(de-1),ae),y.push(me.topN,Se.topP,Ae.topP),a===!1&&y.push(Se.bottomP,me.bottomN,Ae.bottomP),me=Ae;else if(G&&de)if(Pe=this._buildBevelVert(D,Q,q,0,ae),Ae=this._buildBevelVert(D,X,ie,0,ae),Ee?(y.push(Se.topN,Ae.topP,me.topN),y.push(Se.topN,Pe.topP,Ae.topP),a===!1&&(y.push(Ae.bottomP,Se.bottomN,me.bottomN),y.push(Ae.bottomP,Pe.bottomP,Se.bottomN))):(y.push(me.topN,Se.topN,Pe.topP),y.push(me.topN,Pe.topP,Ae.topP),a===!1&&(y.push(Pe.bottomP,Se.bottomN,me.bottomN),y.push(Pe.bottomP,me.bottomN,Ae.bottomP))),Se=Pe,me=Ae,G===de)for(let Me=1;Me<G;Me++)Pe=this._buildBevelVert(D,Q,(q+Me)%ne,Me/(G-1),ae),Ae=this._buildBevelVert(D,X,(ie+Me)%J,Me/(de-1),ae),y.push(Se.topN,Pe.topP,me.topN),y.push(me.topN,Pe.topP,Ae.topP),a===!1&&(y.push(Pe.bottomP,Se.bottomN,me.bottomN),y.push(Pe.bottomP,me.bottomN,Ae.bottomP)),Se=Pe,me=Ae;else if(G>de){let Me=G/de,Le=0;for(let De=1;De<G;De++)Pe=this._buildBevelVert(D,Q,(q+De)%ne,De/(G-1),ae),y.push(Se.topN,Pe.topP,me.topN),a===!1&&y.push(Pe.bottomP,Se.bottomN,me.bottomN),Se=Pe,De>(Le+1)*Me&&(Le++,Ae=this._buildBevelVert(D,X,(ie+Le)%J,Le/(de-1),ae),y.push(me.topN,Pe.topP,Ae.topP),a===!1&&y.push(Pe.bottomP,me.bottomN,Ae.bottomP),me=Ae)}else{let Me=de/G,Le=0;for(let De=1;De<de;De++)Ae=this._buildBevelVert(D,X,(ie+De)%J,De/(de-1),ae),y.push(me.topN,Pe.topP,Ae.topP),a===!1&&y.push(Pe.bottomP,me.bottomN,Ae.bottomP),me=Ae,De>(Le+1)*Me&&(Le++,Pe=this._buildBevelVert(D,Q,(q+Le)%ne,Le/(G-1),ae),y.push(Se.topN,Pe.topP,me.topN),a===!1&&y.push(Pe.bottomP,Se.bottomN,me.bottomN),Se=Pe)}q=(q+G)%ne,ie=(ie+de)%J,te=(te+1)%W}while(te!==he)}if(a===!1&&this._depth>this._bevel*2&&this._buildWall(j,D,y),A){let V=[];for(let Q=y.length-1;Q>=H+2;Q-=3){let X=y[Q-2],ne=y[Q-1],J=y[Q-0];V.push(J,ne,X)}y.splice(H,y.length-H,...V)}if(A){let V=[];for(let Q=j[j.length-1].boundary.vertices.length-1;Q>=1;Q-=2){let X=j[j.length-1].boundary.vertices[Q-1],ne=j[j.length-1].boundary.vertices[Q-0];V.push(X,ne)}x.push(V)}if(!A){let V=j[j.length-1],Q;try{Q=Sf({windingRule:j.length>1?un.POSITIVE:un.ODD,elementType:Gi.POLYGONS,vertexSize:2,strict:!0,contours:[V.insetPoints,...x]})}catch{Q=Rle}if(!Q)throw new Error("Error generating geometry for surface");l.length===0&&this._bevel<c&&Object.assign(this,{useNgonForTopBottomFaceDuringBake:!0});for(let X=0;X<Q.elementCount*3;X+=3){let ne=this._buildSurfaceVert(Q,Q.elements[X+0],$),J=this._buildSurfaceVert(Q,Q.elements[X+1],$),W=this._buildSurfaceVert(Q,Q.elements[X+2],$);y.push(ne.top,J.top,W.top),a===!1&&y.push(W.bottom,J.bottom,ne.bottom)}}this.vertexCache={}}this._buffer.shrink();let S=new Kt(Uint32Array.from(y),1),w=new Kt(this._buffer.positions,3),_=new Kt(this._buffer.normals,3),C=new Kt(this._buffer.uvs,2);w.needsUpdate=!0,_.needsUpdate=!0,C.needsUpdate=!0,S.needsUpdate=!0,this.setAttribute("position",w),this.setAttribute("normal",_),this.setAttribute("uv",C),this.setIndex(S)}_computeBufferEstimatedSize(e){return e.vertexCount*2*(2+this._bevelSegments)}_buildWall(e,t,r){let n=e[0];for(let i=0,o=n.boundary.vertexCount;i<o;i++){let a=this._buildBevelVert(t,n,i),s=this._buildBevelVert(t,n,(i+1)%o);r.push(s.topP,a.topN,a.bottomN),r.push(s.topP,a.bottomN,s.bottomP)}}_buildSurfaceVert(e,t,r){let n=t.toString();if(n in this.vertexCache)return this.vertexCache[n];let i=e.vertices[t*2+0],o=e.vertices[t*2+1],a=(i-this._minX)/this._width,s=(o-this._minY)/this._height;this.forPathBevel&&(s=1);let l=this._buffer.get(this.forPathBevel?1:2),u=l*3,d=l*2,c={top:l+0,bottom:l+1};return this._buffer.positions[u+0]=i,this._buffer.positions[u+1]=o,this._buffer.positions[u+2]=this.forPathBevel?this._bevel:this._depth-r,this._buffer.normals[u+0]=0,this._buffer.normals[u+1]=0,this._buffer.normals[u+2]=1,this._buffer.uvs[d+0]=a,this._buffer.uvs[d+1]=s,this.forPathBevel===!1&&(this._buffer.positions[u+3]=i,this._buffer.positions[u+4]=o,this._buffer.positions[u+5]=r,this._buffer.normals[u+3]=0,this._buffer.normals[u+4]=0,this._buffer.normals[u+5]=-1,this._buffer.uvs[d+2]=a,this._buffer.uvs[d+3]=s),this.vertexCache[n]=c,c}_buildBevelVert(e,t,r,n=1,i){let o=`${t.bevelI}:${r}`;if(o in this.vertexCache&&i!==0&&i!==1&&(!i||i===this.vertexCache[o].pathBevelUCoord))return this.vertexCache[o];let[a,s]=t.boundary.vertexIndices[r],l,u,d,c;a!==s?(u=a,l=s,c=!1,d=e.continuous[u]&&e.continuous[l]):(l=a,u=(l-1+e.count)%e.count,c=e.concave[l]&&t.bevelI>0,d=e.continuous[l]||c);let h=Math.cos(t.angle),f=Math.sin(t.angle),m=r*2,p=l*2,g=u*2,v=t.boundary.vertices[m+0],b=t.boundary.vertices[m+1],y=(1-f)*this._bevel,x=(v-this._minX)/this._width,S=(b-this._minY)/this._height;this.forPathBevel&&(i!==void 0&&(x=i),S=1);let w=e.normals[p+0],_=e.normals[p+1],C=e.normals[g+0],E=e.normals[g+1];if(c){let T=C-w,D=E-_;w=w+T*(1-n),_=_+D*(1-n);let N=Math.sqrt(w*w+_*_);w/=N,_/=N}let A=this.forPathBevel?this._buffer.get(d?1:2):this._buffer.get(d?2:4),M=A*3,I=A*2,O={i:r,fi:l,topP:A+0,topN:A+0,bottomP:A+1,bottomN:A+1,pathBevelUCoord:i};return this._buffer.positions[M+0]=v,this._buffer.positions[M+1]=b,this._buffer.positions[M+2]=(this.forPathBevel?this._bevel:this._depth)-y,this._buffer.normals[M+0]=w*h,this._buffer.normals[M+1]=_*h,this._buffer.normals[M+2]=f,this._buffer.uvs[I+0]=x,this._buffer.uvs[I+1]=S,this.forPathBevel===!1&&(this._buffer.positions[M+3]=v,this._buffer.positions[M+4]=b,this._buffer.positions[M+5]=y,this._buffer.normals[M+3]=w*h,this._buffer.normals[M+4]=_*h,this._buffer.normals[M+5]=-f,this._buffer.uvs[I+2]=S,this._buffer.uvs[I+3]=x),d||(this.forPathBevel?(A+=1,M+=3,I+=2):(A+=2,M+=6,I+=4),O.topP=A+0,O.bottomP=A+1,this._buffer.positions[M+0]=v,this._buffer.positions[M+1]=b,this._buffer.positions[M+2]=(this.forPathBevel?this._bevel:this._depth)-y,this._buffer.normals[M+0]=C*h,this._buffer.normals[M+1]=E*h,this._buffer.normals[M+2]=f,this._buffer.uvs[I+0]=x,this._buffer.uvs[I+1]=S,this.forPathBevel===!1&&(this._buffer.positions[M+3]=v,this._buffer.positions[M+4]=b,this._buffer.positions[M+5]=y,this._buffer.normals[M+3]=C*h,this._buffer.normals[M+4]=E*h,this._buffer.normals[M+5]=-f,this._buffer.uvs[I+2]=S,this._buffer.uvs[I+3]=x)),this.vertexCache[o]=O,O}clone(){let e=new IU(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=vO(this.userData),e}},kle=class extends Nt{constructor(e,t=12,r={}){super(),this.type="ShapeGeometry",this.windingRule=un.ODD,this.elementType=Gi.POLYGONS,this.polySize=3,this.vertexSize=2,this.strict=!0,this._shape=e,this._curveSegments=t,this._triangulationOptions=Object.assign({windingRule:un.ODD,elementType:Gi.POLYGONS,polySize:3,vertexSize:2,strict:!0},r);let n=this._shape.extractShapePointsToFlatArray([],this._curveSegments),i=this._shape.shapeHoles.map(h=>h.extractShapePointsToFlatArray([],this._curveSegments)),o,a=!0,s=!0,l,u;for(let h=0,f=n.length/2;h<f;h++){let m=h*2,p=n[m+0],g=n[m+1];if(l!==void 0&&p!==l&&(a=!1),u!==void 0&&g!==u&&(s=!1),l=p,u=g,!a&&!s)break}if(!a&&!s)try{o=Sf({contours:[n,...i],windingRule:this._triangulationOptions.windingRule,elementType:this._triangulationOptions.elementType,polySize:this._triangulationOptions.polySize,vertexSize:this._triangulationOptions.vertexSize,strict:this._triangulationOptions.strict})}catch{o=OU}let d=(o==null?void 0:o.vertexCount)??1,c=(o==null?void 0:o.elementCount)??1;if(this._positionAttribute=new Kt(new Float32Array(d*3),3),this._normalAttribute=new Kt(new Float32Array(d*3),3),this._uvAttribute=new Kt(new Float32Array(d*2),2),this._indexAttribute=new Kt(new Uint32Array(c*3),1),o){let h=1/0,f=-1/0,m=1/0,p=-1/0;for(let b=0,y=d;b<y;b++){let x=b*2,S=o.vertices[x+0],w=o.vertices[x+1];S<h&&(h=S),S>f&&(f=S),w<m&&(m=w),w>p&&(p=w)}let g=f-h,v=p-m;for(let b=0,y=d;b<y;b++){let x=b*2,S=o.vertices[x+0],w=o.vertices[x+1],_=(S-h)/g,C=(w-m)/v;this._positionAttribute.setXYZ(b,S,w,0),this._normalAttribute.setXYZ(b,0,0,1),this._uvAttribute.setXY(b,_,C)}for(let b=0,y=c;b<y;b++){let x=b*3,S=o.elements[x+0],w=o.elements[x+1],_=o.elements[x+2];this._indexAttribute.setX(x+0,S),this._indexAttribute.setX(x+1,w),this._indexAttribute.setX(x+2,_)}}this.setAttribute("position",this._positionAttribute),this.setAttribute("normal",this._normalAttribute),this.setAttribute("uv",this._uvAttribute),this.setIndex(this._indexAttribute),this.setDrawRange(0,((o==null?void 0:o.elementCount)??1)*3)}clone(){let e=new kle(this._shape,this._curveSegments);return e.userData=vO(this.userData),e}},Lle=class extends IU{constructor(e,t,r=0,n=12,i=3,o=un.ODD){super(e,t,r,n,i,o),this.type="ShapeGeometry"}_computeBufferEstimatedSize(e){return e.vertexCount*2*(2+this._bevelSegments)}_buildWall(e,t,r){let n=e[0];for(let i=0,o=n.boundary.vertexCount;i<o;i++){let a=this._buildBevelVert(t,n,i),s=this._buildBevelVert(t,n,(i+1)%o);r.push(s.topP,a.topN,a.bottomN),r.push(s.topP,a.bottomN,s.bottomP)}}clone(){let e=new Lle(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=vO(this.userData),e}},gg=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var u,d;let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,subdivisions:40,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3,windingRule:un.ODD},e.parameters),n=Math.abs(r.width),i=Math.abs(r.height??r.width),o=Math.abs(r.depth??0),a=e.shape??(t==null?void 0:t.shape),s=(a==null?void 0:a.roundness)??r.roundness;a!==void 0&&(a instanceof bi?(a.width!==n||a.height!==i)&&a.applySize(n,i):a=new bi(n,i).fromJSON(a),((u=e.parameters)==null?void 0:u.roundness)!==void 0&&((d=e.parameters)==null?void 0:d.roundness)>0&&a.update());let l=a??new bi(n,i);return{parameters:Object.assign(r,{width:n,height:i,depth:o,roundness:s}),shape:l}}static build(e){let{depth:t,extrudeBevelSize:r,extrudeBevelSegments:n,subdivisions:i,roundness:o,windingRule:a}=e.parameters;e.shape.roundness=o;let s;return t<=0?s=new kle(e.shape,i,{windingRule:a}):s=new Lle(e.shape,t,r,i,n,a),Object.assign(s,{userData:{...e,type:"VectorGeometry"}})}},Nle=Math.PI*2,DU=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,spikes:64,angle:360,innerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return r.angle=Et.clamp(r.angle,0,360),{shape:e.shape&&e.shape instanceof bi?e.shape:new bi,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??0)})}}static build(e){let{width:t,height:r,spikes:n,angle:i,innerRadius:o,depth:a,extrudeBevelSize:s,extrudeBevelSegments:l}=e.parameters,u=e.shape,d=t*.5,c=r*.5,h=j0t(u,d,c,i*Math.PI/180,n,o);u.isClosed=!0,u.update();let f;return i===0?(f=new Nt,f.setAttribute("position",new ft([],3))):f=gg.create({shape:u,parameters:{subdivisions:h,depth:a,extrudeBevelSize:s,extrudeBevelSegments:l}}),Object.assign(f,{userData:{...e,type:"EllipseGeometry"}})}};function j0t(e,t,r,n,i,o){if(n>=Nle)return i>30||i%4===0?($0t(e,t,r,o),Math.round(i/4)):XK(e,n,i,t,r,o);n=Math.max(n,.001);let a={x:0,y:r},s=n+Math.PI*.5,l={x:Math.cos(s)*t,y:Math.sin(s)*r},u=k0t({px:a.x,py:a.y,cx:l.x,cy:l.y,rx:t,ry:r,largeArcFlag:n>Math.PI,sweepFlag:!0});return i>30||i%u.length===0?U0t(e,a.x,a.y,u,i,t,r,o):XK(e,n,i,t,r,o)}function U0t(e,t,r,n,i,o,a,s){let l=Math.round(i/n.length);e.addPoint(wy(t,r));for(let u=0,d=n.length;u<d;u++){let c=n[u],h=e.points[u],f=wy(c.x,c.y);h.controls[1].position.set(c.x1,c.y1),f.controls[0].position.set(c.x2,c.y2),e.addPoint(f)}return s>0?zle(e,o,a,s):e.addPoint(wy(0,0)),l}function XK(e,t,r,n,i,o){let a=-t/r;for(let s=0;s<=r;s++){let l=a*s,u=Math.sin(l)*n,d=Math.cos(l)*i;e.addPoint(wy(u,d))}return t<Nle?o>0?zle(e,n,i,o):e.addPoint(wy(0,0)):(e.removePoint(e.points[e.points.length-1]),o>0&&Ble(e,n,i,o)),1}function $0t(e,t,r,n=0,i=0,o=0){let a=.5522847498,s=t*a,l=r*a;e.addPoint(YC(i-t,o,i-t,o-l,i-t,o+l)),e.addPoint(YC(i,o+r,i-s,o+r,i+s,o+r)),e.addPoint(YC(i+t,o,i+t,o+l,i+t,o-l)),e.addPoint(YC(i,o-r,i+s,o-r,i-s,o-r)),n>0&&Ble(e,t,r,n)}function wy(e,t){return new xy(Et.generateUUID(),new ue(e,t))}function YC(e,t,r,n,i,o){let a=wy(e,t);return a.controls[0].position.set(r,n),a.controls[1].position.set(i,o),a}function zle(e,t,r,n){Fle(e,t,r,n).forEach(i=>e.addPoint(i))}function Ble(e,t,r,n){let i=Fle(e,t,r,n),o=new bi;i.forEach(a=>o.addPoint(a)),o.isClosed=!0,e.shapeHoles.push(o)}function Fle(e,t,r,n){let i=n*t/100,o=i*(Math.abs(r)/Math.abs(t)),a=new ue(i/t,o/r),s=e.points.map(l=>{let u=l.clone();return u.uuid=Et.generateUUID(),u}).reverse();return s.forEach(l=>{l.position.multiply(a);let u=l.controls[0].position.clone().multiply(a),d=l.controls[1].position.clone().multiply(a);l.controls[0].position.copy(d),l.controls[1].position.copy(u)}),s}var V0t=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,revolutions:2,segments:40,pathRadius:10,pathType:0,pathSegments:30,cornerRadius:30,cornerSegments:4},e.parameters),n=Math.abs(r.width),i=Math.abs(r.height??n),o=Math.abs(r.depth??n),a=Math.abs(Math.min(n,o))/2;return{parameters:Object.assign(r,{width:n,height:i,depth:o,radius:a,segments:Math.round(r.segments),pathSegments:Math.round(r.pathSegments),cornerSegments:Math.round(r.cornerSegments)})}}static build(e){let{width:t,height:r,depth:n,radius:i,revolutions:o,segments:a,pathRadius:s,pathType:l,pathSegments:u,cornerRadius:d,cornerSegments:c}=e.parameters,h=new jle(!1,t,r,n,i,o,a,s,l,u,d,c);return Object.assign(h,{userData:{...e,type:"HelixGeometry"}})}},AR=new hy([0,0,0],1),jle=class extends Nt{constructor(e=!0,t=1,r=1,n=1,i=1,o=1,a=1,s=1,l=1,u=1,d=1,c=1){if(super(),o===0)return;let h=e&&o===1;h&&(c=0),d>100&&(d=100),d===0&&(c=0);let f=()=>new F,m=new F,p=f(),g=f(),v=f(),b,y,x,S,w,_,C,E,A=f(),M=f(),I=f(),O=f(),T=f(),D=f(),N=f(),k=f(),R=r-2*s+.001,z=R/o,j=Math.ceil(a*o),$=j+1,U=R/j,H=-R/2,V=u+1,Q=2*Math.PI/u,X=Math.PI/2/c,ne=.01,J=Math.min((1-d/100)*s,s-ne),W=s-J,te=0,Z=2,q=c*Z+Z,ie=V*q/Z,he=ie+V*$,ae=Math.max(0,V*($+q)),[be,ye,Se]=[3,3,2].map(pe=>Array(ae*pe).fill(0)),me=[],Pe=i-s;function Ae(pe,Ge){let Ke=Math.PI/2;_=Ge*U,E=2*Math.PI*(_%z)/z+Ke,_+=H,C=Math.sin(E)*Pe,w=Math.cos(E)*Pe,e?pe.set(w,C,_):pe.set(w,_,C)}Ae(m,-1e-10),Ae(p,0),A.copy(m),Ae(m,1);let K=m.distanceTo(p),G=h?0:W+J,de=K*j+2*G,Ee=J,Me=de-G;for(let pe=0;pe<=j;pe++){Ae(g,pe),k.subVectors(g,A).normalize(),A.copy(g),D.copy(g).setComponent(+e+1,0).normalize(),N.crossVectors(k,D).normalize();let Ge=pe===0,Ke=pe===j,Xe=Ge?3*Math.PI/2:X,et=Ge?Ee:Me,st=Ge?V:he,Ut=Ge?0:ae-V,Cr=k.clone().multiplyScalar(Ge?-W:W).add(g),Mr=k.clone().multiplyScalar(Ge?-1:1).normalize();for(let fe=0;fe<V;fe++){let Oe=fe*Q;if(M.addVectors(m.copy(D).multiplyScalar(s*Math.cos(Oe)),p.copy(N).multiplyScalar(s*Math.sin(Oe))),I.copy(M).normalize(),Ge||Ke){h||(te=Ut+fe,[0,1,2].forEach(ze=>{be[te*3+ze]=Cr.getComponent(ze),ye[te*3+ze]=Mr.getComponent(ze)}),Se[te*2]=+Ke,Se[te*2+1]=fe/u),p.copy(I).multiplyScalar(J),v.addVectors(g,p);for(let ze=0;ze<c;ze++){let Je=ze*X+Xe;O.addVectors(m.copy(k).multiplyScalar(W*Math.sin(Je)),p.copy(I).multiplyScalar(W*Math.cos(Je))),T.copy(O).normalize(),p.addVectors(v,O),O.normalize(),te=st+ze*V+fe,[0,1,2].forEach(Zt=>{be[te*3+Zt]=p.getComponent(Zt),ye[te*3+Zt]=T.getComponent(Zt)});let Tt=+Ge+Math.sin(Je);Se[te*2]=(et+W*Tt)/de,Se[te*2+1]=fe/u}}p.addVectors(g,M),te=ie+pe*V+fe,[0,1,2].forEach(ze=>{be[te*3+ze]=p.getComponent(ze),ye[te*3+ze]=I.getComponent(ze)}),Se[te*2]=(G+pe*K)/de,Se[te*2+1]=fe/u}}let Le=$+2*c+Z,[De,Ce]=[+h,Le-1];for(let pe=De;pe<=Ce-1;pe++){let Ge=h&&pe===Ce-1;for(let Ke=0;Ke<V-1;Ke++)b=pe*V+Ke,y=b+1,x=(Ge?Ke:b)+V,S=(Ge?Ke+1:y)+V,pe===0?me.push(y,S,x):pe===Le-2?me.push(b,y,x):me.push(b,y,x,y,S,x)}this.setIndex(me),this.setAttribute("position",new ft(be,3)),this.setAttribute("normal",new ft(ye,3)),this.setAttribute("uv",new ft(Se,2))}getClosedTorusIndicesForBooleanOrSubdiv(){let e=this.userData.parameters,t=Math.ceil(e.tubularSegments),r=e.radialSegments+1,n=Array.from(this.getIndex().array),i,o,a,s,l=6*(t-1)*e.radialSegments,u=t,d=u===t;for(let c=0;c<e.radialSegments;c++)i=u*r+c,o=i+1,a=(d?c:i)+r,s=(d?c+1:o)+r,n[l++]=i,n[l++]=o,n[l++]=a,n[l++]=o,n[l++]=s,n[l++]=a;return n.length=l,AR.array=n,AR.count=n.length,AR}},H0t=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,height:r,depth:n,detail:i,corner:o,cornerSides:a}=e.parameters,s=i===0&&o!==0?new Ule(t*.5,o,a):new Uae(t*.5,i);return s.scale(1,r/t,n/t),Object.assign(s,{userData:{...e,type:"IcosahedronGeometry"}})}},Ule=class extends MU{constructor(e=1,t=.2,r=4){let n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a="IcosahedronGeometry";super(i,o,a,e,t,r),this.type=a}static fromJSON(e){return new Ule(e.radius,e.corner,e.cornerSides)}},G0t=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var n;(((n=e.parameters)==null?void 0:n.points)??[]).forEach(i=>{Array.isArray(i)&&(i.x=i[0],i.y=i[1])});let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,segments:64,verticalSegments:64,points:[{x:0,y:-50,id:0},{x:50,y:-50,id:1},{x:50,y:50,id:2},{x:0,y:50,id:3}]},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{points:t,segments:r,verticalSegments:n}=e.parameters,i=new sP;i.moveTo(t[0].x,t[0].y),i.bezierCurveTo(t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y);let o=new kae(i.extractPoints(n).shape,r);return o.rotateZ(Math.PI),Object.assign(o,{userData:{...e,type:"LatheGeometry"}})}},Zu=new qe,ER=new hn,QC=new F,BP=class extends qo{constructor(){super(),this.uuid=Et.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}applyMatrix4(e){let t=new Ii().getNormalMatrix(e);for(let r=0,n=this.vertices.length;r<n;r++)this.vertices[r].applyMatrix4(e);for(let r=0,n=this.faces.length;r<n;r++){let i=this.faces[r];i.normal.applyMatrix3(t).normalize();for(let o=0,a=i.vertexNormals.length;o<a;o++)i.vertexNormals[o].applyMatrix3(t).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}rotateX(e){return Zu.makeRotationX(e),this.applyMatrix4(Zu),this}rotateY(e){return Zu.makeRotationY(e),this.applyMatrix4(Zu),this}rotateZ(e){return Zu.makeRotationZ(e),this.applyMatrix4(Zu),this}translate(e,t,r){return Zu.makeTranslation(e,t,r),this.applyMatrix4(Zu),this}scale(e,t,r){return Zu.makeScale(e,t,r),this.applyMatrix4(Zu),this}lookAt(e){return ER.lookAt(e),ER.updateMatrix(),this.applyMatrix4(ER.matrix),this}fromBufferGeometry(e){let t=this,r=e.index!==null?e.index:void 0,n=e.attributes;if(n.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;let i=n.position,o=n.normal,a=n.color,s=n.uv,l=n.uv2;l!==void 0&&(this.faceVertexUvs[1]=[]);for(let c=0;c<i.count;c++)t.vertices.push(new F().fromBufferAttribute(i,c)),a!==void 0&&t.colors.push(new Bt().fromBufferAttribute(a,c));function u(c,h,f,m){let p=a===void 0?[]:[t.colors[c].clone(),t.colors[h].clone(),t.colors[f].clone()],g=o===void 0?[]:[new F().fromBufferAttribute(o,c),new F().fromBufferAttribute(o,h),new F().fromBufferAttribute(o,f)],v=new Iz(c,h,f,g,p,m);t.faces.push(v),s!==void 0&&t.faceVertexUvs[0].push([new ue().fromBufferAttribute(s,c),new ue().fromBufferAttribute(s,h),new ue().fromBufferAttribute(s,f)]),l!==void 0&&t.faceVertexUvs[1].push([new ue().fromBufferAttribute(l,c),new ue().fromBufferAttribute(l,h),new ue().fromBufferAttribute(l,f)])}let d=e.groups;if(d.length>0)for(let c=0;c<d.length;c++){let h=d[c],f=h.start,m=h.count;for(let p=f,g=f+m;p<g;p+=3)r!==void 0?u(r.getX(p),r.getX(p+1),r.getX(p+2),h.materialIndex):u(p,p+1,p+2,h.materialIndex)}else if(r!==void 0)for(let c=0;c<r.count;c+=3)u(r.getX(c),r.getX(c+1),r.getX(c+2));else for(let c=0;c<i.count;c+=3)u(c,c+1,c+2);return this.computeFaceNormals(),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(QC).negate(),this.translate(QC.x,QC.y,QC.z),this}normalize(){this.computeBoundingSphere();let e=this.boundingSphere.center,t=this.boundingSphere.radius,r=t===0?1:1/t,n=new qe;return n.set(r,0,0,-r*e.x,0,r,0,-r*e.y,0,0,r,-r*e.z,0,0,0,1),this.applyMatrix4(n),this}computeFaceNormals(){let e=new F,t=new F;for(let r=0,n=this.faces.length;r<n;r++){let i=this.faces[r],o=this.vertices[i.a],a=this.vertices[i.b],s=this.vertices[i.c];e.subVectors(s,a),t.subVectors(o,a),e.cross(t),e.normalize(),i.normal.copy(e)}}computeVertexNormals(e=!0){let t=new Array(this.vertices.length);for(let r=0,n=this.vertices.length;r<n;r++)t[r]=new F;if(e){let r=new F,n=new F;for(let i=0,o=this.faces.length;i<o;i++){let a=this.faces[i],s=this.vertices[a.a],l=this.vertices[a.b],u=this.vertices[a.c];r.subVectors(u,l),n.subVectors(s,l),r.cross(n),t[a.a].add(r),t[a.b].add(r),t[a.c].add(r)}}else{this.computeFaceNormals();for(let r=0,n=this.faces.length;r<n;r++){let i=this.faces[r];t[i.a].add(i.normal),t[i.b].add(i.normal),t[i.c].add(i.normal)}}for(let r=0,n=this.vertices.length;r<n;r++)t[r].normalize();for(let r=0,n=this.faces.length;r<n;r++){let i=this.faces[r],o=i.vertexNormals;o.length===3?(o[0].copy(t[i.a]),o[1].copy(t[i.b]),o[2].copy(t[i.c])):(o[0]=t[i.a].clone(),o[1]=t[i.b].clone(),o[2]=t[i.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeFlatVertexNormals(){this.computeFaceNormals();for(let e=0,t=this.faces.length;e<t;e++){let r=this.faces[e],n=r.vertexNormals;n.length===3?(n[0].copy(r.normal),n[1].copy(r.normal),n[2].copy(r.normal)):(n[0]=r.normal.clone(),n[1]=r.normal.clone(),n[2]=r.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeMorphNormals(){for(let t=0,r=this.faces.length;t<r;t++){let n=this.faces[t];n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]);for(let i=0,o=n.vertexNormals.length;i<o;i++)n.__originalVertexNormals[i]?n.__originalVertexNormals[i].copy(n.vertexNormals[i]):n.__originalVertexNormals[i]=n.vertexNormals[i].clone()}let e=new BP;e.faces=this.faces;for(let t=0,r=this.morphTargets.length;t<r;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];let i=this.morphNormals[t].faceNormals,o=this.morphNormals[t].vertexNormals;for(let a=0,s=this.faces.length;a<s;a++){let l=new F,u={a:new F,b:new F,c:new F};i.push(l),o.push(u)}}let n=this.morphNormals[t];e.vertices=this.morphTargets[t].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let i=0,o=this.faces.length;i<o;i++){let a=this.faces[i],s=n.faceNormals[i],l=n.vertexNormals[i];s.copy(a.normal),l.a.copy(a.vertexNormals[0]),l.b.copy(a.vertexNormals[1]),l.c.copy(a.vertexNormals[2])}}for(let t=0,r=this.faces.length;t<r;t++){let n=this.faces[t];n.normal=n.__originalFaceNormal,n.vertexNormals=n.__originalVertexNormals}}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ki),this.boundingBox.setFromPoints(this.vertices)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ps),this.boundingSphere.setFromPoints(this.vertices)}merge(e,t,r=0){if(!(e&&e.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}let n,i=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,l=e.faces,u=this.colors,d=e.colors;t!==void 0&&(n=new Ii().getNormalMatrix(t));for(let c=0,h=a.length;c<h;c++){let f=a[c].clone();t!==void 0&&f.applyMatrix4(t),o.push(f)}for(let c=0,h=d.length;c<h;c++)u.push(d[c].clone());for(let c=0,h=l.length;c<h;c++){let f=l[c],m,p,g=f.vertexNormals,v=f.vertexColors,b=new Iz(f.a+i,f.b+i,f.c+i);b.normal.copy(f.normal),n!==void 0&&b.normal.applyMatrix3(n).normalize();for(let y=0,x=g.length;y<x;y++)m=g[y].clone(),n!==void 0&&m.applyMatrix3(n).normalize(),b.vertexNormals.push(m);b.color.copy(f.color);for(let y=0,x=v.length;y<x;y++)p=v[y],b.vertexColors.push(p.clone());b.materialIndex=f.materialIndex+r,s.push(b)}for(let c=0,h=e.faceVertexUvs.length;c<h;c++){let f=e.faceVertexUvs[c];this.faceVertexUvs[c]===void 0&&(this.faceVertexUvs[c]=[]);for(let m=0,p=f.length;m<p;m++){let g=f[m],v=[];for(let b=0,y=g.length;b<y;b++)v.push(g[b].clone());this.faceVertexUvs[c].push(v)}}}mergeMesh(e){if(!(e&&e.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);return}e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)}mergeVertices(e=4){let t={},r=[],n=[],i=Math.pow(10,e);for(let s=0,l=this.vertices.length;s<l;s++){let u=this.vertices[s],d=Math.round(u.x*i)+"_"+Math.round(u.y*i)+"_"+Math.round(u.z*i);t[d]===void 0?(t[d]=s,r.push(this.vertices[s]),n[s]=r.length-1):n[s]=n[t[d]]}let o=[];for(let s=0,l=this.faces.length;s<l;s++){let u=this.faces[s];u.a=n[u.a],u.b=n[u.b],u.c=n[u.c];let d=[u.a,u.b,u.c];for(let c=0;c<3;c++)if(d[c]===d[(c+1)%3]){o.push(s);break}}for(let s=o.length-1;s>=0;s--){let l=o[s];this.faces.splice(l,1);for(let u=0,d=this.faceVertexUvs.length;u<d;u++)this.faceVertexUvs[u].splice(l,1)}let a=this.vertices.length-r.length;return this.vertices=r,a}setFromPoints(e){this.vertices=[];for(let t=0,r=e.length;t<r;t++){let n=e[t];this.vertices.push(new F(n.x,n.y,n.z||0))}return this}sortFacesByMaterialIndex(){let e=this.faces,t=e.length;for(let s=0;s<t;s++)e[s]._id=s;function r(s,l){return s.materialIndex-l.materialIndex}e.sort(r);let n=this.faceVertexUvs[0],i=this.faceVertexUvs[1],o,a;n&&n.length===t&&(o=[]),i&&i.length===t&&(a=[]);for(let s=0;s<t;s++){let l=e[s]._id;o&&o.push(n[l]),a&&a.push(i[l])}o&&(this.faceVertexUvs[0]=o),a&&(this.faceVertexUvs[1]=a)}toJSON(){let e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.parameters!==void 0){let f=this.parameters;for(let m in f)f[m]!==void 0&&(e[m]=f[m]);return e}let t=[];for(let f=0;f<this.vertices.length;f++){let m=this.vertices[f];t.push(m.x,m.y,m.z)}let r=[],n=[],i={},o=[],a={},s=[],l={};for(let f=0;f<this.faces.length;f++){let m=this.faces[f],p=!0,g=!1,v=this.faceVertexUvs[0][f]!==void 0,b=m.normal.length()>0,y=m.vertexNormals.length>0,x=m.color.r!==1||m.color.g!==1||m.color.b!==1,S=m.vertexColors.length>0,w=0;if(w=u(w,0,0),w=u(w,1,p),w=u(w,2,g),w=u(w,3,v),w=u(w,4,b),w=u(w,5,y),w=u(w,6,x),w=u(w,7,S),r.push(w),r.push(m.a,m.b,m.c),r.push(m.materialIndex),v){let _=this.faceVertexUvs[0][f];r.push(h(_[0]),h(_[1]),h(_[2]))}if(b&&r.push(d(m.normal)),y){let _=m.vertexNormals;r.push(d(_[0]),d(_[1]),d(_[2]))}if(x&&r.push(c(m.color)),S){let _=m.vertexColors;r.push(c(_[0]),c(_[1]),c(_[2]))}}function u(f,m,p){return p?f|1<<m:f&~(1<<m)}function d(f){let m=f.x.toString()+f.y.toString()+f.z.toString();return i[m]!==void 0||(i[m]=n.length/3,n.push(f.x,f.y,f.z)),i[m]}function c(f){let m=f.r.toString()+f.g.toString()+f.b.toString();return a[m]!==void 0||(a[m]=o.length,o.push(f.getHex())),a[m]}function h(f){let m=f.x.toString()+f.y.toString();return l[m]!==void 0||(l[m]=s.length/2,s.push(f.x,f.y)),l[m]}return e.data={},e.data.vertices=t,e.data.normals=n,o.length>0&&(e.data.colors=o),s.length>0&&(e.data.uvs=[s]),e.data.faces=r,e}clone(){return new BP().copy(this)}copy(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;let t=e.vertices;for(let c=0,h=t.length;c<h;c++)this.vertices.push(t[c].clone());let r=e.colors;for(let c=0,h=r.length;c<h;c++)this.colors.push(r[c].clone());let n=e.faces;for(let c=0,h=n.length;c<h;c++)this.faces.push(n[c].clone());for(let c=0,h=e.faceVertexUvs.length;c<h;c++){let f=e.faceVertexUvs[c];this.faceVertexUvs[c]===void 0&&(this.faceVertexUvs[c]=[]);for(let m=0,p=f.length;m<p;m++){let g=f[m],v=[];for(let b=0,y=g.length;b<y;b++){let x=g[b];v.push(x.clone())}this.faceVertexUvs[c].push(v)}}let i=e.morphTargets;for(let c=0,h=i.length;c<h;c++){let f={};if(f.name=i[c].name,i[c].vertices!==void 0){f.vertices=[];for(let m=0,p=i[c].vertices.length;m<p;m++)f.vertices.push(i[c].vertices[m].clone())}if(i[c].normals!==void 0){f.normals=[];for(let m=0,p=i[c].normals.length;m<p;m++)f.normals.push(i[c].normals[m].clone())}this.morphTargets.push(f)}let o=e.morphNormals;for(let c=0,h=o.length;c<h;c++){let f={};if(o[c].vertexNormals!==void 0){f.vertexNormals=[];for(let m=0,p=o[c].vertexNormals.length;m<p;m++){let g=o[c].vertexNormals[m],v={};v.a=g.a.clone(),v.b=g.b.clone(),v.c=g.c.clone(),f.vertexNormals.push(v)}}if(o[c].faceNormals!==void 0){f.faceNormals=[];for(let m=0,p=o[c].faceNormals.length;m<p;m++)f.faceNormals.push(o[c].faceNormals[m].clone())}this.morphNormals.push(f)}let a=e.skinWeights;for(let c=0,h=a.length;c<h;c++)this.skinWeights.push(a[c].clone());let s=e.skinIndices;for(let c=0,h=s.length;c<h;c++)this.skinIndices.push(s[c].clone());let l=e.lineDistances;for(let c=0,h=l.length;c<h;c++)this.lineDistances.push(l[c]);let u=e.boundingBox;u!==null&&(this.boundingBox=u.clone());let d=e.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}toBufferGeometry(){let e=new W0t().fromGeometry(this),t=new Nt,r=new Float32Array(e.vertices.length*3);if(t.setAttribute("position",ZC.call(new Kt(r,3),e.vertices)),e.normals.length>0){let n=new Float32Array(e.normals.length*3);t.setAttribute("normal",ZC.call(new Kt(n,3),e.normals))}if(e.colors.length>0){let n=new Float32Array(e.colors.length*3);t.setAttribute("color",YK.call(new Kt(n,3),e.colors))}if(e.uvs.length>0){let n=new Float32Array(e.uvs.length*2);t.setAttribute("uv",QK.call(new Kt(n,2),e.uvs))}if(e.uvs2.length>0){let n=new Float32Array(e.uvs2.length*2);t.setAttribute("uv2",QK.call(new Kt(n,2),e.uvs2))}t.groups=e.groups;for(let n in e.morphTargets){let i=[],o=e.morphTargets[n];for(let a=0,s=o.length;a<s;a++){let l=o[a],u=new ft(l.data.length*3,3);u.name=l.name,i.push(ZC.call(u,l.data))}t.morphAttributes[n]=i}if(e.skinIndices.length>0){let n=new ft(e.skinIndices.length*4,4);t.setAttribute("skinIndex",ZK.call(n,e.skinIndices))}if(e.skinWeights.length>0){let n=new ft(e.skinWeights.length*4,4);t.setAttribute("skinWeight",ZK.call(n,e.skinWeights))}return e.boundingSphere!==null&&(t.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(t.boundingBox=e.boundingBox.clone()),t}computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")}computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}applyMatrix(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}dispose(){this.dispatchEvent({type:"dispose"})}static createBufferGeometryFromObject(e){let t=new Nt,r=e.geometry;if(e.isPoints||e.isLine){let n=new ft(r.vertices.length*3,3),i=new ft(r.colors.length*3,3);if(t.setAttribute("position",ZC.call(n,r.vertices)),t.setAttribute("color",YK.call(i,r.colors)),r.lineDistances&&r.lineDistances.length===r.vertices.length){let o=new ft(r.lineDistances.length,1);t.setAttribute("lineDistance",q0t.call(o,r.lineDistances))}r.boundingSphere!==null&&(t.boundingSphere=r.boundingSphere.clone()),r.boundingBox!==null&&(t.boundingBox=r.boundingBox.clone())}else e.isMesh&&(t=r.toBufferGeometry());return t}};BP.prototype.isGeometry=!0;var W0t=class{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){let t=[],r,n,i,o=e.faces;for(n=0;n<o.length;n++){let a=o[n];a.materialIndex!==i&&(i=a.materialIndex,r!==void 0&&(r.count=n*3-r.start,t.push(r)),r={start:n*3,materialIndex:i})}r!==void 0&&(r.count=n*3-r.start,t.push(r)),this.groups=t}fromGeometry(e){let t=e.faces,r=e.vertices,n=e.faceVertexUvs,i=n[0]&&n[0].length>0,o=n[1]&&n[1].length>0,a=e.morphTargets,s=a.length,l;if(s>0){l=[];for(let g=0;g<s;g++)l[g]={name:a[g].name,data:[]};this.morphTargets.position=l}let u=e.morphNormals,d=u.length,c;if(d>0){c=[];for(let g=0;g<d;g++)c[g]={name:u[g].name,data:[]};this.morphTargets.normal=c}let h=e.skinIndices,f=e.skinWeights,m=h.length===r.length,p=f.length===r.length;r.length>0&&t.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let g=0;g<t.length;g++){let v=t[g];this.vertices.push(r[v.a],r[v.b],r[v.c]);let b=v.vertexNormals;if(b.length===3)this.normals.push(b[0],b[1],b[2]);else{let x=v.normal;this.normals.push(x,x,x)}let y=v.vertexColors;if(y.length===3)this.colors.push(y[0],y[1],y[2]);else{let x=v.color;this.colors.push(x,x,x)}if(i===!0){let x=n[0][g];x!==void 0?this.uvs.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",g),this.uvs.push(new ue,new ue,new ue))}if(o===!0){let x=n[1][g];x!==void 0?this.uvs2.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",g),this.uvs2.push(new ue,new ue,new ue))}for(let x=0;x<s;x++){let S=a[x].vertices;l[x].data.push(S[v.a],S[v.b],S[v.c])}for(let x=0;x<d;x++){let S=u[x].vertexNormals[g];c[x].data.push(S.a,S.b,S.c)}m&&this.skinIndices.push(h[v.a],h[v.b],h[v.c]),p&&this.skinWeights.push(f[v.a],f[v.b],f[v.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this}},Iz=class{constructor(e,t,r,n,i,o=0){this.a=e,this.b=t,this.c=r,this.normal=n&&n.isVector3?n:new F,this.vertexNormals=Array.isArray(n)?n:[],this.color=i&&i.isColor?i:new Bt,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=o}clone(){return new this.constructor().copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,r=e.vertexNormals.length;t<r;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,r=e.vertexColors.length;t<r;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}};function q0t(e){return this.array.set(e),this}function YK(e){let t=this.array,r=0;for(let n=0,i=e.length;n<i;n++){let o=e[n];o===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),o=new Bt),t[r++]=o.r,t[r++]=o.g,t[r++]=o.b}return this}function QK(e){let t=this.array,r=0;for(let n=0,i=e.length;n<i;n++){let o=e[n];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n),o=new ue),t[r++]=o.x,t[r++]=o.y}return this}function ZC(e){let t=this.array,r=0;for(let n=0,i=e.length;n<i;n++){let o=e[n];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),o=new F),t[r++]=o.x,t[r++]=o.y,t[r++]=o.z}return this}function ZK(e){let t=this.array,r=0;for(let n=0,i=e.length;n<i;n++){let o=e[n];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),o=new or),t[r++]=o.x,t[r++]=o.y,t[r++]=o.z,t[r++]=o.w}return this}var K0t=["a","b","c"];function X0t(e,t){switch(t){case"c":return e.c;case"b":return e.b;case"a":default:return e.a}}function MR(e,t,r){let n=Math.min(e,t),i=Math.max(e,t),o=n+"_"+i;return r.get(o)}function PR(e,t,r,n,i,o){let a=Math.min(e,t),s=Math.max(e,t),l=a+"_"+s,u;if(n.has(l))u=n.get(l);else{let d=r[a],c=r[s];u={a:d,b:c,newEdge:null,faces:[]},n.set(l,u)}u.faces.push(i),o[e].edges.push(u),o[t].edges.push(u)}function Y0t(e,t,r,n){let i,o,a;for(i=0,o=e.length;i<o;i++)r[i]={edges:[]};for(i=0,o=t.length;i<o;i++)a=t[i],PR(a.a,a.b,e,n,a,r),PR(a.b,a.c,e,n,a,r),PR(a.c,a.a,e,n,a,r)}function JC(e,t,r,n,i){e.push(new Iz(t,r,n,void 0,void 0,i))}function Jg(e,t){return Math.abs(t-e)/2+Math.min(e,t)}function eA(e,t,r,n){e.push([t.clone(),r.clone(),n.clone()])}var Q0t=class{constructor(e=1){this.subdivisions=e}modify(e){e instanceof Nt?e=new BP().fromBufferGeometry(e):e=e.clone(),e.mergeVertices();let t=this.subdivisions;for(;t-- >0;)this._smooth(e);return e.computeFaceNormals(),e.computeVertexNormals(),e}_smooth(e){let t=new F,r,n,i,o,a,s=e.vertices,l=e.faces,u=e.faceVertexUvs[0],d=u!==void 0&&u.length>0,c=[],h=new Map;Y0t(s,l,c,h);let f=[],m,p,g,v,b,y,x;for(let ne of Array.from(h.keys())){for(p=h.get(ne),g=new F,b=3/8,y=1/8,x=p.faces.length,x!=2&&(b=.5,y=0,x!=1),g.addVectors(p.a,p.b).multiplyScalar(b),t.set(0,0,0),o=0;o<x;o++){for(v=p.faces[o],a=0;a<3&&(m=s[X0t(v,K0t[a])],!(m!==p.a&&m!==p.b));a++);m&&t.add(m)}t.multiplyScalar(y),g.add(t),p.newEdge=f.length,f.push(g)}let S,w,_,C,E,A,M,I=[];for(n=0,i=s.length;n<i;n++){for(A=s[n],E=c[n].edges,r=E.length,r==3?S=3/16:r>3&&(S=3/(8*r)),w=1-r*Number(S),_=S,r<=2&&(r==2?(w=3/4,_=1/8):r==1||r==0),M=A.clone().multiplyScalar(w),t.set(0,0,0),o=0;o<r;o++)C=E[o],m=C.a!==A?C.a:C.b,t.add(m);t.multiplyScalar(Number(_)),M.add(t),I.push(M)}let O=I.concat(f),T=I.length,D,N,k,R=[],z=[],j,$,U,H,V=new ue,Q=new ue,X=new ue;for(n=0,i=l.length;n<i;n++)v=l[n],D=Number(MR(v.a,v.b,h).newEdge)+T,N=Number(MR(v.b,v.c,h).newEdge)+T,k=Number(MR(v.c,v.a,h).newEdge)+T,JC(R,D,N,k,v.materialIndex),JC(R,v.a,D,k,v.materialIndex),JC(R,v.b,N,D,v.materialIndex),JC(R,v.c,k,N,v.materialIndex),d&&(j=u[n],$=j[0],U=j[1],H=j[2],V.set(Jg($.x,U.x),Jg($.y,U.y)),Q.set(Jg(U.x,H.x),Jg(U.y,H.y)),X.set(Jg($.x,H.x),Jg($.y,H.y)),eA(z,V,Q,X),eA(z,$,V,X),eA(z,U,Q,V),eA(z,H,X,Q));e.vertices=O,e.faces=R,d&&(e.faceVertexUvs[0]=z)}},no=new F,Z0t=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=e.geometry??(t==null?void 0:t.geometry)??new Nt().copy(new Jc(100,100,100)),n;t===void 0?(r.computeBoundingBox(),r.boundingBox.getSize(no),n={width:no.x,height:no.y,depth:no.z,subdivisions:0}):n=t.parameters;let i={...n,...e.parameters};return{parameters:{width:Math.abs(i.width),height:Math.abs(i.height),depth:Math.abs(i.depth),subdivisions:Math.abs(i.subdivisions)},geometry:r}}static build(e){let{width:t,height:r,depth:n,subdivisions:i}=e.parameters,o=e.geometry??new Nt().copy(new Jc(100,100,100)),a=o.userData.parameters;a===void 0?(o.computeBoundingBox(),o.boundingBox.getSize(no)):no.set(a.width,a.height,a.depth),(t!==no.x||r!==no.y||n!==no.z)&&o.scale(no.x===0?1:t/no.x,no.y===0?1:r/no.y,no.z===0?1:n/no.z);let s=o.originalGeometry;try{i>0?(s===void 0||(a==null?void 0:a.subdivisions)!==i)&&(s===void 0&&(s=o),o=new Q0t(i).modify(s).toBufferGeometry()):(s!==void 0&&(o=s),s=void 0,o.getAttribute("normal")===void 0&&o.computeVertexNormals())}catch{s!==void 0&&(o=s),s=void 0,o.getAttribute("normal")===void 0&&o.computeVertexNormals()}return s!==void 0&&Object.assign(o,{originalGeometry:s}),delete e.geometry,Object.assign(o,{userData:{...e,type:"NonParametricGeometry"}})}static loadFromUrl(e,t,r){new Xae(r).load(e,n=>{let i=this.normalizeInputs({geometry:n});n.boundingBox.getSize(no);let o=100/no.x;Object.assign(i.parameters,{width:100,height:no.y*o,depth:no.z*o}),t(this.build(i))})}},$le=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters);return{shape:e.shape&&e.shape instanceof bi?e.shape:new bi,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??0)})}}static build(e){let{width:t,height:r,spikes:n,cornerRadius:i,depth:o,extrudeBevelSize:a,extrudeBevelSegments:s}=e.parameters,l=e.shape,u=t*.5,d=r*.5,c=0,h=0,f=2*Math.PI/n;for(let p=0;p<n;p++){let g=f*p,v=c+Math.sin(g)*u,b=h+Math.cos(g)*d;l.addPoint(l.createPoint(v,b))}l.isClosed=!0;for(let p=0,g=l.points.length;p<g;p++)l.points[p].roundness=i;l.roundness=i,l.update();let m=gg.create({shape:l,parameters:{roundness:i,depth:o,extrudeBevelSize:a,extrudeBevelSegments:s}});return Object.assign(m,{userData:{...e,type:"PolygonGeometry"}})}},J0t=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:4,heightSegments:1,cornerRadius:0,cornerSegments:8,openEnded:!1},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,height:r,depth:n,radialSegments:i,heightSegments:o,openEnded:a,cornerRadius:s,cornerSegments:l}=e.parameters,u=new tbt(t*.5,r,i,o,a,s,l);return u.scale(1,1,n/t),Object.assign(u,{userData:{...e,type:"PyramidGeometry"}})}};function mx(e,t,r){r.x=e.x*t.x,r.y=e.y,r.z=e.x*t.y}function TR(e,t,r,n,i,o){let a=t.clone().sub(e),s=r.clone().sub(e),l=a.angleTo(s);if(a.normalize(),s.normalize(),n===i){let u=a.add(s).normalize();o.copy(e).addScaledVector(u,n/Math.sin(l/2))}else{let u=a.angleTo(s);o.copy(e),o.addScaledVector(a,i/Math.sin(u)),o.addScaledVector(s,n/Math.sin(u))}}function ebt(e,t,r){let n=e.clone().sub(t),i=r.clone().sub(t);return n.projectOnVector(i),n.add(t)}var tbt=class extends Nt{constructor(e=.5,t=1,r=4,n=1,i=!1,o=0,a=4){super(),r=Math.floor(Math.max(3,r)),n=Math.floor(n),a=Math.floor(a);let s=[],l=[],u=[],d=[],c=0,h=t/2,f=Math.PI/r,m=e*Math.cos(Math.PI/r),p=2*Math.PI/r,g=(r-2)*Math.PI/r,v=Math.PI-g,b=new F(0,-h,0),y=new F(0,h,0),x=new ue(e,-h),S=new ue(m,-h),w=new ue(0,y.y).sub(S),_=new ue(0,y.y).sub(x),C=new ue(w.y,-w.x).normalize(),E=new ue(_.y,-_.x).normalize(),A=e*Math.cos(Math.PI/r)*Math.tan((Math.PI-w.angle())/2)-1e-8;o=Math.min(o,A);let M;{let k=new F(C.x,C.y,0),R=new F(Math.cos(p)*k.x,k.y,Math.sin(p)*k.x);M=k.angleTo(R)}let I=o/Math.tan((Math.PI-w.angle())/2),O=o/Math.tan((Math.PI-M)/2),T=new F;if(!i){l.push(b.x,b.y,b.z),u.push(0,-1,0),d.push(0,0);let k=c++,R=[],z=x.clone(),j=I/Math.cos(Math.PI/r);z.x-=j;for(let $=0;$<r;$++){let U=$/r*Math.PI*2+f,H=new ue(Math.sin(U),Math.cos(U));mx(z,H,T),l.push(T.x,T.y,T.z),u.push(0,-1,0),d.push(0,0),R.push(c++)}for(let $=0;$<R.length;$++)s.push(R[$],k,R[($+1)%R.length])}{let k=new F,R=new F,z=new F,j=new F,$=new F,U=new F;for(let H=0;H<r;H++){let V=H/r*Math.PI*2+f,Q=(H+.5)/r*Math.PI*2+f,X=(H+1)/r*Math.PI*2+f,ne=new ue(Math.sin(V),Math.cos(V)),J=new ue(Math.sin(Q),Math.cos(Q)),W=new ue(Math.sin(X),Math.cos(X));mx(x,ne,R),mx(x,W,z),mx(C,J,k),TR(y,R,z,O,O,j),l.push(j.x,j.y,j.z),TR(R,y,z,O,I,$),l.push($.x,$.y,$.z),TR(z,R,y,I,O,U),l.push(U.x,U.y,U.z),u.push(k.x,k.y,k.z),u.push(k.x,k.y,k.z),u.push(k.x,k.y,k.z),d.push(0,0),d.push(0,0),d.push(0,0);let te=c++,Z=c++,q=c++;if(s.push(te,Z,q),o>0){{let ae=R.clone().add(z).multiplyScalar(.5),be=y.clone().sub(ae).normalize(),ye=b.clone().sub(ae).normalize().add(be).normalize().multiplyScalar(-1),Se=U.clone().sub($);D(ae,Se,ye,w.angle())}let ie,he;{let ae=new F;mx(E,W,ae);let be=U.clone().add(j).multiplyScalar(.5);be=ebt(be,z,y);let ye=U.clone().sub(j);[ie,he]=D(be,ye,ae,M,j.y)}{let ae=ie,be=ae.clone().setY(0).normalize(),ye=new F(0,-1,0),Se=be.clone().cross(ye);N(ae,be,ye,Se)}{let ae=w.angle(),be=Math.PI-ae,ye=y.clone();ye.y-=o/Math.sin(ae-Math.PI/2);let Se=new F,me=[];for(let Ae=0;Ae<a;Ae++){let K=[],G=Math.PI/2-be*Ae/a,de=Math.cos(G),Ee=Math.sin(G),Me=Q;for(let Le=0;Le<=Ae;Le++){let De=Math.cos(Me),Ce=Math.sin(Me);k.x=de*Ce,k.y=Ee,k.z=de*De,Se.copy(ye).addScaledVector(k,o),l.push(Se.x,Se.y,Se.z),u.push(k.x,k.y,k.z),d.push(0,0),K.push(c++),Me+=Math.PI*2/Ae/r}me.push(K)}he.reverse(),me.push(he);let Pe=me.length-1;for(let Ae=0;Ae<Pe;Ae++){let K=me[Ae],G=me[Ae+1],de=K.length-1;s.push(G[1],K[0],G[0]);for(let Ee=1;Ee<=de;Ee++)s.push(K[Ee],K[Ee-1],G[Ee]),s.push(G[Ee+1],K[Ee],G[Ee])}}}}}this.setIndex(s),this.setAttribute("position",new ft(l,3)),this.setAttribute("normal",new ft(u,3)),this.setAttribute("uv",new ft(d,2));function D(k,R,z,j,$){let U=-j/2,H=(Math.PI-j)/2,V=R.clone().normalize().cross(z);k.addScaledVector(z,-o/Math.sin(H));let Q=new F,X=new F,ne=1,J=c,W=[];for(let te=0;te<=a;te++){let Z=U+te/a*j;X.set(0,0,0),X.addScaledVector(V,Math.sin(Z)),X.addScaledVector(z,Math.cos(Z));for(let q=0;q<=ne;q++){let ie=q/ne-.5;if(Q.copy(k),Q.addScaledVector(R,ie),Q.addScaledVector(X,o),$!=null){let he=Math.max(0,Q.y-$);Q.addScaledVector(R,-he/R.y)}l.push(Q.x,Q.y,Q.z),u.push(X.x,X.y,X.z),d.push(0,0),q===0&&W.push(c),c++}}for(let te=0;te<a;te++)for(let Z=0;Z<ne;Z++){let q=J+Z+(ne+1)*te,ie=q+(ne+1),he=ie+1,ae=q+1;s.push(q,ie,ae),s.push(ie,he,ae)}return[k.clone().addScaledVector(R,.5),W]}function N(k,R,z,j){let $=Math.PI/2,U=_.angle()-$,H=[],V=new F,Q=new F;for(let ne=0;ne<=a;ne++){let J=[],W=ne/a;for(let te=0;te<=ne;te++){let Z=((ne?te/ne:0)-.5)*v,q=Math.cos(Z),ie=Math.sin(Z),he=Math.atan(Math.tan(U)*q),ae=($+he)*W,be=Math.cos(ae),ye=Math.sin(ae);V.set(0,0,0),V.addScaledVector(R,ye*q),V.addScaledVector(z,be),V.addScaledVector(j,ye*ie),Q.copy(k).addScaledVector(V,o),l.push(Q.x,Q.y,Q.z),u.push(V.x,V.y,V.z),d.push(0,0),J.push(c++)}H.push(J)}let X=H.length-1;for(let ne=0;ne<X;ne++){let J=H[ne],W=H[ne+1],te=J.length-1;s.push(J[0],W[1],W[0]);for(let Z=1;Z<=te;Z++)s.push(J[Z-1],J[Z],W[Z]),s.push(J[Z],W[Z+1],W[Z])}}}},Vle=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,cornerRadius:[0,0,0,0],cornerType:1,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters),n=Object.assign((t==null?void 0:t.ui)??{enabledIndieCorners:!1},e.ui);return{shape:e.shape&&e.shape instanceof bi?e.shape:new bi,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??0)}),ui:n}}static build(e){let t=e.shape,{width:r,height:n,cornerRadius:i,cornerType:o,depth:a,extrudeBevelSize:s,extrudeBevelSegments:l}=e.parameters,u={x:r*.5,y:n*.5},d={x:-u.x,y:-u.y},c={x:u.x,y:u.y};function h(x,S,w){return S>r&&w>n?Math.min(x*r/S,x*n/w):S>r?x*r/S:w>n?x*n/w:x}let f=[];f[0]=i[0]===0?0:h(i[0],i[0]+i[3],i[0]+i[1]),f[1]=i[1]===0?0:h(i[1],i[1]+i[2],i[1]+i[0]),f[2]=i[2]===0?0:h(i[2],i[2]+i[1],i[2]+i[3]),f[3]=i[3]===0?0:h(i[3],i[3]+i[0],i[3]+i[2]);let m=d.x,p=c.x,g=c.y,v=d.y;t.addPoint(t.createPoint(m,g)),t.addPoint(t.createPoint(p,g)),t.addPoint(t.createPoint(p,v)),t.addPoint(t.createPoint(m,v)),t.isClosed=!0;let b=!0;for(let x=0,S=t.points.length;x<S;x++)t.points[x].roundness=f[x],x>0&&f[x]!==f[x-1]&&(b=!1);b&&(t.roundness=f[0]),t.useCubicForRoundedCorners=o!==1,t.update();let y=gg.create({shape:t,parameters:{depth:a,extrudeBevelSize:s,extrudeBevelSegments:l}});return Object.assign(y,{userData:{...e,type:"RectangleGeometry"}})}},rbt=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:180},e.parameters);return r.thetaLength=Et.clamp(r.thetaLength,0,180),{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t=100,height:r=t,depth:n=t,widthSegments:i=64,heightSegments:o=64,phiStart:a,phiLength:s,thetaStart:l,thetaLength:u}=e.parameters,d;return u===0?(d=new Nt,d.setAttribute("position",new ft([],3))):d=new G4(.5*t,i,o,a,s,l,u*Et.DEG2RAD),d.scale(1,r/t,n/t),Object.assign(d,{userData:{...e,type:"SphereGeometry"}})}},nbt=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,widthSegments:8,heightSegments:8},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:0})}}static build(e){let{width:t=100,height:r=t,widthSegments:n=8,heightSegments:i=8}=e.parameters,o=new aO(t,r,n,i);return o.scale(1,1,1),Object.assign(o,{userData:{...e,type:"PlaneGeometry"}})}},ibt=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,angle:90,cornerRadius:24,cornerSegments:8},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,height:r,depth:n,angle:i,cornerRadius:o,cornerSegments:a}=e.parameters,s=new obt(t,r,n,i,o,a);return Object.assign(s,{userData:{...e,type:"BackdropGeometry"}})}},obt=class extends Nt{constructor(e=1,t=1,r=1,n=90,i=10,o=24){super(),this.type="BackdropGeometry";let a=[],s=[],l=[],u=.001;i==0&&(o=1),o=Math.max(1,Math.floor(o)),i=Math.min(i,100),n=Math.min(180-u,n),n*=Math.PI/180;let d=[],c=Math.PI/2,h=(ne=0,J=0,W=0)=>new F(ne,J,W),f=h(),m=h(),[p,g,v]=[t/2,e/2,r/2],b=-g,y=+g,[x,S,w]=[h(b,-p,+v),h(b,-p,-v),h(b,+p,-v)],_=(ne,J=!1)=>Math.sin(ne-Math.PI/(1+ +J)),C=(ne,J=!1)=>Math.cos(ne-Math.PI/(1+ +J));w.y=Math.sin(n)*t-p;let E=Math.cos(n)*t-v,A=x.z-u;n<=c?(w.z=Math.min(E,A),w.z==A&&(w.y-=(E-A)/Math.tan(c-n))):S.z=Math.min(S.z-E-v,x.z-u),f.subVectors(x,S),m.subVectors(w,S);let M=Math.min(f.length(),m.length())*i/100,I=M*Math.tan(n/2),O=M/Math.cos(n/2),T=f.clone().normalize().add(m.normalize()).setLength(O).add(S);f.set(0,_(n,!0),C(n,!0)),d.push([w,f.clone()]);let D=(Math.PI-n)/o;for(let ne=0;ne<=o;ne++){let J=c+n+ne*D;f.set(0,Math.sin(J)*I,Math.cos(J)*I),f.add(T),m.set(0,_(J),C(J)),d.push([f.clone(),m.clone()])}d.push([x,h(0,1,0)]);let N=Math.sin(D/2)*I*2,k=d.length-1,R=d[0][0].distanceTo(d[1][0]),z=d[k-1][0].distanceTo(d[k][0]),j=R+N*o+z;d[0].push(1);for(let ne=0;ne<=o;ne++)d[ne+1].push(1-(R+ne*N)/j);d[k].push(0);let[$,U,H]=d[0],V,Q,X;for(let ne=1;ne<d.length;ne++)[V,Q,X]=d[ne],a.push(b,$.y,$.z,b,V.y,V.z,y,$.y,$.z,y,$.y,$.z,b,V.y,V.z,y,V.y,V.z),s.push(0,U.y,U.z,0,Q.y,Q.z,0,U.y,U.z,0,U.y,U.z,0,Q.y,Q.z,0,Q.y,Q.z),l.push(0,H,0,X,1,H,1,H,0,X,1,X),[$,U,H]=[V,Q,X];this.setAttribute("position",new ft(a,3)),this.setAttribute("normal",new ft(s,3)),this.setAttribute("uv",new ft(l,2))}},Hle=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,innerRadiusPercent:38.19,spikes:5,cornerRadius:0,angle:360,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof bi?e.shape:new bi,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??0)})}}static build(e){let{width:t,height:r,innerRadiusPercent:n,spikes:i,cornerRadius:o,angle:a,depth:s,extrudeBevelSize:l,extrudeBevelSegments:u}=e.parameters,d=e.shape,c=t*.5,h=r*.5,f=0,m=0,p=a*Math.PI/360/i,g=Math.PI/2*3*-1,v=c*n/100,b=h*n/100;if(i===3&&n===50){p=2*Math.PI/i;for(let x=0;x<i;x++){let S=p*x,w=f+Math.sin(S)*c,_=m+Math.cos(S)*h;d.addPoint(d.createPoint(w,_))}}else for(let x=0;x<i;x++){let S=f+Math.cos(g)*c,w=m+Math.sin(g)*h;d.addPoint(d.createPoint(S,w)),g+=p,S=f+Math.cos(g)*v,w=m+Math.sin(g)*b,d.addPoint(d.createPoint(S,w)),g+=p}d.isClosed=!0;for(let x=0,S=d.points.length;x<S;x++)d.points[x].roundness=o;d.roundness=o,d.update();let y=gg.create({shape:d,parameters:{roundness:o,depth:s,extrudeBevelSize:l,extrudeBevelSegments:u}});return Object.assign(y,{userData:{...e,type:"StarGeometry"}})}},abt=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??0)})}}static build(e){let{width:t,height:r}=e.parameters,n=new aO(t,r);return Object.assign(n,{userData:{...e,type:"TextFrameGeometry"}})}},sbt=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:32,tubularSegments:64,arc:360,cornerRadius:30,cornerSegments:8},e.parameters),n=Math.abs(r.width),i=Math.abs(r.height??r.width),o=Math.round(Math.abs(r.depth??r.width*.25));return{parameters:Object.assign(r,{width:n,height:i,depth:o})}}static build(e){let{width:t,height:r,depth:n,radialSegments:i,tubularSegments:o,arc:a,cornerRadius:s,cornerSegments:l}=e.parameters,u=lbt(t,r,n,t*.5,a,o,0,0,i,s,l);return u.scale(1,r/t,1),Object.assign(u,{userData:{...e,type:"TorusGeometry"}})}};function lbt(e,t,r,n,i,o,a,s,l,u,d){[t,r]=[r,t],a=t/2;let c=Et.clamp(i/360,0,1);if(c===0){let h=new Nt;return h.setAttribute("position",new ft([],3)),h}return c===1&&(u=0),new jle(!0,e,t,r,n,c,o,a,s,l,u,d)}var ubt=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,tubularSegments:64,radialSegments:32,p:2,q:3},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width),tube:r.tube??r.width*.125})}}static build(e){let{width:t,tube:r,tubularSegments:n,radialSegments:i,p:o,q:a}=e.parameters,s=t*.5;s!==r&&(s-=r);let l=new $ae(s,r,n,i,o,a);return Object.assign(l,{userData:{...e,type:"TorusKnotGeometry"}})}},cbt=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1,isRect:!1},e.parameters);return{shape:e.shape&&e.shape instanceof bi?e.shape:new bi,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width*(r.isRect?1:Math.sqrt(3)/2)),depth:Math.abs(r.depth??0)})}}static build(e){let{width:t=100,height:r,cornerRadius:n,depth:i,extrudeBevelSize:o,extrudeBevelSegments:a,isRect:s}=e.parameters,l=e.shape,u=t*.5,d=r*.5;s?(l.addPoint(l.createPoint(-u,d)),l.addPoint(l.createPoint(u,-d)),l.addPoint(l.createPoint(-u,-d))):(l.addPoint(l.createPoint(0,d)),l.addPoint(l.createPoint(u,-d)),l.addPoint(l.createPoint(-u,-d))),l.isClosed=!0;for(let h=0,f=l.points.length;h<f;h++)l.points[h].roundness=n;l.roundness=n,l.update();let c=gg.create({shape:l,parameters:{roundness:n,depth:i,extrudeBevelSize:o,extrudeBevelSegments:a}});return Object.assign(c,{userData:{...e,type:"TriangleGeometry"}})}};function dbt(e,t){let r=2*Math.PI;return(e%r+r)%r===(t%r+r)%r}var hbt=class{add(e,t,r){if(typeof arguments[0]!="string")for(let n in arguments[0])this.add(n,arguments[0][n],arguments[1]);else(Array.isArray(e)?e:[e]).forEach(function(n){this[n]=this[n]||[],t&&this[n][r?"unshift":"push"](t)},this)}run(e,t){this[e]=this[e]||[],this[e].forEach(function(r){r.call(t&&t.context?t.context:t,t)})}},fbt=class{constructor(e){this.jsep=e,this.registered={}}register(...e){e.forEach(t=>{if(typeof t!="object"||!t.name||!t.init)throw new Error("Invalid JSEP plugin format");this.registered[t.name]||(t.init(this.jsep),this.registered[t.name]=t)})}},Re=class{static get version(){return"1.3.8"}static toString(){return"JavaScript Expression Parser (JSEP) v"+Re.version}static addUnaryOp(e){return Re.max_unop_len=Math.max(e.length,Re.max_unop_len),Re.unary_ops[e]=1,Re}static addBinaryOp(e,t,r){return Re.max_binop_len=Math.max(e.length,Re.max_binop_len),Re.binary_ops[e]=t,r?Re.right_associative.add(e):Re.right_associative.delete(e),Re}static addIdentifierChar(e){return Re.additional_identifier_chars.add(e),Re}static addLiteral(e,t){return Re.literals[e]=t,Re}static removeUnaryOp(e){return delete Re.unary_ops[e],e.length===Re.max_unop_len&&(Re.max_unop_len=Re.getMaxKeyLen(Re.unary_ops)),Re}static removeAllUnaryOps(){return Re.unary_ops={},Re.max_unop_len=0,Re}static removeIdentifierChar(e){return Re.additional_identifier_chars.delete(e),Re}static removeBinaryOp(e){return delete Re.binary_ops[e],e.length===Re.max_binop_len&&(Re.max_binop_len=Re.getMaxKeyLen(Re.binary_ops)),Re.right_associative.delete(e),Re}static removeAllBinaryOps(){return Re.binary_ops={},Re.max_binop_len=0,Re}static removeLiteral(e){return delete Re.literals[e],Re}static removeAllLiterals(){return Re.literals={},Re}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(e){this.expr=e,this.index=0}static parse(e){return new Re(e).parse()}static getMaxKeyLen(e){return Math.max(0,...Object.keys(e).map(t=>t.length))}static isDecimalDigit(e){return e>=48&&e<=57}static binaryPrecedence(e){return Re.binary_ops[e]||0}static isIdentifierStart(e){return e>=65&&e<=90||e>=97&&e<=122||e>=128&&!Re.binary_ops[String.fromCharCode(e)]||Re.additional_identifier_chars.has(String.fromCharCode(e))}static isIdentifierPart(e){return Re.isIdentifierStart(e)||Re.isDecimalDigit(e)}throwError(e){let t=new Error(e+" at character "+this.index);throw t.index=this.index,t.description=e,t}runHook(e,t){if(Re.hooks[e]){let r={context:this,node:t};return Re.hooks.run(e,r),r.node}return t}searchHook(e){if(Re.hooks[e]){let t={context:this};return Re.hooks[e].find(function(r){return r.call(t.context,t),t.node}),t.node}}gobbleSpaces(){let e=this.code;for(;e===Re.SPACE_CODE||e===Re.TAB_CODE||e===Re.LF_CODE||e===Re.CR_CODE;)e=this.expr.charCodeAt(++this.index);this.runHook("gobble-spaces")}parse(){this.runHook("before-all");let e=this.gobbleExpressions(),t=e.length===1?e[0]:{type:Re.COMPOUND,body:e};return this.runHook("after-all",t)}gobbleExpressions(e){let t=[],r,n;for(;this.index<this.expr.length;)if(r=this.code,r===Re.SEMCOL_CODE||r===Re.COMMA_CODE)this.index++;else if(n=this.gobbleExpression())t.push(n);else if(this.index<this.expr.length){if(r===e)break;this.throwError('Unexpected "'+this.char+'"')}return t}gobbleExpression(){let e=this.searchHook("gobble-expression")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook("after-expression",e)}gobbleBinaryOp(){this.gobbleSpaces();let e=this.expr.substr(this.index,Re.max_binop_len),t=e.length;for(;t>0;){if(Re.binary_ops.hasOwnProperty(e)&&(!Re.isIdentifierStart(this.code)||this.index+e.length<this.expr.length&&!Re.isIdentifierPart(this.expr.charCodeAt(this.index+e.length))))return this.index+=t,e;e=e.substr(0,--t)}return!1}gobbleBinaryExpression(){let e,t,r,n,i,o,a,s,l;if(o=this.gobbleToken(),!o||(t=this.gobbleBinaryOp(),!t))return o;for(i={value:t,prec:Re.binaryPrecedence(t),right_a:Re.right_associative.has(t)},a=this.gobbleToken(),a||this.throwError("Expected expression after "+t),n=[o,i,a];t=this.gobbleBinaryOp();){if(r=Re.binaryPrecedence(t),r===0){this.index-=t.length;break}i={value:t,prec:r,right_a:Re.right_associative.has(t)},l=t;let u=d=>i.right_a&&d.right_a?r>d.prec:r<=d.prec;for(;n.length>2&&u(n[n.length-2]);)a=n.pop(),t=n.pop().value,o=n.pop(),e={type:Re.BINARY_EXP,operator:t,left:o,right:a},n.push(e);e=this.gobbleToken(),e||this.throwError("Expected expression after "+l),n.push(i,e)}for(s=n.length-1,e=n[s];s>1;)e={type:Re.BINARY_EXP,operator:n[s-1].value,left:n[s-2],right:e},s-=2;return e}gobbleToken(){let e,t,r,n;if(this.gobbleSpaces(),n=this.searchHook("gobble-token"),n)return this.runHook("after-token",n);if(e=this.code,Re.isDecimalDigit(e)||e===Re.PERIOD_CODE)return this.gobbleNumericLiteral();if(e===Re.SQUOTE_CODE||e===Re.DQUOTE_CODE)n=this.gobbleStringLiteral();else if(e===Re.OBRACK_CODE)n=this.gobbleArray();else{for(t=this.expr.substr(this.index,Re.max_unop_len),r=t.length;r>0;){if(Re.unary_ops.hasOwnProperty(t)&&(!Re.isIdentifierStart(this.code)||this.index+t.length<this.expr.length&&!Re.isIdentifierPart(this.expr.charCodeAt(this.index+t.length)))){this.index+=r;let i=this.gobbleToken();return i||this.throwError("missing unaryOp argument"),this.runHook("after-token",{type:Re.UNARY_EXP,operator:t,argument:i,prefix:!0})}t=t.substr(0,--r)}Re.isIdentifierStart(e)?(n=this.gobbleIdentifier(),Re.literals.hasOwnProperty(n.name)?n={type:Re.LITERAL,value:Re.literals[n.name],raw:n.name}:n.name===Re.this_str&&(n={type:Re.THIS_EXP})):e===Re.OPAREN_CODE&&(n=this.gobbleGroup())}return n?(n=this.gobbleTokenProperty(n),this.runHook("after-token",n)):this.runHook("after-token",!1)}gobbleTokenProperty(e){this.gobbleSpaces();let t=this.code;for(;t===Re.PERIOD_CODE||t===Re.OBRACK_CODE||t===Re.OPAREN_CODE||t===Re.QUMARK_CODE;){let r;if(t===Re.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==Re.PERIOD_CODE)break;r=!0,this.index+=2,this.gobbleSpaces(),t=this.code}this.index++,t===Re.OBRACK_CODE?(e={type:Re.MEMBER_EXP,computed:!0,object:e,property:this.gobbleExpression()},this.gobbleSpaces(),t=this.code,t!==Re.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):t===Re.OPAREN_CODE?e={type:Re.CALL_EXP,arguments:this.gobbleArguments(Re.CPAREN_CODE),callee:e}:(t===Re.PERIOD_CODE||r)&&(r&&this.index--,this.gobbleSpaces(),e={type:Re.MEMBER_EXP,computed:!1,object:e,property:this.gobbleIdentifier()}),r&&(e.optional=!0),this.gobbleSpaces(),t=this.code}return e}gobbleNumericLiteral(){let e="",t,r;for(;Re.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);if(this.code===Re.PERIOD_CODE)for(e+=this.expr.charAt(this.index++);Re.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);if(t=this.char,t==="e"||t==="E"){for(e+=this.expr.charAt(this.index++),t=this.char,(t==="+"||t==="-")&&(e+=this.expr.charAt(this.index++));Re.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);Re.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+e+this.char+")")}return r=this.code,Re.isIdentifierStart(r)?this.throwError("Variable names cannot start with a number ("+e+this.char+")"):(r===Re.PERIOD_CODE||e.length===1&&e.charCodeAt(0)===Re.PERIOD_CODE)&&this.throwError("Unexpected period"),{type:Re.LITERAL,value:parseFloat(e),raw:e}}gobbleStringLiteral(){let e="",t=this.index,r=this.expr.charAt(this.index++),n=!1;for(;this.index<this.expr.length;){let i=this.expr.charAt(this.index++);if(i===r){n=!0;break}else if(i==="\\")switch(i=this.expr.charAt(this.index++),i){case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:e+=i}else e+=i}return n||this.throwError('Unclosed quote after "'+e+'"'),{type:Re.LITERAL,value:e,raw:this.expr.substring(t,this.index)}}gobbleIdentifier(){let e=this.code,t=this.index;for(Re.isIdentifierStart(e)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(e=this.code,Re.isIdentifierPart(e));)this.index++;return{type:Re.IDENTIFIER,name:this.expr.slice(t,this.index)}}gobbleArguments(e){let t=[],r=!1,n=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let i=this.code;if(i===e){r=!0,this.index++,e===Re.CPAREN_CODE&&n&&n>=t.length&&this.throwError("Unexpected token "+String.fromCharCode(e));break}else if(i===Re.COMMA_CODE){if(this.index++,n++,n!==t.length){if(e===Re.CPAREN_CODE)this.throwError("Unexpected token ,");else if(e===Re.CBRACK_CODE)for(let o=t.length;o<n;o++)t.push(null)}}else if(t.length!==n&&n!==0)this.throwError("Expected comma");else{let o=this.gobbleExpression();(!o||o.type===Re.COMPOUND)&&this.throwError("Expected comma"),t.push(o)}}return r||this.throwError("Expected "+String.fromCharCode(e)),t}gobbleGroup(){this.index++;let e=this.gobbleExpressions(Re.CPAREN_CODE);if(this.code===Re.CPAREN_CODE)return this.index++,e.length===1?e[0]:e.length?{type:Re.SEQUENCE_EXP,expressions:e}:!1;this.throwError("Unclosed (")}gobbleArray(){return this.index++,{type:Re.ARRAY_EXP,elements:this.gobbleArguments(Re.CBRACK_CODE)}}},pbt=new hbt;Object.assign(Re,{hooks:pbt,plugins:new fbt(Re),COMPOUND:"Compound",SEQUENCE_EXP:"SequenceExpression",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",ARRAY_EXP:"ArrayExpression",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},right_associative:new Set,additional_identifier_chars:new Set(["$","_"]),literals:{true:!0,false:!1,null:null},this_str:"this"});Re.max_unop_len=Re.getMaxKeyLen(Re.unary_ops);Re.max_binop_len=Re.getMaxKeyLen(Re.binary_ops);var I0=e=>new Re(e).parse(),mbt=Object.getOwnPropertyNames(Re);mbt.forEach(e=>{I0[e]===void 0&&e!=="prototype"&&(I0[e]=Re[e])});I0.Jsep=Re;var gbt="ConditionalExpression",vbt={name:"ternary",init(e){e.hooks.add("after-expression",function(t){if(t.node&&this.code===e.QUMARK_CODE){this.index++;let r=t.node,n=this.gobbleExpression();if(n||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===e.COLON_CODE){this.index++;let i=this.gobbleExpression();if(i||this.throwError("Expected expression"),t.node={type:gbt,test:r,consequent:n,alternate:i},r.operator&&e.binary_ops[r.operator]<=.9){let o=r;for(;o.right.operator&&e.binary_ops[o.right.operator]<=.9;)o=o.right;t.node.test=o.right,o.right=t.node,t.node=r}}else this.throwError("Expected :")}})}};I0.plugins.register(vbt);var ybt=["+","-","*","/","(",")","==","!=",">","<",">=","<=","and","or","!","%","^",","],bbt=["0","1","2","3","4","5","6","7","8","9","."],xbt=["sin","cos","tan","asin","acos","atan","atan2","sqrt","abs","log","exp","floor","ceil","round","min","max","random"];function wbt(e){return typeof e!="string"?!1:!isNaN(e)&&!isNaN(parseFloat(e))}I0.addBinaryOp("^",11,!0);function Gle(e,t,r="number"){let n="";for(let a=0;a<e.length;a++){let s=e[a];if("id"in s){let l=e[a-1];if(a>0&&"id"in l){console.error("Two variables in a row",e);return}let u=t.getVariable(s.id),d=Ys.getDisplayedValue(u);r==="number"&&Ys.isTextValue(u)&&Array.isArray(u.textValue)&&u.textValue.length===1?d=parseFloat(d).toString():r==="boolean"&&Ys.isBoolean(u)?d=u?"true":"false":r==="boolean"&&Ys.isTextValue(u)&&!Array.isArray(u.textValue)&&(d='"'+d+'"'),n+=d;continue}else if(r==="string"){s.name!=='"'&&s.name!=="+"&&(n+=s.name),s.name==="+"&&n[n.length-1]==="\\"&&(n=n.slice(0,-1)+s.name);continue}if(s.name==="and"){n+="&&";continue}if(s.name==="or"){n+="||";continue}if(s.name==="True"){n+="true";continue}if(s.name==="False"){n+="false";continue}if(r==="boolean"&&!wbt(s.name)&&!bbt.includes(s.name)&&!ybt.includes(s.name)&&!xbt.includes(s.name.replace(/\($/g,""))){n+='"'+s.name+'"';continue}n+=s.name}if(r==="string")return n;if(e.length===0){if(r==="number")return 0;if(r==="boolean")return!1}let i;try{i=I0(n)}catch(a){console.error(n,a);return}let o;try{o=jr(i)}catch(a){console.error(n,i,a)}return o}function jr(e){switch(e.type){case"BinaryExpression":switch(e.operator){case"==":return+(jr(e.left)===jr(e.right));case"!=":return+(jr(e.left)!==jr(e.right));case">":return+(jr(e.left)>jr(e.right));case">=":return+(jr(e.left)>=jr(e.right));case"<":return+(jr(e.left)<jr(e.right));case"<=":return+(jr(e.left)<=jr(e.right));case"+":return jr(e.left)+jr(e.right);case"-":return jr(e.left)-jr(e.right);case"*":return jr(e.left)*jr(e.right);case"/":return jr(e.left)/jr(e.right);case"%":return jr(e.left)%jr(e.right);case"&&":return jr(e.left)&&jr(e.right);case"||":return jr(e.left)||jr(e.right);case"^":return Math.pow(jr(e.left),jr(e.right));default:throw new Error("Unknown operator: "+e.operator)}case"UnaryExpression":switch(e.operator){case"-":return-jr(e.argument);case"!":return+!jr(e.argument);default:throw new Error("Unknown operator: "+e.operator)}case"Identifier":throw new Error("Unknown identifier: "+e.name);case"Literal":return e.value;case"CallExpression":if(e.callee.type==="Identifier"){if(e.callee.name==="random"){let t=0,r=1;if(e.arguments.length>=1)try{t=jr(e.arguments[0])}catch(n){console.warn(n)}if(e.arguments.length>=2)try{r=jr(e.arguments[1])}catch(n){console.warn(n)}return t=Math.min(r,t),r=Math.max(r,t),t+Math.random()*(r-t)}return Math[e.callee.name].apply(null,e.arguments.map(jr))}else throw new Error("Unknown node");default:throw new Error("Unknown node type: "+e.type)}}var Sbt=new qe,_bt=new qe;function Cbt(e,t,r){let n=[new F,new F,new F],i=[new F,new F,new F];return e.extractBasis(n[0],n[1],n[2]),t.extractBasis(i[0],i[1],i[2]),n.forEach((o,a)=>{let s=i[a],l=Et.lerp(o.length(),s.length(),r);o.lerp(s,r).setLength(l)}),new qe().makeBasis(n[0],n[1],n[2])}var Abt=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,height:100,depth:1,subdivisions:12,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters),n=Math.abs(r.width),i=Math.abs(r.height??r.width),o=Math.abs(r.depth??0),a=(t==null?void 0:t.shapeData)??DU.create({parameters:ple}).userData.shape;return{path:e.path??MP.defaultData(),parameters:Object.assign(r,{width:n,height:i,depth:o,extrusion:{...mle,...r.extrusion}}),shapeData:a}}static build(e){if(e.path.points.length>=2){let t=new Ebt(e);return Object.assign(t,{userData:{...e,type:"PathGeometry"}})}else return Object.assign(new Nt,{userData:{...e,type:"PathGeometry"}})}},Ebt=class extends Nt{constructor(e){super(),this.type="PathExtrusionGeometry",this.inputs=e,this.build()}_isGeometryClosed(){return this.inputs.path.isClosed&&this.inputs.parameters.extrusion.depth===1}_isOpenEnded(){let e=this.inputs.parameters.extrusion;return!(this.inputs.path.isClosed&&e.depth===1)||!dbt(e.twist,0)||e.startScale!==e.endScale}build(){let e=this._extractPathPoints();if(e.length<2)return;let t=this._computeBasisMatrices(e),{depth:r,offset:n}=this.inputs.parameters.extrusion;r=Math.max(0,Math.min(r,1)),n=Math.max(0,Math.min(n,1));let i=this.inputs.path.isClosed?e.length:e.length-1,o=Math.floor(n*i),a=this.inputs.path.isClosed?Math.ceil((r+n)*i):Math.ceil(Math.min(1,r+n)*i),s=Math.min(Math.max(2,a-o+1),i+2),l=[],u=[];for(let k=0;k<s;k++){let R=this.inputs.path.isClosed?(k+o)%e.length:Math.min(k+o,e.length-1);l.push(e[R].clone()),u.push(t[R].clone())}let d=(k,R,z)=>{l[k]=l[k].clone().lerp(l[R],z),u[k]=Cbt(u[k],u[R],z)},c=0,h=n*i%1;(!this.inputs.path.isClosed||r<=1)&&(h||n===0)&&(c=h,d(0,1,c));let f=0,m=(n+r)*i%1;if((this.inputs.path.isClosed&&r<=1||!this.inputs.path.isClosed&&n+r<1)&&m&&(f=m,d(l.length-1,l.length-2,1-f)),r===0){let k=l.length-1;l[k].copy(l[0]),u[k].copy(u[0])}this._applyPathModifiers(u,c,f);let{bevel:p,bevelSides:g}=this.inputs.parameters.extrusion,v=p>0?this.inputs.parameters.extrusion.capType:"flat",b=5;this.inputs.parameters.extrusion.shape.type==="Custom"&&(b=this.inputs.parameters.extrusion.shape.shapeQuality==="low"?5:12);let{regions:y,infos:x,vertices:S}=this._computeShapePoints(b),w=0,_;v==="round"&&(_=new IU(this.inputs.shapeData,2*p,p,b,g,void 0,!0),w=_.getAttribute("position").count);let C=0,E=0;x.sort((k,R)=>k.start-R.start),x.forEach(k=>{k.verticesStart=C,k.verticesCount=k.continuous.reduce((R,z,j)=>R+(j===0||!z?2:1),0),E+=k.verticesCount,C=E});let A=E*s,M,I=0;if(this._isOpenEnded()&&v==="flat"){try{M=Sf({windingRule:un.ODD,elementType:Gi.POLYGONS,polySize:3,vertexSize:2,strict:!0,contours:y})}catch{M=Rle}I=M.vertexCount}let O=A+2*I+w*2,T=A+2*I,D={positions:new Float32Array(O*3),normals:new Float32Array(O*3),uvs:new Float32Array(O*2)},N=[];if(x.forEach(k=>{this._extrudeRegion(k,S,u,l,D,N,this._isGeometryClosed()&&!this._isOpenEnded())}),M&&(this._closeEnd(M,A,N,D,u[0],l[0],!1),this._closeEnd(M,A+I,N,D,u[u.length-1],l[l.length-1],!0)),_){D.positions.set(_.getAttribute("position").array,T*3),D.normals.set(_.getAttribute("normal").array,T*3),D.uvs.set(_.getAttribute("uv").array,T*2);let k=N.length;N.push(..._.getIndex().array.map(j=>j+T)),T+=w,D.positions.set(_.getAttribute("position").array,T*3),D.normals.set(_.getAttribute("normal").array,T*3),D.uvs.set(_.getAttribute("uv").array,T*2);let R=N.length;N.push(..._.getIndex().array.map(j=>j+T)),this.setAttribute("position",new Kt(D.positions,3)),this.setAttribute("normal",new Kt(D.normals,3)),this.setAttribute("uv",new Kt(D.uvs,2)),this.setIndex(N);let z=Sbt;z.copy(u[u.length-1]).setPosition(l[l.length-1]),this.applyMatrix4OnRange(z,T,O),z.copy(u[0]).setPosition(l[0]).multiply(_bt.makeScale(1,1,-1)),this.applyMatrix4OnRange(z,T-w,T),this.reverseIndicesOnRange(k,R)}else this.setAttribute("position",new Kt(D.positions,3)),this.setAttribute("normal",new Kt(D.normals,3)),this.setAttribute("uv",new Kt(D.uvs,2)),this.setIndex(N)}_extractPathPoints(){let e=Cle(this.inputs.path).getPoints(this.inputs.path.subdivisions);if(e.length<2)return[];let t=[e[0]];return e.forEach(r=>{t[t.length-1].distanceToSquared(r)>.001&&t.push(r)}),this.inputs.path.isClosed&&t[t.length-1].distanceTo(t[0])<.001&&t.pop(),t}_computeBasisMatrices(e){let t=[],r=e.length,n=this.inputs.path.isClosed,i=new F,o=new F,a=new F,s=new F,l=new F(0,1,0);for(let m=0;m<r;m++){let p=e[m],g;m===0?g=n?e[e.length-2]:p.clone().multiplyScalar(2).sub(e[1]):g=e[m-1];let v;m===r-1?v=n?e[1]:p.clone().multiplyScalar(2).sub(e[m-1]):v=e[m+1];let b=p.clone().sub(g).normalize(),y=v.clone().sub(p).normalize(),x=b.clone().add(y).normalize();a.copy(x),m===0&&(x.equals(l)||x.clone().negate().equals(l))&&l.set(0,0,1);let S=l.clone().cross(x).normalize(),w=x.clone().cross(S).normalize();l.copy(w),s.copy(S),m===0&&(i.copy(w),o.copy(x));let _=new qe().makeBasis(S,w,x);t.push(_)}let u=n?o:a,d=n?i:new F(0,1,0),c=u.clone().cross(s).normalize(),h=Math.acos(d.dot(c));if(isNaN(h))return t;let f=d.clone().cross(c);u.dot(f)>0&&(h*=-1);for(let m=1;m<t.length;m++){let p=new qe().makeRotationZ(h*m/t.length);t[m].multiply(p)}return t}_applyPathModifiers(e,t,r){let n=e.length,{angle:i,twist:o,startScale:a,endScale:s}=this.inputs.parameters.extrusion,l=new qe,u=new qe;return e.forEach((d,c)=>{let h=c===0?0:c===n-1?1:(c-t)/(n-(r===0?0:1)-(t+(1-r)));l.makeRotationZ(Et.lerp(i,i+o,h)*Et.DEG2RAD);let f=Et.lerp(a,s,h);u.makeScale(f,f,f),d.multiply(l).multiply(u)}),e}_computeShapePoints(e=12,t=un.ODD){let r=this.inputs.shapeData,n=r.extractShapePointsToFlatArray([],e),i=r.shapeHoles.map(u=>{let d=u.extractShapePointsToFlatArray([],e),c=[];for(let h=d.length-1;h>=1;h-=2){let f=d[h-1],m=d[h-0];c.push(f,m)}return c}),o;try{o=Sf({windingRule:t,elementType:Gi.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[n]})}catch{o=OU}let a;try{a=Sf({windingRule:un.ODD,elementType:Gi.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...i]})}catch{a=Dle}if(!o)throw new Error("error generating geometry");let s=o.elementCount;if(a){o.elementCount+=a.elementCount;for(let u=0;u<a.elements.length;u++){let d=a.elements[u],c=u%2===0?o.vertexCount:0;o.elements.push(d+c)}for(let u=0;u<a.vertexIndices.length;u++){let d=a.vertexIndices[u],c=o.vertexCount;o.vertexIndices.push(d+c)}for(let u=0;u<a.vertices.length;u++){let d=a.vertices[u];o.vertices.push(d)}}for(let u=0,d=o.vertexCount;u<d;u++){let c=u*2;o.vertices[c+0],o.vertices[c+1]}let l=[];for(let u=o.elementCount-1;u>=0;u--){let d=u>=s,c=u*2,h=o.elements[c+0],f=o.elements[c+1],m=h+f,p={start:h,count:f,normals:[],isHole:d,continuous:[],verticesStart:0,verticesCount:0};l.push(p);let g=h,v=m-1,b=h+1,y=r.roundedCurves.length;do{let x=g-h;o.vertices[v*2+0],o.vertices[v*2+1];let S=o.vertices[g*2+0],w=o.vertices[g*2+1],_=o.vertices[b*2+0],C=o.vertices[b*2+1],E=S-_,A=w-C,M=Math.sqrt(E*E+A*A);E/=M,A/=M,p.normals[x*2+0]=-A,p.normals[x*2+1]=E;let I=o.vertexIndices[g];if(Array.isArray(I))p.continuous[x]=!1;else{let[O,T]=r.getCurveIndexFromVertexId(I-1,!0);if(T>0&&T<1)p.continuous[x]=!0;else{let D=T===1?O+1:O-1;D=(D+y)%y;let N=T===1?0:1,k=r.roundedCurves[O].getTangent(T),R=r.roundedCurves[D].getTangent(N);p.continuous[x]=k.dot(R)>.95}}d&&(p.normals[x*2+0]*=-1,p.normals[x*2+1]*=-1),[v,g,b]=[g,b,b+1],b>=m&&(b-=f)}while(b!==h+1)}return{regions:[n,...i],infos:l,vertices:o.vertices}}_insertVertex(e,t,r,n,i){let o=t*2,a=t*3;e.positions[a+0]=r.x,e.positions[a+1]=r.y,e.positions[a+2]=r.z,e.normals[a+0]=n.x,e.normals[a+1]=n.y,e.normals[a+2]=n.z,e.uvs[o+0]=i.x,e.uvs[o+1]=i.y}_extrudeRegion(e,t,r,n,i,o,a){let s=new F,l=new F,u=new F,d=new F,c=new ue;r.forEach((f,m)=>{let p=n[m],g=e.verticesStart*r.length+e.verticesCount*m;for(let v=0;v<e.count;v++){let b=(e.start+v)*2;if(s.set(t[b+0],t[b+1],0),u.copy(s).applyMatrix4(f).add(p),e.continuous[v])d.set(e.normals[v*2+0],e.normals[v*2+1],0);else{let y=v===0?(e.start+e.count-1)*2:b-2;l.set(t[y+0],t[y+1],0),d.copy(s).sub(l),d.set(-d.y,d.x,0),e.isHole||d.negate()}if(d.applyMatrix4(f).normalize(),c.set(v===0?1:v/e.count,m/(r.length-1)),this._insertVertex(i,g,u,d,c),g++,!e.continuous[v]||v===0){if(v===0)d.set(e.normals[v*2+0],e.normals[v*2+1],0),c.set(0,m/(r.length-1));else{let y=v===e.count-1?e.start*2:b+2;l.set(t[y+0],t[y+1],0),d.copy(l).sub(s),d.set(-d.y,d.x,0),e.isHole||d.negate()}d.applyMatrix4(f).normalize(),this._insertVertex(i,g,u,d,c),g++}}});let h=r.length-1;for(let f=0;f<h;f++){let m=e.verticesStart*r.length+e.verticesCount*f,p=e.verticesStart*r.length+e.verticesCount*(f+1),g=0;for(let v=0;v<e.count;v++){(!e.continuous[v]||v===0)&&g++;let b=v===e.count-1?0:g+1,y=m+g,x=m+b,S=p+b,w=p+g;e.isHole?o.push(y,S,x,y,w,S):o.push(y,x,S,y,S,w),g++}}}_closeEnd(e,t,r,n,i,o,a){let s=e.vertexCount,l=new F(0,0,a?-1:1).applyMatrix4(i),u=new F,d=new ue;for(let h=0;h<s;h++){let f=2*h;u.set(e.vertices[f+0],e.vertices[f+1],0).applyMatrix4(i).add(o),this._insertVertex(n,t+h,u,l,d)}let c=e.elements;for(let h=0;h<e.elementCount;h++){let f=3*h,m=c[f+0]+t,p=c[f+(a?1:2)]+t,g=c[f+(a?2:1)]+t;r.push(m,p,g)}}applyMatrix4OnRange(e,t,r){let n=e.elements,i=new Ii().getNormalMatrix(e).elements,o,a,s,l,u=this.attributes.position,d=this.attributes.normal;if(!u||!d)return;let c=u.array,h=d.array,f=u.itemSize;for(let m=t*f,p=r*f;m<p;m+=f){if(m===t)debugger;o=c[m+0],a=c[m+1],s=c[m+2],l=1/(n[3]*o+n[7]*a+n[11]*s+n[15]),c[m+0]=(n[0]*o+n[4]*a+n[8]*s+n[12])*l,c[m+1]=(n[1]*o+n[5]*a+n[9]*s+n[13])*l,c[m+2]=(n[2]*o+n[6]*a+n[10]*s+n[14])*l,o=h[m+0],a=h[m+1],s=h[m+2],h[m+0]=i[0]*o+i[3]*a+i[6]*s,h[m+1]=i[1]*o+i[4]*a+i[7]*s,h[m+2]=i[2]*o+i[5]*a+i[8]*s}u.needsUpdate=!0,d.needsUpdate=!0}reverseIndicesOnRange(e,t){let r=this.index;if(r){for(let n=e;n<t;n+=3){let i=r.getX(n),o=r.getX(n+1),a=r.getX(n+2);r.setXYZ(n,a,o,i)}r.needsUpdate=!0}}};function Wle(){let e=new Nt;return e.setAttribute("position",new Kt(new Float32Array([]),3)),e.setIndex(new Kt(new Uint16Array([]),1)),e}var Mbt=Wle().attributes,Pbt=12,Tbt=1,qle=class extends Nt{constructor(e,t){super(),this.charWidths=[],this.charCoords=[],this.wrappedText=[],this.isLowResolution=!1,this.vectorShapes=[],Object.assign(this.attributes,Mbt),this.userData={parameters:e,type:"TextGeometry"};let r=t.getFont(e.font);r!=null&&r.isLoaded?(this.font=r,this.update(e)):this.updateFont(e.font,t).then(()=>{this.update(e),t==null||t.requestRender()})}async updateFont(e,t){let r=t.getFont(e);r&&(this.font=r,await r.loadingPromise)}update(e){let t=this.font;if(this.userData={parameters:e,type:"TextGeometry"},!(t!=null&&t.isLoaded)){console.warn("Cannot update text because its font is not loaded");return}let{width:r,height:n,depth:i,extrudeBevelSize:o,extrudeBevelSegments:a,text:s,textTransform:l}=e,u=Ys.getDisplayedValue(s),d=l===2?u.toUpperCase():l===3?u.toLowerCase():u,c=Obt(e,t,d),{shapes:h,charWidths:f,charCoords:m}=t.generateShapes(c,e),p=(typeof r=="number"?r:1)*.5,g=(typeof n=="number"?n:1)*.5,v=h.map(x=>new bi().fromShape(x,!0));this.vectorShapes=v;let b=v.map(x=>gg.create({shape:x,parameters:{depth:i,extrudeBevelSegments:a,extrudeBevelSize:o,windingRule:i<=0?un.NONZERO:un.ODD,subdivisions:this.isLowResolution&&i>0?Tbt:Pbt}})),y=b.length?hm(b):Wle();y.translate(-p,g,0),this.dispose(),this.wrappedText=c,this.charCoords=m,this.charWidths=f,this.deleteAttribute("extrudeNormal"),Object.entries(y.attributes).forEach(([x,S])=>{this.setAttribute(x,S)}),this.setIndex(y.index),this.computeBoundingSphere()}clone(){let e=ph(new Nt,qle.prototype);return e.copy(this),console.log("CloneGeometry",this,e),e}copy(e){return Object.entries(e.attributes).forEach(([t,r])=>{this.setAttribute(t,r)}),this.setIndex(e.index),this.userData={parameters:{...e.userData.parameters},type:"TextGeometry"},this}async setText(e){this.font&&await this.font.loadingPromise,await this.update({...this.userData.parameters,text:e})}get text(){return this.userData.parameters.text??""}};function Obt(e,t,r){let n=[""],i="";for(let o of r)i+=o,o===" "||o===`
`?(n[n.length-1]+=i,i="",o===`
`&&n.push("")):t.getTextWidth(n[n.length-1]+i,e)>e.width&&(n[n.length-1].length&&n.push(""),t.getTextWidth(n[n.length-1]+i,e)>e.width&&(i.length===1?(n[n.length-1]+=i,i=""):(n[n.length-1]+=i.slice(0,-1),i=i[i.length-1],n.push(""))));return n[n.length-1]+=i,n}var Kle,RU=new Promise(e=>{Kle=e}),JK=!1,tA;function Ibt(){if(JK)return;if(tA)return tA;async function e(){let t="https://unpkg.com/@splinetool/modelling-wasm@0.9.504/build",r=ZS(()=>import("./process-0cd968c5.js"),[]),[n,i]=await Promise.all([r,fetch(`${t}/process.wasm`).then(s=>s.arrayBuffer())]),o=n.default,a=await o({wasmBinary:i});Kle(a),JK=!0}return tA=e(),tA}function FP(e,t,r,n){var u;let i,o,a;e.type==="PathGeometry"?(o=JSON.parse(JSON.stringify(e)),a=[[],["extrusion"]]):(o={...e},a=[[]]);for(let d of a){let c=o;for(let h of d)c=c[h];for(i in c){let h=c[i];Ivt(h)&&(c[i]=t.getVariable(h,[n.uuid,"geometry",...d,i]))}}let s={parameters:o,type:o.type};if(o.type==="PathGeometry")s.path=o.path;else if(o.type==="VectorGeometry"){let d=bi.createFromState(o.shape,o.width,o.height);s.shape=d}else if(o.type==="NonParametricGeometry")o.data.groups&&((u=o.data.groups)==null||u.forEach(d=>d.materialIndex=Math.max(d.materialIndex??0,0))),s.geometry=new Xae().parse(o);else if(o.type==="SubdivGeometry"){let d=new Oa(o,r);return d.data=e,d}else if(o.type==="TextGeometry")return new qle(o,t);let l;try{l=iX(s)}catch(d){console.error(d)}if(!l){let d=bi.createFromState(EP.defaultData(),100,100);s.shape=d,l=iX(s)}return l}var Dbt=new qe;function Dz(e,t,r,n){let i=e.position.array,o=e.normal.array,a=Dbt.makeScale(t,r,n).invert().elements,s,l,u;for(var d=0,c=i.length;d<c;d+=3)i[d]*=t,i[d+1]*=r,i[d+2]*=n,s=o[d],l=o[d+1],u=o[d+2],o[d]=a[0]*s+a[4]*l+a[8]*u,o[d+1]=a[1]*s+a[5]*l+a[9]*u,o[d+2]=a[2]*s+a[6]*l+a[10]*u;e.position.needsUpdate=!0,e.normal.needsUpdate=!0}var rA=new ki,ev=new F,Ft;RU.then(e=>{Ft=e});var eX=new Float32Array([10,10,0,-10,10,0,-10,-10,0,10,-10,0]),tX=new Uint32Array([0,1,2,3]),rX=new Uint8Array([4]),Oa=class extends Nt{constructor(e,t){super(),this.data=e,this.flatShading=t,this.subdivPointer=0,this.rebuild(),this.freeSubdivPointer()}mutateDirectlyScaleBaked(e,t){this.freeSubdivPointer();let r=this.data.scaleBaked,n=Tm.div(t,r);this.subdividedGeometry&&Dz(this.subdividedGeometry.attributes,...n),this.originalGeometry&&Dz(this.originalGeometry.attributes,...n),this.data=e;let i=this.userData.parameters;this.userData.parameters={width:i.width*n[0],height:i.height*n[1],depth:i.depth*n[2]},this.originalGeometry.boundingSphere.center.multiply(ev.fromArray(n));let o=ev.set(i.width,i.height,i.depth).length();this.originalGeometry.boundingSphere.radius=o/2}ensureSubdivPointer(){return this.subdivPointer===0&&this.rebuild(),this.subdivPointer}rebuild(){let e,t,r;try{({originalGeometry:e,subdividedGeometry:t,subdivPointer:r}=Oa.build(this.data,void 0,!this.flatShading,void 0))}catch{e=new Jc(100,100,100),r=0}this.subdivPointer=r,this.originalGeometry=e,this.subdividedGeometry=t??void 0;let n=this.subdividedGeometry??this.originalGeometry;Object.assign(this,n),this.calcBoundingBox()}freeSubdivPointer(){this.subdivPointer&&(Oa.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0)}dispose(){super.dispose(),this.freeSubdivPointer()}calcBoundingBox(){let e=this.originalGeometry;e.boundingSphere===null&&(e.boundingSphere=new Ps,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let t=e.attributes.position,r=e.boundingSphere.center;rA.setFromBufferAttribute(t),rA.getCenter(r),e.boundingSphere.radius=r.distanceTo(rA.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),rA.getSize(ev);let n={width:ev.x,height:ev.y,depth:ev.z};return this.userData.parameters=n,n}static build(e,t,r,n){let i,o,a,s=(e==null?void 0:e.phongAngle)??35;r===!1&&(s=-1),t&&(Ft.free_bvh(t),Ft.free_subdivision_surface(t));try{i=Oa.allocate(e,n)}catch(l){console.error(l,e),i=Oa.allocate({positionWASM:eX,indexWASM:tX,verticesPerFaceWASM:rX},n)}if(Ft.set_destination_refinement_level(i,0),o=Oa.buildLevel(i,!0,s),e.subdivisions>0)try{Ft.set_destination_refinement_level(i,e.subdivisions),a=Oa.buildLevel(i,!1,s)}catch{try{Ft.set_destination_refinement_level(i,e.subdivisions-1),a=Oa.buildLevel(i,!1,s)}catch{a=null}}else a=null;return{subdivPointer:i,originalGeometry:o,subdividedGeometry:a}}static primitiveToQuads(e,t,r){e.widthSegments>16&&(e.widthSegments=16),e.heightSegments>16&&(e.heightSegments=16),e.depthSegments>16&&(e.depthSegments=16),e.radialSegments>16&&(e.radialSegments=16),e.type==="DodecahedronGeometry"&&(e.detail=0);let n=e.shape!==void 0||e.path!==void 0?t.geometry:FP(e,r,!1),i;e.type==="TorusGeometry"&&e.arc===Math.PI*2?i=n.getClosedTorusIndicesForBooleanOrSubdiv():i=n.getIndex();let o,a,s,l;({positions:o,triIndices:l}=AO(n.getAttribute("position"),i));let u;if(e.type==="CylinderGeometry"&&e.cornerRadius===0&&e.hollow===0&&e.openEnded===!1){let d=e.radialSegments*e.heightSegments*3*2,c=d+e.radialSegments*3;u=[d,c]}return{indices:a,verticesPerFace:s}=Xle(o,l,n,u),{positions:o,indices:a,verticesPerFace:s}}static allocate(e,t){var y;let r,n,i,o=[],a=[];e.positionWASM&&e.positionWASM.length>0?(r=e.positionWASM,n=e.indexWASM,i=e.verticesPerFaceWASM):(r=eX,n=tX,i=rX);let s=r.length,l=n.length,u=i.length,d=r.length+o.length+a.length,c=n.length+i.length,h=d*Float32Array.BYTES_PER_ELEMENT+c*Uint32Array.BYTES_PER_ELEMENT,f=d*Float32Array.BYTES_PER_ELEMENT,m=Ft._malloc(h),p=new Float32Array(Ft.HEAPF32.buffer,m,d),g=new Uint32Array(Ft.HEAPU32.buffer,m+f,c);p.set(r,0),p.set(o,r.length),p.set(a,r.length+o.length),g.set(n,0),g.set(i,n.length);let v;(y=e==null?void 0:e.scaleBaked)!=null&&y.some(x=>x!==1)&&(v=new qe().makeScale(...e.scaleBaked)),t&&(v?v.premultiply(t):v=t);let b=v?Ft.alloc_subdivision_surface2(m,s,m+f,l,m+f+n.length*Uint32Array.BYTES_PER_ELEMENT,u,v.elements):Ft.alloc_subdivision_surface(m,s,m+f,l,m+f+n.length*Uint32Array.BYTES_PER_ELEMENT,u);return Ft._free(m),b}static buildLevel(e,t,r,n,i){let o=i?Ft.get_mesh_data2(e,t?Ft.Level.CONTROL:Ft.Level.REFINED,r,i.elements):Ft.get_mesh_data(e,t?Ft.Level.CONTROL:Ft.Level.REFINED,r),a=8,s=Ft.HEAPU32.subarray(o>>2,(o>>2)+a),l=s.subarray(4,4+4),u=0,d=Ft.HEAPU32[s[u]>>2],c=Ft.HEAPF32.subarray(d>>2,(d>>2)+l[u]);u++;let h=Ft.HEAPU32[s[u]>>2],f=Ft.HEAPF32.subarray(h>>2,(h>>2)+l[u]);u++;let m=Ft.HEAPU32[s[u]>>2],p=Ft.HEAPU32.subarray(m>>2,(m>>2)+l[u]);u++;let g=Ft.HEAPU32[s[u]>>2],v=Ft.HEAPU32.subarray(g>>2,(g>>2)+l[u]);if(u++,n===void 0){let b=new Nt;if(b.setIndex(new hy(v,1)),b.setAttribute("position",new ft(c,3)),b.setAttribute("normal",new ft(f,3)),t){b.setAttribute("faceMap",new hy(p,1));let y=new Float32Array(f.length/3*4).fill(0);b.setAttribute("color",new Kt(y,4))}return Ft.free_mesh_data(o),b.userData.type="SubdivGeometry",b}n.getAttribute("position").copyArray(c),n.getAttribute("normal").copyArray(f),n.attributes.position.needsUpdate=!0,n.attributes.normal.needsUpdate=!0,Ft.free_mesh_data(o)}static freeSubdivPointer(e){Ft.free_bvh(e),Ft.free_subdivision_surface(e)}static buildControlCageWireframe(e,t,r){let n=Ft.get_wireframe_data_for_base_level(e),i=4,o=Ft.HEAPU32.subarray(n>>2,(n>>2)+i),a=o.subarray(2,2+2),s=0,l=Ft.HEAPU32[o[s]>>2],u=Ft.HEAPF32.subarray(l>>2,(l>>2)+a[s]);s++;let d=Ft.HEAPU32[o[s]>>2],c=Ft.HEAPU32.subarray(d>>2,(d>>2)+a[s]);if(t===void 0){let h=new Nt;h.setAttribute("position",new ft(u,3));let f=new Float32Array(u.length);for(let m=0,p=u.length;m<p;)f[m++]=r.r,f[m++]=r.g,f[m++]=r.b;return h.setAttribute("color",new Kt(f,3)),h.setIndex(new hy(c,1)),Ft.free_wireframe_data_for_base_level(n),h}t.getAttribute("position").copyArray(u),t.attributes.position.needsUpdate=!0,Ft.free_wireframe_data_for_base_level(n)}static updateCollabMesh(e,t,r){let n=t===0;n||Ft.set_destination_refinement_level(e,t);let i=r?Ft.get_topological_data2(e,n?Ft.Level.CONTROL:Ft.Level.REFINED,r.elements):Ft.get_topological_data(e,n?Ft.Level.CONTROL:Ft.Level.REFINED),o=6,a=Ft.HEAPU32.subarray(i>>2,(i>>2)+o),s=a.subarray(3,3+3),l=0,u=Ft.HEAPU32[a[l]>>2],d=new Float32Array(Ft.HEAPF32.subarray(u>>2,(u>>2)+s[l]));l++;let c=Ft.HEAPU32[a[l]>>2],h=new Uint32Array(Ft.HEAPU32.subarray(c>>2,(c>>2)+s[l]));l++;let f=Ft.HEAPU32[a[l]>>2],m=new Uint8Array(Ft.HEAPU32.subarray(f>>2,(f>>2)+s[l]));return Ft.free_topological_data(i),{positions:d,indices:h,verticesPerFace:m}}},nX=["getX","getY","getZ"];function AO(e,t){let r={},n=t?t.count:e.count,i=0,o=[],a=[],s=1e4;for(let u=0;u<n;u++){let d=t?t.getX(u):u,c="";for(let h=0;h<3;h++)c+=`${~~(e[nX[h]](d)*s)},`;if(c in r)o.push(r[c]);else{for(let h=0;h<3;h++)a.push(e[nX[h]](d));r[c]=i,o.push(i),i++}}let l=[];for(let u=0;u<o.length;u+=3)o[u]===o[u+1]||o[u]===o[u+2]||o[u+1]===o[u+2]||l.push(o[u],o[u+1],o[u+2]);return{positions:a,triIndices:l}}var nA=new F,OR=new F,IR=new F,DR=new F;function Xle(e,t,r,n){let i=[],o=[];if(r.userData.shape!==void 0&&r.userData.parameters.depth===0&&r.userData.shape.shapeHoles.length===0){let l=r.userData.shape.extractShapePointsToFlatArray([]),u=r.userData.parameters.spikes;if(r.userData.type==="EllipseGeometry"&&u<=24&&u%4===0&&r.userData.parameters.angle>=360){let h=l.length/2/u;l=l.filter((f,m)=>Math.floor(m/2)%h===0)}let d=0;for(let h=0;h<l.length;h+=2)d+=(l[h]-l[(h===0?l.length:h)-2])*(l[h+1]+l[(h===0?l.length:h)-1]);e.length=0;let c=0;if(d<0)for(let h=0;h<l.length;h+=2)e.push(l[h],l[h+1],0),i.push(c++);else for(let h=l.length-2;h>=0;h-=2)e.push(l[h],l[h+1],0),i.push(c++);return o.push(c),{indices:i,verticesPerFace:o}}let a=new Float32Array([r.userData.parameters.depth])[0],s=0;for(;s<t.length;){if(r.useNgonForTopBottomFaceDuringBake){let l=0;if((e[t[s]*3+2]===a||e[t[s]*3+2]===0)&&l++,(e[t[s+1]*3+2]===a||e[t[s+1]*3+2]===0)&&l++,(e[t[s+2]*3+2]===a||e[t[s+2]*3+2]===0)&&l++,l===3)break}if(t[s+1]===t[s+3]&&t[s+2]===t[s+5]||t[s+0]===t[s+3]&&t[s+2]===t[s+4]){nA.set(e[t[s]*3],e[t[s]*3+1],e[t[s]*3+2]),OR.set(e[t[s+1]*3],e[t[s+1]*3+1],e[t[s+1]*3+2]),IR.set(e[t[s+4]*3],e[t[s+4]*3+1],e[t[s+4]*3+2]),DR.set(e[t[s+5]*3],e[t[s+5]*3+1],e[t[s+5]*3+2]),OR.sub(nA).normalize(),IR.sub(nA).normalize(),DR.sub(nA).normalize();let l=OR.cross(IR).dot(DR);Math.abs(l)>.005||n&&n.some((u,d)=>d%2===1?!1:s>=n[d]&&s<n[d+1])?(i.push(t[s],t[s+1],t[s+2]),o.push(3),s+=3):(i.push(t[s],t[s+1],t[s+4],t[s+5]),o.push(4),s+=6)}else i.push(t[s],t[s+1],t[s+2]),o.push(3),s+=3}if(r.useNgonForTopBottomFaceDuringBake){let l=[],u=[],d=0;for(let c=0,h=0;c<e.length;c+=3,h++)e[c+2]===0&&(l.push(h),d++),e[c+2]===a&&u.push(h);if(r.userData.parameters.extrudeBevelSize===0){let c=u[0];u[0]=u[1],u[1]=c}l.reverse(),i.push(...l,...u),o.push(d,d)}return{indices:i,verticesPerFace:o}}var Dd={};Ket(Dd,{calcBoolean:()=>zbt,calcBooleanTopological:()=>Nbt,freeMeshSet:()=>Ubt,getMeshSet:()=>Bbt,hasOpenEdges:()=>Fbt,transformMeshSet:()=>jbt});var Yle,Rbt=new Promise(e=>{Yle=e}),iA;function kbt(){if(iA)return iA;async function e(){let t="https://unpkg.com/@splinetool/boolean-wasm@0.9.504/build",r=ZS(()=>import("./boolean-613a7c9c.js"),[]),[n,i]=await Promise.all([r,fetch(`${t}/boolean.wasm`).then(s=>s.arrayBuffer())]),o=n.default,a=await o({wasmBinary:i});Yle(a)}return iA=e(),iA}var Sr,Sy;Rbt.then(e=>Sr=e);function Lbt(e,t,r){let n,i;e.userData.parameters.type==="TorusGeometry"&&e.userData.parameters.arc===Math.PI*2?i=e.getClosedTorusIndicesForBooleanOrSubdiv():i=e.getIndex();let{positions:o,triIndices:a}=AO(e.getAttribute("position"),i),s;if(t&&r){let{indices:l,verticesPerFace:u}=Xle(o,a,e);s=u.length,n=[];for(let d=0,c=0;d<s;d++){n.push(u[d]);for(let h=0;h<u[d];h++)n.push(l[c++])}}else{let l=a.length;n=Array(l+l/3),s=0;for(let u=0,d=0;d<n.length;)n[d++]=3,s++,n[d++]=a[u++],n[d++]=a[u++],n[d++]=a[u++]}return{positions:o,faceIndices:n,nFaces:s}}function Qle(e){let t=e.length,r=t*Uint32Array.BYTES_PER_ELEMENT,n=t*Float32Array.BYTES_PER_ELEMENT,i=Number.isInteger(e[0])?r:n,o=Sr._malloc(i);return(Number.isInteger(e[0])?new Uint32Array(Sr.HEAPU32.buffer,o,t):new Float32Array(Sr.HEAPF32.buffer,o,t)).set(e,0),o}function Zle(e){switch(e){case 0:return Sr.OP.UNION;case 1:return Sr.OP.INTERSECTION;case 2:return Sr.OP.A_MINUS_B;case 3:return Sr.OP.B_MINUS_A;case 4:return Sr.OP.SYMMETRIC_DIFFERENCE;case 5:return Sr.OP.ALL;default:throw new Error("Unknown boolean operation "+e)}}function Nbt(e,t){Sy===void 0&&(Sy=Sr.init_csg());let r=Qle(e),n=Sr.csg_calc_topological(Sy,r,e.length,Zle(t));Sr._free(r);let i=6,o=Sr.HEAPU32.subarray(n>>2,(n>>2)+i),a=o.subarray(3,3+3),s=0,l=Sr.HEAPU32[o[s]>>2],u=new Float32Array(Sr.HEAPF32.subarray(l>>2,(l>>2)+a[s]));s++;let d=Sr.HEAPU32[o[s]>>2],c=new Uint32Array(Sr.HEAPU32.subarray(d>>2,(d>>2)+a[s]));s++;let h=Sr.HEAPU32[o[s]>>2],f=new Uint8Array(Sr.HEAPU32.subarray(h>>2,(h>>2)+a[s]));return Sr.free_mesh_data(n),{positions:u,indices:c,verticesPerFace:f}}function zbt(e,t,r,n){Sy===void 0&&(Sy=Sr.init_csg());let i=Qle(e),o=Sr.csg_calc(Sy,i,e.length,n,Zle(t));Sr._free(i);let a=5,s=Sr.HEAPU32.subarray(o>>2,(o>>2)+a),l=s.subarray(2,2+3),u=0,d=Sr.HEAPU32[s[u]>>2],c=Sr.HEAPF32.subarray(d>>2,(d>>2)+l[u]);u++;let h=Sr.HEAPU32[s[u]>>2],f=Sr.HEAPF32.subarray(h>>2,(h>>2)+l[u]);u++;let m=l[u];r.setAttribute("position",new ft(c,3)),r.setAttribute("normal",new ft(f,3));let p=Sr.HEAPF32.subarray((o>>2)+5,(o>>2)+5+6);return r.boundingSphere===null&&(r.boundingSphere=new Ps),r.boundingSphere.radius=-1,r.userData.parameters={width:p[3]*2,height:p[4]*2,depth:p[5]*2},Sr.free_mesh_data(o),m}function Bbt(e,t,r){if(Sr===void 0)return-1;let n,i,o;if(t&&e.userData.positions!==void 0){let p=e.userData;o=p.verticesPerFace.length,n=p.positions,i=Array(p.verticesPerFace.reduce((g,v)=>g+v,0)+o);for(let g=0,v=0,b=0;g<p.verticesPerFace.length;g++){i[b++]=p.verticesPerFace[g];for(let y=0;y<p.verticesPerFace[g];y++)i[b++]=p.indices[v++]}}else({positions:n,faceIndices:i,nFaces:o}=Lbt(e,t,r));let a=n.length,s=i.length,l=n.length,u=i.length,d=l*Float32Array.BYTES_PER_ELEMENT+u*Uint32Array.BYTES_PER_ELEMENT,c=l*Float32Array.BYTES_PER_ELEMENT,h=Sr._malloc(d),f=new Float32Array(Sr.HEAPF32.buffer,h,l),m=new Uint32Array(Sr.HEAPU32.buffer,h+c,u);return f.set(n,0),m.set(i,0),Sr.get_csg_mesh(h,a,h+c,s,o)}function Fbt(e){return Sr.has_open_edges(e)}function jbt(e,t){Sr.transform_csg_mesh(e,t.elements)}function Ubt(e){Sr.free_csg_mesh(e)}var $bt={ConeGeometry:l0t,CubeGeometry:u0t,CylinderGeometry:Ale,DodecahedronGeometry:d0t,EllipseGeometry:DU,HelixGeometry:V0t,IcosahedronGeometry:H0t,LatheGeometry:G0t,NonParametricGeometry:Z0t,PolygonGeometry:$le,PyramidGeometry:J0t,RectangleGeometry:Vle,SphereGeometry:rbt,PlaneGeometry:nbt,BackdropGeometry:ibt,StarGeometry:Hle,TextFrameGeometry:abt,TorusGeometry:sbt,TorusKnotGeometry:ubt,TriangleGeometry:cbt,PathGeometry:Abt,VectorGeometry:gg},iX=e=>$bt[e.type].create(e);function tv(e){return e!==null&&"booleanOp"in e}var Jle=class extends EU(Fa){constructor(){super(...arguments),this.booleanMeshSetAddress=-1,this.booleanWasTransformed=!1,this.booleanMatrixInvOld=new qe}updateVisible(e){super.updateVisible(e),this.visible=!tv(this.parent)&&this.visible,tv(this.parent)&&this.parent.invalidateDownstreamBooleanData()}freeBooleanPointer(){this.booleanMeshSetAddress!==-1&&(Dd.freeMeshSet(this.booleanMeshSetAddress),this.booleanMeshSetAddress=-1)}invalidateDownstreamBooleanData(e=!1){return e?this.booleanWasTransformed=!0:this.freeBooleanPointer(),tv(this.parent)?this.parent.invalidateDownstreamBooleanData():this}invalidateUpstreamBooleanData(){this.freeBooleanPointer();for(let e of this.children)e instanceof Jle&&(e.freeBooleanPointer(),tv(e)&&e.invalidateUpstreamBooleanData())}updateTransformState(e,t){let r=super.updateTransformState(e,t);return r&&tv(this.parent)&&this.invalidateDownstreamBooleanData(!0),r}onVariableUpdate(e=!1){super.onVariableUpdate(e),tv(this.parent)&&this.invalidateDownstreamBooleanData(!0)}},oA=new ki;function kU(e,t=0,r=e.count,n,i){let o=1/0,a=1/0,s=1/0,l=-1/0,u=-1/0,d=-1/0;for(let c=t;c<r;c++){let h=e.getX(c),f=e.getY(c),m=e.getZ(c);h<o&&(o=h),f<a&&(a=f),m<s&&(s=m),h>l&&(l=h),f>u&&(u=f),m>d&&(d=m)}oA.min.set(o,a,s),oA.max.set(l,u,d),oA.getCenter(n),oA.getSize(i).multiplyScalar(.5)}var Vbt=new Nt,Hbt=new n_,Ts=class extends Jle{constructor(e,t){super(Vbt,Hbt),this.super_Entity(e,t)}updateState(e,t){this.updateState_Entity(e,t)}updateEntityBoxSize(e,t){let r=this.geometry.getAttribute("position");r!==void 0?kU(r,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:r.count,e,t):super.updateEntityBoxSize(e,t)}},oX=class{constructor(e){e=e??{},this.name=e.name,this.type=e.type,this.node=e.node,this.size=e.size,this.needsUpdate=e.needsUpdate}get value(){return this.node.value}set value(e){this.node.value=e}},xp=class{constructor(e){this.hashProperties=void 0,this.isNode=!0,this.shortcuts={},this.uuid=Et.generateUUID(),this.type=e,this.name=""}analyze(e,t){t=t??{},e.analyzing=!0,this.build(e.addFlow(t.slot,t.cache,t.context),"v4"),e.clearVertexNodeCode(),e.clearFragmentNodeCode(),e.removeFlow(),e.analyzing=!1}analyzeAndFlow(e,t,r){return r=r??{},this.analyze(e,r),this.flow(e,t,r)}flow(e,t,r){r=r??{},e.addFlow(r.slot,r.cache,r.context);let n={result:this.build(e,t),code:e.clearNodeCode(),extra:e.context.extra};return e.removeFlow(),n}build(e,t,r){t=t??this.getType(e,t);let n=e.getNodeData(r??this);return e.analyzing&&this.appendDepsNode(e,n,t),e.nodes.indexOf(this)===-1&&e.nodes.push(this),this.updateFrame!==void 0&&e.updaters.indexOf(this)===-1&&e.updaters.push(this),this.generate(e,t,r)}updateFrame(e){}generateReadonly(e,t,r,n,i,o){return""}generate(e,t,r,n,i){return""}parse(e,t,r,n){}appendDepsNode(e,t,r){t.deps=(t.deps||0)+1;let n=e.getTypeLength(r);(n>(t.outputMax||0)||this.getType(e,r))&&(t.outputMax=n,t.output=r)}setName(e){this.name=e}getName(){return this.name}getType(e,t){return t==="sampler2D"||t==="samplerCube"?t:this.type}getHash(){let e="{",t,r;for(t in this)r=this[t],r instanceof xp&&(e+='"'+t+'":'+r.getHash()+",");if(this.hashProperties)for(let n=0;n<this.hashProperties.length;n++)t=this.hashProperties[n],r=this[t],e+='"'+t+'":"'+String(r)+'",';return e+='"id":"'+this.uuid+'"}',e}},Gbt=class{constructor(){this.nodes={},this.keywords={}}add(e){this.nodes[e.name]=e}addKeyword(e,t,r){r=r!==void 0?r:!0,this.keywords[e]={callback:t,cache:r}}remove(e){delete this.nodes[e.name]}removeKeyword(e){delete this.keywords[e]}get(e){return this.nodes[e]}getKeyword(e,t){return this.keywords[e].callback(t)}getKeywordData(e){return this.keywords[e]}contains(e){return this.nodes[e]!==void 0}containsKeyword(e){return this.keywords[e]!==void 0}},us=new Gbt,mn=class extends xp{constructor(e,t){super(e),this.scope="",t=t??{},this.shared=t.shared!==void 0?t.shared:!0,this.unique=t.unique!==void 0?t.unique:!1}build(e,t,r,n){if(t=t??this.getType(e),this.getShared(e,t)){let i=this.getUnique(e,t);i&&this.uuid===void 0&&(this.uuid=Et.generateUUID()),r=e.getUUID(r??this.getUUID(),!i);let o=e.getNodeData(r),a=o.output||this.getType(e);if(e.analyzing)return(o.deps||0)>0||this.getLabel()?(this.appendDepsNode(e,o,t),this.generate(e,t,r)):super.build(e,t,r);if(i)return o.name=o.name||super.build(e,t,r),o.name;if(!this.getLabel()&&(!this.getShared(e,a)||e.context.ignoreCache||o.deps===1))return super.build(e,t,r);r=this.getUUID(!1);let s=this.getTemp(e,r);if(s)return e.format(s,a,t);{s=super.generate(e,t,r,o.output,n);let l=this.generate(e,a,r);return e.addNodeCode(s+" = "+l+";"),e.format(s,a,t)}}return super.build(e,t,r)}getShared(e,t){return t!=="sampler2D"&&t!=="samplerCube"&&this.shared}getUnique(e,t){return this.unique}setLabel(e){return this.label=e,this}getLabel(){return this.label}getUUID(e){let t=this.uuid;return typeof this.scope=="string"&&(t=this.scope+"-"+t),t}getTemp(e,t){t=t||this.uuid;let r=e.getVars()[t];return r?r.name:void 0}generate(e,t,r,n,i){return this.getShared(e,t)||console.error("TempNode is not shared"),r=r??this.uuid,e.getTempVar(r,n??this.getType(e),i,this.getLabel()).name}},Os=class extends mn{constructor(e,t){t=t??{},t.shared=t.shared!==void 0?t.shared:!1,super(e,t),this.readonly=!1}setReadonly(e){return this.readonly=e,this.hashProperties=this.readonly?["value"]:void 0,this}getReadonly(){return this.readonly}generate(e,t,r,n,i,o){r=e.getUUID(r??this.getUUID()),n=n??this.getType(e);let a=e.getNodeData(r);return this.getReadonly()&&this.generateReadonly!==void 0?this.generateReadonly(e,t,r,n,i,o):e.isShader("vertex")?(a.vertex||(a.vertex=e.createVertexUniform(n,this,i,o,this.getLabel())),e.format(a.vertex.name,n,t)):(a.fragment||(a.fragment=e.createFragmentUniform(n,this,i,o,this.getLabel())),e.format(a.fragment.name,n,t))}},Vo=class extends Os{constructor(e=0,t){super("v2"),this.nodeType="Vector2",this.value=e instanceof ue?e:new ue(e,t)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}generateReadonly(e,t,r,n,i,o){return e.format("vec2("+this.value.x+", "+this.value.y+")",n,t)}},Sl=class extends Os{constructor(e=0,t,r){super("v3"),this.nodeType="Vector3",this.value=e instanceof F?e:new F(e,t,r)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}get z(){return this.value.z}set z(e){this.value.z=e}generateReadonly(e,t,r,n,i,o){return e.format("vec3("+this.value.x+", "+this.value.y+", "+this.value.z+")",n,t)}},As=class extends Bt{constructor(e,t,r,n){super(e,t,r),this.isColorA=!0,this.a=n}setRGBA(e,t,r,n){super.setRGB(e,t,r),this.a=n}copy(e){return super.copy(e),this.a="a"in e?e.a:1,this}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}setStyle(e,t="srgb"){let r;if(e==="transparent")return this.setRGBA(0,0,0,0),this;if(r=/^((?:rgb|hsl)a?)\(([^)]*)\)/.exec(e)){let n,i=r[1],o=r[2];switch(i){case"rgb":case"rgba":if(n=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.a=i==="rgba"?parseFloat(n[4]):1,super.setStyle(e,t);break;case"hsl":case"hsla":if(n=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)%\s*,\s*(\d*\.?\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.a=i==="hsla"?parseFloat(n[4]):1,super.setStyle(e,t);break}}return super.setStyle(e,t)}get x(){return this.r}get y(){return this.g}get z(){return this.b}get w(){return this.a}set x(e){this.r=e}set y(e){this.g=e}set z(e){this.b=e}set w(e){this.a=e}},Rd=class extends Os{constructor(e){super("v4"),this.nodeType="Vector4",this.value=e instanceof As?e:new As(e.r,e.g,e.b,e.a)}generateReadonly(e,t,r,n,i,o){return e.format("vec4("+this.value.r+", "+this.value.g+", "+this.value.b+", "+this.value.a+")",n,t)}},Wbt=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,aX=/[a-z_0-9]+/gi,at=class extends mn{constructor(e,t,r,n,i){super(i),this.src="",this.nodeType="Function",this.useKeywords=!0,this.includes=[],this.extensions={},this.keywords={},this.isMethod=i===void 0,this.isInterface=!1,this.parse(e,t,r,n)}getShared(e,t){return!this.isMethod}getType(e){return e.getTypeByFormat(this.type)}getInputByName(e){if(this.inputs){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}}getIncludeByName(e){if(this.includes){let t=this.includes.length;for(;t--;)if(this.includes[t].name===e)return this.includes[t]}}generate(e,t,r,n,i){let o,a=0,s=this.src;if(this.includes)for(let u=0;u<this.includes.length;u++)e.include(this.includes[u],this);for(let u in this.extensions)e.extensions[u]=!0;let l=[];for(;o=aX.exec(this.src);)l.push(o);for(let u=0;u<l.length;u++){let d=l[u],c=d[0],h=this.isMethod?!this.getInputByName(c):!0,f=c;if(this.keywords[c]||this.useKeywords&&h&&us.containsKeyword(c)){let m=this.keywords[c];if(!m){let p=us.getKeywordData(c);p.cache&&(m=e.keywords[c]),m=m||us.getKeyword(c,e),p.cache&&(e.keywords[c]=m)}f=m.build(e)}c!==f&&s[d.index+a-1]!=="."&&(s=s.substring(0,d.index+a)+f+s.substring(d.index+c.length+a),a+=f.length-c.length),this.getIncludeByName(f)===void 0&&us.contains(f)&&e.include(us.get(f))}return t==="source"?s:this.isMethod?(this.isInterface||e.include(this,void 0,s),this.name):e.format("( "+s+" )",this.getType(e),t)}parse(e,t,r,n){if(this.src=e||"",this.includes=t??[],this.extensions=r??{},this.keywords=n??{},this.isMethod){let i=Wbt.exec(this.src);if(this.inputs=[],i&&i.length==4){this.type=i[1],this.name=i[2];let o=i[3].match(aX);if(o){let a=0;for(;a<o.length;){let s=o[a++],l;s==="in"||s==="out"||s==="inout"?l=o[a++]:(l=s,s="");let u=o[a++];this.inputs.push({name:u,type:l,qualifier:s})}}this.isInterface=this.src.indexOf("{")===-1}else this.type="",this.name=""}}},qbt=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i,eue=class extends mn{constructor(e="",t){super(),this.src="",this.useDefine=!1,this.nodeType="Const",this.parse(e||eue.PI,void 0,void 0,void 0,t)}getType(e){return e.getTypeByFormat(this.type)}parse(e,t,r,n,i){this.src=e||"";let o,a,s="",l=qbt.exec(e);this.useDefine=i??this.src.charAt(0)==="#",l&&l.length>1?(a=l[1],o=l[2],s=l[3]):(o=this.src,a="f"),this.name=o,this.type=a,this.value=s}build(e,t){if(t==="source"){if(this.value)return this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";";if(this.useDefine)return this.src}return e.include(this),e.format(this.name,this.getType(e),t)}generate(e,t,r,n,i){return e.format(this.name,this.getType(e),t)}},ln=eue;ln.PI="PI",ln.PI2="PI2",ln.RECIPROCAL_PI="RECIPROCAL_PI",ln.RECIPROCAL_PI2="RECIPROCAL_PI2",ln.LOG2="LOG2",ln.EPSILON="EPSILON";var Kbt=new RegExp(`^structs*([a-z_0-9]+)s*{s*((.|
)*?)}`,"gim"),Xbt=new RegExp("s*(w*?)s*(w*?)(=|;)","gim"),tue=class extends mn{constructor(e=""){super(),this.inputs=[],this.src="",this.nodeType="Struct",this.parse(e)}getType(e){return e.getTypeByFormat(this.name)}getInputByName(e){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}generate(e,t,r,n,i){return t==="source"?this.src+";":e.format("( "+this.src+" )",this.getType(e),t)}parse(e=""){this.src=e,this.inputs=[];let t=Kbt.exec(e);if(t){let r=t[2],n;for(;n=Xbt.exec(r);)this.inputs.push({type:n[1],name:n[2]});this.name=t[1]}else this.name="";this.type=this.name}},LU=class extends mn{constructor(e){super("v2",{shared:!1}),this.nodeType="UV",this.index=e??0}generate(e,t){e.requires.uv[this.index]=!0;let r=this.index>0?this.index+1:"",n=e.isShader("vertex")?"uv"+r:"vUv"+r;return e.format(n,this.getType(e),t)}};us.addKeyword("uv",function(){return new LU});us.addKeyword("uv2",function(){return new LU(1)});var xv=class extends mn{constructor(e,t){super("v4"),this.nodeType="ColorSpace",this.input=e,this.method=t??xv.LINEAR_TO_LINEAR,this.hashProperties=["method"]}static getEncodingComponents(e){switch(e){case Zc:return["Linear"];case ir:return["sRGB"];default:return[]}}generate(e,t){var a;let r=this.input.build(e,"v4"),n=this.getType(e),i=xv.Nodes[this.method],o=e.include(i);if(o===xv.LINEAR_TO_LINEAR)return e.format(r,n,t);if(((a=i.inputs)==null?void 0:a.length)===2){let s=this.factor.build(e,"f");return e.format(o+"( "+r+", "+s+" )",n,t)}else return e.format(o+"( "+r+" )",n,t)}fromEncoding(e){let t=xv.getEncodingComponents(e);this.method="LinearTo"+t[0],this.factor=t[1]}fromDecoding(e){let t=xv.getEncodingComponents(e);this.method=t[0]+"ToLinear",this.factor=t[1]}},Rc=xv;Rc.Nodes={LinearToLinear:new at(["vec4 LinearToLinear( in vec4 value ) {","	return value;","}"].join(`
`)),sRGBToLinear:new at(["vec4 sRGBToLinear( in vec4 value ) {","	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join(`
`)),LinearTosRGB:new at(["vec4 LinearTosRGB( in vec4 value ) {","	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join(`
`))},Rc.LINEAR_TO_LINEAR="LinearToLinear",Rc.SRGB_TO_LINEAR="sRGBToLinear",Rc.LINEAR_TO_SRGB="LinearTosRGB";var Ln=class extends at{constructor(e="",t,r,n,i){super(e,i,n,r,t),this.nodeType="Expression"}},jd=class extends Os{constructor(e=new co,t,r,n){super("v4",{shared:!0}),this.nodeType="Texture",this.value=e,this.uv=t??new LU,this.bias=r,this.project=n!==void 0?n:!1}getTexture(e,t){return super.generate(e,t,this.value.uuid,"t")}generate(e,t){if(t==="sampler2D")return this.getTexture(e,t);let r=this.getTexture(e,t),n=this.uv.build(e,this.project?"v4":"v2"),i=this.bias?this.bias.build(e,"f"):void 0;i===void 0&&e.context.bias&&(i=e.context.bias.setTexture(this).build(e,"f"));let o,a;this.project?o="texture2DProj":o=i?"tex2DBias":"tex2D",i?a=o+"( "+r+", "+n+", "+i+" )":a=o+"( "+r+", "+n+" )";let s={include:e.isShader("vertex"),ignoreCache:!0},l=this.getType(e);return e.addContext(s),this.colorSpace=this.colorSpace??new Rc(new Ln("",l)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(a),a=this.colorSpace.build(e,l),e.removeContext(),e.format(a,l,t)}},mt=class extends Os{constructor(e){super("f"),this.nodeType="Float",this.value=e??0}generateReadonly(e,t,r,n,i,o){return e.format(this.value+(this.value%1?"":".0"),n,t)}},sX=class extends mn{constructor(e,t){super(),this.inputs=[],this.nodeType="FunctionCall",this.value=e,this.inputs=t??[]}getFunction(){return this.value}getType(e){return this.value.getType(e)}generate(e,t,r,n,i){n=this.getType(e);let o=this.value,a=o.build(e,t)+"( ",s=[];if(o.inputs){for(let l=0;l<o.inputs.length;l++){let u=o.inputs[l],d=this.inputs[l]||this.inputs[u.name];s.push(d.build(e,e.getTypeByFormat(u.type)))}a+=s.join(", ")+" )"}return e.format(a,n,t)}},rue=class extends mn{constructor(e,t,r=rue.ADD){super(),this.nodeType="Operator",this.type=e.type,this.a=e,this.b=t,this.op=r}getType(e){let t=this.a.getType(e),r=this.b.getType(e);return e.isTypeMatrix(t)?"v4":e.getTypeLength(r)>e.getTypeLength(t)?r:t}generate(e,t){let r=this.getType(e);this.type=r;let n=this.a.build(e,r),i=this.b.build(e,r);return e.format("( "+n+" "+this.op+" "+i+" )",r,t)}},rs=rue;rs.ADD="+",rs.SUB="-",rs.MUL="*",rs.DIV="/";var an=class extends mn{constructor(e,t=an.ABS,r,n){super(),this.nodeType="Math",this.a=e,typeof t!="string"?this.b=t:n=t,typeof r!="string"?this.c=r:n=r,this.method=n,this.hashProperties=["method"]}getNumInputs(e){switch(this.method){case an.MIX:case an.CLAMP:case an.REFRACT:case an.SMOOTHSTEP:case an.FACEFORWARD:return 3;case an.MIN:case an.MAX:case an.MOD:case an.STEP:case an.REFLECT:case an.DISTANCE:case an.DOT:case an.CROSS:case an.POW:return 2;default:return 1}}getInputType(e){let t=e.getTypeLength(this.a.getType(e)),r=this.b?e.getTypeLength(this.b.getType(e)):0,n=this.c?e.getTypeLength(this.c.getType(e)):0;return t>r&&t>n?this.a.getType(e):r>n?this.b.getType(e):this.c.getType(e)}getType(e){switch(this.method){case an.LENGTH:case an.DISTANCE:case an.DOT:return"f";case an.CROSS:return"v3"}return this.getInputType(e)}generate(e,t){let r,n,i,o=this.a?e.getTypeLength(this.a.getType(e)):0,a=this.b?e.getTypeLength(this.b.getType(e)):0,s=this.c?e.getTypeLength(this.c.getType(e)):0,l=this.getInputType(e),u=this.getType(e);switch(this.type=u,this.method){case an.NEGATE:return e.format("( -"+this.a.build(e,l)+" )",l,t);case an.INVERT:return e.format("( 1.0 - "+this.a.build(e,l)+" )",l,t);case an.CROSS:r=this.a.build(e,"v3"),n=this.b.build(e,"v3");break;case an.STEP:r=this.a.build(e,o===1?"f":l),n=this.b.build(e,l);break;case an.MIN:case an.MAX:case an.MOD:r=this.a.build(e,l),n=this.b.build(e,a===1?"f":l);break;case an.REFRACT:r=this.a.build(e,l),n=this.b.build(e,l),i=this.c.build(e,"f");break;case an.MIX:r=this.a.build(e,l),n=this.b.build(e,l),i=this.c.build(e,s===1?"f":l);break;default:r=this.a.build(e,l),this.b&&(n=this.b.build(e,l)),this.c&&(i=this.c.build(e,l));break}let d=[];d.push(r),n&&d.push(n),i&&d.push(i);let c=this.getNumInputs(e);if(d.length!==c)throw Error(`Arguments not match used in "${this.method}". Require ${c}, currently ${d.length}.`);return e.format(this.method+"( "+d.join(", ")+" )",u,t)}},tr=an;tr.RAD="radians",tr.DEG="degrees",tr.EXP="exp",tr.EXP2="exp2",tr.LOG="log",tr.LOG2="log2",tr.SQRT="sqrt",tr.INV_SQRT="inversesqrt",tr.FLOOR="floor",tr.CEIL="ceil",tr.NORMALIZE="normalize",tr.FRACT="fract",tr.SATURATE="saturate",tr.SIN="sin",tr.COS="cos",tr.TAN="tan",tr.ASIN="asin",tr.ACOS="acos",tr.ARCTAN="atan",tr.ABS="abs",tr.SIGN="sign",tr.LENGTH="length",tr.NEGATE="negate",tr.INVERT="invert",tr.MIN="min",tr.MAX="max",tr.MOD="mod",tr.STEP="step",tr.REFLECT="reflect",tr.DISTANCE="distance",tr.DOT="dot",tr.CROSS="cross",tr.POW="pow",tr.MIX="mix",tr.CLAMP="clamp",tr.REFRACT="refract",tr.SMOOTHSTEP="smoothstep",tr.FACEFORWARD="faceforward";var Gx=class extends mn{constructor(e,t,r){super("v4"),this.nodeType="TextureCubeUV",this.value=e,this.uv=t,this.bias=r}bilinearCubeUV(e,t,r,n){let i=new sX(Gx.Nodes.bilinearCubeUV,[t,r,n]);this.colorSpaceTL=this.colorSpaceTL??new Rc(new Ln("","v4")),this.colorSpaceTL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(i.build(e)+".tl"),this.colorSpaceTR=this.colorSpaceTR??new Rc(new Ln("","v4")),this.colorSpaceTR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(i.build(e)+".tr"),this.colorSpaceBL=this.colorSpaceBL??new Rc(new Ln("","v4")),this.colorSpaceBL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(i.build(e)+".bl"),this.colorSpaceBR=this.colorSpaceBR??new Rc(new Ln("","v4")),this.colorSpaceBR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(i.build(e)+".br");let o={include:e.isShader("vertex"),ignoreCache:!0};e.addContext(o),this.colorSpaceTLExp=new Ln(this.colorSpaceTL.build(e,"v4"),"v4"),this.colorSpaceTRExp=new Ln(this.colorSpaceTR.build(e,"v4"),"v4"),this.colorSpaceBLExp=new Ln(this.colorSpaceBL.build(e,"v4"),"v4"),this.colorSpaceBRExp=new Ln(this.colorSpaceBR.build(e,"v4"),"v4"),e.removeContext();let a=new Ln("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return a.keywords.cubeUV_TL=this.colorSpaceTLExp,a.keywords.cubeUV_TR=this.colorSpaceTRExp,a.keywords.cubeUV_BL=this.colorSpaceBLExp,a.keywords.cubeUV_BR=this.colorSpaceBRExp,a.keywords.cubeUV=i,a}generate(e,t){if(e.isShader("fragment")){let r=this.uv,n=this.bias||e.context.roughness,i=new sX(Gx.Nodes.roughnessToMip,[n]),o=new tr(i,Gx.Nodes.m0,Gx.Nodes.cubeUV_maxMipLevel,tr.CLAMP),a=new tr(o,tr.FLOOR),s=new tr(o,tr.FRACT),l=this.bilinearCubeUV(e,this.value,r,a),u=this.bilinearCubeUV(e,this.value,r,new rs(a,new mt(1).setReadonly(!0),rs.ADD)),d=new tr(l,u,s,tr.MIX);return e.format(d.build(e),"v4",t)}else return console.warn("TextureCubeUVNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t)}},Rz=Gx;Rz.Nodes=function(){let e=new tue(`struct TextureCubeUVData {
			vec4 tl;
			vec4 tr;
			vec4 br;
			vec4 bl;
			vec2 f;
		}`),t=new ln("float cubeUV_maxMipLevel 8.0",!0),r=new ln("float cubeUV_minMipLevel 4.0",!0),n=new ln("float cubeUV_maxTileSize 256.0",!0),i=new ln("float cubeUV_minTileSize 16.0",!0),o=new at(`float getFace(vec3 direction) {
				vec3 absDirection = abs(direction);
				float face = -1.0;
				if (absDirection.x > absDirection.z) {
					if (absDirection.x > absDirection.y)
						face = direction.x > 0.0 ? 0.0 : 3.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				} else {
					if (absDirection.z > absDirection.y)
						face = direction.z > 0.0 ? 2.0 : 5.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				}
				return face;
		}`);o.useKeywords=!1;let a=new at(`vec2 getUV(vec3 direction, float face) {
				vec2 uv;
				if (face == 0.0) {
					uv = vec2(direction.z, direction.y) / abs(direction.x); // pos x
				} else if (face == 1.0) {
					uv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y
				} else if (face == 2.0) {
					uv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z
				} else if (face == 3.0) {
					uv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x
				} else if (face == 4.0) {
					uv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y
				} else {
					uv = vec2(direction.x, direction.y) / abs(direction.z); // neg z
				}
				return 0.5 * (uv + 1.0);
		}`);a.useKeywords=!1;let s=new at(`TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
			float face = getFace(direction);
			float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
			mipInt = max(mipInt, cubeUV_minMipLevel);
			float faceSize = exp2(mipInt);
			float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
			vec2 uv = getUV(direction, face) * (faceSize - 1.0);
			vec2 f = fract(uv);
			uv += 0.5 - f;
			if (face > 2.0) {
				uv.y += faceSize;
				face -= 3.0;
			}
			uv.x += face * faceSize;
			if(mipInt < cubeUV_maxMipLevel){
				uv.y += 2.0 * cubeUV_maxTileSize;
			}
			uv.y += filterInt * 2.0 * cubeUV_minTileSize;
			uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
			uv *= texelSize;
			vec4 tl = texture2D(envMap, uv);
			uv.x += texelSize;
			vec4 tr = texture2D(envMap, uv);
			uv.y += texelSize;
			vec4 br = texture2D(envMap, uv);
			uv.x -= texelSize;
			vec4 bl = texture2D(envMap, uv);
			return TextureCubeUVData( tl, tr, br, bl, f );
		}`,[e,o,a,t,r,n,i]);s.useKeywords=!1;let l=new ln("float r0 1.0",!0),u=new ln("float v0 0.339",!0),d=new ln("float m0 -2.0",!0),c=new ln("float r1 0.8",!0),h=new ln("float v1 0.276",!0),f=new ln("float m1 -1.0",!0),m=new ln("float r4 0.4",!0),p=new ln("float v4 0.046",!0),g=new ln("float m4 2.0",!0),v=new ln("float r5 0.305",!0),b=new ln("float v5 0.016",!0),y=new ln("float m5 3.0",!0),x=new ln("float r6 0.21",!0),S=new ln("float v6 0.0038",!0),w=new ln("float m6 4.0",!0),_=[l,u,d,c,h,f,m,p,g,v,b,y,x,S,w],C=new at(`float roughnessToMip(float roughness) {
			float mip = 0.0;
			if (roughness >= r1) {
				mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
			} else if (roughness >= r4) {
				mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
			} else if (roughness >= r5) {
				mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
			} else if (roughness >= r6) {
				mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
			} else {
				mip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25
			}
			return mip;
		}`,_);return{bilinearCubeUV:s,roughnessToMip:C,m0:d,cubeUV_maxMipLevel:t}}();var wv=class extends mn{constructor(e){super("v3"),this.nodeType="Normal",this.scope=e??wv.VIEW}getShared(){return this.scope===wv.WORLD}build(e,t,r,n){let i=e.context[this.scope+"Normal"];return i?i.build(e,t,r,n):super.build(e,t,r)}generate(e,t,r,n,i){let o;switch(this.scope){case wv.VIEW:e.isShader("vertex")?o="transformedNormal":o="geometryNormal";break;case wv.LOCAL:e.isShader("vertex")?o="objectNormal":(e.requires.normal=!0,o="vObjectNormal");break;case wv.WORLD:e.isShader("vertex")?o="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(e.requires.worldNormal=!0,o="vWNormal");break}return e.format(o,this.getType(e),t)}},gs=wv;gs.LOCAL="local",gs.WORLD="world",gs.VIEW="view",gs.NORMAL="normal";us.addKeyword("viewNormal",function(){return new gs(gs.VIEW)});us.addKeyword("localNormal",function(){return new gs(gs.NORMAL)});us.addKeyword("worldNormal",function(){return new gs(gs.WORLD)});var Ed=class extends mn{constructor(e){super("v3"),this.nodeType="Position",this.scope=e??Ed.LOCAL}getType(){switch(this.scope){case Ed.PROJECTION:return"v4"}return this.type}getShader(){switch(this.scope){case Ed.LOCAL:case Ed.WORLD:return!1}return!0}generate(e,t,r,n,i){let o;switch(this.scope){case Ed.LOCAL:e.isShader("vertex")?o="transformed":(e.requires.position=!0,o="vPosition");break;case Ed.WORLD:if(e.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";e.requires.worldPosition=!0,o="vWPosition";break;case Ed.VIEW:o=e.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case Ed.PROJECTION:o=e.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )";break}return e.format(o,this.getType(),t)}},Au=Ed;Au.LOCAL="local",Au.WORLD="world",Au.VIEW="view",Au.PROJECTION="projection";us.addKeyword("position",function(){return new Au});us.addKeyword("worldPosition",function(){return new Au(Au.WORLD)});us.addKeyword("viewPosition",function(){return new Au(Au.VIEW)});var sc=class extends mn{constructor(e){super("v3"),this.nodeType="Reflect",this.scope=e??sc.CUBE}getUnique(e){return!e.context.viewNormal}getType(){switch(this.scope){case sc.SPHERE:return"v2"}return this.type}generate(e,t){let r=this.getUnique(e);if(e.isShader("fragment")){let n;switch(this.scope){case sc.VECTOR:{let i=new gs(gs.VIEW),o=e.context.roughness,a=i.build(e,"v3"),s=new Au(Au.VIEW).build(e,"v3"),l=o?o.build(e,"f"):void 0,u=`reflect( -normalize( ${s} ), ${a} )`;l&&(u=`normalize( mix( ${u}, ${a}, ${l} * ${l} ) )`);let d=`inverseTransformDirection( ${u}, viewMatrix )`;r?(e.addNodeCode(`vec3 reflectVec = ${d};`),n="reflectVec"):n=d;break}case sc.CUBE:{let i=new sc(sc.VECTOR).build(e,"v3"),o="vec3( -"+i+".x, "+i+".yz )";r?(e.addNodeCode(`vec3 reflectCubeVec = ${o};`),n="reflectCubeVec"):n=o;break}case sc.SPHERE:{let i="normalize( ( viewMatrix * vec4( "+new sc(sc.VECTOR).build(e,"v3")+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";r?(e.addNodeCode(`vec2 reflectSphereVec = ${i};`),n="reflectSphereVec"):n=i;break}}return e.format(n,this.getType(),t)}else return console.warn("ReflectNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.type,t)}},_y=sc;_y.CUBE="cube",_y.SPHERE="sphere",_y.VECTOR="vector";var Ybt=class extends mn{constructor(e=new jd,t,r){super("v4"),this.nodeType="TextureCube",this.value=e,this.radianceNode=new Rz(this.value,t??new _y(_y.VECTOR),r),this.irradianceNode=new Rz(this.value,new gs(gs.WORLD),new mt(1).setReadonly(!0))}generate(e,t){return e.isShader("fragment")?(e.require("irradiance"),e.context.bias&&e.context.bias.setTexture(this.value),(e.slot==="irradiance"?this.irradianceNode:this.radianceNode).build(e,t)):(console.warn("TextureCubeNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t))}},Qbt=class extends Os{constructor(e=new N4,t,r){super("v4",{shared:!0}),this.nodeType="CubeTexture",this.value=e,this.uv=t??new _y,this.bias=r}getTexture(e,t){return super.generate(e,t,this.value.uuid,"tc")}generate(e,t){var l;if(t==="samplerCube")return this.getTexture(e,t);let r=this.getTexture(e,t),n=(l=this.uv)==null?void 0:l.build(e,"v3"),i=this.bias?this.bias.build(e,"f"):void 0;i===void 0&&e.context.bias&&(i=e.context.bias.setTexture(this).build(e,"f"));let o;i?o="texCubeBias( "+r+", "+n+", "+i+" )":o="texCube( "+r+", "+n+" )";let a={include:e.isShader("vertex"),ignoreCache:!0},s=this.getType(e);return e.addContext(a),this.colorSpace=this.colorSpace??new Rc(new Ln("",s)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(o),o=this.colorSpace.build(e,s),e.removeContext(),e.format(o,s,t)}},Zbt=`
uniform int frameIndex;
uniform vec2 resolution;
uniform mat4 previousModelViewMatrix;
uniform mat4 previousProjectionMatrix;

varying vec4 vCurrentPosition;
varying vec4 vPreviousPosition;
`,Jbt=`
layout(location = 1) out vec4 gVelocity;

uniform int frameIndex;
uniform vec2 resolution;

varying vec4 vCurrentPosition;
varying vec4 vPreviousPosition;

const vec2 haltonSequence[16] = vec2[16](
vec2( 0.000000,-0.333334),
vec2(-0.500000, 0.333334),
vec2( 0.500000,-0.777778),
vec2(-0.750000,-0.111112),
vec2( 0.250000, 0.555556),
vec2(-0.250000,-0.555556),
vec2( 0.750000, 0.111112),
vec2(-0.875000, 0.777778),
vec2(0.125000, -0.925926),
vec2(-0.375000, -0.259260),
vec2(0.625000, 0.407408),
vec2(-0.625000, -0.703704),
vec2(0.375000, -0.037038),
vec2(-0.125000, 0.629630),
vec2(0.875000, -0.481482),
vec2(-0.937500, 0.185186));

vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {
  const float goldenAngle = 2.399963f; // radians
  float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));
  float theta = float(sampleIndex) * goldenAngle + angle;
  float sine = sin(theta);
  float cosine = cos(theta);
  return vec2(cosine, sine) * r;
}

// Derived from the interleaved gradient function from Jimenez 2014 http:goo.gl/eomGso
float getNoiseInterleavedGradient(vec2 screenPos) {
    vec3 magic = vec3(0.06711056f, 0.00583715f, 52.9829189f);
    return fract(magic.z * fract(dot(screenPos, magic.xy)));
}

`,ext=`
// TODO: This could be generated CPU side and passed to the shader every frame
const vec2 haltonSequence[16] = vec2[16](
vec2( 0.000000,-0.333334),
vec2(-0.500000, 0.333334),
vec2( 0.500000,-0.777778),
vec2(-0.750000,-0.111112),
vec2( 0.250000, 0.555556),
vec2(-0.250000,-0.555556),
vec2( 0.750000, 0.111112),
vec2(-0.875000, 0.777778),
vec2(0.125000, -0.925926),
vec2(-0.375000, -0.259260),
vec2(0.625000, 0.407408),
vec2(-0.625000, -0.703704),
vec2(0.375000, -0.037038),
vec2(-0.125000, 0.629630),
vec2(0.875000, -0.481482),
vec2(-0.937500, 0.185186));

// TODO: Pass correct view size
vec2 offset = haltonSequence[frameIndex];
offset.x /= resolution.x;
offset.y /= resolution.y;

vec4 currentPosition = gl_Position;
vec4 currentPositionJittered = currentPosition + (vec4(offset.x, offset.y, 0.0, 0.0) * currentPosition.w);

// We want to calculate the velocity with unjittered positions
// so that things that are not moving get a velocity = 0
vCurrentPosition = currentPosition;
vPreviousPosition = previousProjectionMatrix * previousModelViewMatrix * vec4(transformed, 1.0);
#ifdef OUTLINE_COMPENSATION
vPreviousPosition.xy += OUTLINE_COMPENSATION;
#endif
gl_Position = currentPositionJittered;

`,txt=`
vec2 oldPos = vPreviousPosition.xy;
    oldPos /= vPreviousPosition.w;
    oldPos.xy = (oldPos.xy+1.)/2.0;

vec2 newPos = vCurrentPosition.xy;
    newPos /= vCurrentPosition.w;
    newPos.xy = (newPos.xy+1.)/2.0;

vec2 velocity = (newPos - oldPos);

// Discard fully transparent pixels 
if (gl_FragColor.a <= 0.0) discard;

gVelocity = vec4(velocity, 0.0, 1.0);
`,lX=["x","y","z","w"],rxt=["float","vec2","vec3","vec4"],nxt={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b","float[]":"f[]","vec4[]":"v4[]"},ixt={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4","f[]":"float[]","v4[]":"vec4[]"},oxt=class{constructor(){this.includes={consts:{},functions:{},structs:{}},this.cache="",this.slot="",this.shader="",this.context={},this.needsJitter=!0,this.getIncludesCode=function(){function e(t,r){return t.deps.length-r.deps.length}return function(t,r){let n=this.getIncludes(t,r);if(!n)return"";let i="";n=n.sort(e);for(let o=0;o<n.length;o++)n[o].src&&(i+=n[o].src+`
`);return i}}(),this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.fragmentVariables={},this.fragmentParsVariables={},this.vertexParsVariables={},this.requires={uv:[],color:[],transparent:!1,irradiance:!1,position:!1,worldPosition:!1,normal:!1,worldNormal:!1,vWorldViewDir:!1,modelMatrix:!1,viewMatrix:!1,projectionMatrix:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCube(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif",`
			// NOTE: Include Spline's blending modes. This could be part of BlendNode
			#define SPE_BLENDING_NORMAL 0
			#define SPE_BLENDING_MULTIPLY 1
			#define SPE_BLENDING_SCREEN 2
			#define SPE_BLENDING_OVERLAY 3

			vec3 spe_normalBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, b, alpha );
			}

			vec3 spe_multiplyBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, a * b, alpha );
			}

			vec3 spe_screenBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = 1.0 - ( 1.0 - a ) * ( 1.0 - b );
				return mix( a, tmp, alpha );
			}

			vec3 spe_overlayBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = mix( 1. - 2. * (1. - a) * (1. - b), 2. * a * b, step( a, vec3(.5) ) );
				return clamp( mix( a, tmp, alpha ), 0.0, 1.0 );
			}

			vec3 spe_blend( vec3 a, vec3 b, float alpha, int mode ) {
				if ( mode == SPE_BLENDING_NORMAL ) return spe_normalBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_MULTIPLY ) return spe_multiplyBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_SCREEN ) return spe_screenBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_OVERLAY ) return spe_overlayBlend( a, b, alpha );
				return vec3( 1.0 );
			}
			`,"#include <packing>","#include <common>"].join(`
`),this.parsCode={vertex:["float neighbor_offset = 0.0001;",""].join(`
`),fragment:["float accumAlpha = 0.0;",`void accumulateAlpha(float alpha) {
					accumAlpha += (1.0 - accumAlpha) * alpha;
				}`,""].join(`
`)},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},arrayUniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.updaters=[],this.nodes=[],this.analyzing=!1}build(e,t){this.addVertexParsCode(Zbt),this.addFragmentParsCode(Jbt),this.buildShader("vertex",e),this.buildShader("fragment",t);for(let r=0;r<this.requires.uv.length;r++)if(this.requires.uv[r]){let n=r>0?r+1:"";this.addVaryCode("varying vec2 vUv"+n+";"),r>0&&this.addVertexParsCode("attribute vec2 uv"+n+";"),this.addVertexFinalCode("vUv"+n+" = uv"+n+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition,this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("vObjectNormal = normal;")),this.requires.modelMatrix&&this.addFragmentParsCode("uniform mat4 modelMatrix;"),this.requires.viewMatrix&&this.addFragmentParsCode("uniform mat4 viewMatrix;"),this.requires.projectionMatrix&&this.addFragmentParsCode("uniform mat4 projectionMatrix;"),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this.requires.vWorldViewDir&&(this.addVaryCode("varying vec3 vWorldViewDir;"),this.addVertexFinalCode("vWorldViewDir = isPerspectiveMatrix( projectionMatrix ) ?  ( (modelMatrix * vec4(position, 1.0)).xyz - cameraPosition ) : vec3( -viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2] );")),this.needsJitter&&(this.addVertexFinalCode(ext),this.addFragmentFinalCode(txt)),this}buildShader(e,t){this.resultCode[e]=t.build(this.setShader(e),"v4")}setMaterial(e,t){return this.defines={},this}addFlow(e,t,r){return this.addSlot(e).addCache(t).addContext(r)}removeFlow(){return this.removeSlot().removeCache().removeContext()}addCache(e){return this.cache=e??"",this.caches.push(this.cache),this}removeCache(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this}addContext(e){return this.context=Object.assign({},this.context,e),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this}removeContext(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this}addSlot(e){return this.slot=e||"",this.slots.push(this.slot),this}removeSlot(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this}addFragmentVariable(e,t){this.fragmentVariables[e]===void 0&&(this.addFragmentCode(`${t} ${e};`),this.fragmentVariables[e]="")}addFragmentParsVariable(e,t){this.fragmentParsVariables[e]===void 0&&(this.addFragmentParsCode(`${t} ${e};`),this.fragmentParsVariables[e]="")}addVertexParsVariable(e,t){this.vertexParsVariables[e]===void 0&&(this.addVertexParsCode(`${t} ${e};`),this.vertexParsVariables[e]="")}addVertexCode(e){this.addCode(e,"vertex")}addFragmentCode(e){this.addCode(e,"fragment")}addCode(e,t){this.code[t??this.shader]+=e+`
`}addVertexNodeCode(e){this.addNodeCode(e,"vertex")}addFragmentNodeCode(e){this.addNodeCode(e,"fragment")}addNodeCode(e,t){this.nodeCode[t??this.shader]+=e+`
`}clearNodeCode(e){e=e??this.shader;let t=this.nodeCode[e];return this.nodeCode[e]="",t}clearVertexNodeCode(){return this.clearNodeCode("vertex")}clearFragmentNodeCode(){return this.clearNodeCode("fragment")}addVertexFinalCode(e){this.addFinalCode(e,"vertex")}addFragmentFinalCode(e){this.addFinalCode(e,"fragment")}addFinalCode(e,t){this.finalCode[t??this.shader]+=e+`
`}addVertexParsCode(e){this.addParsCode(e,"vertex")}addFragmentParsCode(e){this.addParsCode(e,"fragment")}addParsCode(e,t){this.parsCode[t??this.shader]+=e+`
`}addVaryCode(e){this.addVertexParsCode(e),this.addFragmentParsCode(e)}isCache(e){return this.caches.indexOf(e)!==-1}isSlot(e){return this.slots.indexOf(e)!==-1}define(e,t){this.defines[e]=t===void 0?1:t}require(e){this.requires[e]=!0}isDefined(e){return this.defines[e]!==void 0}getVar(e,t,r,n="varying",i="V",o=""){let a=this.getVars(n),s=a[e];if(!s){let l=a.length;s={name:r||"node"+i+l+(o?"_"+o:""),type:t},a.push(s),a[e]=s}return s}getTempVar(e,t,r,n){return this.getVar(e,t,r,this.shader,"T",n)}getAttribute(e,t){if(!this.attributes[e]){let r=this.getVar(e,t);this.addVertexParsCode("attribute "+t+" "+e+";"),this.addVertexFinalCode(r.name+" = "+e+";"),this.attributes[e]={varying:r,name:e,type:t}}return this.attributes[e]}getCode(e){return[this.prefixCode,this.parsCode[e],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[e],"uniform"),this.getVarListCode(this.inputs.arrayUniforms[e],"uniform"),this.getIncludesCode("consts",e),this.getIncludesCode("structs",e),this.getIncludesCode("functions",e),"void main() {",this.getVarListCode(this.getVars(e)),this.code[e],this.resultCode[e],this.finalCode[e],"}"].join(`
`)}getVarListCode(e,t){t=t??"";let r="";for(let n=0,i=e.length;n<i;++n){let o=e[n],a=o.type,s=o.name,l=o.size,u=this.getFormatByType(a);if(u===void 0)throw new Error("Node pars "+u+" not found.");u.includes("[]")?r+=t+" "+u.substring(0,u.length-2)+" "+s+`[${l}];
`:r+=t+" "+u+" "+s+`;
`}return r}getVars(e){return this.inputs.vars[e??this.shader]}getNodeData(e){let t=e instanceof xp?e.uuid:e;return this.nodeData[t]=this.nodeData[t]||{}}createUniform(e,t,r,n,i,o){if(t.includes("[]")){let a=this.inputs.arrayUniforms,s=a.list.length,l=new oX({type:t,size:r.size,name:n||"nodeUA"+s+(o?"_"+o:""),node:r,needsUpdate:i});return a.list.push(l),a[e].push(l),a[e][l.name]=l,this.uniforms[l.name]=l,l}else{let a=this.inputs.uniforms,s=a.list.length,l=new oX({type:t,name:n||"nodeU"+s+(o?"_"+o:""),node:r,needsUpdate:i});return a.list.push(l),a[e].push(l),a[e][l.name]=l,this.uniforms[l.name]=l,l}}createVertexUniform(e,t,r,n,i){return this.createUniform("vertex",e,t,r,n,i)}createFragmentUniform(e,t,r,n,i){return this.createUniform("fragment",e,t,r,n,i)}include(e,t,r){var o;let n;if(e=typeof e=="string"?us.get(e):e,this.context.include===!1)return e.name;e instanceof at?n=this.includes.functions:e instanceof ln?n=this.includes.consts:e instanceof tue&&(n=this.includes.structs);let i=n[this.shader]=n[this.shader]||[];if(e){let a=i[e.name];if(a||(a=i[e.name]={node:e,deps:[]},i.push(a),a.src=e.build(this,"source")),e instanceof at&&t&&i[t.name]&&i[t.name].deps.indexOf(e)===-1&&(i[t.name].deps.push(e),(o=e.includes)==null?void 0:o.length)){let s=0;do this.include(e.includes[s++],t);while(s<e.includes.length)}return r&&(a.src=r),e.name}else throw new Error("Include not found.")}colorToVectorProperties(e){return e.replace("r","x").replace("g","y").replace("b","z").replace("a","w")}colorToVector(e){return e.replace(/c/g,"v3")}getIncludes(e,t){return this.includes[e][t||this.shader]}getConstructorFromLength(e){return rxt[e-1]}isTypeMatrix(e){return/^m/.test(e)}getTypeLength(e){return e==="f"?1:parseInt(this.colorToVector(e).substr(1))}getTypeFromLength(e){return e===1?"f":"v"+e}findNode(...e){for(let t=0;t<arguments.length;t++){let r=e[t];if(r!=null&&r.isNode)return r}}resolve(...e){for(let t=0;t<arguments.length;t++){let r=e[t];if(r!==void 0){if(r.isNode)return r;if(r.isTexture)switch(r.mapping){case qm:case Km:return new Qbt(r);case t_:return new Ybt(new jd(r));default:return new jd(r)}else{if(r.isVector2)return new Vo(r);if(r.isVector3)return new Sl(r);if(r.isVector4)return new Rd(r)}}}}format(e,t,r){switch(this.colorToVector(r+" <- "+t)){case"f <- v2":return e+".x";case"f <- v3":return e+".x";case"f <- v4":return e+".x";case"f <- i":case"f <- b":return"float( "+e+" )";case"v2 <- f":return"vec2( "+e+" )";case"v2 <- v3":return e+".xy";case"v2 <- v4":return e+".xy";case"v2 <- i":case"v2 <- b":return"vec2( float( "+e+" ) )";case"v3 <- f":return"vec3( "+e+" )";case"v3 <- v2":return"vec3( "+e+", 0.0 )";case"v3 <- v4":return e+".xyz";case"v3 <- i":case"v3 <- b":return"vec2( float( "+e+" ) )";case"v4 <- f":return"vec4( "+e+" )";case"v4 <- v2":return"vec4( "+e+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+e+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+e+" ) )";case"i <- f":case"i <- b":return"int( "+e+" )";case"i <- v2":return"int( "+e+".x )";case"i <- v3":return"int( "+e+".x )";case"i <- v4":return"int( "+e+".x )";case"b <- f":return"( "+e+" != 0.0 )";case"b <- v2":return"( "+e+" != vec2( 0.0 ) )";case"b <- v3":return"( "+e+" != vec3( 0.0 ) )";case"b <- v4":return"( "+e+" != vec4( 0.0 ) )";case"b <- i":return"( "+e+" != 0 )"}return e}getTypeByFormat(e){return nxt[e]||e}getFormatByType(e){return ixt[e]||e}getUUID(e,t){return t=t!==void 0?t:!0,t&&this.cache&&(e=this.cache+"-"+e),e}getElementByIndex(e){return lX[e]}getIndexByElement(e){return lX.indexOf(e)}isShader(e){return this.shader===e}setShader(e){return this.shader=e,this}mergeDefines(e){for(let t in e)this.defines[t]=e[t];return this.defines}mergeUniform(e){for(let t in e)this.uniforms[t]=e[t];return this.uniforms}getTextureEncodingFromMap(e){let t;return e?e.isTexture&&(t=e.encoding):t=Zc,t===Zc&&this.context.gamma&&(t=ir),t}},xi=class extends Os{constructor(e=0,t,r,n){super("c"),this.nodeType="Color",this.value=e instanceof As?e:new As(e||0,t,r,n)}setRGBA(e){this.value.setRGBA(e.r,e.g,e.b,e.a)}generate(e,t,r,n,i,o){r=e.getUUID(r??this.getUUID()),n=n??this.getType(e);let a=e.getNodeData(r),s=this.getReadonly()&&this.generateReadonly!==void 0;if(this.alpha){let l=this.alpha.build(e,"f");e.addFragmentNodeCode(`accumAlpha += ( 1.0 - accumAlpha ) * ${l};`)}return s?this.generateReadonly(e,t,r,n,i,o):e.isShader("vertex")?(a.vertex||(a.vertex=e.createVertexUniform(n,this,i,o,this.getLabel())),e.format(a.vertex.name,n,t)):(a.fragment||(a.fragment=e.createFragmentUniform(n,this,i,o,this.getLabel())),e.format(a.fragment.name,n,t))}generateReadonly(e,t,r,n,i,o){return e.format("vec3("+this.value.r+", "+this.value.g+", "+this.value.b+")",n,t)}},wn=class extends Os{constructor(e){super("i"),this.nodeType="Int",this.value=Math.floor(e??0)}generateReadonly(e,t,r,n,i,o){return e.format(this.value.toString(),n,t)}},ka=class extends Os{constructor(e){super("b"),this.nodeType="Bool",this.value=e??!1}generateReadonly(e,t,r,n){return e.format(this.value?"true":"false",n,t)}},Vp=class extends Os{constructor(e=1,t){super("f[]"),this.nodeType="FloatArray",this.size=e,this.value=Array.isArray(t)?t:typeof t=="number"?new Array(e).fill(t):new Array(e).fill(0)}},NU=class extends Os{},axt=class extends NU{constructor(e){super("v3"),this.image=e,this._value=new F}get value(){return this._value.x=this.image.isVideo?this.image.img.videoWidth??0:this.image.img.width,this._value.y=this.image.isVideo?this.image.img.videoHeight??0:this.image.img.height,this._value}},kz=class extends NU{constructor(e,t){super("t"),this.image=e,this.wrap=t}get value(){return this.image.getTexture(this.wrap)}},nue=class extends Os{constructor(e){super("m3"),this.nodeType="Matrix3",this.value=e??new Ii}generateReadonly(e,t,r,n,i,o){return e.format("mat3("+this.value.elements.join(", ")+")",n,t)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}},rd=class extends Os{constructor(e){super("m4"),this.nodeType="Matrix4",this.value=e??new qe}generateReadonly(e,t,r,n,i,o){return e.format("mat4("+this.value.elements.join(", ")+")",n,t)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}};function uX(e,t,r){e.setUvTransform(r[0],r[1],t[0],t[1],0,0,0)}var sxt=class extends nue{constructor(e,t){super(new Ii),this.repeat=e,this.offset=t,uX(this.value,e,t)}updateMatrix(){uX(this.value,this.repeat,this.offset)}},Hp=class extends Os{constructor(e=1,t){super("v4[]"),this.nodeType="Vector4Array",this.size=e,this.value=Array.isArray(t)?t:t instanceof or?new Array(e).fill(t):new Array(e).fill(new or(0))}},cX=class extends mn{constructor(e,t,r,n){super("v3"),this.nodeType="Blend",this.a=e,this.b=t,this.alpha=r,this.mode=n}generate(e,t){if(e.isShader("fragment")){let r=[];return r.push(this.a.build(e,"c")),r.push(this.b.build(e,"c")),r.push(this.alpha.build(e,"f")),r.push(this.mode.build(e,"i")),e.format("spe_blend("+r.join(",")+")",this.getType(e),t)}else return console.warn("BlendNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},iue=class extends mn{constructor(e,t){super("v3"),this.nodeType="CustomColor",this.color=e,this.alpha=t,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){let r=e.include(iue.Nodes.customColor);e.addFragmentVariable(this.calpha,"float");let n=[];return n.push(this.color.build(e,"v3")),n.push(this.mask?`luminance(${this.mask.build(e,"v3")})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.calpha),e.format(r+"("+n.join(",")+")",this.getType(e),t)}else return console.warn("CustomColorNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Lz=iue;Lz.Nodes=function(){return{customColor:new at(`vec3 customColor(vec3 color, float mask, float alpha, out float calpha) {
				float lalpha = alpha * mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color;
			}`)}}();var oue=class extends mn{constructor(e,t){super("v3"),this.nodeType="CustomNormal",this.cnormal=e,this.alpha=t,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){let r=e.include(oue.Nodes.customNormal);e.addFragmentVariable(this.calpha,"float");let n=[];return n.push(this.cnormal.build(e,"v3")),n.push("normal"),n.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.calpha),e.format(r+"("+n.join(",")+")",this.getType(e),t)}else return console.warn("CustomNormalNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},aue=oue;aue.Nodes=function(){return{customNormal:new at(`vec3 customNormal(vec3 cnormal, vec3 norm, float mask, float alpha, out float calpha) {
				vec3 normal = packNormalToRGB( norm ).rgb;
				normal *= step( vec3(0.5), cnormal );

				float lalpha = alpha * mask;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

				return normal;
			}`)}}();var Wx=class extends mn{constructor(e,t,r,n,i,o,a,s,l,u,d,c){super("v3"),this.nodeType="CustomTexture",this.texture=e,this.textureSize=t,this.crop=r,this.projection=n,this.axis=i,this.side=o,this.size=a,this.blending=s,this.mat=l,this.isMask=c,this.alpha=u,this.mode=d,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){e.require("position"),e.require("normal"),e.require("uv"),e.requires.uv=[!0],e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0;let r=`g${this.uuid.toString().replace(/-/g,"")}`,n;switch(this.projection.value){case 3:n=e.include(Wx.Nodes.cylindrical);break;case 2:n=e.include(Wx.Nodes.spherical);break;case 1:let o=["vec3(1.0, 0.0, 0.0)","vec3(0.0, 1.0, 0.0)","vec3(0.0, 0.0, 1.0)"][this.axis.value],a=["zy","xz","xy"][this.axis.value],s=new at(`
		vec3 ${r}_planarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
				vec2 projected = (1. + (position.${a})) / 2.;
				vec2 uvs = ( mat * vec3( (projected * 2. - 1.) / (size * .5), 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				${this.side.value===2?"":`lalpha *= step(0.0, ${this.side.value===1?"-1.0 * ":""}dot(vObjectNormal, ${o}));`}

				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				
				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}`);n=e.include(s);break;case 4:n=e.include(Wx.Nodes.triplanar);break;default:n=e.include(Wx.Nodes.uv);break}e.addFragmentVariable(this.calpha,"float");let i=[];if(i.push("normal"),i.push(this.texture.generate(e,"t")),i.push(this.textureSize.build(e,"v2")),i.push(this.crop.build(e,"f")),i.push(this.mat.build(e,"mat3")),i.push(this.size.build(e,"v2")),i.push(this.blending.build(e,"f")),i.push(this.isMask.build(e,"b")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.mode.build(e,"i")),i.push(this.calpha),this.projection.value===4){let o=`${r}_writeUvs`,a=o+"0",s=o+"1",l=o+"2",u=`${r}_triplanarWeights`;e.addFragmentVariable(a,"vec2"),e.addFragmentVariable(s,"vec2"),e.addFragmentVariable(l,"vec2"),e.addFragmentVariable(u,"vec3"),i.push(a),i.push(s),i.push(l),i.push(u)}else{let o=`${r}_writeUvs`;e.addFragmentVariable(o,"vec2"),i.push(o)}return e.format(n+"("+i.join(",")+")",this.getType(e),t)}},zU=Wx;zU.Nodes=function(){let e=new at(`
vec3 cylindricalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
                vec3 posN = normalize(position);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float scaledHeight = position.y / (size.y * 0.5);
                float v =  (scaledHeight / 2.) + .5;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;

				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;
				
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}
`),t=new at(`
vec3 sphericalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
                vec3 posN = normalize(vPosition);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float v = 0.5 + asin(posN.y) / 3.1415;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;
				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}
`),r=new at(`vec3 uvTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
				vec2 uvs = ( mat * vec3( vUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;

				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				
				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}`),n=new at(`vec3 triplanarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUvs0, out vec2 writeUvs1, out vec2 writeUvs2, out vec3 writeWeights) {
				vec3 p = position;
				vec2 uv0 = (1.0 + p.xy) / 2.0;     
				vec2 uv1 = (1.0 + p.zy) / 2.0;		
				vec2 uv2 = (1.0 + p.xz) / 2.0;		
	
				uv0 = (mat * vec3((uv0 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;
				uv1 = (mat * vec3((uv1 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;
				uv2 = (mat * vec3((uv2 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;

				// Range from 3 to 128 seems to be good
				float exponent = (1.0 - blending) * 125.0 + 3.0;

				vec3 n = vObjectNormal;
				vec3 weights = abs(normalize(n));
				weights = pow(weights, vec3(exponent));
				weights /= dot(weights, vec3(1.0));

				// Write out all sets of UVs that we generated
				writeUvs0 = uv0;
				writeUvs1 = uv1;
				writeUvs2 = uv2;
				writeWeights = weights;

				// Derivatives for LOD
				vec2 df0 = fwidth(uv0);
				vec2 df1 = fwidth(uv1);
				vec2 df2 = fwidth(uv2);
				if (df0.x > 0.5) df0.x = 0.0;
				if (df1.x > 0.5) df1.x = 0.0;
				if (df2.x > 0.5) df2.x = 0.0;

				#ifdef GL_EXT_shader_texture_lod
                	vec4 tmp = 
						texture2DLodEXT(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + 
						texture2DLodEXT(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + 
						texture2DLodEXT(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;
				#else
                	vec4 tmp = 
						textureLod(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + 
						textureLod(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + 
						textureLod(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;

				// Apply cropping across all 3 planes
				if ( crop > 0.5 ) {
					if ( uv0.x < 0.0 || uv0.x > 1.0 || uv0.y < 0.0 || uv0.y > 1.0 )  {
						lalpha = 0.0;
					}
					if ( uv1.x < 0.0 || uv1.x > 1.0 || uv1.y < 0.0 || uv1.y > 1.0 )  {
						lalpha = 0.0;
					}
					if ( uv2.x < 0.0 || uv2.x > 1.0 || uv2.y < 0.0 || uv2.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;//n * 0.5 + 0.5;
			}			
			`);return{cylindrical:e,spherical:t,uv:r,triplanar:n}}();var qx=class extends mn{constructor(e,t,r,n,i,o,a,s,l,u,d,c){super("v3"),this.nodeType="Depth",this.gradientType=e,this.smooth=t,this.near=r,this.far=n,this.isVector=i,this.isWorldSpace=o,this.origin=a,this.direction=s,this.colors=l,this.steps=u,this.isMask=c,this.alpha=d,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){let r=`g${this.uuid.toString().replace(/-/g,"")}`,n=new at(`vec3 ${r}_sdepth(float near, float far, vec3 origin, vec3 direction, vec4 colors[${r}_MAX_COLORS], float steps[${r}_MAX_COLORS], bool isMask, float mask, float alpha, out float calpha) {
               vec4 color = colors[0];
               #ifdef ${r}_IS_VECTOR
                   #ifdef ${r}_LINEAR
                       #ifdef ${r}_WORLDSPACE
                       float depth = vectorLinearWorldSpaceDepth(direction, origin, near, far);
                       #else
                       float depth = vectorLinearObjectSpaceDepth(direction, origin, near, far);
                       #endif
                   #else
                       #ifdef ${r}_WORLDSPACE
                           float depth = vectorSphericalWorldSpaceDepth(origin, near, far);
                       #else
                           float depth = vectorSphericalObjectSpaceDepth(origin, near, far);
                       #endif
                   #endif
               #else
                   float dist = length(vWPosition - cameraPosition);
			       float depth = ( dist - near ) / ( far - near );
               #endif


              float p;
              #ifdef ${r}_SMOOTH
				for ( int i = 1; i < ${r}_MAX_COLORS; i++ ) {
						p = clamp( ( depth - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}
              #else
                for ( int i = 1; i < ${r}_MAX_COLORS; i++ ) {
                   p = clamp(( depth - steps[i - 1] ) / ( steps[i] - steps[i - 1] ), 0.0, 1.0);
                   color = mix(color, colors[i], p);
                 }
              #endif

               float lalpha = alpha * color.a * mask;
               calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
			   accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
			   
               return color.rgb;
			}`,[qx.Nodes.vectorLinearWorldSpaceDepth,qx.Nodes.vectorLinearObjectSpaceDepth,qx.Nodes.vectorSphericalObjectSpaceDepth,qx.Nodes.vectorSphericalWorldSpaceDepth]);if(e.isShader("fragment")){e.define(`${r}_MAX_COLORS`,this.colors.value.length),this.smooth.value&&e.define(`${r}_SMOOTH`),this.isVector.value>.5&&e.define(`${r}_IS_VECTOR`),this.gradientType.value===0&&e.define(`${r}_LINEAR`),this.isWorldSpace.value>.5&&e.define(`${r}_WORLDSPACE`),e.require("worldPosition"),e.addFragmentVariable(this.calpha,"float");let i=e.include(n),o=[];return o.push(this.near.build(e,"f")),o.push(this.far.build(e,"f")),o.push(this.origin.build(e,"v3")),o.push(this.direction.build(e,"v3")),o.push(this.colors.build(e,"v4[]")),o.push(this.steps.build(e,"f[]")),o.push(this.isMask.build(e,"b")),o.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),o.push(this.alpha.build(e,"f")),o.push(this.calpha),e.format(i+"("+o.join(",")+")",this.getType(e),t)}else return console.warn("DepthNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},sue=qx;sue.Nodes=function(){let e=new at(`float vectorLinearWorldSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(vWPosition.x - origin.x) + n.y*(vWPosition.y - origin.y) + n.z*(vWPosition.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),t=new at(`float vectorLinearObjectSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(position.x - origin.x) + n.y*(position.y - origin.y) + n.z*(position.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),r=new at(`float vectorSphericalWorldSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(vWPosition - origin);
               return ( dist - near ) / ( far - near );
            }`),n=new at(`float vectorSphericalObjectSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(position - origin);
               return ( dist - near ) / ( far - near );
            }`);return{vectorLinearWorldSpaceDepth:e,vectorLinearObjectSpaceDepth:t,vectorSphericalWorldSpaceDepth:r,vectorSphericalObjectSpaceDepth:n}}();var lxt=class extends mn{constructor(e,t,r,n,i,o,a,s){super("v3"),this.nodeType="Fresnel",this.color=e,this.bias=t,this.scale=r,this.intensity=n,this.factor=i,this.isMask=s,this.alpha=o,this.mode=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let r=new at(`vec3 fresnel(vec3 color, float bias, float scale, float intensity, float factor, bool isMask, float mask, float alpha, int mode, out float calpha) {
					float fresnel = bias + scale * pow( abs( factor + dot( normalize( vWorldViewDir ), normalize( vWNormal ) ) ), intensity );

					float lalpha = clamp(fresnel, 0.0, 1.0) * alpha * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

					return color;
				}`),n=e.include(r),i=[];return i.push(this.color.build(e,"c")),i.push(this.bias.build(e,"f")),i.push(this.scale.build(e,"f")),i.push(this.intensity.build(e,"f")),i.push(this.factor.build(e,"f")),i.push(this.isMask.build(e,"b")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.mode.build(e,"i")),i.push(this.calpha),e.format(n+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("FresnelNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},lue=class extends mn{constructor(e,t,r,n,i,o,a,s,l){super("v3"),this.nodeType="Gradient",this.gradientType=e,this.smooth=t,this.colors=r,this.steps=n,this.offset=i,this.morph=o,this.angle=a,this.isMask=l,this.alpha=s,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.define("GRAD_MAX",10),e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let r=e.include(lue.Nodes.gradient),n=[];return n.push(this.gradientType.build(e,"i")),n.push(this.smooth.build(e,"b")),n.push(this.colors.build(e,"v4[]")),n.push(this.steps.build(e,"f[]")),n.push(this.offset.build(e,"v2")),n.push(this.morph.build(e,"v2")),n.push(this.angle.build(e,"f")),n.push(this.isMask.build(e,"b")),n.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.calpha),e.format(r+"("+n.join(",")+")",this.getType(e),t)}else return console.warn("GradientNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},uue=lue;uue.Nodes=function(){return{gradient:new at(`vec3 gradient(int gradientType, bool smoothed, vec4 colors[GRAD_MAX], float steps[GRAD_MAX], vec2 offset, vec2 morph, float angle, bool isMask, float mask, float alpha, out float calpha) {
				vec4 color = colors[0];
				vec2 m = morph / vUv.xy;
				vec2 rot = vec2( 0.5 + m.x, m.y );
				vec2 dt = vec2(
					cos( angle ) * rot.x - sin( angle ) * rot.y,
					sin( angle ) * rot.x + cos( angle ) * rot.y
				);
				vec2 pt = ( vUv - 0.5 + offset ) / 2.0 + dt / 2.0;
				float t = dot( pt, dt ) / dot( dt, dt );
				if ( gradientType == 1 ) {
					t = distance (
						( vUv + morph ) * 3.0,
						( vUv + offset ) + 1.0
					) + angle;
				} else if ( gradientType == 2 ) {
					float polar = atan(
						vUv.x + morph.x - 0.5 + offset.x,
						vUv.y + morph.y - 0.5 + offset.y
					) * -1.0;
					t = fract( ( angle / PI / -2.0 ) + 0.5 * ( polar / PI ) );
				}

				float p;
				if (smoothed) {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}

				} else {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], p);
					}
				}

				float lalpha = alpha * color.a * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
				
				return color.xyz;
			}`)}}();var cue=class extends mn{constructor(e,t,r,n){super("v3"),this.nodeType="Matcap",this.texture=e,this.isMask=n,this.alpha=t,this.mode=r,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let r=e.include(cue.Nodes.matcap);e.require("normal"),e.requires.normal=!0;let n=[];return n.push(this.texture.generate(e,"t")),n.push("normal"),n.push(this.isMask.build(e,"b")),n.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.mode.build(e,"i")),n.push(this.calpha),e.format(r+"("+n.join(",")+")",this.getType(e),t)}else return console.warn("MatcapNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},due=cue;due.Nodes=function(){return{matcap:new at(`vec3 matcap(sampler2D matcapTex, vec3 normal, bool isMask, float mask, float alpha, int mode, out float calpha) {
					vec3 viewDir = normalize( vViewPosition );
					vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
					vec3 y = cross( viewDir, x );
					vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks
					vec4 matcapColor = texture2D( matcapTex, uv );

					float lalpha = alpha * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
					
					return matcapColor.rgb;
            	}`)}}();var BU=(e=>(e.SIMPLEX="simplex3d",e.SIMPLEX_FRACTAL="simplex3dFractal",e.ASHIMA="simplexAshima",e.FBM="fbm",e.PERLIN="perlin",e.VORONOI="voronoi",e))(BU||{}),ss=function(){let e=new at(`vec3 random3(vec3 c) {
			float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
			vec3 r;
			r.z = fract(512.0*j);
			j *= .125;
			r.x = fract(512.0*j);
			j *= .125;
			r.y = fract(512.0*j);
			return r-0.5;
		}`),t=new at(`float simplex3d(vec3 p) {
			 vec3 s = floor(p + dot(p, vec3(F3)));
			 vec3 x = p - s + dot(s, vec3(G3));
			 
			 vec3 e = step(vec3(0.0), x - x.yzx);
			 vec3 i1 = e*(1.0 - e.zxy);
			 vec3 i2 = 1.0 - e.zxy*(1.0 - e);
				
			 vec3 x1 = x - i1 + G3;
			 vec3 x2 = x - i2 + 2.0*G3;
			 vec3 x3 = x - 1.0 + 3.0*G3;
			 
			 vec4 w, d;
			 
			 w.x = dot(x, x);
			 w.y = dot(x1, x1);
			 w.z = dot(x2, x2);
			 w.w = dot(x3, x3);
			 
			 w = max(0.6 - w, 0.0);
			 
			 d.x = dot(random3(s), x);
			 d.y = dot(random3(s + i1), x1);
			 d.z = dot(random3(s + i2), x2);
			 d.w = dot(random3(s + 1.0), x3);
			 
			 w *= w;
			 w *= w;
			 d *= w;
			 
			 return dot(d, vec4(52.0));
		}`,[e]);t.keywords.F3=new ln("float F3 0.3333333"),t.keywords.G3=new ln("float G3 0.1666667");let r=new at(`float simplex3dFractal(vec3 m) {
			mat3 rot1 = mat3(-0.37, 0.36, 0.85,-0.14,-0.93, 0.34,0.92, 0.01,0.4);
			mat3 rot2 = mat3(-0.55,-0.39, 0.74, 0.33,-0.91,-0.24,0.77, 0.12,0.63);
			mat3 rot3 = mat3(-0.71, 0.52,-0.47,-0.08,-0.72,-0.68,-0.7,-0.45,0.56);
			return 0.5333333 * simplex3d(m * rot1)
				 + 0.2666667 * simplex3d(2.0 * m * rot2)
				 + 0.1333333 * simplex3d(4.0 * m * rot3)
				 + 0.0666667 * simplex3d(8.0 * m);
		}`,[t]),n=new at("vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}"),i=new at("vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}"),o=new at(`float simplexAshima(vec3 v) {
		  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
		  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
		  vec3 i  = floor(v + dot(v, C.yyy) );
		  vec3 x0 =   v - i + dot(i, C.xxx) ;
		  vec3 g = step(x0.yzx, x0.xyz);
		  vec3 l = 1.0 - g;
		  vec3 i1 = min( g.xyz, l.zxy );
		  vec3 i2 = max( g.xyz, l.zxy );
		  vec3 x1 = x0 - i1 + 1.0 * C.xxx;
		  vec3 x2 = x0 - i2 + 2.0 * C.xxx;
		  vec3 x3 = x0 - 1. + 3.0 * C.xxx;
		  i = mod(i, 289.0 ); 
		  vec4 p = permute( permute( permute( 
					 i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
				   + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) 
				   + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
		  float n_ = 1.0/7.0; // N=7
		  vec3  ns = n_ * D.wyz - D.xzx;
		  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)
		  vec4 x_ = floor(j * ns.z);
		  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
		  vec4 x = x_ *ns.x + ns.yyyy;
		  vec4 y = y_ *ns.x + ns.yyyy;
		  vec4 h = 1.0 - abs(x) - abs(y);
		  vec4 b0 = vec4( x.xy, y.xy );
		  vec4 b1 = vec4( x.zw, y.zw );
		  vec4 s0 = floor(b0)*2.0 + 1.0;
		  vec4 s1 = floor(b1)*2.0 + 1.0;
		  vec4 sh = -step(h, vec4(0.0));
		  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
		  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
		  vec3 p0 = vec3(a0.xy,h.x);
		  vec3 p1 = vec3(a0.zw,h.y);
		  vec3 p2 = vec3(a1.xy,h.z);
		  vec3 p3 = vec3(a1.zw,h.w);
		  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
		  p0 *= norm.x;
		  p1 *= norm.y;
		  p2 *= norm.z;
		  p3 *= norm.w;
		  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
		  m = m * m;
		  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), 
										dot(p2,x2), dot(p3,x3) ) );
		}`,[n,i]),a=new at("vec4 mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}"),s=new at("vec4 perm(vec4 x){return mod289(((x * 34.0) + 1.0) * x);}",[a]),l=new at(`float noise(vec3 p){
			vec3 a = floor(p);
			vec3 d = p - a;
			d = d * d * (3.0 - 2.0 * d);
			vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);
			vec4 k1 = perm(b.xyxy);
			vec4 k2 = perm(k1.xyxy + b.zzww);
			vec4 c = k2 + a.zzzz;
			vec4 k3 = perm(c);
			vec4 k4 = perm(c + 1.0);
			vec4 o1 = fract(k3 * (1.0 / 41.0));
			vec4 o2 = fract(k4 * (1.0 / 41.0));
			vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);
			vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);
			return o4.y * d.y + o4.x * (1.0 - d.y);
		}`,[s]),u=new at(`float fbm(vec3 x) {
			float v = 0.0;
			float a = 0.5;
			vec3 shift = vec3(100);
			for (int i = 0; i < NUM_OCTAVES; ++i) {
				v += a * noise(x);
				x = x * 2.0 + shift;
				a *= 0.5;
			}
			return v;
		}`,[l]);u.keywords.NUM_OCTAVES=new ln("int NUM_OCTAVES 5");let d=new at("vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}"),c=new at(`float perlin(vec3 P){
		  vec3 Pi0 = floor(P);
		  vec3 Pi1 = Pi0 + vec3(1.0);
		  Pi0 = mod(Pi0, 289.0);
		  Pi1 = mod(Pi1, 289.0);
		  vec3 Pf0 = fract(P);
		  vec3 Pf1 = Pf0 - vec3(1.0);
		  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
		  vec4 iy = vec4(Pi0.yy, Pi1.yy);
		  vec4 iz0 = Pi0.zzzz;
		  vec4 iz1 = Pi1.zzzz;
		  vec4 ixy = permute(permute(ix) + iy);
		  vec4 ixy0 = permute(ixy + iz0);
		  vec4 ixy1 = permute(ixy + iz1);
		  vec4 gx0 = ixy0 / 7.0;
		  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;
		  gx0 = fract(gx0);
		  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
		  vec4 sz0 = step(gz0, vec4(0.0));
		  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
		  gy0 -= sz0 * (step(0.0, gy0) - 0.5);
		  vec4 gx1 = ixy1 / 7.0;
		  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;
		  gx1 = fract(gx1);
		  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
		  vec4 sz1 = step(gz1, vec4(0.0));
		  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
		  gy1 -= sz1 * (step(0.0, gy1) - 0.5);
		  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
		  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
		  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
		  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
		  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
		  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
		  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
		  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);
		  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
		  g000 *= norm0.x;
		  g010 *= norm0.y;
		  g100 *= norm0.z;
		  g110 *= norm0.w;
		  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
		  g001 *= norm1.x;
		  g011 *= norm1.y;
		  g101 *= norm1.z;
		  g111 *= norm1.w;
		  float n000 = dot(g000, Pf0);
		  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
		  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
		  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
		  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
		  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
		  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
		  float n111 = dot(g111, Pf1);
		  vec3 fade_xyz = fade(Pf0);
		  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
		  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
		  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 
		  return 2.2 * n_xyz;
		}`,[n,i,d]),h=new at(`float hashwithoutsine13(vec3 p3)
		{
			p3  = fract(p3 * .1031);
			p3 += dot(p3, p3.yzx + 33.33);
			return fract((p3.x + p3.y) * p3.z);
		}`),f=new at(`vec3 hashwithoutsine33(vec3 p3)
		{
			p3 = fract(p3 * vec3(.1031, .1030, .0973));
			p3 += dot(p3, p3.yxz+33.33);
			return fract((p3.xxy + p3.yxx)*p3.zyx);
		}`),m=new at(`float metric(in vec3 p)
		{
			// L2 
			return length(p);

			// Chebyshev 
			// vec3 a = abs(p);
			// return max(a.x, max(a.y, a.z));
		}`),p=new at(`float smin( float a, float b, float k )
		{
			float h = smoothstep(0.0, 1.0, 0.5 + 0.5 * (b - a) / k);
			float correction = k * h * (1.0 - h);
			return mix(b, a, h) - correction;
		}`),g=new at(`float smax( float a, float b, float k )
		{
			float h = smoothstep(1.0, 0.0, 0.5 + 0.5 * (a - b) / k);
			float correction = k * h * (1.0 - h);
			return mix(a, b, h) + correction;
		}`),v=new at(`float remap(float value, float input_min, float input_max, float output_min, float output_max) {
			// Compute width of each interval
			float input_width = input_max - input_min;
			float output_width = output_max - output_min;
		
			// Convert input range into a 0-1 range 
			float scaled = (value - input_min) / input_width;
		
			// Convert the 0-1 range into a value in output range
			return output_min + (scaled * output_width);
		}`),b=new at(`float voronoi(in vec3 x, in int style, in float smoothness, in float seed, in int quality) 
		{
			// Integer and fractional parts of this point's coordinates
			ivec3 p = ivec3(floor(x));
			vec3 f = fract(x);

			// Different variables that we will use to construct noise:
			//
			// f1: distance to the closest feature point
			// f2: distance to the second closest feature point
			// e: distance to the closest edge (cell boundary)
			//
			// We also compute "smooth" versions of all of the above quantites, essentially
			// replacing "hard" minimums with "smooth" minimums (described by IQ)
			float f1_smooth = 8.0;
			float f1 = 8.0;
			float f2_smooth = 8.0;
			float f2 = 8.0;
			float e_smooth = 8.0;
			float e = 8.0;

			// Variables stored from closest cell
			ivec3 mb;
			vec3 mr; 

			int steps = quality;
			
			for (int x = -steps; x <= steps; x++) 
			for (int y = -steps; y <= steps; y++)
			for (int z = -steps; z <= steps; z++)
			{
				ivec3 b = ivec3(x, y, z);
				vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
				float d = length(r);
				
				f1_smooth = smin(d, f1_smooth, smoothness);

				// Store un-smoothed distances too 
				if (d < f1) 
				{
					f2 = f1;
					f1 = d;

					mb = ivec3(x, y, z);
					mr = r;
				} 
				else if (d < f2) 
				{
					f2 = d;
				}
			}	
			
			float id = hashwithoutsine13(vec3(p + mb) + seed);

			// Second pass for edge distance  
			for (int x = -steps; x <= steps; x++) 
			for (int y = -steps; y <= steps; y++)
			for (int z = -steps; z <= steps; z++)
			{
				// Start search at the cell that contains the closest point to "x" (found in 1st pass)
				ivec3 b = mb + ivec3(x, y, z);
				vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
				float d1 = dot(0.5 * (mr + r), (r - mr)); 				// IQ normalizes "r - mr" but that breaks things for the smooth version?
				float d2 = dot(0.5 * (mr + r), normalize(r - mr));

				e_smooth = smin(d1, e_smooth, smoothness);

				e = min(e, d2);

				// Also compute a smooth version of F2 in this pass
				{
					ivec3 b = ivec3(x, y, z);
					if (b != mb) 
					{
						vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
						float d = length(r);

						f2_smooth = smin(d, f2_smooth, smoothness);
					}
				}
			}

			// Different visualization modes 
			if (style == 0) 
			{
				return f1_smooth;
			}
			if (style == 1) 
			{
				return f2_smooth;
			}
			if (style == 2) 
			{
				return f2_smooth - f1_smooth;
				
				// "Pebbles" also cool
				//return step(0.2, f2_smooth - f1_smooth);
			}
			if (style == 3) 
			{
				// This one is really good for rock / stone effects
				float a = f1; 
				float b = f2;
				float k = 3.0;
				float h = max(k - abs(a - b), 0.0) / k;
				float final = min(a, b) - h * h * k * (1.0 / 4.0);
				return final;
			}
			if (style == 4) 
			{
				// Some random adjustments to make this style stand out more 
				return exp(5.0 * e_smooth);
			}
			if (style == 5) 
			{
				return pow(f1_smooth, 3.0);
			}
			if (style == 6) 
			{				
				const float eps = 0.0125;

				// Thicker lines as the user increases the smoothness slider
				float thickness = smoothness * 0.25 + eps;

				// Blurrier lines as the user increases the smoothness slider
				float blur = pow(smoothness, 3.0) * 0.25 + eps;

				return smoothstep(
					thickness - thickness * blur, 
					thickness + thickness * blur, 
					e
				);
			}
			if (style == 7) 
			{
				return hashwithoutsine13(vec3(p + mb) + seed);
			}
		}
	`,[h,f,m,p,g,v]);return{simplex:t,simplexFractal:r,simplexAshima:o,fbm:u,perlin:c,voronoi:b}}(),hue=class extends mn{constructor(e,t,r,n,i,o,a,s,l,u,d,c,h,f,m,p,g,v,b){super("v3"),this.nodeType="Noise",this.scale=e,this.size=t,this.move=r,this.fA=n,this.fB=i,this.distortion=o,this.colorA=a,this.colorB=s,this.colorC=l,this.colorD=u,this.noiseType=c,this.voronoiStyle=f,this.highCut=m,this.lowCut=p,this.smoothness=g,this.seed=v,this.quality=b,this.isMask=h,this.alpha=d,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t,r,n,i){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let o=Object.values(BU)[this.noiseType.value],a=o=="voronoi"?`
		float v = ${o}(st + move, voronoiStyle, smoothness, seed, quality);

		// Apply clipping to colors
		v = remap(v, lowCut, highCut, 0.0, 1.0);
		v = smax(v, 0.0, smoothness * 0.25);
		v = smin(v, 1.0, smoothness * 0.25);

		// Note that the voronoi mode only uses colors "A" and "C" from the UI 
		vec4 color = mix(colorA, colorC, v); 
		`:`
		vec3 q = vec3(${o}(st),
					   ${o}(st + vec3(1.0)),
					   ${o}(st + vec3(1.0)));
		vec3 r = vec3(${o}(st + vec3(distortion, 1.0) * q + vec3(fA, 1.0) + move),
					  ${o}(st + vec3(distortion, 1.0) * q + vec3(fB, 1.0) + move), 
					  ${o}(st * q));
		float f = ${o}(st + r);
		vec4 color;
		color = mix(colorA, colorB, clamp((f * f) * 4.0, 0.0, 1.0));
		color = mix(color, colorC, clamp(length(q), 0.0, 1.0));
		color = mix(color, colorD, clamp(length(r.x), 0.0, 1.0));
		`,s=new at(`vec3 ${o}customNoise(float scale, vec3 size, float move, vec2 fA, vec2 fB, vec2 distortion, vec4 colorA, vec4 colorB, vec4 colorC, vec4 colorD, int voronoiStyle, float highCut, float lowCut, float smoothness, float seed, int quality, bool isMask, float mask, float alpha, out float calpha) 
			{
                // Prevent scale of zero 
				scale = max(abs(scale), 0.001);

				vec3 st = position / size;
				st /= scale;

				${a}

				float lalpha = alpha * color.a * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return clamp(color, 0.0, 1.0).rgb;
			}`,[ss.simplex,ss.simplexFractal,ss.simplexAshima,ss.fbm,ss.perlin,ss.voronoi]),l=e.include(s),u=[];return u.push(this.scale.build(e,"f")),u.push(this.size.build(e,"v3")),u.push(this.move.build(e,"f")),u.push(this.fA.build(e,"v2")),u.push(this.fB.build(e,"v2")),u.push(this.distortion.build(e,"v2")),u.push(this.colorA.build(e,"v4")),u.push(this.colorB.build(e,"v4")),u.push(this.colorC.build(e,"v4")),u.push(this.colorD.build(e,"v4")),u.push(this.voronoiStyle.build(e,"i")),u.push(this.highCut.build(e,"f")),u.push(this.lowCut.build(e,"f")),u.push(this.smoothness.build(e,"f")),u.push(this.seed.build(e,"f")),u.push(this.quality.build(e,"i")),u.push(this.isMask.build(e,"b")),u.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),u.push(this.alpha.build(e,"f")),u.push(this.calpha),e.format(l+"("+u.join(",")+")",this.getType(e),t)}};hue.numOctaves=5;var fue=class extends mn{constructor(e,t,r,n,i,o,a,s,l,u,d,c,h,f,m,p){super("v3"),this.nodeType="Outline",this.firstTime=!0,this.outlineColor=e,this.contourColor=t,this.outlineWidth=r,this.contourWidth=n,this.contourThreshold=i,this.outlineThreshold=o,this.contourFrequency=a,this.outlineSmoothing=s,this.contourDirection=l,this.positionalLines=u,this.compensation=d,this.resolution=c,this.normalMap=h,this.depthMap=f,this.pixelRatio=m,this.alpha=p,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){let r=`g${this.uuid.toString().replace(/-/g,"")}`;if(e.require("vWorldViewDir"),e.require("worldNormal"),e.extensions.derivatives=!0,this.compensation.value&&e.define("OUTLINE_COMPENSATION",`${r}_offset`),this.firstTime){let n=this.outlineWidth.build(e,"f"),i=this.resolution.build(e,"v2"),o=this.compensation.build(e,"b"),a=this.pixelRatio.build(e,"f");e.addVertexParsVariable("randomColor","attribute vec3"),e.addVertexParsVariable("extrudeNormal","attribute vec3"),e.addVertexParsVariable(n,"uniform float"),e.addVertexParsVariable(i,"uniform vec2"),e.addVertexParsVariable(o,"uniform bool"),e.addVertexParsVariable(a,"uniform float"),e.addVertexParsVariable("vID","flat out float"),e.addFragmentParsVariable("vID","flat in float"),e.addVertexFinalCode(`
                vID = randomColor.r;
                vec2 ${r}_offset = vec2(0.0);
                if (${o}) {
                    vec4 ${r}_clipPosition = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));
                    // NOTE: For certain shapes, like spheres, we get incorrect extrusion when the
                    // normals face the camera directly. So we hackily fix this by offsetting the normal
                    // by a tiny amount.
                    vec3 ${r}_clipNormal = mat3(projectionMatrix) * (mat3(modelViewMatrix) * extrudeNormal) + 0.0000001;
                    ${r}_offset = normalize(${r}_clipNormal.xy) / ${i} * (${n} / 2.0) * ${r}_clipPosition.w * 2.0 * ${a};
                    ${r}_clipPosition.xy += ${r}_offset;
                    // TODO(MAX): To handle multiple outline layers, we only want to extrude
                    // if this offset is the biggest of all the potential offsets
                    gl_Position = ${r}_clipPosition;
                }
            `)}if(e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let n=e.include(fue.Nodes.outline),i=[];return i.push(this.outlineColor.build(e,"c")),i.push(this.contourColor.build(e,"c")),i.push(this.outlineWidth.build(e,"f")),i.push(this.contourWidth.build(e,"f")),i.push(this.contourThreshold.build(e,"f")),i.push(this.outlineThreshold.build(e,"f")),i.push(this.contourFrequency.build(e,"f")),i.push(this.outlineSmoothing.build(e,"f")),i.push(this.contourDirection.build(e,"v3")),i.push(this.positionalLines.build(e,"b")),i.push(this.resolution.build(e,"v2")),i.push(this.normalMap.getTexture(e,"t")),i.push(this.depthMap.getTexture(e,"t")),i.push(this.pixelRatio.build(e,"f")),i.push(this.compensation.build(e,"b")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),this.firstTime=!this.firstTime,e.format(n+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("OutlineNode is not compatible with "+e.shader+" shader."),""}},pue=fue;pue.Nodes=function(){let e=new at(`
float sobelSample(sampler2D t, sampler2D d, vec2 uv, vec2 resolution, float outlineWidth, float pixelRatio)
{
    vec2 halton = haltonSequence[frameIndex];
    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
    float temporalAngle  = temporalOffset * PI2;

    vec2 texelSize = (vec2(1.0) / resolution);
    vec2 offsetSize = texelSize * outlineWidth * pixelRatio;

    vec2 uvSamples[9];
    vec4 normalSamples[9];

	uvSamples[0] = uv + vec2( -offsetSize.x, -offsetSize.y) + (vogelDiskSample(0, 9, temporalAngle) * texelSize);
	uvSamples[1] = uv + vec2(0.0, -offsetSize.y) + (vogelDiskSample(1, 9, temporalAngle) * texelSize);
	uvSamples[2] = uv + vec2(  offsetSize.x, -offsetSize.y) + (vogelDiskSample(2, 9, temporalAngle) * texelSize);
	uvSamples[3] = uv + vec2( -offsetSize.x, 0.0) + (vogelDiskSample(3, 9, temporalAngle) * texelSize);
	uvSamples[4] = uv;
	uvSamples[5] = uv + vec2(  offsetSize.x, 0.0) + (vogelDiskSample(5, 9, temporalAngle) * texelSize);
	uvSamples[6] = uv + vec2( -offsetSize.x, offsetSize.y) + (vogelDiskSample(6, 9, temporalAngle) * texelSize);
	uvSamples[7] = uv + vec2(0.0, offsetSize.y) + (vogelDiskSample(7, 9, temporalAngle) * texelSize);
	uvSamples[8] = uv + vec2(  offsetSize.x, offsetSize.y) + (vogelDiskSample(8, 9, temporalAngle) * texelSize);


    normalSamples[0] = texture2D(t, uvSamples[0]);
    normalSamples[1] = texture2D(t, uvSamples[1]);
    normalSamples[2] = texture2D(t, uvSamples[2]);
    normalSamples[3] = texture2D(t, uvSamples[3]);
    normalSamples[4] = texture2D(t, uvSamples[4]);
    normalSamples[5] = texture2D(t, uvSamples[5]);
    normalSamples[6] = texture2D(t, uvSamples[6]);
    normalSamples[7] = texture2D(t, uvSamples[7]);
    normalSamples[8] = texture2D(t, uvSamples[8]);

    float depthBias = 0.0001;
    // TODO(MAX): Can we somehow reduce the number of conditionals here with MATH?!
    if (normalSamples[0].a != vID && normalSamples[0].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[0]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[1].a != vID && normalSamples[1].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[1]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[2].a != vID && normalSamples[2].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[2]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[3].a != vID && normalSamples[3].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[3]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }


    if (normalSamples[4].a != vID && normalSamples[4].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[4]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[5].a != vID && normalSamples[5].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[5]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[6].a != vID && normalSamples[6].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[6]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[7].a != vID && normalSamples[7].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[7]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[8].a != vID && normalSamples[8].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[8]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    vec3 sobel_edge_h = normalSamples[2].rgb + (2.0*normalSamples[5].rgb) + normalSamples[8].rgb - (normalSamples[0].rgb + (2.0*normalSamples[3].rgb) + normalSamples[6].rgb);
  	vec3 sobel_edge_v = normalSamples[0].rgb + (2.0*normalSamples[1].rgb) + normalSamples[2].rgb - (normalSamples[6].rgb + (2.0*normalSamples[7].rgb) + normalSamples[8].rgb);

    float edgeNormal = sqrt(dot(sobel_edge_h, sobel_edge_h) + dot(sobel_edge_v, sobel_edge_v));
    return edgeNormal;
}
`);return{outline:new at(`vec3 outline(vec3 outlineColor, vec3 contourColor, float outlineWidth, float contourWidth, float outlineThreshold, float contourThreshold, float outlineSmoothing, float contourFrequency, vec3 contourDirection, bool positionalLines, vec2 resolution, sampler2D normalMap, sampler2D depthMap, float pixelRatio, bool compensation, float mask, float alpha, out float calpha) {
                vec3 result = outlineColor;
                float resultAlpha = 0.0;

                vec3 N = normalize(vWNormal);
                vec2 nuv = (gl_FragCoord.xy / resolution);
                float sobelSample = compensation ? sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth / 2., pixelRatio) : sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth, pixelRatio);
                resultAlpha = smoothstep(outlineThreshold - outlineSmoothing, outlineThreshold + outlineSmoothing, sobelSample);

                //resultAlpha = 1.0;
                //result = vec3(sobelSample);

                float t = 1.0 - contourThreshold;
                if(positionalLines) {
                    vec3 NDir = position * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float f  = fract(NT * contourFrequency * 0.01);
                    float df = fwidth(NT * contourFrequency);

                    float g = smoothstep(df * (contourWidth * 0.01), df * (contourWidth * 0.01 * 2.0), f);
                    if (g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0;
                    }
                 }
                 else {
                    vec3 NDir = N * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float df = fwidth(NT * contourThreshold);
                    float f = sin(NT * 1.0 * contourFrequency);
                    float g = smoothstep(0.0, df * contourWidth, 1.0 - f);

                    if (df > (t * 0.5) && g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0 - g;
                    }
                 }

                 float lalpha = alpha * resultAlpha * mask;
                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				 
                 return result;
             }`,[e])}}();var Md=class extends mn{constructor(e,t,r,n,i,o,a,s,l,u,d,c,h,f,m,p,g,v){super("v3"),this.nodeType="Pattern",this.style=e,this.projection=t,this.axis=r,this.blending=n,this.offset=i,this.colorA=o,this.colorB=a,this.frequency=s,this.size=l,this.variation=u,this.smoothness=d,this.zigzag=c,this.rotation=h,this.vertical=f,this.horizontal=m,this.sides=p,this.isMask=v,this.alpha=g,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.require("position"),e.require("uv"),e.requires.uv=[!0],e.require("normal"),e.requires.normal=!0,e.addFragmentVariable(this.calpha,"float");let r;switch(this.style.value){case 0:r="circle";break;case 1:r="ring";break;case 2:r="polygon";break;case 3:r="xcross";break;case 4:r="diamond";break;case 5:r="checkerboard";break;case 6:r="line";break;case 7:r="wave";break;default:r="circle";break}let n=`g${this.uuid.toString().replace(/-/g,"")}`,i=new at(`float hashwithoutsine12(vec2 p)
				{
					vec3 p3 = fract(vec3(p.xyx) * .1031);
					p3 += dot(p3, p3.yzx + 33.33);
					return fract((p3.x + p3.y) * p3.z);
				}`),o=new at(`vec2 rotate_uv(in vec2 uv, float a, bool repeat) 
				{
					const float mid = 0.5;
					float radians = a * (PI / 180.0);
					vec2 rotated = vec2(
						cos(radians) * (uv.x - mid) + sin(radians) * (uv.y - mid) + mid,
						cos(radians) * (uv.y - mid) - sin(radians) * (uv.x - mid) + mid
					);
					return repeat ? fract(rotated): rotated;
				}`),a="";if(this.projection.value===4){let d=this.style.value===2?`${r}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${r}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,c=this.style.value===2?`${r}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${r}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,h=this.style.value===2?`${r}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${r}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation)`;a=`
				vec3 p = position;
				float factor = 0.0125;
				vec2 uv0 = fract(p.xy * factor);
				vec2 uv1 = fract(p.zy * factor);
				vec2 uv2 = fract(p.xz * factor);
				
				uv0 = rotate_uv(uv0 + offset, rotation, true);
				uv1 = rotate_uv(uv1 + offset, rotation, true);
				uv2 = rotate_uv(uv2 + offset, rotation, true);
	
				float d0 = ${d};
				float d1 = ${c};
				float d2 = ${h};
				
				// Range from 3 to 128 seems to be good
				float exponent = (1.0 - blending) * 125.0 + 3.0;

				vec3 n = vObjectNormal;
				vec3 weights = abs(normalize(n));
				weights = pow(weights, vec3(exponent));
				weights /= dot(weights, vec3(1.0));
				d0 *= weights.z;
				d1 *= weights.x;
				d2 *= weights.y;
				float draw = d0 + d1 + d2;
	
				vec2 custom_uv = uv0 * weights.z + uv1 * weights.x + uv2 * weights.y;
				`}else{let d=this.style.value===2?`${r}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${r}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,c="";this.axis.value===0?c=`float radius = length(p);
					float theta = atan(p.y, p.z);
					float phi = acos(p.x / radius);`:this.axis.value===1?c=`float radius = length(p);
					float theta = atan(p.x, p.z);
					float phi = acos(p.y / radius);`:(this.axis.value,c=`float radius = length(p);
					float theta = atan(p.y, p.x);
					float phi = acos(p.z / radius);`);let h="";switch(this.projection.value){case 0:h="custom_uv = vUv.st;";break;case 1:break;case 2:h=`
							vec3 p = position;
							${c}
							custom_uv = vec2(theta, phi);
							custom_uv /= PI;
							`;break}a=`
				vec2 custom_uv;
				${h}
	
				custom_uv += offset;
				custom_uv = fract(custom_uv);
				custom_uv = rotate_uv(custom_uv, rotation, true);
	
				float draw = ${d};
				`}let s=new at(`vec3 ${n}_pattern(vec3 normal, float blending, int style, vec2 offset, vec4 colorA, vec4 colorB, vec2 frequency, float size, float variation, float smoothness, float zigzag, float rotation, vec2 vertical, vec2 horizontal, int sides, bool isMask, float mask, float alpha, out float calpha) {
					const float TWO_PI = PI * 2.0;
					float smoothness_remapped = pow(smoothness, 5.0);	

					${a}

					// Construct final output color
					vec4 color = mix(colorA, colorB, draw);
					color.a = clamp(color.a, 0.0, 1.0);

					// Apply cuts
					color.a *= 
						step(vertical.x, custom_uv.y) * 
						step(custom_uv.y, vertical.y);
					color.a *= 
						step(horizontal.x, abs(custom_uv.x)) * 
						step(abs(custom_uv.x), horizontal.y);

					// Accumulate alpha 
					float lalpha = alpha * clamp(color.a, 0.0, 1.0) * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

					return clamp(color, 0.0, 1.0).rgb;
				}`,[o,i,Md.DrawFunctions.circle,Md.DrawFunctions.ring,Md.DrawFunctions.polygon,Md.DrawFunctions.cross,Md.DrawFunctions.diamond,Md.DrawFunctions.checkerboard,Md.DrawFunctions.line,Md.DrawFunctions.wave]),l=e.include(s),u=[];return u.push("normal"),u.push(this.blending.build(e,"f")),u.push(this.style.build(e,"i")),u.push(this.offset.build(e,"v2")),u.push(this.colorA.build(e,"v4")),u.push(this.colorB.build(e,"v4")),u.push(this.frequency.build(e,"v2")),u.push(this.size.build(e,"f")),u.push(this.variation.build(e,"f")),u.push(this.smoothness.build(e,"f")),u.push(this.zigzag.build(e,"f")),u.push(this.rotation.build(e,"f")),u.push(this.vertical.build(e,"v2")),u.push(this.horizontal.build(e,"v2")),u.push(this.sides.build(e,"i")),u.push(this.isMask.build(e,"b")),u.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),u.push(this.alpha.build(e,"f")),u.push(this.calpha),e.format(l+"("+u.join(",")+")",this.getType(e),t)}else return console.warn("PatterNode is not compatible with "+e.shader+" shader."),e.format("vec3(0.0)",this.getType(e),t)}},mue=Md;mue.DrawFunctions=function(){let e=new at(`float hashwithoutsine12(vec2 p) {
				vec3 p3 = fract(vec3(p.xyx) * 0.1031);
				p3 += dot(p3, p3.yzx + 33.33);
				return fract((p3.x + p3.y) * p3.z);
			}`),t=new at(`vec2 tile_and_center(in vec2 uv, in vec2 frequency, in float variation, in float zigzag, in float rotation) {
                // Create tiles in UV-space
                uv *= frequency;

                // Integer coords
                vec2 i = floor(uv);

                // Offset every other row based on zigzag param, then compute fractional coords
                float row_offset = mod(i.y, 2.0);
                uv.x += row_offset * zigzag;
                vec2 f = fract(uv);

				// Rotate the tile itself:
				// const float mid = 0.5;
				// f = vec2(
				// 	cos(rotation) * (f.x - mid) + sin(rotation) * (f.y - mid) + mid,
				// 	cos(rotation) * (f.y - mid) - sin(rotation) * (f.x - mid) + mid
				// );
				// f = fract(f);

                f = f * 2.0 - 1.0;

				// Recompute integer coords after shifting - then, random value per tile 
				i = floor(uv);
				float rand = (hashwithoutsine12(i) * 5.0 + 1.0);
				float jitter = mix(1.0, rand, variation);
				f *= jitter;

                return f;
            }`,[e]),r=new at(`float circle(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(
                    -smoothness, 
                     smoothness, 
                     length(f) - size
                );
            }`,[t]),n=new at(`float ring(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);

				float d = length(f);
                const float inner_width = 0.5;

                float outer = smoothstep(-smoothness, smoothness, d - size);
                float inner = smoothstep(-smoothness, smoothness, d - size * inner_width);
				return outer + (1.0 - inner);   
            }`,[t]),i=new at(`float sdf_ngon(in vec2 p, in float r, in int n) {
                float an = (PI * 2.0) / float(n);
                float he = r * tan(0.5 * an);
                
                // Rotate to first sector
                p = -p.yx; 
                float bn = an * floor((atan(p.y, p.x) + 0.5 * an) / an);
                vec2  cs = vec2(cos(bn), sin(bn));
                p = mat2(cs.x, -cs.y, cs.y, cs.x)*p;
            
                // Side of polygon
                return length(p - vec2(r, clamp(p.y, -he, he))) * sign(p.x - r);
            }
            
            float polygon(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation, in int sides) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(-smoothness, smoothness, sdf_ngon(f, size, sides));
            }`,[t]),o=new at(`float sdf_cross(in vec2 p, in vec2 b, float r ) {
                p = abs(p); 
				p = (p.y > p.x) ? p.yx : p.xy;
                vec2  q = p - b;
                float k = max(q.y, q.x);
                vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);
                return sign(k) * length(max(w, 0.0)) + r;
            }
            
            // Avoid namespace conflicts 
            float xcross(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(-smoothness, smoothness, sdf_cross(f, vec2(size, size * 0.25), smoothness));
            }`,[t]),a=new at(`float ndot(vec2 a, vec2 b) { 
                return a.x*b.x - a.y*b.y; 
            }
            
            float sdf_diamond(in vec2 p, in vec2 b) {
                p = abs(p);
                float h = clamp(ndot(b - 2.0 * p, b) / dot(b, b), -1.0, 1.0);
                float d = length(p - 0.5 * b * vec2(1.0 - h, 1.0 + h));
                return d * sign(p.x * b.y + p.y * b.x - b.x * b.y);
            }

            float diamond(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
	            return smoothstep(-smoothness, smoothness, sdf_diamond(f, vec2(size)));
            }`,[t]),s=new at(`float checkerboard(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                uv *= frequency;
                vec2 i = floor(uv);

                float offset = mod(i.y, 2.0);

                uv.x += offset + zigzag * offset;
                float x = floor(uv.x);
                
                return mod(x, 2.0);
            }`),l=new at(`float line(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, 0.0, zigzag, rotation);
				
				// Different approach for variation param here
				float row = floor(uv * frequency).y;
				float rand = hashwithoutsine12(vec2(row));
				float s = mix(size, size * rand, variation);

				return smoothstep(
					s - smoothness, 
					s + smoothness, 
					abs(f.y)
				);
            }`,[t]),u=new at(`// Uses bisection 
            float udf_cos(in vec2 p, in float a, in float b, in float c, in float d) {
                // Convert all data to a primitive cosine wave
                p = c * (p - vec2(d, a));
                
                const float TWO_PI = PI * 2.0;

                // Reduce to principal half cycle
                p.x = mod(p.x, TWO_PI); 
                if (p.x > PI) {
                    p.x = TWO_PI - p.x;
                }
            
                // Find zero of derivative (minimize distance)
                float xa = 0.0;
                float xb = TWO_PI;

                // 24 bit precision
                for (int i = 0; i < 24; i++) {
                    float x = 0.5 * (xa + xb);
                    float y = x - p.x + b * c * sin(x) * (p.y - b * c * cos(x));
                    if (y < 0.0) xa = x; 
                    else xb = x;
                }
                float x = 0.5 * (xa + xb);
                
                // Compute distance    
                vec2 q = vec2(x, b * c * cos(x));
                return length(p - q) / c;
            }

            float wave(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                float repeat = frequency.x;
                uv *= repeat;
                vec2 i = floor(uv);
                float row_offset = mod(i.y, 2.0);
                uv.x += row_offset * zigzag;
                vec2 f = vec2(uv.x, fract(uv.y));

                // Generalized cosine: y(x) = a + b * cos(cx + d)
                const float amplitude = 0.125;
                float wave_frequency = frequency.y * 0.1;
                float distance_estimate = udf_cos(f, 0.50, amplitude, wave_frequency * (2.0 * PI), 0.0);

				// Different approach for variation param here
				float rand = hashwithoutsine12(vec2(i.y));
				float s = mix(size, size * rand, variation);

                return smoothstep(-smoothness, smoothness, distance_estimate - s * 0.5);
            }`);return{tileAndCenter:t,circle:r,ring:n,polygon:i,cross:o,diamond:a,checkerboard:s,line:l,wave:u}}();var gue=class extends mn{constructor(e,t,r,n,i,o,a,s){super("v3"),this.nodeType="Rainbow",this.filmThickness=e,this.movement=t,this.wavelengths=r,this.noiseStrength=n,this.noiseScale=i,this.offset=o,this.isMask=s,this.alpha=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let r=e.include(gue.Nodes.rainbow),n=[];return n.push(this.filmThickness.build(e,"f")),n.push(this.movement.build(e,"f")),n.push(this.wavelengths.build(e,"v3")),n.push(this.noiseStrength.build(e,"f")),n.push(this.noiseScale.build(e,"f")),n.push(this.offset.build(e,"v3")),n.push(this.isMask.build(e,"b")),n.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.calpha),e.format(r+"("+n.join(",")+")",this.getType(e),t)}else return console.warn("RainbowNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},vue=gue;vue.Nodes=function(){let e=new at(`vec3 attenuation(vec3 wavelengths, float filmThickness, float movement, float noiseStrength, float noiseScale, vec3 offset) {
                 vec3 st = position / noiseScale;
				 vec3 q = vec3(simplex3d(st),
							  simplex3d(st + vec3(1.0)),
							  simplex3d(st + vec3(1.0)));

				 vec3 r = vec3(simplex3d(st + vec3(1.4, 1.3, 1.0) * q + vec3(1.7, 9.2, 1.0)),
							  simplex3d(st + vec3(2.0, 1.2, 1.0) * q + vec3(8.3, 2.8, 1.0)),
							  simplex3d(st * q));

                 float noise = simplex3d(st + r);

                 return .5 + .5 * cos((((filmThickness + (noise * noiseStrength)) / (vec3(wavelengths.r * 1.0, wavelengths.g * 0.8, wavelengths.b * 0.6) + 1.0)) * dot(normalize(vWorldViewDir + (offset * -0.001)), normalize(vWNormal))) + movement);
             }`,[ss.simplex]);return{rainbow:new at(`vec3 rainbow(float filmThickness, float movement, vec3 wavelengths, float noiseStrength, float noiseScale, vec3 offset, bool isMask, float mask, float alpha, out float calpha) {
				vec3 res = clamp(attenuation(wavelengths, filmThickness, movement, noiseStrength, noiseScale, offset), 0.0, 2.0);

				float rainbowContribution = clamp(res.r + res.g + res.b, 0.0, 1.0);

				float lalpha = alpha * rainbowContribution * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return res;
             }`,[e])}}();var yue=class extends mn{constructor(e,t,r,n,i,o,a,s,l,u){super("v3"),this.nodeType="Toon",this.positioning=e,this.colors=t,this.steps=r,this.source=n,this.isWorldSpace=i,this.noiseStrength=o,this.noiseScale=a,this.shadowColor=s,this.offset=l,this.alpha=u,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("worldNormal"),e.require("worldPosition"),e.isShader("fragment")){e.define("COLORS_MAX",10),e.addFragmentVariable(this.calpha,"float");let r=e.include(yue.Nodes.toon),n=[];return n.push(this.positioning.build(e,"i")),n.push(this.colors.build(e,"v4[]")),n.push(this.steps.build(e,"f[]")),n.push(this.source.build(e,"v3")),n.push(this.isWorldSpace.build(e,"b")),n.push(this.noiseStrength.build(e,"f")),n.push(this.noiseScale.build(e,"f")),n.push(this.shadowColor.build(e,"v4")),n.push(this.offset.build(e,"v3")),n.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.calpha),e.format(r+"("+n.join(",")+")",this.getType(e),t)}else return console.warn("ToonNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},bue=yue;bue.Nodes=function(){let e=new at(`float rand(float n) {
				return fract(sin(n) * 43758.5453123);
			}`),t=new at(`float hash1(float p) { 
				p = fract(p * 0.011); 
				p *= p + 7.5; 
				p *= p + p; 
				return fract(p); 
			}`),r=new at(`float valueNoise(vec3 x) {
				const vec3 step = vec3(110, 241, 171);
			
				vec3 i = floor(x);
				vec3 f = fract(x);
			 
				// For performance, compute the base input to a 1D hash from the integer part of the argument and the 
				// incremental change to the 1D based on the 3D -> 1D wrapping
				float n = dot(i, step);
			
				vec3 u = f * f * (3.0 - 2.0 * f);
				return mix(mix(mix( hash1(n + dot(step, vec3(0, 0, 0))), hash1(n + dot(step, vec3(1, 0, 0))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 0))), hash1(n + dot(step, vec3(1, 1, 0))), u.x), u.y),
						   mix(mix( hash1(n + dot(step, vec3(0, 0, 1))), hash1(n + dot(step, vec3(1, 0, 1))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 1))), hash1(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);
			}`,[t]),n=new at(`vec3 hash3(vec3 x) {
				x = vec3(dot(x,vec3(127.1, 311.7, 74.7)),
						 dot(x,vec3(269.5, 183.3, 246.1)),
						 dot(x,vec3(113.5, 271.9, 124.6)));
			
				return fract(sin(x)*43758.5453123);
			}`),i=new at(`vec3 voronoiNoise(in vec3 x)
			{
				vec3 p = floor(x);
				vec3 f = fract(x);

				float id = 0.0;
				vec2 res = vec2(100.0);

				for(int k=-1; k<=1; k++)
				for(int j=-1; j<=1; j++)
				for(int i=-1; i<=1; i++)
				{
					vec3 b = vec3(float(i), float(j), float(k));

					// Comment out the "+ hash(p + b);" part below to get "square" cells
					vec3 r = vec3(b) - f + hash3(p + b);
					float d = dot(r, r);

					if (d < res.x)
					{
						id = dot(p + b, vec3(1.0, 57.0, 113.0));
						res = vec2(d, res.x);			
					}
					else if (d < res.y)
					{
						res.y = d;
					}
				}

				return vec3(sqrt(res), abs(id));
			}
			`,[n]);return{toon:new at(`vec3 toon(int positioning, vec4 colors[COLORS_MAX], float steps[COLORS_MAX], vec3 source, bool isWorldSpace, float noiseStrength, float noiseScale, vec4 shadowColor, vec3 offset, float mask, float alpha, out float calpha) {
				float t = 0.0;
				float shadow = 1.0;

				if (positioning == 0) {

					// Can't do this mode if lighting is "none"
					#if (defined(PHONG) || defined(LAMBERT) || defined(STANDARD))

						// Algorithm from Chapter 10 of Graphics Shaders
						const vec3 weights = vec3(0.2125, 0.7154, 0.0721);
						vec3 lpos;
						vec3 l;
						float dproduct;

						#if (NUM_POINT_LIGHTS > 0)

							#if defined(USE_SHADOWMAP) && (NUM_POINT_LIGHT_SHADOWS > 0)
								PointLightShadow pointLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_POINT_LIGHTS; i++) {
								// Light positions are in view-space for some reason?
								lpos = (inverse(viewMatrix) * vec4(pointLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								
								// TODO: we want to use "intensity" but it isn't available in the shader code
								//dproduct += dot(pointLights[UNROLLED_LOOP_INDEX].color, weights);

								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS)
									pointLightShadow = pointLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getPointShadow( 
											pointShadowMap[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowMapSize, 
											pointLightShadow.shadowBias, 
											pointLightShadow.shadowRadius,
											vPointShadowCoord[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowCameraNear, 
											pointLightShadow.shadowCameraFar);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_DIR_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_DIR_LIGHT_SHADOWS > 0)
								DirectionalLightShadow directionalLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_DIR_LIGHTS; i++) {
								// Use the direction vector for directional lights instead
								l = (inverse(viewMatrix) * vec4(directionalLights[UNROLLED_LOOP_INDEX].direction, 0.0)).xyz;
		
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS)
									directionalLightShadow = directionalLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow( 
										UNROLLED_LOOP_INDEX,
										directionalShadowMap[UNROLLED_LOOP_INDEX], 
										directionalLightShadow.shadowMapSize, 
										directionalLightShadow.shadowBias, 
										directionalLightShadow.shadowRadius, 
										vDirectionalShadowCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_SPOT_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_SPOT_LIGHT_SHADOWS > 0)
								SpotLightShadow spotLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_SPOT_LIGHTS; i++) {
								lpos = (inverse(viewMatrix) * vec4(spotLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS)
									spotLightShadow = spotLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow(
										UNROLLED_LOOP_INDEX,
										spotShadowMap[UNROLLED_LOOP_INDEX], 
										spotLightShadow.shadowMapSize, 
										spotLightShadow.shadowBias, 
										spotLightShadow.shadowRadius, 
										vSpotLightCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						t = clamp(t, 0.0, 1.0);
				
					#endif

				} else if (positioning == 1) {
					
					vec3 origin = mix(position, worldPosition, float(isWorldSpace));
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	

				} else {

					vec3 origin = worldPosition;
					vec3 source = cameraPosition - offset;
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	
					
				}

				if (noiseStrength > 0.0) {
					// Distort with noise
					vec3 st = position / noiseScale;
					
					// Voronoi "smooth" noise
					float noise = 1.0 - voronoiNoise(st).x;

					// Voronoi cellular noise
					//float noise = 1.0 - rand(voronoiNoise(st).z);

					// Position warp noise
					// vec3 offset = vec3(
					// 	simplex3d(st),
					// 	simplex3d(st + vec3(111.1, 143.89, 217.19)),
					// 	simplex3d(st + vec3(171.1, 247.89, 117.23))
					// );
					// st += offset;
					// float noise = valueNoise(st);

					t += noise * noiseStrength;
				}

				t = clamp(t, 0.0, 1.0);

				// Compute ramp color
				float p;
				vec4 color = colors[0];
				for (int i = 1; i < COLORS_MAX; i++) {
					p = clamp((t - steps[i-1]) / (steps[i] - steps[i-1]), 0.0, 1.0);
					color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
				}

				// Incorporate custom shadow color
				if (positioning == 0) {

					vec3 blendedShadow = mix(color.rgb, shadowColor.rgb, shadowColor.a);
					color.rgb = mix(blendedShadow, color.rgb, shadow);
				
				}

				// Accumulate alpha as usual
				float lalpha = alpha * color.a * mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color.xyz;

            }`,[ss.simplex,e,r,i])}}();var uxt=function(){return{textureBicubic:new at(`float w0( float a ) {
            return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
        }
    
        float w1( float a ) {
            return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
        }
    
        float w2( float a ){
            return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
        }
    
        float w3( float a ) {
            return ( 1.0 / 6.0 ) * ( a * a * a );
        }
    
        // g0 and g1 are the two amplitude functions
        float g0( float a ) {
            return w0( a ) + w1( a );
        }
    
        float g1( float a ) {
            return w2( a ) + w3( a );
        }
    
        // h0 and h1 are the two offset functions
        float h0( float a ) {
            return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
        }
    
        float h1( float a ) {
            return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
        }
    
        vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
            uv = uv * texelSize.zw + 0.5;
    
            vec2 iuv = floor( uv );
            vec2 fuv = fract( uv );
    
            float g0x = g0( fuv.x );
            float g1x = g1( fuv.x );
            float h0x = h0( fuv.x );
            float h1x = h1( fuv.x );
            float h0y = h0( fuv.y );
            float h1y = h1( fuv.y );
    
            vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
            vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
            vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
            vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
    
            return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) + 
                   g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
        }

        vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
            vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
            vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
            vec2 fLodSizeInv = 1.0 / fLodSize;
            vec2 cLodSizeInv = 1.0 / cLodSize;
            vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
            vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
            return mix( fSample, cSample, fract( lod ) );
        }`)}}();function cxt(e,t){return e>=t?new ue(t/e,1):new ue(1,e/t)}var xue=class extends mn{constructor(e,t,r,n,i,o,a,s){super("v3"),this.nodeType="Transmission",this.thickness=e,this.ior=t,this.roughness=r,this.transmissionSamplerSize=n,this.transmissionSamplerMap=i,this.transmissionDepthMap=o,this.aspectRatio=a,this.alpha=s,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0,e.isShader("fragment")){e.define("NUM_SAMPLES",6),e.define("BLUR_SLOD",Math.pow(2,jt.transmissionLod.value)),e.require("worldPosition"),e.requires.worldNormal=!0,e.requires.modelMatrix=!0,e.requires.projectionMatrix=!0,e.addFragmentVariable(this.calpha,"float");let r=e.include(xue.Nodes.transmission),n=[];return n.push(this.thickness.build(e,"f")),n.push(this.ior.build(e,"f")),n.push(this.roughness.build(e,"f")),n.push(this.transmissionSamplerSize.build(e,"v2")),n.push(this.transmissionSamplerMap.getTexture(e,"t")),n.push(this.transmissionDepthMap.getTexture(e,"t")),n.push(this.aspectRatio.build(e,"v2")),n.push("normal"),n.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.calpha),e.format(r+"("+n.join(",")+")",this.getType(e),t)}else return console.warn("TransmissionNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},wue=xue;wue.Nodes=function(){let e=new at(`vec3 blur(sampler2D sp, vec2 U, vec2 scale, float lod, sampler2D dm, vec2 unrefractedU, vec2 aspectRatio) {
                // Slightly modified version of this:
                // https://www.shadertoy.com/view/ltScRG

				// Special case for blur == 0.0
				if (lod == 0.0) {
					#ifdef TEXTURE_LOD_EXT
					return texture2DLodEXT( sp, U, 0.0).rgb;
					#else
					return textureLod( sp, U, 0.0).rgb;
					#endif
				}
				
				vec2 texelSize = vec2(1.0) / resolution;
                vec2 halton = haltonSequence[frameIndex];
                float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
                float temporalAngle  = temporalOffset * PI2;
				vec3 res = vec3(0.0);
                vec2 uv = vec2(0.0);
                vec2 offset = vec2(0.0);
                vec2 vogelSample = vec2(0.0);
                for (int i = 0; i < NUM_SAMPLES; i++) {
                    vogelSample =  vogelDiskSample(i, NUM_SAMPLES, temporalAngle) * texelSize;
                    offset = vogelSample * scale * (lod * 10.0); // TODO: used to be hardcoded to 20
                    uv = U + offset;
                    float opaqueDepth = unpackRGBAToDepth(textureLod(dm, uv, lod));
                    if (opaqueDepth != 0.0 && opaqueDepth < gl_FragCoord.z) {
                        uv = unrefractedU;
                        lod = lod > 4.0 ? lod : lod / 2.0;
                    }
                    res += textureLod(sp, uv, lod).rgb;
                }
                return res / float(NUM_SAMPLES);
            }`),t=new at(`vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		        // Direction of refracted light.
		        vec3 refractionVector = refract( -v,  n, 1.0 / ior );
		        
				// Compute rotation-independant scaling of the model matrix.
		        vec3 modelScale;
		        modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		        modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		        modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );

		        // The thickness is specified in local space
		        return normalize( refractionVector ) * thickness * modelScale;
	        }`),r=new at(`float applyIorToRoughness( float roughness, float ior ) {
				// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
				// an IOR of 1.5 results in the default amount of microfacet refraction.
				return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
			}`),n=new at(`vec3 getTransmissionSample( vec2 fragCoord, float roughness, float ior, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 unrefractedCoords, vec2 aspectRatio) {
				// Threejs exports do not pass a depth map to this shader, so we have to fallback to the "Threejs method of blurring" - see
				// also the code in convertTransmission.ts, which runs during export
				#ifdef IS_THREEJS_EXPORT
					float lod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness / 5.0, ior);
					return textureBicubic(transmissionSamplerMap, fragCoord.xy, lod).rgb;
				#else
					float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
					float lod = applyIorToRoughness(roughness, ior);
					return blur(transmissionSamplerMap, fragCoord, vec2(lod), min(framebufferLod / 5.5, 8.5), transmissionDepthMap, unrefractedCoords, aspectRatio);
				#endif
			}`,[uxt.textureBicubic,r,e]),i=new at(`vec3 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;

				// Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
				vec4 ndcPos = projMatrix * viewMatrix *  vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;

				vec4 ndcPosUnrefracted = projMatrix * viewMatrix * vec4(position, 1.0 );
				vec2 unrefractedCoords = ndcPosUnrefracted.xy / ndcPosUnrefracted.w;
				unrefractedCoords += 1.0;
				unrefractedCoords /= 2.0;

				// Sample framebuffer to get pixel the refracted ray hits.
				return getTransmissionSample( refractionCoords, roughness, ior, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, unrefractedCoords, aspectRatio );
    		}`,[n,t]);return{transmission:new at(`vec3 transmission(float thickness, float ior, float roughness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio, vec3 normal, float mask, float alpha, out float calpha) {
                vec3 v = vec3(0.);
                if (isOrthographic) {
                    v = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
                } else {
                    v = normalize(vWPosition - cameraPosition);
                }
                vec3 transmission = getIBLVolumeRefraction(vWNormal, -v, roughness,  vWPosition, modelMatrix, viewMatrix, projectionMatrix, ior, thickness, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, aspectRatio );
                
				float lalpha = alpha * mask;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * alpha;

				return transmission;
            }`,[i])}}();var Nz=(e=>(e.NOISE="noise",e.MAP="map",e))(Nz||{}),Sue=class extends mn{constructor(e,t,r,n,i,o,a,s,l,u,d){super("v3"),this.displacementTypeIndex=new wn(0),this.nodeType="VertexDisplacement",this.intensity=e,this.movementOrTexture=t,Object.values(Nz)[this.displacementTypeIndex.value]==="map"&&(this.mat=new nue(this.movementOrTexture.value.matrix)),this.cropOrOffset=r,this.scale=u,this.noiseFunctionIndex=d,this.voronoiStyle=n,this.smoothness=i,this.seed=o,this.highCut=a,this.lowCut=s,this.quality=l}generate(e,t){if(e.isShader("vertex")){e.define("USE_LAYER_DISPLACE");let r,n=[];switch(n.push("displaced_position"),n.push("displaced_normal"),Object.values(Nz)[this.displacementTypeIndex.value]){case"map":{r=e.include(Sue.Nodes.map),n.push(this.movementOrTexture.getTexture(e,"t")),n.push("uv"),n.push(this.cropOrOffset.build(e,"f")),this.mat&&n.push(this.mat.build(e,"mat3"));break}case"noise":{let i=Object.values(BU)[this.noiseFunctionIndex.value],o=new at(`vec3 orthogonal(vec3 v) {
							return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
						}`),a=i=="voronoi"?`
					float v = ${i}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1), voronoiStyle, smoothness, seed, quality);
					v = remap(v, lowCut, highCut, 0.0, 1.0);
					v = smax(v, 0.0, smoothness * 0.25);
					v = smin(v, 1.0, smoothness * 0.25);

					return p + n * v * intensity;
					`:`
					return p + n * ${i}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1)) * intensity;
					`,s=new at(`vec3 distorted(vec3 p, vec3 n, float scale, float intensity, vec3 offset, float neighbour_offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality) {
							${a}
						}`,[ss.simplex,ss.simplexFractal,ss.simplexAshima,ss.fbm,ss.perlin,ss.voronoi]),l=new at(`vec3 vertexDisplacementNoise(vec3 position, vec3 normal, float scale, vec3 offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality, float intensity, out vec3 displaced_normal) {
							vec3 displaced_position = distorted(position, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							vec3 tangent1 = orthogonal(normal);
							vec3 tangent2 = normalize(cross(normal, tangent1));

                            // TODO(Max): The distance to the neighbors was originally scaled by 0.1.
                            // This caused some small oval/circular visual artifacts in the lighting.
                            // For now, simply using neighbors further away betters the problem,
                            // but we should figure out the underlying cause when we have some time.
                            // Maybe its related to how we calculate the tangent and bitangent?
							vec3 nearby1 = position + tangent1;
							vec3 nearby2 = position + tangent2;
							vec3 distorted1 = distorted(nearby1, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							vec3 distorted2 = distorted(nearby2, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
							return displaced_position;
						}`,[s,o]);r=e.include(l),n.push(this.scale.build(e,"f")),n.push(this.cropOrOffset.build(e,"v3")),n.push(this.movementOrTexture.build(e,"f")),n.push(this.voronoiStyle.build(e,"i")),n.push(this.smoothness.build(e,"f")),n.push(this.seed.build(e,"f")),n.push(this.highCut.build(e,"f")),n.push(this.lowCut.build(e,"f")),n.push(this.quality.build(e,"i"));break}}return n.push(this.intensity.build(e,"f")),n.push("displaced_normal"),e.format(r+"("+n.join(",")+")",this.getType(e),t)}else return console.warn("VertexDisplacementNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},_ue=Sue;_ue.Nodes=function(){let e=new at(`vec3 orthogonal(vec3 v) {
				return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
			}`),t=new at(`float displacementMapTexture(sampler2D tex, float crop, vec2 uv, mat3 mat, vec2 offset) {
				vec2 uvs = (mat * vec3(uv * 2.0 - 1.0, 1.0) / 2.0 + 0.5).xy + offset;
				vec4 tmp = texture2D(tex, uvs);
				vec3 col = tmp.rgb;
				if (crop > 0.5) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						return 0.0;
					}
				}
				return col.r;
			}`);return{map:new at(`vec3 vertexDisplacementMap(vec3 position, vec3 normal, sampler2D tex, vec2 uv, float crop, mat3 mat, float intensity, out vec3 displaced_normal) {
				vec3 displaced_position = position + normal * displacementMapTexture(tex, crop, uv, mat, vec2(0.0)) * intensity;
				vec3 tangent1 = normalize(orthogonal(normal));
				vec3 tangent2 = normalize(cross(normal, tangent1));
				vec3 nearby1 = position + tangent1 * 0.1;
				vec3 nearby2 = position + tangent2 * 0.1;
				vec3 distorted1 = nearby1 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				vec3 distorted2 = nearby2 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
				return displaced_position;
			}`,[e,t])}}();var jt={normalRenderTarget:new jd,normalRenderTargetDepth:new jd,transmissionRenderTarget:new jd,aspectRatio:new Vo,transmissionSize:new Vo(2048,2048),transmissionRenderTargetDepth:new jd,aoRenderTarget:new jd,aoEnabled:new ka,pixelRatioNode:new mt(1),resolution:new Vo,penumbraSize:new Vp(5,.5),frameIndex:new wn(0),transmissionLod:new wn(2)};for(let e of Object.values(jt))e.isRenderGlobal=!0;var Cue=class extends xp{constructor(){super("basic"),this.nodeType="Basic",this.color=new xi(Ql),this.shadingAlpha=new mt(1),this.shadingBlend=new wn(0),this.previousModelViewMatrix=new rd,this.previouseProjectionMatrix=new rd}get category(){return"phong"}generate(e){let t;if(e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:jt.frameIndex}),e.mergeUniform({resolution:jt.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(sb.merge([it.fog])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>"].join(`
`));let n=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];r&&n.push(r.code,r.result?"displaced_position = "+r.result+";":""),n.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","	vNormal = transformedNormal;","#endif"),n.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>"),n.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=n.join(`
`)}else{this.color===void 0&&(this.color=new xi(Ql)),this.color.analyze(e,{slot:"color"}),this.alpha&&this.alpha.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"});let r=this.color.flow(e,"c",{slot:"color"}),n=this.alpha?this.alpha.flow(e,"f"):void 0,i=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0,o=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0;e.requires.transparent=n!==void 0,e.addParsCode(["varying vec3 vWPosition;","#include <fog_pars_fragment>","#include <dithering_pars_fragment>","varying vec3 vViewPosition;","#include <normal_pars_fragment>"].join(`
`));let a=["#include <normal_fragment_begin>",r.code];n&&a.push(n.code,"#ifdef ALPHATEST"," if ( "+n.result+" <= ALPHATEST ) discard;","#endif"),o?a.push(o.code,`vec3 outgoingLight = ${r.result};`,`vec3 finalColor = spe_blend(outgoingLight, ${o.result}, 1.0, SPE_BLENDING_NORMAL);`):a.push(`vec3 finalColor = ${r.result};`);let s="1.0";this.mask&&(this.mask.analyze(e),s=`luminance(${this.mask.flow(e,"v3").result})`),n?a.push(`gl_FragColor = vec4( finalColor, accumAlpha * ${n.result} * ${s} );`):a.push("gl_FragColor = vec4("+r.result+", 1.0 );"),i&&a.push(`gl_FragColor.a *= ${i.result};`),a.push("#include <fog_fragment>","#include <dithering_fragment>"),t=a.join(`
`)}return t}},dxt=class extends xp{constructor(){super("lambert"),this.nodeType="Lambert",this.color=new xi(Ql),this.emissive=new xi(0),this.emissiveIntensity=new mt(1),this.previousModelViewMatrix=new rd,this.previouseProjectionMatrix=new rd,this.shadingAlpha=new mt(1),this.shadingBlend=new wn(0),this.occlusion=new ka(!0)}get category(){return"lambert"}build(e){let t;if(e.define("LAMBERT"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:jt.frameIndex}),e.mergeUniform({resolution:jt.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(sb.merge([it.fog,it.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let n=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];r&&n.push(r.code,r.result?"displaced_position = "+r.result+";":""),n.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),n.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>",`
					vec3 diffuse = vec3( 1.0 );
					GeometricContext geometry;
					geometry.position = mvPosition.xyz;
					geometry.normal = normalize( transformedNormal );
					geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
				`),n.push(`
					GeometricContext backGeometry;
					backGeometry.position = geometry.position;
					backGeometry.normal = -geometry.normal;
					backGeometry.viewDir = geometry.viewDir;
					vLightFront = vec3( 0.0 );
					vIndirectFront = vec3( 0.0 );
					#ifdef DOUBLE_SIDED
						vLightBack = vec3( 0.0 );
						vIndirectBack = vec3( 0.0 );
					#endif
					IncidentLight directLight;
					float dotNL;
					vec3 directLightColor_Diffuse;
					vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
					vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
					#ifdef DOUBLE_SIDED
						vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
						vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
					#endif
					#if NUM_POINT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
							getPointLightInfo( pointLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_SPOT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
							getSpotLightInfo( spotLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_DIR_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
							getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_HEMI_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
							vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
							#ifdef DOUBLE_SIDED
								vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
							#endif
						}
						#pragma unroll_loop_end
					#endif
				`,"	#include <shadowmap_vertex>","	#include <fog_vertex>"),n.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=n.join(`
`)}else{e.mergeUniform({penumbraSize:jt.penumbraSize}),e.mergeUniform({frameIndex:jt.frameIndex}),e.mergeUniform({aoMap:jt.aoRenderTarget}),e.mergeUniform({aoEnabled:jt.aoEnabled}),this.color===void 0&&(this.color=new xi(Ql)),this.color.analyze(e,{slot:"color"}),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let r=this.color.flow(e,"c",{slot:"color"}),n=this.emissive.flow(e,"c",{slot:"emissive"}),i=this.emissiveIntensity.flow(e,"f",{slot:"emissive"}),o=this.occlusion.flow(e,"b",{slot:"occlusion"}),a=this.shadingAlpha.flow(e,"f"),s=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,u=this.alpha?this.alpha.flow(e,"f"):void 0,d=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=u!==void 0,e.addParsCode(["uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#include <normal_pars_fragment>","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <fog_pars_fragment>","#include <shadowmap_pars_fragment>","#include <shadowmask_pars_fragment>","#include <clipping_planes_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let c=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx, viewdy));
				bool isFrontFacing = (dot(normal, faceNormal) >= 0.0);
				`,"#include <clipping_planes_fragment>"];c.push(r.code,"vec3 diffuseColor = "+r.result+";","ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );"),u&&c.push(u.code,"#ifdef ALPHATEST","if ( "+u.result+" <= ALPHATEST ) discard;","#endif"),c.push("#ifdef DOUBLE_SIDED","	reflectedLight.indirectDiffuse += ( isFrontFacing ) ? vIndirectFront : vIndirectBack;","#else","	reflectedLight.indirectDiffuse += vIndirectFront;","#endif","#include <lightmap_fragment>","reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );","#ifdef DOUBLE_SIDED","	reflectedLight.directDiffuse = ( isFrontFacing ) ? vLightFront : vLightBack;","#else","	reflectedLight.directDiffuse = vLightFront;","#endif","reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();"),n&&c.push(n.code,"reflectedLight.directDiffuse += "+n.result+" * "+i.result+";"),c.push("vec3 ao = aoEnabled && "+o.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = (reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) ;");let h="1.0";this.mask&&(this.mask.analyze(e),h=`luminance(${this.mask.flow(e,"v3").result})`),c.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${a.result} * ${h} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${a.result} * ${h}, ${s.result} );

					outgoingLight *= ao;
				}
				`),l&&c.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),u?c.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${u.result} );`):c.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),d&&c.push(`gl_FragColor.a *= ${d.result};`),c.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=c.join(`
`)}return t}},D0=function(){let e=new at(`vec2 dHdxy(sampler2D bumpMap, vec2 bumpMapUv, float bumpScale) {

            // Gradient of UVs w.r.t. X coordinate (in screen-space)
            vec2 dSTdx = dFdx(bumpMapUv);

            // Gradient of UVs w.r.t. Y coordinate (in screen-space)
            vec2 dSTdy = dFdy(bumpMapUv);
            
            // Forward differencing
            float Hll = bumpScale * luminance(texture(bumpMap, bumpMapUv).rgb);
            float dBx = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdx).rgb) - Hll;
            float dBy = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdy).rgb) - Hll;
            
            return vec2( dBx, dBy );
        }`),t=new at(`vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
            vec3 vSigmaX = dFdx( surf_pos.xyz );
            vec3 vSigmaY = dFdy( surf_pos.xyz );
            vec3 vN = surf_norm; // normalized
            
            vN = normalize(vN);

            vec3 R1 = cross( vSigmaY, vN );
            vec3 R2 = cross( vN, vSigmaX );

            R1 = normalize(R1);
            R2 = normalize(R2);
    
            float fDet = dot( vSigmaX, R1 ) * faceDirection;
    
            vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
            return normalize( abs( fDet ) * vN - vGrad );
        }`);return{dHdxy:e,perturbNormalArb:t}}(),hxt=class extends xp{constructor(){super("phong"),this.nodeType="Phong",this.color=new xi(Ql),this.specular=new xi(1118481),this.shininess=new mt(30),this.previousModelViewMatrix=new rd,this.previouseProjectionMatrix=new rd,this.shadingAlpha=new mt(1),this.shadingBlend=new wn(0),this.occlusion=new ka(!0)}get category(){return"phong"}build(e){let t;if(e.define("PHONG"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:jt.frameIndex}),e.mergeUniform({resolution:jt.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(sb.merge([it.fog,it.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let n=["#include <beginnormal_vertex>",`
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif


				vec3 displaced_position = position;
				vec3 displaced_normal = objectNormal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];r&&n.push(r.code,r.result?"displaced_position = "+r.result+";":""),n.push("transformed = displaced_position;","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),n.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),n.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=n.join(`
`)}else{e.mergeUniform({penumbraSize:jt.penumbraSize}),e.mergeUniform({frameIndex:jt.frameIndex}),e.mergeUniform({aoMap:jt.aoRenderTarget}),e.mergeUniform({aoEnabled:jt.aoEnabled}),this.color===void 0&&(this.color=new xi(Ql)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e);let r=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let n=this.color.flow(e,"c",{slot:"color"}),i=this.specular.flow(e,"c"),o=this.shininess.flow(e,"f"),a=this.shadingAlpha.flow(e,"f"),s=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,u=this.alpha?this.alpha.flow(e,"f"):void 0,d=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=u!==void 0,e.addParsCode(["varying vec3 vWPosition;","uniform vec3 emissive;","uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let c=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	BlinnPhongMaterial material;"];if(this.bumpMap){e.include(D0.dHdxy),e.include(D0.perturbNormalArb);let f=this.bumpMap.texture.flow(e,"t"),m=this.bumpMap.flow(e,"v3"),p=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",g="";this.bumpMap.projection.value===4?g=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${f.result}, uv0, ${p});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${f.result}, uv1, ${p});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${f.result}, uv2, ${p});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:g=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${f.result}, bumpMapCachedUv, ${p});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,c.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${m.result};
					${g}
					`)}c.push(n.code,"	vec3 diffuseColor = "+n.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","	vec3 totalEmissiveRadiance = emissive;",i.code,"	vec3 specular = "+i.result+";",o.code,"	float shininess = max( 0.0001, "+o.result+" );","	float specularStrength = 1.0;"),u&&c.push(u.code,"#ifdef ALPHATEST","if ( "+u.result+" <= ALPHATEST ) discard;","#endif"),c.push("material.diffuseColor = diffuseColor;"),c.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),c.push("vec3 ao = aoEnabled && "+r.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;");let h="1.0";this.mask&&(this.mask.analyze(e),h=`luminance(${this.mask.flow(e,"v3").result})`),c.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${a.result} * ${h} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${a.result} * ${h}, ${s.result} );
					
					outgoingLight *= ao;
				}
				`),l&&c.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),u?c.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${u.result});`):c.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),d&&c.push(`gl_FragColor.a *= ${d.result};`),c.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=c.join(`
`)}return t}},fxt=class extends xp{constructor(){super("standard"),this.nodeType="Standard",this.color=new xi(Ql),this.roughness=new mt(.3),this.metalness=new mt(0),this.reflectivity=new mt(.5),this.previousModelViewMatrix=new rd,this.previouseProjectionMatrix=new rd,this.shadingAlpha=new mt(1),this.shadingBlend=new wn(0),this.occlusion=new ka(!0)}get category(){return"physical"}build(e){let t;if(e.define("STANDARD"),e.requires.lights=!0,e.extensions.derivatives=!0,e.extensions.shaderTextureLOD=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:jt.frameIndex}),e.mergeUniform({resolution:jt.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(sb.merge([it.fog,it.lights])),it.LTC_1&&(e.uniforms.ltc_1={value:void 0},e.uniforms.ltc_2={value:void 0}),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let n=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];r&&n.push(r.code,r.result?"displaced_position = "+r.result+";":""),n.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),n.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),n.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=n.join(`
`)}else{e.mergeUniform({penumbraSize:jt.penumbraSize}),e.mergeUniform({frameIndex:jt.frameIndex}),e.mergeUniform({aoMap:jt.aoRenderTarget}),e.mergeUniform({aoEnabled:jt.aoEnabled});let r={gamma:!0};this.color===void 0&&(this.color=new xi(Ql)),this.color.analyze(e,{slot:"color",context:r}),this.roughness.analyze(e),this.metalness.analyze(e);let n=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e),this.reflectivity&&this.reflectivity.analyze(e);let i=this.color.flow(e,"c",{slot:"color",context:r}),o=this.roughness.flow(e,"f"),a=this.metalness.flow(e,"f"),s=this.shadingAlpha.flow(e,"f"),l=this.shadingBlend.flow(e,"i"),u=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,d=this.alpha?this.alpha.flow(e,"f"):void 0,c=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0,h=this.reflectivity?this.reflectivity.flow(e,"f"):void 0;e.requires.transparent=d!==void 0,e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>"].join(`
`));let f=["#include <clipping_planes_fragment>","	#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	PhysicalMaterial material;","	material.diffuseColor = vec3( 1.0 );"];if(this.bumpMap){e.include(D0.dHdxy),e.include(D0.perturbNormalArb);let p=this.bumpMap.texture.flow(e,"t"),g=this.bumpMap.flow(e,"v3"),v=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",b="";this.bumpMap.projection.value===4?b=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${p.result}, uv0, ${v});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${p.result}, uv1, ${v});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${p.result}, uv2, ${v});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:b=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${p.result}, bumpMapCachedUv, ${v});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,f.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${g.result};
					${b}
					`)}if(f.push(i.code,"	vec3 diffuseColor = "+i.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",a.code,"	float metalnessFactor = "+a.result+";"),this.roughnessMap){let p=this.roughnessMap.texture.flow(e,"t"),g=this.roughnessMap.flow(e,"v3"),v="";this.roughnessMap.projection.value===4?v=`
					float roughnessChange = 1.0;
					{
						vec2 uv0 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						float r0 = luminance(texture(${p.result}, uv0).rgb) * roughnessScale;
						float r1 = luminance(texture(${p.result}, uv1).rgb) * roughnessScale;
						float r2 = luminance(texture(${p.result}, uv2).rgb) * roughnessScale;

						roughnessChange = (r0 * weights.z + r1 * weights.x + r2 * weights.y);
					}
					float roughnessFactor = roughnessChange * ${o.result};
					`:v=`
					vec2 roughnessMapCachedUv = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs;

					vec4 vals = texture(${p.result},  roughnessMapCachedUv);
					float roughnessFactor = luminance(vals.rgb) * ${o.result};
					`,f.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${g.result};

					const float roughnessScale = 1.0;

					${v}
				`)}else f.push(o.code,"	float roughnessFactor = "+o.result+";");d&&f.push(d.code,"#ifdef ALPHATEST","	if ( "+d.result+" <= ALPHATEST ) discard;","#endif"),f.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),f.push("material.diffuseColor = diffuseColor * ( 1.0 - metalnessFactor );","material.roughness = max( roughnessFactor, 0.0525 );","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.roughness = clamp( roughnessFactor, 0.04, 1.0 );"),h?f.push(h.code,"material.specularColor = mix( vec3( 0.16 * pow2( "+h.result+" ) ), diffuseColor, metalnessFactor );"):f.push("material.specularColor = mix( vec3( 0.04 ), diffuseColor, metalnessFactor );"),f.push("#include <lights_fragment_begin>"),f.push("#include <lights_fragment_end>"),f.push("vec3 ao = aoEnabled && "+n.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular;");let m="1.0";this.mask&&(this.mask.analyze(e),m=`luminance(${this.mask.flow(e,"v3").result})`),f.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * ${m} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result} * ${m}, ${l.result} );
					
					outgoingLight *= ao;
				}
				`),u&&f.push(u.code,`outgoingLight = spe_blend(outgoingLight, ${u.result}, 1.0, SPE_BLENDING_NORMAL);`),d?f.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${d.result} );`):f.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c&&f.push(`gl_FragColor.a *= ${c.result};`),f.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=f.join(`
`)}return t}},pxt=class extends xp{constructor(){super("toon"),this.nodeType="Toon",this.color=new xi(Ql),this.specular=new xi(1118481),this.shininess=new mt(30),this.previousModelViewMatrix=new rd,this.previouseProjectionMatrix=new rd,this.shadingAlpha=new mt(1),this.shadingBlend=new wn(0)}get category(){return"toon"}build(e){let t;if(e.define("TOON"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:jt.frameIndex}),e.mergeUniform({resolution:jt.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(sb.merge([it.fog,it.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let n=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];r&&n.push(r.code,r.result?"displaced_position = "+r.result+";":""),n.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),n.push("	#include <project_vertex>","	#include <fog_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),n.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=n.join(`
`)}else{e.mergeUniform({penumbraSize:jt.penumbraSize}),e.mergeUniform({frameIndex:jt.frameIndex}),e.mergeUniform({aoMap:jt.aoRenderTarget}),e.mergeUniform({aoEnabled:jt.aoEnabled}),this.color===void 0&&(this.color=new xi(Ql)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let r=this.color.flow(e,"c",{slot:"color"}),n=this.specular.flow(e,"c"),i=this.shininess.flow(e,"f"),o=this.shadingAlpha.flow(e,"f"),a=this.shadingBlend.flow(e,"i"),s=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(e,"f"):void 0,u=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=l!==void 0,e.addParsCode(["uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vWPosition;","#include <normal_pars_fragment>","#include <gradientmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <dithering_pars_fragment>",`
					varying vec3 vViewPosition;
					struct ToonMaterial {
						vec3	diffuseColor;
						vec3	specularColor;
						float	specularShininess;
						float	specularStrength;
					};
					void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
			
						reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
						reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
					}
					void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
					}
					#define RE_Direct				RE_Direct_Toon
					#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
					#define Material_LightProbeLOD( material )	(0)
					`,"#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>"].join(`
`));let d=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	ToonMaterial material;"];if(this.bumpMap){e.include(D0.dHdxy),e.include(D0.perturbNormalArb);let h=this.bumpMap.texture.flow(e,"t"),f=this.bumpMap.flow(e,"v3"),m=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",p="";this.bumpMap.projection.value===4?p=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${h.result}, uv0, ${m});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${h.result}, uv1, ${m});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${h.result}, uv2, ${m});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:p=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${h.result}, bumpMapCachedUv, ${m});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,d.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${f.result};
					${p}
					`)}d.push(r.code,"	vec3 diffuseColor = "+r.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",n.code,"	vec3 specular = "+n.result+";",i.code,"	float shininess = max( 0.0001, "+i.result+" );","	float specularStrength = 1.0;"),l&&d.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),d.push("material.diffuseColor = diffuseColor;"),d.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),d.push("vec3 ao = aoEnabled ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) * ao) + reflectedLight.directSpecular;");let c="1.0";this.mask&&(this.mask.analyze(e),c=`luminance(${this.mask.flow(e,"v3").result})`),d.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${o.result} * ${c} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${o.result} * ${c}, ${a.result} );
				}
				`),s&&d.push(s.code,`outgoingLight = spe_blend(outgoingLight, ${s.result}, 1.0, SPE_BLENDING_NORMAL);`),l?d.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):d.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),u&&d.push(`gl_FragColor.a *= ${u.result};`),d.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=d.join(`
`)}return t}},mxt=class{constructor(e=1e3*10){this.timeout=e,this.cache=new Map,this.head={data:null,time:0,src:null,next:null,prev:null},this.tail={data:null,time:1/0,src:null,next:null,prev:null},this.hasClean=!1,this.head.next=this.tail,this.tail.prev=this.head}log(...e){}remove(e){let t=this.cache.get(e);t&&(this.dispose(e,t.data),this.cache.delete(e),t.prev.next=t.next,t.next.prev=t.prev)}scheduleCleanup(){this.hasClean||(this.log("scheduled cleanup"),this.hasClean=!0,setTimeout(()=>{this.hasClean=!1,this.log("cleaning");let e=Date.now(),t=this.head.next;for(;t.time<e-this.timeout;)this.dispose(t.src,t.data),this.cache.delete(t.src),t=t.next,t.prev=this.head,this.head.next=t;this.head.next!==this.tail?this.scheduleCleanup():this.log("no more cleanup")},this.timeout+1e3))}has(e){var t;return(t=this.cache.get(e))==null?void 0:t.data}load(e){let t=Date.now(),r=this.cache.get(e);return r===void 0?(r={data:this.create(e),src:e,time:t,next:null,prev:null},this.cache.set(e,r)):(r.time=t,r.prev.next=r.next,r.next.prev=r.prev),r.prev=this.tail.prev,r.next=this.tail,this.tail.prev.next=r,this.tail.prev=r,this.scheduleCleanup(),r.data}},gxt=class extends mxt{create(e){return URL.createObjectURL(new Blob([e]))}dispose(e,t){URL.revokeObjectURL(t)}},RR;function vxt(e){return typeof e=="string"?e:(RR||(RR=new gxt),RR.load(e))}var yxt=class{constructor(e,t){this.data=e,this.cache=t,this.refCount=0}deref(){this.refCount,this.refCount-=1,this.refCount===0&&(this.cache.remove(this),this.dispose())}dispose(){this.refCount}},bxt=class{constructor(){this.cache=new Map}remove(e){this.cache.delete(e.data)}load(e){let t=this.cache.get(e);return t===void 0&&(t=this.create(e),this.cache.set(e,t)),t.refCount+=1,t}},Aue=class extends yxt{constructor(e,t){super(e,t.imageHolderCache),this.data=e,this.shared=t,this.loaded=!1,this.isVideo=!1,this.isVideo=e.type==="video",this.updateSrc(e.data)}async updateSrc(e){if(typeof document>"u")return;this.disposeTextures(),this.loaded=!1;let t=()=>{this.loaded=!0;let n=[1e3,1001,1002];for(let i of n){let o=this[i];o&&(o.image=this.img,o.needsUpdate=!0)}this.shared.requestRender()};if(this.isVideo){if(this.img=document.createElement("video"),this.img.preload="auto",this.img.playsInline=!0,this.img.currentTime=.01,typeof e!="string"){var r=new FileReader;r.readAsDataURL(new Blob([e],{type:"video/mp4"}));let n;await new Promise(i=>{r.onloadend=o=>{var a;n=(a=o.target)==null?void 0:a.result,i(null)}}),this.img.src=n}else this.img.src=e;this.img.onloadeddata=()=>{t()}}else this.img=new Image,this.img.src=vxt(e),this.img.onload=t}getTexture(e){let t=this[e];if(t)return t;{let r;return this.isVideo?r=new gst(this.img,void 0,e,e):r=new co(this.img,void 0,e,e),this.loaded&&(r.needsUpdate=!0),this[e]=r,r}}disposeTextures(){var e,t,r;(e=this[1e3])==null||e.dispose(),this[1e3]=void 0,(t=this[1001])==null||t.dispose(),this[1001]=void 0,(r=this[1002])==null||r.dispose(),this[1002]=void 0}dispose(){super.dispose(),this.disposeTextures()}},fm=class extends Aue{};function xxt(e,t){var r=Cxt(t);return r.formatToParts?Sxt(r,e):_xt(r,e)}var wxt={year:0,month:1,day:2,hour:3,minute:4,second:5};function Sxt(e,t){try{for(var r=e.formatToParts(t),n=[],i=0;i<r.length;i++){var o=wxt[r[i].type];o>=0&&(n[o]=parseInt(r[i].value,10))}return n}catch(a){if(a instanceof RangeError)return[NaN];throw a}}function _xt(e,t){var r=e.format(t).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(r);return[n[3],n[1],n[2],n[4],n[5],n[6]]}var kR={};function Cxt(e){if(!kR[e]){var t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),r=t==="06/25/2014, 00:00:00"||t==="06/25/2014 00:00:00";kR[e]=r?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return kR[e]}function Eue(e,t,r,n,i,o,a){var s=new Date(0);return s.setUTCFullYear(e,t,r),s.setUTCHours(n,i,o,a),s}var dX=36e5,Axt=6e4,LR={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function Mue(e,t,r){var n,i;if(!e||(n=LR.timezoneZ.exec(e),n))return 0;var o;if(n=LR.timezoneHH.exec(e),n)return o=parseInt(n[1],10),hX(o)?-(o*dX):NaN;if(n=LR.timezoneHHMM.exec(e),n){o=parseInt(n[1],10);var a=parseInt(n[2],10);return hX(o,a)?(i=Math.abs(o)*dX+a*Axt,o>0?-i:i):NaN}if(Pxt(e)){t=new Date(t||Date.now());var s=r?t:Ext(t),l=zz(s,e),u=r?l:Mxt(t,l,e);return-u}return NaN}function Ext(e){return Eue(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function zz(e,t){var r=xxt(e,t),n=Eue(r[0],r[1]-1,r[2],r[3]%24,r[4],r[5],0).getTime(),i=e.getTime(),o=i%1e3;return i-=o>=0?o:1e3+o,n-i}function Mxt(e,t,r){var n=e.getTime(),i=n-t,o=zz(new Date(i),r);if(t===o)return t;i-=o-t;var a=zz(new Date(i),r);return o===a?o:Math.max(o,a)}function hX(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}var fX={};function Pxt(e){if(fX[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),fX[e]=!0,!0}catch{return!1}}var Txt=Lo(Jet(),1),pX=Lo(ett(),1),Oxt=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,Ixt=Oxt,NR=36e5,mX=6e4,Dxt=2,La={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:Ixt};function Rxt(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);var r=t||{},n=r.additionalDigits==null?Dxt:(0,Txt.default)(r.additionalDigits);if(n!==2&&n!==1&&n!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var i=kxt(e),o=Lxt(i.date,n),a=o.year,s=o.restDateString,l=Nxt(s,a);if(isNaN(l))return new Date(NaN);if(l){var u=l.getTime(),d=0,c;if(i.time&&(d=zxt(i.time),isNaN(d)))return new Date(NaN);if(i.timeZone||r.timeZone){if(c=Mue(i.timeZone||r.timeZone,new Date(u+d)),isNaN(c))return new Date(NaN)}else c=(0,pX.default)(new Date(u+d)),c=(0,pX.default)(new Date(u+d+c));return new Date(u+d+c)}else return new Date(NaN)}function kxt(e){var t={},r=La.dateTimePattern.exec(e),n;if(r?(t.date=r[1],n=r[3]):(r=La.datePattern.exec(e),r?(t.date=r[1],n=r[2]):(t.date=null,n=e)),n){var i=La.timeZone.exec(n);i?(t.time=n.replace(i[1],""),t.timeZone=i[1].trim()):t.time=n}return t}function Lxt(e,t){var r=La.YYY[t],n=La.YYYYY[t],i;if(i=La.YYYY.exec(e)||n.exec(e),i){var o=i[1];return{year:parseInt(o,10),restDateString:e.slice(o.length)}}if(i=La.YY.exec(e)||r.exec(e),i){var a=i[1];return{year:parseInt(a,10)*100,restDateString:e.slice(a.length)}}return{year:null}}function Nxt(e,t){if(t===null)return null;var r,n,i,o;if(e.length===0)return n=new Date(0),n.setUTCFullYear(t),n;if(r=La.MM.exec(e),r)return n=new Date(0),i=parseInt(r[1],10)-1,vX(t,i)?(n.setUTCFullYear(t,i),n):new Date(NaN);if(r=La.DDD.exec(e),r){n=new Date(0);var a=parseInt(r[1],10);return jxt(t,a)?(n.setUTCFullYear(t,0,a),n):new Date(NaN)}if(r=La.MMDD.exec(e),r){n=new Date(0),i=parseInt(r[1],10)-1;var s=parseInt(r[2],10);return vX(t,i,s)?(n.setUTCFullYear(t,i,s),n):new Date(NaN)}if(r=La.Www.exec(e),r)return o=parseInt(r[1],10)-1,yX(t,o)?gX(t,o):new Date(NaN);if(r=La.WwwD.exec(e),r){o=parseInt(r[1],10)-1;var l=parseInt(r[2],10)-1;return yX(t,o,l)?gX(t,o,l):new Date(NaN)}return null}function zxt(e){var t,r,n;if(t=La.HH.exec(e),t)return r=parseFloat(t[1].replace(",",".")),zR(r)?r%24*NR:NaN;if(t=La.HHMM.exec(e),t)return r=parseInt(t[1],10),n=parseFloat(t[2].replace(",",".")),zR(r,n)?r%24*NR+n*mX:NaN;if(t=La.HHMMSS.exec(e),t){r=parseInt(t[1],10),n=parseInt(t[2],10);var i=parseFloat(t[3].replace(",","."));return zR(r,n,i)?r%24*NR+n*mX+i*1e3:NaN}return null}function gX(e,t,r){t=t||0,r=r||0;var n=new Date(0);n.setUTCFullYear(e,0,4);var i=n.getUTCDay()||7,o=t*7+r+1-i;return n.setUTCDate(n.getUTCDate()+o),n}var Bxt=[31,28,31,30,31,30,31,31,30,31,30,31],Fxt=[31,29,31,30,31,30,31,31,30,31,30,31];function Pue(e){return e%400===0||e%4===0&&e%100!==0}function vX(e,t,r){if(t<0||t>11)return!1;if(r!=null){if(r<1)return!1;var n=Pue(e);if(n&&r>Fxt[t]||!n&&r>Bxt[t])return!1}return!0}function jxt(e,t){if(t<1)return!1;var r=Pue(e);return!(r&&t>366||!r&&t>365)}function yX(e,t,r){return!(t<0||t>52||r!=null&&(r<0||r>6))}function zR(e,t,r){return!(e!=null&&(e<0||e>=25)||t!=null&&(t<0||t>=60)||r!=null&&(r<0||r>=60))}function Uxt(e,t,r){var n=Rxt(e,r),i=Mue(t,n,!0),o=new Date(n.getTime()-i),a=new Date(0);return a.setFullYear(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()),a.setHours(o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds(),o.getUTCMilliseconds()),a}function ja(e,t){return t.color(e)}function bX(e=new Date,t){let r=t.format,n=e.getSeconds(),i=e;t&&t.timeZone!==null&&(i=Uxt(new Date,t.timeZone));let o=i.getHours(),a=i.getMinutes(),s;t.format12h24h==="12ampm"&&(s=o>=12?"PM":"AM");let l=o;t.format12h24h!=="24"&&(l=o%12,l===0&&(l=12));let u,d;switch(r){case"HH:mm:ss":u=[l,a,n];break;case"HH:mm":u=[l,a];break;case"HH":u=[l],s=void 0;break;case"mm":u=[a],s=void 0;break;case"ss":u=[n],s=void 0;break;case"year":d=i.getFullYear();break;case"month":d=i.getMonth()+1;break;case"dayOfYear":d=Math.floor((i.getTime()-new Date(i.getFullYear(),0,0).getTime())/864e5);break;case"dayOfMonth":d=i.getDate();break;case"secondOfDay":d=o*60*60+a*60+n;break;default:console.error("Unknown time format",r),d=0;break}return u!==void 0?{textValue:u,suffix:s}:d}function $xt(e,t){switch(e.type){case"fresnel":return Gxt(e,t);case"gradient":return Wxt(e,t);case"depth":return qxt(e,t);case"normal":return Kxt(e,t);case"noise":return Xxt(e,t);case"rainbow":return Yxt(e,t);case"toon":return Qxt(e,t);case"outline":return Zxt(e,t);case"transmission":return Jxt(e,t);case"color":return Hxt(e,t);case"pattern":return e1t(e,t)}}function Vxt(e){return{type:e.type}}function Hu(e,t){let{alpha:r,mode:n,isMask:i}=e,o=typeof r=="string"?(Number(t.getVariable(r))??100)/100:r;return{...Vxt(e),alpha:o,mode:n,isMask:i}}function Hxt(e,t){return{...Hu(e,t),color:ja(e.color,t)}}function Gxt(e,t){let{bias:r,scale:n,intensity:i,factor:o,color:a}=e;return{...Hu(e,t),color:ja(a,t),bias:r,scale:n,intensity:i,factor:o}}function Wxt(e,t){let{gradientType:r,smooth:n,colors:i,steps:o,angle:a,offset:s,morph:l}=e;return{...Hu(e,t),gradientType:r,smooth:n,colors:i.map(u=>new or(u[0],u[1],u[2],u[3])),num:i.length,steps:o,offset:new ue(...s),morph:new ue(...l),angle:a}}function qxt(e,t){let{gradientType:r,near:n,far:i,isVector:o,isWorldSpace:a,origin:s,direction:l,colors:u,steps:d,smooth:c}=e;return{...Hu(e,t),gradientType:r,near:n,far:i,isVector:o,isWorldSpace:a,origin:new F(...s),direction:l?new F(...l):new F(1,0,0),colors:u.map(h=>h!==void 0?new or(h[0],h[1],h[2],h[3]):new or(0,0,0,0)),steps:d.slice(0,u.length),smooth:c}}function Kxt(e,t){let{cnormal:r}=e;return{...Hu(e,t),cnormal:new F(r[0],r[1],r[2])}}function Xxt(e,t){return{...Hu(e,t),scale:e.scale,move:e.move,fA:new ue(...e.fA),fB:new ue(...e.fB),size:new F(...e.size),distortion:new ue(...e.distortion),colorA:ja(e.colorA,t),colorB:ja(e.colorB,t),colorC:ja(e.colorC,t),colorD:ja(e.colorD,t),noiseType:e.noiseType,voronoiStyle:e.voronoiStyle,highCut:e.highCut,lowCut:e.lowCut,smoothness:e.smoothness,seed:e.seed,quality:e.quality}}function Yxt(e,t){return{...Hu(e,t),filmThickness:e.filmThickness,movement:e.movement,wavelengths:new F(...e.wavelengths),noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,offset:new F(...e.offset)}}function Qxt(e,t){return{...Hu(e,t),positioning:e.positioning,colors:e.colors.map(r=>new or(r[0],r[1],r[2],r[3])),num:e.colors.length,steps:e.steps,source:new F(...e.source),isWorldSpace:e.isWorldSpace,noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,shadowColor:ja(e.shadowColor,t),offset:new F(...e.offset)}}function Zxt(e,t){return{...Hu(e,t),outlineColor:ja(e.outlineColor,t),contourColor:ja(e.contourColor,t),outlineWidth:e.outlineWidth,contourWidth:e.contourWidth,outlineThreshold:e.outlineThreshold,contourThreshold:e.contourThreshold,outlineSmoothing:e.outlineSmoothing,contourFrequency:e.contourFrequency,contourDirection:new F(...e.contourDirection),positionalLines:e.positionalLines,compensation:e.compensation}}function Jxt(e,t){return{...Hu(e,t),thickness:e.thickness,ior:e.ior,roughness:e.roughness}}function e1t(e,t){return{...Hu(e,t),style:e.style,projection:e.projection,axis:e.axis,blending:e.blending,offset:new ue(...e.offset),colorA:ja(e.colorA,t),colorB:ja(e.colorB,t),frequency:new ue(...e.frequency),size:e.size,variation:e.variation,smoothness:e.smoothness,zigzag:e.zigzag,rotation:e.rotation,vertical:new ue(...e.vertical),horizontal:new ue(...e.horizontal),sides:e.sides}}var jP=class extends As{},Tue={noise:["noiseType"],texture:["projection","axis","side"],video:["projection","axis","side"],displace:["noiseType"],light:["roughnessMap","bumpMap"],depth:["smooth","isWorldSpace","gradientType","isVector"],pattern:["style","projection","axis"]},Oue={depth:["colors"]};function t1t(e,t,r){var o,a;if(t==="isMask")return!0;let n=Tue[e.type],i=Oue[e.type];if(i!==void 0){let s=e.color;if(i.includes(t)){let l=(a=(o=s[t])==null?void 0:o.value)==null?void 0:a.length;if(l!==void 0&&l!==r.length)return!0}}return n!==void 0?n.includes(t):!1}function Iue(e,t,r){let n=r.uniforms[`f${r.id}_texture`];if(!n)return!1;let i=!1,o=e;if("image"in o){let a=o.image,s=t.image(a),l=n;l.image instanceof fm||l.image.deref(),l.image=s}if("video"in o){let a=o.video,s=t.video(a),l=n;l.image instanceof fm||l.image.deref(),l.image=s}if("wrapping"in o){let a=n;a.wrap=o.wrapping}if("repeat"in o||"offset"in o){let a="mat",s=r.uniforms[`f${r.id}_${a}`];"repeat"in o&&(s.repeat=o.repeat),"offset"in o&&(s.offset=o.offset),s.updateMatrix()}return i}function r1t(e,t,r,n){let i=!1;for(let[o,a]of Object.entries(e)){if(o==="bumpMap"||o==="roughnessMap"){i=!0;continue}if(!o||a===void 0)continue;if(Rue(o,r,n,t)){o==="visible"&&r.type==="light"&&(i=!0);continue}r.visible=n.visible;let s=r.uniforms[`f${r.id}_${o}`];if(s&&!(s instanceof NU))switch(i=i||t1t(r,o,a),s.constructor){case xi:if(typeof a=="string"){let l=t.getColor(a);l&&(s.value=l);break}else{let l=a;s.value instanceof jP?s.value=new As(l.r,l.g,l.b,l.a):s.setRGBA(l);break}case Rd:if(typeof a=="string"){let l=t.getColor(a);l&&(s.value=l);break}else{let l=a;s.value instanceof jP?s.value=new As(l.r,l.g,l.b,l.a):s.value.setRGBA(l.r,l.g,l.b,l.a);break}case Vo:{let l=a;s.value.setX(l[0]),s.value.setY(l[1]);break}case Sl:{let l=a;s.value.setX(l[0]),s.value.setY(l[1]),s.value.setZ(l[2]);break}case jd:{Iue(a,t,r);break}case Hp:{s.value=a.map(l=>new or(...l));break}default:{s.value=a;break}}}return i}var Jm=(e,t,r)=>Math.max(0,Math.min(1,Number(t.getVariable(typeof e=="number"?e*100:e,r)??100)/100))??1,Dm=class{constructor(e,t,r,n,i){this.id=e,this.uuid=t,this.data=r,this.uniforms={};for(let o in n)this.uniforms[`f${this.id}_${o}`]=n[o];for(let o in r)Rue(o,this,r,i)}get type(){return this.data.type}static create(e,t,r,n){if(r.type==="light")return kd.createLigherLayer(e,t,r,n);if(r.type==="texture"||r.type==="video"){let i=r.type==="texture"?n.image(r.texture.image):n.video(r.texture.video),o=new kz(i,r.texture.wrapping),a=new axt(i),s=new sxt(r.texture.repeat,r.texture.offset),l=new mt(r.crop?1:0),u=new wn(r.projection??0),d=new wn(["x","y","z"].indexOf(r.axis)??0),c=new wn(r.side??0),h=new Vo(r.size?new ue(r.size[0],r.size[1]):new ue(100,100)),f=new mt(r.blending??0),m=new mt(Jm(r.alpha,n)),p=new wn(r.mode??0),g=new ka(r.isMask??!1),v=new zU(o,a,l,u,d,c,h,f,s,m,p,g),b=new Ln(v.calpha,"f");return new mi(e,t,r,{texture:o,textureSize:a,crop:l,projection:u,axis:d,side:c,size:h,blending:f,mat:s,alpha:m,mode:p,isMask:g},v,p,b,g,n)}else if(r.type==="matcap"){let i=n.image(r.texture.image),o=new kz(i,r.texture.wrapping),a=new mt(Jm(r.alpha,n)),s=new wn(r.mode??0),l=new ka(r.isMask??!1),u=new due(o,a,s,l),d=new Ln(u.calpha,"f");return new mi(e,t,r,{texture:o,alpha:a,mode:s,isMask:l},u,s,d,l,n)}else if(r.type==="displace")if(r.displacementType==="noise"){let i=new Sl(new F(...r.offset)),o=new mt(r.scale??10),a=new mt(r.intensity??8),s=new mt(r.movement??1),l=new wn(r.noiseType??0),u=new wn(r.voronoiStyle??0),d=new mt(r.smoothness??.5),c=new mt(r.seed??0),h=new mt(r.highCut??1),f=new mt(r.lowCut??0),m=new wn(r.quality??1),p=new _ue(a,s,i,u,d,c,h,f,m,o,l);return new Due(e,t,r,{offset:i,scale:o,intensity:a,movement:s,noiseType:l,voronoiStyle:u,smoothness:d,seed:c,highCut:h,lowCut:f,quality:m},p,n)}else throw new Error;else return o1t(e,t,r,n)}updateByOp(e,t,r){let n=e;if(n.path[0]===void 0){if(n.type===0)return"type"in n.props||"category"in n.props||"visible"in n.props?(r.scene.markNeedsUpdateRendererDirty(),!0):r1t(n.props,r.shared,this,t)}else if(n.path[0]==="texture")return"texture"in t||"video"in t?Iue(n.props,r.shared,this):!0;return!1}dispose(){if(n1t(this)){let e=this.uniforms[`f${this.id}_texture`];if(!e)return!1;let t=e;t.image instanceof fm||t.image.deref()}}hasValueByKey(e){return this.uniforms[e]!==void 0}hasValue(e){return this.hasValueByKey(`f${this.id}_${e}`)}setValue(e,t){let r=`f${this.id}_${e}`;this.hasValueByKey(r)&&t!==void 0&&(this.uniforms[r].value=t)}getNode(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t]}getValue(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t].value}getName(e){let t=/f\d+_(.*)/.exec(e);if(t&&t.length>1)return t[1];console.log(`Layer.getName: error ${e}`)}getNames(){let e=[];for(let t in this.uniforms){let r=this.getName(t);r&&e.push(r)}return e}},mi=class extends Dm{constructor(e,t,r,n,i,o,a,s,l){super(e,t,r,n,l),this.params=n,this.color=i,this.mode=o,this.alpha=a,this.isMask=s}},Due=class extends Dm{constructor(e,t,r,n,i,o){super(e,t,r,n,o),this.position=i}},kd=class extends Dm{constructor(e,t,r,n,i,o){super(e,t,r,i,o),this.node=n}static createLigherLayer(e,t,r,n){let i,o=new mt(Jm(r.alpha,n)),a=new wn(r.mode),s=new mt(r.bumpMapIntensity),l=new mt(Jm(r.alphaOverride,n)),u;if(!r.visible)i=new Cue,u={};else if(r.category==="lambert"){i=new dxt;let d=new xi(n.color(r.emissive)??0),c=new ka(r.occlusion??!0);u={emissive:d,occlusion:c},i.emissive=d,i.occlusion=c}else if(r.category==="toon"){i=new pxt;let d=new mt(r.shininess??30),c=new xi(n.color(r.specular)??1118481);u={shininess:d,specular:c},i.shininess=d,i.specular=c}else if(r.category==="physical"){i=new fxt;let d=new mt(r.roughness??.3),c=new mt(r.metalness??0),h=new mt(r.reflectivity??.5),f=new ka(r.occlusion??!0);u={roughness:d,metalness:c,reflectivity:h,occlusion:f},i.roughness=d,i.metalness=c,i.reflectivity=h,i.occlusion=f}else{i=new hxt;let d=new mt(r.shininess??30),c=new xi(r.specular!==void 0?n.color(r.specular)??1118481:1118481),h=new ka(r.occlusion??!0);u={shininess:d,specular:c,occlusion:h},i.shininess=d,i.specular=c,i.occlusion=h}return i.alpha=new mt(1),i.shadingAlpha=o,i.shadingBlend=a,i.bumpMapIntensity=s,i.alphaOverride=l,u.alpha=i.shadingAlpha,u.mode=i.shadingBlend,u.bumpMapIntensity=i.bumpMapIntensity,u.alphaOverride=i.alphaOverride,new kd(e,t,r,i,u,n)}get category(){return this.node.category}};function n1t(e){let t=e instanceof Dm?e.type:e;return t==="texture"||t==="video"||t==="displace_map"||t==="matcap"}function gl(e){return{alpha:new mt(e.alpha??1),mode:new wn(e.mode??0),isMask:new ka(e.isMask??!1)}}function i1t(e,t,r,n,i){switch(e.type){case"color":{let o=new xi(n.color??Ql),a=gl(n),s=new Lz(o,a.alpha),l=new Ln(s.calpha,"f");return new mi(t,r,e,{color:o,...a},s,a.mode,l,a.isMask,i)}case"fresnel":{let o=new xi(n.color??16777215),a=new mt(n.bias??.1),s=new mt(n.scale??1),l=new mt(n.intensity??2),u=new mt(n.factor??1),d=gl(n),c=new lxt(o,a,s,l,u,d.alpha,d.mode,d.isMask),h=new Ln(c.calpha,"f");return new mi(t,r,e,{color:o,bias:a,scale:s,intensity:l,factor:u,...d},c,d.mode,h,d.isMask,i)}case"rainbow":{let o=new mt(n.filmThickness??30),a=new mt(n.movement??0),s=new Sl(n.wavelengths??new F(0,0,0)),l=new mt(n.noiseStrength??0),u=new mt(n.noiseScale??1),d=new Sl(n.offset??new F(0,0,0)),c=gl(n),h=new vue(o,a,s,l,u,d,c.alpha,c.isMask),f=new Ln(h.calpha,"f");return new mi(t,r,e,{filmThickness:o,movement:a,wavelengths:s,noiseStrength:l,noiseScale:u,offset:d,...c},h,c.mode,f,c.isMask,i)}case"transmission":{let o=new mt(n.thickness??10),a=new mt(n.ior??1.5),s=new mt(n.roughness??.5),l=jt.transmissionSize,u=jt.transmissionRenderTarget,d=jt.transmissionRenderTargetDepth,c=window.innerWidth,h=window.innerHeight,f=c>=h?new Vo(h/c,1):new Vo(1,c/h),m=gl(n),p=new wue(o,a,s,l,u,d,f,m.alpha),g=new Ln(p.calpha,"f");return new mi(t,r,e,{thickness:o,ior:a,roughness:s,aspectRatio:f,...m},p,m.mode,g,m.isMask,i)}case"toon":{let o=new wn(n.positioning??0),a;n.colors?a=new Hp(n.colors.length,n.colors):(a=new Hp(10,new or(0,0,0,1)),a.value[1]=new or(1,1,1,1));let s;n.steps?s=new Vp(n.steps.length,n.steps):(s=new Vp(10,1),s.value[0]=0);let l=new Sl(n.source??new F(0,0,0)),u=new ka(n.isWorldSpace??!0),d=new mt(n.noiseStrength??0),c=new mt(n.noiseScale??1),h=new Rd(n.shadowColor),f=new Sl(n.offset??new F(0,0,0)),m=gl(n),p=new bue(o,a,s,l,u,d,c,h,f,m.alpha),g=new Ln(p.calpha,"f");return new mi(t,r,e,{positioning:o,colors:a,steps:s,source:l,isWorldSpace:u,noiseStrength:d,noiseScale:c,shadowColor:h,offset:f,...m},p,m.mode,g,m.isMask,i)}case"outline":{let o=new xi(n.outlineColor??16777215),a=new xi(n.contourColor??16777215),s=new mt(n.outlineWidth??.1),l=new mt(n.contourWidth??.1),u=new mt(n.outlineThreshold??.1),d=new mt(n.contourThreshold??.1),c=new mt(n.outlineSmoothing??.1),h=new mt(n.contourFrequency??.1),f=new Sl(n.contourDirection??new F(0,1,0)),m=new ka(n.positionalLines??!1),p=new ka(n.compensation??!0),g=jt.normalRenderTarget,v=jt.normalRenderTargetDepth,b=jt.pixelRatioNode,y=jt.resolution,x=gl(n),S=new pue(o,a,s,l,u,d,c,h,f,m,p,y,g,v,b,x.alpha),w=new Ln(S.calpha,"f");return new mi(t,r,e,{outlineColor:o,contourColor:a,outlineWidth:s,contourWidth:l,outlineThreshold:u,contourThreshold:d,outlineSmoothing:c,contourFrequency:h,contourDirection:f,positionalLines:m,compensation:p,...x},S,x.mode,w,x.isMask,i)}case"depth":{let o=new wn(n.gradientType??0),a=new ka(n.smooth??!1),s=new mt(n.near??50),l=new mt(n.far??200),u=new mt(n.isVector??1),d=new mt(n.isWorldSpace??0),c=new Sl(n.origin??new F),h=new Sl(n.direction??new F),f;n.colors?f=new Hp(n.colors.length,n.colors):(f=new Hp(2,new or(0,0,0,1)),f.value[1]=new or(1,1,1,1));let m;n.steps?m=new Vp(n.steps.length,n.steps):(m=new Vp(2,1),m.value[0]=0);let p=gl(n),g=new sue(o,a,s,l,u,d,c,h,f,m,p.alpha,p.isMask),v=new Ln(g.calpha,"f");return new mi(t,r,e,{gradientType:o,smooth:a,near:s,far:l,isVector:u,isWorldSpace:d,origin:c,direction:h,colors:f,steps:m,...p},g,p.mode,v,p.isMask,i)}case"noise":{let o=new mt(n.scale??1),a=new Sl(n.size??new F(100,100,100)),s=new mt(n.move??1),l=new Vo(n.fA??new ue(1.7,9.2)),u=new Vo(n.fB??new ue(8.3,2.8)),d=new Vo(n.distortion??new ue(1,1)),c=new Rd(n.colorA),h=new Rd(n.colorB),f=new Rd(n.colorC),m=new Rd(n.colorD),p=new wn(n.noiseType??0),g=new wn(n.voronoiStyle??0),v=new mt(n.highCut??1),b=new mt(n.lowCut??0),y=new mt(n.smoothness??.5),x=new mt(n.seed??.5),S=new wn(n.quality??1),w=gl(n),_=new hue(o,a,s,l,u,d,c,h,f,m,w.alpha,p,w.isMask,g,v,b,y,x,S),C=new Ln(_.calpha,"f");return new mi(t,r,e,{scale:o,size:a,move:s,fA:l,fB:u,distortion:d,colorA:c,colorB:h,colorC:f,colorD:m,noiseType:p,...w,voronoiStyle:g,highCut:v,lowCut:b,smoothness:y,seed:x,quality:S},_,w.mode,C,w.isMask,i)}case"normal":{let o=new Sl(n.cnormal??new F(1,1,1)),a=gl(n),s=new aue(o,a.alpha),l=new Ln(s.calpha,"f");return new mi(t,r,e,{cnormal:o,...a},s,a.mode,l,a.isMask,i)}case"gradient":{let o=new wn(n.gradientType??0),a=new ka(n.smooth??!1),s;n.colors?s=new Hp(n.colors.length,n.colors):(s=new Hp(10,new or(0,0,0,1)),s.value[1]=new or(1,1,1,1));let l;n.steps?l=new Vp(n.steps.length,n.steps):(l=new Vp(10,1),l.value[0]=0);let u=new Vo(n.offset??new ue(0,0)),d=new Vo(n.morph??new ue(0,0)),c=new mt(n.angle??0),h=gl(n),f=new uue(o,a,s,l,u,d,c,h.alpha,h.isMask),m=new Ln(f.calpha,"f");return new mi(t,r,e,{gradientType:o,smooth:a,colors:s,steps:l,offset:u,morph:d,angle:c,...h},f,h.mode,m,h.isMask,i)}case"pattern":{let o=new wn(n.style??0),a=new wn(n.projection??0),s=new wn(["x","y","z"].indexOf(n.axis)??0),l=new mt(n.blending??0),u=new Vo(n.offset??new ue(0,0)),d=new Rd(n.colorA),c=new Rd(n.colorB),h=new Vo(n.frequency??new ue(10,10)),f=new mt(n.size??.5),m=new mt(n.variation??0),p=new mt(n.smoothness??.5),g=new mt(n.zigzag??0),v=new mt(n.rotation??0),b=new Vo(n.vertical??new ue(0,1)),y=new Vo(n.horizontal??new ue(0,1)),x=new wn(n.sides??6),S=gl(n),w=new mue(o,a,s,l,u,d,c,h,f,m,p,g,v,b,y,x,S.alpha,S.isMask),_=new Ln(w.calpha,"f");return new mi(t,r,e,{style:o,projection:a,axis:s,blending:l,offset:u,colorA:d,colorB:c,frequency:h,size:f,variation:m,smoothness:p,zigzag:g,rotation:v,vertical:b,horizontal:y,sides:x,...S},w,S.mode,_,S.isMask,i)}default:{let o=new xi(1,0,0,1),a=gl(n),s=new Lz(o,a.alpha),l=new Ln(s.calpha,"f");return new mi(t,r,e,{color:o,...a},s,a.mode,l,a.isMask,i)}}}function o1t(e,t,r,n){let i=$xt(r,n);return i1t(r,e,t,i,n)}function Rue(e,t,r,n){if(r.type==="displace"&&(e==="intensity"||e==="visible")){let i=t.uniforms[`f${t.id}_intensity`];return i?(i.value=r.intensity*(r.visible?1:0),i):void 0}if(r.type!=="displace"&&(e==="alpha"||e==="visible")){let i=t.uniforms[`f${t.id}_alpha`];if(!i)return;if(i.value=Jm(r.alpha,n)*(r.visible?1:0),r.type==="outline"&&e==="visible"){let o=t.uniforms[`f${t.id}_compensation`];o&&(o.value=r.compensation&&r.visible)}return i}}function Hv(e,t){let r=0,n=e.layers.find(i=>i.data.type==="light");if(n){let i=n.data,o=Number(t.getVariable(i.alphaOverride));if((typeof i.alphaOverride=="string"?o/100:i.alphaOverride)<1)return!0}for(let i of e.layers){if(i.data.type!=="displace"&&i.data.isMask)return!0;if(i.data.type!=="displace"&&"alpha"in i.data&&i.data.type!=="light"&&i.data.type!=="fresnel"&&i.data.type!=="texture"&&i.data.type!=="matcap"&&i.data.type!=="rainbow"&&i.data.type!=="outline"&&i.data.type!=="pattern"){let o=i.data.visible?i.data.alpha:0;if(typeof o=="string"&&(o=Math.max(0,Math.min(1,Number(t.getVariable(o)??100)/100))),o===1&&i.data.type==="depth"||i.data.type==="gradient"){for(let a of i.data.colors)if(a[3]<1){o=a[3];break}}else if(o===1&&i.data.type==="noise"){let a=t.color(i.data.colorA).a,s=t.color(i.data.colorB).a,l=t.color(i.data.colorC).a,u=t.color(i.data.colorD).a,d=Math.min(a,Math.min(s,Math.min(l,u)));d<1&&(o=d)}r+=(1-r)*o}}return r<1}var op=class extends Sn{constructor(){super(void 0),this.flatShading=!1,this.needsJitter=!0,this.cacheKey="",this.fog=!0,this.dithering=!0,this.vertexColors=!0,this.transparent=!0}customProgramCacheKey(){return this.cacheKey}},a1t=class extends op{constructor(e,t,r,n){super(),this.flatShading=e,this.side=t,this.wireframe=r,this.root=n}updateAfterBuild(){let e=this.root;this.lights=e.lights,this.vertexShader=e.vertexShader,this.fragmentShader=e.fragmentShader,this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.transparent=e.transparent,this.cacheKey=e.customProgramCacheKey()+"flat"+this.flatShading+this.side}onBeforeCompile(e,t){this.root.onBeforeCompile(e)}get data(){return this.root.data}get category(){return this.root.category}get hasAO(){return this.root.hasAO}getFlavor(e,t,r){return this.root.getFlavor(e,t,r)}get layers(){return this.root.layers}get fragment(){return this.root.fragment}getLayersOfType(e){return this.root.getLayersOfType(e)}getLayerByUuid(e){return this.root.getLayerByUuid(e)}updateByOp(e,t,r){this.root.updateByOp(e,t,r)}nodeMaterialDispose(){this.root.nodeMaterialDispose()}},FU=class extends op{constructor(e,t,r=!0){super(),this.data=e,this.allowVariableSaves=r,this.layerIdGen=0,this.flavors=[],this.masks={},this.type="NodeMaterial",this.updaters=[],this.reset0(e,t)}get nodeMaterial(){return this}getFlavor(e,t,r){let n=r?6:(e?3:0)+t;if(n===0)return this;this.flavors===void 0&&(this.flavors=[]),n-=1;let i=this.flavors[n];return i===void 0&&(i=new a1t(e,t,r,this),this.flavors[n]=i,i.flatShading=e,i.side=t,i.updateAfterBuild()),i}get fragment(){return this.lightLayer.node}get category(){return this.lightLayer.category}get hasAO(){var e;return((e=this.lightLayer.getNode("occlusion"))==null?void 0:e.value)??!1}reset(e,t){this.data!==e&&this.reset0(e,t)}reset0(e,t){this.data=e;let r=e.layers??da.defaultTwoLayerData("phong").layers;try{this.layers=r.map(n=>Dm.create(this.layerIdGen++,n.id,n.data,t.shared))}catch{this.layers=[]}this.layers.reverse(),this.name=e.name??"Untitled Material",this.onUpdate(t.shared),this.transparent=Hv(e,t.shared),this.saveVariableLocations(t)}onVariableUpdate(e,t,r){if(e[0]==="alphaOverride")this.transparent=Hv(this.data,r.shared),this.lightLayer.setValue("alphaOverride",Math.max(0,Math.min(Number(t)/100,1)));else if(e[0]==="layer"){let n=e[1],i=e[2];if(n&&i){let o=this.layers.find(a=>a.uuid===n);o!=null&&o.hasValue(i)&&(i==="alpha"?(this.transparent=Hv(this.data,r.shared),o.setValue(i,Math.max(0,Math.min(Number(t)/100,1)))):o.setValue(i,t))}}}saveVariableLocations(e){if(!this.allowVariableSaves)return;let t=this.data.layers.find(r=>r.data.type==="light");t&&e.shared.getVariable(t.data.alphaOverride,["material",this.uuid,"alphaOverride"]),this.data.layers.forEach(r=>{"alpha"in r.data&&typeof r.data.alpha=="string"&&e.shared.getVariable(r.data.alpha,["material",this.uuid,"layer",r.id,"alpha"])})}getLayersOfType(e){return this.layers.filter(t=>t.type===e)}getLayerByUuid(e){return this.layers.find(t=>t.uuid===e)}onUpdate(e){this.cacheKey=this.computeCacheKey(),this.lightLayer=this.layers.find(t=>t instanceof kd),this.lightLayer===void 0&&(this.lightLayer=new kd(0,"",{...as.defaultData("light","phong"),visible:!1},new Cue,{},e)),this.dispose();for(let t of this.flavors)t&&t.dispose();this.applyTextureMaps(),this.applyMasks(),this.blendColors(),this.blendAfterColors(),this.blendPositions()}applyTextureMaps(){let e=this.layers.find(i=>i instanceof kd);if(!e)return;let t=e.data,r=t.bumpMap,n=t.roughnessMap;e.node.bumpMap=void 0,e.node.roughnessMap=void 0;for(let i=0;i<this.layers.length;++i){let o=this.layers[i];o instanceof mi&&o.color instanceof zU&&(o.uuid===r&&(e.node.bumpMap=o.color),o.uuid===n&&(e.node.roughnessMap=o.color))}}updateByOp(e,t,r){if(t!==void 0?this.data=t:t=this.data,this.transparent=Hv(t,r.shared),e.path[0]==="layers"){this.data=t;let n=r.shared,i=e.path[1];if(i===void 0){if(this.layers.reverse(),e.type===4){let o=Dm.create(this.layerIdGen++,e.id,e.data,r.shared);this.layers.splice(e.localIndex,0,o),r.scene.markNeedsUpdateRendererDirty()}else if(e.type===5)this.layers.splice(e.localIndex,1)[0].dispose(),r.scene.markNeedsUpdateRendererDirty();else if(e.type===6){let o=this.layers.findIndex(s=>s.uuid===e.id),a=this.layers[o];this.layers.splice(o,1),this.layers.splice(e.localIndex,0,a),r.scene.markNeedsUpdateRendererDirty()}this.layers.reverse(),this.onUpdate(r.shared)}else{e.type===0&&e.props.occlusion!==void 0&&r.scene.markNeedsUpdateRendererDirty();let o=this.layers.find(a=>a.uuid===i);if(o){let a=t.layers.data(i),s;if(e.type===0&&("alpha"in e.props||"alphaOverride"in e.props)&&("alpha"in e.props?s={...e.props,alpha:Jm(e.props.alpha,n,["material",this.uuid,"layer",i,"alpha"])}:s={...e.props,alphaOverride:Jm(e.props.alphaOverride,n,["material",this.uuid,"alphaOverride"])}),o.updateByOp({...e,...s?{props:s}:{},path:e.path.slice(2)},a,r)){let l=Dm.create(this.layerIdGen++,i,a,n);this.layers.splice(this.layers.findIndex(u=>u.uuid===i),1,l),this.onUpdate(r.shared)}}}}else this.reset(t,r)}applyMasks(){for(let e=0;e<this.layers.length;++e){let t=this.layers[e];t instanceof mi?t.color.mask=void 0:t instanceof kd&&(t.node.mask=void 0)}for(let e=0;e<this.layers.length;++e){let t=this.layers[e];if(t instanceof mi&&t.isMask.value&&t.data.visible&&e>0){let r=e-1,n=this.layers[r];n instanceof kd?n.node.mask=new rs(t.color,t.alpha,rs.MUL):n instanceof mi&&(n.isMask.value||(n.color.mask=new rs(t.color,t.alpha,rs.MUL)))}}}blendColors(){let e=this.layers.findIndex(r=>r instanceof mi),t=this.layers.findIndex(r=>r instanceof kd);if(e!==-1&&e<t){let r=this.layers[e].color;for(let n=e+1;n<t;++n){let i=this.layers[n];if(i instanceof mi){if(i.isMask.value)continue;r=new cX(r,i.color,i.alpha,i.mode)}}this.fragment.color=r}else this.fragment.color=void 0}blendAfterColors(){let e=new Ln("outgoingLight","f"),t=this.layers.findIndex(r=>r instanceof kd);if(this.layers.length>t+1){for(let r=t+1;r<this.layers.length;++r){let n=this.layers[r];if(n instanceof mi){if(n.isMask.value)continue;e=new cX(e,n.color,n.alpha,n.mode)}}this.fragment.afterColor=e}else this.fragment.afterColor=void 0}blendPositions(){let e=this.layers.filter(t=>t instanceof Due);if(e.length>0){let t=e[0].position;for(let r=1;r<e.length;++r)e[r]&&(t=new rs(t,e[r].position,rs.ADD),t=new rs(t,new mt(.5).setReadonly(!0),rs.MUL));this.fragment.position=t}else this.fragment.position=void 0}getDefines(){return this.defines}getUniforms(){return this.uniforms}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}onBeforeCompile(e){this.build(),e.defines=this.defines,e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.extensionDerivatives=this.extensions.derivatives===!0,e.extensionFragDepth=this.extensions.fragDepth===!0,e.extensionDrawBuffers=this.extensions.drawBuffers===!0,e.extensionShaderTextureLOD=this.extensions.shaderTextureLOD===!0}clampUniformsForPreview(e,t){let r=(n,i,o)=>Math.min(Math.max(n,i),o);for(let n of this.layers)if(n.type==="displace"){let i=r(n.uniforms[`f${n.id}_intensity`].value,e,t);n.uniforms[`f${n.id}_intensity`].value=i}}computeCacheKey(){let e="[";for(let{data:t}of this.data.layers)if(t.type==="light")e+=`"${t.visible?t.category.toUpperCase():"Basic"}"`;else{let r=(Tue[t.type]??[]).map(s=>t[s]),n=(Oue[t.type]??[]).map(s=>{var l;return((l=t[s])==null?void 0:l.length)??0}),i=[...r,...n],o="isMask"in t&&t.isMask,a=`"${t.type}-${t.visible}-${o}"`;i.length?e+=`[${a}, "${i.join('","')}"],`:e+=a}return e=e.slice(0,-1)+"]",e}updateFrame(e){for(let t=0;t<this.updaters.length;++t)e.updateNode(this.updaters[t])}build(){let e=new oxt;e.needsJitter=this.needsJitter,this.lights=this.lightLayer.data.visible,e.build(this.fragment,this.fragment),this.vertexShader=e.getCode("vertex"),this.fragmentShader=e.getCode("fragment"),this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.updaters=e.updaters;for(let t of this.flavors)t&&t.updateAfterBuild();return this}nodeMaterialDispose(){this.layers.forEach(e=>e.dispose()),super.dispose();for(let e of this.flavors)e&&e.dispose()}assetsLoaded(){for(let e of this.layers)if(e instanceof mi){let t=e.params.texture;if(t instanceof kz&&!t.image.loaded)return!1}return!0}getHash(){let e="{";return e+='"fragment":'+this.fragment.getHash(),e+="}",e}};Object.defineProperties(op.prototype,{properties:{get:function(){return this.fragment.properties}}});var Bz=class extends FU{constructor(e,t,r){super(e,t,!1),this.uuid=r,this.allowVariableSaves=!0,this.saveVariableLocations(t)}},s1t=Lo(ttt()),xX=new Map;function l1t(e){if(typeof e=="string")return e;let t=xX.get(e);return t||(t={url:URL.createObjectURL(new Blob([e]))},xX.set(e,t)),t.url}var Kx=class{constructor({src:e,volume:t,delay:r,loop:n}){this._volume=1,this.delay=0,this._loop=1,this.loopsRemaining=0,this._status="stopped",this.onEnd=()=>{this.loopsRemaining===1/0?this.replay():this.loopsRemaining>1?(this.replay(),this.loopsRemaining--):(this._status="stopped",this.loopsRemaining=this._loop)};let i;typeof e=="string"?i={src:e}:i={src:l1t(e),format:"wav"},this.sound=new s1t.Howl(i),this.sound.on("end",this.onEnd),this.src=e,t!==void 0&&(this.volume=t),r!==void 0&&(this.delay=r),n!==void 0&&(this.loop=n)}get status(){return this._status}get volume(){return this._volume}set volume(e){this._volume=e,this.sound.volume(e)}get loop(){return this._loop}set loop(e){this._loop=e,this.loopsRemaining=e}replay(){this.clearDelay(),this.delayTimerId=window.setTimeout(()=>{this.sound.play(),this.clearDelay()},this.delay)}fade(e,t=1e3){e?(this.sound.volume(this._volume),this.clearFade(),this.fadeTimerId=window.setTimeout(()=>{this.sound.fade(this._volume,0,t),this.clearFade()},e)):this.sound.fade(this._volume,0,t)}on(e,t,r){this.sound.on(e,t,r)}off(e,t,r){this.sound.off(e,t,r)}play(){this._status==="playing"||this.sound.playing()||(this._status==="paused"?(this.sound.seek()===0?this.replay():this.sound.play(),this._status="playing"):this._status==="stopped"&&(this.replay(),this._status="playing"))}pause(){this._status==="playing"&&(this.sound.pause(),this.clearFade(),this.clearDelay(),this._status="paused")}stop(){this.sound.stop(),this.loopsRemaining=this._loop,this.clearFade(),this.clearDelay(),this._status="stopped"}clearFade(){this.fadeTimerId&&(clearTimeout(this.fadeTimerId),delete this.fadeTimerId)}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}dispose(e=!1){this.off(),this.stop(),this.clearFade(),this.clearDelay()}},u1t=class{constructor(){this.type="ShapePath",this.color=new Bt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new aP,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){var r;return(r=this.currentPath)==null||r.lineTo(e,t),this}quadraticCurveTo(e,t,r,n){var i;return(i=this.currentPath)==null||i.quadraticCurveTo(e,t,r,n),this}bezierCurveTo(e,t,r,n,i,o){var a;return(a=this.currentPath)==null||a.bezierCurveTo(e,t,r,n,i,o),this}splineThru(e){var t;return(t=this.currentPath)==null||t.splineThru(e),this}toShapes(){let e={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},t={loc:e.ORIGIN,t:0};function r(f,m,p,g){let v=f.x,b=m.x,y=p.x,x=g.x,S=f.y,w=m.y,_=p.y,C=g.y,E=(x-y)*(S-_)-(C-_)*(v-y),A=(b-v)*(S-_)-(w-S)*(v-y),M=(C-_)*(b-v)-(x-y)*(w-S),I=E/M,O=A/M;if(M===0&&E!==0||I<=0||I>=1||O<0||O>1)return null;if(E===0&&M===0){for(let T=0;T<2;T++)if(n(T===0?p:g,f,m),t.loc===e.ORIGIN){let D=T===0?p:g;return{x:D.x,y:D.y,t:t.t}}else if(t.loc===e.BETWEEN){let D=+(v+t.t*(b-v)).toPrecision(10),N=+(S+t.t*(w-S)).toPrecision(10);return{x:D,y:N,t:t.t}}return null}else{for(let N=0;N<2;N++)if(n(N===0?p:g,f,m),t.loc===e.ORIGIN){let k=N===0?p:g;return{x:k.x,y:k.y,t:t.t}}let T=+(v+I*(b-v)).toPrecision(10),D=+(S+I*(w-S)).toPrecision(10);return{x:T,y:D,t:I}}}function n(f,m,p){let g=p.x-m.x,v=p.y-m.y,b=f.x-m.x,y=f.y-m.y,x=g*y-b*v;if(f.x===m.x&&f.y===m.y){t.loc=e.ORIGIN,t.t=0;return}if(f.x===p.x&&f.y===p.y){t.loc=e.DESTINATION,t.t=1;return}if(x<-Number.EPSILON){t.loc=e.LEFT;return}if(x>Number.EPSILON){t.loc=e.RIGHT;return}if(g*b<0||v*y<0){t.loc=e.BEHIND;return}if(Math.sqrt(g*g+v*v)<Math.sqrt(b*b+y*y)){t.loc=e.BEYOND;return}let S;g!==0?S=b/g:S=y/v,t.loc=e.BETWEEN,t.t=S}function i(f,m){let p=[],g=[];for(let v=1;v<f.length;v++){let b=f[v-1],y=f[v];for(let x=1;x<m.length;x++){let S=m[x-1],w=m[x],_=r(b,y,S,w);_!==null&&p.find(C=>C.t<=_.t+Number.EPSILON&&C.t>=_.t-Number.EPSILON)===void 0&&(p.push(_),g.push(new ue(_.x,_.y)))}}return g}function o(f,m,p){let g=new ue;m.getCenter(g);let v=[];return p.forEach(b=>{b.boundingBox.containsPoint(g)&&i(f,b.points).forEach(y=>{v.push({identifier:b.identifier,isCW:b.isCW,point:y})})}),v.sort((b,y)=>b.point.x-y.point.x),v}function a(f,m,p,g,v){(v==null||v==="")&&(v="nonzero");let b=new ue;f.boundingBox.getCenter(b);let y=[new ue(p,b.y),new ue(g,b.y)],x=o(y,f.boundingBox,m);x.sort((A,M)=>A.point.x-M.point.x);let S=[],w=[];x.forEach(A=>{A.identifier===f.identifier?S.push(A):w.push(A)});let _=S[0].point.x,C=[],E=0;for(;E<w.length&&w[E].point.x<_;)C.length>0&&C[C.length-1]===w[E].identifier?C.pop():C.push(w[E].identifier),E++;if(C.push(f.identifier),v==="evenodd"){let A=C.length%2===0,M=C[C.length-2];return{identifier:f.identifier,isHole:A,for:M}}else if(v==="nonzero"){let A=!0,M=null,I=null;for(let O=0;O<C.length;O++){let T=C[O];m[T]&&(A?(I=m[T].isCW,A=!1,M=T):I!==m[T].isCW&&(I=m[T].isCW,A=!0))}return{identifier:f.identifier,isHole:A,for:M}}else console.warn('fill-rule: "'+v+'" is currently not implemented.')}let s=0,l=999999999,u=-999999999,d=[];this.subPaths.forEach(f=>{let m=f.getPoints(),p=-999999999,g=999999999,v=-999999999,b=999999999;for(let y=0;y<m.length;y++){let x=m[y];x.y>p&&(p=x.y),x.y<g&&(g=x.y),x.x>v&&(v=x.x),x.x<b&&(b=x.x)}u<=v&&(u=v+1),l>=b&&(l=b-1),m.length&&d.push({curves:f.curves,points:m,isCW:jae.isClockWise(m),identifier:s++,boundingBox:new Qae(new ue(b,g),new ue(v,p))})});let c=d.map(f=>{var m;return a(f,d,l,u,(m=this.userData)==null?void 0:m.style.fillRule)}),h=[];return d.forEach(f=>{let m=c[f.identifier];if(m&&!m.isHole){let p=new sP;p.curves=f.curves,c.filter(g=>(g==null?void 0:g.isHole)&&g.for===f.identifier).forEach(g=>{if(g){let v=d[g.identifier],b=new aP;b.curves=v.curves,p.holes.push(b)}}),h.push(p)}}),h}},kue,wX=new Promise(e=>{kue=e}),SX=!1,aA;function c1t(){if(SX)return;if(aA)return aA;async function e(){let t=await ZS(()=>import("./opentype-fc28cde9.js"),[]);kue(t),SX=!0}return aA=e(),aA}var d1t=class{async load(e,t,r=()=>{}){let{load:n}=await wX;n(e,(i,o)=>{i||!o?r(i??"Something went wrong"):t(o)})}async parse(e){let{parse:t,Bidi:r}=await wX;try{let n=t(e),i=new r,o=a=>n.charToGlyphIndex(a.char);return i.registerModifier("glyphIndex",null,o),i.applyFeatures(n,n.defaultRenderOptions.features),{font:n,bidi:i}}catch(n){console.error(n)}}};async function h1t(e){return await(await fetch(e)).arrayBuffer()}var f1t=new d1t;async function _X(e){let t,r,n=!1;if(e.url?(t=await h1t(e.url),r=e.url,n=e.url.startsWith("/")):e.data&&(t=e.data.buffer.slice(e.data.byteOffset,e.data.byteOffset+e.data.byteLength)),t){let i=await f1t.parse(t);if(i)return{font:i.font,url:r,intercepted:n,arr:t,bidi:i.bidi}}}function p1t(e,t){return t.state.glyphIndex===e||t.state.fina===e||t.state.medi===e||t.state.init===e}var m1t=class{constructor(e){this._arrayBuffer=new ArrayBuffer(1),this._isLoaded=!1,this._intercepted=!1,this._isUserFont=e.isUserFont??!1,this._loadingPromise=_X(e).then(t=>{t&&(this._arrayBuffer=t.arr,this._url=t.url,this.font=t.font,this._intercepted=t.intercepted,this._isLoaded=!0,this._bidi=t.bidi)})}update(e){this._isLoaded=!1,this._isUserFont=e.isUserFont??!1,this._loadingPromise=_X(e).then(t=>{t&&(this._arrayBuffer=t.arr,this._url=t.url,this.font=t.font,this._intercepted=t.intercepted,this._isLoaded=!0,this._bidi=t.bidi)})}get url(){return this._url}get intercepted(){return this._intercepted}get isLoaded(){return this._isLoaded}get loadingPromise(){return this._loadingPromise}reverseLigaturesTable(e,t,r){if(!this._bidi)return[];let n=this._bidi;n.getTextGlyphs(t);let i=n.tokenizer.tokens,o=[],a=0,s=r.length===i.length;for(let l=0;l<r.length;l++){let u=r[l].index,d=String.fromCharCode(r[l].unicode),c=i[a];if(p1t(u,c)||s)o.push({char:d,index:u,replacements:[c.state.glyphIndex],replacementChars:[c.char]}),a++;else{let h=c.char,f="",m=[c.state.glyphIndex],p=[],g=!1;for(;!g;)a++,f=t.charAt(a),h+=f,m.push(e.charToGlyphIndex(f)),p=e.stringToGlyphs(h),p.length===1&&p[0].index===u&&(g=!0),a>t.length&&(g=!0);o.push({char:d,index:u,replacements:m,replacementChars:Array.from(h)}),a++}}return o}generateShapes(e,t){if(!this._isLoaded)return;let r=this.font,n=t.fontSize/this.unitsPerEm,i=t.fontSize*t.lineHeight,o=e.map(v=>this.getTextWidth(v,t)),a=t.width,s=this.getCharWidth(`
`,t),l=t.horizontalAlign===1?s:0,u=this.computeSpaceWidthForLine(e,0,t),d=this.getLineInitialOffsetX(o[0],a,t.horizontalAlign,e[0],s),c=this.getLineInitialOffsetY(i,e.length,t.height,n,t.verticalAlign),h=[],f=e.map(v=>[]),m=e.map(v=>[]),p;for(let v=0;v<e.length;v++){let b=e[v],y={features:{liga:!0}},x=[];try{x=r.stringToGlyphs(b,y)}catch(w){console.warn(w)}d=this.getLineInitialOffsetX(o[v],a,t.horizontalAlign,b,s);let S=[];try{S=this.reverseLigaturesTable(r,b,x)}catch(w){console.warn(w)}u=this.computeSpaceWidthForLine(e,v,t);for(let w=0;w<x.length;w++){let _=x[w],C=_.index===0?`
`:_.unicode?String.fromCharCode(_.unicode):void 0,E=S[w],A=0,M=0;w===0&&t.horizontalAlign===2&&_.leftSideBearing!==void 0&&(M=-_.leftSideBearing*n),p&&(A=r.getKerningValue(_,p)*n),d+=M+A;let I=0;if(C===`
`)I=l;else if(C===" ")I=u;else{let O=this.createPath(_,n,d,c,t);O&&(I=O.offsetX-(A+M),h.push(O.path))}if(E.replacements.length===1)m[v].push([d,c]),f[v].push(I);else{let O=E.replacements.map(k=>(r.glyphs.get(k).advanceWidth??0)*n),T=O.reduce((k,R)=>k+=R,0),D=O.map(k=>k/T),N=d;for(let k=0;k<D.length;k++){let R=I*D[k];m[v].push([N,c]),f[v].push(R),N+=R}}d+=I,p=_}c-=i}let g=[];for(let v=0,b=h.length;v<b;v++)g.push(...h[v].toShapes());return{shapes:g,charWidths:f,lineWidths:o,charCoords:m}}get isUserFont(){return this._isUserFont}get arrayBuffer(){return this._arrayBuffer}get ascender(){var e;return((e=this.font)==null?void 0:e.ascender)??0}get descender(){var e;return((e=this.font)==null?void 0:e.descender)??0}get familyName(){var e;return((e=this.font)==null?void 0:e.names.fontFamily)??""}get subfamilyName(){var e;return((e=this.font)==null?void 0:e.names.fontSubfamily)??""}get unitsPerEm(){var e;return((e=this.font)==null?void 0:e.unitsPerEm)??1}getLineInitialOffsetX(e,t,r,n,i){return(r===3||r===2)&&n.indexOf(`
`)>=0&&(e-=i),r===3?t*.5-e*.5:r===2?t-e:0}getLineInitialOffsetY(e,t,r,n,i){let o=t*e,a=Math.abs(this.ascender-this.descender)*n,s=e-a,l=-this.ascender*n-s/2;return i===3?-(r-o-l):i===2?-(r*.5-o*.5-l):l}createPath(e,t,r,n,i){var l;let o=e.getPath(r,-n,i.fontSize,{kerning:!1,letterSpacing:i.letterSpacing});if(!o){console.error('THREE.Font: character "'+e+'" does not exists in font family '+this.familyName+".");return}let a=new u1t,s=(e.advanceWidth??1)*t;if(e)for(let u of o.commands){let d=(l=a.currentPath)==null?void 0:l.currentPoint;if(!(d&&u.type!=="Z"&&d.x===u.x&&-d.y===u.y))switch(u.type){case"M":a.moveTo(u.x,-u.y);break;case"L":a.lineTo(u.x,-u.y);break;case"Q":a.quadraticCurveTo(u.x1,-u.y1,u.x,-u.y);break;case"C":a.bezierCurveTo(u.x1,-u.y1,u.x2,-u.y2,u.x,-u.y);break}}return a.subPaths.forEach(u=>{let d=g1t(u.curves);d!==void 0&&u.currentPoint.distanceTo(d)>0&&u.lineTo(d.x,d.y)}),{offsetX:s+i.fontSize*i.letterSpacing,path:a}}getCharWidth(e,t){var r;return((r=this.font)==null?void 0:r.getAdvanceWidth(e,t.fontSize,{kerning:!0,letterSpacing:t.letterSpacing}))??0}getTextWidth(e,t){var r;return((r=this.font)==null?void 0:r.getAdvanceWidth(e,t.fontSize,{kerning:!0,letterSpacing:t.letterSpacing}))??0}computeSpaceWidthForLine(e,t,r){let n=this.getCharWidth(" ",r),i=e[t];if(i){let o=this.countSpaces(i.trimEnd());if(r.horizontalAlign===4&&t<e.length-1&&o){let a=r.width,s=this.getTextWidth(i,r);return(a-(s-o*n))/o}}return n}countSpaces(e){return(e.match(/ /g)||[]).length}};function g1t(e){if(e.length){let t=e[0];if(t instanceof Ru)return t.v1;if(t instanceof _u||t instanceof np)return t.v0}}var v1t=class{constructor(){this.objects=new Map,this.unreachable=new Set}getCached(e){return this.objects.get(e)}get size(){return this.objects.size}get(e,t,r){let n=this.objects.get(e);return n===void 0?(n=this.createObject(e,t,r),this.objects.set(e,n)):n.isShared=!0,n}forceDelete(e){let t=this.objects.get(e);t&&(this.disposeObject(t),this.objects.delete(e))}mutateIfUnique(e,t){let r=this.objects.get(e);if(r&&r.isShared!==!0)return this.objects.delete(e),this.objects.set(t,r),r}startGc(){this.unreachable=new Set(this.objects.keys())}markAsReachable(e,t){let r=this.objects.get(e);t===r&&this.unreachable.delete(e)}endGc(){this.unreachable.forEach(e=>{this.disposeObject(this.objects.get(e)),this.objects.delete(e)}),this.unreachable.clear()}dispose(){this.objects.forEach(e=>{this.disposeObject(e)}),this.objects.clear()}},CX=class extends v1t{constructor(e){super(),this.flatShading=e}disposeObject(e){e.dispose()}createObject(e,t,r){let n=FP(e,t,this.flatShading,r);return n.computeBoundingSphere(),n}},y1t={markNeedsUpdateRendererDirty:()=>{}},b1t=class extends bxt{constructor(e){super(),this.shared=e}create(e){return new Aue(e,this.shared)}},jU=class{constructor(e,t={}){if(this.data=e,this.geometryCache=new CX(!0),this.geometryCache2=new CX(!1),this.imageHolderCache=new b1t(this),this.thisContext={scene:y1t,shared:this},this.deletedMaterial=new Bz(da.defaultTwoLayerData("phong"),this.thisContext,""),this.deletedImage=new fm(DP.emptyImage,this),this.deletedVideo=new fm(AP.defaultVideo,this),this.materials={},this.images={},this.videos={},this.colors={},this.audios={},this.fonts={},this.variables={},this.mouseProperty=null,this.raycastProperty=null,this.requestRender=()=>{this._requestRender&&this._requestRender()},t.images)for(let[r,n]of Object.entries(t.images))this.addImage(r,n);if(t.videos)for(let[r,n]of Object.entries(t.videos))this.addVideo(r,n);if(t.audios)for(let[r,n]of Object.entries(t.audios))this.addAudio(r,n);this.reset(e)}setRequestRender(e){this._requestRender=e}setEntityOpContext(e){this.entityOpContext=e}reset(e,t=!1){this.resetLib(e.lib);for(let{id:r,data:n}of e.variables)this.addVariableHolder(r,n),t&&this.updateVariableHolder(r,n);for(let[r,n]of Object.entries(e.images))this.addImage(r,n);for(let[r,n]of Object.entries(e.videos))this.addVideo(r,n);for(let[r,n]of Object.entries(e.colors))this.addColor(r,n);for(let[r,n]of Object.entries(e.materials))this.addMaterial(r,n);for(let[r,n]of Object.entries(e.audios))this.addAudio(r,n);for(let[r,n]of Object.entries(e.fonts))this.addFont(r,n)}addMaterial(e,t){if(this.materials[e]){let r=this.materials[e];r.reset(t,this.thisContext),r.dispose()}else{let r=new Bz(t,this.thisContext,e);this.materials[e]=r}}deleteMaterial(e){this.materials[e]&&(this.materials[e].nodeMaterialDispose(),delete this.materials[e])}getMaterial(e){return this.materials[e]}getMaterialOrDeletedPlaceholder(e){return this.materials[e]??this.deletedMaterial}material(e){return typeof e=="string"?this.getMaterialOrDeletedPlaceholder(e):e==null?(console.error("material is undefined or null"),this.deletedMaterial):new FU(e,this.thisContext)}getMaterials(){return this.materials}addImage(e,t){return this.images[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.images[e].updateSrc(t.data),!0):(this.images[e]=new fm(t,this),!1)}deleteImage(e){let t=this.images[e];t&&(t.dispose(),delete this.images[e])}getDefaultImage(){return this.images.image_0}getImage(e){return this.images[e]??this.deletedImage}image(e){return typeof e=="string"?this.getImage(e):this.imageHolderCache.load(e)}addVideo(e,t){return this.videos[e]?(this.videos[e].updateSrc(t.data),!0):(this.videos[e]=new fm(t,this),!1)}deleteVideo(e){let t=this.videos[e];t&&(t.dispose(),delete this.videos[e])}getVideo(e){return this.videos[e]??this.deletedVideo}video(e){return typeof e=="string"?this.getVideo(e):this.imageHolderCache.load(e)}addColor(e,t){return this.colors[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),"a"in t?this.colors[e].setRGBA(t.r,t.g,t.b,t.a):this.colors[e].setRGBA(t.r,t.g,t.b,1),!0):("a"in t?this.colors[e]=new jP(t.r,t.g,t.b,t.a):this.colors[e]=new jP(t.r,t.g,t.b,1),!1)}updateColor(e,t){if(this.colors[e]){this.onColorOrImageUpdate&&this.onColorOrImageUpdate();let r=this.colors[e];return this.colors[e].r=t.r??r.r,this.colors[e].g=t.g??r.g,this.colors[e].b=t.b??r.b,this.colors[e].a=t.a??r.a,!0}return!1}deleteColor(e){this.colors[e]&&delete this.colors[e]}getColor(e){return this.colors[e]}color(e){let t;if(typeof e=="string"){let r=this.getColor(e);r?t=r:(console.warn("Tried to create color layer params with a color key that does not exist in the assets manager"),t=new As(0,0,0,0))}else return"a"in e?new As(e.r,e.g,e.b,e.a):new As(e.r,e.g,e.b,1);return t}addAudio(e,t){this.audios[e]=t}getAudio(e){let t=this.audios[e];if(t instanceof Kx)return t;{let r=new Kx({src:t.data});return this.audios[e]=r,r}}deleteAudio(e){let t=this.audios[e];t&&(t instanceof Kx&&t.dispose(),delete this.audios[e])}addFont(e,t){this.fonts[e]=new m1t(t),this.fonts[e].loadingPromise.then(()=>this.requestRender())}getFont(e){return this.fonts[e]}deleteFont(e){this.fonts[e]&&delete this.fonts[e]}dispose(){Object.keys(this.materials).forEach(e=>this.deleteMaterial(e)),this._requestRender=void 0,Object.values(this.audios).forEach(e=>{e instanceof Kx&&e.dispose()}),this.audios={},this.geometryCache.dispose(),this.geometryCache2.dispose()}addVariableHolder(e,t){return this.variables[e]===void 0?(this.variables[e]={value:t.value,locations:[]},"dynamicVariableType"in t&&(this.variables[e].dynamicVariablePlayState="Playing",this.variables[e].dynamicVariableToggleIsForward=void 0),!0):(this.variables[e].value=t.value,!1)}resetDynamicVariablePlayState(){for(let e in this.variables)this.variables[e].dynamicVariablePlayState!==void 0&&(this.variables[e].dynamicVariablePlayState="Playing",this.variables[e].dynamicVariableToggleIsForward=void 0)}updateVariableHolder(e,t){this.updateVariable(e,t.value)}updateVariable(e,t){if(this.variables[e]===void 0)return!1;this.variables[e].value=t;let r=t;for(;typeof r=="string";)r=this.variables[r].value;let n=this.entityOpContext.scene;for(let i=this.variables[e].locations.length-1;i>=0;i--){let o=this.variables[e].locations[i];if(o[0]==="material"){let a=o[1],s=r,l={scene:n,shared:this},u=o.slice(2);n.traverseMaterial(c=>{let h=c.root??c;h.uuid===a&&h.onVariableUpdate(u,s,l)});let d=this.materials[a];d&&d.onVariableUpdate(u,s,l)}else{let a=n.find(o[0]);if(a===void 0){this.variables[e].locations.splice(i,1);continue}if(o[1]!=="geometry"){for(let s=1;s<o.length-1;s++)a=a[o[s]];o[1]==="rotation"&&(r=Et.DEG2RAD*r),a[o[o.length-1]]=r}if(a=n.find(o[0]),Dr.is(a)){if(o[1]==="position"||o[1]==="rotation"||o[1]==="scale")a.onVariableUpdate();else if(o[1]==="geometry"){let s=a;a.component&&(s=a.component);let l=s.dataPatched;s.chooseGeoemtryCache(this).forceDelete(l.geometry),s.createGeometryDelayed(this.entityOpContext),s.onVariableUpdate(!0),s.instances.forEach(u=>{let d=u.dataPatched;u.chooseGeoemtryCache(this).forceDelete(d.geometry),u.createGeometryDelayed(this.entityOpContext),u.onVariableUpdate(!0)})}}}}return!0}deleteVariable(e){this.variables[e]&&delete this.variables[e]}getVariable(e,t){var r,n,i;if(Array.isArray(e)){if(e[0]==="mouse")return((r=this.mouseProperty)==null?void 0:r[e[1]])??0;if(e[0]==="raycast")return((n=this.raycastProperty)==null?void 0:n[e[1]])??0;let o=this.entityOpContext.scene.find(e[0]);if(e[1]==="width"||e[1]==="height"||e[1]==="depth")return o.geometry.userData.parameters[e[1]];for(let a=1;a<e.length;a++)o=o[e[a]];return e[1]==="rotation"&&(o*=Et.RAD2DEG),o}for(let o in this.variables){if(t===void 0)break;let a=this.variables[o],s=(i=a.locations)==null?void 0:i.findIndex(l=>Ra.equal(l,t));s!==void 0&&s!==-1&&a.locations.splice(s,1)}if(typeof e=="string"){let o=e,a=e;do{if(a=o,this.variables[o]===void 0)break;o=this.variables[o].value}while(typeof o=="string");return t&&this.variables[a]!==void 0&&this.variables[a].locations.push(t),o}else return e}getVariables(){return this.variables}getDynamicVariablePlayState(e){var t;return(t=this.variables[e])==null?void 0:t.dynamicVariablePlayState}setDynamicVariablePlayState(e,t){this.variables[e]!==void 0&&(this.variables[e].dynamicVariablePlayState=t)}getDynamicVariableToggleIsForward(e){var t;return(t=this.variables[e])==null?void 0:t.dynamicVariableToggleIsForward}setDynamicVariableToggleIsForward(e,t){this.variables[e]!==void 0&&(this.variables[e].dynamicVariableToggleIsForward=t)}resetLib(e){for(let[t,r]of Object.entries(e.images))this.addImage(t,r.asset);for(let[t,r]of Object.entries(e.audios))this.addAudio(t,r.asset);for(let[t,r]of Object.entries(e.colors))this.addColor(t,r.asset);for(let[t,r]of Object.entries(e.fonts))this.addFont(t,r.asset);for(let[t,r]of Object.entries(e.materials))this.addMaterial(t,r.asset);for(let[t,r]of Object.entries(e.videos))this.addVideo(t,r.asset);for(let[t,r]of Object.entries(e.variables))this.addVariableHolder(t,r.asset)}updateLibByOp(e,t){e.path[0]==="images"?e.path.length===1&&e.type===1?this.addImage(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteImage(e.id):e.path[0]==="videos"?e.path.length===1&&e.type===1?this.addVideo(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteVideo(e.id):e.path[0]==="audios"?e.path.length===1&&e.type===1?this.addAudio(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteAudio(e.id):e.path[0]==="colors"?e.path.length===1&&e.type===1?this.addColor(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteColor(e.id):e.path[0]==="materials"?e.path.length===1&&e.type===1?this.addMaterial(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteMaterial(e.id):e.path[0]==="fonts"?e.path.length===1&&e.type===1?this.addFont(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteFont(e.id):e.path[0]==="variables"?e.path.length===1&&e.type===1?this.addVariableHolder(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteVariable(e.id):e.path[0]==="components"&&t.updateByLibOp(e,this)}updateByOp(e,t,r){this.data=t,e.path[0]==="images"?e.path.length===2&&e.type===0?e.props.data&&this.getImage(e.path[1]).updateSrc(e.props.data):e.path.length===1&&e.type===1?this.addImage(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteImage(e.id):e.path[0]==="videos"?e.path.length===2&&e.type===0?e.props.data&&this.getVideo(e.path[1]).updateSrc(e.props.data):e.path.length===1&&e.type===1?this.addVideo(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteVideo(e.id):e.path[0]==="audios"?e.path.length===2&&e.type===0?e.props.data&&this.addAudio(e.path[1],t.audios[e.path[1]]):e.path.length===1&&e.type===1?this.addAudio(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteAudio(e.id):e.path[0]==="colors"?e.path.length===2&&e.type===0?this.updateColor(e.path[1],e.props):e.path.length===1&&e.type===1?this.addColor(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteColor(e.id):e.path[0]==="materials"?e.path.length===1&&e.type===1?this.addMaterial(e.id,e.data):e.path.length===1&&e.type===2?this.deleteMaterial(e.id):e.path.length>1&&this.getMaterial(e.path[1]).updateByOp(sa.drop(e,2),t.materials[e.path[1]],{shared:this,scene:r}):e.path[0]==="fonts"?e.path.length===2&&e.type===0?this.updateFont(e.path[1],e,r):e.path.length===1&&e.type===1?this.addFont(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteFont(e.id):e.path[0]==="variables"?e.path.length===2&&e.type===0&&"value"in e.props?this.updateVariable(e.path[1],e.props.value):e.path.length===1&&e.type===4?this.addVariableHolder(e.id,e.data):e.path.length===1&&e.type===5&&this.deleteVariable(e.id):e.path[0]==="lib"&&this.updateLibByOp(sa.drop(e,1),r)}updateFont(e,t,r){if(t.props.url){let n=this.getFont(e),i={...this.data.fonts[e],url:t.props.url};n.update(i),n.loadingPromise.then(()=>this.requestRender()),r.updateFont(e,this)}}};new jU(vu.emptyData());var wb=class extends Ts{updateByPatchedOp(e,t,r){if(super.updateByPatchedOp(e,t,r),vvt(e.path,["materials"])!==null&&e.type===0&&Array.isArray(this.material))for(let[n,i]of Object.entries(e.props)){let o=r.shared.material(i);this.material[Number(n)]=o}else if(kl(e.path,["material"])&&this.material instanceof op)"material"in t&&typeof t.material!="string"&&this.material.updateByOp(sa.drop(e,1),t.material,r);else if(kl(e.path,["materials","*"])&&Array.isArray(this.material)){let n=e.path[1];if("materials"in t&&n<this.material.length){let i=t.materials[n];typeof i!="string"&&this.material[n].updateByOp(sa.drop(e,2),i,r)}}}get needsAO(){return this.material!==void 0?(Array.isArray(this.material)?this.material[0]:this.material).hasAO:!1}updateState(e,t){var n,i;super.updateState(e,t),e.castShadow!==void 0&&(this.castShadow=e.castShadow),e.receiveShadow!==void 0&&(this.receiveShadow=e.receiveShadow);let r=this.dataPatched;if(((n=e.geometry)==null?void 0:n.type)!=="NonParametricGeometry"&&"material"in e&&e.material!==void 0&&(this.disposeMaterial(),this.material=t.shared.material(e.material).getFlavor(r.flatShading,r.side,r.wireframe),t.scene.markNeedsUpdateRendererDirty()),((i=e.geometry)==null?void 0:i.type)==="NonParametricGeometry"&&("materials"in e&&e.materials!==void 0?(this.disposeMaterial(),this.material=e.materials.map(o=>t.shared.material(o).getFlavor(r.flatShading,r.side,r.wireframe)),t.scene.markNeedsUpdateRendererDirty()):"material"in e&&e.material!==void 0&&(this.disposeMaterial(),this.material=[t.shared.material(e.material).getFlavor(r.flatShading,r.side,r.wireframe)],t.scene.markNeedsUpdateRendererDirty())),e.flatShading!==void 0||e.wireframe!==void 0||e.side!==void 0)if(Array.isArray(this.material))for(let o=0;o<this.material.length;o++)this.material[o]=this.material[o].getFlavor(r.flatShading,r.side,r.wireframe);else this.material=this.material.getFlavor(r.flatShading,r.side,r.wireframe)}disposeMaterial(){this.material&&Lse(this.material).forEach(e=>{e instanceof op&&(e instanceof Bz||e.nodeMaterialDispose())})}dispose(){this.disposeMaterial(),super.dispose()}},AX=new F,EX=new or,MX=new or,x1t=new F,PX=new qe,Ua=class extends wb{constructor(e,t,r){super(e,t),this.data=t,this.localGeometry=void 0,t.bindMode&&t.bindMatrix&&(this.isSkinnedMesh=!0,this.bindMode=t.bindMode,this.bindMatrix=new qe().fromArray(t.bindMatrix),this.bindMatrixInverse=new qe)}chooseGeoemtryCache(e){return e.geometryCache}markGeometryAsReachable(e){this.geometryCreateDeleyed instanceof Nt&&this.chooseGeoemtryCache(e).markAsReachable(this.dataPatched.geometry,this.geometryCreateDeleyed)}get geometry(){if(this.localGeometry!==void 0)return this.localGeometry;if(this.geometryCreateDeleyed instanceof jU){let e=this.geometryCreateDeleyed,t=this.chooseGeoemtryCache(e);this.geometryCreateDeleyed=t.get(this.dataPatched.geometry,e,this)}return this.geometryCreateDeleyed}set geometry(e){this.localGeometry=e}get is2DAndNoDepth(){let e=this.dataPatched.geometry;return PP.is2DParametricMesh(e.type)&&e.depth===0}get is2DType(){return PP.is2DParametricMesh(this.geometry.userData.type)}get isNonParametric(){return this.geometry.userData.type==="NonParametricGeometry"}updateByPatchedOp(e,t,r){super.updateByPatchedOp(e,t,r),kl(e.path,["geometry"])&&this.updateByPatchedOpGeometry(sa.drop(e,1),t.geometry,r)}removeInteractionGeometry(){var e;(e=this.localGeometry)==null||e.dispose(),this.localGeometry=void 0}updateGeometryInteractions(e,t){var n;this.invalidateDownstreamBooleanData();let r=this.data.geometry.type;if(r==="NonParametricGeometry"||r==="SubdivGeometry"){let i=e;if(this.localGeometry===void 0){let u={...this.data.geometry,...i};this.localGeometry=FP(u,t,this.data.flatShading,this)}let o,a,s;i.scaleBaked?[o,a,s]=i.scaleBaked:{width:o,height:a,depth:s}=i;let l=this.localGeometry.userData;l.sxPrev!==void 0&&Dz(this.localGeometry.attributes,o/l.sxPrev,a/l.syPrev,s/l.szPrev),l.sxPrev=o,l.syPrev=a,l.szPrev=s}else{let i={...this.data.geometry,...e};(n=this.localGeometry)==null||n.dispose(),this.localGeometry=FP(i,t,this.data.flatShading,this)}}refreshAttachedCloners(e){for(let t of this.attachedSurfaceCloners)e.scene.addPendingUpdateCloner(t.object)}refreshAttachedPaths(e){for(let t of this.attachedPaths)e.scene.addPendingCommand(()=>t.updateShape())}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.refreshAttachedCloners(e),this.refreshAttachedPaths(e)}updateByPatchedOpGeometry(e,t,r){var i;let n=!1;e.type===0&&e.path.length===0&&Object.keys(e.props).includes("scaleBaked")&&this.geometryCreateDeleyed instanceof Oa&&this.chooseGeoemtryCache(r.shared).mutateIfUnique(this.geometryCreateDeleyed.data,t)===this.geometryCreateDeleyed&&(n=!0,this.geometryCreateDeleyed.mutateDirectlyScaleBaked(t,e.props.scaleBaked),this.refreshAttachedCloners(r),this.refreshAttachedPaths(r)),n||((i=r.scene)==null||i.markGeometryCacheDirty(),this.createGeometryDelayed(r)),this.resetBBoxNeedsUpdate(),this.invalidateDownstreamBooleanData()}updateGeometryOnStateUpdate(e,t){this.createGeometryDelayed(t)}updateState(e,t){e.geometry!==void 0&&this.updateGeometryOnStateUpdate(e.geometry,t),super.updateState(e,t)}updateGeometryGroupsIfNeeded(){var e;Array.isArray(this.material)&&this.geometry.groups.length===0&&this.geometry.addGroup(0,Math.max(((e=this.geometry.getIndex())==null?void 0:e.count)??0,this.geometry.getAttribute("position").count),0)}updateEntityBoxSize(e,t){let r=this.geometry.userData.parameters;this.is2DType?e.set(0,0,r.depth*.5):this.isNonParametric?(e.setScalar(0),this.geometry.boundingSphere&&e.copy(this.geometry.boundingSphere.center),t.set(r.width,r.height,r.depth??0).multiplyScalar(.5)):e.setScalar(0),t.set(r.width,r.height,r.depth??0).multiplyScalar(.5)}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"&&this.bindMatrixInverse.copy(this.bindMatrix).invert()}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(e){let t=new or,r=this.geometry.attributes.skinWeight;for(let n=0,i=r.count;n<i;n++){t.fromBufferAttribute(r,n);let o=1/t.manhattanLength();o!==1/0?t.multiplyScalar(o):t.set(1,0,0,0),r.setXYZW(n,t.x,t.y,t.z,t.w)}}boneTransform(e,t){let r=this.skeleton;if(r===void 0)return;let n=this.geometry;EX.fromBufferAttribute(n.attributes.skinIndex,e),MX.fromBufferAttribute(n.attributes.skinWeight,e),AX.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let i=0;i<4;i++){let o=MX.getComponent(i);if(o!==0){let a=EX.getComponent(i);PX.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(x1t.copy(AX).applyMatrix4(PX),o)}}return t.applyMatrix4(this.bindMatrixInverse)}};function w1t(e){var a,s;if(e.geometry.attributes.extrudeNormal||!e.geometry.attributes.position||!e.geometry.attributes.normal)return;let t=new Map,r=e.geometry.attributes,n=r.position.array,i=r.normal.array,o=new Float32Array(n.length);for(let l=0;l<n.length;l+=3){let u=`${n[l]}_${n[l+1]}_${n[l+2]}`,d=new F(i[l],i[l+1],i[l+2]);t.has(u)?(a=t.get(u))==null||a.normals.push(d):t.set(u,{normals:[d],result:new F})}t.forEach((l,u)=>{for(let d of l.normals)l.result.add(d);l.result.divideScalar(l.normals.length)});for(let l=0;l<n.length;l+=3){let u=`${n[l]}_${n[l+1]}_${n[l+2]}`,d=(s=t.get(u))==null?void 0:s.result;d&&(o[l]=d.x,o[l+1]=d.y,o[l+2]=d.z)}e.geometry.setAttribute("extrudeNormal",new ft(o,3))}function S1t(e){if(e.geometry.attributes.extrudeNormals||!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,r=new Float32Array(t.length),n=new F;for(let i=0;i<t.length;i+=3)n.set(t[i],t[i+1],t[i+2]).normalize(),r[i]=n.x,r[i+1]=n.y,r[i+2]=n.z;e.geometry.setAttribute("extrudeNormal",new ft(r,3))}function UU(e){if(Array.isArray(e.material)){for(let t of e.material)if(t.getLayersOfType("outline").length===0)return}else if(!(e.material instanceof op)||e.material.getLayersOfType("outline").length===0)return;e instanceof Ua&&e.is2DAndNoDepth?S1t(e):w1t(e)}function $U(e){if(!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,r=new Float32Array(t.length),n=parseInt(e.uuid.replace(/\D/g,"")),i=[Et.seededRandom(n),Et.seededRandom(n+1e4),Et.seededRandom(n+2e4)];for(let o=0;o<t.length;o++)r[o]=i[o%3];e.geometry.setAttribute("randomColor",new Kt(r,3))}RU.then(e=>{});var Ju=new ki,gx=new F;function _1t(e){let t=!1;return e.scene.objects.traverse((r,n)=>{n.type==="Mesh"&&n.geometry.type==="SubdivGeometry"&&(t=!0)}),t}var dS=class extends Ua{constructor(e,t,r){super(e,t,r),this.data=t,this.hiddenMatrixOld=new qe,this.smoothShading=!0,this.skipReactionUpdate=!1}chooseGeoemtryCache(e){return this.dataPatched.flatShading?e.geometryCache:e.geometryCache2}get subdivPointerNew(){return this.localGeometry!==void 0?this.subdivPointer:this.geometry.ensureSubdivPointer()}get originalGeometryNew(){return this.localGeometry!==void 0?this.originalGeometry:this.geometry.originalGeometry}get phongAngle(){return this.data.geometry.phongAngle??45}updateEntityBoxSize(e,t){let r=this.geometry.userData.parameters;e.copy(this.originalGeometryNew.boundingSphere.center),t.set(r.width,r.height,r.depth??0).multiplyScalar(.5)}createGeometryByControls(e){var o,a,s;if(this.skipReactionUpdate===!0)return;let t=(o=this.localGeometry)==null?void 0:o.uuid,{originalGeometry:r,subdividedGeometry:n,subdivPointer:i}=Oa.build(e,this.subdivPointer,this.smoothShading,this.hasNonUniformScale?this.shearScale:void 0);this.subdivPointer=i,r!==void 0&&((a=this.originalGeometry)==null||a.dispose(),this.originalGeometry=r),n!==void 0&&((s=this.subdividedGeometry)==null||s.dispose(),this.subdividedGeometry=n??void 0),this.localGeometry=this.subdividedGeometry??this.originalGeometry,UU(this),$U(this),this.calcBoundingBox(),t&&(this.localGeometry.uuid=t)}updateState(e,t){if(super.updateState(e,t),e.flatShading!==void 0){let r=this.material;this.material=r.getFlavor(!1,r.side,r.wireframe),this.smoothShading=!e.flatShading,this.createGeometryDelayed(t)}}updateMesh(e=!1){Oa.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1,this.originalGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0),this.subdividedGeometry&&Oa.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1,this.subdividedGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0)}updateTopology(){this.originalGeometry.dispose(),this.originalGeometry=Oa.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1),this.subdividedGeometry&&(this.subdividedGeometry.dispose(),this.subdividedGeometry=Oa.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1)),this.localGeometry=this.subdividedGeometry??this.originalGeometry}raycast(e,t){let r=this.localGeometry;this.localGeometry=this.originalGeometryNew,Ts.prototype.raycast.call(this,e,t),this.localGeometry=r}activateSVDCompensation(){!this.hasNonUniformScale||(this.matrix.copy(this.matrixWorldRigid),this.hiddenMatrixOld.copy(this.hiddenMatrix),this.hiddenMatrix.copy(this.parent.matrixWorld).invert())}deactivateSVDCompensation(){!this.hasNonUniformScale||(this.updateMatrix(),this.hasNonUniformScale=void 0,this.hiddenMatrix.copy(this.hiddenMatrixOld))}calcBoundingBox(){let e=this.originalGeometry;e.boundingSphere===null&&(e.boundingSphere=new Ps,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let t=e.attributes.position,r=e.boundingSphere.center;Ju.setFromBufferAttribute(t),Ju.getCenter(r),e.boundingSphere.radius=r.distanceTo(Ju.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),Ju.getSize(gx),this.hasNonUniformScale&&gx.divide(this.scale);let n={width:gx.x,height:gx.y,depth:gx.z};return this.geometry.userData.parameters=n,n}updateBoundingSphere(e){let t=this.originalGeometry;Ju.min.set(e[0],e[2],e[4]),Ju.max.set(e[1],e[3],e[5]),this.hasNonUniformScale&&(Ju.min.applyMatrix4(this.shearScaleInv),Ju.max.applyMatrix4(this.shearScaleInv)),t.boundingSphere===null&&(t.boundingSphere=new Ps);let r=t.boundingSphere.center;Ju.getCenter(r),t.boundingSphere.radius=r.distanceTo(Ju.max)}freeSubdivPointer(){var e,t;this.subdivPointer&&(Oa.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0),this.localGeometry=void 0,(e=this.originalGeometry)==null||e.dispose(),(t=this.subdividedGeometry)==null||t.dispose()}dispose(){super.dispose(),this.freeSubdivPointer()}updateByPatchedOpGeometry(e,t,r){super.updateByPatchedOpGeometry(e,t,r),this.localGeometry&&this.createGeometryByControls(t)}},TX=-1,C1t=1,A1t={x:[1,0,0],"-x":[-1,0,0],y:[0,1,0],"-y":[0,-1,0],z:[0,0,1],"-z":[0,0,-1]},E1t={polygon_center:0,edge:1,vertex:2},sA=(e,t)=>(r,n)=>!t||r===0||e===0?0:e*n/100,nr=(e,t)=>{let r=Math.abs(t),n=r*-1;return(e-TX)*(r-n)/(C1t-TX)+n};function M1t(e){let t=[],r={};for(var n=0,i=e.length;n<i;n++){var o=JSON.stringify(e[n].pos.map(a=>Math.round(a*1e4)/1e4));r[o]||(t.push(e[n]),r[o]=!0)}return t}var P1t=new F,lA=new F,T1t=new F,O1t=new F;function Cy(e,t){let r=T1t.fromArray(e),n=O1t.fromArray(t);lA.copy(n).sub(r);let i=lA.length();return lA.normalize().multiplyScalar(i*.5),P1t.copy(r).add(lA).toArray()}var Dl=new aa,uA=new F,UP=new F,Zp=new F;function I1t(e){let t=[];for(let r=0;r<=e.index.count;r++)if(uA.fromArray(e.index.array,r*3),Dl.setFromAttributeAndIndices(e.attributes.position,uA.x,uA.y,uA.z),Dl.getNormal(UP),Dl.getMidpoint(Zp),!(isNaN(Zp.x)||isNaN(Zp.y)||isNaN(Zp.z))){let{a:n,b:i,c:o}=Dl,a=n.toArray(),s=i.toArray(),l=o.toArray(),u=n.distanceTo(i),d=i.distanceTo(o),c=o.distanceTo(n),h=Cy(a,s),f=Cy(s,l),m=Cy(l,a),p=[u,d,c],g=Math.max(...p),v=p.filter(x=>Math.round(x)===Math.round(g)).length>1,b=[],y=Dl.getMidpoint(Zp).toArray();g===u&&!v&&(b=[f,m,m],y=h),g===d&&!v&&(b=[h,m,m],y=f),g===c&&!v&&(b=[h,f,f],y=m),v&&(b=[h,f,m]),t.push({vertices:[a,s,l],faceCenters:b,midpoint:y,norm:Dl.getNormal(UP).toArray()})}return t}function D1t(e){let t=[],{position:r}=e.attributes;for(let n=0;n<r.count;n++){Dl.setFromAttributeAndIndices(r,n*3,n*3+1,n*3+2),Dl.getNormal(UP),Dl.getMidpoint(Zp);let i=Dl.a.toArray(),o=Dl.b.toArray(),a=Dl.c.toArray();t.push({vertices:[i,o,a],faceCenters:[Cy(i,o),Cy(o,a),Cy(a,i)],midpoint:Zp.toArray(),norm:UP.toArray()})}return t}var R1t=4,k1t=.5,BR=e=>.5*(1-Math.cos(e*Math.PI)),L1t=class{constructor(){this.perlin=new Array(4095+1)}noise(e,t=0,r=0){if(this.perlin==null){this.perlin=new Array(4095+1);for(let g=0;g<4095+1;g++)this.perlin[g]=Math.random()}e<0&&(e=-e),t<0&&(t=-t),r<0&&(r=-r);let n=Math.floor(e),i=Math.floor(t),o=Math.floor(r),a=e-n,s=t-i,l=r-o,u,d,c=0,h=.5,f,m,p;for(let g=0;g<R1t;g++){let v=n+(i<<4)+(o<<8);u=BR(a),d=BR(s),f=this.perlin[v&4095],f+=u*(this.perlin[v+1&4095]-f),m=this.perlin[v+16&4095],m+=u*(this.perlin[v+16+1&4095]-m),f+=d*(m-f),v+=256,m=this.perlin[v&4095],m+=u*(this.perlin[v+1&4095]-m),p=this.perlin[v+16&4095],p+=u*(this.perlin[v+16+1&4095]-p),m+=d*(p-m),f+=BR(l)*(m-f),c+=f*h,h*=k1t,n<<=1,a*=2,i<<=1,s*=2,o<<=1,l*=2,a>=1&&(n++,a--),s>=1&&(i++,s--),l>=1&&(o++,l--)}return c}noiseSeed(e){let t=(()=>{let r,n;return{setSeed(i){n=r=(i??Math.random()*4294967296)>>>0},getSeed(){return r},rand(){return n=(1664525*n+1013904223)%4294967296,n/4294967296}}})();t.setSeed(e),this.perlin=new Array(4095+1);for(let r=0;r<4095+1;r++)this.perlin[r]=t.rand()}},N1t=L1t,OX=new F,IX=new qe,DX=new ab;function RX(e){let t=!1;return e.scene.objects.traverse((r,n)=>{n.type==="Mesh"&&n.geometry.type==="TextGeometry"&&(t=!0)}),t}var Lue=class extends Ua{constructor(e,t,r){super(e,t,r),this.data=t}get textGeometry(){return this.geometry}get charWidths(){return this.textGeometry.charWidths}get charCoords(){return this.textGeometry.charCoords}get wrappedText(){return this.textGeometry.wrappedText}get font(){return this.textGeometry.font}get initialOffsetY(){var t;let e=this.dataPatched;return((t=this.font)==null?void 0:t.getLineInitialOffsetY(this.lineHeight,this.wrappedText.length,e.geometry.height,this.fontScale,e.geometry.verticalAlign))??0}get fontScale(){let e=this.dataPatched;return this.font?e.geometry.fontSize/this.font.unitsPerEm:1}get AD(){return Math.abs(this.ascender-this.descender)}get ascender(){var e;return(((e=this.font)==null?void 0:e.ascender)??1)*this.fontScale}get descender(){var e;return(((e=this.font)==null?void 0:e.descender)??1)*this.fontScale}get lineHeight(){let e=this.dataPatched;return e.geometry.fontSize*e.geometry.lineHeight}raycast(e,t){let{matrixWorld:r}=this;if(!(isNaN(e.ray.origin.x)||this.scale.x===0||this.scale.y===0||this.scale.z===0)&&(IX.copy(r).invert(),DX.copy(e.ray).applyMatrix4(IX),DX.intersectBox(this.singleBBox,OX))){let n=OX.applyMatrix4(r),i=e.ray.origin.distanceTo(n);t.push({distance:i,point:n.clone(),object:this})}}},_a=1e-4,ec,Nue,zue,Bue,kX=new F,LX=new F;RU.then(e=>{ec=e,Nue=[ec.get_face_center,ec.get_edge_midpoint,ec.get_vertex_position],zue=[ec.get_face_normal,ec.get_edge_normal,ec.get_vertex_normal],Bue=[ec.face_count,ec.edge_count,ec.vertex_count]});var z1t=new qe,B1t=new qe,Nh=new F,Tp=new F,vx=new F,FR=new F,F1t=new F,j1t=new F,vd=new N1t,Eu=class extends AU(hn){constructor(e,t){super(),this.parameters=t,this.objectForSample=void 0,this._pendingMediaLoad=!1,this.object=e}resetOnMove(){this.removeFromParent(),this.parent=null}expandClones(e){if(this.parent===null)this.updateState(this.parameters,e);else for(let t of this.children)t instanceof ua&&t.expand()}invalidateTransform(e){this.matrixWorldNeedsUpdate=!0,this.traverse(t=>{t instanceof ua&&t.object===e&&(t.matrixWorldNeedsUpdate=!0)})}onObjUpdateMatrix(){this.parameters.type!=="toObject"&&(this.matrixWorldNeedsUpdate=!0)}update(){switch(this._updateCount(),this.parameters.type){case"radial":this._updateRadial(this.parameters);break;case"linear":this._updateLinear(this.parameters);break;case"grid":this._updateGrid(this.parameters);break;case"toObject":this._updateToObject(this.parameters)}for(let e of this.children)e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD())}_updateCount(e){let t;if(e!==void 0?t=e:t=this.parameters.type==="grid"?Math.round(this.parameters.grid.count[0])*Math.round(this.parameters.grid.count[1])*Math.round(this.parameters.grid.count[2]):this.parameters.count,this.parameters.type==="toObject"&&!this.parameters.toObject.object&&(t=0),this.parameters.type==="toObject"&&this.objectForSample){for(let n=0,i=this.children.length;n<i;++n)this.remove(this.children[0]);let r=this.children;if(r.length===t)return;if(r.length<t)for(let n=0,i=t-r.length;n<i;++n){let o=new ua(this.object);o.expand(),this.add(o)}else for(let n=0,i=r.length-t;n<i;++n)this.remove(r[n])}else{if(this.children.length===t)return;if(this.children.length<t)for(let r=0,n=t-this.children.length;r<n;++r){let i=new ua(this.object);i.expand(),this.add(i)}else for(let r=0,n=this.children.length-t;r<n;++r)this.remove(this.children[0])}}_updateRadial(e){let t=e.radial,r=t.start*Et.DEG2RAD,n=t.end*Et.DEG2RAD,i=r-n,o=new Eo(t.rotation[0],t.rotation[1],t.rotation[2]),a;switch(t.axis){case"z":a=new F(0,0,1);break;case"y":a=new F(0,1,0);break;default:case"x":a=new F(1,0,0);break}let s=e.randomnessObject??bf.defaultData([1,1,1]).randomnessObject,l=s.noiseType==="perlin";vd.noiseSeed(s.seed);let u=vR((0,dx.default)(s.seed)),d=sA(s.strength,this.parameters.randomness);for(let[c,h]of this.children.entries()){let f=c*(s.freqScale/10)+s.movement,m=l?vd.noise(f):u(f,f),p=c+1;h.scale.x=t.scale[0]+d(p,nr(m,s.scale[0]))||_a,h.scale.y=t.scale[1]+d(p,nr(m,s.scale[1]))||_a,h.scale.z=t.scale[2]+d(p,nr(m,s.scale[2]))||_a,h.position.setScalar(0);let g=i/e.count*c-r;switch(t.axis){case"x":h.rotation.set(0,g,0);break;case"y":h.rotation.set(0,0,g);break;case"z":h.rotation.set(g,0,0);break}h.translateOnAxis(a,t.radius),h.position.x+=t.position[0]+d(p,nr(m,s.position[0])),h.position.y+=t.position[1]+d(p,nr(m,s.position[1])),h.position.z+=t.position[2]+d(p,nr(m,s.position[2]));let v=d(p,nr(m,s.rotation[0])),b=d(p,nr(m,s.rotation[1])),y=d(p,nr(m,s.rotation[2]));t.alignment===!0?(h.rotation.x+=o.x+v,h.rotation.y+=o.y+b,h.rotation.z+=o.z+y):h.rotation.set(o.x+v,o.y+b,o.z+y)}}_updateLinear(e){if(e.type!=="linear")throw new Error;let t=e.linear,r=new Eo(t.rotation[0],t.rotation[1],t.rotation[2]),n=e.randomnessObject??bf.defaultData([1,1,1]).randomnessObject,i=n.noiseType==="perlin";vd.noiseSeed(n.seed);let o=vR((0,dx.default)(n.seed)),a=sA(n.strength,this.parameters.randomness);for(let[s,l]of this.children.entries()){let u=s*(n.freqScale/10)+n.movement,d=i?vd.noise(u):o(u,u),c=s+1,h=a(c,nr(d,n.rotation[0])),f=a(c,nr(d,n.rotation[1])),m=a(c,nr(d,n.rotation[2]));l.scale.x=1+(t.scale[0]-1)*s+a(c,nr(d,n.scale[0]))||_a,l.scale.y=1+(t.scale[1]-1)*s+a(c,nr(d,n.scale[1]))||_a,l.scale.z=1+(t.scale[2]-1)*s+a(c,nr(d,n.scale[2]))||_a,l.rotation.x=r.x*s+h,l.rotation.y=r.y*s+f,l.rotation.z=r.z*s+m,l.position.x=t.position[0]*s+a(c,nr(d,n.position[0])),l.position.y=t.position[1]*s+a(c,nr(d,n.position[1])),l.position.z=t.position[2]*s+a(c,nr(d,n.position[2]))}}_updateGrid(e){let t=0,r=e.grid,n=e.randomnessObject??bf.defaultData([1,1,1]).randomnessObject,i=sA(n.strength,this.parameters.randomness),o=n.noiseType==="perlin";vd.noiseSeed(n.seed);let a=Kyt((0,dx.default)(n.seed));if(r.useCenter===!0){let s={x:r.count[0]%2===0?2:1,y:r.count[1]%2===0?2:1,z:r.count[2]%2===0?2:1},l=new F(r.size[0]*(r.count[0]-s.x)*.5,r.size[1]*(r.count[1]-s.y)*.5,r.size[2]*(r.count[2]-s.z)*.5);for(let u=0;u<r.count[0];u++)for(let d=0;d<r.count[1];d++)for(let c=0;c<r.count[2];c++){let h=[(u+1)*(n.freqScale/10)+n.movement,(d+1)*(n.freqScale/10)+n.movement,(c+1)*(n.freqScale/10)+n.movement],f=o?vd.noise(...h):a(...h),m=this.children[t++];m.scale.x=1+i(t,nr(f,n.scale[0]))||_a,m.scale.y=1+i(t,nr(f,n.scale[1]))||_a,m.scale.z=1+i(t,nr(f,n.scale[2]))||_a;let p=i(t,nr(f,n.rotation[0])),g=i(t,nr(f,n.rotation[1])),v=i(t,nr(f,n.rotation[2]));m.rotation.set(p,g,v),m.position.x=r.size[0]*u-l.x+i(t,nr(f,n.position[0])),m.position.y=r.size[1]*d-l.y+i(t,nr(f,n.position[1])),m.position.z=r.size[2]*c-l.z+i(t,nr(f,n.position[2]))}}else for(let s=0;s<r.count[0];s++)for(let l=0;l<r.count[1];l++)for(let u=0;u<r.count[2];u++){let d=[(s+1)*(n.freqScale/10)+n.movement,(l+1)*(n.freqScale/10)+n.movement,(u+1)*(n.freqScale/10)+n.movement],c=o?vd.noise(...d):a(...d),h=this.children[t++];h.scale.x=1+i(t,nr(c,n.scale[0]))||_a,h.scale.y=1+i(t,nr(c,n.scale[1]))||_a,h.scale.z=1+i(t,nr(c,n.scale[2]))||_a;let f=i(t,nr(c,n.rotation[0])),m=i(t,nr(c,n.rotation[1])),p=i(t,nr(c,n.rotation[2]));h.rotation.set(f,m,p),h.position.x=r.size[0]*s+i(t,nr(c,n.position[0])),h.position.y=-r.size[1]*l+i(t,nr(c,n.position[1])),h.position.z=-r.size[2]*u+i(t,nr(c,n.position[2]))}}_updateToObject(e){var p;if(e.type!=="toObject")throw new Error;let{toObject:t}=e,r=new Eo(t.rotation[0],t.rotation[1],t.rotation[2]),n=e.randomnessObject??bf.defaultData([1,1,1]).randomnessObject,i=n.noiseType==="perlin";vd.noiseSeed(n.seed);let o=vR((0,dx.default)(n.seed)),a=sA(n.strength,this.parameters.randomness);if(!t.object){for(let[,g]of this.children.entries())g.position.set(0,0,0),g.scale.setScalar(1),g.rotation.set(0,0,0);this.objectForSample=void 0;return}if(!this.objectForSample)return;if(this.objectForSample instanceof Lue)if(!((p=this.objectForSample.font)!=null&&p.isLoaded)||this.objectForSample.geometry.attributes.position===void 0){this._pendingMediaLoad=!0;return}else this._pendingMediaLoad=!1;if(this.objectForSample.geometry===void 0&&this.objectForSample.isAncestorOf(this.object.uuid)){console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) seem to be a child/descendant of the object it's being cloned to. Please re-parent it so that they are siblings instead.`);return}let s=this.getSubdivData(),l=[],u=g=>{let v=g.length,b=g.map(S=>S[0]).reduce((S,w)=>S+w,0),y=g.map(S=>S[1]).reduce((S,w)=>S+w,0),x=g.map(S=>S[2]).reduce((S,w)=>S+w,0);return[b/v,y/v,x/v]},d=g=>Math.round(g*1e6)/1e6;s.forEach(g=>{let v=s.filter(b=>d(g.pos[0])===d(b.pos[0])&&d(g.pos[1])===d(b.pos[1])&&d(g.pos[2])===d(b.pos[2]));v.length>1?l.push({pos:g.pos,norm:u(v.map(b=>b.norm))}):l.push(g)});let c=M1t(l);if(c.length>0){let g=Math.round(c.length*t.count/100);this._updateCount(g)}else{let g=this.objectForSample.geometry.getAttribute("position");if(!g||isNaN(g.count)||g.count===0){console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) cannot be cloned on the surface of "${this.objectForSample.name}" (${this.objectForSample.uuid}) because the latter does not have a valid geometry.`);return}}this.objectForSample.updateMatrixWorld();let h=new Xyt(this.objectForSample).build(),f=A1t[t.axis],m=this.children;h.setRandomGenerator((0,dx.default)(this.object.uuid+t.seed));for(let[g,v]of m.entries()){let b=g*(n.freqScale/10)+n.movement,y=i?vd.noise(b):o(b,b),x=g+1,S=a(x,nr(y,n.rotation[0])),w=a(x,nr(y,n.rotation[1])),_=a(x,nr(y,n.rotation[2]));t.spreadType==="random"?h.sample(vx,FR):(c.length&&(vx.fromArray(c[g].pos),FR.fromArray(c[g].norm)),this.objectForSample instanceof dS&&vx.applyMatrix4(z1t.copy(this.objectForSample.matrixWorld).invert())),vx.applyMatrix4(this.object.hiddenMatrix.clone().invert()),v.position.copy(vx),Nh.fromArray(f);let C=t.align==="normal"?FR:this.object.getWorldDirection(j1t),E=Tp.fromArray(t.position);Tp.x+=Tp.x+a(x,nr(y,n.position[0])),Tp.y+=Tp.y+a(x,nr(y,n.position[1])),Tp.z+=Tp.z+a(x,nr(y,n.position[2]));let A=Math.acos(C.dot(Nh)),M=F1t.crossVectors(Nh,C).normalize(),I=B1t.makeRotationAxis(M,A),O=C.clone().cross(this.object.up).normalize(),T=O.clone().cross(C).normalize(),D=new qe().makeBasis(O,C,T),N=new F(Nh.y,Nh.z,Nh.x).normalize(),k=N.clone().cross(Nh).normalize(),R=new qe().makeBasis(N,Nh,k).invert(),z=new qe().multiplyMatrices(D,R);v.rotation.setFromRotationMatrix(z),E.applyMatrix4(I),v.position.add(E),v.rotation.x=v.rotation.x+r.x+S,v.rotation.y=v.rotation.y+r.y+w,v.rotation.z=v.rotation.z+r.z+_,v.scale.setScalar(1),v.scale.x=v.scale.x+t.scale[0]+a(x,nr(y,n.scale[0]))||_a,v.scale.y=v.scale.y+t.scale[1]+a(x,nr(y,n.scale[1]))||_a,v.scale.z=v.scale.z+t.scale[2]+a(x,nr(y,n.scale[2]))||_a,v.scale.multiply(this.object.scale),v.hiddenMatrix=this.object.hiddenMatrix}}getSubdivData(){if(!this.objectForSample)return[];let e=this.parameters.toObject.spreadType;if(e==="random")return[];if(this.objectForSample instanceof dS){let t=this.objectForSample,r=E1t[e],n=Bue[r],i=Nue[r],o=zue[r],a=[],s=n(t.subdivPointerNew);for(let l=0;l<=s-1;l++){let u=i(t.subdivPointerNew,l),d=o(t.subdivPointerNew,l);kX.fromArray(u).applyMatrix4(t.matrixWorld),LX.fromArray(d),a.push({pos:kX.toArray(),norm:LX.toArray()})}return a}else return(this.objectForSample.geometry.index?I1t(this.objectForSample.geometry):D1t(this.objectForSample.geometry)).map((t,r)=>e==="polygon_center"?{pos:t.midpoint,norm:t.norm}:e==="vertex"?[{pos:t.vertices[0],norm:t.norm},{pos:t.vertices[1],norm:t.norm},{pos:t.vertices[2],norm:t.norm}]:e==="edge"?[{pos:t.faceCenters[0],norm:t.norm},{pos:t.faceCenters[1],norm:t.norm},{pos:t.faceCenters[2],norm:t.norm}]:[]).flat()}updateState(e,t){var r;if(this.parameters=vO(e),this.parameters.type!=="toObject")(this.parent===null||this.parent!==this.object)&&(this.removeFromParent(),(r=this.object.parent)==null||r.add(this),this.matrix=this.object.matrix,this.hiddenMatrix=this.object.hiddenMatrix,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1);else if(this.parent===null||this.parent.uuid!==this.parameters.toObject.object){this.removeFromParent();let n=t.find(this.parameters.toObject.object);n instanceof Ts?this.objectForSample=n:this.objectForSample=void 0,this.matrix=new qe,this.hiddenMatrix=new qe,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1,n&&n.add(this)}this.update()}get pendingMediaLoad(){return this._pendingMediaLoad}},u_=e=>{var t;return t=class extends e{},t.geometryHelper=new Jc(30,30,30),t},cA=new ab,jR=new Ps,NX=new qe,c_=(e,t,r,n,i=!1)=>{let o=t,a=e.matrixWorld;if(o.boundingSphere===null&&o.computeBoundingSphere(),jR.copy(o.boundingSphere),jR.applyMatrix4(a),r.ray.intersectsSphere(jR)===!1||(NX.copy(a).invert(),cA.copy(r.ray).applyMatrix4(NX),o.boundingBox!==null&&cA.intersectsBox(o.boundingBox)===!1))return;let s,l,u,d,c=o.index,h=o.attributes.position,f=o.drawRange,m,p;if(i===!1){let v=Math.max(0,f.start),b=Math.min(c.count,f.start+f.count);for(m=v,p=b;m<p;m+=3)if(l=c.getX(m),u=c.getX(m+1),d=c.getX(m+2),s=g(e,r,cA,h,l,u,d),s){s.faceIndex=Math.floor(m/3),n.push(s);return}}else{let v=o.attributes.position,b=new F,y=new F,x=new F,S=new F,w=2,_=1/((e.scale.x+e.scale.y+e.scale.z)/3),C=_*_,E=Math.max(0,f.start),A=Math.min(v.count,f.start+f.count);for(let M=E,I=A-1;M<I;M+=w){if(b.fromBufferAttribute(v,M),y.fromBufferAttribute(v,M+1),cA.distanceSqToSegment(b,y,S,x)>C)continue;S.applyMatrix4(e.matrixWorld);let O=r.ray.origin.distanceTo(S);O<r.near||O>r.far||n.push({distance:O,point:x.clone().applyMatrix4(e.matrixWorld),object:e})}}function g(v,b,y,x,S,w,_){let C=new F,E=new F,A=new F,M=new F,I=new F;if(C.fromBufferAttribute(x,S),E.fromBufferAttribute(x,w),A.fromBufferAttribute(x,_),y.intersectTriangle(C,E,A,!1,M)===null)return null;I.copy(M),I.applyMatrix4(v.matrixWorld);let O=b.ray.origin.distanceTo(I);return O<b.near||O>b.far?null:{faceIndex:1,distance:O,point:I.clone(),object:v}}},dA=new F,vl=new lb,U1t=class extends i_{constructor(e){let t=new Nt,r=new bp({color:16777215,vertexColors:!0,toneMapped:!1}),n=[],i=[],o={},a=new Bt(15711266),s=new Bt(15711266),l=new Bt(2857471);u("n1","n2",a),u("n2","n4",a),u("n4","n3",a),u("n3","n1",a),u("f1","f2",a),u("f2","f4",a),u("f4","f3",a),u("f3","f1",a),u("n1","f1",a),u("n2","f2",a),u("n3","f3",a),u("n4","f4",a),u("p","n1",s),u("p","n2",s),u("p","n3",s),u("p","n4",s),u("u1","u2",l),u("u2","u3",l),u("u3","u1",l);function u(c,h,f){d(c,f),d(h,f)}function d(c,h){n.push(0,0,0),i.push(h.r,h.g,h.b),o[c]===void 0&&(o[c]=[]),o[c].push(n.length/3-1)}t.setAttribute("position",new ft(n,3)),t.setAttribute("color",new ft(i,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}update(){let e=this.geometry,t=this.pointMap;vl.projectionMatrixInverse.elements=[.5112609807824982,-0,-0,-0,-0,.41421356237309503,-0,-0,-0,-0,-0,-.099999,-0,-0,-1.0000000000000002,.100001];let r=1,n=1,i=.8;au("n1",t,e,vl,-r,-n,i),au("n2",t,e,vl,r,-n,i),au("n3",t,e,vl,-r,n,i),au("n4",t,e,vl,r,n,i);let o=i;au("f1",t,e,vl,-r,-n,o),au("f2",t,e,vl,r,-n,o),au("f3",t,e,vl,-r,n,o),au("f4",t,e,vl,r,n,o);let a=o,s=.5;au("u1",t,e,vl,r*.7*s,n*1.1,a),au("u2",t,e,vl,-r*.7*s,n*1.1,a),au("u3",t,e,vl,0,n*(1.1+.9*s),a),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function au(e,t,r,n,i,o,a){dA.set(i,o,a).unproject(n);let s=t[e];if(s!==void 0){let l=r.getAttribute("position");for(let u=0,d=s.length;u<d;u++)l.setXYZ(s[u],dA.x,dA.y,dA.z)}}var $1t=class extends u_(U1t){constructor(e){super(e),this.object=e,this.object=e,this.name=`CombinedCameraHelper: ${e.uuid}`}updateMatrixWorld(e){super.updateMatrixWorld(e),this.updateTarget()}updateTarget(){let e=this.object.getTarget();this.updateWorldMatrix(!0,!1),this.worldToLocal(e)}raycast(e,t){c_(this.object,this.geometry,e,t,!0)}},Fz;(e=>e.is=t=>"objectHelper"in t)(Fz||(Fz={}));var d_=(e,t)=>class extends EU(e){constructor(){super(...arguments),this.objectHelper=new t(this),this.gizmos={}}get geometryHelper(){return t.geometryHelper}raycast(r,n){this.objectHelper.raycast(r,n)}showGizmos(){for(let r in this.gizmos){let n=this.gizmos[r];n instanceof dP&&(n.visible=!0)}}updateEntityBoxSize(r,n){this.objectHelper.visible&&this.geometryHelper instanceof Jc?(r.setScalar(0),n.set(this.geometryHelper.parameters.width,this.geometryHelper.parameters.height,this.geometryHelper.parameters.height).multiplyScalar(.5)):super.updateEntityBoxSize(r,n)}hideGizmos(){for(let r in this.gizmos){let n=this.gizmos[r];n instanceof dP&&(n.visible=!1)}}},hA=790,rv=new F,UR=new F,$R=new Jt,VR=new F,yx=new F,HR=new F,ha=class extends d_(lb,$1t){constructor(e="",t={...oS.defaultData,name:""}){super(),this._cameraType="OrthographicCamera",this.targetOffset=A0.DefaultTargetOffset,this.isUpVectorFlipped=!1,this.angleOffsetFromUp=0,this.wasMovedByUser=!1,this.wasMovedBySwitchCameraAction=!1,this.super_Entity(e,t),this.previousProjectionMatrix=new qe,this.matrixAutoUpdate=!0,this.width=window.innerWidth,this.height=window.innerHeight;let r=this.width,n=this.height;this.orthoCamera=new B4(r*-.5,r*.5,n*.5,n*-.5,-5e4,1e4),this.perspCamera=new oa(45,r/n,50,1e4),this.left=this.orthoCamera.left,this.right=this.orthoCamera.right,this.top=this.orthoCamera.top,this.bottom=this.orthoCamera.bottom,this.far=this.orthoCamera.far,this.view=this.orthoCamera.view,this.aspect=this.perspCamera.aspect,this.focus=this.perspCamera.focus,this.filmGauge=this.perspCamera.filmGauge,this.filmOffset=this.perspCamera.filmOffset,this.objectHelper.update()}get isPerspectiveCamera(){return this.cameraType==="PerspectiveCamera"}get isOrthographicCamera(){return!this.isPerspectiveCamera}get cameraType(){return this._cameraType}set fov(e){this.perspCamera.fov=e}get fov(){return this.perspCamera.fov}setNear(e,t){e==="PerspectiveCamera"?this.perspCamera.near=t:this.orthoCamera.near=t}setZoom(e,t){t>=0&&(e==="PerspectiveCamera"?this.perspCamera.zoom=t:this.orthoCamera.zoom=t)}set cameraType(e){e==="PerspectiveCamera"?this.toPerspective():e==="OrthographicCamera"&&this.toOrthographic()}get near(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.near:this.orthoCamera.near}set near(e){this._cameraType==="PerspectiveCamera"?this.perspCamera.near=e:this.orthoCamera.near=e}get zoom(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom:this.orthoCamera.zoom}set zoom(e){e>=0&&(this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom=e:this.orthoCamera.zoom=e)}lookAt(e,t,r){typeof e=="number"&&(e=new F(e,t,r)),super.lookAt(e),this.getWorldPosition(rv),this.targetOffset=rv.distanceTo(e)}getTarget(e=new F){return this.getWorldDirection(UR),this.getWorldPosition(rv),UR.multiplyScalar(this.targetOffset),e.copy(rv).add(UR),e}getDistanceToTarget(){let e=this.getTarget();return this.getWorldPosition(rv),rv.distanceTo(e)}updateUp(){this.getWorldQuaternion($R),VR.set(0,0,1).applyQuaternion($R),yx.copy(hn.DEFAULT_UP),this.isUpVectorFlipped&&yx.negate(),yx.applyQuaternion($R),HR.copy(hn.DEFAULT_UP).projectOnPlane(VR),this.angleOffsetFromUp=HR.angleTo(yx),this.angleOffsetFromUp*=HR.cross(yx).dot(VR)>=0?1:-1}updateTransformState(e,t){let r=super.updateTransformState(e,t);return e.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateUp(),r}getViewFrontToObject(e){let t=e.getWorldPosition(new F),r=e.getWorldDirection(new F).multiplyScalar(this.targetOffset);return{position:t.clone().add(r),target:t}}getViewToTarget(e){let t=this.getWorldDirection(new F).multiplyScalar(this.targetOffset);return{position:e.clone().sub(t),target:e}}getViewToObject(e){let t=new F;return e.getWorldPosition(t),this.getViewToTarget(t)}setViewplaneSize(e,t,r=!1){if(this.aspect=e/t,r){let n=e>t?this.aspect:1,i=e>t?1:this.aspect;this.left=-hA*.5*n,this.right=hA*.5*n,this.top=hA*.5*(1/i),this.bottom=-hA*.5*(1/i)}else this.left=-e*.5,this.right=e*.5,this.top=t*.5,this.bottom=-t*.5;this.updateProjectionMatrix()}copyViewPlaneSize(e){this.aspect=e.aspect,this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.updateProjectionMatrix()}toOrthographic(){this.orthoCamera.left=this.left,this.orthoCamera.right=this.right,this.orthoCamera.top=this.top,this.orthoCamera.bottom=this.bottom,this.orthoCamera.view=this.view,this.orthoCamera.far=this.far,this.orthoCamera.updateProjectionMatrix(),this.projectionMatrix=this.orthoCamera.projectionMatrix,this.projectionMatrixInverse=this.orthoCamera.projectionMatrixInverse,this._cameraType="OrthographicCamera",this.objectHelper&&this.objectHelper.update()}toPerspective(){this.perspCamera.aspect=this.aspect,this.perspCamera.fov=this.fov,this.perspCamera.view=this.view,this.perspCamera.far=this.far,this.perspCamera.updateProjectionMatrix(),this.projectionMatrix=this.perspCamera.projectionMatrix,this.projectionMatrixInverse=this.perspCamera.projectionMatrixInverse,this._cameraType="PerspectiveCamera",this.objectHelper&&this.objectHelper.update()}setFocalLength(e){this.perspCamera.setFocalLength(e),this.toPerspective()}getFocalLength(){return this.perspCamera.getFocalLength()}getEffectiveFOV(){return this.perspCamera.getEffectiveFOV()}getFilmWidth(){return this.perspCamera.getFilmWidth()}getFilmHeight(){return this.perspCamera.getFilmHeight()}setViewOffset(e,t,r,n,i,o){this._cameraType==="PerspectiveCamera"?this.perspCamera.setViewOffset(e,t,r,n,i,o):this.orthoCamera.setViewOffset(e,t,r,n,i,o)}clearViewOffset(){this._cameraType==="PerspectiveCamera"?(this.perspCamera.clearViewOffset(),this.toPerspective()):(this.orthoCamera.clearViewOffset(),this.toOrthographic())}copyHistory(){this.previousProjectionMatrix&&this.previousProjectionMatrix.copy(this.projectionMatrix)}updateProjectionMatrix(){this._cameraType==="PerspectiveCamera"?this.toPerspective():this._cameraType==="OrthographicCamera"&&this.toOrthographic()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}copy(e,t){return super.copy(e,t),this.parent=e.parent,this.orthoCamera.copy(e.orthoCamera),this.perspCamera.copy(e.perspCamera),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.far=e.far,this.view=e.view===null?null:Object.assign({},e.view),this._cameraType=e._cameraType,this.aspect=e.aspect,this.fov=e.fov,this.focus=e.focus,this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this.targetOffset=e.targetOffset,this.updateProjectionMatrix(),this}toCameraState(e=[]){let t={type:this.cameraType,far:this.far,orthographic:{near:this.orthoCamera.near,zoom:this.orthoCamera.zoom},perspective:{near:this.perspCamera.near,fov:this.perspCamera.fov,zoom:this.perspCamera.zoom},up:this.up.toArray(),targetOffset:this.targetOffset,isUpVectorFlipped:this.isUpVectorFlipped};return $N(t,e)}updateCameraSubtype(e,t){let r=e==="perspective"?"PerspectiveCamera":"OrthographicCamera";t.zoom!==void 0&&this.setZoom(r,t.zoom),t.near!==void 0&&this.setNear(r,t.near),t.fov!==void 0&&r==="PerspectiveCamera"&&(this.fov=t.fov)}updateState(e,t){this.updateCameraState(e,t)}updateCameraState(e,t){this.updateState_Entity(e,t),e.far!==void 0&&(this.far=e.far),e.orthographic!==void 0&&this.updateCameraSubtype("orthographic",e.orthographic),e.perspective!==void 0&&this.updateCameraSubtype("perspective",e.perspective),e.type!==void 0&&(this.cameraType=e.type),e.up!==void 0&&this.up.fromArray(e.up),e.targetOffset!==void 0&&(this.targetOffset=e.targetOffset),e.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateProjectionMatrix()}updateByPatchedOp(e,t,r){super.updateByPatchedOp(e,t,r),e.path.length===1&&e.type===0&&this.updateCameraSubtype(e.path[0],e.props)}toState(e){return{...super.toState(e),...this.toCameraState(e),type:this.cameraType}}},nv=new qe,V1t=new qe,fA=new qe,zX=new F,BX=new F;function FX(e){let t=!1;return e.scene.objects.traverse((r,n)=>{var i;((i=n.geometry)==null?void 0:i.type)==="BooleanGeometry"&&(t=!0)}),t}var R0=class extends wb{constructor(e,t,r){super(e,t),this.data=t,this.meshSetAddresses=[],this.needsTransformForDownstream=!1,this.geometry=new Nt,this.onAfterRender=(n,i,o,a,s,l)=>{super.onAfterRender(n,i,o,a,s,l),this.recomputeBoolean()},this.geometry.userData.parameters={width:0,height:0,depth:0}}get booleanOp(){return this.data.geometry.operation}get phongAngle(){return this.data.geometry.phongAngle??45}get isLOD(){return this.recomputeBoolean(),!1}updateByPatchedOp(e,t,r){super.updateByPatchedOp(e,t,r),e.path.length===1&&e.path[0]==="geometry"&&e.type===0&&e.props.operation!==void 0&&(this.freeBooleanPointer(),this.resetBBoxNeedsUpdate())}freeBooleanPointer(){super.freeBooleanPointer(),this.geometry.dispose()}recomputeBoolean(e,t=!0){var n;if(this.booleanMeshSetAddress!==-1&&!e)return;for(let i=0;i<this.children.length;i++){let o=this.children[i];o instanceof R0&&o.dataPatched.visible===!0&&o.recomputeBoolean(e===!0,t)}this.meshSetAddresses=[];for(let i=0;i<this.children.length;i++){let o=this.children[i];if(o instanceof Ts&&o.dataPatched.visible===!0&&((n=o.geometry.attributes.position)==null?void 0:n.count)>0&&o.geometry.drawRange.count>0){if(nv.multiplyMatrices(o.hiddenMatrix,o.matrix),o.booleanMeshSetAddress===-1){if((o.geometry.index??o.geometry.getAttribute("position")).count/3<15e5&&(o.booleanMeshSetAddress=Dd.getMeshSet(o.geometry,e===!0,t)),o.booleanMeshSetAddress===-1)return;Dd.transformMeshSet(o.booleanMeshSetAddress,nv),o.booleanMatrixInvOld.copy(nv).invert(),o.booleanWasTransformed=!1}else o instanceof R0&&o.needsTransformForDownstream===!0?(Dd.transformMeshSet(o.booleanMeshSetAddress,nv),o.needsTransformForDownstream=!1):o.booleanWasTransformed===!0&&(Dd.transformMeshSet(o.booleanMeshSetAddress,V1t.multiplyMatrices(nv,o.booleanMatrixInvOld)),o.booleanMatrixInvOld.copy(nv).invert(),o.booleanWasTransformed=!1);Dd.hasOpenEdges(o.booleanMeshSetAddress)===!1||i===this.children.length-1&&this.booleanOp===2?(this.meshSetAddresses.push(o.booleanMeshSetAddress),o.geometry.userData.wasFilteredFromBoolean=!1):o.geometry.userData.wasFilteredFromBoolean=!0}}if(this.meshSetAddresses.length===0){this.geometry.setAttribute("position",new ft([],0)),this.geometry.setDrawRange(0,0);return}if(e===!0)return Dd.calcBooleanTopological(this.meshSetAddresses,this.booleanOp);let r=this.geometry;r.dispose(),this.geometry=new Nt,this.geometry.userData=r.userData,this.geometry.boundingSphere=r.boundingSphere;try{this.booleanMeshSetAddress=Dd.calcBoolean(this.meshSetAddresses,this.booleanOp,this.geometry,this.phongAngle)}catch(i){this.booleanMeshSetAddress=0,console.error(i)}this.booleanMatrixInvOld.copy(this.matrix).invert(),this.needsTransformForDownstream=!0,UU(this),$U(this)}dispose(){super.dispose(),this.geometry.dispose()}get recursiveBBox(){var t;let e=super.recursiveBBox;return((t=this.geometry.boundingSphere)==null?void 0:t.radius)===-1&&(e.getCenter(this.geometry.boundingSphere.center),fA.copy(this.matrixWorld).invert(),this.geometry.boundingSphere.center.applyMatrix4(fA),zX.copy(e.max).applyMatrix4(fA),BX.copy(e.min).applyMatrix4(fA),this.geometry.boundingSphere.radius=zX.distanceTo(BX)/2),e}},jz;(e=>{function t(r){return Dr.is(r)&&r instanceof a_}e.is=t})(jz||(jz={}));var VU=(e,t)=>class extends d_(e,t){updateState_Light(r,n){this.updateState_Entity(r,n),r.color!==void 0&&(this.color=n.shared.color(r.color)),r.intensity!==void 0&&(this.intensity=r.intensity),r.depth!==void 0&&(this.shadow.camera.far=r.depth,this.shadow.needsUpdate=!0),r.shadows!==void 0&&(this.castShadow=r.shadows)}},bu=e=>e instanceof Ts,Pc=e=>e!==null&&e instanceof R0,H1t=e=>e instanceof ha,G1t=e=>jz.is(e),Uz=e=>Fz.is(e),EO=class extends u_(_lt){constructor(e,t=15){super(t),this.object=e,this.object.updateMatrixWorld(),this.name=`EmptyObjectHelper: ${e.uuid}`,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.object.isBone&&(this.visible=!1)}raycast(e,t){c_(this.object,EO.geometryHelper,e,t)}update(){}},Ay=class extends d_(jv,EO){constructor(e,t){super(),this.super_Entity(e,t),this.objectHelper.update()}updateState(e,t){this.updateState_Entity(e,t),"buffer"in e&&Object.keys(e).length===1&&t.scene.reloadSplats()}},Fue={RED:0,GREEN:1,BLUE:2,ALPHA:3},h_="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",W1t=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;
#if PASS == 1
uniform vec4 kernel64[32];
#else
uniform vec4 kernel16[8];
#endif
varying vec2 vUv;void main(){
#ifdef FOREGROUND
vec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;
#else
float CoC=texture2D(cocBuffer,vUv).g*scale;
#endif
if(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{
#ifdef FOREGROUND
vec2 step=texelSize*max(CoC,CoCNearFar.g*scale);
#else
vec2 step=texelSize*CoC;
#endif
#if PASS == 1
vec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;
#else
vec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;
#endif
}}`,pA=class extends Sn{constructor(e=!1,t=!1){super({name:"BokehMaterial",defines:{PASS:e?"2":"1"},uniforms:{kernel64:new We(null),kernel16:new We(null),inputBuffer:new We(null),cocBuffer:new We(null),texelSize:new We(new ue),scale:new We(1)},blending:Xi,depthWrite:!1,depthTest:!1,fragmentShader:W1t,vertexShader:h_}),this.toneMapped=!1,t&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set cocBuffer(e){this.uniforms.cocBuffer.value=e}setCoCBuffer(e){this.uniforms.cocBuffer.value=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(e){return this.uniforms.scale.value=e}setScale(e){this.uniforms.scale.value=e}generateKernel(){let e=2.39996323,t=new Float32Array(128),r=new Float32Array(32),n=0,i=0;for(let s=0;s<80;++s){let l=s*e,u=Math.sqrt(s)/Math.sqrt(80),d=u*Math.cos(l),c=u*Math.sin(l);s%5===0?(r[i++]=d,r[i++]=c):(t[n++]=d,t[n++]=c)}let o=[],a=[];for(let s=0;s<128;)o.push(new or(t[s++],t[s++],t[s++],t[s++]));for(let s=0;s<32;)a.push(new or(r[s++],r[s++],r[s++],r[s++]));this.uniforms.kernel64.value=o,this.uniforms.kernel16.value=a}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}};function jX(e,t,r){return e*(t-r)-t}function $z(e,t,r){return Math.min(Math.max((e+t)/(t-r),0),1)}var q1t=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}void main(){float depth=readDepth(vUv);
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);
#else
float linearDepth=depth;
#endif
float signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}`,K1t=class extends Sn{constructor(e){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new We(null),focusDistance:new We(0),focusRange:new We(0),cameraNear:new We(.3),cameraFar:new We(1e3)},blending:Xi,depthWrite:!1,depthTest:!1,fragmentShader:q1t,vertexShader:h_}),this.toneMapped=!1,this.uniforms.focalLength=this.uniforms.focusRange,this.adoptCameraSettings(e)}get near(){return this.uniforms.cameraNear.value}get far(){return this.uniforms.cameraFar.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=_h){this.depthBuffer=e,this.depthPacking=t}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(e){this.uniforms.focusDistance.value=e}get worldFocusDistance(){return-jX(this.focusDistance,this.near,this.far)}set worldFocusDistance(e){this.focusDistance=$z(-e,this.near,this.far)}getFocusDistance(e){this.uniforms.focusDistance.value=e}setFocusDistance(e){this.uniforms.focusDistance.value=e}get focalLength(){return this.focusRange}set focalLength(e){this.focusRange=e}get focusRange(){return this.uniforms.focusRange.value}set focusRange(e){this.uniforms.focusRange.value=e}get worldFocusRange(){return-jX(this.focusRange,this.near,this.far)}set worldFocusRange(e){this.focusRange=$z(-e,this.near,this.far)}getFocalLength(e){return this.focusRange}setFocalLength(e){this.focusRange=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof oa?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},X1t=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <encodings_fragment>
#include <dithering_fragment>
}`,Y1t="uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",UX=class extends Sn{constructor(e=new ue){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new We(null),texelSize:new We(new ue),halfTexelSize:new We(new ue),kernel:new We(0),scale:new We(1)},blending:Xi,depthWrite:!1,depthTest:!1,fragmentShader:X1t,vertexShader:Y1t}),this.toneMapped=!1,this.setTexelSize(e.x,e.y)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.inputBuffer=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(){return this.uniforms.scale.value}setScale(e){this.uniforms.scale.value=e}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(e){this.uniforms.kernel.value=e}setKernel(e){this.kernel=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t),this.uniforms.halfTexelSize.value.set(e,t).multiplyScalar(.5)}setSize(e,t){let r=this.uniforms;r.texelSize.value.set(1/e,1/t),r.halfTexelSize.value.copy(r.texelSize.value).multiplyScalar(.5)}},Q1t=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
}`,Z1t=class extends Sn{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new We(null),opacity:new We(1)},blending:Xi,depthWrite:!1,depthTest:!1,fragmentShader:Q1t,vertexShader:h_}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},J1t=`varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
#if EDGE_DETECTION_MODE == 1
#include <common>
#endif
#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}
#elif PREDICATION_MODE == 2
uniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}
#endif
#if PREDICATION_MODE != 0
vec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}
#endif
#if EDGE_DETECTION_MODE != 0
uniform sampler2D inputBuffer;
#endif
void main(){
#if EDGE_DETECTION_MODE == 0
const vec2 threshold=vec2(DEPTH_THRESHOLD);
#elif PREDICATION_MODE != 0
vec2 threshold=calculatePredicatedThreshold();
#else
const vec2 threshold=vec2(EDGE_THRESHOLD);
#endif
#if EDGE_DETECTION_MODE == 0
vec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 1
float l=luminance(texture2D(inputBuffer,vUv).rgb);float lLeft=luminance(texture2D(inputBuffer,vUv0).rgb);float lTop=luminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=luminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=luminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=luminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=luminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 2
vec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#endif
}`,ewt=`uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);
#if EDGE_DETECTION_MODE != 0
vUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);
#endif
gl_Position=vec4(position.xy,1.0,1.0);}`,MO={DEPTH:0,LUMA:1,COLOR:2},twt={DISABLED:0,DEPTH:1,CUSTOM:2},rwt=class extends Sn{constructor(e=new ue,t=MO.COLOR){super({name:"EdgeDetectionMaterial",defines:{THREE_REVISION:ob.replace(/\D+/g,""),LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new We(null),depthBuffer:new We(null),predicationBuffer:new We(null),texelSize:new We(e)},blending:Xi,depthWrite:!1,depthTest:!1,fragmentShader:J1t,vertexShader:ewt}),this.toneMapped=!1,this.edgeDetectionMode=t}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=_h){this.depthBuffer=e,this.depthPacking=t}get edgeDetectionMode(){return Number(this.defines.EDGE_DETECTION_MODE)}set edgeDetectionMode(e){this.defines.EDGE_DETECTION_MODE=e.toFixed(0),this.needsUpdate=!0}getEdgeDetectionMode(){return this.edgeDetectionMode}setEdgeDetectionMode(e){this.edgeDetectionMode=e}get localContrastAdaptationFactor(){return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR)}set localContrastAdaptationFactor(e){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=e.toFixed("6"),this.needsUpdate=!0}getLocalContrastAdaptationFactor(){return this.localContrastAdaptationFactor}setLocalContrastAdaptationFactor(e){this.localContrastAdaptationFactor=e}get edgeDetectionThreshold(){return Number(this.defines.EDGE_THRESHOLD)}set edgeDetectionThreshold(e){this.defines.EDGE_THRESHOLD=e.toFixed("6"),this.defines.DEPTH_THRESHOLD=(e*.1).toFixed("6"),this.needsUpdate=!0}getEdgeDetectionThreshold(){return this.edgeDetectionThreshold}setEdgeDetectionThreshold(e){this.edgeDetectionThreshold=e}get predicationMode(){return Number(this.defines.PREDICATION_MODE)}set predicationMode(e){this.defines.PREDICATION_MODE=e.toFixed(0),this.needsUpdate=!0}getPredicationMode(){return this.predicationMode}setPredicationMode(e){this.predicationMode=e}set predicationBuffer(e){this.uniforms.predicationBuffer.value=e}setPredicationBuffer(e){this.uniforms.predicationBuffer.value=e}get predicationThreshold(){return Number(this.defines.PREDICATION_THRESHOLD)}set predicationThreshold(e){this.defines.PREDICATION_THRESHOLD=e.toFixed("6"),this.needsUpdate=!0}getPredicationThreshold(){return this.predicationThreshold}setPredicationThreshold(e){this.predicationThreshold=e}get predicationScale(){return Number(this.defines.PREDICATION_SCALE)}set predicationScale(e){this.defines.PREDICATION_SCALE=e.toFixed("6"),this.needsUpdate=!0}getPredicationScale(){return this.predicationScale}setPredicationScale(e){this.predicationScale=e}get predicationStrength(){return Number(this.defines.PREDICATION_STRENGTH)}set predicationStrength(e){this.defines.PREDICATION_STRENGTH=e.toFixed("6"),this.needsUpdate=!0}getPredicationStrength(){return this.predicationStrength}setPredicationStrength(e){this.predicationStrength=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},nwt=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,iwt="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}",su={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},Vz=class extends Sn{constructor(e,t,r,n,i=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:ob.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new We(null),depthBuffer:new We(null),resolution:new We(new ue),texelSize:new We(new ue),cameraNear:new We(.3),cameraFar:new We(1e3),aspect:new We(1),time:new We(0)},blending:Xi,depthWrite:!1,depthTest:!1,dithering:i}),this.toneMapped=!1,e&&this.setShaderParts(e),t&&this.setDefines(t),r&&this.setUniforms(r),this.adoptCameraSettings(n)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=_h){this.depthBuffer=e,this.depthPacking=t}setShaderParts(e){return this.fragmentShader=nwt.replace(su.FRAGMENT_HEAD,e.get(su.FRAGMENT_HEAD)).replace(su.FRAGMENT_MAIN_UV,e.get(su.FRAGMENT_MAIN_UV)).replace(su.FRAGMENT_MAIN_IMAGE,e.get(su.FRAGMENT_MAIN_IMAGE)),this.vertexShader=iwt.replace(su.VERTEX_HEAD,e.get(su.VERTEX_HEAD)).replace(su.VERTEX_MAIN_SUPPORT,e.get(su.VERTEX_MAIN_SUPPORT)),this.needsUpdate=!0,this}setDefines(e){for(let t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(let t of e.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(e){this.extensions={};for(let t of e)this.extensions[t]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(e){return this.encodeOutput}setOutputEncodingEnabled(e){this.encodeOutput=e}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}setDeltaTime(e){this.uniforms.time.value+=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof oa?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){let r=this.uniforms;r.resolution.value.set(e,t),r.texelSize.value.set(1/e,1/t),r.aspect.value=e/t}static get Section(){return su}},owt=`#include <common>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,awt=class extends Sn{constructor(e=!1,t=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:ob.replace(/\D+/g,"")},uniforms:{inputBuffer:new We(null),threshold:new We(0),smoothing:new We(1),range:new We(null)},blending:Xi,depthWrite:!1,depthTest:!1,fragmentShader:owt,vertexShader:h_}),this.toneMapped=!1,this.colorOutput=e,this.luminanceRange=t}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}getThreshold(){return this.threshold}setThreshold(e){this.threshold=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(e){this.smoothing=e}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(e){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(e){return this.colorOutput}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return this.luminanceRange!==null}set useRange(e){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(e){e!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(e){this.luminanceRange=e}},swt=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef MASK_PRECISION_HIGH
uniform mediump sampler2D maskTexture;
#else
uniform lowp sampler2D maskTexture;
#endif
#if MASK_FUNCTION != 0
uniform float strength;
#endif
varying vec2 vUv;void main(){
#if COLOR_CHANNEL == 0
float mask=texture2D(maskTexture,vUv).r;
#elif COLOR_CHANNEL == 1
float mask=texture2D(maskTexture,vUv).g;
#elif COLOR_CHANNEL == 2
float mask=texture2D(maskTexture,vUv).b;
#else
float mask=texture2D(maskTexture,vUv).a;
#endif
#if MASK_FUNCTION == 0
#ifdef INVERTED
mask=step(mask,0.0);
#else
mask=1.0-step(mask,0.0);
#endif
#else
mask=clamp(mask*strength,0.0,1.0);
#ifdef INVERTED
mask=1.0-mask;
#endif
#endif
#if MASK_FUNCTION == 2
gl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);
#else
gl_FragColor=mask*texture2D(inputBuffer,vUv);
#endif
}`,jue={DISCARD:0,MULTIPLY:1,MULTIPLY_RGB_SET_ALPHA:2},lwt=class extends Sn{constructor(e=null){super({name:"MaskMaterial",uniforms:{maskTexture:new We(e),inputBuffer:new We(null),strength:new We(1)},blending:Xi,depthWrite:!1,depthTest:!1,fragmentShader:swt,vertexShader:h_}),this.toneMapped=!1,this.setColorChannel(Fue.RED),this.setMaskFunction(jue.DISCARD)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set maskTexture(e){this.uniforms.maskTexture.value=e,delete this.defines.MASK_PRECISION_HIGH,e.type!==pa&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(e){this.maskTexture=e}set colorChannel(e){this.defines.COLOR_CHANNEL=e.toFixed(0),this.needsUpdate=!0}setColorChannel(e){this.colorChannel=e}set maskFunction(e){this.defines.MASK_FUNCTION=e.toFixed(0),this.needsUpdate=!0}setMaskFunction(e){this.maskFunction=e}get inverted(){return this.defines.INVERTED!==void 0}set inverted(e){this.inverted&&!e?delete this.defines.INVERTED:e&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(e){this.inverted=e}get strength(){return this.uniforms.strength.value}set strength(e){this.uniforms.strength.value=e}getStrength(){return this.strength}setStrength(e){this.strength=e}},uwt=`#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)
#if __VERSION__ < 300
#define round(v) floor(v + 0.5)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);
#endif
}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);
#endif
}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){
#if !defined(DISABLE_DIAG_DETECTION)
weights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){
#endif
vec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);
#if !defined(DISABLE_DIAG_DETECTION)
}else{e.r=0.0;}
#endif
}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}`,cwt="uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}",dwt=class extends Sn{constructor(e=new ue,t=new ue){super({name:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new We(null),searchTexture:new We(null),areaTexture:new We(null),resolution:new We(t),texelSize:new We(e)},blending:Xi,depthWrite:!1,depthTest:!1,fragmentShader:uwt,vertexShader:cwt}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get searchTexture(){return this.uniforms.searchTexture.value}set searchTexture(e){this.uniforms.searchTexture.value=e}get areaTexture(){return this.uniforms.areaTexture.value}set areaTexture(e){this.uniforms.areaTexture.value=e}setLookupTextures(e,t){this.searchTexture=e,this.areaTexture=t}get orthogonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_INT)}set orthogonalSearchSteps(e){let t=Math.min(Math.max(e,0),112);this.defines.MAX_SEARCH_STEPS_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setOrthogonalSearchSteps(e){this.orthogonalSearchSteps=e}get diagonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT)}set diagonalSearchSteps(e){let t=Math.min(Math.max(e,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setDiagonalSearchSteps(e){this.diagonalSearchSteps=e}get diagonalDetection(){return this.defines.DISABLE_DIAG_DETECTION===void 0}set diagonalDetection(e){e?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}isDiagonalDetectionEnabled(){return this.diagonalDetection}setDiagonalDetectionEnabled(e){this.diagonalDetection=e}get cornerRounding(){return Number(this.defines.CORNER_ROUNDING)}set cornerRounding(e){let t=Math.min(Math.max(e,0),100);this.defines.CORNER_ROUNDING=t.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(t/100).toFixed("4"),this.needsUpdate=!0}setCornerRounding(e){this.cornerRounding=e}get cornerDetection(){return this.defines.DISABLE_CORNER_DETECTION===void 0}set cornerDetection(e){e?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}isCornerRoundingEnabled(){return this.cornerDetection}setCornerRoundingEnabled(e){this.cornerDetection=e}setSize(e,t){let r=this.uniforms;r.texelSize.value.set(1/e,1/t),r.resolution.value.set(e,t)}},hwt=new lb,zh=null;function fwt(){if(zh===null){let e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]);zh=new Nt,zh.setAttribute!==void 0?(zh.setAttribute("position",new Kt(e,3)),zh.setAttribute("uv",new Kt(t,2))):(zh.addAttribute("position",new Kt(e,3)),zh.addAttribute("uv",new Kt(t,2)))}return zh}var Ja=class{constructor(e="Pass",t=new Uf,r=hwt){this.name=e,this.renderer=null,this.scene=t,this.camera=r,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){let t=this.getFullscreenMaterial();t!==null&&(t.needsUpdate=!0),this.rtt=!e}}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;t!==null?t.material=e:(t=new Fa(fwt(),e),t.frustumCulled=!1,this.scene===null&&(this.scene=new Uf),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=_h){}render(e,t,r,n,i){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,r){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(t!==null&&typeof t.dispose=="function"){if(t instanceof Uf||t===this.renderer)continue;this[e].dispose()}}}},Hz=class extends Ja{constructor(e,t=!0){super("CopyPass"),this.fullscreenMaterial=new Z1t,this.needsSwap=!1,this.renderTarget=e,e===void 0&&(this.renderTarget=new cn(1,1,{minFilter:yr,magFilter:yr,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,t,r,n,i){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}initialize(e,t,r){r!==void 0&&(this.renderTarget.texture.type=r,r!==pa?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":e.outputEncoding===ir&&(this.renderTarget.texture.encoding=ir))}},pwt=class extends Ja{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,r,n,i){let o=e.state.buffers.stencil;o.setLocked(!1),o.setTest(!1)}},GR=new Bt,HU=class extends Ja{constructor(e=!0,t=!0,r=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=r,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,t,r){this.color=e,this.depth=t,this.stencil=r}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,t,r,n,i){let o=this.overrideClearColor,a=this.overrideClearAlpha,s=e.getClearAlpha(),l=o!==null,u=a>=0;l?(GR.copy(e.getClearColor(GR)),e.setClearColor(o,u?a:s)):u&&e.setClearAlpha(a),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),l?e.setClearColor(GR,s):u&&e.setClearAlpha(s)}},Bh=-1,vs=class extends qo{constructor(e,t=Bh,r=Bh,n=1){super(),this.resizable=e,this.base=new ue(1,1),this.preferred=new ue(t,r),this.target=this.preferred,this.s=n}get width(){let{base:e,preferred:t,scale:r}=this,n;return t.width!==Bh?n=t.width:t.height!==Bh?n=Math.round(t.height*(e.width/Math.max(e.height,1))):n=Math.round(e.width*r),n}set width(e){this.preferredWidth=e}get height(){let{base:e,preferred:t,scale:r}=this,n;return t.height!==Bh?n=t.height:t.width!==Bh?n=Math.round(t.width/Math.max(e.width/Math.max(e.height,1),1)):n=Math.round(e.height*r),n}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferred.setScalar(Bh),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.base.width}set baseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseWidth(){return this.base.width}setBaseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get baseHeight(){return this.base.height}set baseHeight(e){this.base.height!==e&&(this.base.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,t){(this.base.width!==e||this.base.height!==t)&&(this.base.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get preferredWidth(){return this.preferred.width}set preferredWidth(e){this.preferred.width!==e&&(this.preferred.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferred.height}set preferredHeight(e){this.preferred.height!==e&&(this.preferred.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,t){(this.preferred.width!==e||this.preferred.height!==t)&&(this.preferred.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}copy(e){this.base.set(e.getBaseWidth(),e.getBaseHeight()),this.preferred.set(e.getPreferredWidth(),e.getPreferredHeight()),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height)}static get AUTO_SIZE(){return Bh}},WR=!1,$X=class{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=t=>{if(t.isMesh){let r;if(t.material.flatShading)switch(t.material.side){case ms:r=this.materialsFlatShadedDoubleSide;break;case Po:r=this.materialsFlatShadedBackSide;break;default:r=this.materialsFlatShaded;break}else switch(t.material.side){case ms:r=this.materialsDoubleSide;break;case Po:r=this.materialsBackSide;break;default:r=this.materials;break}this.originalMaterials.set(t,t.material),t.isSkinnedMesh?t.material=r[2]:t.isInstancedMesh?t.material=r[1]:t.material=r[0],++this.meshCount}}}setMaterial(e){if(this.disposeMaterials(),this.material=e,e!==null){let t=this.materials=[e.clone(),e.clone(),e.clone()];for(let r of t)r.uniforms=Object.assign({},e.uniforms),r.side=Bu;t[2].skinning=!0,this.materialsBackSide=t.map(r=>{let n=r.clone();return n.uniforms=Object.assign({},e.uniforms),n.side=Po,n}),this.materialsDoubleSide=t.map(r=>{let n=r.clone();return n.uniforms=Object.assign({},e.uniforms),n.side=ms,n}),this.materialsFlatShaded=t.map(r=>{let n=r.clone();return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n}),this.materialsFlatShadedBackSide=t.map(r=>{let n=r.clone();return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n.side=Po,n}),this.materialsFlatShadedDoubleSide=t.map(r=>{let n=r.clone();return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n.side=ms,n})}}render(e,t,r){let n=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,WR){let i=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,r);for(let o of i)o[0].material=o[1];this.meshCount!==i.size&&i.clear()}else{let i=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,r),t.overrideMaterial=i}e.shadowMap.enabled=n}disposeMaterials(){if(this.material!==null){let e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(let t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return WR}static set workaroundEnabled(e){WR=e}},mwt=class extends Ja{constructor(e,t,r=null){super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new HU,this.overrideMaterialManager=r===null?null:new $X(r),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){let e=this.overrideMaterialManager;return e!==null?e.material:null}set overrideMaterial(e){let t=this.overrideMaterialManager;e!==null?t!==null?t.setMaterial(e):this.overrideMaterialManager=new $X(e):t!==null&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,t,r,n,i){let o=this.scene,a=this.camera,s=this.selection,l=a.layers.mask,u=o.background,d=e.shadowMap.autoUpdate,c=this.renderToScreen?null:t;s!==null&&a.layers.set(s.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(o.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(c),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(e,o,a):e.render(o,a),a.layers.mask=l,o.background=u,e.shadowMap.autoUpdate=d}},VX=class extends Ja{constructor(e,t,{resolutionScale:r=1,width:n=vs.AUTO_SIZE,height:i=vs.AUTO_SIZE,renderTarget:o}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new mwt(e,t,new Mae({depthPacking:fae}));let a=this.renderPass;a.skipShadowMapUpdate=!0,a.ignoreBackground=!0;let s=a.getClearPass();s.overrideClearColor=new Bt(16777215),s.overrideClearAlpha=1,this.renderTarget=o,this.renderTarget===void 0&&(this.renderTarget=new cn(1,1,{minFilter:Pn,magFilter:Pn,stencilBuffer:!1}),this.renderTarget.texture.name="DepthPass.Target");let l=this.resolution=new vs(this,n,i,r);l.addEventListener("change",u=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,r,n,i){let o=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,o)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height)}},Nr={SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,DIVIDE:11,NEGATION:12,NORMAL:13,OVERLAY:14,REFLECT:15,SCREEN:16,SOFT_LIGHT:17,SUBTRACT:18},gwt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}",vwt="vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}",ywt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}",bwt="float blend(const in float x,const in float y){return(y==0.0)?y:max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",xwt="float blend(const in float x,const in float y){return(y==1.0)?y:min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",wwt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}",Swt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}",_wt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}",Cwt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}",Awt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}",Ewt="float blend(const in float x,const in float y){return(y>0.0)?min(x/y,1.0):1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Mwt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}",Pwt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}",Twt="float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Owt="float blend(const in float x,const in float y){return(y==1.0)?y:min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Iwt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}",Dwt="float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Rwt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}",kwt=new Map([[Nr.SKIP,null],[Nr.ADD,gwt],[Nr.ALPHA,vwt],[Nr.AVERAGE,ywt],[Nr.COLOR_BURN,bwt],[Nr.COLOR_DODGE,xwt],[Nr.DARKEN,wwt],[Nr.DIFFERENCE,Swt],[Nr.EXCLUSION,_wt],[Nr.LIGHTEN,Cwt],[Nr.MULTIPLY,Awt],[Nr.DIVIDE,Ewt],[Nr.NEGATION,Mwt],[Nr.NORMAL,Pwt],[Nr.OVERLAY,Twt],[Nr.REFLECT,Owt],[Nr.SCREEN,Iwt],[Nr.SOFT_LIGHT,Dwt],[Nr.SUBTRACT,Rwt]]),Lwt=class extends qo{constructor(e,t=1){super(),this.f=e,this.opacity=new We(t)}getOpacity(){return this.opacity.value}setOpacity(e){this.opacity.value=e}get blendFunction(){return this.f}set blendFunction(e){this.f=e,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e}getShaderCode(){return kwt.get(this.blendFunction)}},Wc={NONE:0,DEPTH:1,CONVOLUTION:2},ld=class extends qo{constructor(e,t,{attributes:r=Wc.NONE,blendFunction:n=Nr.SCREEN,defines:i=new Map,uniforms:o=new Map,extensions:a=null,vertexShader:s=null}={}){super(),this.name=e,this.renderer=null,this.attributes=r,this.fragmentShader=t,this.vertexShader=s,this.defines=i,this.uniforms=o,this.extensions=a,this.blendMode=new Lwt(n),this.blendMode.addEventListener("change",l=>this.setChanged())}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e,t=_h){}update(e,t,r){}setSize(e,t){}initialize(e,t,r){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(t!==null&&typeof t.dispose=="function"){if(t instanceof Uf||t===this.renderer)continue;this[e].dispose()}}}};function HX(e,t,r){for(let n of t){let i="$1"+e+n.charAt(0).toUpperCase()+n.slice(1),o=new RegExp("([^\\.])(\\b"+n+"\\b)","g");for(let a of r.entries())a[1]!==null&&r.set(a[0],a[1].replace(o,i))}}function Nwt(e,t,r,n,i,o,a){let s=new Map([["fragment",t.getFragmentShader()],["vertex",t.getVertexShader()]]),l=s.get("fragment")!==void 0&&/mainImage/.test(s.get("fragment")),u=s.get("fragment")!==void 0&&/mainUv/.test(s.get("fragment")),d=[],c=[],h=!1,f=!1;if(s.get("fragment")===void 0)console.error("Missing fragment shader",t);else if(u&&a&Wc.CONVOLUTION)console.error("Effects that transform UV coordinates are incompatible with convolution effects",t);else if(!l&&!u)console.error("The fragment shader contains neither a mainImage nor a mainUv function",t);else{let m=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g,p=Vz.Section;if(u){let v=`	${e}MainUv(UV);
`;r.set(p.FRAGMENT_MAIN_UV,r.get(p.FRAGMENT_MAIN_UV)+v),h=!0}if(s.get("vertex")!==null&&/mainSupport/.test(s.get("vertex"))){let v=`	${e}MainSupport(`;v+=/mainSupport *\([\w\s]*?uv\s*?\)/.test(s.get("vertex"))?`vUv);
`:`);
`,r.set(p.VERTEX_MAIN_SUPPORT,r.get(p.VERTEX_MAIN_SUPPORT)+v),d=d.concat([...s.get("vertex").matchAll(/(?:varying\s+\w+\s+(\w*))/g)].map(b=>b[1])),c=c.concat(d).concat([...s.get("vertex").matchAll(m)].map(b=>b[1]))}c=c.concat([...s.get("fragment").matchAll(m)].map(v=>v[1])),c=c.concat([...t.defines.keys()].map(v=>v.replace(/\([\w\s,]*\)/g,""))),c=c.concat([...t.uniforms.keys()]),t.uniforms.forEach((v,b)=>o.set(e+b.charAt(0).toUpperCase()+b.slice(1),v)),t.defines.forEach((v,b)=>i.set(e+b.charAt(0).toUpperCase()+b.slice(1),v)),HX(e,c,i),HX(e,c,s);let g=t.blendMode;if(n.set(g.blendFunction,g),l){let v=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/,b=`${e}MainImage(color0, UV, `;a&Wc.DEPTH&&v.test(s.get("fragment"))&&(b+="depth, ",f=!0),b+=`color1);
	`;let y=e+"BlendOpacity";o.set(y,g.opacity),b+=`color0 = blend${g.blendFunction}(color0, color1, ${y});

	`,r.set(p.FRAGMENT_MAIN_IMAGE,r.get(p.FRAGMENT_MAIN_IMAGE)+b),b=`uniform float ${y};

`,r.set(p.FRAGMENT_HEAD,r.get(p.FRAGMENT_HEAD)+b)}r.set(p.FRAGMENT_HEAD,r.get(p.FRAGMENT_HEAD)+s.get("fragment")+`
`),s.get("vertex")!==null&&r.set(p.VERTEX_HEAD,r.get(p.VERTEX_HEAD)+s.get("vertex")+`
`)}return{varyings:d,transformedUv:h,readDepth:f}}var $P=class extends Ja{constructor(e,...t){super("EffectPass"),this.fullscreenMaterial=new Vz(null,null,null,e),this.effects=t.sort((r,n)=>n.attributes-r.attributes),this.skipRendering=!1,this.uniformCount=0,this.varyingCount=0,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(e){this.fullscreenMaterial.encodeOutput=e}get dithering(){return this.fullscreenMaterial.dithering}set dithering(e){let t=this.fullscreenMaterial;t.dithering=e,t.needsUpdate=!0}verifyResources(){let e=this.renderer.capabilities,t=Math.min(e.maxFragmentUniforms,e.maxVertexUniforms);this.uniformCount>t&&console.warn("The current rendering context doesn't support more than "+t+" uniforms, but "+this.uniformCount+" were defined"),t=e.maxVaryings,this.varyingCount>t&&console.warn("The current rendering context doesn't support more than "+t+" varyings, but "+this.varyingCount+" were defined")}updateMaterial(){let e=Vz.Section,t=new Map([[e.FRAGMENT_HEAD,""],[e.FRAGMENT_MAIN_UV,""],[e.FRAGMENT_MAIN_IMAGE,""],[e.VERTEX_HEAD,""],[e.VERTEX_MAIN_SUPPORT,""]]),r=new Map,n=new Map,i=new Map,o=new Set,a=0,s=0,l=0,u=!1,d=!1;for(let h of this.effects)if(h.blendMode.blendFunction===Nr.SKIP)l|=h.getAttributes()&Wc.DEPTH;else if(l&h.getAttributes()&Wc.CONVOLUTION)console.error("Convolution effects cannot be merged",h);else{l|=h.getAttributes();let f="e"+a++,m=Nwt(f,h,t,r,n,i,l);if(s+=m.varyings.length,u=u||m.transformedUv,d=d||m.readDepth,h.extensions!==null)for(let p of h.extensions)o.add(p)}let c=/\bblend\b/g;for(let h of r.values()){let f=h.getShaderCode().replace(c,`blend${h.blendFunction}`);t.set(e.FRAGMENT_HEAD,t.get(e.FRAGMENT_HEAD)+f+`
`)}if(l&Wc.DEPTH){if(d){let h=`float depth = readDepth(UV);

	`;t.set(e.FRAGMENT_MAIN_IMAGE,h+t.get(e.FRAGMENT_MAIN_IMAGE))}this.needsDepthTexture=this.getDepthTexture()===null}else this.needsDepthTexture=!1;if(u){let h=`vec2 transformedUv = vUv;
`;t.set(e.FRAGMENT_MAIN_UV,h+t.get(e.FRAGMENT_MAIN_UV)),n.set("UV","transformedUv")}else n.set("UV","vUv");t.forEach((h,f,m)=>m.set(f,h.trim().replace(/^#/,`
#`))),this.uniformCount=i.size,this.varyingCount=s,this.skipRendering=a===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderParts(t).setExtensions(o).setUniforms(i).setDefines(n)}recompile(){this.updateMaterial(),this.verifyResources()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(e,t=_h){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t;for(let r of this.effects)r.setDepthTexture(e,t)}render(e,t,r,n,i){for(let o of this.effects)o.update(e,t,n);if(!this.skipRendering||this.renderToScreen){let o=this.fullscreenMaterial;o.inputBuffer=t.texture,o.time+=n,e.setRenderTarget(this.renderToScreen?null:r),e.render(this.scene,this.camera)}}setSize(e,t){this.fullscreenMaterial.setSize(e,t);for(let r of this.effects)r.setSize(e,t)}initialize(e,t,r){this.renderer=e;for(let n of this.effects)n.initialize(e,t,r),n.addEventListener("change",i=>this.handleEvent(i));this.updateMaterial(),this.verifyResources(),r!==void 0&&r!==pa&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(let e of this.effects)e.dispose()}handleEvent(e){switch(e.type){case"change":this.recompile();break}}},zwt=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],Uue=class extends Ja{constructor({resolutionScale:e=.5,width:t=vs.AUTO_SIZE,height:r=vs.AUTO_SIZE,kernelSize:n=GU.LARGE}={}){super("KawaseBlurPass"),this.renderTargetA=new cn(1,1,{minFilter:yr,magFilter:yr,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";let i=this.resolution=new vs(this,t,r,e);i.addEventListener("change",o=>this.setSize(i.baseWidth,i.baseHeight)),this.blurMaterial=new UX,this.ditheredBlurMaterial=new UX,this.ditheredBlurMaterial.uniforms.scale=this.blurMaterial.uniforms.scale,this.ditheredBlurMaterial.dithering=!0,this.dithering=!1,this.kernelSize=n}getResolution(){return this.resolution}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get scale(){return this.blurMaterial.scale}set scale(e){this.blurMaterial.scale=e}getScale(){return this.blurMaterial.scale}setScale(e){this.blurMaterial.scale=e}getKernelSize(){return this.kernelSize}setKernelSize(e){this.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,r,n,i){let o=this.scene,a=this.camera,s=this.renderTargetA,l=this.renderTargetB,u=zwt[this.kernelSize],d=this.blurMaterial,c=t,h,f;for(this.fullscreenMaterial=d,h=0,f=u.length-1;h<f;++h){let m=h&1?l:s;d.kernel=u[h],d.inputBuffer=c.texture,e.setRenderTarget(m),e.render(o,a),c=m}this.dithering&&(d=this.ditheredBlurMaterial,this.fullscreenMaterial=d),d.kernel=u[h],d.inputBuffer=c.texture,e.setRenderTarget(this.renderToScreen?null:r),e.render(o,a)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t);let n=r.width,i=r.height;this.renderTargetA.setSize(n,i),this.renderTargetB.setSize(n,i),this.blurMaterial.setSize(n,i),this.ditheredBlurMaterial.setSize(n,i)}initialize(e,t,r){r!==void 0&&(this.renderTargetA.texture.type=r,this.renderTargetB.texture.type=r,r!==pa?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.ditheredBlurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):e.outputEncoding===ir&&(this.renderTargetA.texture.encoding=ir,this.renderTargetB.texture.encoding=ir))}static get AUTO_SIZE(){return vs.AUTO_SIZE}},Bwt=class extends Ja{constructor({width:e=vs.AUTO_SIZE,height:t=vs.AUTO_SIZE,renderTarget:r,luminanceRange:n,colorOutput:i}={}){super("LuminancePass"),this.fullscreenMaterial=new awt(i,n),this.needsSwap=!1,this.renderTarget=r,this.renderTarget===void 0&&(this.renderTarget=new cn(1,1,{minFilter:yr,magFilter:yr,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target",this.renderTarget.texture.generateMipmaps=!1);let o=this.resolution=new vs(this,e,t);o.addEventListener("change",a=>this.setSize(o.baseWidth,o.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(e,t,r,n,i){let o=this.fullscreenMaterial;o.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height)}initialize(e,t,r){r!==void 0&&r!==pa&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Fwt=class extends Ja{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new HU(!1,!1,!0),this.inverse=!1}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,t,r,n,i){let o=e.getContext(),a=e.state.buffers,s=this.scene,l=this.camera,u=this.clearPass,d=this.inverted?0:1,c=1-d;a.color.setMask(!1),a.depth.setMask(!1),a.color.setLocked(!0),a.depth.setLocked(!0),a.stencil.setTest(!0),a.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),a.stencil.setFunc(o.ALWAYS,d,4294967295),a.stencil.setClear(c),a.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?u.render(e,null):(u.render(e,t),u.render(e,r))),this.renderToScreen?(e.setRenderTarget(null),e.render(s,l)):(e.setRenderTarget(t),e.render(s,l),e.setRenderTarget(r),e.render(s,l)),a.color.setLocked(!1),a.depth.setLocked(!1),a.stencil.setLocked(!1),a.stencil.setFunc(o.EQUAL,1,4294967295),a.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),a.stencil.setLocked(!0)}},wc=class extends Ja{constructor(e,t="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=e,this.inputBufferUniform=null,this.setInput(t)}setInput(e){if(this.inputBufferUniform=null,this.fullscreenMaterial!==null){let t=this.fullscreenMaterial.uniforms;t!==void 0&&t[e]!==void 0&&(this.inputBufferUniform=t[e])}}render(e,t,r,n,i){this.inputBufferUniform!==null&&t!==null&&(this.inputBufferUniform.value=t.texture),e.setRenderTarget(this.renderToScreen?null:r),e.render(this.scene,this.camera)}initialize(e,t,r){r!==void 0&&r!==pa&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},qR=1/1e3,jwt=1e3,Uwt=class{constructor(){this.previousTime=0,this.currentTime=0,this.delta=0,this.fixedDelta=1e3/60,this.elapsed=0,this.timescale=1,this.fixedDeltaEnabled=!1,this.autoReset=!1}setFixedDeltaEnabled(e){return this.fixedDeltaEnabled=e,this}isAutoResetEnabled(e){return this.autoReset}setAutoResetEnabled(e){return typeof document<"u"&&document.hidden!==void 0&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this.autoReset=e),this}getDelta(){return this.delta*qR}getFixedDelta(){return this.fixedDelta*qR}setFixedDelta(e){return this.fixedDelta=e*jwt,this}getElapsed(){return this.elapsed*qR}getTimescale(){return this.timescale}setTimescale(e){return this.timescale=e,this}update(e){return this.fixedDeltaEnabled?this.delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=e!==void 0?e:performance.now(),this.delta=this.currentTime-this.previousTime),this.delta*=this.timescale,this.elapsed+=this.delta,this}reset(){return this.delta=0,this.elapsed=0,this.currentTime=performance.now(),this}handleEvent(e){document.hidden||(this.currentTime=performance.now())}dispose(){this.setAutoResetEnabled(!1)}},GU={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},$wt=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=clamp(texture2D(map,uv)*intensity,0.0,1.0);}`,Vwt=class extends ld{constructor({blendFunction:e=Nr.SCREEN,luminanceThreshold:t=.9,luminanceSmoothing:r=.025,resolutionScale:n=.5,intensity:i=1,width:o=vs.AUTO_SIZE,height:a=vs.AUTO_SIZE,kernelSize:s=GU.LARGE}={}){super("BloomEffect",$wt,{blendFunction:e,uniforms:new Map([["map",new We(null)],["intensity",new We(i)]])}),this.renderTarget=new cn(1,1,{minFilter:yr,magFilter:yr,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.renderTarget.texture.generateMipmaps=!1,this.uniforms.get("map").value=this.renderTarget.texture,this.luminancePass=new Bwt({renderTarget:this.renderTarget,colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothingFactor=r,this.blurPass=new Uue({resolutionScale:n,width:o,height:a,kernelSize:s});let l=this.blurPass.getResolution();l.addEventListener("change",u=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(e){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getIntensity(){return this.intensity}setIntensity(e){this.intensity=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,t,r){let n=this.renderTarget;this.luminancePass.enabled?(this.luminancePass.render(e,t,n),this.blurPass.render(e,n,n)):this.blurPass.render(e,t,n)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height),this.luminancePass.resolution.copy(r)}initialize(e,t,r){this.blurPass.initialize(e,t,r),r!==void 0&&(this.renderTarget.texture.type=r,e.outputEncoding===ir&&(this.renderTarget.texture.encoding=ir))}},Hwt="uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}",Gwt=class extends ld{constructor({blendFunction:e=Nr.NORMAL,brightness:t=0,contrast:r=0}={}){super("BrightnessContrastEffect",Hwt,{blendFunction:e,uniforms:new Map([["brightness",new We(t)],["contrast",new We(r)]])})}get brightness(){return this.uniforms.get("brightness").value}set brightness(e){this.uniforms.get("brightness").value=e}getBrightness(e){return this.brightness}setBrightness(e){this.brightness=e}get contrast(){return this.uniforms.get("contrast").value}set contrast(e){this.uniforms.get("contrast").value=e}getContrast(e){return this.contrast}setContrast(e){this.contrast=e}},Wwt="void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}",qwt=class extends ld{constructor(e=Nr.NORMAL){super("ColorAverageEffect",Wwt,{blendFunction:e})}},Kwt="varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=texture2D(inputBuffer,vUvR).ra;vec2 ba=texture2D(inputBuffer,vUvB).ba;outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}",Xwt="uniform vec2 offset;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vUvR=uv+shift;vUvB=uv-shift;}",Ywt=class extends ld{constructor({blendFunction:e=Nr.NORMAL,offset:t=new ue(.001,5e-4)}={}){super("ChromaticAberrationEffect",Kwt,{vertexShader:Xwt,blendFunction:e,attributes:Wc.CONVOLUTION,uniforms:new Map([["offset",new We(t)]])})}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}},Qwt=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;
#else
uniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;
#endif
uniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float CoCNear=texture2D(nearCoCBuffer,uv).r;CoCNear=min(CoCNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,CoCNear);outputColor=result;}`,Zwt=class extends ld{constructor(e,{blendFunction:t=Nr.NORMAL,worldFocusDistance:r,worldFocusRange:n,focusDistance:i=0,focalLength:o=.1,focusRange:a=o,bokehScale:s=1,width:l=vs.AUTO_SIZE,height:u=vs.AUTO_SIZE}={}){super("DepthOfFieldEffect",Qwt,{blendFunction:t,attributes:Wc.DEPTH,uniforms:new Map([["nearColorBuffer",new We(null)],["farColorBuffer",new We(null)],["nearCoCBuffer",new We(null)],["scale",new We(1)]])}),this.camera=e,this.renderTarget=new cn(1,1,{minFilter:yr,magFilter:yr,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTarget.texture.generateMipmaps=!1,this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new wc(new K1t(e));let d=this.cocMaterial;d.focusDistance=i,d.focusRange=a,r!==void 0&&(d.worldFocusDistance=r),n!==void 0&&(d.worldFocusRange=n),this.blurPass=new Uue({kernelSize:GU.MEDIUM,width:l,height:u});let c=this.blurPass.getResolution();c.addEventListener("change",f=>this.setSize(c.getBaseWidth(),c.getBaseHeight())),this.maskPass=new wc(new lwt(this.renderTargetCoC.texture));let h=this.maskPass.fullscreenMaterial;h.maskFunction=jue.MULTIPLY,h.colorChannel=Fue.GREEN,this.bokehNearBasePass=new wc(new pA(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new wc(new pA(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new wc(new pA(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new wc(new pA(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null,this.bokehScale=s}get cocTexture(){return this.renderTargetCoC.texture}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.circleOfConfusionMaterial}getBlurPass(){return this.blurPass}get resolution(){return this.blurPass.getResolution()}getResolution(){return this.blurPass.getResolution()}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(e){let t=[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];for(let r of t)r.fullscreenMaterial.setScale(e);this.maskPass.fullscreenMaterial.setStrength(e),this.uniforms.get("scale").value=e}getBokehScale(){return this.bokehScale}setBokehScale(e){this.bokehScale=e}getTarget(){return this.target}setTarget(e){this.target=e}calculateFocusDistance(e){let t=this.camera,r=t.position.distanceTo(e);return $z(-r,t.near,t.far)}setDepthTexture(e,t=_h){this.circleOfConfusionMaterial.depthBuffer=e,this.circleOfConfusionMaterial.depthPacking=t}update(e,t,r){let n=this.renderTarget,i=this.renderTargetCoC,o=this.renderTargetCoCBlurred,a=this.renderTargetMasked;if(this.target!==null){let s=this.calculateFocusDistance(this.target);this.circleOfConfusionMaterial.focusDistance=s}this.cocPass.render(e,null,i),this.blurPass.render(e,i,o),this.maskPass.render(e,t,a),this.bokehFarBasePass.render(e,a,n),this.bokehFarFillPass.render(e,n,this.renderTargetFar),this.bokehNearBasePass.render(e,t,n),this.bokehNearFillPass.render(e,n,this.renderTargetNear)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t);let n=r.width,i=r.height,o=[this.cocPass,this.blurPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];o.push(this.renderTargetCoC,this.renderTargetMasked),o.forEach(a=>a.setSize(e,t)),o=[this.renderTarget,this.renderTargetNear,this.renderTargetFar,this.renderTargetCoCBlurred],o.forEach(a=>a.setSize(n,i)),[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(a=>a.fullscreenMaterial.setSize(n,i))}initialize(e,t,r){[this.cocPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(n=>n.initialize(e,t,r)),this.blurPass.initialize(e,t,pa),r!==void 0&&(this.renderTarget.texture.type=r,this.renderTargetNear.texture.type=r,this.renderTargetFar.texture.type=r,this.renderTargetMasked.texture.type=r,e.outputEncoding===ir&&(this.renderTarget.texture.encoding=ir,this.renderTargetNear.texture.encoding=ir,this.renderTargetFar.texture.encoding=ir,this.renderTargetMasked.texture.encoding=ir))}};new F;new qe;var Jwt="uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",eSt=class extends ld{constructor({blendFunction:e=Nr.NORMAL,hue:t=0,saturation:r=0}={}){super("HueSaturationEffect",Jwt,{blendFunction:e,uniforms:new Map([["hue",new We(new F)],["saturation",new We(r)]])}),this.hue=t}get saturation(){return this.uniforms.get("saturation").value}set saturation(e){this.uniforms.get("saturation").value=e}getSaturation(){return this.saturation}setSaturation(e){this.saturation=e}get hue(){let e=this.uniforms.get("hue").value;return Math.acos((e.x*3-1)/2)}set hue(e){let t=Math.sin(e),r=Math.cos(e);this.uniforms.get("hue").value.set((2*r+1)/3,(-Math.sqrt(3)*t-r+1)/3,(Math.sqrt(3)*t-r+1)/3)}getHue(){return this.hue}setHue(e){this.hue=e}};new Bt;var tSt=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,rSt=class extends ld{constructor({blendFunction:e=Nr.SCREEN,premultiply:t=!1}={}){super("NoiseEffect",tSt,{blendFunction:e}),this.premultiply=t}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(e){this.premultiply!==e&&(e?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(e){this.premultiply=e}},nSt="uniform bool active;uniform vec2 d;void mainUv(inout vec2 uv){if(active){uv=vec2(d.x*(floor(uv.x/d.x)+0.5),d.y*(floor(uv.y/d.y)+0.5));}}",iSt=class extends ld{constructor(e=30){super("PixelationEffect",nSt,{uniforms:new Map([["active",new We(!1)],["d",new We(new ue)]])}),this.resolution=new ue,this.d=0,this.granularity=e}get granularity(){return this.d}set granularity(e){let t=Math.floor(e);t%2>0&&(t+=1),this.d=t,this.uniforms.get("active").value=t>0,this.setSize(this.resolution.width,this.resolution.height)}getGranularity(){return this.granularity}setGranularity(e){this.granularity=e}setSize(e,t){this.resolution.set(e,t),this.uniforms.get("d").value.setScalar(this.d).divide(this.resolution)}};new F;new F;var GX="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC",WX="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC",oSt="uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",aSt="varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",Jp={LOW:0,MEDIUM:1,HIGH:2,ULTRA:3},$ue=class extends ld{constructor({preset:e=Jp.MEDIUM,edgeDetectionMode:t=MO.COLOR,predicationMode:r=twt.DISABLED}={}){super("SMAAEffect",oSt,{vertexShader:aSt,blendFunction:Nr.NORMAL,attributes:Wc.CONVOLUTION|Wc.DEPTH,uniforms:new Map([["weightMap",new We(null)]])});let n,i;arguments.length>1&&(n=arguments[0],i=arguments[1],arguments.length>2&&(e=arguments[2]),arguments.length>3&&(t=arguments[3])),this.renderTargetEdges=new cn(1,1,{minFilter:yr,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetEdges.texture.name="SMAA.Edges",this.renderTargetWeights=this.renderTargetEdges.clone(),this.renderTargetWeights.texture.name="SMAA.Weights",this.uniforms.get("weightMap").value=this.renderTargetWeights.texture,this.clearPass=new HU(!0,!1,!1),this.clearPass.overrideClearColor=new Bt(0),this.clearPass.overrideClearAlpha=1,this.edgeDetectionPass=new wc(new rwt),this.edgeDetectionMaterial.edgeDetectionMode=t,this.edgeDetectionMaterial.predicationMode=r,this.weightsPass=new wc(new dwt);let o=new qae;o.onLoad=()=>{let a=new co(n);a.name="SMAA.Search",a.magFilter=Pn,a.minFilter=Pn,a.generateMipmaps=!1,a.needsUpdate=!0,a.flipY=!0,this.weightsMaterial.searchTexture=a;let s=new co(i);s.name="SMAA.Area",s.magFilter=yr,s.minFilter=yr,s.generateMipmaps=!1,s.needsUpdate=!0,s.flipY=!1,this.weightsMaterial.areaTexture=s,this.dispatchEvent({type:"load"})},o.itemStart("search"),o.itemStart("area"),n!==void 0&&i!==void 0?(o.itemEnd("search"),o.itemEnd("area")):typeof Image<"u"&&(n=new Image,i=new Image,n.addEventListener("load",()=>o.itemEnd("search")),i.addEventListener("load",()=>o.itemEnd("area")),n.src=GX,i.src=WX),this.applyPreset(e)}get edgesTexture(){return this.renderTargetEdges.texture}getEdgesTexture(){return this.edgesTexture}get weightsTexture(){return this.renderTargetWeights.texture}getWeightsTexture(){return this.weightsTexture}get edgeDetectionMaterial(){return this.edgeDetectionPass.fullscreenMaterial}get colorEdgesMaterial(){return this.edgeDetectionMaterial}getEdgeDetectionMaterial(){return this.edgeDetectionMaterial}get weightsMaterial(){return this.weightsPass.fullscreenMaterial}getWeightsMaterial(){return this.weightsMaterial}setEdgeDetectionThreshold(e){this.edgeDetectionMaterial.edgeDetectionThreshold=e}setOrthogonalSearchSteps(e){this.weightsMaterial.orthogonalSearchSteps=e}applyPreset(e){let t=this.edgeDetectionMaterial,r=this.weightsMaterial;switch(e){case Jp.LOW:t.edgeDetectionThreshold=.15,r.orthogonalSearchSteps=4,r.diagonalDetection=!1,r.cornerDetection=!1;break;case Jp.MEDIUM:t.edgeDetectionThreshold=.1,r.orthogonalSearchSteps=8,r.diagonalDetection=!1,r.cornerDetection=!1;break;case Jp.HIGH:t.edgeDetectionThreshold=.1,r.orthogonalSearchSteps=16,r.diagonalSearchSteps=8,r.cornerRounding=25,r.diagonalDetection=!0,r.cornerDetection=!0;break;case Jp.ULTRA:t.edgeDetectionThreshold=.05,r.orthogonalSearchSteps=32,r.diagonalSearchSteps=16,r.cornerRounding=25,r.diagonalDetection=!0,r.cornerDetection=!0;break}}setDepthTexture(e,t=_h){this.edgeDetectionMaterial.depthBuffer=e,this.edgeDetectionMaterial.depthPacking=t}update(e,t,r){this.clearPass.render(e,this.renderTargetEdges),this.edgeDetectionPass.render(e,t,this.renderTargetEdges),this.weightsPass.render(e,this.renderTargetEdges,this.renderTargetWeights)}setSize(e,t){this.edgeDetectionMaterial.setSize(e,t),this.weightsMaterial.setSize(e,t),this.renderTargetEdges.setSize(e,t),this.renderTargetWeights.setSize(e,t)}dispose(){let{searchTexture:e,areaTexture:t}=this.weightsMaterial;e!==null&&t!==null&&(e.dispose(),t.dispose()),super.dispose()}static get searchImageDataURL(){return GX}static get areaImageDataURL(){return WX}},sSt=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,mA={DEFAULT:0,ESKIL:1},lSt=class extends ld{constructor({blendFunction:e=Nr.NORMAL,technique:t=mA.DEFAULT,eskil:r=!1,offset:n=.5,darkness:i=.5}={}){super("VignetteEffect",sSt,{blendFunction:e,defines:new Map([["VIGNETTE_TECHNIQUE",t.toFixed(0)]]),uniforms:new Map([["offset",new We(n)],["darkness",new We(i)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(e){this.technique!==e&&(this.defines.set("VIGNETTE_TECHNIQUE",e.toFixed(0)),this.setChanged())}get eskil(){return this.technique===mA.ESKIL}set eskil(e){this.technique=e?mA.ESKIL:mA.DEFAULT}getTechnique(){return this.technique}setTechnique(e){this.technique=e}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}get darkness(){return this.uniforms.get("darkness").value}set darkness(e){this.uniforms.get("darkness").value=e}getDarkness(){return this.darkness}setDarkness(e){this.darkness=e}},Ch=class{constructor(e,t){this.enabled=!1,this.effect=new e(t),Object.defineProperty(this,"opacity",{enumerable:!0,set(r){this.effect.blendMode.opacity.value=r},get(){return this.effect.blendMode.opacity.value}}),Object.defineProperty(this,"blendFunction",{enumerable:!0,set(r){this.effect.blendMode.setBlendFunction(Number(r))},get(){return this.effect.blendMode.blendFunction}}),this.blendFunction=Nr.NORMAL}},uSt=class extends Ch{constructor(){super(Vwt),this.blendFunction=Nr.SCREEN}set intensity(e){this.effect.intensity=e}get intensity(){return this.effect.intensity}set luminanceThreshold(e){this.effect.luminanceMaterial.threshold=e}get luminanceThreshold(){return this.effect.luminanceMaterial.threshold}set luminanceSmoothing(e){this.effect.luminanceMaterial.smoothing=e}get luminanceSmoothing(){return this.effect.luminanceMaterial.smoothing}set blurScale(e){this.effect.blurPass.scale=e}get blurScale(){return this.effect.blurPass.scale}set kernelSize(e){this.effect.blurPass.kernelSize=e}get kernelSize(){return this.effect.blurPass.kernelSize}},cSt=class extends Ch{constructor(){super(Gwt)}set contrast(e){this.effect.uniforms.get("contrast").value=e}get contrast(){return this.effect.uniforms.get("contrast").value}set brightness(e){this.effect.uniforms.get("brightness").value=e}get brightness(){return this.effect.uniforms.get("brightness").value}},dSt=class extends Ch{constructor(){super(Ywt),this.effect.offset=new ue(.01,.01)}set offset(e){this.effect.offset.set(e[0]/1e3,e[1]/1e3)}get offset(){return[this.effect.offset.x*1e3,this.effect.offset.y*1e3]}},hSt=class extends Ch{constructor(){super(qwt)}},fSt=class extends Ch{constructor(){super(eSt),this._hue=0}set hue(e){this._hue=e,this.effect.setHue(e)}get hue(){return this._hue}set saturation(e){this.effect.uniforms.get("saturation").value=e}get saturation(){return this.effect.uniforms.get("saturation").value}},pSt=class extends Ch{constructor(){super(rSt),this.blendFunction=Nr.OVERLAY}},mSt=class extends Ch{constructor(){super(lSt)}get eskil(){return this.effect.eskil}set eskil(e){this.effect.eskil=e}get darkness(){return this.effect.uniforms.get("darkness").value}set darkness(e){this.effect.uniforms.get("darkness").value=e}get offset(){return this.effect.uniforms.get("offset").value}set offset(e){this.effect.uniforms.get("offset").value=e}},gSt=class extends Ch{constructor(e){super(Zwt,e)}set focalLength(e){this.effect.circleOfConfusionMaterial.uniforms.focalLength.value=e}get focalLength(){return this.effect.circleOfConfusionMaterial.uniforms.focalLength.value}set focusDistance(e){this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value=e}get focusDistance(){return this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value}get bokehScale(){return this.effect.bokehScale}set bokehScale(e){this.effect.bokehScale=e}},vSt=class extends Ch{constructor(){super(iSt)}get granularity(){return this.effect.getGranularity()}set granularity(e){this.effect.setGranularity(e)}},ySt=`#define GLSLIFY 1
varying vec2 vUv;varying vec2 vTexCoords[9];uniform vec2 resolution;void main(){vUv=position.xy*0.5+0.5;vec2 texelSize=vec2(1.0)/resolution;vTexCoords[0]=vUv+vec2(-texelSize.x,-texelSize.y);vTexCoords[1]=vUv+vec2(0.0,-texelSize.y);vTexCoords[2]=vUv+vec2(texelSize.x,-texelSize.y);vTexCoords[3]=vUv+vec2(-texelSize.x,0.0);vTexCoords[4]=vUv+vec2(0.0,0.0);vTexCoords[5]=vUv+vec2(texelSize.x,0.0);vTexCoords[6]=vUv+vec2(-texelSize.x,texelSize.y);vTexCoords[7]=vUv+vec2(0.0,texelSize.y);vTexCoords[8]=vUv+vec2(texelSize.x,texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}`,bSt=`#define GLSLIFY 1
#include <common>
varying vec2 vUv;varying vec2 vTexCoords[9];uniform sampler2D inputBuffer;uniform sampler2D historyBuffer;uniform sampler2D velocityBuffer;uniform sampler2D depthBuffer;uniform vec2 resolution;
#define USE_YCOCG
#define USE_CATMULL_ROM
const float feedback_min=0.5;const float feedback_max=0.95;vec3 RGB_YCoCg(vec3 c){return vec3(c.x/4.0+c.y/2.0+c.z/4.0,c.x/2.0-c.z/2.0,-c.x/4.0+c.y/2.0-c.z/4.0);}vec3 YCoCg_RGB(vec3 c){return clamp(vec3(c.x+c.y-c.z,c.x+c.z,c.x-c.y-c.z),vec3(0.0),vec3(1.0));}vec4 sample_color(sampler2D tex,vec2 uv){
#ifdef USE_YCOCG
vec4 c=texture(tex,uv);return vec4(RGB_YCoCg(c.rgb),c.a);
#else
return texture(tex,uv);
#endif
}vec4 sample_catmull_rom(sampler2D tex,vec2 uv,vec2 texSize){vec2 samplePos=uv*texSize;vec2 texPos1=floor(samplePos-0.5)+0.5;vec2 f=samplePos-texPos1;vec2 w0=f*(-0.5+f*(1.0-0.5*f));vec2 w1=1.0+f*f*(-2.5+1.5*f);vec2 w2=f*(0.5+f*(2.0-1.5*f));vec2 w3=f*f*(-0.5+0.5*f);vec2 w12=w1+w2;vec2 offset12=w2/(w1+w2);vec2 texPos0=texPos1-1.0;vec2 texPos3=texPos1+2.0;vec2 texPos12=texPos1+offset12;texPos0/=texSize;texPos3/=texSize;texPos12/=texSize;vec4 result=vec4(0.0);result+=texture2D(tex,vec2(texPos12.x,texPos0.y))*w12.x*w0.y;result+=texture2D(tex,vec2(texPos0.x,texPos12.y))*w0.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos12.y))*w12.x*w12.y;result+=texture2D(tex,vec2(texPos3.x,texPos12.y))*w3.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos3.y))*w12.x*w3.y;return result;}vec3 choose_motion_vector(){
#ifdef CHOOSE_LONGEST_MOTION_VECTOR
float longest=-1.0;vec3 v_choose=vec3(-1.0);for(int i=0;i<9;i++){vec3 v=texture2D(velocityBuffer,vTexCoords[i]).rgb;float l=length(v.xy);if(l>longest){longest=l;v_choose=v;}}return v_choose;
#else
float closest_depth=1000.0;vec2 closest_uv_offset=vec2(0.0);for(int i=0;i<9;i++){float neighbor_depth=texture2D(depthBuffer,vTexCoords[i]).r;if(neighbor_depth<closest_depth){closest_uv_offset=vTexCoords[i];closest_depth=neighbor_depth;}}return texture2D(velocityBuffer,closest_uv_offset).rgb;
#endif
}vec4 clipAabb(vec3 aabb_min,vec3 aabb_max,vec4 avg,vec4 input_texel){const float FLT_EPS=0.00000001;vec3 p_clip=0.5*(aabb_max+aabb_min);vec3 e_clip=0.5*(aabb_max-aabb_min)+FLT_EPS;vec4 v_clip=input_texel-vec4(p_clip,avg.w);vec3 v_unit=v_clip.xyz/e_clip;vec3 a_unit=abs(v_unit);float ma_unit=max(a_unit.x,max(a_unit.y,a_unit.z));if(ma_unit>1.0){return vec4(p_clip,avg.w)+v_clip/ma_unit;}else{return input_texel;}}vec3 clip_aabb_variance(in vec3 cOld,in vec3 cNew,in vec3 centre,in vec3 halfSize){if(all(lessThanEqual(abs(cOld-centre),halfSize))){return cOld;}vec3 dir=(cNew-cOld);vec3 near=centre-sign(dir)*halfSize;vec3 tAll=(near-cOld)/dir;float t=0.0001;for(int i=0;i<3;i++){if(tAll[i]>=0.0&&tAll[i]<t){t=tAll[i];}}if(t>=0.0001){return cOld;}return cOld+dir*t;}void main(){vec3 v=choose_motion_vector();vec2 velocity=v.rg;vec2 previousPixelPos=vUv-velocity;vec4 currentColor=sample_color(inputBuffer,vUv);
#ifdef USE_CATMULL_ROM
vec4 previousColor=sample_catmull_rom(historyBuffer,previousPixelPos,resolution);
#else
vec4 previousColor=sample_color(historyBuffer,previousPixelPos);
#endif
#ifdef USE_YCOCG
previousColor=vec4(RGB_YCoCg(previousColor.rgb),previousColor.a);
#endif
vec4 ctl=sample_color(inputBuffer,vTexCoords[0]);vec4 ctc=sample_color(inputBuffer,vTexCoords[1]);vec4 ctr=sample_color(inputBuffer,vTexCoords[2]);vec4 cml=sample_color(inputBuffer,vTexCoords[3]);vec4 cmc=sample_color(inputBuffer,vTexCoords[4]);vec4 cmr=sample_color(inputBuffer,vTexCoords[5]);vec4 cbl=sample_color(inputBuffer,vTexCoords[6]);vec4 cbc=sample_color(inputBuffer,vTexCoords[7]);vec4 cbr=sample_color(inputBuffer,vTexCoords[8]);vec4 cmin=min(ctl,min(ctc,min(ctr,min(cml,min(cmc,min(cmr,min(cbl,min(cbc,cbr))))))));vec4 cmax=max(ctl,max(ctc,max(ctr,max(cml,max(cmc,max(cmr,max(cbl,max(cbc,cbr))))))));vec4 cavg=(ctl+ctc+ctr+cml+cmc+cmr+cbl+cbc+cbr)/9.0;vec4 cmin5=min(ctc,min(cml,min(cmc,min(cmr,cbc))));vec4 cmax5=max(ctc,max(cml,max(cmc,max(cmr,cbc))));vec4 cavg5=(ctc+cml+cmc+cmr+cbc)/5.0;cmin=0.5*(cmin+cmin5);cmax=0.5*(cmax+cmax5);cavg=0.5*(cavg+cavg5);
#ifdef USE_YCOCG
vec2 chroma_extent=vec2(0.25*0.5*(cmax.r-cmin.r));vec2 chroma_center=currentColor.gb;cmin.yz=chroma_center-chroma_extent;cmax.yz=chroma_center+chroma_extent;cavg.yz=chroma_center;
#endif
vec4 previousColorClipped=clamp(previousColor,cmin,cmax);
#ifdef LUMINANCE_DIFFERENCES
#ifdef USE_YCOCG
float lum0=currentColor.r;float lum1=previousColorClipped.r;
#else
float lum0=luminance(currentColor.rgb);float lum1=luminance(previousColorClipped.rgb);
#endif
float unbiased_diff=abs(lum0-lum1)/max(lum0,max(lum1,0.2));float unbiased_weight=1.0-unbiased_diff;float unbiased_weight_sqr=unbiased_weight*unbiased_weight;float k_feedback=mix(feedback_min,feedback_max,unbiased_weight_sqr);vec4 result=mix(currentColor,previousColorClipped,vec4(k_feedback));
#else
const float alpha=0.1;vec4 result=mix(currentColor,previousColorClipped,1.0-alpha);
#endif
#ifdef USE_YCOCG
gl_FragColor=vec4(YCoCg_RGB(result.rgb).rgb,result.a);
#else
gl_FragColor=result;
#endif
}`,xSt=`#define GLSLIFY 1
varying vec2 vUv;void main(){gl_Position=vec4(position.xy,1.0,1.0);vUv=position.xy*0.5+0.5;}`,wSt=`#define GLSLIFY 1
layout(location=1)out vec4 gVelocity;varying vec2 vUv;uniform sampler2D inputBuffer;void main(){gl_FragColor=texture2D(inputBuffer,vUv);gVelocity=vec4(0.0);}`,Gz=class extends Sn{constructor(){super({name:"PassthroughMaterial",uniforms:{inputBuffer:new We(null)},blending:Xi,depthWrite:!1,depthTest:!1,vertexShader:xSt,fragmentShader:wSt})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}},SSt=class extends Ja{constructor(){super("TAAResolvePass"),this.MRTCompatible=!0,this.needsSwap=!1,this.passThroughMaterial=new Gz,this.resolutionVector=new ue,this.resolveMaterial=new Sn({name:"TAAResolveMaterial",uniforms:{inputBuffer:new We(null),historyBuffer:new We(null),velocityBuffer:new We(null),depthBuffer:new We(null),resolution:new We(new ue)},blending:Xi,depthWrite:!1,depthTest:!1,vertexShader:ySt,fragmentShader:bSt}),this.historyRenderTarget=new cn(1024,1024,{minFilter:yr,stencilBuffer:!1,depthBuffer:!1}),this.historyRenderTarget.texture.name="TAA.History",this.resultRenderTarget=new cn(1024,1024,{minFilter:yr,stencilBuffer:!1,depthBuffer:!1}),this.resultRenderTarget.texture.name="TAA.Output"}setSize(e,t){this.historyRenderTarget.setSize(e,t),this.resultRenderTarget.setSize(e,t)}render(e,t){this.fullscreenMaterial=this.resolveMaterial,this.resolveMaterial.uniforms.inputBuffer.value=t.texture[0],this.resolveMaterial.uniforms.velocityBuffer.value=t.texture[1],this.resolveMaterial.uniforms.depthBuffer.value=t.depthTexture,this.resolveMaterial.uniforms.historyBuffer.value=this.historyRenderTarget.texture,this.resolveMaterial.uniforms.resolution.value.set(t.width,t.height),e.setRenderTarget(this.resultRenderTarget),e.render(this.scene,this.camera),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,e.setRenderTarget(this.historyRenderTarget),e.render(this.scene,this.camera);let r=this.renderToScreen?null:t;this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,e.setRenderTarget(r),e.render(this.scene,this.camera)}dispose(){this.resultRenderTarget.dispose(),this.historyRenderTarget.dispose(),this.resolveMaterial.dispose(),this.passThroughMaterial.dispose()}},_St=class extends Ja{constructor(e,t,r){super("TransmissionPass",void 0,t),this.MRTCompatible=!0,this.depthPass=new VX(e,t,{renderTarget:r.transmissionDepthTarget}),this.passThroughMaterial=new Gz,this.splineScene=e,this.needsSwap=!1}updatePasses(e){this.passThroughMaterial=new Gz,this.depthPass=new VX(this.splineScene,this.camera,{renderTarget:e.transmissionDepthTarget})}setCamera(e){this.camera=e}setScene(e){this.splineScene=e}render(e,t,r){let n=this.camera.layers.mask,i=e;i.setRenderTarget(i.transmissionRenderTarget),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=t.texture[0],i.clear(),i.render(this.scene,this.camera),this.camera.layers.disable(3),this.depthPass.render(e,t,r),i.shadowMap.needsUpdate=!1,i.shadowMap.autoUpdate=!1;let o=this.renderToScreen?null:t;this.camera.layers.set(3),e.setRenderTarget(o),e.render(this.splineScene,this.camera),this.camera.layers.mask=n}},qX=new Uf,CSt=new Sn({transparent:!0,vertexShader:`
        void main() {
            gl_Position = vec4(0.0);
        }
    `,fragmentShader:`
        layout(location = 1) out vec4 gVelocity;

        void main() {
            gl_FragColor = vec4(0.0);
			gVelocity = vec4(0.0);
        }
    `}),Wz=class extends Ja{constructor(e,t,r){super("OpaquePass",t??qX,r),this.MRTCompatible=!0,this.hasTransmissionPass=!1,this.clear=!0,this.clearColorOnly=!1,this.clearDepth=!1,this.needsSwap=!1,this.originalMaterials=new Map,this.MRTCompatible=e}set splatViewer(e){this._splatViewer=e}get splatViewer(){return this._splatViewer}setCamera(e){this.camera=e}setScene(e){this.scene=e??qX}getScene(){return this.scene}render(e,t){var n;this.camera.layers.enable(3),this.hasTransmissionPass&&(this.originalMaterials.clear(),this.scene.traverse(i=>{i.layers.isEnabled(3)&&i instanceof Ts&&(this.originalMaterials.set(i.id,i.material),i.material=CSt)}),e.shadowMap.needsUpdate=!0,e.shadowMap.autoUpdate=!0),this.camera.layers.enable(8);let r=this.renderToScreen?null:t;if(e.setRenderTarget(r),this.clearColorOnly&&e.clear(!0,!1,!0),this.clear&&e.clear(),((n=this._splatViewer)==null?void 0:n.splatRenderingInitialized)===!0){let i=e.autoClear;e.autoClear=!1,e.render(this.scene,this.camera),this._splatViewer.update(),e.render(this._splatViewer.splatMesh,this.camera),e.autoClear=i}else e.render(this.scene,this.camera);this.clearDepth&&e.clear(!1,!0,!1),this.hasTransmissionPass&&this.originalMaterials.forEach((i,o)=>{let a=this.scene.getObjectById(o);a&&(a.material=i)})}},ASt=class{constructor(e,{depthBuffer:t=!0,stencilBuffer:r=!1,multisampling:n=0,frameBufferType:i=0}={}){this.renderer=e,this.helperStartIndex=0,this.copyPass=new Hz,this.depthTexture=null,this.timer=new Uwt,this._width=1,this._height=1,this.passes=[],this.helperPasses=[],this.autoRenderToScreen=!0,this.inputBuffer=this.createBuffer(t,r,i,n,!0,"input buffer mrt"),this.inputBufferSingle=this.createBuffer(t,r,i,n,!1," input buffer single"),this.inputBufferSingle.texture.dispose(),this.inputBufferSingle.depthTexture.dispose(),this.inputBufferSingle.texture=this.inputBuffer.texture[0],this.inputBufferSingle.depthTexture=this.inputBuffer.depthTexture,this.outputBuffer=this.inputBuffer.clone(),this.outputBuffer.name="output buffer mrt",this.outputBufferSingle=this.createBuffer(t,r,i,n,!1,"output buffer single"),this.outputBufferSingle.texture.dispose(),this.outputBufferSingle.depthTexture.dispose(),this.outputBufferSingle.texture=this.outputBuffer.texture[0],this.outputBufferSingle.depthTexture=this.outputBuffer.depthTexture,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){let t=this.inputBuffer,r=this.multisampling;r>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):r!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("creating new input buffer"),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e,!0,"new input buffer"),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){var t;if(this.renderer=e,e!==null){let r=e.getSize(new ue),n=((t=e.getContext().getContextAttributes())==null?void 0:t.alpha)??!1,i=this.inputBuffer.texture[0].type;i===pa&&e.outputEncoding===ir&&(this.inputBuffer.texture[0].encoding=ir,this.outputBuffer.texture[0].encoding=ir,this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("doing some kinda dispose??")),e.autoClear=!1,this.setSize(r.width,r.height,!1);for(let o of this.passes)o.initialize(e,n,i)}}replaceRenderer(e,t=!0){let r=this.renderer,n=r.domElement.parentNode;return this.setRenderer(e),t&&n!==null&&(n.removeChild(r.domElement),n.appendChild(e.domElement)),r}createDepthTexture(){let e=this.depthTexture=new x0(this._width,this._height);return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=Ym,e.type=Em):e.type=qd,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(let e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,r,n,i,o){let a=this.renderer,s=a===null?new ue:a.getDrawingBufferSize(new ue),l={minFilter:yr,magFilter:yr,wrapS:Ti,wrapT:Ti,stencilBuffer:t,depthBuffer:e},u;return n>0?(u=new cn(s.width,s.height,l),u.samples=n):(i?(u=new brt(s.width,s.height,2,l),u.texture[1].type=Xm):u=new cn(s.width,s.height,l),u.depthTexture=new x0(2048,2048),u.depthTexture.type=Ba),r===pa&&a!==null&&a.outputEncoding===ir&&(Array.isArray(u.texture)?u.texture.forEach(d=>d.encoding=ir):u.texture.encoding=ir),Array.isArray(u.texture)?u.texture.forEach((d,c)=>{d.name=`EffectComposer.Buffer ${i} ${c}`,d.generateMipmaps=!1}):(u.texture.name=`EffectComposer.Buffer ${i}`,u.texture.generateMipmaps=!1),u.name=o,u}addPass(e,t){var s;let r=this.passes,n=this.renderer,i=n.getDrawingBufferSize(new ue),o=((s=n.getContext().getContextAttributes())==null?void 0:s.alpha)??!1,a;if(e.MRTCompatible&&(a=this.inputBuffer.texture[0].type),e.MRTCompatible||(a=this.inputBuffer.texture.type),e.setRenderer(n),e.setSize(i.width,i.height),e.initialize(n,o,a),this.autoRenderToScreen&&(r.length>0&&(r[r.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),t!==void 0?r.splice(t,0,e):r.push(e),this.autoRenderToScreen&&(r[r.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){let l=this.createDepthTexture();for(e of r)e.setDepthTexture(l)}else e.setDepthTexture(this.depthTexture)}setHelperStartIndex(e){this.helperStartIndex=e}removePass(e){let t=this.passes,r=t.indexOf(e);if(r!==-1&&t.splice(r,1).length>0){if(this.depthTexture!==null){let n=(i,o)=>i||o.needsDepthTexture;t.reduce(n,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&r===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){let e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){let t=this.renderer,r=this.copyPass,n=this.inputBuffer,i=this.outputBuffer,o=this.inputBufferSingle,a=this.outputBufferSingle,s=!1,l,u,d,c;e===void 0&&(e=this.timer.update().getDelta());for(let h of this.passes)h.enabled&&(h.MRTCompatible?h.render(t,n,i,e,s):h.render(t,o,a,e,s),h.needsSwap&&(s&&(r.renderToScreen=h.renderToScreen,l=t.getContext(),u=t.state.buffers.stencil,u.setFunc(l.NOTEQUAL,1,4294967295),r.render(t,n,i,e,s),u.setFunc(l.EQUAL,1,4294967295)),d=n,c=o,n=i,o=a,i=d,a=c),h instanceof Fwt?s=!0:h instanceof pwt&&(s=!1))}setSize(e,t,r){let n=this.renderer;if(this._width=e,this._height=t,e===void 0||t===void 0){let o=n.getSize(new ue);e=o.width,t=o.height}n.setSize(e,t,r);let i=n.getDrawingBufferSize(new ue);this.inputBuffer.setSize(i.width,i.height),this.outputBuffer.setSize(i.width,i.height),this.inputBufferSingle.setSize(i.width,i.height),this.outputBufferSingle.setSize(i.width,i.height);for(let o of this.passes)o.setSize(i.width,i.height)}reset(){let e=this.timer.isAutoResetEnabled();this.dispose(),this.autoRenderToScreen=!0,this.timer.setAutoResetEnabled(e)}dispose(){for(let e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.inputBufferSingle!==null&&this.inputBufferSingle.dispose(),this.outputBufferSingle!==null&&this.outputBufferSingle.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},ESt=new Sn({name:"CombineMaterial",uniforms:{inputBufferA:new We(null),inputBufferB:new We(null)},blending:Xi,depthWrite:!1,depthTest:!1,vertexShader:`
varying vec2 vUv;
void main() {
    gl_Position = vec4(position.xy, 1.0, 1.0);
    vUv = position.xy * 0.5 + 0.5;
}
`,fragmentShader:`
    varying vec2 vUv;
    uniform sampler2D inputBufferA;
    uniform sampler2D inputBufferB;

    // TODO: Why do we need these when postpro of framemode is enabled???
    layout(location = 1) out vec4 gVelocity;

    void main() {
	vec4 resA = texture2D(inputBufferA, vUv);
	vec4 resB = texture2D(inputBufferB, vUv);
    float a = resA.a + resB.a * ( 1.0 - resA.a );

	vec4 res;
	res.rgb =  resA.rgb + (resB.rgb * (1.0 - resA.a));
	res.a = resA.a + resB.a * (1.0 - resA.a);
	gl_FragColor = res;
    gVelocity = vec4(0.0);
    }
`}),MSt=class extends Ja{constructor(e){super("HelperPass",void 0,e),this.MRTCompatible=!1,this.fullscreenMaterial=ESt,this.helperPass=new Wz(!1,void 0,this.camera),this.helperPass.hasTransmissionPass=!1,this.helperPass.clear=!1,this.helperPass.renderToScreen=!1,this.helperPassOnTop=new Wz(!1,void 0,this.camera),this.helperPassOnTop.hasTransmissionPass=!1,this.helperPassOnTop.clear=!1,this.helperPassOnTop.renderToScreen=!1;let t=new $ue({preset:Jp.LOW,edgeDetectionMode:MO.COLOR});this.effectPass=new $P(this.camera,t),this.rt=new cn(10,10,{minFilter:yr,magFilter:yr,wrapS:Ti,wrapT:Ti,depthBuffer:!0})}setSize(e,t){this.rt.setSize(e,t),this.effectPass.setSize(e,t)}set sceneHelpers(e){this.helperPass.setScene(e)}get sceneHelpers(){return this.helperPass.getScene()}set sceneHelpersOnTop(e){this.helperPassOnTop.setScene(e)}get sceneHelpersOnTop(){return this.helperPassOnTop.getScene()}setCamera(e){this.helperPass.setCamera(e),this.helperPassOnTop.setCamera(e)}initialize(e,t,r){super.initialize(e,t,r),this.effectPass.initialize(e,t,r)}dispose(){super.dispose(),this.rt.dispose(),this.effectPass.dispose()}render(e,t,r){this.rt.depthTexture=t.depthTexture;let n=e.getClearAlpha();e.setClearAlpha(0),this.helperPass.clearDepth=!0,this.helperPass.clearColorOnly=!0,this.helperPass.render(e,this.rt),this.helperPassOnTop.render(e,this.rt),this.effectPass.renderToScreen=!1,this.effectPass.render(e,this.rt,r),this.fullscreenMaterial.uniforms.inputBufferA.value=r.texture,this.fullscreenMaterial.uniforms.inputBufferB.value=t.texture,e.setClearAlpha(n),e.setRenderTarget(null),e.clear(),e.render(this.scene,this.camera)}},PSt=`#define GLSLIFY 1
#include <skinning_pars_vertex>
out vec3 n;void main(){
#include <beginnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
#include <defaultnormal_vertex>
#include <begin_vertex>
#include <skinning_vertex>
vec4 view_space=viewMatrix*modelMatrix*vec4(transformed,1.0);gl_Position=projectionMatrix*view_space;n=normalize(transformedNormal);}`,TSt=`#define GLSLIFY 1
in vec3 n;void main(){gl_FragColor=vec4(n,1.0);}`,OSt=`#define GLSLIFY 1
out vec2 v_uv;void main(){v_uv=uv;gl_Position=vec4(position.xy,1.0,1.0);}`,ISt=`#define GLSLIFY 1
in vec2 v_uv;const float pi=3.14159265;const float num_steps=4.0;const float num_directions=4.0;uniform float near;uniform float far;uniform float fov;uniform vec4 proj_info;uniform bool is_ortho;uniform vec2 resolution;uniform float radius_of_influence;uniform float radius_in_screen_space;uniform float exponent;uniform vec3 ao_color;uniform float bias;uniform sampler2D texture_depth;uniform sampler2D texture_normals;uniform sampler2D texture_blue_noise;uniform sampler2D texture_blue_noise_in_disk;uniform sampler2D texture_color_pass;uniform int frame_index;uniform bool fog_enabled;uniform float fog_near;uniform float fog_far;vec3 uv_to_view_space(vec2 uv,float eye_z){return vec3((uv*proj_info.xy+proj_info.zw)*(is_ortho ? 1.0 : eye_z),eye_z);}float linearize_depth(float depth_sampled){float z=is_ortho ? depth_sampled : depth_sampled*2.0-1.0;return mix((2.0*near*far)/(far+near-z*(far-near)),near+z*(far-near),float(is_ortho));}vec3 get_view_position(vec2 uv_coords){float linear_depth=linearize_depth(texture(texture_depth,uv_coords).x);return uv_to_view_space(uv_coords,linear_depth);}vec3 min_difference(vec3 p,vec3 right,vec3 left){vec3 v1=right-p;vec3 v2=p-left;return(dot(v1,v1)<dot(v2,v2))? v1 : v2;}vec3 rebuild_normal(in vec2 uv,in vec3 p){vec2 one_over_resolution=1.0/resolution;vec3 r=get_view_position(uv+vec2(one_over_resolution.x,0));vec3 l=get_view_position(uv+vec2(-one_over_resolution.x,0));vec3 t=get_view_position(uv+vec2(0,one_over_resolution.y));vec3 b=get_view_position(uv+vec2(0,-one_over_resolution.y));return normalize(cross(min_difference(p,r,l),min_difference(p,t,b)));}float falloff(float distance_squared){float neg_inv_r2=-1.0/(radius_of_influence*radius_of_influence);return distance_squared*neg_inv_r2+1.0;}float ao_contribution(vec3 P,vec3 N,vec3 S){vec3 to_sample=S-P;float norm_squared=dot(to_sample,to_sample);float norm=sqrt(norm_squared);float cos_theta=dot(N,to_sample)/norm;return clamp(cos_theta-bias,0.0,1.0)*clamp(falloff(norm_squared),0.0,1.0);}float compute_ambient_occlusion(vec2 uv,float radius_in_screen_space,vec3 pc,vec3 view_space_n){vec2 one_over_resolution=1.0/resolution;ivec2 noise_uv=ivec2(int(mod(gl_FragCoord.x,128.0)),int(mod(gl_FragCoord.y,128.0)));float noise=texelFetch(texture_blue_noise,noise_uv,0).r;noise=fract(noise+0.61803398875*float(frame_index));float theta=noise*2.0*3.1415;float ct=cos(theta);float st=sin(theta);float step_size=radius_in_screen_space/(num_steps+1.0);const float angle_step=2.0*pi/num_directions;float contribution=0.0;for(int i=0;i<int(num_directions);++i){float current_pixel=step_size+1.0;for(int j=0;j<int(num_steps);++j){int index=i*int(num_steps)+j;vec2 blue_noise_sample=texelFetch(texture_blue_noise_in_disk,ivec2(index,0),0).rg;vec2 disk_point;disk_point.x=blue_noise_sample.x*ct-blue_noise_sample.y*st;disk_point.y=blue_noise_sample.x*st+blue_noise_sample.y*ct;vec2 sample_direction=disk_point;vec2 snapped_uv=round(current_pixel*sample_direction)*one_over_resolution+uv;vec3 ps=get_view_position(snapped_uv);current_pixel+=step_size;contribution+=ao_contribution(pc,view_space_n,ps);}}float mult=1.0/(1.0-bias);contribution*=mult/(num_directions*num_steps);return clamp(1.0-contribution*2.0,0.0,1.0);}
#define USE_GBUFFER_NORMALS
void main(){vec3 view_space_p=get_view_position(v_uv);
#ifdef USE_GBUFFER_NORMALS
vec3 view_space_n=texture(texture_normals,v_uv).rgb;view_space_n.z*=-1.0;
#else
vec3 view_space_n=-rebuild_normal(v_uv,view_space_p);
#endif
float radius_ss=radius_in_screen_space/(is_ortho ? 1.0 : view_space_p.z);float ao=compute_ambient_occlusion(v_uv,radius_ss,view_space_p,view_space_n);float final=pow(ao,exponent);if(view_space_p.z>=far){final=1.0;}vec3 color=mix(ao_color,vec3(1.0),final);if(fog_enabled){float fog_factor=smoothstep(fog_near,fog_far,view_space_p.z);color=mix(color,vec3(1.0),fog_factor);}gl_FragColor=vec4(color,1.0);}`,DSt=`#define GLSLIFY 1
out vec2 v_uv;void main(){gl_Position=vec4(position.xy,1.0,1.0);v_uv=uv;}`,RSt=`#define GLSLIFY 1
in vec2 v_uv;uniform sampler2D texture_ao_lrez;uniform sampler2D texture_depth_lrez;uniform sampler2D texture_depth_hrez;uniform float near;uniform float far;float linearize_depth(float depth_sampled){float z=depth_sampled*2.0-1.0;return(2.0*near*far)/(far+near-z*(far-near));}vec2 nearest_depth_filter(in vec2 uv){vec2 resolution=vec2(textureSize(texture_depth_lrez,0));vec2 texel_size=1.0/resolution;vec2 offset=uv-0.5*texel_size;float d_hrez=texture(texture_depth_hrez,uv).r;float a=abs(d_hrez-texture(texture_depth_lrez,offset).r);float b=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,0.0)).r);float c=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(0.0,texel_size.y)).r);float d=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,texel_size.y)).r);float min_diff=min(a,min(b,min(c,d)));if(min_diff==a)return offset;if(min_diff==b)return offset+vec2(texel_size.x,0.0);if(min_diff==c)return offset+vec2(0.0,texel_size.y);if(min_diff==d)return offset+vec2(texel_size.x,texel_size.y);}void main(){
#ifdef DEBUG
float d_lrez=texture(texture_depth_lrez,v_uv).r;float d_hrez=texture(texture_depth_hrez,v_uv).r;float output_d=mix(linearize_depth(d_lrez)/far,linearize_depth(d_hrez)/far,step(0.5,v_uv.x));gl_FragColor=vec4(vec3(output_d),1.0);
#else
vec2 filtered_uv=nearest_depth_filter(v_uv);vec4 ao=texture(texture_ao_lrez,filtered_uv);gl_FragColor=vec4(ao.rgb,1.0);gl_FragColor=ao;
#endif
}`,bx=[[.478712,.875764],[-.337956,-.793959],[-.955259,-.028164],[.864527,.325689],[.209342,-.395657],[-.106779,.672585],[.156213,.235113],[-.413644,-.082856],[-.415667,.323909],[.141896,-.93998],[.954932,-.182516],[-.766184,.410799],[-.434912,-.458845],[.415242,-.078724],[.728335,-.491777],[-.058086,-.066401],[.20299,.686837],[-.808362,-.556402],[.507386,-.640839],[-.723494,-.22924],[.48974,.317826],[-.622663,.765301],[-.01064,.929347],[.663146,.647618],[-.096674,-.413835],[.525945,-.321063],[-.122533,.366019],[.195235,-.687983],[-.563203,.098748],[.418563,.561335],[-.378595,.800367],[.826922,.001024],[-.085372,-.766651],[-.92192,.183673],[-.590008,-.721799],[.167751,-.164393],[.032961,-.56253],[.6329,-.107059],[-.46408,.569669],[-.173676,-.958758],[-.242648,-.234303],[-.275362,.157163],[.382295,-.795131],[.562955,.115562],[.190586,.470121],[.770764,-.297576],[.237281,.93105],[-.666642,-.455871],[-.905649,-.298379],[.33952,.157829],[.701438,-.7041],[-.062758,.160346],[-.220674,.957141],[.642692,.432706],[-.77339,-.015272],[-.671467,.24688],[.158051,.062859],[.806009,.527232],[-.05762,-.247071],[.333436,-.51671],[-.550658,-.315773],[-.652078,.589846],[.008818,.530556],[-.210004,.519896]],kSt=new Sn({vertexShader:PSt,fragmentShader:TSt}),gA=new Sn({vertexShader:DSt,fragmentShader:RSt,uniforms:{texture_ao_lrez:new We(null),texture_depth_lrez:new We(null),texture_depth_hrez:new We(null),near:new We(null),far:new We(null)}}),LSt=class extends Ja{constructor(e,t){super("AmbientOcclusionPass",void 0,t),this.fogEnabled=!1,this.fogNear=1,this.fogFar=1e3,this.frameIndex=0,this._runHalfRes=!0,this._width=1,this._height=1;let r=1024,n=1024;this.gBuffer=new cn(r,n,{type:Ba,depthTexture:new x0(r,n),minFilter:yr,magFilter:yr}),this.depthBufferHighRes=new cn(r,n,{depthTexture:new x0(r,n)}),this.aoBuffer=new cn(r,n,{minFilter:yr,magFilter:yr}),this.splineScene=e,this.splineCamera=t;let i=new Float32Array(bx.length*2);for(let a=0;a<bx.length;a++){let s=a*2;i[s+0]=bx[a][0],i[s+1]=bx[a][1]}this.blueNoiseInDiskTexture=new gf(i,bx.length,1,ZM,Ba),this.blueNoiseInDiskTexture.wrapS=Wd,this.blueNoiseInDiskTexture.wrapT=Wd,this.blueNoiseInDiskTexture.needsUpdate=!0,this.hbaoMaterial=new Sn({vertexShader:OSt,fragmentShader:ISt,uniforms:{near:new We(null),far:new We(null),fov:new We(null),proj_info:new We(new or),is_ortho:new We(!1),resolution:new We(new ue),radius_of_influence:new We(8),radius_in_screen_space:new We(1),exponent:new We(1),ao_color:new We(new F),bias:new We(.5),texture_depth:new We(null),texture_normals:new We(null),texture_blue_noise:new We(null),texture_blue_noise_in_disk:new We(this.blueNoiseInDiskTexture),frame_index:new We(0),fog_enabled:new We(!1),fog_near:new We(1),fog_far:new We(1e3)}}),this.radius=128,this.aoColor={r:0,g:0,b:0},this.bias=.5,this.hbaoMaterial.uniforms.texture_depth.value=this.gBuffer.depthTexture,this.hbaoMaterial.uniforms.texture_normals.value=this.gBuffer.texture,this.needsSwap=!0,this.aaBuffer=new cn(r,n,{minFilter:yr,magFilter:yr,wrapS:Ti,wrapT:Ti,depthBuffer:!1,type:Ba});let o=new $ue({preset:Jp.ULTRA,edgeDetectionMode:MO.COLOR});this.effectPass=new $P(this.camera,o)}initialize(e,t,r){super.initialize(e,t,r),this.effectPass.initialize(e,t,r)}setBlueNoiseTexture(e){this.hbaoMaterial.uniforms.texture_blue_noise.value=e}setSize(e,t){this._width=e,this._height=t,this.depthBufferHighRes.setSize(e,t);let r=this._runHalfRes?.5:1,n=e*r,i=t*r;this.gBuffer.setSize(n,i),this.aoBuffer.setSize(n,i),this.hbaoMaterial.uniforms.resolution.value.set(n,i),this.aaBuffer.setSize(n,i),this.effectPass.setSize(n,i)}get runHalfRes(){return this._runHalfRes}set runHalfRes(e){this._runHalfRes=e,this.setSize(this._width,this._height)}setCamera(e){this.splineCamera=e}setScene(e){this.splineScene=e}render(e,t,r){this.splineScene.overrideMaterial=kSt;let n=this.splineCamera.layers.mask;if(this.splineCamera.layers.set(5),e.setRenderTarget(this.gBuffer),e.clear(),e.render(this.splineScene,this.splineCamera),e.setRenderTarget(this.depthBufferHighRes),e.clear(),e.render(this.splineScene,this.splineCamera),this.splineScene.overrideMaterial=null,this.splineCamera.layers.mask=n,this.hbaoMaterial.uniforms.radius_of_influence.value=this.radius,this.hbaoMaterial.uniforms.ao_color.value.set(this.aoColor.r,this.aoColor.g,this.aoColor.b),this.hbaoMaterial.uniforms.bias.value=this.bias,this.hbaoMaterial.uniforms.fog_enabled.value=this.fogEnabled,this.hbaoMaterial.uniforms.fog_near.value=this.fogNear,this.hbaoMaterial.uniforms.fog_far.value=this.fogFar,this.hbaoMaterial.uniforms.frame_index.value=this.frameIndex,this.frameIndex++,this.splineCamera.isPerspectiveCamera){this.hbaoMaterial.uniforms.near.value=this.splineCamera.perspCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.perspCamera.far;let i=this.splineCamera.perspCamera.projectionMatrix.elements,o=2/i[0],a=2/i[5],s=-(1-i[8])/i[0],l=-(1+i[9])/i[5];this.hbaoMaterial.uniforms.proj_info.value.set(o,a,s,l);let u=this.splineCamera.perspCamera.fov*(Math.PI/180),d=this.hbaoMaterial.uniforms.resolution.value.y/(Math.tan(u*.5)*2),c=this.hbaoMaterial.uniforms.radius_of_influence.value*.5*d;this.hbaoMaterial.uniforms.radius_in_screen_space.value=c,this.hbaoMaterial.uniforms.is_ortho.value=!1}else{this.hbaoMaterial.uniforms.near.value=this.splineCamera.orthoCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.orthoCamera.far;let i=this.splineCamera.orthoCamera.projectionMatrix.elements,o=2/i[0],a=2/i[5],s=-(1+i[12])/i[0],l=-(1-i[13])/i[5];this.hbaoMaterial.uniforms.proj_info.value.set(o,a,s,l);let u=.5*(this.hbaoMaterial.uniforms.resolution.value.y/a),d=this.hbaoMaterial.uniforms.radius_of_influence.value*u;this.hbaoMaterial.uniforms.radius_in_screen_space.value=d,this.hbaoMaterial.uniforms.is_ortho.value=!0}this.runHalfRes?(this.fullscreenMaterial=this.hbaoMaterial,e.setRenderTarget(this.aoBuffer),e.clear(),e.render(this.scene,this.camera),this.fullscreenMaterial=gA,gA.uniforms.texture_ao_lrez.value=this.aoBuffer.texture,gA.uniforms.texture_depth_lrez.value=this.gBuffer.depthTexture,gA.uniforms.texture_depth_hrez.value=this.depthBufferHighRes.depthTexture,e.setRenderTarget(e.aoRenderTarget),e.clear(),e.render(this.scene,this.camera)):(this.fullscreenMaterial=this.hbaoMaterial,e.setRenderTarget(this.aaBuffer),e.clear(),e.render(this.scene,this.camera),this.effectPass.renderToScreen=!1,this.effectPass.render(e,this.aaBuffer,e.aoRenderTarget))}dispose(){this.gBuffer.dispose(),this.depthBufferHighRes.dispose(),this.aoBuffer.dispose()}},NSt=`
varying vec2 vUv;
void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,zSt=`
uniform sampler2D tInput;
uniform sampler2D tMap;
uniform vec2 resolution;
varying vec2 vUv;

uniform vec2 uResolution;
uniform vec2 uCoords;

// Draws a rectangle at center <st> with size <size>
float rectangle(vec2 st, vec2 size) {
    size = vec2(0.5) - size * 0.5;
    vec2 uv = vec2(step(size.x, st.x), step(size.y, st.y));
    uv *= vec2(step(size.x, 1.0 - st.x), step(size.y, 1.0 - st.y));

    return uv.x * uv.y;
}

uniform vec2 uSize;
uniform float uScale;
uniform float uDPR;
uniform float uCurrent;
uniform vec3 uSceneColor;

void main() {
    vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
    screenUv *= 1.0 / uDPR;

    vec2 center = vec2(0.5, -0.5);
    vec2 outsideUv = screenUv;
    outsideUv += center;
    outsideUv -= uCoords.xy / uResolution.xy;
    outsideUv = (outsideUv - 0.5) + 0.5;
    outsideUv -= center;
    vec2 s = (uSize / uResolution) * uScale;
    float isOutside = 1.0 - rectangle(outsideUv, s);
    
    vec2 mid = vec2(0.5);
    vec2 insideUv = (screenUv - mid + s * mid) / s;
    vec4 background = texture2D(tInput, screenUv);
    vec4 image = texture2D(tMap, insideUv);
    gl_FragColor = mix(image, background, isOutside);
}
`,BSt=class extends wc{constructor(){super(new Sn({vertexShader:NSt,fragmentShader:zSt,uniforms:{tInput:new We(null),tMap:new We(null),uResolution:new We(new ue),uSize:new We(new ue),uCoords:new We(new ue),uScale:new We(1),uSceneColor:new We(new Bt(16711680)),uDPR:new We(1),uCurrent:new We(0)}}),"tInput"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.tMap.value}set texture(e){this.uniforms.tMap.value=e}},FSt=`
void main() {
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,jSt=`
uniform sampler2D toScene;
uniform sampler2D fromScene;
uniform vec2 resolution;

uniform vec2 uResolution;
uniform float uDPR;

uniform float mixRatio;
uniform sampler2D tMixTexture;
uniform int useTexture;
uniform float threshold;

void main() {
	vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
	screenUv *= 1.0 / uDPR;

	vec4 texel1 = texture2D( fromScene, screenUv );
	vec4 texel2 = texture2D( toScene, screenUv );

	if (useTexture==1) {
		
		vec4 transitionTexel = texture2D( tMixTexture, screenUv );
		float r = mixRatio * (1.0 + threshold * 2.0) - threshold;
		float mixf=clamp((transitionTexel.r - r)*(1.0/threshold), 0.0, 1.0);
		
		gl_FragColor = mix( texel1, texel2, mixf );
	} else {
		
		gl_FragColor = mix( texel1, texel2, mixRatio );
		
	}
}
`,USt=[],$St=class extends wc{constructor(){super(new Sn({vertexShader:FSt,fragmentShader:jSt,uniforms:{toScene:new We(null),fromScene:new We(null),uResolution:new We(new ue),uDPR:new We(1),mixRatio:new We(0),threshold:new We(.1),useTexture:new We(0),tMixTexture:{value:USt[0]}}}),"toScene"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.fromScene.value}set texture(e){this.uniforms.fromScene.value=e}};function KX(e,t){return t&&t.enabled&&e.push(t.effect),e}var VSt=e=>Object.values(Nr).includes(e)?e:Nr.NORMAL,HSt=class extends qo{constructor(e){super(),this.postprocessingState=TP.defaultData,this._scene=new Uf,this._camera=new ha,this.effects=new Map,this.blueNoiseTexture=new gf,this._renderToScreen=!0,this.clock=new alt,this.renderer=e,this.debug=!1,this.effects.set("bloom",new uSt),this.effects.set("chromaticAberration",new dSt),this.effects.set("vignette",new mSt),this.effects.set("noise",new pSt),this.effects.set("colorAverage",new hSt),this.effects.set("hueSaturation",new fSt),this.effects.set("brightnessContrast",new cSt),this.effects.set("depthOfField",new gSt),this.effects.set("pixelation",new vSt),this.effectComposer=new ASt(this.renderer),this.effectComposer.autoRenderToScreen=!1,this.opaquePass=new Wz(!0,this.scene,this.camera),this.opaquePass.clear=!0,this.transmissionPass=new _St(this.scene,this.camera,this.renderer),this.aoPass=new LSt(this.scene,this.camera),this.taaPass=new SSt,this.taaPass.renderToScreen=!1,this.helperPass=new MSt(this.camera),this.helperPass.renderToScreen=!1,this.overlayPass=new BSt,this.overlayPass.enabled=!1,this.sceneTransitionPass=new $St,this.sceneTransitionPass.enabled=!1,this._initCopyPass(),this._initPasses()}set overlayTexture(e){e!==void 0?(this.overlayPass.texture=e,this.overlayPass.enabled=!0):this.overlayPass.enabled=!1}get overlayTexture(){return this.overlayPass.texture}set sceneHelpers(e){this.helperPass.sceneHelpers=e}get sceneHelpers(){return this.helperPass.sceneHelpers}set sceneHelpersOnTop(e){this.helperPass.sceneHelpersOnTop=e}get sceneHelpersOnTop(){return this.helperPass.sceneHelpersOnTop}get scene(){return this._scene}set scene(e){this._scene=e,this.opaquePass.setScene(e),this.transmissionPass.setScene(e),this.aoPass.setScene(e)}get camera(){return this._camera}set camera(e){this._camera=e,this.opaquePass.setCamera(e),this.transmissionPass.setCamera(e),this.aoPass.setCamera(e),this.helperPass.setCamera(e)}updateRenderToScreen(){let e=!1;for(let t=this.effectComposer.passes.length-1;t>=0;t--){let r=this.effectComposer.passes[t];if(r.enabled===!0&&!e&&this._renderToScreen){r.renderToScreen=!0,e=!0;continue}r.renderToScreen=!1}}disableHelpers(){this.helperPass.enabled=!1,this.updateRenderToScreen()}enableHelpers(){this.helperPass.enabled=!0,this.updateRenderToScreen()}updateBlueNoiseTexture(e){this.blueNoiseTexture=new gf(e,128,128),this.blueNoiseTexture.wrapS=Wd,this.blueNoiseTexture.wrapT=Wd,this.blueNoiseTexture.minFilter=Pn,this.blueNoiseTexture.magFilter=Pn,this.blueNoiseTexture.needsUpdate=!0}setAmbientOcclusionParams(e,t,r,n,i,o,a,s){this.aoPass.enabled=e,this.aoPass.radius=t,this.aoPass.bias=r,this.aoPass.aoColor=n,this.aoPass.fogEnabled=i,this.aoPass.fogNear=o,this.aoPass.fogFar=a,this.aoPass.runHalfRes!==!s&&(this.aoPass.runHalfRes=!s)}setTransmissionPassEnabled(e){this.transmissionPass.enabled=e,this.opaquePass.hasTransmissionPass=e}_initPasses(){var e,t;if((e=this.uvEffectPass)==null||e.dispose(),(t=this.effectPass)==null||t.dispose(),this.effectComposer.removeAllPasses(),this.transmissionPass.updatePasses(this.renderer),this.effectComposer.addPass(this.aoPass),this.effectComposer.addPass(this.opaquePass),this.effectComposer.addPass(this.transmissionPass),this.effectComposer.addPass(this.taaPass),this.postprocessingState.enabled){let r=[this.effects.get("pixelation")].reduce(KX,[]);r.length>0&&(this.uvEffectPass=new $P(this.camera,...r),this.uvEffectPass.renderToScreen=!1,this.effectComposer.addPass(this.uvEffectPass));let n=[this.effects.get("chromaticAberration"),this.effects.get("bloom"),this.effects.get("colorAverage"),this.effects.get("hueSaturation"),this.effects.get("brightnessContrast"),this.effects.get("vignette"),this.effects.get("noise")].reduce(KX,[]);n.length>0&&(this.effectPass=new $P(this.camera,...n),this.effectPass.renderToScreen=!1,this.effectComposer.addPass(this.effectPass))}this.effectComposer.addPass(this.overlayPass),this.effectComposer.addPass(this.sceneTransitionPass),this.effectComposer.addPass(this.helperPass)}_initCopyPass(){if(this._savePass)return;let e=new ue;this.renderer.getDrawingBufferSize(e),this._rt=new cn(e.x,e.y,{depthBuffer:!1,stencilBuffer:!1,wrapS:Wd,wrapT:Wd}),this._rt.samples=0,this._savePass=new Hz(this._rt,!1),this._savePass.renderToScreen=!1}setCopyPass(e){this._rt=e,this._savePass=new Hz(this._rt,!1),this.renderToScreen=!1}get renderToScreen(){return this._renderToScreen}set renderToScreen(e){if(this._renderToScreen===e)return;let t=this.effectComposer;!t||(e===!0?t.removePass(this._savePass):t.addPass(this._savePass),this._renderToScreen=e,this.updateRenderToScreen())}set sceneTransitionFromTexture(e){e!==this.sceneTransitionPass.texture&&(e!==null?this.sceneTransitionPass.enabled=!0:(this.sceneTransitionPass.enabled=!1,this.updateRenderToScreen()),this.sceneTransitionPass.texture=e)}get texture(){return this._rt&&this._rt.texture}get renderTarget(){return this._rt}updatePostprocessing(e){let{enabled:t,...r}=e,n=!1;t!==this.postprocessingState.enabled&&(n=!0);for(let i of Object.entries(r)){let o=i[1],a=this.effects.get(i[0]);if(a){a.enabled!==o.enabled&&(n=!0),a.enabled=o.enabled;for(let[s,l]of Object.entries(o))s==="blendFunction"?a.blendFunction=VSt(l):a[s]=l}}this.postprocessingState=e,n&&this._initPasses()}render(){this.effectComposer.render(this.clock.getDelta())}setScissor(e,t,r,n){e instanceof or?(this.effectComposer.inputBuffer.scissor.set(e.x,e.y,e.z,e.w),this.effectComposer.outputBuffer.scissor.set(e.x,e.y,e.z,e.w)):(this.effectComposer.inputBuffer.scissor.set(e,t,r,n),this.effectComposer.outputBuffer.scissor.set(e,t,r,n));let i=this.renderer.getPixelRatio();this.effectComposer.inputBuffer.scissor.multiplyScalar(i),this.effectComposer.outputBuffer.scissor.multiplyScalar(i),this.renderer.setScissor(e,t,r,n)}setScissorTest(e){this.effectComposer.inputBuffer.scissorTest=e,this.effectComposer.outputBuffer.scissorTest=e,this.renderer.setScissorTest(e)}setViewport(e,t,r,n){e instanceof or?(this.effectComposer.inputBuffer.viewport.copy(e),this.effectComposer.outputBuffer.viewport.copy(e)):(this.effectComposer.inputBuffer.viewport.set(e,t,r,n),this.effectComposer.outputBuffer.viewport.set(e,t,r,n))}resize(e,t,r){if(this.effectComposer.setSize(e,t,r),this._rt){let n=this.renderer.getPixelRatio();this._rt.setSize(e*n,t*n)}}dispose(){var e,t;(e=this.uvEffectPass)==null||e.dispose(),(t=this.effectPass)==null||t.dispose(),this.effectComposer.dispose()}},GSt=e=>`

// PCSS implementation based on:
// https://www.gamedev.net/articles/programming/graphics/contact-hardening-soft-shadows-made-fast-r4906/
// NOTE: This number affects how big the shadow blur can
// possibly get. Bigger number == bigger blur, but less precise results

const float  gPenumbraFilterSize = 80.0;
const int   gPenumbraSamples = ${e};
const int gShadowSamples = ${e};
const float gShadowSamplesRpc = 1.0f / float(gShadowSamples);

#ifdef USE_SHADOWMAP
    #if NUM_DIR_LIGHT_SHADOWS > 0

        uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
        varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];

        struct DirectionalLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];

    #endif

    #if NUM_SPOT_LIGHT_SHADOWS > 0

        uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
        varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_SHADOWS ];

        struct SpotLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];

    #endif

    #if NUM_POINT_LIGHT_SHADOWS > 0

        uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
        varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];

        struct PointLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
            float shadowCameraNear;
            float shadowCameraFar;
        };

        uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];

    #endif

    /*
    #if NUM_RECT_AREA_LIGHTS > 0

        // TODO (abelnation): create uniforms for area light shadows

    #endif
    */

float computePenumbra(int index, sampler2D shadowMap, float temporalAngle, float texelSize, vec2 uv, float compare, float texelScalar, float shadowRadius)
{
    float penumbra = 1.0;
    float blockerDepthAvg = 0.0;
    float blockerCount = 0.0;

    #pragma unroll_loop_start
    for(int i = 0; i < gPenumbraSamples; i ++)
    {
        vec2 offset = (vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize) * texelScalar;
        float depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) );

        if(depth < compare + 0.0001)
        {
            blockerDepthAvg += depth;
            blockerCount++;
        }
    }
    #pragma unroll_loop_end

    if (blockerCount > 0.0)
    {
        blockerDepthAvg /= blockerCount;

        // Compute penumbra
        penumbra = (compare - blockerDepthAvg) / (blockerDepthAvg);
        penumbra *= penumbra;
        penumbra *= 200.0 * penumbraSize[min(index, 5 - 1)]; // Magic number that affects how quickly the penumbra grows

        return clamp(penumbra, 0.00, 1.0);
    }
    return 0.0;
}

float vogelShadow(int index, sampler2D shadowMap, vec2 uv, float texelSize, float compare, float shadowRadius)
{
    float shadow         = 0.0f;

    // NOTE: When using TAA, we should use screen space interleaved gradient noise
    vec2 halton = haltonSequence[frameIndex];
    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
    float temporalAngle  = temporalOffset * PI2;

    float texelScalar = (gPenumbraFilterSize) / (texelSize * 1024.);
    float penumbra = computePenumbra(index, shadowMap, temporalAngle, texelSize, uv, compare, texelScalar, shadowRadius);
    if (penumbra == -1.0) {
        return 1.0;
    }

    #pragma unroll_loop_start
    for (int i = 0; i < gShadowSamples; i++)
    {
        vec2 vogelSample =  vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;
        // Overall blurring offset
        vec2 offset = vogelSample * (shadowRadius * 2.);

        // Penumbra offset
        offset += vogelSample * (penumbra * texelScalar);

        shadow += step( compare, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );
    }
    #pragma unroll_loop_end

    return shadow * gShadowSamplesRpc;
}


    float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {

        return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );

    }

    vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {

        return unpackRGBATo2Half( texture2D( shadow, uv ) );

    }

    float VSMShadow (sampler2D shadow, vec2 uv, float compare ){

        float occlusion = 1.0;

        vec2 distribution = texture2DDistribution( shadow, uv );

        float hard_shadow = step( compare , distribution.x ); // Hard Shadow

        if (hard_shadow != 1.0 ) {

            float distance = compare - distribution.x ;
            float variance = max( 0.00000, distribution.y * distribution.y );
            float softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality
            softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed
            occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );

        }
        return occlusion;

    }

    float getShadow( int i, sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {

        float shadow = 1.0;

        shadowCoord.xyz /= shadowCoord.w;
        shadowCoord.z += shadowBias;

        // if ( something && something ) breaks ATI OpenGL shader compiler
        // if ( all( something, something ) ) using this instead

        bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
        bool inFrustum = all( inFrustumVec );

        bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );

        bool frustumTest = all( frustumTestVec );

        if ( frustumTest ) {

        #if defined( SHADOWMAP_TYPE_PCF )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            return vogelShadow(i, shadowMap, shadowCoord.xy, texelSize.x, shadowCoord.z, shadowRadius );

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            float dx = texelSize.x;
            float dy = texelSize.y;

            vec2 uv = shadowCoord.xy;
            vec2 f = fract( uv * shadowMapSize + 0.5 );
            uv -= f * texelSize;

            shadow = (
                texture2DCompare( shadowMap, uv, shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
                          f.x ),
                     mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
                          f.x ),
                     f.y )
            ) * ( 1.0 / 9.0 );

        #elif defined( SHADOWMAP_TYPE_VSM )

            shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );

        #else // no percentage-closer filtering:

            shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );

        #endif

        }

        return shadow;

    }

    // cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D
    // vector suitable for 2D texture mapping. This code uses the following layout for the
    // 2D texture:
    //
    // xzXZ
    //  y Y
    //
    // Y - Positive y direction
    // y - Negative y direction
    // X - Positive x direction
    // x - Negative x direction
    // Z - Positive z direction
    // z - Negative z direction
    //
    // Source and test bed:
    // https://gist.github.com/tschw/da10c43c467ce8afd0c4

    vec2 cubeToUV( vec3 v, float texelSizeY ) {

        // Number of texels to avoid at the edge of each square

        vec3 absV = abs( v );

        // Intersect unit cube

        float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
        absV *= scaleToCube;

        // Apply scale to avoid seams

        // two texels less per square (one texel will do for NEAREST)
        v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );

        // Unwrap

        // space: -1 ... 1 range for each square
        //
        // #X##         dim    := ( 4 , 2 )
        //  # #         center := ( 1 , 1 )

        vec2 planar = v.xy;

        float almostATexel = 1.5 * texelSizeY;
        float almostOne = 1.0 - almostATexel;

        if ( absV.z >= almostOne ) {

            if ( v.z > 0.0 )
                planar.x = 4.0 - v.x;

        } else if ( absV.x >= almostOne ) {

            float signX = sign( v.x );
            planar.x = v.z * signX + 2.0 * signX;

        } else if ( absV.y >= almostOne ) {

            float signY = sign( v.y );
            planar.x = v.x + 2.0 * signY + 2.0;
            planar.y = v.z * signY - 2.0;

        }

        // Transform to UV space

        // scale := 0.5 / dim
        // translate := ( center + 0.5 ) / dim
        return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );

    }

    float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {

        float shadow = 1.0;
        vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );

        // for point lights, the uniform @vShadowCoord is re-purposed to hold
        // the vector from the light to the world-space position of the fragment.
        vec3 lightToPosition = shadowCoord.xyz;

        // dp = normalized distance from light to fragment position
        float compare = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?
        compare += shadowBias;

        // bd3D = base direction 3D
        vec3 bd3D = normalize( lightToPosition );

        vec2 halton = haltonSequence[frameIndex];
        float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
        float temporalAngle  = temporalOffset * PI2;

        #if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_VSM )
            for (int i = 0; i < gShadowSamples; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                // NOTE: Removed for now
                // Penumbra offset
                //offset += vec3(vogelSample.x, vogelSample.y, vogelSample.y)  * (penumbra * gPenumbraFilterSize);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * gShadowSamplesRpc;

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )
            for (int i = 0; i < 16; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * (1.0 / 16.0);
        #else // no percentage-closer filtering

            return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), compare );

        #endif

    }

#endif
`,WSt=sr.lights_fragment_begin,qSt=sr.shadowmask_pars_fragment,XX=null,KSt=e=>{switch(e){case"low":return 8;case"medium":return 16;case"high":return 32;default:return 16}},XSt=(e="medium")=>{if(XX===e)return!1;XX=e;let t=KSt(e);sr.shadowmap_pars_fragment=GSt(t);let r=WSt.slice();r=r.replace("getShadow( spotShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX + 3, spotShadowMap[ i ]"),r=r.replace("getShadow( directionalShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX, directionalShadowMap[ i ]"),sr.lights_fragment_begin=r;let n=qSt.slice();return n=n.replaceAll("getShadow(","getShadow( UNROLLED_LOOP_INDEX, "),sr.shadowmask_pars_fragment=n,!0},YSt=`
attribute vec3 randomColor;
varying vec3 vNormal;
flat out vec3 vColor;

void main()
{
vNormal = normal;
vColor = randomColor;
gl_Position = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));
}
`,QSt=`
uniform float depthContrast;
varying vec3 vNormal;
flat in vec3 vColor;
void main()
{
vec3 normal = (normalize(vNormal)).rgb;

float contrastDepth = (gl_FragCoord.z - 0.5) * depthContrast + 0.5;

vec3 resultColor = mix(mix(vColor, normal, 0.2), vec3(contrastDepth), 0.4);
gl_FragColor = vec4(resultColor, vColor.r);
}
`,KR=new Sn({vertexShader:YSt,fragmentShader:QSt,uniforms:{depthContrast:{value:1}}}),YX=new co,ZSt=class extends Pae{constructor(e){super(e),this._pixelRatio=this.getPixelRatio(),this.viewportWidth=1,this.viewportHeight=1,this.resolution=new ue,this.pipeline=new HSt(this),this.dummyCamera=new ha,this.sceneTransitionDuration=0,this.sceneTransitionTimeRemaining=-1,this.isXRCopyPassSet=!1,this.clear=(i=!0,o=!0,a=!0)=>{let s=this.getContext(),l=0;i&&(l|=s.COLOR_BUFFER_BIT),o&&(l|=s.DEPTH_BUFFER_BIT),a&&(l|=s.STENCIL_BUFFER_BIT),s.clear(l),s.clearBufferfv(s.COLOR,1,[0,0,0,1])},this.autoClear=!1;let t=this.setPixelRatio.bind(this),r=this.setSize.bind(this);this.shadowMap.enabled=!0,this.shadowMap.type=I4,this.dummyCamera.matrixAutoUpdate=!1;let n=this.getContext();if(n&&"drawingBufferColorSpace"in n)try{n.drawingBufferColorSpace="display-p3"}catch(i){console.warn(i)}this.setPixelRatio=i=>{this._pixelRatio!==i&&(this._pixelRatio=i,t(i))},this.setSize=(i,o,a=!0)=>{var s,l;(this.viewportWidth!==i||this.viewportHeight!==o)&&(this.viewportWidth=i,this.viewportHeight=o,r(i,o,a),(s=this.normalRenderTarget)==null||s.setSize(i*this._pixelRatio,o*this._pixelRatio),this._resizeTransmission(i,o),(l=this.transmissionDepthTarget)==null||l.setSize(i*this._pixelRatio/2,o*this._pixelRatio/2),this.pipeline.resize(i,o,a))},this._superDispose=this.dispose,this.dispose=this._currentDispose}createAORenderTarget(){this.aoRenderTarget===void 0&&(this.aoRenderTarget=new cn(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:yr,magFilter:yr,wrapS:Ti,wrapT:Ti,depthBuffer:!1}))}_resizeTransmission(e,t){var r,n;(r=this.transmissionRenderTarget)==null||r.setSize(e*this._pixelRatio/(this.hdTransmission?1:2),t*this._pixelRatio/(this.hdTransmission?1:2)),(n=this.aoRenderTarget)==null||n.setSize(e*this._pixelRatio/1,t*this._pixelRatio/1)}get hdTransmission(){return jt.transmissionLod.value===1}set hdTransmission(e){jt.transmissionLod.value=e===!0?1:2,this._resizeTransmission(this.viewportWidth,this.viewportHeight)}createTransmissionRenderTarget(){this.transmissionRenderTarget===void 0&&(this.transmissionRenderTarget=new cn(this.viewportWidth*this._pixelRatio/(this.hdTransmission?1:2),this.viewportHeight*this._pixelRatio/(this.hdTransmission?1:2),{generateMipmaps:!0,minFilter:y0,magFilter:yr,wrapS:Ti,wrapT:Ti,depthBuffer:!1}),this.transmissionDepthTarget=new cn(this.viewportWidth*this._pixelRatio/2,this.viewportHeight*this._pixelRatio/2,{minFilter:Pn,magFilter:Pn,depthBuffer:!1}))}createNormalRenderTarget(){this.normalRenderTarget===void 0&&(this.normalRenderTarget=new cn(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:Pn,magFilter:Pn,type:Ba,depthTexture:new x0(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio)}))}renderNormal(e,t,r){this.normalRenderTarget&&(this.setClearColor(0),r.layers.enable(8),r.layers.disable(0),r.layers.disable(3),t.traverseEntity(n=>{n.layers.isEnabled(8)&&(n.copyPreviousMatrix=!1)}),this.setRenderTarget(this.normalRenderTarget),this.clear(),r instanceof ha?KR.uniforms.depthContrast.value=(r.far-r.near)/1e4:KR.uniforms.depthContrast.value=1,t.overrideMaterial=KR,this.render(t,r),this.setClearColor(t.bgColor,t.bgColor.a),this.setRenderTarget(null),t.overrideMaterial=e.wireframeState?Qz:null,r.layers.enable(0),r.layers.enable(3),t.traverseEntity(n=>{n.layers.isEnabled(8)&&(n.copyPreviousMatrix=!0)}))}renderSplineSceneWithDummyCamera(e,t,r=1){this.dummyCamera.updateCameraState(t.dataPatched),this.dummyCamera.matrix.copy(t.matrixWorld);let n=t.height,i=t.width,o=this.viewportWidth/this.viewportHeight;i<n?i=n*o:n=i/o,this.dummyCamera.setViewplaneSize(i,n);for(let a=0;a<r;a++)this.renderSplineScene(e,this.dummyCamera)}renderSplineScene(e,t,{sceneHelpers:r=void 0,sceneHelpersOnTop:n=void 0,overrideTransmission:i=void 0,overrideNormal:o=void 0}={}){let a=e instanceof XU?e.activePage:e,s=a.visible;a.visible=!0;let l=a.scene;this.xr.enabled&&(this.isXRCopyPassSet===!1&&this.getRenderTarget()!==null&&(this.pipeline.setCopyPass(this.getRenderTarget()),this.isXRCopyPassSet=!0),this.xr.updateCamera(t)),this.setClearColor(a.bgColor,a.bgColor.a),a.penumbraSizeArray.forEach((h,f)=>{jt.penumbraSize.value[f]=h}),jt.pixelRatioNode.value=this.getPixelRatio(),this.resolution.x!==0&&this.resolution.y!==0?jt.resolution.value.set(this.resolution.x,this.resolution.y):jt.resolution.value.set(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio),o!==void 0?(jt.normalRenderTarget.value=o,jt.normalRenderTargetDepth.value=YX):l.needsNormal()&&(this.createNormalRenderTarget(),jt.normalRenderTarget.value=this.normalRenderTarget.texture,jt.normalRenderTargetDepth.value=this.normalRenderTarget.depthTexture,this.renderNormal(l,a,t));let u=a.data.ao,d=u.occlusion;d&&(this.createAORenderTarget(),jt.aoRenderTarget.value=this.aoRenderTarget.texture),jt.aoEnabled.value=d,this.pipeline.setAmbientOcclusionParams(u.occlusion,u.radius,u.bias,a.aoColor,a.fog!==null,a.backupFog.near,a.backupFog.far,u.aoFullRes),this.pipeline.aoPass.setBlueNoiseTexture(this.pipeline.blueNoiseTexture);let c=!1;if(i!==void 0)jt.transmissionRenderTarget.value=i,jt.transmissionRenderTargetDepth.value=YX,this.pipeline.setTransmissionPassEnabled(!1);else{let h=l.needsTransmission();h&&(this.transmissionRenderTarget===void 0&&(c=!0),this.createTransmissionRenderTarget(),jt.transmissionRenderTarget.value=this.transmissionRenderTarget.texture,jt.aspectRatio.value=cxt(this.viewportWidth,this.viewportHeight),jt.transmissionRenderTargetDepth.value=this.transmissionDepthTarget.texture),this.pipeline.setTransmissionPassEnabled(h)}t.layers.enable(3),t.layers.enable(8),this.pipeline.sceneHelpers=r,this.pipeline.sceneHelpersOnTop=n,this.pipeline.scene=a,this.pipeline.camera=t,c&&this.pipeline.transmissionPass.updatePasses(this),this.pipeline.postprocessingState!==a.postprocessing&&(this.pipeline.updatePostprocessing(a.postprocessing),!r&&!n&&this.pipeline.disableHelpers()),this.clearAlphaOverride!==void 0&&this.setClearAlpha(this.clearAlphaOverride),a.overrideMaterial=l.wireframeState?Qz:null,this.pipeline.render(),jt.frameIndex.value=(jt.frameIndex.value+1)%16,t instanceof ha&&t.copyHistory(),a.visible=s}renderFromSceneForSceneTransitionPass(e,t,r){this.pipeline.renderToScreen=!1,this.pipeline.renderTarget,this.renderSplineScene(e,t),this.pipeline.sceneTransitionFromTexture=this.pipeline.renderTarget.texture,this.sceneTransitionDuration=r,this.sceneTransitionTimeRemaining=r,this.pipeline.renderToScreen=!0;let n=this.pipeline.sceneTransitionPass.uniforms;n.uDPR.value=window.devicePixelRatio,n.uResolution.value.set(this.domElement.width,this.domElement.height).divideScalar(window.devicePixelRatio)}_currentDispose(){var e,t,r,n,i,o;this._superDispose(),this.pipeline.dispose(),(e=this.aoRenderTarget)==null||e.dispose(),(t=this.transmissionRenderTarget)==null||t.dispose(),(r=this.transmissionDepthTarget)==null||r.dispose(),(n=this.normalRenderTarget)==null||n.dispose(),(o=(i=this.normalRenderTarget)==null?void 0:i.depthTexture)==null||o.dispose()}},Vue=class extends u_(Slt){constructor(e,t=15,r=10066329){super(e,t,r),this.object=e,this.added=!1,this.name=`DirectionalLightHelper: ${e.uuid}`}raycast(e,t){c_(this.object,Vue.geometryHelper,e,t)}},Hue=class extends u_(wlt){constructor(e,t=15,r=6710886){super(e,t,r),this.object=e,this.name=`PointLightHelper: ${e.uuid}`}raycast(e,t){c_(this.object,Hue.geometryHelper,e,t)}},qz=class extends u_(xlt){constructor(e,t=6710886){super(e,t),this.object=e,this.name=`SpotLightHelper: ${e.uuid}`}raycast(e,t){c_(this.object,qz.geometryHelper,e,t)}update(){if(this.object!==void 0){let e=qz._vector,t=this.object.distance?this.object.distance:1e3,r=t*Math.tan(this.object.angle);this.cone.scale.set(r,r,t),e.setFromMatrixPosition(this.object.target.matrixWorld),this.cone.lookAt(e);let n=this.color!==void 0?this.color:this.light.color;if(this.cone.material instanceof Array)for(let i=0,o=this.cone.material.length;i<o;i++)this.cone.material[i].color.set(n);else this.cone.material.color.set(n)}}},Gue=qz;Gue._vector=new F;function JSt(e,t){e.shadow.camera.right=t/2,e.shadow.camera.left=-t/2,e.shadow.camera.top=t/2,e.shadow.camera.bottom=-t/2,e.shadow.needsUpdate=!0}var Wue=class extends VU(olt,Vue){constructor(e,t,r){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=2048,this.shadow.mapSize.height=2048,this.shadow.normalBias=1,this.layers.enable(3);let n=this.shadow.camera;n.top=1250,n.bottom=-1250,n.right=1250,n.left=-1250,n.near=-1e4,n.far=2500;let i=new cP(this.shadow.camera);i.visible=!1,this.gizmos.shadowmap=i}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let t=this.gizmos[e];t instanceof cP&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t);let r=e.depth!==void 0&&e.depth!==this.shadow.camera.far||e.size!==void 0&&e.size/2!==this.shadow.camera.right;e.size!==void 0&&JSt(this,e.size),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),e.penumbraSize!==void 0&&t.scene.markPenumbraSizeDirty(),r&&this.update()}},QX=new F,ZX=new F,JX=new Jt,que=class extends VU(tlt,Gue){constructor(e,t,r){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let n=this.shadow.camera;n.fov=Et.RAD2DEG*2*this.angle,n.aspect=1,n.near=100,n.far=2500;let i=new cP(this.shadow.camera);i.visible=!1,this.gizmos.shadowmap=i,this.update()}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let t=this.gizmos[e];t instanceof cP&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),ZX.setFromMatrixPosition(this.matrixWorld),JX.setFromRotationMatrix(this.matrixWorld),QX.copy(this.up).applyQuaternion(JX).negate().multiplyScalar(this.distance),this.target.position.copy(ZX).add(QX),this.target.updateMatrixWorld(),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.angle!==void 0&&(this.angle=e.angle),e.penumbra!==void 0&&(this.penumbra=e.penumbra),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.penumbraSize!==void 0&&t.scene.markPenumbraSizeDirty(),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},Wf=class extends EU(Uf){constructor(e,t){super(),this.data=t,this.bgColor=new As(1,1,1,1),this.fog=null,this.backupFog=new Tae(16777215,.1,2e3),this.fogUseBGColor=!1,this.isActive=!1,this.aoColor=new Bt,this.penumbraSizeArrayCache=null,this.super_Entity(e,t),this.personalCamera=new ha(yb,{...oS.defaultData,...t.camera,name:"Personal Camera"}),this.personalCamera.objectHelper.visible=!1,this.add(this.personalCamera),this.activeCamera=this.personalCamera,this.ambientLight=new Jst(13882323,8553090,.75),this.ambientLight.name="Default Ambient Light",this.ambientLight.layers.enable(3),this.ambientLight.removeFromParent(),this.add(this.ambientLight)}get scene(){return this.parent}get postprocessing(){return this.data.postprocessing}updateVisible(){}setBackgroundColor(e){this.bgColor=e,this.fogUseBGColor===!0&&(this.backupFog.color=e)}updateAmbientLight(e,t){e.color!==void 0&&(this.ambientLight.color=ja(e.color,t)),e.intensity!==void 0&&(this.ambientLight.intensity=e.intensity),e.enabled!==void 0&&(e.enabled?this.add(this.ambientLight):this.remove(this.ambientLight))}onDeactive(){this.isActive=!1}onActive(e){this.isActive=!0,e.fog=this.fog,this.updateShadow(this.data.shadow)}forceMaterialsUpdate(){this.traverseEntity(e=>{if(e instanceof wb)if(Array.isArray(e.material))for(let t of e.material)t.needsUpdate=!0;else e.material.needsUpdate=!0,e.material.dispose()})}updateShadow(e){e.softShadowQuality!==void 0&&this.isActive&&XSt(e.softShadowQuality)&&this.forceMaterialsUpdate()}updateFog(e,t){if(e.enabled?this.fog=this.backupFog:this.fog=null,this.isActive){let r=this.scene;r.fog=this.fog}this.fogUseBGColor=e.useBackgroundColor,e.useBackgroundColor?this.backupFog.color.set(this.bgColor):this.backupFog.color=ja(e.color,t),this.backupFog.near=e.near,this.backupFog.far=e.far}updateAo(e,t){e.aoColor!==void 0&&(this.aoColor=ja(e.aoColor,t))}updateByOp(e,t,r,n){super.updateByOp(e,t,r,n);let i=t;kl(e.path,["fog"])?this.updateFog(i.fog,r.shared):kl(e.path,["ao"])?this.updateAo(i.ao,r.shared):kl(e.path,["ambient"])?this.updateAmbientLight(i.ambient,r.shared):kl(e.path,["shadow"])&&this.updateShadow(i.shadow)}updateState(e,t){this.updateState_Entity(e,t),e.backgroundColor!==void 0&&this.setBackgroundColor(ja(e.backgroundColor,t.shared)),e.fog!==void 0&&this.updateFog(e.fog,t.shared),e.ambient!==void 0&&this.updateAmbientLight(e.ambient,t.shared),e.ao!==void 0&&this.updateAo(e.ao,t.shared),e.shadow!==void 0&&this.updateShadow(e.shadow)}raycast(e,t){super.raycast(e,t)}switchActiveCamera(e){e&&e.isDescendantOf(this)&&(this.activeCamera!==this.personalCamera&&(this.activeCamera.objectHelper.visible=!0),this.activeCamera=e,e.objectHelper.visible=!1)}get playCamera(){var e;return((e=this.scene)==null?void 0:e.find(this.data.publish.playCamera))??this.personalCamera}switchToPlayCamera(){this.switchActiveCamera(this.playCamera)}get penumbraSizeArray(){return this.penumbraSizeArrayCache===null&&this.updatePenumbraSizeArray(),this.penumbraSizeArrayCache}updatePenumbraSizeArray(){this.penumbraSizeArrayCache=new Array(5).fill(.5);let e=0,t=0;this.traverseEntity(r=>{if(!r.visible)return!0;r instanceof Wue&&r.visible&&e<3&&(this.penumbraSizeArrayCache[e]=r.data.penumbraSize,e+=1),r instanceof que&&r.visible&&e<5-3&&(this.penumbraSizeArrayCache[3+t]=r.data.penumbraSize,t+=1)})}raycastWithClones(e){let t=[],r=n=>{for(let i of n.children){let o=i.cloner;Dr.is(i)&&(i.visible||o!=null&&o.object.data.visible)&&((bu(i)||Uz(i)&&this.scene.enableHelpers&&i.objectHelper.visible)&&(e.intersectObject(i,!1,t),Kz(i,e,t,!0)),r(i))}};return r(this),t}},e_t=class extends VU(nlt,Hue){constructor(e,t,r){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let n=this.shadow.camera;n.fov=90,n.aspect=1,n.near=100,n.far=2500;let i=new F(-n.far+this.position.x,-n.far+this.position.y,-n.far+this.position.z),o=new F(n.far+this.position.x,n.far+this.position.y,n.far+this.position.z),a=new ki(i,o),s=new dP(a,new Bt(16755200));s.visible=!1,this.gizmos.shadowmap=s,this.update()}update(){if(this.shadow&&(this.shadow.camera.updateProjectionMatrix(),this.gizmos))for(let e in this.gizmos){let t=this.gizmos[e];if(t instanceof dP){let r=this.shadow.camera,n=new F(-r.far+this.position.x,-r.far+this.position.y,-r.far+this.position.z),i=new F(r.far+this.position.x,r.far+this.position.y,r.far+this.position.z);t.box.set(n,i),t.updateMatrixWorld(!0)}}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},t_t=class extends Ua{get forceComputeSize(){return!0}get shape(){return this.geometry.userData.shape}updateEntityBoxSize(e,t){let r=this.geometry.getAttribute("position");r!==void 0?kU(r,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:r.count,e,t):super.updateEntityBoxSize(e,t)}},WU=class extends Ua{constructor(e,t,r){super(e,t,r),this._shapeId=null,this._context=r}updateState(e,t){super.updateState(e,t),this.updateShape()}updateShape(){var n;let e={...this.data.geometry.extrusion.shape};for(let i in e)typeof e[i]=="string"&&(e[i]=this._context.shared.getVariable(e[i],[this.uuid,"geometry","extrusion","shape",i]));let t;if(e.type==="Custom"){let i=e.shapeId;if(i!==this._shapeId&&this.detachShape(),i){this._shapeId=i;let o=this._context.scene.find(i);o!=null&&o.data&&(o.attachedPaths.add(this),t=(n=o.geometry.userData)==null?void 0:n.shape),t||this._context.scene.addPendingCommand(()=>this.updateShape())}}else{let i;switch(e.type){case"Rectangle":i=Vle;break;case"Ellipse":i=DU;break;case"Polygon":i=$le;break;case"Star":i=Hle;break;default:throw new Error(`Unknown shape type: ${e.type}`)}t=i.create({parameters:e}).userData.shape}let r=this.geometry;t&&r.inputs&&(r.inputs.shapeData=t,r.build(),this.attachedSurfaceCloners.forEach(i=>i.update()))}detachShape(){var e;this._shapeId!==null&&((e=this._context.scene.find(this._shapeId))==null||e.attachedPaths.delete(this))}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.updateShape(),this.refreshAttachedPaths(e)}updateTransformState(e,t){return super.updateTransformState(e,t)}updateGeometryInteractions(e,t){super.updateGeometryInteractions(e,t),this.updateShape()}updateEntityBoxSize(e,t){let r=this.geometry.getAttribute("position");r!==void 0?kU(r,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:r.count,e,t):super.updateEntityBoxSize(e,t)}},Ey=class extends d_(jv,EO){constructor(e,t,r){super(),t.type==="Instance"&&typeof e=="string"&&(t=this.transformAssignData(t,r)),this.super_Entity(e,t),this.objectHelper.update()}get isComponentRoot(){return this.data.type==="Component"&&typeof this.identity=="string"}get isInstanceRoot(){return this.data.type==="Instance"&&typeof this.identity=="string"}transformAssignData(e,t){let r=LP.getComponentData({scene:t.scene.data,shared:t.shared.data},e.component);if(r){let n,i;for(let o of xf.rootOverrideProps)e[o]===void 0?(n===void 0&&(n={...e}),n[o]=r.data[o]):(i===void 0&&(i={}),i[o]=e[o],n===void 0&&(n={...e}),n[o]=$f.apply(r.data[o],e[o]));return this.overrideData=i,n}else return{...Ga.defaultData,...e,...Zd(Ga.defaultData,xf.rootOverrideProps)}}updateByOp(e,t,r,n){let i;if(this.isInstanceRoot&&!n){if(t=this.transformAssignData(t,r),e.type===0&&e.path.length===0&&this.component)for(let o of xf.rootOverrideProps)o in e.props&&e.props[o]===void 0&&(i===void 0&&(i={...e,props:{...e.props}}),i.props[o]=this.component.data[o]);else if(e.type===0&&e.path.length>0&&xf.rootOverrideProps.includes(e.path[0])){let o=e.path[0];i===void 0&&(i={...e,path:[],props:{[o]:t[o]}})}}super.updateByOp(i??e,t,r,n)}updateState(e,t){this.updateState_Entity(e,t)}expandInstanceChildren(e){let t=this.data;if(this.component===void 0){let r=e.scene.find(t.component)??null,n=!1;if(r!==this.oldComponent){if(this.oldComponent){let i=0;for(let o of this.children)if(Dr.is(o))e.scene.disposeAndUnregisterEntityRecursivelyIfNotReregistered(o),qU(o),i+=1;else break;this.children.splice(0,i)}n=!0}if(r){let i={};Kue(e,[this.uuid],t.overrides,this,r,r,0,n,i);for(let o of this.children)if(Dr.is(o)){let a=o.data;a.type==="Empty"&&a.animations&&o.traverseEntity(s=>{if(s instanceof Ua&&s.isSkinnedMesh){let l=s.dataPatched;if(l.bones&&l.boneInverses){let u=l.bones.map(h=>e.scene.find(i[h])),d=l.boneInverses.map(h=>new qe().fromArray(h)),c=new j4(u,d);s.bind(c,s.bindMatrix)}}else s.matrixAutoUpdate=!0})}}this.oldComponent=this.component}}};function qU(e){if(e.component){let t=e.component.instances.indexOf(e);t>=0&&e.component.instances.splice(t,1);for(let r of e.children)Dr.is(r)&&qU(r)}}function eY(e,t,r,n){return e.component===t&&Rse(e.identity,n)?e.overrideData===r?2:1:0}function Kue(e,t,r,n,i,o,a,s,l){if(a>50)return!1;if(n.component!==i){if(n.component){let d=n.component.instances.indexOf(n);d>=0&&n.component.instances.splice(d,1)}i.instances.push(n),n.component=i}i instanceof Ey&&i.isInstanceRoot&&i.expandInstanceChildren(e);let u=0;for(let d of i.children)if(Dr.is(d)){let c=[...t,...typeof d.identity=="string"?[d.identity]:d.identity],h=OP.resolve(r,c,1);h!=null&&!(h instanceof ho)&&(Object.setPrototypeOf(h,ho.prototype),console.error("wrong prototype"));let f=null,m;if(!s){let p=n.children[u];if(f=Dr.is(p)?p:null,f!==null){let g=eY(f,d,h,c);m=g>=1?f.stateSelection:void 0,g!==2&&(f=null)}if(f===null&&(f=e.scene.findInstance(c)??null,f!==null)){let g=eY(f,d,h,c);if(m=g>=1?f.stateSelection:void 0,g!==2)f=null;else{let v=f.parent.children.indexOf(f);f.parent.children.splice(v,1),n.children.splice(u,0,f),f.parent===n?v<=u&&console.error("not possible"):(f.parent=n,f.matrixWorldNeedsUpdate=!0,f.resetBBoxNeedsUpdate(),f.updateVisible(),e.pendingDeletes.delete(f))}}}if(f===null){let p=h?$f.apply(d.data,h):d.data;Zm.is(p.type)&&(p={...p,type:"Empty"}),f=wf.createEntity(c,p,e),f.overrideData=h,n.add(f),n.children.splice(n.children.length-1,1),n.children.splice(u,0,f),f.updateState(f.data,e),m&&f.changeSelectedState(m,e),e.scene.registerInstanceAndSetUuid(f)}if(f.isBone){let p=f.identity[f.identity.length-1];l[p]=f.uuid}u+=1,Kue(e,t,r,f,d,o,a+1,s,l)}if(!s){let d=u;for(;;){let c=n.children[u];if(Dr.is(c))e.pendingDeletes.add(c);else break;u+=1}n.children.splice(d,u-d)}return!0}var r_t=class extends d_(Oae,EO){constructor(e,t){super(),this.super_Entity(e,t),this.objectHelper.update(),this.matrixAutoUpdate=!0}updateState(e,t){this.updateState_Entity(e,t)}};function n_t(e,t,r){let n;return t.geometry.type==="TextGeometry"?new Lue(e,t,r):(t.geometry.type==="SubdivGeometry"?n=new dS(e,t,r):t.geometry.type==="PathGeometry"?n=new WU(e,t,r):t.geometry.type==="VectorGeometry"?n=new t_t(e,t,r):t.geometry.type==="BooleanGeometry"?n=new R0(e,t,r):n=new Ua(e,t,r),n)}function KU(e,t,r){return t.type==="Mesh"?n_t(e,t,r):t.type==="Empty"?new Ay(e,t):t.type==="Splat"?new Ay(e,t):t.type==="Bone"?new r_t(e,t):t.type==="Page"?new Wf(e,t):t.type==="PointLight"?new e_t(e,t,r):t.type==="SpotLight"?new que(e,t,r):t.type==="DirectionalLight"?new Wue(e,t,r):t.type==="Component"||t.type==="Instance"?new Ey(e,t,r):Zm.is(t.type)?new ha(e,t):(console.error(t),new Ay(e,t))}wf.createEntity=KU;function i_t(e,t,r){let n=KU(e.identity,t,r),i=e.children,o=e.attachedPaths,a=e.parent,s=e.component,l=e.instances,u=e.overrideData,d=e.uuid,c=e.stateSelection;e.dispose();for(let h of Object.keys(e))delete e[h];Object.setPrototypeOf(e,Object.getPrototypeOf(n));for(let h of Object.keys(n))e[h]=n[h];e.children=[...e.children,...i],e.attachedPaths=o,e.parent=a,e.component=s,e.instances=l,e.uuid=d,e.overrideData=u,e.updateState(e.data,r),c&&e.changeSelectedState(c,r),e.resetBBoxNeedsUpdate()}wf.changeEntityProptotype=i_t;wf.Cloner=Eu;function o_t(e,t,r,n){e.updateByOp(t,r,n,!1)}function tY(e,t){let r=!1,n=t.getLayersOfType("transmission"),i=t.getLayersOfType("outline");return i.length>0&&(e.layers.set(8),n.length>0&&e.layers.enable(3),r=!0,$U(e),UU(e)),n.length===0&&i.length===0&&e.layers.set(0),e instanceof wb&&e.needsAO&&e.layers.enable(5),r}function rY(e,t){if(!t.layers)return!1;let r=!1,n=t.getLayersOfType("transmission").filter(o=>o.data.visible),i=t.getLayersOfType("outline").filter(o=>o.data.visible);return n.length>0&&(e.layers.set(3),i.length>0&&e.layers.enable(8),r=!0),n.length===0&&i.length===0&&e.layers.set(0),e.needsAO&&e.layers.enable(5),r}function a_t(e){let t=!1;return e.traverseEntity(r=>{if(r instanceof wb)if(Array.isArray(r.material))for(let n=0;n<r.material.length;n++)tY(r,r.material[n])&&(t=!0);else tY(r,r.material)&&(t=!0)}),t}function s_t(e){let t=!1;return e.traverseEntity(r=>{if(r instanceof wb)if(Array.isArray(r.material))for(let n=0;n<r.material.length;n++)rY(r,r.material[n])&&(t=!0);else rY(r,r.material)&&(t=!0)}),t}var l_t=new Yae,u_t=new qe,c_t=new ab;function Kz(e,t,r,n=!1){let i=e.cloner;if(i)for(let o of i.children){let a=u_t.copy(o.matrixWorld).invert(),s=c_t.copy(t.ray).applyMatrix4(a),l=e.matrixWorld;s.applyMatrix4(l);let u=l_t;u.set(s.origin,s.direction),u.near=t.near,u.far=t.far;let d=u.intersectObject(e,!1);d.length>0&&r.push({...d[0],object:n?o:e})}}var d_t=class{constructor(){this._constraints=new Map}setConstraint(e,t){t===null?this._constraints.delete(e):this._constraints.set(e,t)}removeDependencies(e){this._constraints.delete(e)}applyConstraints(e){let t=new Set;this._constraints.forEach((r,n)=>{let i=[n,r],o=r;for(;this._constraints.has(o);)o=this._constraints.get(o),t.has(o)||i.push(o);for(let a=i.length-2;a>=0;a--)if(!t.has(i[a])){let s=e.find(i[a]);s?s.applyPathSnapping(e):console.warn(`missing entity ${i[a]}`),t.add(i[a])}})}findDependency(e,t){let r=e;for(;this._constraints.has(r);)if(r=this._constraints.get(r),r===t)return!0;return!1}},tc=Lo(JS()),yd=Lo(e_()),Ai=Lo(JS()),mr=Lo(e_()),VP=class{constructor(e,t,r){this._dataNormalized=e,this._minD=t,this._maxD=r}static createFromUnnormalized(e){let t=mr.sup(e),r=mr.inf(e),n=(0,Ai.default)(new Float32Array(e.size),e.shape),i=t-r;return i<1e-4?mr.assigns(n,0):(mr.subs(n,e,r),mr.divs(n,n,i)),new VP(n,r,t)}get data(){return this._dataNormalized}get minD(){return this._minD}get maxD(){return this._maxD}denormalize(){let e=(0,Ai.default)(new Float32Array(this._dataNormalized.size),this._dataNormalized.shape);return mr.muls(e,this._dataNormalized,this._maxD-this._minD),mr.adds(e,e,this._minD),e}},ri=class{constructor(e,t){this._quantized=e,this._method=t}get quantized(){return this._quantized}static maxIntBits(e){return 2**e-1}static fromNormalized(e,t){let r=e.data,n;if(t==="norm8x"){let i=ri.maxIntBits(8),o=(0,Ai.default)(new Float32Array(r.size),r.shape);mr.muls(o,r,i),mr.roundeq(o),n=(0,Ai.default)(new Uint8Array(o.data),r.shape)}else if(t==="norm565"){let i=(0,Ai.default)(new Float32Array(r.size),r.shape);mr.assign(i,r),mr.mulseq(i.pick(null,0),ri.maxIntBits(5)),mr.mulseq(i.pick(null,1),ri.maxIntBits(6)),mr.mulseq(i.pick(null,2),ri.maxIntBits(5)),mr.roundeq(i);let o=(0,Ai.default)(new Uint16Array(i.data),r.shape),a=(0,Ai.default)(new Uint16Array(r.shape[0]),[r.shape[0]]),s=(0,Ai.default)(new Uint16Array(r.shape[0]),[r.shape[0]]);mr.lshifts(a,o.pick(null,0),11),mr.lshifts(s,o.pick(null,1),5),mr.boreq(a,s),mr.boreq(a,o.pick(null,2)),n=a}else{let i=(0,Ai.default)(new Float32Array(r.size),r.shape);mr.assign(i,r),mr.mulseq(i.pick(null,0),ri.maxIntBits(11)),mr.mulseq(i.pick(null,1),ri.maxIntBits(10)),mr.mulseq(i.pick(null,2),ri.maxIntBits(11)),mr.roundeq(i);let o=(0,Ai.default)(new Uint32Array(i.data),r.shape),a=(0,Ai.default)(new Uint32Array(r.shape[0]),[r.shape[0]]),s=(0,Ai.default)(new Uint32Array(r.shape[0]),[r.shape[0]]);mr.lshifts(a,o.pick(null,0),21),mr.lshifts(s,o.pick(null,1),11),mr.boreq(a,s),mr.boreq(a,o.pick(null,2)),n=a}return new ri(n,t)}dequantize(e,t){let r=this._method,n,i=this._quantized;if(r==="norm8x"){let o=ri.maxIntBits(8);n=(0,Ai.default)(new Float32Array(i.size),i.shape),mr.muls(n,i,1/o)}else if(r==="norm565"){let o=(0,Ai.default)(new Uint8Array(i.shape[0]),[i.shape[0]]),a=(0,Ai.default)(new Uint8Array(i.shape[0]),[i.shape[0]]),s=(0,Ai.default)(new Uint8Array(i.shape[0]),[i.shape[0]]);mr.rrshifts(o,i,11),mr.rrshifts(a,i,5),mr.bandseq(a,ri.maxIntBits(6)),mr.bands(s,i,ri.maxIntBits(5)),n=(0,Ai.default)(new Float32Array(i.shape[0]*3),[i.shape[0],3]),mr.muls(n.pick(null,0),o,1/ri.maxIntBits(5)),mr.muls(n.pick(null,1),a,1/ri.maxIntBits(6)),mr.muls(n.pick(null,2),s,1/ri.maxIntBits(5))}else{let o=(0,Ai.default)(new Uint16Array(i.shape[0]),[i.shape[0]]),a=(0,Ai.default)(new Uint16Array(i.shape[0]),[i.shape[0]]),s=(0,Ai.default)(new Uint16Array(i.shape[0]),[i.shape[0]]);mr.rrshifts(o,i,21),mr.rrshifts(a,i,11),mr.bandseq(a,ri.maxIntBits(10)),mr.bands(s,i,ri.maxIntBits(11)),n=(0,Ai.default)(new Float32Array(i.shape[0]*3),[i.shape[0],3]),mr.muls(n.pick(null,0),o,1/ri.maxIntBits(11)),mr.muls(n.pick(null,1),a,1/ri.maxIntBits(10)),mr.muls(n.pick(null,2),s,1/ri.maxIntBits(11))}return new VP(n,e,t)}},pi=class{constructor(e,t,r,n,i,o=!1){this._quantized=e,this._minMaxMatrix=t,this._chunkSize=r,this._quantizationMethod=n,this._variableChunkSize=i,this._isDynamicChunks=o}get length(){return this._quantized.shape[0]}get nchunks(){return this._minMaxMatrix.shape[0]}get quantized(){return this._quantized}get method(){return this._quantizationMethod}get minmaxMatrix(){return this._minMaxMatrix}_createPrunedMinMax(e){let t=e.length,r=this.minmaxMatrix.shape[0]-t,n=(0,tc.default)(new Float32Array(r*2),[r,2]),i=0,o=r,a=0,s=this.minmaxMatrix.shape[0];for(let l=0;l<e.length;l++)s=e[l],o=s-a+i,o>i&&yd.assign(n.hi(o,2).lo(i,0),this.minmaxMatrix.hi(s,2).lo(a,0)),i=o,a=s+1;return i<r&&yd.assign(n.lo(i,0),this.minmaxMatrix.lo(a,0)),n}_createPrunedQuantized(e){let t=e.length,r=this.quantized.shape[0]-t,n=this._quantizationMethod,i,o;if(n==="norm8x"){o=this._quantized.shape[1];let d=o?r*o:r;i=(0,tc.default)(new Uint8Array(d),o?[r,o]:[r,1])}else n==="norm565"?i=(0,tc.default)(new Uint16Array(r),[r]):i=(0,tc.default)(new Uint32Array(r),[r]);let a=0,s=r,l=0,u=i.shape[0];for(let d=0;d<e.length;d++)u=e[d],s=u-l+a,s>a&&(o?yd.assign(i.hi(s,o).lo(a,0),this._quantized.hi(u,o).lo(l,0)):yd.assign(i.hi(s).lo(a),this._quantized.hi(u).lo(l))),a=s,l=u+1;return a<r&&(o?yd.assign(i.lo(a,0),this._quantized.lo(l,0)):yd.assign(i.lo(a),this._quantized.lo(l))),i}pruneFeature(e,t,r){let n=this._createPrunedQuantized(e),i=this._createPrunedMinMax(t);return new pi(n,i,this._chunkSize,this._quantizationMethod,r,!0)}static getRequiredNChunks(e,t){return Math.floor(e/t)}static fromArray(e,t,r){let n=e.shape[0],i=Math.floor(n/r),o=(0,tc.default)(new Float32Array(i*2),[i,2],[2,1]),a;t==="norm8x"?a=(0,tc.default)(new Uint8Array(e.size),e.shape):t==="norm565"?a=(0,tc.default)(new Uint16Array(e.shape[0]),[e.shape[0]]):a=(0,tc.default)(new Uint32Array(e.shape[0]),[e.shape[0]]);for(let s=0;s<i;s++){let l=s*r,u=s+1<i?(s+1)*r:n,d;e.shape.length>1?d=VP.createFromUnnormalized(e.hi(u,e.shape[1]).lo(l,0)):d=VP.createFromUnnormalized(e.hi(u).lo(l)),o.set(s,0,d.minD),o.set(s,1,d.maxD),a.shape.length>1?yd.assign(a.hi(u,a.shape[1]).lo(l,0),ri.fromNormalized(d,t).quantized):yd.assign(a.hi(u).lo(l),ri.fromNormalized(d,t).quantized)}return new pi(a,o,r,t)}denormDequant(){let e=this._minMaxMatrix.shape[0],t=this._quantized,r=t.shape[0],n=this._quantizationMethod,i=this._chunkSize,o;if(this._isDynamicChunks){if(!this._variableChunkSize)throw new Error("variable chunk must exists if chunkSize isDynamic");o=this._variableChunkSize}let a;n==="norm8x"?a=(0,tc.default)(new Float32Array(t.size),t.shape):a=(0,tc.default)(new Float32Array(r*3),[r,3]);let s=0,l=i;for(let u=0;u<e;u++){let[d,c]=[this._minMaxMatrix.get(u,0),this._minMaxMatrix.get(u,1)];this._isDynamicChunks&&(l=o[u]);let h=u+1<e?s+l:r,f;t.shape.length>1?f=new ri(t.hi(h,t.shape[1]).lo(s,0),n):f=new ri(t.hi(h).lo(s),n),yd.assign(a.hi(h,a.shape[1]).lo(s,0),f.dequantize(d,c).denormalize()),s=h}return a}static async fetchArrayBuffer(e){return await(await fetch(e,{mode:"cors"})).arrayBuffer()}},Fh=Lo(JS()),kr=Lo(e_()),h_t="http://127.0.0.1:8000",My=Lo(JS()),ji=Lo(e_()),nY=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];function iY(e){return e<1e5?e<100?e<10?0:1:e<1e4?e<1e3?2:3:4:e<1e7?e<1e6?5:6:e<1e9?e<1e8?7:8:9}function oY(e,t){if(e===t)return 0;if(~~e===e&&~~t===t){if(e===0||t===0)return e<t?-1:1;if(e<0||t<0){if(t>=0)return-1;if(e>=0)return 1;e=-e,t=-t}let i=iY(e),o=iY(t),a=0;return i<o?(e*=nY[o-i-1],t/=10,a=-1):i>o&&(t*=nY[i-o-1],e/=10,a=1),e===t?a:e<t?-1:1}let r=String(e),n=String(t);return r===n?0:r<n?-1:1}function f_t(e){let t=0;for(;e>=32;)t|=e&1,e>>=1;return e+t}function aY(e,t,r,n){let i=t+1;if(i===r)return 1;if(n(e[i++],e[t])<0){for(;i<r&&n(e[i],e[i-1])<0;)i++;p_t(e,t,i)}else for(;i<r&&n(e[i],e[i-1])>=0;)i++;return i-t}function p_t(e,t,r){for(r--;t<r;){let n=e[t];e[t++]=e[r],e[r--]=n}}function sY(e,t,r,n,i){for(n===t&&n++;n<r;n++){let o=e[n],a=t,s=n;for(;a<s;){let u=a+s>>>1;i(o,e[u])<0?s=u:a=u+1}let l=n-a;switch(l){case 3:e[a+3]=e[a+2];case 2:e[a+2]=e[a+1];case 1:e[a+1]=e[a];break;default:for(;l>0;)e[a+l]=e[a+l-1],l--}e[a]=o}}function XR(e,t,r,n,i,o){let a=0,s=0,l=1;if(o(e,t[r+i])>0){for(s=n-i;l<s&&o(e,t[r+i+l])>0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),a+=i,l+=i}else{for(s=i+1;l<s&&o(e,t[r+i-l])<=0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);let u=a;a=i-l,l=i-u}for(a++;a<l;){let u=a+(l-a>>>1);o(e,t[r+u])>0?a=u+1:l=u}return l}function YR(e,t,r,n,i,o){let a=0,s=0,l=1;if(o(e,t[r+i])<0){for(s=i+1;l<s&&o(e,t[r+i-l])<0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);let u=a;a=i-l,l=i-u}else{for(s=n-i;l<s&&o(e,t[r+i+l])>=0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),a+=i,l+=i}for(a++;a<l;){let u=a+(l-a>>>1);o(e,t[r+u])<0?l=u:a=u+1}return l}var m_t=class{constructor(e,t){Ma(this,"array",null),Ma(this,"compare",null),Ma(this,"minGallop",7),Ma(this,"length",0),Ma(this,"tmpStorageLength",256),Ma(this,"stackLength",0),Ma(this,"runStart",null),Ma(this,"runLength",null),Ma(this,"stackSize",0),this.array=e,this.compare=t,this.length=e.length,this.length<2*256&&(this.tmpStorageLength=this.length>>>1),this.tmp=new Array(this.tmpStorageLength),this.stackLength=this.length<120?5:this.length<1542?10:this.length<119151?19:40,this.runStart=new Array(this.stackLength),this.runLength=new Array(this.stackLength)}pushRun(e,t){this.runStart[this.stackSize]=e,this.runLength[this.stackSize]=t,this.stackSize+=1}mergeRuns(){for(;this.stackSize>1;){let e=this.stackSize-2;if(e>=1&&this.runLength[e-1]<=this.runLength[e]+this.runLength[e+1]||e>=2&&this.runLength[e-2]<=this.runLength[e]+this.runLength[e-1])this.runLength[e-1]<this.runLength[e+1]&&e--;else if(this.runLength[e]>this.runLength[e+1])break;this.mergeAt(e)}}forceMergeRuns(){for(;this.stackSize>1;){let e=this.stackSize-2;e>0&&this.runLength[e-1]<this.runLength[e+1]&&e--,this.mergeAt(e)}}mergeAt(e){let t=this.compare,r=this.array,n=this.runStart[e],i=this.runLength[e],o=this.runStart[e+1],a=this.runLength[e+1];this.runLength[e]=i+a,e===this.stackSize-3&&(this.runStart[e+1]=this.runStart[e+2],this.runLength[e+1]=this.runLength[e+2]),this.stackSize--;let s=YR(r[o],r,n,i,0,t);n+=s,i-=s,i!==0&&(a=XR(r[n+i-1],r,o,a,a-1,t),a!==0&&(i<=a?this.mergeLow(n,i,o,a):this.mergeHigh(n,i,o,a)))}mergeLow(e,t,r,n){let i=this.compare,o=this.array,a=this.tmp,s=0;for(s=0;s<t;s++)a[s]=o[e+s];let l=0,u=r,d=e;if(o[d++]=o[u++],--n===0){for(s=0;s<t;s++)o[d+s]=a[l+s];return}if(t===1){for(s=0;s<n;s++)o[d+s]=o[u+s];o[d+n]=a[l];return}let c=this.minGallop;for(;;){let h=0,f=0,m=!1;do if(i(o[u],a[l])<0){if(o[d++]=o[u++],f++,h=0,--n===0){m=!0;break}}else if(o[d++]=a[l++],h++,f=0,--t===1){m=!0;break}while((h|f)<c);if(m)break;do{if(h=YR(o[u],a,l,t,0,i),h!==0){for(s=0;s<h;s++)o[d+s]=a[l+s];if(d+=h,l+=h,t-=h,t<=1){m=!0;break}}if(o[d++]=o[u++],--n===0){m=!0;break}if(f=XR(a[l],o,u,n,0,i),f!==0){for(s=0;s<f;s++)o[d+s]=o[u+s];if(d+=f,u+=f,n-=f,n===0){m=!0;break}}if(o[d++]=a[l++],--t===1){m=!0;break}c--}while(h>=7||f>=7);if(m)break;c<0&&(c=0),c+=2}if(this.minGallop=c,c<1&&(this.minGallop=1),t===1){for(s=0;s<n;s++)o[d+s]=o[u+s];o[d+n]=a[l]}else{if(t===0)throw new Error("mergeLow preconditions were not respected");for(s=0;s<t;s++)o[d+s]=a[l+s]}}mergeHigh(e,t,r,n){let i=this.compare,o=this.array,a=this.tmp,s=0;for(s=0;s<n;s++)a[s]=o[r+s];let l=e+t-1,u=n-1,d=r+n-1,c=0,h=0;if(o[d--]=o[l--],--t===0){for(c=d-(n-1),s=0;s<n;s++)o[c+s]=a[s];return}if(n===1){for(d-=t,l-=t,h=d+1,c=l+1,s=t-1;s>=0;s--)o[h+s]=o[c+s];o[d]=a[u];return}let f=this.minGallop;for(;;){let m=0,p=0,g=!1;do if(i(a[u],o[l])<0){if(o[d--]=o[l--],m++,p=0,--t===0){g=!0;break}}else if(o[d--]=a[u--],p++,m=0,--n===1){g=!0;break}while((m|p)<f);if(g)break;do{if(m=t-YR(a[u],o,e,t,t-1,i),m!==0){for(d-=m,l-=m,t-=m,h=d+1,c=l+1,s=m-1;s>=0;s--)o[h+s]=o[c+s];if(t===0){g=!0;break}}if(o[d--]=a[u--],--n===1){g=!0;break}if(p=n-XR(o[l],a,0,n,n-1,i),p!==0){for(d-=p,u-=p,n-=p,h=d+1,c=u+1,s=0;s<p;s++)o[h+s]=a[c+s];if(n<=1){g=!0;break}}if(o[d--]=o[l--],--t===0){g=!0;break}f--}while(m>=7||p>=7);if(g)break;f<0&&(f=0),f+=2}if(this.minGallop=f,f<1&&(this.minGallop=1),n===1){for(d-=t,l-=t,h=d+1,c=l+1,s=t-1;s>=0;s--)o[h+s]=o[c+s];o[d]=a[u]}else{if(n===0)throw new Error("mergeHigh preconditions were not respected");for(c=d-(n-1),s=0;s<n;s++)o[c+s]=a[s]}}};function g_t(e,t,r,n){if(!Array.isArray(e))throw new TypeError("Can only sort arrays");t?typeof t!="function"&&(n=r,r=t,t=oY):t=oY,r||(r=0),n||(n=e.length);let i=n-r;if(i<2)return;let o=0;if(i<32){o=aY(e,r,n,t),sY(e,r,n,r+o,t);return}let a=new m_t(e,t),s=f_t(i);do{if(o=aY(e,r,n,t),o<s){let l=i;l>s&&(l=s),sY(e,r,r+l,r+o,t),o=l}a.pushRun(r,o),a.mergeRuns(),i-=o,r+=o}while(i!==0);a.forceMergeRuns()}function QR(e){let t=(0,My.default)(new Int32Array(e.shape[0]),[e.shape[0]]),r=(0,My.default)(new Int32Array(e.shape[0]),[e.shape[0]]);return ji.bands(t,e,1023),ji.lshifts(r,t,16),ji.bxoreq(t,r),ji.bandseq(t,4278190335),ji.lshifts(r,t,8),ji.bxoreq(t,r),ji.bandseq(t,50393103),ji.lshifts(r,t,4),ji.bxoreq(t,r),ji.bandseq(t,51130563),ji.lshifts(r,t,2),ji.bxoreq(t,r),ji.bandseq(t,153391689),t}function v_t(e){let t=QR(e.pick(null,0)),r=QR(e.pick(null,1));ji.lshiftseq(r,1);let n=QR(e.pick(null,2));return ji.lshiftseq(n,2),ji.boreq(t,r),ji.boreq(t,n),t}function iv(e,t){if(e.shape[0]!==t.shape[0])throw new Error("wrong length");let r=(0,My.default)(new Float32Array(e.size),e.shape,e.stride,e.offset);for(let n=0;n<t.shape[0];n++){let i=t.get(n);if(e.shape.length>1)for(let o=0;o<e.shape[1];o++)r.set(n,o,e.get(i,o));else r.set(n,e.get(i))}return r}function y_t(e){let t=ji.sup(e),r=ji.inf(e),n=1e3/Math.min(1e3,t-r),i=(0,My.default)(new Float32Array(e.data),e.shape);ji.mulseq(i,n);let o=(0,My.default)(new Int32Array(i.data),e.shape),a=v_t(o),s=Array.from(a.data).map((u,d)=>[u,d]);g_t(s,(u,d)=>u[0]-d[0]);let l=s.map(([u,d])=>d);return(0,My.default)(Uint32Array.from(l))}var Gp=class{constructor(e,t,r,n,i,o,a,s,l,u){this.propertyDescs=e,this.format=t,this.nsplats=r,this.xyz=n,this.colors=i,this.harmonics=o,this.opacity=a,this.scaling=s,this.rotation=l,this.maxSHDegree=u}getPlyBinary(){let e=Gp._generateHeaderString(this.propertyDescs,this.format,this.nsplats),t=new TextEncoder().encode(e),r=Object.keys(this.propertyDescs).length,n=(0,Fh.default)(new Float32Array(this.nsplats*r),[this.nsplats,r]);if(kr.assign(n.pick(null,this.propertyDescs.x.index),this.xyz.pick(null,0)),kr.assign(n.pick(null,this.propertyDescs.y.index),this.xyz.pick(null,1)),kr.assign(n.pick(null,this.propertyDescs.z.index),this.xyz.pick(null,2)),kr.assign(n.pick(null,this.propertyDescs.f_dc_0.index),this.colors.pick(null,0)),kr.assign(n.pick(null,this.propertyDescs.f_dc_1.index),this.colors.pick(null,1)),kr.assign(n.pick(null,this.propertyDescs.f_dc_2.index),this.colors.pick(null,2)),kr.assign(n.pick(null,this.propertyDescs.opacity.index),this.opacity.pick(null,0)),kr.assign(n.pick(null,this.propertyDescs.scale_0.index),this.scaling.pick(null,0)),kr.assign(n.pick(null,this.propertyDescs.scale_1.index),this.scaling.pick(null,1)),kr.assign(n.pick(null,this.propertyDescs.scale_2.index),this.scaling.pick(null,2)),kr.assign(n.pick(null,this.propertyDescs.rot_0.index),this.rotation.pick(null,0)),kr.assign(n.pick(null,this.propertyDescs.rot_1.index),this.rotation.pick(null,1)),kr.assign(n.pick(null,this.propertyDescs.rot_2.index),this.rotation.pick(null,2)),kr.assign(n.pick(null,this.propertyDescs.rot_3.index),this.rotation.pick(null,3)),this.harmonics&&this.harmonics.length>0)for(let a=0;a<this.harmonics.length;a++){let s=a*3;kr.assign(n.pick(null,this.propertyDescs[`f_rest_${s}`].index),this.harmonics[a].pick(null,0)),kr.assign(n.pick(null,this.propertyDescs[`f_rest_${s+1}`].index),this.harmonics[a].pick(null,1)),kr.assign(n.pick(null,this.propertyDescs[`f_rest_${s+2}`].index),this.harmonics[a].pick(null,2))}let i=new Uint8Array(n.data.buffer),o=new Uint8Array(i.length+t.length);return o.set(t),o.set(i,t.length),o.buffer}save(e,t){let r=this.getPlyBinary(),n=new Blob([r],{type:"application/octet-stream"}),i=new File([n],e),o=new FormData;o.append("file",i),o.append("filename",e),o.append("basedir",t),fetch(`${h_t}/push_file`,{method:"POST",body:o})}static async loadFile(e){return await(await fetch(e)).arrayBuffer()}mortonPositionSplatsSort(){let e=y_t(this.xyz),t=iv(this.xyz,e),r=iv(this.colors,e),n=iv(this.opacity,e),i=iv(this.scaling,e),o=iv(this.rotation,e),a=[];for(let s=0;s<this.harmonics.length;s++)a.push(iv(this.harmonics[s],e));return new Gp(this.propertyDescs,this.format,this.nsplats,t,r,a,n,i,o,this.maxSHDegree)}static _generateHeaderString(e,t,r){let n=`ply
format ${t.format} ${t.version}
element vertex ${r}`,i=Object.keys(e).length,o=Array(i);for(let a in e){let s=e[a];o[s.index]={name:a,dtype:s.dtype}}for(let a=0;a<o.length;a++)n=`${n}
property ${o[a].dtype} ${o[a].name}`;return`${n}
end_header
`}static fromArrayBuffer(e,t=3){let{splatCount:r,vertexData:n,propertiesDesc:i,format:o}=Gp.decodeHeader(e),a=n.buffer.slice(n.byteOffset),s=Object.keys(i).length,l=(0,Fh.default)(new Float32Array(a),[r,s]),u=0,d={},c={double:8,int:4,uint:4,float:4,short:2,ushort:2,uchar:1};for(let y in i)if(i.hasOwnProperty(y)){let x=i[y].dtype;d[y]=u,u+=c[x]}let h=(0,Fh.default)(new Float32Array(r*3),[r,3]);kr.assign(h.pick(null,0),l.pick(null,d.x/4)),kr.assign(h.pick(null,1),l.pick(null,d.y/4)),kr.assign(h.pick(null,2),l.pick(null,d.z/4));let f=(0,Fh.default)(new Float32Array(r*3),[r,3]);kr.assign(f.pick(null,0),l.pick(null,d.scale_0/4)),kr.assign(f.pick(null,1),l.pick(null,d.scale_1/4)),kr.assign(f.pick(null,2),l.pick(null,d.scale_2/4));let m=(0,Fh.default)(new Float32Array(r*3),[r,3]);kr.assign(m.pick(null,0),l.pick(null,d.f_dc_0/4)),kr.assign(m.pick(null,1),l.pick(null,d.f_dc_1/4)),kr.assign(m.pick(null,2),l.pick(null,d.f_dc_2/4));let p=(0,Fh.default)(new Float32Array(r*4),[r,4]);kr.assign(p.pick(null,0),l.pick(null,d.rot_1/4)),kr.assign(p.pick(null,1),l.pick(null,d.rot_2/4)),kr.assign(p.pick(null,2),l.pick(null,d.rot_3/4)),kr.assign(p.pick(null,3),l.pick(null,d.rot_0/4));for(let y=0;y<r;y++){let x=p.pick(y,null),S=Math.sqrt(x.get(0)**2+x.get(1)**2+x.get(2)**2+x.get(3)**2);kr.divseq(x,S)}let g=(0,Fh.default)(new Float32Array(r*1),[r,1]);kr.assign(g.pick(null,0),l.pick(null,d.opacity/4));let v=(Math.min(Math.max(t,0),3)+1)**2-1,b=[];for(let y=0;y<v;y++){let x=(0,Fh.default)(new Float32Array(r*3),[r,3]),S=y*3;kr.assign(x.pick(null,0),l.pick(null,d[`f_rest_${S}`]/4)),kr.assign(x.pick(null,1),l.pick(null,d[`f_rest_${S+1}`]/4)),kr.assign(x.pick(null,2),l.pick(null,d[`f_rest_${S+2}`]/4)),b.push(x)}return new Gp(i,o,r,h,m,b,g,f,p,t)}static async fromPLYFile(e,t=3){let r=await Gp.loadFile(e);return Gp.fromArrayBuffer(r,t)}static decodeHeader(e){let t=new TextDecoder,r=0,n="",i=100;for(;;){if(r+i>=e.byteLength)throw new Error("End of file reached while searching for end of header");let h=new Uint8Array(e,r,i);n+=t.decode(h),r+=i;let f=r-i*2,m=new Uint8Array(e,Math.max(0,f),f>0?i*2:i);if(t.decode(m).includes("end_header"))break}let o=n.split(`
`),a=0,s={},l=0,u;for(let h=0;h<o.length;h++){let f=o[h].trim();if(f.startsWith("element vertex")){let m=f.match(/\d+/);m&&(a=parseInt(m[0]))}else if(f.startsWith("property")){let m=f.match(/(\w+)\s+(\w+)\s+(\w+)/);if(m){let p=m[2],g=m[3];s[g]={dtype:p,index:l},l++}}else if(f.startsWith("format")){let m=f.match(/(\w+)\s+(\w+)\s+(\d+\.?\d*)/);m&&(u={format:m[2],version:m[3]})}else if(f==="end_header")break}let d=n.indexOf("end_header")+10+1,c=new DataView(e,d);return{splatCount:a,vertexData:c,headerOffset:r,propertiesDesc:s,format:u}}},Xz=class{constructor(e,t,r,n,i,o,a,s){this.config=e,this.xyz=t,this.scaling=r,this.color=n,this.opacity=i,this.harmonics=a,this.quaternion=o,this.variableChunkSize=s}get isDynamicChunks(){return this.variableChunkSize&&this.variableChunkSize.length>0}get nchunks(){return this.xyz.nchunks}get nsplats(){return this.xyz.length}get chunkSize(){return this.config.chunkSize}static compressFromGaussianData(e,t){let r=pi.fromArray(e.xyz,t.xyz,t.chunkSize),n=pi.fromArray(e.scaling,t.scaling,t.chunkSize),i=pi.fromArray(e.colors,t.color,t.chunkSize),o=pi.fromArray(e.opacity,t.opacity,t.chunkSize),a=pi.fromArray(e.rotation,t.quaternion,t.chunkSize),s=e.harmonics,l=[];if(t.harmonics)for(let u=0;u<s.length;u++){let d=pi.fromArray(s[u],t.harmonics,t.chunkSize);l.push(d)}return new Xz(t,r,n,i,o,a,l)}_countIndexesInChunks(e){let t=[],r=this.nchunks,n=this.chunkSize,i=this.nsplats,o=pi.getRequiredNChunks(i,n);if(r===o)for(let a=0;a<e.length;a++){let s=e[a],l=Math.floor(s/this.chunkSize);l in t?t[l].push(s):t[l]=[s]}else{let a=this.variableChunkSize,s={},l=0;for(let u=0;u<r;u++)s[u]=l,l+=a[u];for(let u=0;u<e.length;u++){let d=e[u],c=Math.min(Math.floor(d/n),r-1);for(;d>=s[c]+a[c];)c++;c in t?t[c].push(d):t[c]=[d]}}return t}pruneSplats(e){let t=this._countIndexesInChunks(e),r,n=[];return t.length>0&&(r=this.variableChunkSize?[...this.variableChunkSize]:Array(this.nchunks).fill(this.chunkSize),t.forEach((i,o)=>{r[o]-=i.length,r[o]<=0&&n.push(o)}),r=r.filter(i=>i>0)),new Xz(this.config,this.xyz.pruneFeature(e,n,r),this.scaling.pruneFeature(e,n,r),this.color.pruneFeature(e,n,r),this.opacity.pruneFeature(e,n,r),this.quaternion.pruneFeature(e,n,r),this.harmonics?this.harmonics.map(i=>i.pruneFeature(e,n,this.variableChunkSize)):void 0,r)}static async loadConfig(e){return await(await fetch(e,{method:"GET",mode:"cors",headers:{Accept:"application/json"}})).json()}toGaussians(){var i;let e={format:"binary_little_endian",version:"1.0"},t={},r=0;if(t.x={dtype:"float",index:r},r++,t.y={dtype:"float",index:r},r++,t.z={dtype:"float",index:r},r++,t.f_dc_0={dtype:"float",index:r},r++,t.f_dc_1={dtype:"float",index:r},r++,t.f_dc_2={dtype:"float",index:r},r++,this.harmonics&&this.harmonics.length>0)for(let o=0;o<this.harmonics.length;o++)t[`f_rest_${o}`]={dtype:"float",index:r},r++,t[`f_rest_${o+1}`]={dtype:"float",index:r},r++,t[`f_rest_${o+2}`]={dtype:"float",index:r},r++;t.opacity={dtype:"float",index:r},r++,t.scale_0={dtype:"float",index:r},r++,t.scale_1={dtype:"float",index:r},r++,t.scale_2={dtype:"float",index:r},r++,t.rot_0={dtype:"float",index:r},r++,t.rot_1={dtype:"float",index:r},r++,t.rot_2={dtype:"float",index:r},r++,t.rot_3={dtype:"float",index:r},r++;let n=(i=this.harmonics)==null?void 0:i.map(o=>o.denormDequant());return new Gp(t,e,this.xyz.length,this.xyz.denormDequant(),this.color.denormDequant(),n||[],this.opacity.denormDequant(),this.scaling.denormDequant(),this.quaternion.denormDequant(),3)}},ov=Lo(JS()),yl=Lo(e_()),lY={xyz:3,color:3,opacity:1,scaling:3,quaternion:4,harmonics:3},Yz=class{constructor(e){this._buffer=e}get buffer(){return this._buffer}get decoded(){return this._decoded||(this._decoded=this.decodeBuffer()),this._decoded}get colorsA(){let e=.28209479177387814,t=this.decoded.color.denormDequant(),r=this.decoded.opacity.denormDequant(),n=(0,ov.default)(new Float32Array(t.shape[0]*4),[t.shape[0],4]);return yl.mulseq(t,e),yl.addseq(t,.5),yl.mulseq(t,255),yl.maxseq(t,0),yl.minseq(t,255),yl.negeq(r),yl.expeq(r),yl.addseq(r,1),yl.recipeq(r),yl.mulseq(r,255),yl.assign(n.hi(t.shape[0],3).lo(0,0),t),yl.assign(n.hi(t.shape[0],4).lo(0,3),r),(0,ov.default)(new Uint8Array(n.data),[t.shape[0],4]).data}get nsplats(){return this.decoded.nsplats}getSplatCount(){return this.decoded.nsplats}get precomputedCovarianceBufferData(){return this._precomputedCovarianceBufferData}decodeBuffer(){let{splatCount:e,chunkCount:t,chunkSize:r,typeChunks:n,vertexData:i,propertiesDesc:o}=this.decodeHeader(),a={xyz:o.xyz.compressionMethod,color:o.color.compressionMethod,opacity:o.opacity.compressionMethod,scaling:o.scaling.compressionMethod,quaternion:o.quaternion.compressionMethod,chunkSize:r};o.harmonics_0&&(a.harmonics=o.harmonics_0.compressionMethod);let s=i.byteOffset,l=Array(Object.keys(o).length);for(let g in o)l[o[g].index]={name:g,method:o[g].compressionMethod};let u=t*2*4,d=s,c=n==="dynamic"?t*2:0,h,f=!1;if(c>0){let g=new Uint16Array(i.buffer.slice(d,d+c));d+=c,h=Array.from(g),f=!0}let m={};for(let g of l){let v=0,b=!0;if(g.method==="norm8x")v=e*1*lY[g.name];else if(g.method==="norm11")v=e*4;else if(g.method==="norm565")v=e*2;else throw b=!1,new Error(`Not Implemented format: ${g.method}`);let y;if(b){let w=i.buffer.slice(d,d+u);y=(0,ov.default)(new Float32Array(w),[t,2]),d+=u}else throw new Error("loading chunk byt hasnot minmax!");let x=i.buffer.slice(d,d+v);d+=v;let S;if(g.method==="norm8x")S=(0,ov.default)(new Uint8Array(x),[e,lY[g.name]]);else if(g.method==="norm11")S=(0,ov.default)(new Uint32Array(x));else if(g.method==="norm565")S=(0,ov.default)(new Uint16Array(x));else throw new Error(`Not Implemented format: ${g.method}`);m[g.name]=new pi(S,y,r,g.method,h,f)}let p=[];for(let g=0;g<15;g++){let v=m[`harmonics_${g}`];v&&(p.push(v),delete m[`harmonics_${g}`])}return p.length>0&&(m.harmonics=p),new Xz(a,m.xyz,m.scaling,m.color,m.opacity,m.quaternion,m.harmonics,h)}buildPreComputedBuffers(){let e=this.decoded,t=e.nsplats,r=new ArrayBuffer(24*t),n=new Float32Array(r),i=e.scaling.denormDequant(),o=e.quaternion.denormDequant(),a=new Jt,s=new Ii,l=new Ii,u=new Ii,d=new qe;for(let c=0;c<t;c++){d.makeScale(Math.exp(i.get(c,0)),Math.exp(i.get(c,1)),Math.exp(i.get(c,2))),l.setFromMatrix4(d),a.set(o.get(c,0),o.get(c,1),o.get(c,2),o.get(c,3)),d.makeRotationFromQuaternion(a),s.setFromMatrix4(d),u.copy(s).multiply(l);let h=u.elements;n[6*c]=h[0]*h[0]+h[3]*h[3]+h[6]*h[6],n[6*c+1]=h[0]*h[1]+h[3]*h[4]+h[6]*h[7],n[6*c+2]=h[0]*h[2]+h[3]*h[5]+h[6]*h[8],n[6*c+3]=h[1]*h[1]+h[4]*h[4]+h[7]*h[7],n[6*c+4]=h[1]*h[2]+h[4]*h[5]+h[7]*h[8],n[6*c+5]=h[2]*h[2]+h[5]*h[5]+h[8]*h[8]}this._precomputedCovarianceBufferData=r}decodeHeader(){let e=this._buffer,t=new TextDecoder,r=0,n="",i=100;for(;;){if(r+i>=e.byteLength)throw new Error("End of file reached while searching for end of header");let m=new Uint8Array(e,r,i);n+=t.decode(m),r+=i;let p=r-i*2,g=new Uint8Array(e,Math.max(0,p),p>=0?i*2:i);if(t.decode(g).includes("end_header"))break}let o=n.split(`
`),a=0,s=0,l=0,u=0,d="",c={};for(let m=0;m<o.length;m++){let p=o[m].trim();if(p.startsWith("element vertex")){let g=p.match(/\d+/);g&&(a=parseInt(g[0]))}else if(p.startsWith("property")){let g=p.match(/(\w+)\s+(\w+)\s+(\w+)/);if(g){let v=g[2],b=g[3];c[v]={compressionMethod:b,index:u},u++}}else if(p.startsWith("element chunks")){let g=p.match(/\d+/);g&&(s=parseInt(g[0]))}else if(p.startsWith("element chunkSize")){let g=p.match(/\d+/);g&&(l=parseInt(g[0]))}else if(p.startsWith("element typeChunks")){let g=p.match(/(\w+)\s+(\w+)\s+(\w+)/);g&&(d=g[3])}else if(p==="end_header")break}let h=n.indexOf("end_header")+10+1,f=new DataView(e,h);return{splatCount:a,chunkCount:s,chunkSize:l,typeChunks:d,vertexData:f,propertiesDesc:c}}pruneSplats(e){let t=this.decodeBuffer().pruneSplats(e);return Yz.fromCompressedGaussianSplats(t)}static fromCompressedGaussianSplats(e){let t=e.xyz.length,r=e.xyz.nchunks,n=`gspline
element vertex ${t}
element chunks ${r}
element chunkSize ${e.chunkSize}
element typeChunks ${e.isDynamicChunks?"dynamic":"static"}
property xyz ${e.xyz.method}
property color ${e.color.method}
property opacity ${e.opacity.method}
property scaling ${e.scaling.method}
property quaternion ${e.quaternion.method}`;if(e.harmonics&&e.harmonics.length>0)for(let _=0;_<e.harmonics.length;_++)n=`${n}
property harmonics_${_} ${e.harmonics[_].method}`;n=`${n}
end_header
`;let i=new TextEncoder().encode(n),o=r*2*4,a=e.xyz.quantized.data.buffer.byteLength,s=e.xyz instanceof pi?o:0,l=e.color.quantized.data.buffer.byteLength,u=e.color instanceof pi?o:0,d=e.opacity.quantized.data.buffer.byteLength,c=e.opacity instanceof pi?o:0,h=e.scaling.quantized.data.buffer.byteLength,f=e.scaling instanceof pi?o:0,m=e.quaternion.quantized.data.buffer.byteLength,p=e.quaternion instanceof pi?o:0,g=e.variableChunkSize?Uint16Array.from(e.variableChunkSize):void 0,v=g?g.byteLength:0,b=i.byteLength+v+a+s+l+u+d+c+h+f+m+p,y=0,x=0;if(e.harmonics&&e.harmonics.length>0)for(let _=0;_<e.harmonics.length;_++)y+=e.harmonics[_].quantized.data.buffer.byteLength,x+=e.harmonics[_]instanceof pi?o:0;y=0,x=0,b+=y+x;let S=new Uint8Array(b),w=0;if(S.set(i,w),w+=i.byteLength,v>0&&(S.set(new Uint8Array(g.buffer),w),w+=v),e.xyz instanceof pi&&(S.set(new Uint8Array(e.xyz.minmaxMatrix.data.buffer),w),w+=o),S.set(new Uint8Array(e.xyz.quantized.data.buffer),w),w+=a,e.color instanceof pi&&(S.set(new Uint8Array(e.color.minmaxMatrix.data.buffer),w),w+=o),S.set(new Uint8Array(e.color.quantized.data.buffer),w),w+=l,e.opacity instanceof pi&&(S.set(new Uint8Array(e.opacity.minmaxMatrix.data.buffer),w),w+=o),S.set(new Uint8Array(e.opacity.quantized.data.buffer),w),w+=d,e.scaling instanceof pi&&(S.set(new Uint8Array(e.scaling.minmaxMatrix.data.buffer),w),w+=o),S.set(new Uint8Array(e.scaling.quantized.data.buffer),w),w+=h,e.quaternion instanceof pi&&(S.set(new Uint8Array(e.quaternion.minmaxMatrix.data.buffer),w),w+=o),S.set(new Uint8Array(e.quaternion.quantized.data.buffer),w),w+=m,y>0&&e.harmonics&&e.harmonics.length>0)for(let _=0;_<e.harmonics.length;_++){let C=e.harmonics[_];C instanceof pi&&(S.set(new Uint8Array(C.minmaxMatrix.data.buffer),w),w+=o),S.set(new Uint8Array(C.quantized.data.buffer),w),w+=C.quantized.data.byteLength}return new Yz(S.buffer)}},b_t="AGFzbQEAAAAADwhkeWxpbmsuMAEEAAAAAAETA2AAAGAIf39/f39/f38AYAABfwISAQNlbnYGbWVtb3J5AgMAgIAEAwQDAAECBzkDEV9fd2FzbV9jYWxsX2N0b3JzAAALc29ydEluZGV4ZXMAARNlbXNjcmlwdGVuX3Rsc19pbml0AAIK3gMDAwABC9IDAwF/BnwBfgJAIAdFDQAgAysDUCEMIAMrAzAhDSADKwMQIQ5BACEDRP///////+9/IQtEAAAAAAAAEAAhCgNAIAIgA0ECdGoCfyAOIAEgA0EMbGoiCCoCALuiIA0gCCoCBLuioCAMIAgqAgi7oqBEAAAAAAAAsECiIgmZRAAAAAAAAOBBYwRAIAmqDAELQYCAgIB4CzYCACAJIAsgCSALYxshCyAJIAogCSAKZBshCiADQQFqIgMgB0cNAAsgB0UNACAGuCAKIAuhoyEJQQAhAwNAAn8gCSACIANBAnRqIgEoAgC3IAuhoiIKmUQAAAAAAADgQWMEQCAKqgwBC0GAgICAeAshCCABIAg2AgAgBCAIQQJ0aiIBIAEoAgBBAWo2AgAgA0EBaiIDIAdHDQALCyAGQQJPBEAgBCgCACEIQQEhAwNAIAQgA0ECdGoiASABKAIAIAhqIgg2AgAgA0EBaiIDIAZHDQALCyAHQQFrIgGtIQ8DQCAEIAIgD6dBAnQiA2ooAgBBAnRqIgcgBygCAEEBayIHNgIAIAUgASAHa0ECdGogACADaigCADYCACAPUCEDIA9CAX0hDyADRQ0ACyAGBEAgBEEAIAZBAnT8CwALCwQAQQAL",_f=class{};Ma(_f,"DepthMapRange",65536),Ma(_f,"MemoryPageSize",65536),Ma(_f,"BytesPerFloat",4),Ma(_f,"BytesPerInt",4);function x_t(e){let t,r,n,i,o,a,s,l,u,d,c,h,f,m,p,g;function v(M){let I=new Float64Array(d,a,16);for(let T=0;T<16;T++)I[T]=M[T];let O;if(n>1){t.exports.sortIndexes(i,o,u,a,s,l,h.DepthMapRange,n);let T=new Uint32Array(n);O=T.buffer,T.set(new Uint32Array(d,l,n))}else if(n===1){let T=new Uint32Array(n);T[0]=new Uint32Array(d,i,r)[0],O=T.buffer}else O=new ArrayBuffer(0);e.postMessage({sortDone:!0,indexesBuffer:O},[O])}function b(M,I,O){let T=new Float32Array(d,o,r*3);n=0;let D=new Uint32Array(d,i,r);for(let N=0;N<O.length-1;N++){let k=I[N],R=M[N].elements,z=k.filter($=>$.enabled&&$.mode==="Include").map($=>$.type==="Box"?w($):E($)),j=k.filter($=>$.enabled&&$.mode==="Exclude").map($=>$.type==="Box"?w($):E($));for(let $=O[N];$<O[N+1];$++){let U=f[$*3],H=f[$*3+1],V=f[$*3+2];if((z.length===0||x(U,H,V,z))&&(j.length===0||!x(U,H,V,j))){let Q=1/(R[3]*U+R[7]*H+R[11]*V+R[15]);T[n*3]=(R[0]*U+R[4]*H+R[8]*V+R[12])*Q,T[n*3+1]=(R[1]*U+R[5]*H+R[9]*V+R[13])*Q,T[n*3+2]=(R[2]*U+R[6]*H+R[10]*V+R[14])*Q,D[n]=$,n++}}}}function y(M,I){let O=[],T=I.filter(k=>k.enabled&&k.mode==="Include").map(k=>k.type==="Box"?w(k):E(k)),D=I.filter(k=>k.enabled&&k.mode==="Exclude").map(k=>k.type==="Box"?w(k):E(k)),N=M.length;for(let k=0;k<N;k+=3){let R=M[k],z=M[k+1],j=M[k+2];(T.length===0||x(R,z,j,T))&&(D.length===0||!x(R,z,j,D))||O.push(k/3)}return console.log(O),O}function x(M,I,O,T,D){return T[D==="Intersect"?"every":"some"](N=>{let k=S(M,I,O,N.invRotationMatrix,N.cropCenter);return Array.isArray(N)?C(k.x,k.y,k.z,N):A(k.x,k.y,k.z,N)})}function S(M,I,O,T,D){let N=M-D[0],k=I-D[1],R=O-D[2],z=1/(T[3]*N+T[7]*k+T[11]*R+T[15]);return{x:(T[0]*N+T[4]*k+T[8]*R+T[12])*z+D[0],y:(T[1]*N+T[5]*k+T[9]*R+T[13])*z+D[1],z:(T[2]*N+T[6]*k+T[10]*R+T[14])*z+D[2]}}function w(M){let I=M.cropSize[0]/2,O=M.cropSize[1]/2,T=M.cropSize[2]/2,D=[M.cropCenter[0]-I,M.cropCenter[1]-O,M.cropCenter[2]-T,M.cropCenter[0]+I,M.cropCenter[1]+O,M.cropCenter[2]+T],N=_(M.cropRotation);return Object.assign(D,{invRotationMatrix:N,cropCenter:M.cropCenter})}function _(M){let I=[],O=M[0]*Math.PI/180,T=M[1]*Math.PI/180,D=M[2]*Math.PI/180,N=Math.cos(O),k=Math.sin(O),R=Math.cos(T),z=Math.sin(T),j=Math.cos(D),$=Math.sin(D),U=N*j,H=N*$,V=k*j,Q=k*$;return I[0]=R*j,I[1]=-R*$,I[2]=z,I[4]=H+V*z,I[5]=U-Q*z,I[6]=-k*R,I[8]=Q-U*z,I[9]=V+H*z,I[10]=N*R,I[12]=0,I[13]=0,I[14]=0,I[3]=0,I[7]=0,I[11]=0,I[15]=1,I}function C(M,I,O,T){return M>=T[0]&&M<=T[3]&&I>=T[1]&&I<=T[4]&&O>=T[2]&&O<=T[5]}function E(M){let I=2/M.cropSize[0],O=2/M.cropSize[1],T=2/M.cropSize[2],D=_(M.cropRotation);return{invRadiusX:I,invRadiusY:O,invRadiusZ:T,cropCenter:M.cropCenter,invRotationMatrix:D}}function A(M,I,O,T){let D=(M-T.cropCenter[0])*T.invRadiusX,N=(I-T.cropCenter[1])*T.invRadiusY,k=(O-T.cropCenter[2])*T.invRadiusZ;return D*D+N*N+k*k<=1}e.onmessage=M=>{if(M.data.getCroppedIndexes){let I=new Uint32Array(y(new Float32Array(M.data.positions),M.data.crops)).buffer;e.postMessage({outOfBoundsIndexes:I},[I])}else if(M.data.positions)c=M.data.positions,f=new Float32Array(c),p=M.data.meshMatrixWorlds,g=M.data.cropsArray,m=M.data.meshIndexIntervals,b(p,g,m),e.postMessage({sortSetupComplete:!0});else if(M.data.sort||M.data.newMatrixWorlds||M.data.newCropsArray)(M.data.newMatrixWorlds||M.data.newCropsArray)&&(g=M.data.newCropsArray||g,p=M.data.newMatrixWorlds||p,b(p,g,m)),v(M.data.sort.view,M.data.sort.cameraPosition);else if(M.data.init){h=M.data.init.Constants,r=M.data.init.splatCount;let I=h.BytesPerInt,O=h.BytesPerFloat*3,T=new Uint8Array(M.data.init.sorterWasmBytes),D=I+O,N=r*D,k=r*h.BytesPerInt*2+h.DepthMapRange*h.BytesPerInt*2,R=h.MemoryPageSize*32,z=N+k+R,j=Math.floor(z/h.MemoryPageSize)+1,$={module:{},env:{memory:new WebAssembly.Memory({initial:j*2,maximum:j*3,shared:!0})}};WebAssembly.compile(T).then(U=>WebAssembly.instantiate(U,$)).then(U=>{t=U,i=0,o=r*I,a=o+r*O,u=a+16*h.BytesPerFloat*2,s=u+r*h.BytesPerInt,l=s+h.DepthMapRange*h.BytesPerInt,d=$.env.memory.buffer,e.postMessage({sortSetupPhase1Complete:!0})})}}}function w_t(e){let t=new Worker(URL.createObjectURL(new Blob(["(",x_t.toString(),")(self)"],{type:"application/javascript"}))),r=atob(b_t),n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return t.postMessage({init:{sorterWasmBytes:n.buffer,splatCount:e,Constants:{BytesPerFloat:_f.BytesPerFloat,BytesPerInt:_f.BytesPerInt,DepthMapRange:_f.DepthMapRange,MemoryPageSize:_f.MemoryPageSize}}}),t}var ZR=function(){let e=new Float32Array(1),t=new Int32Array(e.buffer);return function(r){return e[0]=r,t[0]}}(),S_t=function(e,t,r,n){return e+(t<<8)+(r<<16)+(n<<24)},vA=new ue,tE=class extends Fa{constructor(e,t,r,n,i=!1,o=1,a,s){super(r,n),this.splatCount=t,this.meshIndexIntervals=a,this.meshMatrixWorlds=s,this.splatBuffers=e,this.geometry=r,this.material=n,this.splatDataTextures=null,this.halfPrecisionCovariancesOnGPU=i,this.devicePixelRatio=o,this.resetLocalSplatDataAndTexturesFromSplatBuffer()}static buildMesh(e,t,r=!1,n=1,i,o){let a=tE.buildGeomtery(t),s=tE.buildMaterial(i);return new tE(e,t,a,s,r,n,i,o)}static buildMaterial(e){let t=`
            precision highp float;
            #include <common>

            attribute uint splatIndex;

            uniform highp sampler2D covariancesTexture;
            uniform highp usampler2D centersColorsTexture;
            uniform vec2 focal;
            uniform vec2 viewport;
            uniform vec2 basisViewport;
            uniform vec2 covariancesTextureSize;
            uniform vec2 centersColorsTextureSize;
						uniform highp sampler2D meshMatrixWorldsTexture;
						uniform uint meshIndexIntervals[257];
						uniform float orthoZoom;

            varying vec4 vColor;
            varying vec2 vUv;

            varying vec2 vPosition;

            const vec4 encodeNorm4 = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0);
            const uvec4 mask4 = uvec4(uint(0x000000FF), uint(0x0000FF00), uint(0x00FF0000), uint(0xFF000000));
            const uvec4 shift4 = uvec4(0, 8, 16, 24);
            vec4 uintToRGBAVec (uint u) {
               uvec4 urgba = mask4 & u;
               urgba = urgba >> shift4;
               vec4 rgba = vec4(urgba) * encodeNorm4;
               return rgba;
            }

            vec2 getDataUV(in int stride, in int offset, in vec2 dimensions) {
                vec2 samplerUV = vec2(0.0, 0.0);
                float d = float(splatIndex * uint(stride) + uint(offset)) / dimensions.x;
                samplerUV.y = float(floor(d)) / dimensions.y;
                samplerUV.x = fract(d);
                return samplerUV;
            }

            void main () {
                uvec4 sampledCenterColor = texture(centersColorsTexture, getDataUV(1, 0, centersColorsTextureSize));
                vec3 splatCenter = uintBitsToFloat(uvec3(sampledCenterColor.gba));
                vColor = uintToRGBAVec(sampledCenterColor.r);

                vPosition = position.xy * 2.0;

								uint meshIndex;
								for (int i = 1; i < 257; i++) {
									if (splatIndex < meshIndexIntervals[i]) {
										meshIndex = uint(i - 1);
										break;
									}
								}

								float strideMulmeshIndex = float(4u*meshIndex);
								float meshMatrixWorldsTextureLength = float(256*4);

								mat4 modelMat = mat4(
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+0.0)/meshMatrixWorldsTextureLength, 0)),
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+1.0)/meshMatrixWorldsTextureLength, 0)),
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+2.0)/meshMatrixWorldsTextureLength, 0)),
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+3.0)/meshMatrixWorldsTextureLength, 0))
								);
								mat4 modelViewMat = viewMatrix * modelMat;
								vec4 viewCenter = modelViewMat * vec4(splatCenter, 1.0); 
                vec4 clipCenter = projectionMatrix * viewCenter;

                vec2 sampledCovarianceA = texture(covariancesTexture, getDataUV(3, 0, covariancesTextureSize)).rg;
                vec2 sampledCovarianceB = texture(covariancesTexture, getDataUV(3, 1, covariancesTextureSize)).rg;
                vec2 sampledCovarianceC = texture(covariancesTexture, getDataUV(3, 2, covariancesTextureSize)).rg;

                vec3 cov3D_M11_M12_M13 = vec3(sampledCovarianceA.rg, sampledCovarianceB.r);
                vec3 cov3D_M22_M23_M33 = vec3(sampledCovarianceB.g, sampledCovarianceC.rg);

                // Compute the 2D covariance matrix from the upper-right portion of the 3D covariance matrix
                mat3 Vrk = mat3(
                    cov3D_M11_M12_M13.x, cov3D_M11_M12_M13.y, cov3D_M11_M12_M13.z,
                    cov3D_M11_M12_M13.y, cov3D_M22_M23_M33.x, cov3D_M22_M23_M33.y,
                    cov3D_M11_M12_M13.z, cov3D_M22_M23_M33.y, cov3D_M22_M23_M33.z
                );
                float s = 1.0 / (viewCenter.z * viewCenter.z);

                mat3 W = transpose(mat3(modelViewMat));
                mat3 T = orthoZoom > 0.0 ? W : W * mat3(
									focal.x / viewCenter.z, 0., -(focal.x * viewCenter.x) * s,
									0., focal.y / viewCenter.z, -(focal.y * viewCenter.y) * s,
									0., 0., 0.
								);
                mat3 cov2Dm = transpose(T) * Vrk * T;
                cov2Dm[0][0] += 0.3;
                cov2Dm[1][1] += 0.3;

                // We are interested in the upper-left 2x2 portion of the projected 3D covariance matrix because
                // we only care about the X and Y values. We want the X-diagonal, cov2Dm[0][0],
                // the Y-diagonal, cov2Dm[1][1], and the correlation between the two cov2Dm[0][1]. We don't
                // need cov2Dm[1][0] because it is a symetric matrix.
                vec3 cov2Dv = vec3(cov2Dm[0][0], cov2Dm[0][1], cov2Dm[1][1]);

                vec3 ndcCenter = clipCenter.xyz / clipCenter.w;

                // We now need to solve for the eigen-values and eigen vectors of the 2D covariance matrix
                // so that we can determine the 2D basis for the splat. This is done using the method described
                // here: https://people.math.harvard.edu/~knill/teaching/math21b2004/exhibits/2dmatrices/index.html
                //
                // This is a different approach than in the original work at INRIA. In that work they compute the
                // max extents of the 2D covariance matrix in screen space to form an axis aligned bounding rectangle
                // which forms the geometry that is actually rasterized. They then use the inverse 2D covariance
                // matrix (called 'conic') to determine fragment opacity.
                float a = cov2Dv.x;
                float d = cov2Dv.z;
                float b = cov2Dv.y;
                float D = a * d - b * b;
                float trace = a + d;
                float traceOver2 = 0.5 * trace;
                float term2 = sqrt(trace * trace / 4.0 - D);
                float eigenValue1 = traceOver2 + term2;
								float eigenValue2 = max(traceOver2 - term2, 0.00); // prevent negative eigen value

                const float maxSplatSize = 1024.0;
                vec2 eigenVector1 = normalize(vec2(b, eigenValue1 - a));
                // since the eigen vectors are orthogonal, we derive the second one from the first
                vec2 eigenVector2 = vec2(eigenVector1.y, -eigenVector1.x);
                vec2 basisVector1 = eigenVector1 * min(sqrt(2.0 * eigenValue1), maxSplatSize);
                vec2 basisVector2 = eigenVector2 * min(sqrt(2.0 * eigenValue2), maxSplatSize);

                vec2 ndcOffset = vec2(vPosition.x * basisVector1 + vPosition.y * basisVector2) * basisViewport;

								if (orthoZoom > 0.0) {
									ndcOffset *= orthoZoom;
								}

                gl_Position = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
            }`,r=`
            precision highp float;
            #include <common>

            uniform vec3 debugColor;

            varying vec4 vColor;
            varying vec2 vUv;

            varying vec2 vPosition;
						layout(location = 1) out vec4 gVelocity; 

            void main () {
                // compute the negative squared distance from the center of the splat to the
                // current fragment in the splat's local space.
                float A = -dot(vPosition, vPosition);
                if (A < -4.0) discard;
                vec3 color = vColor.rgb;
                A = exp(A) * vColor.a;
                gl_FragColor = vec4(color.rgb, A);
								gVelocity = vec4(0.0); // so it is ignored by TAA
            }`,n={covariancesTexture:{type:"t",value:null},centersColorsTexture:{type:"t",value:null},meshIndexIntervals:{value:e},meshMatrixWorldsTexture:{type:"t",value:null},focal:{type:"v2",value:new ue},viewport:{type:"v2",value:new ue},basisViewport:{type:"v2",value:new ue},debugColor:{type:"v3",value:new Bt},covariancesTextureSize:{type:"v2",value:new ue(1024,1024)},centersColorsTextureSize:{type:"v2",value:new ue(1024,1024)},orthoZoom:{type:"f",value:-1}};return new Sn({uniforms:n,vertexShader:t,fragmentShader:r,transparent:!0,alphaTest:1,blending:Am,depthTest:!0,depthWrite:!1,side:ms})}static buildGeomtery(e){let t=new Nt;t.setIndex([0,1,2,0,2,3]);let r=new Float32Array(4*3),n=new Kt(r,3);t.setAttribute("position",n),n.setXYZ(0,-1,-1,0),n.setXYZ(1,-1,1,0),n.setXYZ(2,1,1,0),n.setXYZ(3,1,-1,0),n.needsUpdate=!0;let i=new Kae().copy(t),o=new Uint32Array(e),a=new Iae(o,1,!1);return a.setUsage(rrt),i.setAttribute("splatIndex",a),i.instanceCount=e,i}resetLocalSplatDataAndTexturesFromSplatBuffer(){this.updateLocalSplatDataFromSplatBuffer(),this.allocateAndStoreLocalSplatDataInTextures()}updateLocalSplatDataFromSplatBuffer(){this.splatBuffers.forEach(n=>n.buildPreComputedBuffers()),this.covariances=new Float32Array(this.splatCount*6),this.colors=new Uint8Array(this.splatCount*4),this.centers=new Float32Array(this.splatCount*3);let e=0,t=0,r=0;for(let n of this.splatBuffers){let i=n.nsplats;this.colors.subarray(e,e+i*4).set(n.colorsA),e+=i*4,this.centers.subarray(t,t+i*3).set(n.decoded.xyz.denormDequant().data),t+=i*3,this.covariances.subarray(r,r+i*6).set(new Float32Array(n.precomputedCovarianceBufferData)),r+=i*6}}allocateAndStoreLocalSplatDataInTextures(){let e=this.splatCount,t=new ue(4096,1024);for(;t.x*t.y*2<e*6;)t.y*=2;let r=new ue(4096,1024);for(;r.x*r.y*4<e*4;)r.y*=2;let n,i;if(this.halfPrecisionCovariancesOnGPU){i=new Uint16Array(t.x*t.y*2);for(let d=0;d<this.covariances.length;d++)i[d]=Mlt.toHalfFloat(this.covariances[d]);n=new gf(i,t.x,t.y,ZM,Xm)}else i=new Float32Array(t.x*t.y*2),i.set(this.covariances),n=new gf(i,t.x,t.y,ZM,Ba);n.needsUpdate=!0,this.material.uniforms.covariancesTexture.value=n,this.material.uniforms.covariancesTextureSize.value.copy(t);let o=new Uint32Array(r.x*r.y*4);for(let d=0;d<e;d++){let c=d*4,h=d*3,f=d*4;o[f]=S_t(this.colors[c],this.colors[c+1],this.colors[c+2],this.colors[c+3]),o[f+1]=ZR(this.centers[h]),o[f+2]=ZR(this.centers[h+1]),o[f+3]=ZR(this.centers[h+2])}let a=new gf(o,r.x,r.y,cae,qd);a.internalFormat="RGBA32UI",a.needsUpdate=!0,this.material.uniforms.centersColorsTexture.value=a,this.material.uniforms.centersColorsTextureSize.value.copy(r);let s=256*4,l=new Float32Array(256*16);for(let d=0;d<this.meshMatrixWorlds.length;d++)l.set(this.meshMatrixWorlds[d].elements,d*16);let u=new gf(l,s,1,qs,Ba);u.needsUpdate=!0,this.material.uniforms.meshMatrixWorldsTexture.value=u,this.material.uniformsNeedUpdate=!0,this.splatDataTextures={covariances:{data:i,texture:n,size:t},centerColors:{data:o,texture:a,size:r},meshMatrixWorlds:{data:l,texture:u}}}updateIndexes(e){let t=this.geometry;t.attributes.splatIndex.set(e),t.attributes.splatIndex.needsUpdate=!0,t.instanceCount=e.length}updateUniforms(e,t,r,n){this.splatCount>0&&(vA.set(e.x*this.devicePixelRatio,e.y*this.devicePixelRatio),this.material.uniforms.viewport.value.copy(vA),this.material.uniforms.basisViewport.value.set(2/vA.x,2/vA.y),this.material.uniforms.focal.value.set(t,r),this.material.uniforms.orthoZoom.value=n,this.material.uniformsNeedUpdate=!0)}getSplatDataTextures(){return this.splatDataTextures}getSplatCount(){return this.splatCount}getCenters(){return this.centers}getColors(){return this.colors}getCovariances(){return this.covariances}dispose(){this.geometry.dispose(),this.material.dispose(),this.splatDataTextures&&(this.splatDataTextures.covariances.texture.dispose(),this.splatDataTextures.centerColors.texture.dispose(),this.splatDataTextures.meshMatrixWorlds.texture.dispose())}},__t=class{constructor(e={}){Ma(this,"updateSplatMeshUniforms",function(){let t=new ue;return function(){this.splatMesh!==null&&this.splatMesh.getSplatCount()>0&&(this.renderer.getSize(t),this.cameraFocalLengthX=this.camera.projectionMatrix.elements[0]*this.devicePixelRatio*t.x*.45,this.cameraFocalLengthY=this.camera.projectionMatrix.elements[5]*this.devicePixelRatio*t.y*.45,this.splatMesh.updateUniforms(t,this.cameraFocalLengthX,this.cameraFocalLengthY,this.camera.isPerspectiveCamera?-1:this.camera.zoom*this.devicePixelRatio))}}()),Ma(this,"updateView",function(){let t=new qe,r=[],n=new F(0,0,-1),i=new F(0,0,-1),o=new F,a=new F;return function(s=!1){let l=this.updateMatrixWorldsInWorkerIfNeeded(),u=this.cropsChanged();if(!s){i.set(0,0,-1).applyQuaternion(this.camera.quaternion);let c=!1,h=!1;if(i.dot(n)<=.95&&(c=!0),a.copy(this.camera.position).sub(o).length()>=1&&(h=!0),!c&&!h&&!l&&!u)return}o.copy(this.camera.position),n.copy(i),t.copy(this.camera.matrixWorld).invert(),t.premultiply(this.camera.perspCamera.projectionMatrix),r[0]=this.camera.position.x,r[1]=this.camera.position.y,r[2]=this.camera.position.z;let d={sort:{view:t.elements,cameraPosition:r,splatRenderCount:this.splatRenderCount,splatSortCount:this.splatRenderCount},...l?{newMatrixWorlds:this.meshMatrixWorlds}:{},...u?{newCropsArray:this.cropsArray}:{}};this.sortRunning?this.queuedMessage=d:(this.queuedMessage=null,this.sortRunning=!0,this.sortWorker.postMessage(d))}}()),this.scene=e.scene,this.currentPage=null,this.renderer=e.renderer,this.devicePixelRatio=window.devicePixelRatio,this.sortWorker=null,this.splatRenderCount=0,this.splatSortCount=0,this.splatMesh=null,this.sortRunning=!1,this.splatRenderingInitialized=!1,this.meshMatrixWorlds=null,this.meshMatrixWorldsOld=null,this.cropsArray=null,this.splatEntries=null,this.queuedMessage=null}get camera(){return this.scene.activeCamera}reloadSplats(){this.splatRenderingInitialized=!1;let e=this.loadSplat();this.renderer.pipeline.opaquePass.splatViewer=e?this:null}loadSplat(e={}){this.activePage=this.scene.activePage,e.position&&(e.position=new F().fromArray(e.position)),e.orientation&&(e.orientation=new Jt().fromArray(e.orientation)),e.halfPrecisionCovariances=!!e.halfPrecisionCovariances;let t=[];if(this.splatEntries=t,this.activePage.traverseEntity(o=>{if(o.data.type==="Splat"){let a=o.visible;o.traverseAncestors(s=>{a&&(a=s.visible)}),a&&t.push(o)}}),this.splatMesh&&this.splatMesh.dispose(),t.length===0)return this.splatMesh=null,!1;this.meshMatrixWorlds=t.map(o=>o.matrixWorld),this.meshMatrixWorldsOld=t.map(o=>o.matrixWorld.clone()),this.cropsArray=t.map(o=>o.data.crops.map(a=>a.data));let r=t.map(o=>new Yz(new Uint8Array(o.data.buffer).buffer)),n=0,i=[0];for(let o of r)n+=o.getSplatCount(),i.push(n);return this.setupSplatMesh(r,n,e.position,e.orientation,e.halfPrecisionCovariances,this.devicePixelRatio,i,this.meshMatrixWorlds),this.setupSortWorker(n),!0}updateMatrixWorldsInWorkerIfNeeded(){let e=this.splatDataTextures.meshMatrixWorlds.data;for(let t=0;t<this.meshMatrixWorlds.length;t++)e.set(this.meshMatrixWorlds[t].elements,t*16);return this.splatDataTextures.meshMatrixWorlds.texture.needsUpdate=!0,this.meshMatrixWorlds.every((t,r)=>t.equals(this.meshMatrixWorldsOld[r]))?!1:(this.meshMatrixWorldsOld=this.meshMatrixWorlds.map(t=>t.clone()),!0)}cropsChanged(){let e=!1;return this.splatEntries.forEach((t,r)=>{var n;t.data.crops.forEach((i,o)=>{this.cropsArray[r][o]===void 0?(e=!0,this.cropsArray[r][o]=i.data):Object.entries(i.data).forEach(([a,s])=>{var l;Array.isArray(s)&&s.some((u,d)=>u!==this.cropsArray[r][o][a][d])?(e=!0,this.cropsArray[r][o][a]=s):s!==((l=this.cropsArray[r][o])==null?void 0:l[a])&&(e=!0,this.cropsArray[r][o][a]=s)})}),t.data.crops.length!==((n=this.cropsArray[r])==null?void 0:n.length)&&(this.cropsArray[r].length=t.data.crops.length,e=!0)}),e}setupSplatMesh(e,t,r=new F,n=new Jt,i=!1,o=1,a,s){this.splatMesh=tE.buildMesh(e,t,i,o,a,s),this.splatMesh.position.copy(r),this.splatMesh.quaternion.copy(n),this.splatMesh.frustumCulled=!1,this.splatMesh.renderOrder=10,this.updateSplatMeshUniforms(),this.splatRenderCount=t}setupSortWorker(e){this.sortWorker=w_t(e),this.sortWorker.onmessage=t=>{var r;t.data.sortDone?(this.sortRunning=!1,(r=this.splatMesh)==null||r.updateIndexes(new Uint32Array(t.data.indexesBuffer)),this.lastSortTime=t.data.sortTime,this.queuedMessage&&(this.sortWorker.postMessage(this.queuedMessage),this.queuedMessage=null)):t.data.sortCanceled?this.sortRunning=!1:t.data.sortSetupPhase1Complete?this.sortWorker.postMessage({positions:this.splatMesh.getCenters().buffer,meshMatrixWorlds:this.splatMesh.meshMatrixWorlds,meshIndexIntervals:this.splatMesh.meshIndexIntervals,cropsArray:this.cropsArray}):t.data.sortSetupComplete&&(this.splatDataTextures=this.splatMesh.getSplatDataTextures(),this.updateView(!0,!0),this.splatRenderingInitialized=!0)}}update(){this.splatRenderingInitialized!==!1&&(this.updateSplatMeshUniforms(),this.updateView())}getSplatMesh(){return this.splatMesh}},Qz=new n_;Qz.wireframe=!0;var uY=new F,XU=class extends Uf{constructor(e,t){super(),this.data=e,this.enableHelpers=!1,this.wireframeState=!1,this.needsTransmissionDirty=!0,this.needsNormalDirty=!0,this._needsTransmission=!1,this._needsNormal=!1,this.geometryCacheChanged=!1,this.splatViewer=null,this.entityByUuid={},this.entityIdentityToEntity={},this.toExpandCloner=new Set,this.toUpdateCloner=new Set,this.pendingCommands=[],this.pathConstraints=new d_t,this.errorPage=new Wf("fdasfa",{...T0.defaultData,name:""}),this.invisibleObjects=new Ay("jflkdsafjasdifjaslk",{...gz.defaultData,visible:!1,name:"buildin invisible"}),this.needsRecomputeInstances=!1,this.init(e,t),this.matrixAutoUpdate=!1}markGeometryCacheDirty(){this.geometryCacheChanged=!0}markNeedsUpdateRendererDirty(){this.needsTransmissionDirty=!0,this.needsNormalDirty=!0}needsTransmission(){return this.needsTransmissionDirty&&(this._needsTransmission=s_t(this),this.needsTransmissionDirty=!1),this._needsTransmission}needsNormal(){return this.needsNormalDirty&&(this._needsNormal=a_t(this),this.needsNormalDirty=!1),this._needsNormal}registerInstanceAndSetUuid(e){let t=e.identity.join("-"),r=this.entityIdentityToEntity[t];r&&(e.uuid=r.uuid),this.entityIdentityToEntity[t]=e,this.entityByUuid[e.uuid]=e}markPenumbraSizeDirty(){for(let e of this.children)e instanceof Wf&&(e.penumbraSizeArrayCache=null)}findInstance(e){return this.entityIdentityToEntity[e.join("-")]}get bgColor(){return this.activePage.bgColor}get postprocessing(){return this.activePage.data.postprocessing}getWithSortKey(e){let t=this.find(e);if(t===void 0)return;let r=[],n=t;for(;n!==this;){let i=n;n=n.parent;let o=n.children.indexOf(i);r.splice(0,0,o)}return{entity:t,sortKey:r}}getAllSorted(e){let t=[];for(let r of e){let n=this.getWithSortKey(r.id);n!==void 0&&t.push(n)}return t.sort((r,n)=>Zgt(r.sortKey,n.sortKey)),t.map(r=>r.entity)}nonExistOrDescendantOf(e,t){let r=this.find(e);if(r===void 0)return!0;for(;r;){if(r.uuid===t)return!0;r=r.parent}return!1}find(e){if(this.activePage&&this.activePage.personalCamera.parent){if(e==="f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCamera")return this.activePage.personalCamera;if(e===yb)return this.activePage.personalCamera}if(e===""||e===void 0)return;let t=this.entityByUuid[e];return t===void 0?this.getObjectByProperty("uuid",e):t}debugEnsureEntity(e){let t=this.find(e);if(t){if(Array.isArray(t.identity)&&this.findInstance(t.identity)===void 0){console.error("not found instance");debugger}}else{console.error("not found");debugger}}addPendingExpandCloner(e){this.toExpandCloner.add(e)}addPendingUpdateCloner(e){this.toUpdateCloner.add(e)}markToExpandCloner(e){this.toExpandCloner.add(e),e.traverseEntityAncestors(t=>{this.toExpandCloner.add(t)})}doPendingExpandCloner(){this.toExpandCloner.forEach(e=>{e.expandCloner(this)}),this.toExpandCloner.clear()}doPendingUpdateCloner(){this.toUpdateCloner.forEach(e=>{var t;(t=e.cloner)==null||t.update()}),this.toUpdateCloner.clear()}doPendingUpdates(){this.doPendingExpandCloner(),this.doPendingUpdateCloner(),this.applyPendingCommands()}addPendingCommand(e){this.pendingCommands.push(e)}applyPendingCommands(){this.pendingCommands.forEach(e=>e()),this.pendingCommands.length=0}updateByLibOp(e,t){e.path.length===1&&e.path[0]==="components"&&e.type===1&&this.createChildrenObjects([{...e.data.asset,id:e.id}],this.invisibleObjects,t)}updateTreeByOp(e,t){var r;if(e.path.length===0&&e.type===7){let n=e.parent===null?this:this.find(e.parent);if(n===void 0)throw new Error("unexpected");let i=this.createObject(e.id,e.data,e.children,n,e.localIndex,t);i.updateVisible(),i.resetBBoxNeedsUpdate(),bu(i)&&Pc(i.parent)&&(i.invalidateUpstreamBooleanData(),i.parent.invalidateDownstreamBooleanData().recomputeBoolean()),this.markNeedsRecomputeInstancesForAncessors(n),this.markNeedsRecomputeInstancesForChildren(i),this.markToExpandCloner(i),this.markPenumbraSizeDirty(),i.updatePathSnapping()}else if(e.path.length===0&&e.type===8){let n=this.find(e.id);if(n===void 0)throw new Error("unexpected");this.markToExpandCloner(n),n.resetBBoxNeedsUpdate(),this.unregisterObject(n);let i=n.parent;this.markNeedsRecomputeInstancesForAncessors(i),this.markNeedsRecomputeInstancesForChildren(n),this.markPenumbraSizeDirty(),n.parent.remove(n),Pc(n.parent)&&(n.parent.invalidateUpstreamBooleanData(),n.parent.invalidateDownstreamBooleanData().recomputeBoolean()),bu(n)&&(n.freeBooleanPointer(),i instanceof R0&&i.invalidateDownstreamBooleanData().recomputeBoolean()),n instanceof WU&&n.detachShape(),this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(n),this.pathConstraints.removeDependencies(n.uuid),n.updatePathSnapping()}else if(e.path.length===0&&e.type===9){let n=this.find(e.id);if(n===void 0)throw new Error("unexpected");this.markNeedsRecomputeInstancesForChildren(n);let i=n.parent;this.markNeedsRecomputeInstancesForAncessors(i),(r=n.cloner)==null||r.resetOnMove(),this.markToExpandCloner(n);let o=e.parent===null?this:this.find(e.parent);if(o===void 0)throw new Error("unexpected");o.add(n),this.markNeedsRecomputeInstancesForAncessors(o),this.markToExpandCloner(n),n.invalidateClonerTransform(n),n.updateVisible(),n.resetBBoxNeedsUpdate(),this.markPenumbraSizeDirty();let a=e.localIndex;o.children.splice(a,0,o.children.pop()),bu(n)&&(n.invalidateUpstreamBooleanData(),Pc(n.parent)?n.parent.invalidateDownstreamBooleanData().recomputeBoolean():i instanceof R0&&i.invalidateDownstreamBooleanData().recomputeBoolean()),n.updatePathSnapping()}this.markNeedsUpdateRendererDirty(),this.markGeometryCacheDirty()}get playPage(){return this.find(this.data.publish.playPage)??this.errorPage}updatePage(e){var t;this.activePage&&this.activePage.onDeactive(),this.activePage=this.errorPage;for(let r of this.children)r instanceof Wf&&(r.visible=r.uuid===e,r.visible&&(this.activePage=r,this.activePage.onActive(this)));this.activePage!==((t=this.splatViewer)==null?void 0:t.activePage)&&this.reloadSplats()}updateEntityByOp(e,t,r,n){if(t.type===0){if(("overrides"in t.props||"component"in t.props)&&this.markNeedsRecomputeInstances(),"visible"in t.props&&this.markPenumbraSizeDirty(),t.path.includes("overrides")&&"states"in t.props){let{rest:o}=t.props;t={...t,props:o},this.markNeedsRecomputeInstances()}t.path[0]==="pathSnapping"&&t.props.pathId!==void 0&&this.pathConstraints.setConstraint(e,t.props.pathId)}let i=this.find(e);if(i)try{o_t(i,t,r,{scene:this,shared:n}),i instanceof Ua&&i.updateGeometryGroupsIfNeeded()}catch(o){console.error(o)}}get activeCamera(){return this.activePage.activeCamera}switchActiveCamera(e){this.activePage.switchActiveCamera(e)}isInvisibleObjects(e){return e===this.invisibleObjects||e.hasAnccestor(this.invisibleObjects)}init(e,t){let r=Object.entries(t.data.lib.components).map((n,i)=>({data:n[1].asset.data,children:n[1].asset.children,id:n[0],fi:i}));this.invisibleObjects.updateState(this.invisibleObjects.data,{scene:this,shared:t}),this.add(this.invisibleObjects),this.createChildrenObjects(r,this.invisibleObjects,t),this.createChildrenObjects(e.objects,this,t),this.updatePage(e.publish.playPage),this.activePage.switchToPlayCamera(),this.expandInstances(t,!0),this.traverseEntity(n=>{Pc(n)&&n.recomputeBoolean(),n instanceof ha&&n.updateUp()}),this.doPendingExpandCloner(),this.applyPendingCommands()}markNeedsRecomputeInstances(){this.needsRecomputeInstances=!0}markNeedsRecomputeInstancesForChildren(e){e.traverseEntity(t=>{(t.data.type==="Component"||t.data.type==="Instance")&&this.markNeedsRecomputeInstances()})}markNeedsRecomputeInstancesForAncessors(e){Dr.is(e)&&(e.data.type==="Component"&&this.markNeedsRecomputeInstances(),e.traverseAncestors(t=>{Dr.is(t)&&t.data.type==="Component"&&this.markNeedsRecomputeInstances()}))}relativeizeInner(e,t,r,n,i,o,a){if(e){let s=n.find(e);s&&s!==n&&i.forInstancesRec(l=>{l.data=iS(l.data,u=>{let d=u.events.data(a.id),c=l.goUp(o);if(c){let h=[...Lse(c.identity),e].join("-"),f=this.entityIdentityToEntity[h];if(f){let m=f.uuid,p=Ra.zoom(d,t);p[r]=m}else console.warn("cannot find instance")}}).data})}}rewriteActions(e,t,r,n,i,o){e.forEach(a=>{a.data.type==="Transition"?this.relativeizeInner(a.data.object,[...t,a.id],"object",r,n,i,o):a.data.type==="Animation"&&this.relativeizeInner(a.data.object,[...t,a.id],"object",r,n,i,o)})}rewriteEventsBeforeGoToPlayMode(){this.traverseEntity(e=>{if(e instanceof Ey&&typeof e.identity=="string"&&e.data.type==="Component")return e.traverseEntity((t,r)=>{t.data.events.forEach(n=>{if(n.data.type==="GameControl"){let i=!1;if(t.forInstancesRec(o=>{o.data=iS(o.data,a=>{o.isInstanceRoot||(a.events.delete(n.id),i=!0)}).data}),i===!1)for(let o of RP.list)this.rewriteActions(n.data.gameActions[o],["gameActions",o],e,t,r,n)}else n.data.type==="Conditional"?(n.data.condition.type==="Distance"?(this.relativeizeInner(n.data.condition.fromObject,["condition"],"fromObject",e,t,r,n),this.relativeizeInner(n.data.condition.toObject,["condition"],"toObject",e,t,r,n)):n.data.condition.type==="State"?this.relativeizeInner(n.data.condition.object,["condition"],"object",e,t,r,n):n.data.condition.type==="Comparison"&&(n.data.condition.lOperand.type==="Property"&&this.relativeizeInner(n.data.condition.lOperand.value[0],["condition","lOperand","value"],0,e,t,r,n),n.data.condition.rOperand.type==="Property"&&this.relativeizeInner(n.data.condition.rOperand.value[0],["condition","rOperand","value"],0,e,t,r,n)),this.rewriteActions(n.data.inActions,["inActions"],e,t,r,n),this.rewriteActions(n.data.outActions,["outActions"],e,t,r,n)):"actions"in n.data&&this.rewriteActions(n.data.actions,["actions"],e,t,r,n)})}),!0})}expandInstances(e,t,r){let n=new Set;this.traverseEntity(i=>{if(i instanceof Ey&&i.isInstanceRoot)return i.expandInstanceChildren({scene:this,shared:e,pendingDeletes:n}),t||i.resetBBoxNeedsUpdate(),r&&i.traverseEntity(o=>{r.addClip(o)}),!0});for(let i of n)this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(i),qU(i)}recomputeInstances(e,t){this.needsRecomputeInstances&&(this.needsRecomputeInstances=!1,this.traverseEntity(r=>{r instanceof Ey&&r.isInstanceRoot&&(r.component=void 0)}),this.expandInstances(e,!1,t))}disposeAndUnregisterEntityRecursivelyIfNotReregistered(e){e.traverseEntity(t=>{let r=typeof t.identity=="string"?t.identity:t.identity.join("-");this.entityIdentityToEntity[r]===t&&(delete this.entityByUuid[t.uuid],delete this.entityIdentityToEntity[r]),t.dispose()})}clearScene(){for(let e of this.children)Dr.is(e)&&e.disposeRecursively();this.children.length=0}resetAfterClear(e,t){this.init(e,t)}raycast(e){return this.raycast1(e,!1)}raycast1(e,t){let r=[],n=i=>{for(let o of i.children){let a=o.cloner;if(Dr.is(o)&&!o.raycastLock&&(o.visible||a!=null&&a.object.data.visible))if(t===!0&&o.isInstanceRoot){let s=[];if(e.intersectObject(o,!0,s),s.length){let l=s[0];l.object=o,l.point.applyMatrix4(l.object.matrixWorld);let u=o.matrixWorld.clone().invert();l.point.applyMatrix4(u),r.push(l)}}else(bu(o)||Uz(o)&&this.enableHelpers&&o.objectHelper.visible)&&(e.intersectObject(o,!1,r),Kz(o,e,r)),n(o)}};return n(this),r}raycastWithClones(e){let t=[],r=n=>{for(let i of n.children){let o=i.cloner;Dr.is(i)&&(i.visible||o!=null&&o.object.data.visible)&&((bu(i)||Uz(i)&&this.enableHelpers&&i.objectHelper.visible)&&(e.intersectObject(i,!1,t),Kz(i,e,t,!0)),r(i))}};return r(this),t}forEachEntity(e){for(let t of this.children)Dr.is(t)&&e(t)}traverseConcreteEntity(e){for(let t of this.children)Dr.is(t)&&t.isConcreteEntity&&t.traverseEntity(e)}traverseEntity(e){for(let t of this.children)Dr.is(t)&&t.traverseEntity(e)}updateFont(e,t){this.traverseEntity(r=>{if(r instanceof Ua&&r.data.type==="Mesh"&&r.data.geometry.type==="TextGeometry"&&r.data.geometry.font===e){let n=r.geometry,i=r.data.geometry;n.updateFont(e,t).then(()=>{n.update(i);let o=r.invalidateDownstreamBooleanData();Pc(o)&&o.recomputeBoolean()})}})}traverseObject(e){for(let t of this.children)cS.is(t)&&t.traverseObject(e)}traverseVisibleEntity(e){for(let t of this.children)Dr.is(t)&&t.visible&&t.traverseVisibleEntity(e)}dispose(){this.clearScene()}createChildrenObjects(e,t,r){let n=0;for(let i of e)this.createObject(i.id,i.data,i.children,t,n,r),n+=1}registerObjectCreatedInLegacy(e){this.entityByUuid[e.uuid]=e}unregisterObject(e){delete this.entityByUuid[e.uuid];for(let t of e.children)this.unregisterObject(t)}createObject(e,t,r,n,i,o){var l;let a={scene:this,shared:o},s=KU(e,t,a);return s&&(this.entityByUuid[e]=s,n.add(s),n.children.splice(i,0,n.children.pop()),r.length>0&&(s.isInstanceRoot?console.error("instance should not have children!"):this.createChildrenObjects(r,s,o)),s.updateState(t,a),s instanceof Ua&&s.updateGeometryGroupsIfNeeded(),s.updateVisible(),s.cloner&&this.toExpandCloner.add(s),(l=t.pathSnapping)!=null&&l.pathId&&this.pathConstraints.setConstraint(e,t.pathSnapping.pathId)),t.type==="Empty"&&t.animations&&s.traverseEntity(u=>{if(u instanceof Ua&&u.isSkinnedMesh){let d=u.dataPatched;if(d.bones&&d.boneInverses){let c=d.bones.map(m=>this.find(m)),h=d.boneInverses.map(m=>new qe().fromArray(m)),f=new j4(c,h);u.bind(f,u.bindMatrix)}}else u.matrixAutoUpdate=!0}),s}getCenter(e){let t=[];for(let n=0,i=e.length;n<i;++n){let{id:o,recursive:a}=e[n],s=this.find(o),l=a?s.recursiveBBox:s.singleBBox;t.push(...l.vertices)}let r=new ki;return r.setFromPoints(t),r.getCenter(uY),uY}copyMatrixWorld(e,t){if(e===null){t.identity();return}let r=this.find(e);r?t.copy(r.matrixWorld):t.identity()}copyParentMatrixWorld(e,t){var n;if(e===null){t.identity();return}let r=(n=this.find(e))==null?void 0:n.parent;r?t.copy(r.matrixWorld):t.identity()}traverseMaterial(e){this.traverseEntity(t=>{if(t instanceof Ts)if(Array.isArray(t.material))for(let r=0;r<t.material.length;r++)t.material[r]instanceof op&&e(t.material[r]);else t.material instanceof op&&e(t.material)})}updateViewPlaneSize(e,t,r=!1){this.traverseConcreteEntity(n=>{n instanceof ha&&n.setViewplaneSize(e,t,r)})}initializeSplatViewer(e){this.splatViewer=new __t({scene:this,renderer:e}),this.reloadSplats()}reloadSplats(){var e;(e=this.splatViewer)==null||e.reloadSplats()}},rE=(e,t)=>{let r=t.x-e.x,n=t.y-e.y;return Math.sqrt(r*r+n*n)},C_t=(e,t)=>{let r=t.x-e.x,n=t.y-e.y;return E_t(Math.atan2(n,r))},A_t=(e,t,r)=>{let n={x:0,y:0};return r=Zz(r),n.x=e.x-t*Math.cos(r),n.y=e.y-t*Math.sin(r),n},Zz=e=>e*(Math.PI/180),E_t=e=>e*(180/Math.PI),M_t=e=>isNaN(e.buttons)?e.pressure!==0:e.buttons!==0,JR=new Map,cY=e=>{JR.has(e)&&clearTimeout(JR.get(e)),JR.set(e,setTimeout(e,100))},HP=(e,t,r)=>{let n=t.split(/[ ,]+/g),i;for(let o=0;o<n.length;o+=1)i=n[o],e.addEventListener?e.addEventListener(i,r,!1):e.attachEvent&&e.attachEvent(i,r)},dY=(e,t,r)=>{let n=t.split(/[ ,]+/g),i;for(let o=0;o<n.length;o+=1)i=n[o],e.removeEventListener?e.removeEventListener(i,r):e.detachEvent&&e.detachEvent(i,r)},Xue=e=>(e.preventDefault(),e.type.match(/^touch/)?e.changedTouches:e),hY=()=>{if(typeof window>"u")return;let e=window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return{x:e,y:t}},Jz=(e,t)=>{t.top||t.right||t.bottom||t.left?(e.style.top=t.top,e.style.right=t.right,e.style.bottom=t.bottom,e.style.left=t.left):(e.style.left=t.x+"px",e.style.top=t.y+"px")},YU=(e,t,r)=>{let n=Yue(e);for(let i in n)if(n.hasOwnProperty(i))if(typeof t=="string")n[i]=t+" "+r;else{let o="";for(let a=0,s=t.length;a<s;a+=1)o+=t[a]+" "+r+", ";n[i]=o.slice(0,-2)}return n},P_t=(e,t)=>{let r=Yue(e);for(let n in r)r.hasOwnProperty(n)&&(r[n]=t);return r},Yue=e=>{let t={};return t[e]="",["webkit","Moz","o"].forEach(function(r){t[r+e.charAt(0).toUpperCase()+e.slice(1)]=""}),t},ek=(e,t)=>{for(let r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},T_t=(e,t)=>{let r={};for(let n in e)e.hasOwnProperty(n)&&t.hasOwnProperty(n)?r[n]=t[n]:e.hasOwnProperty(n)&&(r[n]=e[n]);return r},eB=(e,t)=>{if(e.length)for(let r=0,n=e.length;r<n;r+=1)t(e[r]);else t(e)},O_t=(e,t,r)=>({x:Math.min(Math.max(e.x,t.x-r),t.x+r),y:Math.min(Math.max(e.y,t.y-r),t.y+r)});typeof window<"u"&&(Que="ontouchstart"in window,Zue=!!window.PointerEvent,Jue=!!window.MSPointerEvent);var Que,Zue,Jue,xx={touch:{start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"},MSPointer:{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}},Gv,hS={};Zue?Gv=xx.pointer:Jue?Gv=xx.MSPointer:Que?(Gv=xx.touch,hS=xx.mouse):Gv=xx.mouse;function vg(){}vg.prototype.on=function(e,t){var r=this,n=e.split(/[ ,]+/g),i;r._handlers_=r._handlers_||{};for(var o=0;o<n.length;o+=1)i=n[o],r._handlers_[i]=r._handlers_[i]||[],r._handlers_[i].push(t);return r};vg.prototype.off=function(e,t){var r=this;return r._handlers_=r._handlers_||{},e===void 0?r._handlers_={}:t===void 0?r._handlers_[e]=null:r._handlers_[e]&&r._handlers_[e].indexOf(t)>=0&&r._handlers_[e].splice(r._handlers_[e].indexOf(t),1),r};vg.prototype.trigger=function(e,t){var r=this,n=e.split(/[ ,]+/g),i;r._handlers_=r._handlers_||{};for(var o=0;o<n.length;o+=1)i=n[o],r._handlers_[i]&&r._handlers_[i].length&&r._handlers_[i].forEach(function(a){a.call(r,{type:i,target:r},t)})};vg.prototype.config=function(e){var t=this;t.options=t.defaults||{},e&&(t.options=T_t(t.options,e))};vg.prototype.bindEvt=function(e,t){var r=this;return r._domHandlers_=r._domHandlers_||{},r._domHandlers_[t]=function(){typeof r["on"+t]=="function"?r["on"+t].apply(r,arguments):console.warn('[WARNING] : Missing "on'+t+'" handler.')},HP(e,Gv[t],r._domHandlers_[t]),hS[t]&&HP(e,hS[t],r._domHandlers_[t]),r};vg.prototype.unbindEvt=function(e,t){var r=this;return r._domHandlers_=r._domHandlers_||{},dY(e,Gv[t],r._domHandlers_[t]),hS[t]&&dY(e,hS[t],r._domHandlers_[t]),delete r._domHandlers_[t],this};var QU=vg;function mo(e,t){return this.identifier=t.identifier,this.position=t.position,this.frontPosition=t.frontPosition,this.collection=e,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(t),this.options.mode==="dynamic"&&(this.options.restOpacity=0),this.id=mo.id,mo.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}mo.prototype=new QU;mo.constructor=mo;mo.id=0;mo.prototype.buildEl=function(e){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)};mo.prototype.stylize=function(){if(this.options.dataOnly)return this;var e=this.options.fadeTime+"ms",t=P_t("borderRadius","50%"),r=YU("transition","opacity",e),n={};return n.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},n.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:"rgba(255, 255, 255, .4)",border:"solid 2px rgba(0, 0, 0, .1)"},n.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:"rgba(255, 255, 255, .8)",border:"solid 2px rgba(0, 0, 0, .1)"},ek(n.el,r),this.options.shape==="circle"&&ek(n.back,t),ek(n.front,t),this.applyStyles(n),this};mo.prototype.applyStyles=function(e){for(var t in this.ui)if(this.ui.hasOwnProperty(t))for(var r in e[t])this.ui[t].style[r]=e[t][r];return this};mo.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)};mo.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)};mo.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()};mo.prototype.show=function(e){var t=this;return t.options.dataOnly||(clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.addToDom(),t.restCallback(),setTimeout(function(){t.ui.el.style.opacity=1},0),t.showTimeout=setTimeout(function(){t.trigger("shown",t.instance),typeof e=="function"&&e.call(this)},t.options.fadeTime)),t};mo.prototype.hide=function(e){var t=this;if(t.options.dataOnly)return t;if(t.ui.el.style.opacity=t.options.restOpacity,clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.removeTimeout=setTimeout(function(){var r=t.options.mode==="dynamic"?"none":"block";t.ui.el.style.display=r,typeof e=="function"&&e.call(t),t.trigger("hidden",t.instance)},t.options.fadeTime),t.options.restJoystick){let r=t.options.restJoystick,n={};n.x=r===!0||r.x!==!1?0:t.instance.frontPosition.x,n.y=r===!0||r.y!==!1?0:t.instance.frontPosition.y,t.setPosition(e,n)}return t};mo.prototype.setPosition=function(e,t){var r=this;r.frontPosition={x:t.x,y:t.y};var n=r.options.fadeTime+"ms",i={};i.front=YU("transition",["top","left"],n);var o={front:{}};o.front={left:r.frontPosition.x+"px",top:r.frontPosition.y+"px"},r.applyStyles(i),r.applyStyles(o),r.restTimeout=setTimeout(function(){typeof e=="function"&&e.call(r),r.restCallback()},r.options.fadeTime)};mo.prototype.restCallback=function(){var e=this,t={};t.front=YU("transition","none",""),e.applyStyles(t),e.trigger("rested",e.instance)};mo.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}};mo.prototype.computeDirection=function(e){var t=e.angle.radian,r=Math.PI/4,n=Math.PI/2,i,o,a;if(t>r&&t<r*3&&!e.lockX?i="up":t>-r&&t<=r&&!e.lockY?i="left":t>-r*3&&t<=-r&&!e.lockX?i="down":e.lockY||(i="right"),e.lockY||(t>-n&&t<n?o="left":o="right"),e.lockX||(t>0?a="up":a="down"),e.force>this.options.threshold){var s={},l;for(l in this.direction)this.direction.hasOwnProperty(l)&&(s[l]=this.direction[l]);var u={};this.direction={x:o,y:a,angle:i},e.direction=this.direction;for(l in s)s[l]===this.direction[l]&&(u[l]=!0);if(u.x&&u.y&&u.angle)return e;(!u.x||!u.y)&&this.trigger("plain",e),u.x||this.trigger("plain:"+o,e),u.y||this.trigger("plain:"+a,e),u.angle||this.trigger("dir dir:"+i,e)}else this.resetDirection();return e};var I_t=mo;function Li(e,t){var r=this;r.nipples=[],r.idles=[],r.actives=[],r.ids=[],r.pressureIntervals={},r.manager=e,r.id=Li.id,Li.id+=1,r.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},r.config(t),(r.options.mode==="static"||r.options.mode==="semi")&&(r.options.multitouch=!1),r.options.multitouch||(r.options.maxNumberOfNipples=1);let n=getComputedStyle(r.options.zone.parentElement);return n&&n.display==="flex"&&(r.parentIsFlex=!0),r.updateBox(),r.prepareNipples(),r.bindings(),r.begin(),r.nipples}Li.prototype=new QU;Li.constructor=Li;Li.id=0;Li.prototype.prepareNipples=function(){var e=this,t=e.nipples;t.on=e.on.bind(e),t.off=e.off.bind(e),t.options=e.options,t.destroy=e.destroy.bind(e),t.ids=e.ids,t.id=e.id,t.processOnMove=e.processOnMove.bind(e),t.processOnEnd=e.processOnEnd.bind(e),t.get=function(r){if(r===void 0)return t[0];for(var n=0,i=t.length;n<i;n+=1)if(t[n].identifier===r)return t[n];return!1}};Li.prototype.bindings=function(){var e=this;e.bindEvt(e.options.zone,"start"),e.options.zone.style.touchAction="none",e.options.zone.style.msTouchAction="none"};Li.prototype.begin=function(){var e=this,t=e.options;if(t.mode==="static"){var r=e.createNipple(t.position,e.manager.getIdentifier());r.add(),e.idles.push(r)}};Li.prototype.createNipple=function(e,t){var r=this,n=r.manager.scroll,i={},o=r.options,a={x:r.parentIsFlex?n.x:n.x+r.box.left,y:r.parentIsFlex?n.y:n.y+r.box.top};if(e.x&&e.y)i={x:e.x-a.x,y:e.y-a.y};else if(e.top||e.right||e.bottom||e.left){var s=document.createElement("DIV");s.style.display="hidden",s.style.top=e.top,s.style.right=e.right,s.style.bottom=e.bottom,s.style.left=e.left,s.style.position="absolute",o.zone.appendChild(s);var l=s.getBoundingClientRect();o.zone.removeChild(s),i=e,e={x:l.left+n.x,y:l.top+n.y}}var u=new I_t(r,{color:o.color,size:o.size,threshold:o.threshold,fadeTime:o.fadeTime,dataOnly:o.dataOnly,restJoystick:o.restJoystick,restOpacity:o.restOpacity,mode:o.mode,identifier:t,position:e,zone:o.zone,frontPosition:{x:0,y:0},shape:o.shape});return o.dataOnly||(Jz(u.ui.el,i),Jz(u.ui.front,u.frontPosition)),r.nipples.push(u),r.trigger("added "+u.identifier+":added",u),r.manager.trigger("added "+u.identifier+":added",u),r.bindNipple(u),u};Li.prototype.updateBox=function(){var e=this;e.box=e.options.zone.getBoundingClientRect()};Li.prototype.bindNipple=function(e){var t=this,r,n=function(i,o){r=i.type+" "+o.id+":"+i.type,t.trigger(r,o)};e.on("destroyed",t.onDestroyed.bind(t)),e.on("shown hidden rested dir plain",n),e.on("dir:up dir:right dir:down dir:left",n),e.on("plain:up plain:right plain:down plain:left",n)};Li.prototype.pressureFn=function(e,t,r){var n=this,i=0;clearInterval(n.pressureIntervals[r]),n.pressureIntervals[r]=setInterval((function(){var o=e.force||e.pressure||e.webkitForce||0;o!==i&&(t.trigger("pressure",o),n.trigger("pressure "+t.identifier+":pressure",o),i=o)}).bind(n),100)};Li.prototype.onstart=function(e){var t=this,r=t.options,n=e;e=Xue(e),t.updateBox();var i=function(o){t.actives.length<r.maxNumberOfNipples?t.processOnStart(o):n.type.match(/^touch/)&&(Object.keys(t.manager.ids).forEach(function(a){if(Object.values(n.touches).findIndex(function(l){return l.identifier===a})<0){var s=[e[0]];s.identifier=a,t.processOnEnd(s)}}),t.actives.length<r.maxNumberOfNipples&&t.processOnStart(o))};return eB(e,i),t.manager.bindDocument(),!1};Li.prototype.processOnStart=function(e){var t=this,r=t.options,n,i=t.manager.getIdentifier(e),o=e.force||e.pressure||e.webkitForce||0,a={x:e.pageX,y:e.pageY},s=t.getOrCreate(i,a);s.identifier!==i&&t.manager.removeIdentifier(s.identifier),s.identifier=i;var l=function(d){d.trigger("start",d),t.trigger("start "+d.id+":start",d),d.show(),o>0&&t.pressureFn(e,d,d.identifier),t.processOnMove(e)};if((n=t.idles.indexOf(s))>=0&&t.idles.splice(n,1),t.actives.push(s),t.ids.push(s.identifier),r.mode!=="semi")l(s);else{var u=rE(a,s.position);if(u<=r.catchDistance)l(s);else{s.destroy(),t.processOnStart(e);return}}return s};Li.prototype.getOrCreate=function(e,t){var r=this,n=r.options,i;return/(semi|static)/.test(n.mode)?(i=r.idles[0],i?(r.idles.splice(0,1),i):n.mode==="semi"?r.createNipple(t,e):(console.warn("Coudln't find the needed nipple."),!1)):(i=r.createNipple(t,e),i)};Li.prototype.processOnMove=function(e){var t=this,r=t.options,n=t.manager.getIdentifier(e),i=t.nipples.get(n),o=t.manager.scroll;if(!M_t(e)){this.processOnEnd(e);return}if(!i){console.error("Found zombie joystick with ID "+n),t.manager.removeIdentifier(n);return}if(r.dynamicPage){var a=i.el.getBoundingClientRect();i.position={x:o.x+a.left,y:o.y+a.top}}i.identifier=n;var s=i.options.size/2,l={x:e.pageX,y:e.pageY};r.lockX&&(l.y=i.position.y),r.lockY&&(l.x=i.position.x);var u=rE(l,i.position),d=C_t(l,i.position),c=Zz(d),h=u/s,f={distance:u,position:l},m,p;if(i.options.shape==="circle"?(m=Math.min(u,s),p=A_t(i.position,m,d)):(p=O_t(l,i.position,s),m=rE(p,i.position)),r.follow){if(u>s){let y=l.x-p.x,x=l.y-p.y;i.position.x+=y,i.position.y+=x,i.el.style.top=i.position.y-(t.box.top+o.y)+"px",i.el.style.left=i.position.x-(t.box.left+o.x)+"px",u=rE(l,i.position)}}else l=p,u=m;var g=l.x-i.position.x,v=l.y-i.position.y;i.frontPosition={x:g,y:v},r.dataOnly||Jz(i.ui.front,i.frontPosition);var b={identifier:i.identifier,position:l,force:h,pressure:e.force||e.pressure||e.webkitForce||0,distance:u,angle:{radian:c,degree:d},vector:{x:g/s,y:-v/s},raw:f,instance:i,lockX:r.lockX,lockY:r.lockY};b=i.computeDirection(b),b.angle={radian:Zz(180-d),degree:180-d},i.trigger("move",b),t.trigger("move "+i.id+":move",b)};Li.prototype.processOnEnd=function(e){var t=this,r=t.options,n=t.manager.getIdentifier(e),i=t.nipples.get(n),o=t.manager.removeIdentifier(i.identifier);!i||(r.dataOnly||i.hide(function(){r.mode==="dynamic"&&(i.trigger("removed",i),t.trigger("removed "+i.id+":removed",i),t.manager.trigger("removed "+i.id+":removed",i),i.destroy())}),clearInterval(t.pressureIntervals[i.identifier]),i.resetDirection(),i.trigger("end",i),t.trigger("end "+i.id+":end",i),t.ids.indexOf(i.identifier)>=0&&t.ids.splice(t.ids.indexOf(i.identifier),1),t.actives.indexOf(i)>=0&&t.actives.splice(t.actives.indexOf(i),1),/(semi|static)/.test(r.mode)?t.idles.push(i):t.nipples.indexOf(i)>=0&&t.nipples.splice(t.nipples.indexOf(i),1),t.manager.unbindDocument(),/(semi|static)/.test(r.mode)&&(t.manager.ids[o.id]=o.identifier))};Li.prototype.onDestroyed=function(e,t){var r=this;r.nipples.indexOf(t)>=0&&r.nipples.splice(r.nipples.indexOf(t),1),r.actives.indexOf(t)>=0&&r.actives.splice(r.actives.indexOf(t),1),r.idles.indexOf(t)>=0&&r.idles.splice(r.idles.indexOf(t),1),r.ids.indexOf(t.identifier)>=0&&r.ids.splice(r.ids.indexOf(t.identifier),1),r.manager.removeIdentifier(t.identifier),r.manager.unbindDocument()};Li.prototype.destroy=function(){var e=this;e.unbindEvt(e.options.zone,"start"),e.nipples.forEach(function(r){r.destroy()});for(var t in e.pressureIntervals)e.pressureIntervals.hasOwnProperty(t)&&clearInterval(e.pressureIntervals[t]);e.trigger("destroyed",e.nipples),e.manager.unbindDocument(),e.off()};var D_t=Li;function Io(e){var t=this;t.ids={},t.index=0,t.collections=[],t.scroll=hY(),t.config(e),t.prepareCollections();var r=function(){var i;t.collections.forEach(function(o){o.forEach(function(a){i=a.el.getBoundingClientRect(),a.position={x:t.scroll.x+i.left,y:t.scroll.y+i.top}})})};if(typeof window>"u")return t.collections;HP(window,"resize",function(){cY(r)});var n=function(){t.scroll=hY()};return HP(window,"scroll",function(){cY(n)}),t.collections}Io.prototype=new QU;Io.constructor=Io;Io.prototype.prepareCollections=function(){var e=this;e.collections.create=e.create.bind(e),e.collections.on=e.on.bind(e),e.collections.off=e.off.bind(e),e.collections.destroy=e.destroy.bind(e),e.collections.get=function(t){var r;return e.collections.every(function(n){return r=n.get(t),!r}),r}};Io.prototype.create=function(e){return this.createCollection(e)};Io.prototype.createCollection=function(e){var t=this,r=new D_t(t,e);return t.bindCollection(r),t.collections.push(r),r};Io.prototype.bindCollection=function(e){var t=this,r,n=function(i,o){r=i.type+" "+o.id+":"+i.type,t.trigger(r,o)};e.on("destroyed",t.onDestroyed.bind(t)),e.on("shown hidden rested dir plain",n),e.on("dir:up dir:right dir:down dir:left",n),e.on("plain:up plain:right plain:down plain:left",n)};Io.prototype.bindDocument=function(){var e=this;e.binded||(e.bindEvt(document,"move").bindEvt(document,"end"),e.binded=!0)};Io.prototype.unbindDocument=function(e){var t=this;(!Object.keys(t.ids).length||e===!0)&&(t.unbindEvt(document,"move").unbindEvt(document,"end"),t.binded=!1)};Io.prototype.getIdentifier=function(e){var t;return e?(t=e.identifier===void 0?e.pointerId:e.identifier,t===void 0&&(t=this.latest||0)):t=this.index,this.ids[t]===void 0&&(this.ids[t]=this.index,this.index+=1),this.latest=t,this.ids[t]};Io.prototype.removeIdentifier=function(e){var t={};for(var r in this.ids)if(this.ids[r]===e){t.id=r,t.identifier=this.ids[r],delete this.ids[r];break}return t};Io.prototype.onmove=function(e){var t=this;return t.onAny("move",e),!1};Io.prototype.onend=function(e){var t=this;return t.onAny("end",e),!1};Io.prototype.oncancel=function(e){var t=this;return t.onAny("end",e),!1};Io.prototype.onAny=function(e,t){var r=this,n,i="processOn"+e.charAt(0).toUpperCase()+e.slice(1);t=Xue(t);var o=function(s,l,u){u.ids.indexOf(l)>=0&&(u[i](s),s._found_=!0)},a=function(s){n=r.getIdentifier(s),eB(r.collections,o.bind(null,s,n)),s._found_||r.removeIdentifier(n)};return eB(t,a),!1};Io.prototype.destroy=function(){var e=this;e.unbindDocument(!0),e.ids={},e.index=0,e.collections.forEach(function(t){t.destroy()}),e.off()};Io.prototype.onDestroyed=function(e,t){var r=this;if(r.collections.indexOf(t)<0)return!1;r.collections.splice(r.collections.indexOf(t),1)};var R_t=Io,fY=new R_t,k_t={create:function(e){return fY.create(e)},factory:fY},ece=new Map,T1=new Map,pm=class{constructor(e,t,r,n){this.data=t;let{audio:i,volume:o,delay:a,loop:s}=t;if(!i)throw new Error("Missing property");let l=typeof i=="string"?n.getAudio(i).src:i.data;this.audioPlayer=new Kx({src:l,volume:o,delay:a,loop:s}),T1.has(r.uuid)?T1.get(r.uuid).push(this):T1.set(r.uuid,[this]),ece.set(e,this)}playByToggle(){this.data.toggle==="stop"?this.audioPlayer.status==="playing"?this.audioPlayer.stop():(this.audioPlayer.stop(),this.audioPlayer.play()):this.data.toggle==="pause"?this.audioPlayer.status==="playing"?this.audioPlayer.pause():this.audioPlayer.play():(this.audioPlayer.stop(),this.audioPlayer.play())}dispose(){this.audioPlayer.stop()}},tB=class{constructor(e){this.data=e}dispatch(){this.data.playAudio?this.pauseAudio(this.data.playAudio):this.data.object?this.pauseAllAudiosFromObject(this.data.object):this.pauseAllAudios()}pauseAudio(e){let t=ece.get(e);!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.audioPlayer[this.data.interaction](),this.disposeDelay()},this.data.delay)):t.audioPlayer[this.data.interaction]())}pauseAllAudiosFromObject(e){let t=T1.get(e);!(t!=null&&t.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(r=>r.audioPlayer[this.data.interaction]()),this.disposeDelay()},this.data.delay)):t.forEach(r=>r.audioPlayer[this.data.interaction]()))}pauseAllAudios(){let e=[...T1.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(t=>{t.forEach(r=>{r.audioPlayer[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(t=>{t.forEach(r=>{r.audioPlayer[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},tce=class{constructor(e,t,r,n,i){if(this.data=t,this.shared=n,this.condition=i,t.interaction==="play")this.interaction=new pm(e,t,r,n);else if(t.interaction==="pause"||t.interaction==="stop")this.interaction=new tB(t);else throw new Error("Missing property")}dispatchBasic(){if(Qi(this.shared,this.condition)===!1)return!1;this.interaction instanceof pm?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){if(Qi(this.shared,this.condition)===!1)return!1;this.interaction instanceof pm?this.interaction.audioPlayer.play():this.interaction.dispatch()}dispatchGameControl(e){if(Qi(this.shared,this.condition)===!1)return!1;this.interaction instanceof pm&&(e==="start"?this.interaction.audioPlayer.play():this.interaction.audioPlayer.stop())}dispose(){this.interaction.dispose()}},L_t="text/plain",N_t="us-ascii",pY=(e,t)=>t.some(r=>r instanceof RegExp?r.test(e):r===e),z_t=(e,{stripHash:t})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!r)throw new Error(`Invalid URL: ${e}`);let{type:n,data:i,hash:o}=r.groups,a=n.split(";");o=t?"":o;let s=!1;a[a.length-1]==="base64"&&(a.pop(),s=!0);let l=(a.shift()||"").toLowerCase(),u=[...a.map(d=>{let[c,h=""]=d.split("=").map(f=>f.trim());return c==="charset"&&(h=h.toLowerCase(),h===N_t)?"":`${c}${h?`=${h}`:""}`}).filter(Boolean)];return s&&u.push("base64"),(u.length>0||l&&l!==L_t)&&u.unshift(l),`data:${u.join(";")},${s?i.trim():i}${o?`#${o}`:""}`};function B_t(e,t){if(t={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...t},e=e.trim(),/^data:/i.test(e))return z_t(e,t);if(/^view-source:/i.test(e))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let r=e.startsWith("//");!r&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));let n=new URL(e);if(t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&n.protocol==="https:"&&(n.protocol="http:"),t.forceHttps&&n.protocol==="http:"&&(n.protocol="https:"),t.stripAuthentication&&(n.username="",n.password=""),t.stripHash?n.hash="":t.stripTextFragment&&(n.hash=n.hash.replace(/#?:~:text.*?$/i,"")),n.pathname){let o=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,a=0,s="";for(;;){let u=o.exec(n.pathname);if(!u)break;let d=u[0],c=u.index,h=n.pathname.slice(a,c);s+=h.replace(/\/{2,}/g,"/"),s+=d,a=c+d.length}let l=n.pathname.slice(a,n.pathname.length);s+=l.replace(/\/{2,}/g,"/"),n.pathname=s}if(n.pathname)try{n.pathname=decodeURI(n.pathname)}catch{}if(t.removeDirectoryIndex===!0&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let o=n.pathname.split("/"),a=o[o.length-1];pY(a,t.removeDirectoryIndex)&&(o=o.slice(0,-1),n.pathname=o.slice(1).join("/")+"/")}if(n.hostname&&(n.hostname=n.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(n.hostname)&&(n.hostname=n.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(let o of[...n.searchParams.keys()])pY(o,t.removeQueryParameters)&&n.searchParams.delete(o);if(t.removeQueryParameters===!0&&(n.search=""),t.sortQueryParameters){n.searchParams.sort();try{n.search=decodeURIComponent(n.search)}catch{}}t.removeTrailingSlash&&(n.pathname=n.pathname.replace(/\/$/,""));let i=e;return e=n.toString(),!t.removeSingleSlash&&n.pathname==="/"&&!i.endsWith("/")&&n.hash===""&&(e=e.replace(/\/$/,"")),(t.removeTrailingSlash||n.pathname==="/")&&n.hash===""&&t.removeSingleSlash&&(e=e.replace(/\/$/,"")),r&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}var F_t=class{constructor({url:e,context:t},r,n,i){if(this.controlsManager=r,this.shared=n,this.condition=i,!e)throw new Error("Missing property");this.url=e.startsWith("mailto:")?e:B_t(e,{removeTrailingSlash:!1,removeSingleSlash:!1}),this.context=t??"tab"}dispatch(){var e;if(Qi(this.shared,this.condition)===!1)return!1;kse?window.location.assign(this.url):(this.context==="tab"?window.open(this.url,"_blank"):this.context==="window"?window.open(this.url,"_blank",`width=${window.innerWidth}, height=${window.innerHeight}`):window.open(this.url,"_parent"),(e=this.controlsManager.orbitControls)==null||e.onPointerUp(Gt[0]),Jgt())}},rce=class{constructor(e,t,r,n,i){this.data=e,this.page=t,this.controlsManager=r,this.shared=n,this.condition=i,this.timeoutIdQueue=[],this.dispatchInner=()=>{this.objects.forEach(this.destroyCallback)},this.destroyCallback=o=>{var u,d;this.timeoutIdQueue.shift();let a=this.page.scene.find(o);if(a===void 0)return;let s=this.controlsManager.sharedGameControlGlobals.rapierWorld,l=s?(u=a.dataPatched.physics)==null?void 0:u.fusedBody:!0;if(a.cloner){for(let c of a.cloner.children)l?(c.playModeVisible=!1,c.rigidBody&&((d=a.dataPatched.physics)==null?void 0:d.rigidBody)==="positioned"&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(c.rigidBody.collider(0).handle),s.removeRigidBody(c.rigidBody),c.rigidBody=void 0),c.bvhGeometry&&(c.bvhGeometry=void 0)):this.clone===void 0||this.clone===c?(c.playModeVisible=!1,c.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(c.rigidBody.collider(0).handle),s.removeRigidBody(c.rigidBody),c.rigidBody=void 0)):c.playModeVisible===void 0&&(c.playModeVisible=!0);(l||this.clone===void 0||this.clone===!1)&&(a.visible=!1,a.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(a.rigidBody.collider(0).handle),s.removeRigidBody(a.rigidBody),a.rigidBody=void 0),a.bvhGeometry&&(a.bvhGeometry=void 0))}else a.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(a.rigidBody.collider(0).handle),s.removeRigidBody(a.rigidBody),a.rigidBody=void 0),a.bvhGeometry&&(a.bvhGeometry=void 0),a.visible=!1;s===void 0?this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter(c=>c.bvhGeometry!==void 0):this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter(c=>c.rigidBody!==void 0),a.destroyedInAction=!0,this.controlsManager.requestRender()},this.objects=[...e.objects]}dispatch(e){if(Qi(this.shared,this.condition)===!1)return!1;this.clone=e,this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3)):this.dispatchInner()}dispatchFromStart(){if(Qi(this.shared,this.condition)===!1)return!1;this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3))}dispose(){this.timeoutIdQueue.forEach(e=>window.clearTimeout(e))}},nce=class{constructor(e,t,r,n,i){this.data=e,this.page=t,this.shared=r,this.eventManager=n,this.condition=i,this.shared=r}dispatch(){if(Qi(this.shared,this.condition)===!1)return!1;clearTimeout(this.timeoutId),delete this.timeoutId,this.timeoutId=window.setTimeout(()=>{var e;this.shared.reset(this.shared.data,!0),s5(this.page,this.shared,!0),this.eventManager.reset(),(e=this.eventManager.controlsManager.gameControl)==null||e.reset(!0),this.page.switchToPlayCamera(),this.eventManager.controlsManager.requestRender(),delete this.timeoutId},(this.data.delay??0)*1e3)}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},ice={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,timelineChangeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0,rewind:!0},ZU={duration:1e3,delay:0,endDelay:0,startOnceDelay:0,pingPongDelayCorrection:0,pingPongEndDelayCorrection:0,easing:"easeOutElastic(1, .5)",round:0},j_t=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],GP={CSS:{},springs:{}};function Mu(e,t,r){return Math.min(Math.max(e,t),r)}function O1(e,t){return e.indexOf(t)>-1}function tk(e,t){return e.apply(null,t)}var qt={arr:function(e){return Array.isArray(e)},obj:function(e){return O1(Object.prototype.toString.call(e),"Object")},pth:function(e){return qt.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return!("isNode"in e)&&(e.nodeType||qt.svg(e))},str:function(e){return typeof e=="string"},fnc:function(e){return typeof e=="function"},und:function(e){return typeof e>"u"},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return qt.hex(e)||qt.rgb(e)||qt.hsl(e)},key:function(e){return!ice.hasOwnProperty(e)&&!ZU.hasOwnProperty(e)&&e!=="targets"&&e!=="keyframes"}};function oce(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map(function(r){return parseFloat(r)}):[]}function ace(e,t){var r=oce(e),n=Mu(qt.und(r[0])?1:r[0],.1,100),i=Mu(qt.und(r[1])?100:r[1],.1,100),o=Mu(qt.und(r[2])?10:r[2],.1,100),a=Mu(qt.und(r[3])?0:r[3],.1,100),s=Math.sqrt(i/n),l=o/(2*Math.sqrt(i*n)),u=l<1?s*Math.sqrt(1-l*l):0,d=1,c=l<1?(l*s+-a)/u:-a+s;function h(m){var p=t?t*m/1e3:m;return l<1?p=Math.exp(-p*l*s)*(d*Math.cos(u*p)+c*Math.sin(u*p)):p=(d+c*p)*Math.exp(-p*s),m===0||m===1?m:1-p}function f(){var m=GP.springs[e];if(m)return m;for(var p=1/6,g=0,v=0;;)if(g+=p,h(g)===1){if(v++,v>=16)break}else v=0;var b=g*p*1e3;return GP.springs[e]=b,b}return t?h:f}function U_t(e){return e===void 0&&(e=10),function(t){return Math.ceil(Mu(t,1e-6,1)*e)*(1/e)}}var $_t=function(){var e=11,t=1/(e-1);function r(d,c){return 1-3*c+3*d}function n(d,c){return 3*c-6*d}function i(d){return 3*d}function o(d,c,h){return((r(c,h)*d+n(c,h))*d+i(c))*d}function a(d,c,h){return 3*r(c,h)*d*d+2*n(c,h)*d+i(c)}function s(d,c,h,f,m){var p,g,v=0;do g=c+(h-c)/2,p=o(g,f,m)-d,p>0?h=g:c=g;while(Math.abs(p)>1e-7&&++v<10);return g}function l(d,c,h,f){for(var m=0;m<4;++m){var p=a(c,h,f);if(p===0)return c;var g=o(c,h,f)-d;c-=g/p}return c}function u(d,c,h,f){if(!(0<=d&&d<=1&&0<=h&&h<=1))return;var m=new Float32Array(e);if(d!==c||h!==f)for(var p=0;p<e;++p)m[p]=o(p*t,d,h);function g(v){for(var b=0,y=1,x=e-1;y!==x&&m[y]<=v;++y)b+=t;--y;var S=(v-m[y])/(m[y+1]-m[y]),w=b+S*t,_=a(w,d,h);return _>=.001?l(v,w,d,h):_===0?w:s(v,b,b+t,d,h)}return function(v){return d===c&&h===f||v===0||v===1?v:o(g(v),c,f)}}return u}(),sce=function(){var e={linear:function(){return function(n){return n}}},t={Sine:function(){return function(n){return 1-Math.cos(n*Math.PI/2)}},Circ:function(){return function(n){return 1-Math.sqrt(1-n*n)}},Back:function(){return function(n){return n*n*(3*n-2)}},Bounce:function(){return function(n){for(var i,o=4;n<((i=Math.pow(2,--o))-1)/11;);return 1/Math.pow(4,3-o)-7.5625*Math.pow((i*3-2)/22-n,2)}},Elastic:function(n,i){n===void 0&&(n=1),i===void 0&&(i=.5);var o=Mu(n,1,10),a=Mu(i,.1,2);return function(s){return s===0||s===1?s:-o*Math.pow(2,10*(s-1))*Math.sin((s-1-a/(Math.PI*2)*Math.asin(1/o))*(Math.PI*2)/a)}}},r=["Quad","Cubic","Quart","Quint","Expo"];return r.forEach(function(n,i){t[n]=function(){return function(o){return Math.pow(o,i+2)}}}),Object.keys(t).forEach(function(n){var i=t[n];e["easeIn"+n]=i,e["easeOut"+n]=function(o,a){return function(s){return 1-i(o,a)(1-s)}},e["easeInOut"+n]=function(o,a){return function(s){return s<.5?i(o,a)(s*2)/2:1-i(o,a)(s*-2+2)/2}}}),e}();function JU(e,t){if(qt.fnc(e))return e;var r=e.split("(")[0],n=sce[r],i=oce(e);switch(r){case"spring":return ace(e,t);case"cubicBezier":return tk($_t,i);case"steps":return tk(U_t,i);default:return tk(n,i)}}function lce(e){try{var t=document.querySelectorAll(e);return t}catch{return}}function PO(e,t){for(var r=e.length,n=arguments.length>=2?arguments[1]:void 0,i=[],o=0;o<r;o++)if(o in e){var a=e[o];t.call(n,a,o,e)&&i.push(a)}return i}function TO(e){return e.reduce(function(t,r){return t.concat(qt.arr(r)?TO(r):r)},[])}function mY(e){return qt.arr(e)?e:(qt.str(e)&&(e=lce(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function e5(e,t){return e.some(function(r){return r===t})}function t5(e){var t={};for(var r in e)t[r]=e[r];return t}function rB(e,t){var r=t5(e);for(var n in e)r[n]=t.hasOwnProperty(n)?t[n]:e[n];return r}function OO(e,t){var r=t5(e);for(var n in t)r[n]=qt.und(e[n])?t[n]:e[n];return r}function V_t(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}function H_t(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,r=e.replace(t,function(s,l,u,d){return l+l+u+u+d+d}),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r),i=parseInt(n[1],16),o=parseInt(n[2],16),a=parseInt(n[3],16);return"rgba("+i+","+o+","+a+",1)"}function G_t(e){var t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),r=parseInt(t[1],10)/360,n=parseInt(t[2],10)/100,i=parseInt(t[3],10)/100,o=t[4]||1;function a(h,f,m){return m<0&&(m+=1),m>1&&(m-=1),m<1/6?h+(f-h)*6*m:m<1/2?f:m<2/3?h+(f-h)*(2/3-m)*6:h}var s,l,u;if(n==0)s=l=u=i;else{var d=i<.5?i*(1+n):i+n-i*n,c=2*i-d;s=a(c,d,r+1/3),l=a(c,d,r),u=a(c,d,r-1/3)}return"rgba("+s*255+","+l*255+","+u*255+","+o+")"}function W_t(e){if(qt.rgb(e))return V_t(e);if(qt.hex(e))return H_t(e);if(qt.hsl(e))return G_t(e)}function eh(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function q_t(e){if(O1(e,"translate")||e==="perspective")return"px";if(O1(e,"rotate")||O1(e,"skew"))return"deg"}function nB(e,t){return qt.fnc(e)?e(t.target,t.id,t.total):e}function kc(e,t){return e.getAttribute(t)}function r5(e,t,r){var n=eh(t);if(e5([r,"deg","rad","turn"],n))return t;var i=GP.CSS[t+r];if(!qt.und(i))return i;var o=100,a=document.createElement(e.tagName),s=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;s.appendChild(a),a.style.position="absolute",a.style.width=o+r;var l=o/a.offsetWidth;s.removeChild(a);var u=l*parseFloat(t);return GP.CSS[t+r]=u,u}function uce(e,t,r){if(t in e.style){var n=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i=e.style[t]||getComputedStyle(e).getPropertyValue(n)||"0";return r?r5(e,i,r):i}}function n5(e,t){if(qt.dom(e)&&!qt.inp(e)&&(kc(e,t)||qt.svg(e)&&e[t]))return"attribute";if(qt.dom(e)&&e5(j_t,t))return"transform";if(qt.dom(e)&&t!=="transform"&&uce(e,t))return"css";if(e[t]!=null)return"object"}function cce(e){if(qt.dom(e)){for(var t=e.style.transform||"",r=/(\w+)\(([^)]*)\)/g,n=new Map,i;i=r.exec(t);)n.set(i[1],i[2]);return n}}function K_t(e,t,r,n){var i=O1(t,"scale")?1:0+q_t(t),o=cce(e).get(t)||i;return r&&(r.transforms.list.set(t,o),r.transforms.last=t),n?r5(e,o,n):o}function i5(e,t,r,n){switch(n5(e,t)){case"transform":return K_t(e,t,n,r);case"css":return uce(e,t,r);case"attribute":return kc(e,t);default:return e[t]||0}}function o5(e,t){var r=/^(\*=|\+=|-=)/.exec(e);if(!r)return e;var n=eh(e)||0,i=parseFloat(t),o=parseFloat(e.replace(r[0],""));switch(r[0][0]){case"+":return i+o+n;case"-":return i-o+n;case"*":return i*o+n}}function dce(e,t){if(qt.col(e))return W_t(e);if(/\s/g.test(e))return e;var r=eh(e),n=r?e.substr(0,e.length-r.length):e;return t?n+t:n}function a5(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function X_t(e){return Math.PI*2*kc(e,"r")}function Y_t(e){return kc(e,"width")*2+kc(e,"height")*2}function Q_t(e){return a5({x:kc(e,"x1"),y:kc(e,"y1")},{x:kc(e,"x2"),y:kc(e,"y2")})}function hce(e){for(var t=e.points,r=0,n,i=0;i<t.numberOfItems;i++){var o=t.getItem(i);i>0&&(r+=a5(n,o)),n=o}return r}function Z_t(e){var t=e.points;return hce(e)+a5(t.getItem(t.numberOfItems-1),t.getItem(0))}function fce(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return X_t(e);case"rect":return Y_t(e);case"line":return Q_t(e);case"polyline":return hce(e);case"polygon":return Z_t(e)}}function J_t(e){var t=fce(e);return e.setAttribute("stroke-dasharray",t),t}function eCt(e){for(var t=e.parentNode;qt.svg(t)&&qt.svg(t.parentNode);)t=t.parentNode;return t}function pce(e,t){var r=t||{},n=r.el||eCt(e),i=n.getBoundingClientRect(),o=kc(n,"viewBox"),a=i.width,s=i.height,l=r.viewBox||(o?o.split(" "):[0,0,a,s]);return{el:n,viewBox:l,x:l[0]/1,y:l[1]/1,w:a/l[2],h:s/l[3]}}function tCt(e,t){var r=qt.str(e)?lce(e)[0]:e,n=t||100;return function(i){return{property:i,el:r,svg:pce(r),totalLength:fce(r)*(n/100)}}}function rCt(e,t){function r(s){s===void 0&&(s=0);var l=t+s>=1?t+s:0;return e.el.getPointAtLength(l)}var n=pce(e.el,e.svg),i=r(),o=r(-1),a=r(1);switch(e.property){case"x":return(i.x-n.x)*n.w;case"y":return(i.y-n.y)*n.h;case"angle":return Math.atan2(a.y-o.y,a.x-o.x)*180/Math.PI}}function gY(e,t){var r=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,n=dce(qt.pth(e)?e.totalLength:e,t)+"";return{original:n,numbers:n.match(r)?n.match(r).map(Number):[0],strings:qt.str(e)||t?n.split(r):[]}}function mce(e){var t=e?TO(qt.arr(e)?e.map(mY):mY(e)):[];return PO(t,function(r,n,i){return i.indexOf(r)===n})}function gce(e){var t=mce(e);return t.map(function(r,n){return{target:r,id:n,total:t.length,transforms:{list:cce(r)}}})}function nCt(e,t){var r=t5(t);if(/^spring/.test(r.easing)&&(r.duration=ace(r.easing)),qt.arr(e)){var n=e.length,i=n===2&&!qt.obj(e[0]);i?e={value:e}:qt.fnc(t.duration)||(r.duration=t.duration/n)}var o=qt.arr(e)?e:[e];return o.map(function(a,s){var l=qt.obj(a)&&!qt.pth(a)?a:{value:a};return qt.und(l.delay)&&(l.delay=s?0:t.delay),qt.und(l.endDelay)&&(l.endDelay=s===o.length-1?t.endDelay:0),l}).map(function(a){return OO(a,r)})}function iCt(e){for(var t=PO(TO(e.map(function(o){return Object.keys(o)})),function(o){return qt.key(o)}).reduce(function(o,a){return o.indexOf(a)<0&&o.push(a),o},[]),r={},n=function(o){var a=t[o];r[a]=e.map(function(s){var l={};for(var u in s)qt.key(u)?u==a&&(l.value=s[u]):l[u]=s[u];return l})},i=0;i<t.length;i++)n(i);return r}function oCt(e,t){var r=[],n=t.keyframes;n&&(t=OO(iCt(n),t));for(var i in t)qt.key(i)&&r.push({name:i,tweens:nCt(t[i],e)});return r}function aCt(e,t){var r={};for(var n in e){var i=nB(e[n],t);qt.arr(i)&&(i=i.map(function(o){return nB(o,t)}),i.length===1&&(i=i[0])),r[n]=i}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}function sCt(e,t){var r;return e.tweens.map(function(n){var i=aCt(n,t),o=i.value,a=qt.arr(o)?o[1]:o,s=eh(a),l=i5(t.target,e.name,s,t),u=r?r.to.original:l,d=qt.arr(o)?o[0]:u,c=eh(d)||eh(l),h=s||c;return qt.und(a)&&(a=u),i.from=gY(d,h),i.to=gY(o5(a,d),h),i.start=r?r.end:0,i.end=i.start+i.delay+i.duration+i.endDelay,i.easing=JU(i.easing,i.duration),i.isPath=qt.pth(o),i.isColor=qt.col(i.from.original),i.isColor&&(i.round=1),r=i,i})}var vce={css:function(e,t,r){return e.style[t]=r},attribute:function(e,t,r){return e.setAttribute(t,r)},object:function(e,t,r){return e[t]=r},transform:function(e,t,r,n,i){if(n.list.set(t,r),t===n.last||i){var o="";n.list.forEach(function(a,s){o+=s+"("+a+") "}),e.style.transform=o}}};function yce(e,t){var r=gce(e);r.forEach(function(n){for(var i in t){var o=nB(t[i],n),a=n.target,s=eh(o),l=i5(a,i,s,n),u=s||eh(l),d=o5(dce(o,u),l),c=n5(a,i);vce[c](a,i,d,n.transforms,!0)}})}function lCt(e,t){var r=n5(e.target,t.name);if(r){var n=sCt(t,e),i=n[n.length-1];return{type:r,property:t.name,animatable:e,tweens:n,duration:i.end,delay:n[0].delay,endDelay:i.endDelay}}}function uCt(e,t){return PO(TO(e.map(function(r){return t.map(function(n){return lCt(r,n)})})),function(r){return!qt.und(r)})}function bce(e,t){var r=e.length,n=function(o){return o.timelineOffset?o.timelineOffset:0},i={};return i.duration=r?Math.max.apply(Math,e.map(function(o){let a=o.startOnceDelay??0,s=o.pingPongDelayCorrection??0,l=o.pingPongEndDelayCorrection??0;return n(o)+a+s+l+o.duration*(o.loop??1)})):t.duration,i.delay=r?Math.min.apply(Math,e.map(function(o){let a=o.startOnceDelay??0,s=o.pingPongDelayCorrection??0;return n(o)+a+s+o.delay})):t.delay,i.endDelay=r?i.duration-Math.max.apply(Math,e.map(function(o){let a=o.startOnceDelay??0,s=o.pingPongDelayCorrection??0,l=o.pingPongEndDelayCorrection??0;return n(o)+a+s+o.duration*(o.loop??1)-o.endDelay-l})):t.endDelay,i}var vY=0;function cCt(e){var t=rB(ice,e),r=rB(ZU,e),n=oCt(r,e),i=gce(e.targets),o=uCt(i,n),a=bce(o,r),s=vY;return vY++,OO(t,{id:s,children:[],animatables:i,animations:o,duration:a.duration,delay:a.delay,endDelay:a.endDelay,startOnceDelay:r.startOnceDelay,pingPongDelayCorrection:r.pingPongDelayCorrection,pingPongEndDelayCorrection:r.pingPongEndDelayCorrection})}var Hl=[],yY=[],nE,dCt=function(){function e(){nE=requestAnimationFrame(t)}function t(r){var n=Hl.length;if(n){for(var i=0;i<n;){var o=Hl[i];o.paused?(Hl.splice(i,1),n-=1):(o.tick(r),i++)}e()}else nE=cancelAnimationFrame(nE)}return e}();function hCt(e){document.hidden?(Hl.forEach(function(t){return t.pause(e.timeStamp)}),yY=Hl.slice(0),Ri.running=Hl=[]):yY.forEach(function(t){return t.play(e.timeStamp)})}typeof document<"u"&&document.addEventListener("visibilitychange",hCt);function Ri(e){e===void 0&&(e={});var t=0,r=0,n=0,i,o,a=0,s=null;function l(w){var _=window.Promise&&new Promise(function(C){return s=C});return w.finished=_,_}var u=cCt(e);l(u);function d(){var w=u.direction;w!=="alternate"&&(u.direction=w!=="normal"?"normal":"reverse"),u.reversed=!u.reversed,o.forEach(function(_){(_.loop===1||_.loop%2===0)&&(_.reversed=u.reversed)})}function c(){u.direction="normal",u.reversed=!1,o.forEach(function(w){return w.reversed=!1})}function h(w){return u.reversed?u.duration-w:w}function f(){t=0,r=h(u.currentTime)*(1/Ri.speed)}function m(w,_,C=!1){_&&(u.reversed?_.seek(_.duration*_.loop-(w-_.timelineOffset-_.pingPongDelayCorrection),C):_.seek(w-_.timelineOffset-_.startOnceDelay-_.pingPongDelayCorrection,C))}function p(w,_=!1){if(u.reversed)for(var C=a;C--;)m(w,o[C],_);else for(var E=0;E<a;E++)m(w,o[E],_)}function g(w){var ne,J,W,te,Z,q,ie,he,ae,be;var _=0,C=u.animations,E=C.length;for(u.direction!=="alternate"&&((ne=u.parent)==null?void 0:ne.direction)==="alternate"?((J=u.parent)==null?void 0:J.rewind)===!1&&u.reversePlayback===!0&&u.rewind===!1&&((W=u.parent)!=null&&W.reversed&&u.direction==="alternate"?w=u.duration-u.delay+u.endDelay-w:w=u.duration+u.delay-u.endDelay-w):x(!1,(te=u.parent)==null?void 0:te.rewind,u.rewind,(Z=u.parent)==null?void 0:Z.reversePlayback,u.reversePlayback)&&((q=u.parent)!=null&&q.reversed&&u.direction==="alternate"?w=u.duration-u.delay+u.endDelay-w:w=u.duration+u.delay-u.endDelay-w);_<E;){var A=C[_],M=A.animatable,I=A.tweens,O=I.length-1,T=I[O];O&&(T=PO(I,function(Se){return w<Se.end})[0]||T);let ye;(ie=u.parent)!=null&&ie.reversed&&u.direction==="alternate"?ye=Mu(w-T.start-T.endDelay,0,T.duration)/T.duration:ye=Mu(w-T.start-T.delay,0,T.duration)/T.duration;for(var D=isNaN(ye)?1:T.easing(ye),N=T.to.strings,k=T.round,R=[],z=T.to.numbers.length,j=void 0,$=0;$<z;$++){var U=void 0;let Se,me;u.direction!=="alternate"?((he=u.parent)==null?void 0:he.rewind)===!1&&u.reversePlayback===!0&&u.rewind===!1?(Se=T.to.numbers[$],me=T.from.numbers[$]||0):(me=T.to.numbers[$],Se=T.from.numbers[$]||0):x(!0,(ae=u.parent)==null?void 0:ae.rewind,u.rewind,(be=u.parent)==null?void 0:be.reversePlayback,u.reversePlayback)?(Se=T.to.numbers[$],me=T.from.numbers[$]||0):(me=T.to.numbers[$],Se=T.from.numbers[$]||0),T.isPath?U=rCt(T.value,D*me):U=Se+D*(me-Se),k&&(T.isColor&&$>2||(U=Math.round(U*k)/k)),R.push(U)}var H=N.length;if(!H)j=R[0];else{j=N[0];for(var V=0;V<H;V++){N[V];var Q=N[V+1],X=R[V];isNaN(X)||(Q?j+=X+Q:j+=X+" ")}}vce[A.type](M.target,A.property,j,M.transforms),A.currentValue=j,_++}}function v(w){u[w]&&!u.passThrough&&u[w](u)}function b(){u.remaining&&u.remaining!==!0&&u.remaining--}let y={0:!1,1:!0,2:!1,3:!0,4:!1,5:!1,6:!1,7:!1,8:!1,9:!0,10:!0,11:!1,12:!1,13:!1,14:!0,15:!0,16:!1,17:!0,18:!0,19:!1,20:!1,21:!1,22:!0,23:!0,24:!1,25:!0,26:!1,27:!0,28:!1,29:!1,30:!1,31:!1};function x(w,_,C,E,A){return y[w<<4|_<<3|C<<2|E<<1|A]}function S(w,_=!1){var I;var C=u.duration;let E=u.delay,A=C-u.endDelay;(I=u.parent)!=null&&I.reversed&&u.direction==="alternate"&&(E=u.endDelay,A=C-u.delay);var M=h(w);if(u.progress=Mu(M/C*100,0,100),_||(u.reversePlayback=M<u.currentTime),a&&p(M,_),!u.began&&u.currentTime>=0&&(u.began=!0,v("begin")),!u.loopBegan&&u.currentTime>0&&(u.loopBegan=!0,v("loopBegin")),(u.reversed||M>=0)&&M<=E&&u.currentTime!==0&&(g(0),v("change")),(M>=A&&u.currentTime!==C+u.pingPongDelayCorrection||!C)&&(g(C),v("change")),M>E&&M<A?(u.changeBegan||(u.changeBegan=!0,u.changeCompleted=!1,v("changeBegin")),g(M),v("change")):u.changeBegan?(u.changeCompleted=!0,u.changeBegan=!1,v("change"),a&&v("timelineChangeComplete")):u.began&&M>A&&v("changeComplete"),u.currentTime=Mu(M,0,C+u.pingPongDelayCorrection),u.began&&v("update"),w>=C)if(b(),!u.remaining)u.paused=!0,u.completed||(u.completed=!0,v("loopComplete"),v("complete"),!u.passThrough&&"Promise"in window&&(s(),l(u)));else{a?t+=u.duration/Ri.speed:t+=u.duration;for(let O of o)O.setStartTime(0),O.remaining=O.loop;v("loopComplete"),u.loopBegan=!1,u.direction==="alternate"?d():a&&c()}}return u.reset=function(){var w=u.direction;u.passThrough=!1,u.currentTime=0,u.progress=0,u.paused=!0,u.began=!1,u.loopBegan=!1,u.changeBegan=!1,u.completed=!1,u.changeCompleted=!1,u.reversePlayback=!1,u.reversed=w==="reverse",u.remaining=u.loop,o=u.children,a=o.length;for(var _=a;_--;)u.children[_].reset();g(u.reversed?u.duration:0)},u.setStartTime=function(w){t=w},u.set=function(w,_){return yce(w,_),u},u.tick=function(w){n=w,t||(t=n),S((n+(r-t))*Ri.speed)},u.seek=function(w,_=!1){S(w-t,_)},u.pause=function(w){u.paused=!0,a&&(i=w??performance.now())},u.play=function(w){!u.paused||(u.completed&&u.reset(),u.paused=!1,Hl.push(u),a&&i!==void 0&&(t+=(w??performance.now())-i),nE||dCt())},u.reverse=function(){d(),u.completed=!u.reversed,f()},u.restart=function(){u.reset(),u.play()},u.reset(),u.autoplay&&u.play(),u}function bY(e,t){for(var r=t.length;r--;)e5(e,t[r].animatable.target)&&t.splice(r,1)}function fCt(e){for(var t=mce(e),r=Hl.length;r--;){var n=Hl[r],i=n.animations,o=n.children;bY(t,i);for(var a=o.length;a--;){var s=o[a],l=s.animations;bY(t,l),!l.length&&!s.children.length&&o.splice(a,1)}!i.length&&!o.length&&n.pause()}}function pCt(e,t){t===void 0&&(t={});var r=t.direction||"normal",n=t.easing?JU(t.easing):null,i=t.grid,o=t.axis,a=t.from||0,s=a==="first",l=a==="center",u=a==="last",d=qt.arr(e),c=parseFloat(d?e[0]:e),h=d?parseFloat(e[1]):0,f=eh(d?e[1]:e)||0,m=t.start||0+(d?c:0),p=[],g=0;return function(v,b,y){if(s&&(a=0),l&&(a=(y-1)/2),u&&(a=y-1),!p.length){for(var x=0;x<y;x++){if(!i)p.push(Math.abs(a-x));else{var S=l?(i[0]-1)/2:a%i[0],w=l?(i[1]-1)/2:Math.floor(a/i[0]),_=x%i[0],C=Math.floor(x/i[0]),E=S-_,A=w-C,M=Math.sqrt(E*E+A*A);o==="x"&&(M=-E),o==="y"&&(M=-A),p.push(M)}g=Math.max.apply(Math,p)}n&&(p=p.map(function(O){return n(O/g)*g})),r==="reverse"&&(p=p.map(function(O){return o?O<0?O*-1:-O:Math.abs(g-O)}))}var I=d?(h-c)/g:c;return m+I*(Math.round(p[b]*100)/100)+f}}function mCt(e){e===void 0&&(e={});var t=Ri(e);return t.duration=0,t.add=function(r,n){var i=Hl.indexOf(t),o=t.children;i>-1&&Hl.splice(i,1);function a(h){h.passThrough=!0}for(var s=0;s<o.length;s++)a(o[s]);var l=OO(r,rB(ZU,e));l.targets=l.targets||e.targets;var u=t.duration;l.autoplay=!1,l.timelineOffset=qt.und(n)?u:o5(n,u),a(t);var d=Ri(l);a(d),o.push(d),d.parent=t;var c=bce(o,e);return t.delay=c.delay,t.endDelay=c.endDelay,t.duration=c.duration,d.loop===!0&&(t.duration=1/0),t.seek(0),t.reset(),t.autoplay&&t.play(),t},t}Ri.version="3.2.0";Ri.speed=1;Ri.running=Hl;Ri.remove=fCt;Ri.get=i5;Ri.set=yce;Ri.convertPx=r5;Ri.path=tCt;Ri.setDashoffset=J_t;Ri.stagger=pCt;Ri.timeline=mCt;Ri.easing=JU;Ri.penner=sce;Ri.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};var xce=Ri,xY=new F,wY=new F,SY=new Jt;function gCt(e,t,r,n){if(n===0)return r.copy(e);if(n===1)return r.copy(t);let i=e.w*t.w+e.x*t.x+e.y*t.y+e.z*t.z;if(i>=1)return r.copy(e);let o=1-i*i;if(o<=Number.EPSILON){let d=1-n;return r.w=d*e.w+n*t.w,r.x=d*e.x+n*t.x,r.y=d*e.y+n*t.y,r.z=d*e.z+n*t.z,r.normalize(),r}let a=Math.sqrt(o),s=Math.atan2(a,i),l=Math.sin((1-n)*s)/a,u=Math.sin(n*s)/a;return r.w=e.w*l+t.w*u,r.x=e.x*l+t.x*u,r.y=e.y*l+t.y*u,r.z=e.z*l+t.z*u,r}function eg(e,t,r,n,i,o){let a=r[e]?r[e]:void 0,s=n[e];if(s==null)return;let l=a!=null?typeof a=="string"?Number(i.getVariable(a)??0):a:t[e],u=typeof s=="string"?Number(i.getVariable(s)??0):s;if(l!==u)return{update:d=>{let c=Et.lerp(l,u,d);o?t[e]=Math.trunc(c):t[e]=c},start:()=>{t[e]=l},end:()=>{t[e]=u}}}function wce(e,t,r,n,i,o){let a=r[e]?r[e]:void 0,s=n[e];if(!s)return;let l=t[e],u=[...a??l].map(c=>typeof c=="string"?Number(i.getVariable(c)??0):c),d=[...s].map(c=>typeof c=="string"?Number(i.getVariable(c)??0):c);if(!(u.length!==d.length||Rse(u,d)))return{update:c=>{u.forEach((h,f)=>{let m=Et.lerp(h,d[f],c);t[e][f]=o?Math.trunc(m):m})},start:()=>{Object.assign(t[e],u)},end:()=>{Object.assign(t[e],d)}}}function WP(e,t,r){return t.forEach((n,i)=>{e.setComponent(i,typeof n=="string"?Number(r.getVariable(n)??0):n)}),e}function _Y(e,t,r,n,i){let o=r[e]?r[e]:void 0,a=n[e];if(!a)return;let s=t[e],l=o?WP(new F,o,i):s.clone(),u=WP(new F,a,i);if(!l.equals(u))return{update:d=>{s.lerpVectors(l,u,d)},start:()=>{s.copy(l)},end:()=>{s.copy(u)}}}function vCt(e,t,r,n){let i=r[e]?r[e]:void 0,o=n[e];if(!o)return;let a=t[e],s=i?new qe().fromArray(i):a.clone(),l=new F,u=new Jt,d=new F;s.decompose(l,u,d);let c=new qe().fromArray(o),h=new F,f=new Jt,m=new F;if(c.decompose(h,f,m),!s.equals(c))return{update:p=>{SY.slerpQuaternions(u,f,p),xY.lerpVectors(l,h,p),wY.lerpVectors(d,m,p),a.compose(xY,SY,wY)},start:()=>{a.compose(l,u,d)},end:()=>{a.compose(h,f,m)}}}function yCt(e,t,r,n,i){let o=r[e]?r[e]:void 0,a=n[e];if(!a)return;let s=t[e],l=o?typeof o=="string"?i.getColor(o).clone():new Bt().setRGB(o.r,o.g,o.b):s.clone(),u=typeof a=="string"?i.getColor(a).clone():new Bt().setRGB(a.r,a.g,a.b);if(l.equals(u))return;let d=s.clone();return t[e]=d,{update:c=>{d.lerpColors(l,u,c)},start:()=>{d.copy(l)},end:()=>{d.copy(u)}}}function wp(e,t,r,n,i){if(typeof t[e]=="number")return eg(e,t,r??{},n,i);if(Array.isArray(t[e]))return wce(e,t,r??{},n,i)}function bCt(e,t,r,n){var s,l,u,d;let i=[],o=e.cameraType==="OrthographicCamera"?(s=t.orthographic)==null?void 0:s.zoom:(l=t.perspective)==null?void 0:l.zoom,a=e.cameraType==="OrthographicCamera"?(u=r.orthographic)==null?void 0:u.zoom:(d=r.perspective)==null?void 0:d.zoom;if(a!==void 0){let c=o??e.zoom,h=a;c!==h&&i.push({update:f=>{e.zoom=Et.lerp(c,h,f),e.updateProjectionMatrix()},start:()=>{e.zoom=c,e.updateProjectionMatrix()},end:()=>{e.zoom=h,e.updateProjectionMatrix()}})}if(r.targetOffset!==void 0){let c=eg("targetOffset",e,t,r,n);c&&i.push(c)}return i}function xCt(e,t,r,n){if(r.scaleBaked===void 0)return;let i=(t.scaleBaked??e.data.geometry.scaleBaked).map(s=>typeof s=="string"?Number(n.getVariable(s)??0):s),o=r.scaleBaked.map(s=>typeof s=="string"?Number(n.getVariable(s)??0):s);if(Tm.isEqual(i,o))return;let a=[];return a.push({update:s=>{e.updateGeometryInteractions({scaleBaked:[Et.lerp(i[0],o[0],s),Et.lerp(i[1],o[1],s),Et.lerp(i[2],o[2],s)]},n),e.invalidateDownstreamBooleanData()},start:()=>{e.updateGeometryInteractions({scaleBaked:i},n),e.invalidateDownstreamBooleanData()},end:()=>{e.updateGeometryInteractions({scaleBaked:o},n),e.invalidateDownstreamBooleanData()}}),a}function wCt(e,t,r,n){if(!r.extrusion)return;let i=e.extrusion,o=t.extrusion??{},a=r.extrusion,s=[];return gle.forEach(l=>{let u=wp(l,i,o,a,n);u&&s.push(u)}),s}function SCt(e,t,r,n){let i=[];if(!("geometry"in r))return i;let o=e.geometry.userData.parameters,a="geometry"in t?t.geometry:{},s=r.geometry;if(e instanceof dS){let l=xCt(e,a,s,n);l&&i.push(...l)}else{let l={};if(Object.assign(l,Zd(o,dK)),dK.forEach(u=>{let d=wp(u,l,a,s,n);d&&i.push(d)}),e instanceof WU){Object.assign(l,{extrusion:{...o.extrusion}});let u=wCt(l,a,s,n);u&&i.push(...u)}i.length&&i.push({update:u=>{e.updateGeometryInteractions(l,n),e.updateGeometryGroupsIfNeeded()},start:u=>{e.updateGeometryInteractions(l,n),e.updateGeometryGroupsIfNeeded()},end:u=>{e.updateGeometryInteractions(l,n),e.updateGeometryGroupsIfNeeded()}})}return i}function _Ct(e,t,r,n){let i=[];if(r.intensity!==void 0){let o=eg("intensity",e,t,r,n);o&&i.push(o)}if(r.color!==void 0){let o=yCt("color",e,t,r,n);o&&i.push(o)}return i}function CCt(e,t,r,n){let i=[];if(Array.isArray(e.material)){if(!("materials"in r&&r.materials))return i;let o="materials"in t&&t.materials?t.materials:[],a=r.materials;e.material.forEach((s,l)=>{if(!a[l])return;let u=o[l]??{},d=a[l];typeof u=="string"||typeof d=="string"||i.push(...CY(s,u,d,n))})}else{if(!("material"in r&&r.material))return i;let o="material"in t&&t.material?t.material:{},a=r.material;if(typeof o=="string"||typeof a=="string")return i;i.push(...CY(e.material,o,a,n))}return i}function CY(e,t,r,n){var a;let i=[],o=Hv(r,n)||!!t.layers&&Hv(t,n);i.push(RCt(e,o));for(let s of e.layers){let l=(a=t.layers)==null?void 0:a.data(s.uuid),u=r.layers.data(s.uuid);if(!u||s.type!=="light"&&(!(s.visible??!0)||!(u.visible??!0)))continue;let d=s.getNames().filter(c=>!fle.some(h=>c.includes(h)));for(let c of d)try{let h=s.getValue(c),f;if(c==="colors")f=ICt(s,l,u,c);else if(Array.isArray(h))c==="steps"&&(f=OCt(s,l,u,c));else if(typeof h=="number")f=ACt(s,l,u,c,n);else{if(typeof h=="boolean")continue;h instanceof ue?f=ECt(s,l,u,c):h instanceof F?f=MCt(s,l,u,c,n):h instanceof As?f=TCt(s,l,u,c,n):h instanceof Bt?f=PCt(s,l,u,c,n):"isTexture"in h&&(f=DCt(s,l,u,c))}f&&(Array.isArray(f)?i.push(...f):i.push(f))}catch(h){console.error(`lerpMaterial: unexpected material layer for ${c}`,h)}}return i}function ACt(e,t,r,n,i){if(!e.hasValue(n)||!(n in r))return;let o=t?t[n]:e.getValue(n),a=r[n],s=typeof o=="string"?Number(i.getVariable(o)??0):o,l=typeof a=="string"?Number(i.getVariable(a)??0):a;if(s!==l)return{update:u=>{e.setValue(n,Et.lerp(s,l,u))},start:()=>{e.setValue(n,s)},end:()=>{e.setValue(n,l)}}}function ECt(e,t,r,n){if(!e.hasValue(n)||!(n in r))return;let i=e.getValue(n),o=t?new ue().fromArray(t[n]):i.clone(),a=new ue().fromArray(r[n]);if(!o.equals(a))return{update:s=>{i.lerpVectors(o,a,s)},start:()=>{i.copy(o)},end:()=>{i.copy(a)}}}function MCt(e,t,r,n,i){if(!e.hasValue(n)||!(n in r))return;let o=e.getValue(n),a=t?t[n]:void 0,s=r[n],l=a?WP(new F,a,i):o.clone(),u=WP(new F,s,i);if(!l.equals(u))return{update:d=>{o.lerpVectors(l,u,d)},start:()=>{o.copy(l)},end:()=>{o.copy(u)}}}function PCt(e,t,r,n,i){if(!e.hasValue(n)||!(n in r))return;let o=t?t[n]:void 0,a=r[n],s=e.getValue(n),l=o?typeof o=="string"?i.getColor(o).clone():new Bt().setRGB(o.r,o.g,o.b):s.clone(),u=typeof a=="string"?i.getColor(a).clone():new Bt().setRGB(a.r,a.g,a.b);if(l.equals(u))return;let d=s.clone();return{update:c=>{e.getValue(n)!==d&&e.setValue(n,d),d.lerpColors(l,u,c)},start:()=>{d.copy(l)},end:()=>{d.copy(u)}}}function TCt(e,t,r,n,i){if(!e.hasValue(n)||!(n in r))return;let o=t?t[n]:void 0,a=r[n],s=e.getValue(n),l=o?typeof o=="string"?i.getColor(o).clone():new Bt().setRGB(o.r,o.g,o.b):s.clone(),u=typeof a=="string"?i.getColor(a).clone():new As(a.r,a.g,a.b,a.a);if(l.equals(u))return;let d=s.clone();return{update:c=>{e.getValue(n)!==d&&e.setValue(n,d),d.lerpColors(l,u,c)},start:()=>{d.copy(l)},end:()=>{d.copy(u)}}}function OCt(e,t,r,n="steps"){if(!e.hasValue(n)||!(n in r))return;let i=[],o=e.getValue(n),a=t?t[n]:o,s=r[n];for(let l=0;l<o.length;++l){let u=a[l],d=s[l];u!==d&&i.push({update:c=>{o[l]=Et.lerp(u,d,c)},start:()=>{o[l]=u},end:()=>{o[l]=d}})}return i.length?i:void 0}function ICt(e,t,r,n="colors"){if(!e.hasValue(n)||!(n in r))return;let i=[],o=e.getValue(n),a=t?t[n]:o.map(l=>l.toArray()),s=r[n];for(let l=0;l<o.length;++l){let u=[...a[l]],d=[...s[l]];CP.isEqual(u,d)||i.push({update:c=>{o[l].fromArray(CP.lerp(u,d,c))},start:()=>{o[l].fromArray(u)},end:()=>{o[l].fromArray(d)}})}return i.length?i:void 0}function DCt(e,t,r,n="texture"){if(!e.hasValue(n)||!(n in r))return;let i=e.getNode("mat");if(!i)return;let o=t?t[n]:i,a=r[n],s=[...o.repeat],l=[...o.offset],u=[...a.repeat],d=[...a.offset];if(!$v.isEqual(s,u)||!$v.isEqual(l,d))return{update:c=>{i.repeat=$v.lerp(s,u,c),i.offset=$v.lerp(l,d,c),i.updateMatrix()},start:()=>{i.repeat=[...s],i.offset=[...l],i.updateMatrix()},end:()=>{i.repeat=[...u],i.offset=[...d],i.updateMatrix()}}}function RCt(e,t){return{update:()=>{e.transparent=t}}}var rk=new F,AY=new Eo;function kCt(e,t,r,n,i){var f,m,p,g,v,b;let o=[],a,s,l,u,d,c,h={slide:((f=t.pathSnapping)==null?void 0:f.slide)??((m=e.updatedPathSnapping)==null?void 0:m.slide)??((p=e.dataPatched.pathSnapping)==null?void 0:p.slide)??0,offset:((g=t.pathSnapping)==null?void 0:g.offset)??((v=e.updatedPathSnapping)==null?void 0:v.offset)??((b=e.dataPatched.pathSnapping)==null?void 0:b.offset)??0};if(d=eg("slide",h,t.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping,r.pathSnapping??e.dataPatched.pathSnapping,i),d&&o.push(d),c=eg("offset",h,t.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping,r.pathSnapping??e.dataPatched.pathSnapping,i),c&&o.push(c),!d&&!c&&(a=_Y("position",e,t,r,i),a&&o.push(a),s=_Y("scale",e,t,r,i),s&&o.push(s),l=LCt(e,t,r,n,i),l&&o.push(l),u=vCt("hiddenMatrix",e,t,r),u&&o.push(u)),a||s||l||u||d||c){let y=()=>{var x;e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD()),(x=e.parent)!=null&&x.matrixWorldFusedFalse&&(e.matrixWorld.multiplyMatrices(e.parent.matrixWorldFusedFalse,e.matrix),e.matrixWorldNeedsUpdate=!1),bu(e)&&Pc(e.parent)&&e.invalidateDownstreamBooleanData(!0),e.updatePathSnapping(Object.assign({},t.pathSnapping,h))};o.push({update:y,start:y,end:y})}return o}function LCt(e,t,r,n,i){var d;let o=t!=null&&t.rotation?t.rotation.map(c=>(typeof c=="string"?Number(i.getVariable(c)??0):c)*Et.DEG2RAD):void 0,a=(d=r.rotation)==null?void 0:d.map(c=>(typeof c=="string"?Number(i.getVariable(c)??0):c)*Et.DEG2RAD);if(!a)return;let s=o?new F().fromArray(o):new F().setFromEuler(e.rotation),l=new F().fromArray(a);if(s.equals(l))return;let u=rk.subVectors(l,s);if(n&&u.toArray().every(c=>Math.abs(c)<2*Math.PI)){let c=new Jt().setFromEuler(AY.setFromVector3(s)),h=new Jt().setFromEuler(AY.setFromVector3(l));return{update:f=>{gCt(c,h,e.quaternion,f)},start:()=>{e.rotation.setFromVector3(s)},end:()=>{e.rotation.setFromVector3(l)}}}else return{update:c=>{rk.lerpVectors(s,l,c),e.rotation.setFromVector3(rk)},start:()=>{e.rotation.setFromVector3(s)},end:()=>{e.rotation.setFromVector3(l)}}}function NCt(e,t,r,n){let i=[];if(!("cloner"in r)||!e.cloner)return i;let o=e.cloner,a="cloner"in t?t.cloner:{},s=r.cloner;sle.forEach(f=>{let m;f==="count"?m=eg("count",o.parameters,a,s,n,!0):m=wp(f,o.parameters,a??{},s,n),m&&i.push(m)});let l=zCt(o,a,s,n);l!=null&&l.length&&i.push(...l);let u=BCt(o,a,s,n);u!=null&&u.length&&i.push(...u);let d=FCt(o,a,s,n);d!=null&&d.length&&i.push(...d);let c=jCt(o,a,s,n);c!=null&&c.length&&i.push(...c);let h=UCt(o,a,s,n);return h!=null&&h.length&&i.push(...h),i.length&&i.push({update:()=>{o.update()}}),i}function zCt(e,t,r,n){if(e.parameters.type!=="radial")return;let i=t.radial,o=r.radial;if(!o)return;let a=e.parameters.radial,s=[];return lle.forEach(l=>{let u=wp(l,a,i??{},o,n);u&&s.push(u)}),s}function BCt(e,t,r,n){if(e.parameters.type!=="linear")return;let i=t.linear,o=r.linear;if(!o)return;let a=[],s=e.parameters.linear;return ule.forEach(l=>{let u=wp(l,s,i??{},o,n);u&&a.push(u)}),a}function FCt(e,t,r,n){if(e.parameters.type!=="grid")return;let i=t.grid,o=r.grid;if(!o)return;let a=[],s=e.parameters.grid;return cle.forEach(l=>{let u;l==="count"?u=wce(l,s,i??{},o,n,!0):u=wp(l,s,i??{},o,n),u&&a.push(u)}),a}function jCt(e,t,r,n){if(e.parameters.type!=="toObject")return;let i=t.toObject,o=r.toObject;if(!o)return;let a=[],s=e.parameters.toObject;return dle.forEach(l=>{let u;l==="count"?u=eg(l,s,i??{},o,n,!0):u=wp(l,s,i??{},o,n),u&&a.push(u)}),a}function UCt(e,t,r,n){if(!e.parameters.randomness)return;let i=t.randomnessObject,o=r.randomnessObject;if(!o)return;let a=[],s=e.parameters.randomnessObject;return hle.forEach(l=>{let u=wp(l,s,i??{},o,n);u&&a.push(u)}),a}function EY(e,t,r,n,i){let o=[];return e.data.visible&&o.push(...kCt(e,t,r,i,n)),e.data.visible&&o.push(...NCt(e,t,r,n)),bu(e)?(e instanceof Ua&&e.data.visible&&o.push(...SCt(e,t,r,n)),e.data.visible&&o.push(...CCt(e,t,r,n))):G1t(e)?e.data.visible&&o.push(..._Ct(e,t,r,n)):H1t(e)&&o.push(...bCt(e,t,r,n)),o.length?{update:a=>{o.forEach(s=>s.update(a))},start:a=>{o.forEach(s=>{var l;return(l=s.start)==null?void 0:l.call(s,a)})},end:a=>{o.forEach(s=>{var l;return(l=s.end)==null?void 0:l.call(s,a)})}}:void 0}var MY=new F;function s5(e,t,r=!1){let n=[];e.traverseChildren(i=>{var l,u,d,c,h;if(r&&((l=i.rigidBody)==null||l.setTranslation(i.position0,!0),(u=i.rigidBody)==null||u.setRotation(i.rotation0,!0),(d=i.rigidBody)==null||d.setLinvel(MY,!0),(c=i.rigidBody)==null||c.setAngvel(MY,!0)),!Dr.is(i))return;let o=i.uuid,a=i.data;if(delete i.states,i.uuid===yb)return;let s=!1;n.some(f=>{var m;return(m=e.scene.find(o))==null?void 0:m.isDescendantOf(f)})?s=!0:((h=a.physics)==null?void 0:h.fusedBody)===!0&&a.physics.rigidBody==="dynamic"&&n.push(o),i.data=a,i.currentState=null,i.reversibleToState=null,i.currentTransitionEvent=null;for(let f of a.states){let m={...f.data};e.data.globalPhysics.usePhysics===!0&&a.physics&&(a.physics.rigidBody==="dynamic"||s)&&(f.data.position!==void 0&&delete m.position,f.data.rotation!==void 0&&delete m.rotation,f.data.hiddenMatrix!==void 0&&delete m.hiddenMatrix),i.states||(i.states={}),i.states[f.id]=dm.patch(a,m)}VCt(e.scene,i,null,t,a.events.find(f=>f.data.type==="Follow"||f.data.type==="LookAt")!==void 0),$Ct(e)})}function $Ct(e){e.traverseEntity(t=>{for(let r of t.data.events){let n=[];switch(r.data.type){case"Follow":case"MouseHover":case"Scroll":case"MouseDown":case"MouseUp":case"MousePress":case"KeyUp":case"KeyDown":case"KeyPress":case"Collision":n.push(...r.data.actions);break;case"GameControl":for(let i of Object.values(r.data.gameActions))n.push(...i);break;case"DragDrop":n.push(...r.data.dragDropActions.drag,...r.data.dragDropActions.drop);break;case"Conditional":n.push(...r.data.inActions,...r.data.outActions);break}for(let i of n)if(i.data.type==="Create"&&i.data.hideBase==="Yes"){let o=e.scene.find(i.data.object);o&&(o.visible=!1)}}})}function VCt(e,t,r,n,i=!1){if(t instanceof Ua&&t.removeInteractionGeometry(),t.changeSelectedState(r,{scene:e,shared:n},i),t instanceof Ua&&t.updateGeometryGroupsIfNeeded(),t instanceof ha&&t.updateCameraState(t.dataPatched,{scene:e,shared:n}),t.cloner)for(let o of t.cloner.children)o.playModeVisible=void 0;t.updateVisible()}function Sce(e){let t;if(e.easing===5){let{control1:r,control2:n}=e;t=`cubicBezier(
			${r[0]}, ${r[1]}, ${n[0]}, ${n[1]}
		)`}else if(e.easing===6){let{mass:r,stiffness:n,damping:i,velocity:o}=e;t=`spring( ${r}, ${n}, ${i}, ${o} )`}else{let r;switch(e.easing){case 0:r=Jh.linear;break;case 1:r=Jh.ease;break;case 2:r=Jh.easeIn;break;case 3:r=Jh.easeOut;break;case 4:r=Jh.easeInOut;break;default:r=Jh.linear}let[n,i,o,a]=r;t=`cubicBezier( ${n}, ${i}, ${o}, ${a} )`}return{duration:e.duration,easing:t}}function iB(e){let t={delay:0,loop:e.repeat===-1?!0:e.repeat+1};if(e.repeat===0)t.direction="normal",t.rewind=!1;else switch(e.direction){case"pingpong":t.direction="alternate",t.rewind=!1;break;case"pingpong-rewind":t.direction="alternate",t.rewind=!0;break;default:t.direction="normal",t.rewind=!1;break}switch(t.delay=0,t.endDelay=0,t.startOnceDelay=0,t.pingPongDelayCorrection=0,t.pingPongEndDelayCorrection=0,e.delayDirection){case"start-once":t.startOnceDelay=e.delay;break;case"start":t.delay=e.delay;break;case"end":t.endDelay=e.delay;break;case"start-end":case void 0:t.delay=e.delay,t.endDelay=e.delay;break}return t.direction==="alternate"&&(t.delay/=2,t.endDelay/=2,e.delayDirection==="start"?(t.pingPongDelayCorrection=t.delay,typeof t.loop=="number"&&t.loop%2===0&&(t.pingPongEndDelayCorrection=t.delay)):e.delayDirection==="end"?typeof t.loop=="number"&&t.loop%2!==0&&(t.pingPongEndDelayCorrection=t.endDelay):e.delayDirection==="start-end"&&(t.pingPongDelayCorrection=t.delay,t.pingPongEndDelayCorrection=t.endDelay)),t}var HCt={type:"beginState"},GCt={type:"completeState",isfromEntity:!1},PY=class{constructor(e,t,r,n,i,o){if(this.object=e,this.data=n,this.sharedAssets=i,this.allowSlerp=o,this.targets={t:0},this.firstLoop=!0,this._changeBegan=!1,this._changeCompleted=!0,this.onChange=()=>{this.callback&&(this.callback.update(this.targets.t),this.object.dispatchEvent({type:"requestRender"})),this.targets.t===0||this.targets.t===1?this._changeCompleted||(this._changeCompleted=!0,this._changeBegan=!1,this.onChangeComplete()):(this._changeCompleted&&(this._changeCompleted=!1),this._changeBegan||(this._changeBegan=!0,this.onChangeBegin()))},this.onChangeBegin=()=>{this.object.reversibleToState=this.to.id;let a=this.targets.t>.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=a,this.object.dispatchEvent({type:"beginState",state:a}),this.object.traverseEntity(s=>{s!==this.object&&s instanceof ha&&s.dispatchEvent(HCt)})},this.onChangeComplete=()=>{this.firstLoop&&(this.onFirstLoop(),this.firstLoop=!1),this.object.reversibleToState=this.to.id;let a=this.targets.t<.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=a,this.object.dispatchEvent({type:"completeState",state:a}),this.object.traverseEntity(s=>{s!==this.object&&s instanceof ha&&s.dispatchEvent(GCt)})},this.onFirstLoop=()=>{this.useCurrentState&&(this.callback=EY(this.object,this.from.data,this.to.data,this.sharedAssets,this.allowSlerp))},t===void 0){let a=iE(this.object,this.object.currentState===r?this.object.prevState:this.object.currentState);if(!a)throw new Error("Missing property");this.from=a}else{let a=iE(this.object,t);if(!a)throw new Error("Missing property");this.from=a}if(r===void 0)throw new Error("Missing property");{let a=iE(this.object,r);if(!a)throw new Error("Missing property");this.to=a}this.useCurrentState=t===void 0||r===void 0,this.params={targets:this.targets,t:1,autoplay:!1,...iB(n),...Sce(n),change:this.onChange},this.callback=EY(this.object,t===void 0?{}:this.from.data,r===void 0?{}:this.to.data,this.sharedAssets,this.allowSlerp)}get changeBegan(){return this._changeBegan}get changeCompleted(){return this._changeCompleted}},_ce=class extends qo{constructor(e,t,r,n){if(super(),this.data=e,this.page=t,this.shared=r,this.condition=n,this.toggleIsForward=!1,this.timelineNeedsRebuild=!1,this.useToggle=!1,this.onTimelineChangeComplete=()=>{var o;this.data.tweens[0].data.direction!=="normal"&&(this.toggleIsForward=!this.toggleIsForward),this.timelineNeedsRebuild!==!1&&((o=this.timeline)==null||o.pause(),this.buildTimeline({isForward:this.toggleIsForward,needsRebuild:!1,isRebuild:!0}),this.timeline.play())},!e.object)throw new Error("Missing property");let i=this.page.scene.find(e.object);if(!i)throw new Error("Missing property");if(!i.states)throw new Error("Missing property");if(this.object=i,e.tweens.length<2)throw new Error("Missing property");this.tweens=Array(this.data.tweens.length-1),this.startOnceDelay=e.tweens[0].data.delayDirection==="start-once"?e.tweens[0].data.delay:0,this.init()}get playing(){return this.timeline&&this.timeline.paused===!1}init(){this.initialCurrentState=iE(this.object,this.object.currentState).id,this.toggleIsForward=!1}get currentState(){return this.useToggle?this.initialCurrentState:this.object.currentState}buildTimeline({isForward:e=!0,needsRebuild:t=!1,isRebuild:r=!1}={}){var n,i,o,a;try{let s=iB(this.data.tweens[0].data);r&&typeof s.loop=="number"&&s.loop--,(n=this.timeline)==null||n.pause(),this.timeline=xce.timeline({autoplay:!1,...s,...s.loop===!0||s.loop>1?{timelineChangeComplete:this.onTimelineChangeComplete}:{}});let l=this.tweens.findIndex(u=>u==null?void 0:u.changeBegan);if(t===!0&&(this.timelineNeedsRebuild=!0),e){let u=l===-1?0:l;for(let d=u;d<this.data.tweens.length-1;d++){let c=this.data.tweens[d],h=this.data.tweens[d+1],f;d===u&&(this.object.wasMovedByUser===!0||((i=this.object.previousAction)==null?void 0:i.playing)===!0)?(f=void 0,this.object instanceof ha&&(this.object.wasMovedByUser=!1)):f=c.data.state===void 0?this.currentState:c.data.state;let m=new PY(this.object,f,h.data.state===void 0?this.currentState:h.data.state,h.data,this.shared,this.data.allowSlerp??!1);l!==-1&&d===u&&Object.assign(m.params,{startOnceDelay:0}),this.tweens[d]=m,this.timeline.add(m.params,this.timeline.duration+(d===u?s.delay:0))}this.timeline.duration+=s.endDelay}else{let u=l===-1?this.data.tweens.length-1:l+1;for(let d=u;d>0;d--){let c=this.data.tweens[d],h=this.data.tweens[d-1],f;d===u&&(this.object.wasMovedByUser===!0||((o=this.object.previousAction)==null?void 0:o.playing)===!0)?(f=void 0,this.object instanceof ha&&(this.object.wasMovedByUser=!1)):f=c.data.state===void 0?this.currentState:c.data.state;let m=new PY(this.object,f,h.data.state===void 0?this.currentState:h.data.state,c.data,this.shared,this.data.allowSlerp??!1);l!==-1&&d===u&&Object.assign(m.params,{startOnceDelay:0}),this.tweens[d-1]=m,this.timeline.add(m.params,this.timeline.duration+(d===u?s.endDelay:0))}this.timeline.duration+=s.delay}}catch(s){s instanceof Error&&console.error(s.message)}((a=this.object.previousAction)==null?void 0:a.playing)===!0&&this.object.previousAction.pause(),this.object.previousAction=this}play(){if(Qi(this.shared,this.condition)===!1||this.playing)return!1;clearTimeout(this.timeoutId);let e=iB(this.data.tweens[0].data).pingPongDelayCorrection;this.timeoutId=window.setTimeout(()=>{try{this.buildTimeline(),this.timeline.play()}catch(t){t instanceof Error&&console.error(t.message)}},this.startOnceDelay+e)}pause(){var e;(e=this.timeline)==null||e.pause(),clearTimeout(this.timeoutId),this.tweens=Array(this.data.tweens.length-1),delete this.timeoutId}stop(){this.pause();let e=this.data.tweens[0].data.state===void 0?this.initialCurrentState:this.data.tweens[0].data.state;this.object.changeSelectedState(e,{scene:this.page.scene,shared:this.shared}),this.object.currentState=e}seek(e){var t;this.timeline===void 0&&this.buildTimeline(),(t=this.timeline)==null||t.seek(e*this.timeline.duration,!0)}toggle(e){var t;if(Qi(this.shared,this.condition)===!1)return!1;this.useToggle=!0,clearTimeout(this.timeoutId),this.toggleIsForward=e??!this.toggleIsForward,this.playing?((t=this.timeline)==null||t.pause(),this.buildTimeline({isForward:this.toggleIsForward,needsRebuild:!0}),this.timeline.play()):this.timeoutId=window.setTimeout(()=>{var r;(r=this.timeline)==null||r.pause(),this.buildTimeline({isForward:this.toggleIsForward}),this.timeline.play()},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause()}};function iE(e,t){var i;let r,n;if(typeof t=="string"?(r=t,n=(i=e.states)==null?void 0:i[r]):t===null&&(r=null,n=e.data),!(r===void 0||n===void 0))return{id:r,data:n}}var WCt={type:"beginState"},TY={type:"completeState",isfromEntity:!1},OY={type:"requestRender"},Cce=class extends qo{constructor(e,t,r,n){super(),this.data=e,this.page=t,this.shared=r,this.condition=n,this.toggleIsForward=!1,this.useToggle=!1,this.posStart=new F,this.posEnd=new F,this.qStart=new Jt,this.qEnd=new Jt,this.zoomStart=1,this.zoomEnd=1}init(){}get playing(){return this.animation&&this.animation.began&&!this.animation.completed}buildAnimation(e=!1){if(!this.data.animate)return;let t=this.page.scene.find(this.data.targetCamera);if(!t||!t.visible)throw new ReferenceError("Target camera not founded or not visible");let r={t:0};this.posStart.copy(this.page.activeCamera.position),this.qStart.copy(this.page.activeCamera.quaternion),this.zoomStart=this.page.activeCamera.zoom,this.animation=xce({targets:r,t:1,...Sce(this.data),update:()=>{r.t===0&&(this.useToggle&&!this.toggleIsForward?(this.posEnd.copy(this.fromCamera.position),this.qEnd.copy(this.fromCamera.quaternion),this.zoomEnd=this.fromCamera.zoom,this.switchCamera(this.fromCamera.uuid)):(this.posEnd.copy(t.position),this.qEnd.copy(t.quaternion),this.zoomEnd=t.zoom,this.fromCamera=this.page.activeCamera,this.switchCamera(t.uuid)),this.page.activeCamera.dispatchEvent(WCt));let n=this.page.activeCamera;n.position.lerpVectors(this.posStart,this.posEnd,r.t),n.quaternion.slerpQuaternions(this.qStart,this.qEnd,r.t),n.zoom=this.zoomStart+(this.zoomEnd-this.zoomStart)*r.t,n.wasMovedBySwitchCameraAction=!0,n.updateMatrix(),n.updateMatrixWorld(),n.updateProjectionMatrix(),n.dispatchEvent(OY),r.t===1&&n.dispatchEvent(TY)}})}switchCamera(e){let t=this.page.scene.find(e);if(!t||!t.visible)throw new ReferenceError("Target camera not founded or not visible");this.page.switchActiveCamera(t),this.page.activeCamera.dispatchEvent({type:"cameraChange",camera:t})}play(){if(Qi(this.shared,this.condition)===!1)return!1;if(!this.playing&&this.page.activeCamera.uuid!==this.data.targetCamera)try{clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{var e;delete this.timeoutId,this.data.animate?(this.buildAnimation(),(e=this.animation)==null||e.play()):this.switchCamera(this.data.targetCamera)},this.data.delay*1e3)}catch{}}pause(){var e;(e=this.animation)==null||e.pause(),clearTimeout(this.timeoutId),delete this.timeoutId}toggle(e){var t,r;if(Qi(this.shared,this.condition)===!1)return!1;this.useToggle=!0,clearTimeout(this.timeoutId),this.toggleIsForward=e??!this.toggleIsForward;try{this.playing?((t=this.animation)==null||t.pause(),this.buildAnimation(!0),(r=this.animation)==null||r.play()):this.timeoutId=window.setTimeout(()=>{var n,i;delete this.timeoutId,this.data.animate?((n=this.animation)==null||n.pause(),this.buildAnimation(),(i=this.animation)==null||i.play()):(this.toggleIsForward?(this.fromCamera=this.page.activeCamera,this.switchCamera(this.data.targetCamera)):this.switchCamera(this.fromCamera.uuid),this.page.activeCamera.dispatchEvent(TY),this.page.activeCamera.dispatchEvent(OY))},this.data.delay*1e3)}catch{}}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause(),this.toggleIsForward=!1}},Ace=class extends qo{constructor(e,t,r,n,i){var u,d,c;super(),this.page=t,this.animationControls=r,this.shared=n,this.condition=i,this.startOnceDelay=0,this.toggleIsForward=!1;let o=e.object,a=t.scene.find(e.object);a&&Array.isArray(a.identity)&&(o=a.identity[0]),this.data={...e,object:o};let s=this.animationControls.clipIdToAction[e.clipId+"/"+o];this.duration=((u=s==null?void 0:s.getClip())==null?void 0:u.duration)??1;let l=((c=(d=s==null?void 0:s.getClip())==null?void 0:d.tracks[0])==null?void 0:c.times.length)??1/0;this.leftFrameTime=this.data.crop[0]/l*this.duration,this.rightFrameTime=this.data.crop[1]/l*this.duration,this.startOnceDelay=e.delay}get playing(){var e;return((e=this.threeAnimAction)==null?void 0:e.isRunning())??!1}play(e=!1){if(Qi(this.shared,this.condition)===!1)return!1;window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{var r;if(this.threeAnimAction=this.animationControls.play(this.data),!this.threeAnimAction)return;this.threeAnimAction.reset(),this.threeAnimAction.time=this.leftFrameTime,this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime;let t=this.data.object;Object.entries(this.animationControls.clipIdToAction).forEach(([n,i])=>{let o=n.split("/")[1];this.threeAnimAction!==i&&o===t&&i.isRunning()&&(e?i.fadeOut(.2):i.stop())}),e&&((r=this.threeAnimAction)==null||r.fadeIn(.2))},this.startOnceDelay)}pause(){this.threeAnimAction&&(this.threeAnimAction.paused=!0),window.clearTimeout(this.timeoutId),delete this.timeoutId}stop(){var e;(e=this.threeAnimAction)==null||e.fadeOut(.2)}seek(e){this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction&&(this.threeAnimAction.paused=!0,this.threeAnimAction.time=Et.clamp(this.threeAnimAction.time+1/60*e,this.leftFrameTime,this.rightFrameTime-16e-5),this.animationControls.needsUpdate=!0,this.animationControls.requestRender())}toggle(e,t=!1){if(Qi(this.shared,this.condition)===!1)return!1;this.toggleIsForward=e??!this.toggleIsForward,this.threeAnimAction&&(this.threeAnimAction._loopCount=0),this.playing?this.threeAnimAction&&(this.threeAnimAction.timeScale=this.toggleIsForward?1:-1,this.toggleIsForward?(this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime)):this.timeoutId=window.setTimeout(()=>{var r;if(this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction){this.toggleIsForward?(this.threeAnimAction.time=this.leftFrameTime,this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction.time=this.rightFrameTime,this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime),this.threeAnimAction.paused=!1,this.threeAnimAction.timeScale=this.toggleIsForward?1:-1;let n=this.data.clipId.split("/")[1];Object.entries(this.animationControls.clipIdToAction).forEach(([i,o])=>{let a=i.split("/")[1];this.threeAnimAction!==o&&a===n&&o.isRunning()&&(t?o.fadeOut(.2):o.stop())}),t&&((r=this.threeAnimAction)==null||r.fadeIn(.2))}},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){var t;let e=(t=this.animationControls.clipIdToAction[this.data.clipId+"/"+this.data.object])==null?void 0:t.getClip();e&&(e.duration=this.duration),this.pause()}},Ece=class{constructor(e,t,r,n,i){this.data=e,this.page=t,this.eventManager=r,this.shared=n,this.condition=i,this.timeOutId=-1,this.scene=t.scene}dispatch(){if(Qi(this.shared,this.condition)===!1)return!1;this.data.target!==this.page.uuid&&(window.clearTimeout(this.timeOutId),this.timeOutId=window.setTimeout(()=>{this.play()},this.data.delay*1e3))}dispose(){window.clearTimeout(this.timeOutId)}play(){if(this.scene.children.every(t=>t.uuid!==this.data.target))return;this.data.transition==="fade"&&this.data.duration>0&&this.eventManager.eventContext.renderer.renderFromSceneForSceneTransitionPass(this.scene,this.scene.activeCamera,this.data.duration*1e3),this.eventManager.deactivate(),this.eventManager.controlsManager.deactivate();let e=this.scene.activeCamera;this.scene.updatePage(this.data.target),this.scene.activePage.switchToPlayCamera(),this.scene.activeCamera.copyViewPlaneSize(e),s5(this.scene.activePage,this.shared),this.eventManager.activate(),this.eventManager.controlsManager.activate(this.eventManager)}},Mce=class{constructor(e,t,r,n){this.data=e,this.page=t,this.shared=r,this.condition=n,this.evaluatedCondition=!1}checkConditions(){this.evaluatedCondition=Qi(this.shared,this.condition)}dispatch(){if(this.evaluatedCondition===!1)return!1;let e=this.shared.getVariable(this.data.variableId),t=Gle(this.data.expression,this.shared,Ys.typeOfVariable(e));t!==void 0&&this.shared.updateVariable(this.data.variableId,typeof t=="string"?{textValue:t}:t)}dispose(){}},Pce=class{constructor(e,t,r,n){this.data=e,this.page=t,this.shared=r,this.condition=n,this.timeoutId=null}dispatchInner(){if(Qi(this.shared,this.condition)===!1)return!1;let e=this.shared.getDynamicVariablePlayState(this.data.variableId);if(this.data.mode==="PlayPause")this.shared.getDynamicVariableToggleIsForward(this.data.variableId)===void 0&&this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!0),this.shared.setDynamicVariablePlayState(this.data.variableId,e==="Playing"?"Paused":"Playing");else if(this.data.mode==="Play"&&e!=="Playing")this.shared.getDynamicVariableToggleIsForward(this.data.variableId)===void 0&&this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!0),this.shared.setDynamicVariablePlayState(this.data.variableId,"Playing");else if(this.data.mode==="Stop"&&e!=="Stopped")this.shared.setDynamicVariablePlayState(this.data.variableId,"Stopped");else if(this.data.mode==="Pause"&&e!=="Paused")this.shared.setDynamicVariablePlayState(this.data.variableId,"Paused");else if(this.data.mode==="Restart")this.shared.setDynamicVariablePlayState(this.data.variableId,"Restarted");else if(this.data.mode==="Toggle"){let t=this.shared.getDynamicVariableToggleIsForward(this.data.variableId);e==="Playing"?this.shared.setDynamicVariableToggleIsForward(this.data.variableId,t===void 0?!1:!t):(this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!t),this.shared.setDynamicVariablePlayState(this.data.variableId,"Playing"))}}dispatch(){let e=this.data.delay,t=this.shared.getDynamicVariablePlayState(this.data.variableId);this.data.mode==="PlayPause"&&t==="Playing"&&(e=this.data.pauseDelay),e!==0?(this.timeoutId&&window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{this.timeoutId=null,this.dispatchInner()},e)):this.dispatchInner()}dispose(){this.timeoutId&&window.clearTimeout(this.timeoutId)}};function Qi(e,t){if(t===void 0)return!0;if(t.expression.length===0)return!1;let r=Gle(t.expression,e,"boolean");return t.negate?!r:!!r}function Ka(e,t,r,n,i,o){let a={Audio:[],Video:[],Link:[],Destroy:[],Create:[],Reset:[],Transition:[],SwitchCamera:[],Animation:[],SceneTransition:[],SetVariable:[],DynamicVariablePlay:[]},s=l=>({id:u,data:d})=>{try{d.type==="Audio"?Ls[e.type].includes("Audio")&&a.Audio.push(new tce(u,d,o,n,l)):d.type==="Video"?Ls[e.type].includes("Video")&&a.Video.push(new Oce(u,d,o,n,l)):d.type==="Link"?Ls[e.type].includes("Link")&&a.Link.push(new F_t(d,i.controlsManager,n,l)):d.type==="Create"?Ls[e.type].includes("Create")&&a.Create.push(new Ice(d,r,i.controlsManager,n,l)):d.type==="Destroy"?Ls[e.type].includes("Destroy")&&a.Destroy.push(new rce(d,r,i.controlsManager,n,l)):d.type==="Reset"?Ls[e.type].includes("Reset")&&a.Reset.push(new nce(d,r,n,i,l)):d.type==="Transition"?Ls[e.type].includes("Transition")&&a.Transition.push(new _ce(d,r,n,l)):d.type==="SwitchCamera"?Ls[e.type].includes("SwitchCamera")&&a.SwitchCamera.push(new Cce(d,r,n,l)):d.type==="SceneTransition"?Ls[e.type].includes("SceneTransition")&&a.SceneTransition.push(new Ece(d,r,i,n,l)):d.type==="Animation"?Ls[e.type].includes("Animation")&&a.Animation.push(new Ace(d,r,i.animationControls,n,l)):d.type==="SetVariable"?Ls[e.type].includes("SetVariable")&&a.SetVariable.push(new Mce(d,r,n,l)):d.type==="DynamicVariablePlay"?Ls[e.type].includes("DynamicVariablePlay")&&a.DynamicVariablePlay.push(new Pce(d,r,n,l)):d.type==="Conditional"&&Ls[e.type].includes("Conditional")&&(d.ifActions.forEach(s({expression:d.condition,negate:!1})),d.elseActions.forEach(s({expression:d.condition,negate:!0})))}catch{}};return t.forEach(s()),a}function To(e){Object.values(e).forEach(t=>{t.forEach(r=>{(r instanceof tce||r instanceof Oce||r instanceof Ace||r instanceof _ce||r instanceof Ice||r instanceof rce||r instanceof Cce||r instanceof Ece||r instanceof nce||r instanceof Mce||r instanceof Pce)&&r.dispose()})})}function qCt(e,t){let r;if("material"in e){let n=e.material;Array.isArray(n)?r=e.material[0].layers.find(i=>i.uuid===t):r=e.material.layers.find(i=>i.uuid===t)}if(r)return r.color.texture.image.img instanceof HTMLVideoElement?r.color.texture.image.img:void 0}var Tce=new Map,I1=new Map,Py=class{constructor(e,t,r){this.data=t,this.delay=0,this.status="stopped";let{layerId:n,loop:i,volume:o,delay:a}=t;if(this.object=r,n===void 0)throw new Error("Missing property");let s=qCt(r,n);s&&(this.videoElement=s,this.videoElement.loop=i===1/0,this.videoElement.autoplay=!0,o!==void 0&&(this.videoElement.volume=o)),a!==void 0&&(this.delay=a),I1.has(r.uuid)?I1.get(r.uuid).push(this):I1.set(r.uuid,[this]),Tce.set(e,this),this.pause()}mute(){!this.videoElement||(this.videoElement.muted=!0)}unMute(){!this.videoElement||(this.videoElement.muted=!1)}play(e){if(!this.videoElement)return;let t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);e?(this.mute(),this.delay+=150):t?(this.mute(),window.setTimeout(()=>{this.unMute()},100)):this.unMute(),this.delayTimerId=window.setTimeout(()=>{if(!this.videoElement)return;let r=this.videoElement.play();r!==void 0&&r.then(n=>{}).catch(n=>{this.play()}),this.clearDelay()},this.delay),this.status="playing"}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}pause(){!this.videoElement||(this.videoElement.pause(),this.status="paused")}stop(){!this.videoElement||(this.videoElement.pause(),this.videoElement.currentTime=0,this.status="stopped",this.clearDelay())}playByToggle(){this.data.toggle==="stop"?this.status==="playing"?this.stop():(this.stop(),this.play()):this.data.toggle==="pause"?this.status==="playing"?this.pause():this.play():(this.stop(),this.play())}dispose(){!this.videoElement||(this.stop(),this.videoElement.muted=!0)}},oB=class{constructor(e){this.data=e}dispatch(){this.data.playVideo?this.pauseVideo(this.data.playVideo):this.data.object?this.pauseAllVideosFromObject(this.data.object):this.pauseAllVideos()}pauseVideo(e){let t=Tce.get(e);!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t[this.data.interaction](),this.disposeDelay()},this.data.delay)):t[this.data.interaction]())}pauseAllVideosFromObject(e){let t=I1.get(e);!(t!=null&&t.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(r=>r[this.data.interaction]()),this.disposeDelay()},this.data.delay)):t.forEach(r=>r[this.data.interaction]()))}pauseAllVideos(){let e=[...I1.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(t=>{t.forEach(r=>{r[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(t=>{t.forEach(r=>{r[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},Oce=class{constructor(e,t,r,n,i){if(this.data=t,this.shared=n,this.condition=i,t.interaction==="play")this.interaction=new Py(e,t,r);else if(t.interaction==="pause"||t.interaction==="stop")this.interaction=new oB(t);else throw new Error("Missing property")}dispatchBasic(){if(Qi(this.shared,this.condition)===!1)return!1;this.interaction instanceof Py?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){if(Qi(this.shared,this.condition)===!1)return!1;this.interaction instanceof Py?this.interaction.play():this.interaction.dispatch()}dispose(){this.interaction.dispose()}},IY=(()=>{let e,t,r,n;function i(s){!e&&!DY()&&(t==null?void 0:t.sharedGameControlGlobals.createdObjects.length)>0&&(e=requestAnimationFrame(o)),s&&(t=s,n=s.requestRender)}function o(s){let l=r?s-r:0,u=t.sharedGameControlGlobals.createdObjects,d=t.sharedGameControlGlobals.nCreatedPerAction,c=u.length,h=0;for(;h<c;){let f=u[h];f.userData.createdTime===void 0&&(f.userData.createdTime=s),f.userData.lifetime===void 0&&f.userData.quantity===void 0||f.userData.lifetime&&s-f.userData.createdTime<f.userData.lifetime||f.userData.quantity&&d[f.userData.actionId]<=f.userData.quantity?(f.userData.velocity&&(f.position.addScaledVector(f.userData.velocity,l/1e3),f.updateMatrix(),n()),h++):(d[f.userData.actionId]>f.userData.quantity&&d[f.userData.actionId]--,u.splice(h,1),f.removeFromParent(),t.sharedGameControlGlobals.rapierWorld&&f.rigidBody?(t.sharedGameControlGlobals.colliderToEntity.delete(f.rigidBody.collider(0).handle),t.sharedGameControlGlobals.rapierWorld.removeRigidBody(f.rigidBody)):(f.bvhGeometry=void 0,t.sharedGameControlGlobals.entitiesWithTransformAnim=t.sharedGameControlGlobals.entitiesWithTransformAnim.filter(m=>m.bvhGeometry!==void 0)),c--,n())}e=h>0?requestAnimationFrame(o):void 0,r=h>0?s:void 0}function a(){DY()?e&&(cancelAnimationFrame(e),e=void 0,r=void 0):i()}return typeof document<"u"&&document.addEventListener("visibilitychange",a),i})();function DY(){return!!document&&document.hidden}var RY=new Jt,KCt=new F,XCt=new F,Ice=class{constructor(e,t,r,n,i){this.data=e,this.page=t,this.controlsManager=r,this.shared=n,this.condition=i,this.intervalId=null,this.timeoutIdQueue=[],this.uniqueId=Et.generateUUID(),this.dispatch=()=>{if(Qi(this.shared,this.condition)===!1)return!1;this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3)):this.dispatchInner()},this.dispatchFromStart=()=>{if(Qi(this.shared,this.condition)===!1)return!1;this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3))},this.dispatchThrottled=jgt(this.dispatch,1e3/this.data.creationSpeed),this.dispatchStart=()=>{this.intervalId===null&&(this.intervalId=window.setInterval(this.dispatch,1e3/this.data.creationSpeed))},this.dispatchStop=()=>{this.intervalId!==null&&(window.clearInterval(this.intervalId),this.intervalId=null)},this.dispatchInner=()=>{this.timeoutIdQueue.shift();let a=new ua(this.object);if(a.playModeVisible=!0,a.expand(),this.data.coordinateSystem!=="world"){let l=this.data.coordinateSystem,u=this.page.scene.find(l);u&&(u.updateMatrixWorldSVD(),a.hiddenMatrix.copy(u.matrixWorldRigid))}a.position.fromArray(this.data.position),a.rotation.fromArray(this.data.rotation),a.updateMatrix(),this.page.add(a);let s=this.controlsManager.sharedGameControlGlobals;s.createdObjects.push(a),s.nCreatedPerAction[this.uniqueId]===void 0?s.nCreatedPerAction[this.uniqueId]=1:s.nCreatedPerAction[this.uniqueId]++,a.updateWorldMatrix(!0,!0),a.traverseObject(this.traverseObjectCB),IY(),this.controlsManager.requestRender()},this.traverseObjectCB=a=>{var d,c,h,f;a.hasNonUniformScale&&a.updateMatrixWorldSVD();let s;if(this.controlsManager.sharedGameControlGlobals.rapierWorld){if(a instanceof Eu)if(a.objectForSample){if(a.objectForSample.dataPatched.physics.fusedBody)return;s=a.object}else return a.object.dataPatched.physics.fusedBody===!0&&a.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(a instanceof ua)s=a.object;else if(s=a,(d=s.dataPatched.cloner)==null?void 0:d.hideBase)return!0}else{if(a instanceof Eu)return;a instanceof ua?s=a.object:s=a}this.data.destroy==="Time"?a.userData.lifetime=this.data.lifetime*1e3:this.data.destroy==="Quantity"&&(a.userData.quantity=this.data.destroyAfterQuantity,a.userData.actionId=this.uniqueId);let l=new F().fromArray(this.data.velocity),u=s.dataPatched;if(!(u.physics.enabled==="visibility"?!u.visible:!u.physics.enabled)&&(this.controlsManager.sharedGameControlGlobals.rapierWorld?(this.controlsManager.addRigidBody(a,s,{fromCreate:!0,dynamic:this.data.dynamic}),this.data.destroy==="Collision"&&((c=a.rigidBody)==null||c.collider(0).setActiveEvents(1),a.userData.hasCollisionDestroy=!0),a.matrixWorld.decompose(KCt,RY,XCt),l.applyQuaternion(RY),this.data.velocity.some(m=>m!==0)&&this.data.dynamic&&((h=a.rigidBody)==null||h.setLinvel(l.divideScalar(this.controlsManager.pixelsPerMeter),!0))):("geometry"in a.object&&this.controlsManager.addBoundsTree(a),this.data.velocity.some(m=>m!==0)&&this.data.dynamic&&(a.userData.velocity=l)),((f=s.dataPatched.physics)==null?void 0:f.fusedBody)===!0))return!0};let o=this.page.scene.find(this.data.object);if(!o)throw new Error("Missing Property");if(this.object=o,this.data.coordinateSystem!=="world"&&!this.page.scene.find(this.data.coordinateSystem))throw new Error("Missing Property");IY(r)}dispose(){this.intervalId!==null&&(window.clearInterval(this.intervalId),this.intervalId=null),this.timeoutIdQueue.forEach(e=>window.clearTimeout(e)),this.dispatchThrottled.cancel(),this.page.remove(...this.controlsManager.sharedGameControlGlobals.createdObjects),this.controlsManager.sharedGameControlGlobals.createdObjects=[]}},Dce=200,nk=.02,ik=.3,YCt=65;new F;var kY=new F,LY=new F,QCt=new F,Ca=new F,ts=new F,jh=new F,ok=new qe,NY=new qe,ZCt=new qe;new qe;var lu=new Jt,bd=new Jt,rc=new Eo(0,0,0,"YXZ"),JCt=new F(1,0,0),uu=new F(0,1,0),eAt=new F(0,0,1),zY=new F(1,1,1);new Ps;var tAt=1,rAt=.025,nAt=16e-6,BY=12,iAt=20,yo=new Vl,bl=new ki,oAt={type:"requestRender"},aAt={type:"updateMatrix"},FY=Math.PI/6,aB=class extends qo{constructor(e,t,r,n,i,o,a,s,l){var m;super(),this.object=e,this.domElement=t,this.data=r,this.gloabalPhysics=n,this.controlsManager=i,this.cameraFollow=o,this.camera=a,this.page=s,this.sharedAssets=l,this.enableDamping=!0,this.hiddenMatrix0=new qe,this.target0=new F,this.zoom0=1,this.rotForce=1,this.moveForce=1,this.pixelsPerMeter=Dce,this.euler0=new Eo(0,0,0,"YXZ"),this.position0Cam=new F,this.quat0Cam=new Jt,this.scale0Cam=new F,this.hiddenMatrix0Cam=new qe,this.threshEndTranslate=.01,this.threshEndRotate=1e-8,this.threshEndRotVel=.005,this.collider={type:"capsule",radius:40,segment:new Vl(new F(0,-40,0),new F(0,40,0)),matrix:new qe,position:new F,rotation:new Jt},this.euler=new Eo(0,0,0,"YXZ"),this.eulerDelta=new F,this.lastPosition=new F,this.lastCameraQuaternion=new Jt,this.lastCameraPosition=new F,this.PI_2=Math.PI/2,this.prevMouse=new ue,this.velocityTarget=new F,this.velocity=new F,this.directionXZ=new F,this.rotVelocityStick=new F,this.rotVelocityTarget=new F,this.rotVelocity=new F,this.rotDirection=new F,this.nonColliderRotOffset=new qe,this.nonColliderPosOffset=new qe,this.firstPointerId=-1,this.rot=new F,this.path=[],this.movementState={moveNegZ:0,movePosZ:0,moveNegX:0,movePosX:0,moveNegY:0,movePosY:0,rotPosX:0,rotNegX:0,rotPosY:0,rotNegY:0,jump:0,run:0},this.vrEulerYOffset=0,this.onObject=!1,this.actionState={},this.keyAssignments=[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","ArrowUp"],["rotPosY","ArrowLeft"],["rotNegX","ArrowDown"],["rotNegY","ArrowRight"],["jump"," "]],this.collisionEnabled=!0,this.offsetMatrix=new qe,this.objectToTarget=new F,this.objectToTarget0=new F,this.objectToCamXZ=new F,this.objectToCamXZ0=new F,this.targetToCamera=new F,this.targetToCamera0=new F,this.cameraPolarAxis0=new F,this.targetPos=new F,this.targetQuat=new Jt,this.lerpFactorPos=new F().setScalar(.3),this.lerpFactorPosStart=.3,this.lerpFactorPosEnd=.3,this.lerpFactorRotStart=.3,this.lerpFactorRotEnd=.3,this.lerpFactorPosCamera=.3,this.lerpFactorRotCamera=.3,this.objXZQuat=new Jt,this.objXZQuatInv=new Jt,this.objXZRotMat=new qe,this.isFirstPerson=!1,this.didHit=!1,this.groundVelocity=new F,this.pushedVelocity=new F,this.groundYRotation=0,this.objectRealQuat=new Jt,this.colliderWorldQuat=new Jt,this.groundNormal=new F,this.groundTilt=new Jt,this.groundTiltInv=new Jt,this.lastHitObj=null,this.isFirstFrame=!0,this.rotationAccumWhenOrientWithCamera=0,this.navMeshPathDest=null,this.position=new F,this.quaternion=new Jt,this.scale=new F,this.initialAction=!0,this.onPointerDown=p=>{p.target!==this.domElement||this.firstPointerId!==-1||(this.firstPointerId=p.pointerId,this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),this.rotBy!=="keys"&&!Xs&&(!N7||z7>=15.5)&&this.domElement.requestPointerLock(),this.prevMouse.set(p.clientX,p.clientY))},this.onPointerUp=p=>{this.firstPointerId=-1,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),p.pointerType==="mouse"&&this.domElement.ownerDocument.exitPointerLock()},this.onPointerMove=p=>{if(p.pointerId!==this.firstPointerId)return;let g=p.clientX-this.prevMouse.x,v=p.clientY-this.prevMouse.y;this.prevMouse.set(p.clientX,p.clientY),p.pointerType==="mouse"&&this.rotBy!=="keys"&&(N7&&z7<15.5&&!Xs?(this.eulerDelta.y=-g*this.mouseOrbitSensitivity,this.eulerDelta.x=-v*this.mouseOrbitSensitivity):(this.eulerDelta.y=-p.movementX*this.mouseOrbitSensitivity,this.eulerDelta.x=-p.movementY*this.mouseOrbitSensitivity)),p.pointerType!=="mouse"&&this.rotByTouch==="drag"&&(this.eulerDelta.y=-g*this.mouseOrbitSensitivity*5,this.eulerDelta.x=-v*this.mouseOrbitSensitivity*5),this.controlsManager.requestRender()},this.onPointerlockChange=p=>{this.domElement.ownerDocument.pointerLockElement===this.domElement?aB.isLocked=!0:aB.isLocked=!1},this.onPointerlockError=()=>{console.error("SPE.GameControls: Unable to use Pointer Lock API")},this.handleVisibilityChange=()=>{if(document!=null&&document.hidden)for(let p in this.movementState)this.movementState[p]=0},this.onKeyDown=p=>{!(p.target instanceof HTMLInputElement)&&(p.code==="ArrowLeft"||p.code==="ArrowUp"||p.code==="ArrowRight"||p.code==="ArrowDown"||p.code==="Space")&&p.preventDefault();for(let g of this.keyAssignments)if(p.key.toUpperCase()===g[1]||p.key===g[1]){this.movementState[g[0]]=1;break}this.controlsManager.requestRender()},this.onKeyUp=p=>{for(let g of this.keyAssignments)if(p.key.toUpperCase()===g[1]||p.key===g[1]||p.code.slice(3,p.code.length).toUpperCase()===g[1]){this.movementState[g[0]]=0;break}},this.copyVRGamePadValues=(p,g)=>{for(let v=2;v<4;v++){let b=p.axes[v];g===0?v===2?this.movementState.movePosX=b:this.movementState.movePosZ=b:(p.buttons[3].pressed?this.movementState.jump=1:this.movementState.jump=0,v===2?(Math.abs(this.movementState.rotPosY)<.3&&Math.abs(b)>=.3&&(this.vrEulerYOffset+=b<0?1:-1),this.movementState.rotPosY=b):this.moveMode==="fly"&&(this.movementState.moveNegY=b))}},this.sharedGameControlGlobals=i.sharedGameControlGlobals,e===a&&(this.isFirstPerson=!0),this.hiddenMatrix0.copy(this.object.hiddenMatrix),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.euler0.setFromQuaternion(this.quaternion,"YXZ");let u=this.euler0.clone(),d=u.y;if(this.objectRealQuat.copy(this.quaternion),u.y=0,this.quaternion.setFromEuler(u),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),u.set(0,d,0),this.quaternion.setFromEuler(u),this.rot.setFromEuler(u),this.object.matrixAutoUpdate=!1,(this.isFirstPerson||this.cameraFollow===!0)&&(this.target0.copy(this.camera.getTarget()),this.zoom0=this.camera.zoom),this.cameraFollow===!0){this.position0Cam.copy(this.camera.position),this.quat0Cam.copy(this.camera.quaternion),this.scale0Cam.copy(this.camera.scale),this.hiddenMatrix0Cam.copy(this.camera.hiddenMatrix),this.camera.parent?(this.camera.hiddenMatrix.copy((m=this.camera)==null?void 0:m.parent.matrixWorld),this.camera.matrix.copy(this.camera.matrixWorld)):this.camera.hiddenMatrix.identity(),this.camera.matrix.copy(this.camera.matrixWorld),this.camera.matrix.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.matrixAutoUpdate=!1,this.offsetMatrix.copy(this.object.matrix).invert().multiply(this.camera.matrix);let p=new F(0,0,-1).applyQuaternion(this.camera.quaternion),g=new F().subVectors(this.position,this.camera.position);this.objectToCamXZ.copy(g),this.objectToCamXZ.y=0,this.objectToCamXZ0.copy(this.objectToCamXZ);let v,b;Math.abs(p.y)<1e-6?(g.y=0,p.y=0,b=g.projectOnVector(p)):g.y/p.y>0?b=p.multiplyScalar(g.y/p.y):b=p.multiplyScalar(g.length()),this.targetToCamera0.copy(b).negate(),v=this.camera.position.clone().add(b),this.objectToTarget0.subVectors(v,this.position);let y=new Eo().setFromQuaternion(this.camera.quaternion,"YXZ");this.cameraPolarOffset=-y.x,y.x=0,y.z=0,y.y-=Math.PI/2,this.cameraPolarAxis0.set(0,0,-1).applyEuler(y)}if(this.object instanceof ha&&(this.object.matrixAutoUpdate=!1),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.rotByTouch=r.rotByTouch??"joystick",this.rotBy=r.rotBy??"keys",this.rotationMode=r.rotationMode??"normal",this.moveMode=r.moveMode??"walk",this.collisionEnabled=r.collisionEnabled,this.speedTranslate=(r.speedTranslate??250)*tAt,this.speedOrbit=(r.speedRotate??100)*rAt,this.mouseOrbitSensitivity=(r.speedRotate??100)*nAt,this.keyAssignments=r.keyAssignments.map(p=>{let g=[p[0],p[1]];return g[1]===""?g[1]="ArrowUp":g[1]===""?g[1]="ArrowLeft":g[1]===""?g[1]="ArrowDown":g[1]===""?g[1]="ArrowRight":g[1]===""?g[1]="Shift":g[1]===""?g[1]="Enter":g[1]==="Space"?g[1]=" ":g[1]===""?g[1]="Meta":g[1]==="Ctrl"?g[1]="Control":g[1]==="Esc"&&(g[1]="Escape"),g}),r.rotBy==="mouse"){let p;p=this.keyAssignments.findIndex(g=>g[0]==="rotNegX"),p!==-1&&(this.keyAssignments[p][1]=""),p=this.keyAssignments.findIndex(g=>g[0]==="rotPosX"),p!==-1&&(this.keyAssignments[p][1]=""),p=this.keyAssignments.findIndex(g=>g[0]==="rotPosY"),p!==-1&&(this.keyAssignments[p][1]=""),p=this.keyAssignments.findIndex(g=>g[0]==="rotNegY"),p!==-1&&(this.keyAssignments[p][1]="")}this.lerpFactorPosStart=1-.02**(1/((r.delayPos[0]??.3)*60)),this.lerpFactorPosEnd=1-.02**(1/((r.delayPos[1]??.3)*60)),this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.lerpFactorRotStart=1-.02**(1/((r.delayRot[0]??.3)*60)),this.lerpFactorRotEnd=1-.02**(1/((r.delayRot[1]??.3)*60)),this.lerpFactorPosCamera=1-.02**(1/((r.delayPosCamera??.3)*60)),this.lerpFactorRotCamera=1-.02**(1/((r.delayRotCamera??.3)*60)),this.gravity=(this.gloabalPhysics.gravity??M0.defaultData.gravity)*BY,this.usePhysics=this.gloabalPhysics.usePhysics??M0.defaultData.usePhysics,this.jumpPower=r.jumpPower*iAt,this.resetYPosition=this.position.y+Math.abs(r.resetYPosition)*(this.gravity>0?1:-1),this.alignToGround=r.alignToGround??!1,this.orientMode=r.autoOrientMove?r.orientMode:"none",this.orientWith=r.orientWith??kP.defaultDataThirdPerson.orientWith,this.slopeThresh=YCt*Math.PI/180,r.collider.type==="capsule"?(this.collider.radius=r.collider.radius,this.collider.segment.start.y=r.collider.height/2-r.collider.radius,this.collider.segment.end.y=-this.collider.segment.start.y,this.offset=r.collider.height*nk/this.pixelsPerMeter,this.stepThresh=r.collider.height*ik/this.pixelsPerMeter,this.colliderHeight=r.collider.height):r.collider.type==="sphere"?(this.collider.radius=r.collider.radius,this.collider.segment.start.y=0,this.collider.segment.end.y=0,this.offset=2*r.collider.radius*nk/this.pixelsPerMeter,this.stepThresh=2*r.collider.radius*ik/this.pixelsPerMeter,this.colliderHeight=r.collider.radius*2):(this.offset=r.collider.height*nk/this.pixelsPerMeter,this.stepThresh=r.collider.height*ik/this.pixelsPerMeter,this.colliderHeight=r.collider.height),this.collider.type=r.collider.type;let c=new F().fromArray(r.collider.position),h=new Jt().setFromEuler(new Eo().fromArray([...r.collider.rotation,"XYZ"]));this.collider.position.copy(c).multiply(this.scale),this.collider.rotation.copy(h),this.collider.matrix.compose(c,h,zY),r.cameraXAxis!==void 0&&(this.cameraXAxis=r.cameraXAxis,this.cameraYAxis=r.cameraYAxis,this.minPolarAngle=r.cameraRotXLimits[0],this.maxPolarAngle=r.cameraRotXLimits[1],this.minAzimuthAngleRel=r.cameraRotYLimits[0],this.maxAzimuthAngleRel=r.cameraRotYLimits[1]),this.forwardDir=r.forwardDirection??"-z",this.runMultiplier=r.runMultiplier??2;let f=r.navmesh.destinationHelperRadius*2;if(f>0){let p=new $t;p.push({fi:0,data:{...as.defaultData("light","phong"),alpha:0},id:"layer1"}),p.push({fi:0,data:{...as.defaultData("color"),color:r.navmesh.destinationHelperColor,alpha:r.navmesh.destinationHelperColor.a},id:"layer2"});let g=new FU({layers:p},{scene:this.page.scene,shared:this.sharedAssets});this.navMeshPathDest=new Fa(Ale.create({parameters:{width:f,height:f/10,hollow:.7}}),g),this.navMeshPathDest.material.userData.opacity0=r.navmesh.destinationHelperColor.a}this.activate()}reset(e=!1){if(this.object.hiddenMatrix.copy(this.hiddenMatrix0),e){this.object.updateMatrix(),this.object.updateMatrixWorld(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity();let t=new Eo().setFromQuaternion(this.quaternion,"YXZ"),r=t.y;this.objectRealQuat.copy(this.quaternion),t.y=0,this.quaternion.setFromEuler(t),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),t.set(0,r,0),this.quaternion.setFromEuler(t),this.rot.setFromEuler(t),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.velocityTarget.set(0,0,0),this.velocity.set(0,0,0)}else this.object instanceof ha?this.object.matrixAutoUpdate=!0:this.object.updateMatrix();this.cameraFollow===!0&&(this.camera.quaternion.copy(this.quat0Cam),this.camera.position.copy(this.position0Cam),this.camera.scale.copy(this.scale0Cam),this.camera.hiddenMatrix.copy(this.hiddenMatrix0Cam),this.camera.matrixAutoUpdate=!0),this.controlsManager.requestRender()}activate(){this.instantiateActions(),this.domElement.ownerDocument.addEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.addEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.addEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.addEventListener("visibilitychange",this.handleVisibilityChange)}deactivate(){this.disposeActions(),this.domElement.ownerDocument.removeEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.removeEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.removeEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.removeEventListener("visibilitychange",this.handleVisibilityChange)}dispose(){var e;this.deactivate(),(e=this.navMeshPathDest)!=null&&e.parent&&this.page.remove(this.navMeshPathDest)}instantiateActions(){let e=this.data,t=this.sharedAssets;e.gameActions!==void 0&&(this.actions={},RP.list.forEach(r=>{this.actions[r]=Ka({...e,disabled:!1,type:"GameControl"},e.gameActions[r],this.page,t,this.controlsManager.eventManager,this.object)})),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"),this.initialAction&&(this.initialAction=!1)}disposeActions(){this.initialAction=!1,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),To(this.actions.idle),To(this.actions.move),To(this.actions.run),To(this.actions.jump)}dispatchStartEvent(e){this.actions[e]!==void 0&&(this.actionState[e]||(this.actionState[e]=!0,this.actions[e].Transition.forEach(t=>{t.play()}),this.actions[e].Animation.forEach(t=>{t.play(this.initialAction===!1)}),this.actions[e].Create.forEach(t=>{t.dispatchStart()}),this.actions[e].Audio.forEach(t=>{t.dispatchGameControl("start")})))}dispatchStopEvent(e){this.actions[e]!==void 0&&(!this.actionState[e]||(this.actionState[e]=!1,this.actions[e].Transition.forEach(t=>{t.stop(),t.object.currentState!==null&&t.object.changeSelectedState(null,{scene:this.page.scene,shared:this.sharedAssets})}),this.actions[e].Create.forEach(t=>{t.dispatchStop()}),this.actions[e].Audio.forEach(t=>{t.dispatchGameControl("stop")})))}get colliderWorldPosition(){return Ca.copy(this.collider.position).applyQuaternion(this.objectRealQuat).add(this.position)}update(e,t,r){var s,l,u,d,c,h,f,m,p;if(this.gravity<0?this.position.y<this.resetYPosition:this.position.y>this.resetYPosition)return this.reset(!0),!0;this.sharedGameControlGlobals.gamePads.forEach(this.copyVRGamePadValues);let n=(this.isFirstFrame?16.6:e)/1e3;this.isFirstFrame&&(this.isFirstFrame=!1);let i=n*60,o=!1;if(this.usePhysics&&this.collisionEnabled){let g=ts.set(0,(this.velocity.y===0?this.pixelsPerMeter*Math.max(Math.abs(this.gravity)/(10*BY),1)*(this.gravity>0?1:-1):this.velocity.y)*n,0).divideScalar(this.pixelsPerMeter),v=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter),this.colliderWorldQuat,g,(s=this.object.rigidBody)==null?void 0:s.collider(0).shape,1,!1,16,void 0,void 0,this.object.rigidBody);if(v){this.onObject=!0,this.groundNormal.set(v.normal2.x,v.normal2.y,v.normal2.z).applyQuaternion(this.colliderWorldQuat).negate(),this.alignToGround&&this.groundTiltAdjustment(this.groundNormal),Math.acos(this.groundNormal.y)<this.slopeThresh&&(o=!0),((l=v.collider.parent())==null?void 0:l.bodyType())===0&&Math.acos(this.groundNormal.y)*(180/Math.PI)>45&&(this.onObject=!1);let b=v.collider.parent();this.groundYRotation=0,this.groundVelocity.set(0,0,0);for(let y of this.sharedGameControlGlobals.entitiesWithTransformAnim)if(y.rigidBody===b&&y.userData.isFollowingObj!==this.object.uuid){(y.hasNonUniformScale?y.matrixWorldRigid:y.matrixWorld).decompose(Ca,bd,ts),this.groundVelocity.subVectors(Ca,y.prevT),this.object.getWorldPosition(ts).add(this.collider.position).sub(Ca),this.groundYRotation=rc.setFromQuaternion(bd).y-y.prevR.y,jh.copy(ts).applyAxisAngle(uu,this.groundYRotation),this.groundVelocity.add(jh.sub(ts)).divideScalar(n);break}}else this.onObject=!1}if(this.moveMode==="walk"&&this.collisionEnabled&&(this.movementState.jump===1&&this.onObject&&(this.velocityTarget.y=this.jumpPower,this.movementState.jump=0,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("jump"),this.onObject=!1),this.onObject?this.velocityTarget.y/=2:this.velocityTarget.y+=this.gravity*i),this.moveMode==="fly"&&(this.velocityTarget.y=(this.movementState.movePosY-this.movementState.moveNegY)*this.speedTranslate),this.directionXZ.z=this.movementState.movePosZ-this.movementState.moveNegZ,this.directionXZ.x=this.movementState.movePosX-this.movementState.moveNegX,this.forwardDir==="+z"&&this.directionXZ.multiplyScalar(-1),this.directionXZ.manhattanLength()>0&&(this.path=[]),this.navMeshPathDest){let g=this.navMeshPathDest.material;if(this.moveMode==="walk"&&this.path.length>1){this.navMeshPathDest.position.copy(this.path[this.path.length-1]),this.navMeshPathDest.parent||this.page.add(this.navMeshPathDest);let v=Ca.subVectors(this.path[1],this.position),b=ts.subVectors(this.path[1],this.path[0]);v.dot(b)<0?this.path.shift():(this.directionXZ.x=b.x,this.directionXZ.z=b.z),g.opacity=g.userData.opacity0}else g.opacity-=.05*g.userData.opacity0,this.navMeshPathDest.material.opacity<=0&&this.navMeshPathDest.parent&&this.page.remove(this.navMeshPathDest)}this.directionXZ.normalize(),this.movementState.run?this.moveForce=this.runMultiplier:this.moveForce=1,this.velocityTarget.z=this.directionXZ.z*this.speedTranslate*this.moveForce,this.velocityTarget.x=this.directionXZ.x*this.speedTranslate*this.moveForce,(this.moveMode==="walk"?this.velocityTarget.x+this.velocityTarget.z===0:this.velocityTarget.manhattanLength()===0)?this.lerpFactorPos.setScalar(this.lerpFactorPosEnd):this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.moveMode==="walk"&&(this.lerpFactorPos.y=1),this.didHit===!1&&this.pushedVelocity.manhattanLength()===0||this.usePhysics===!1?(this.velocity.x+=(this.velocityTarget.x-this.velocity.x)*(1-(1-this.lerpFactorPos.x)**i),this.velocity.y+=(this.velocityTarget.y-this.velocity.y)*(1-(1-this.lerpFactorPos.y)**i),this.velocity.z+=(this.velocityTarget.z-this.velocity.z)*(1-(1-this.lerpFactorPos.z)**i)):this.velocity.copy(this.velocityTarget),(this.moveMode==="walk"?this.velocity.x**2+this.velocity.z**2<this.speedTranslate:this.velocity.lengthSq()<this.speedTranslate)?(this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.onObject&&(this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"))):(this.dispatchStopEvent("idle"),this.onObject&&(this.dispatchStopEvent("jump"),this.movementState.run?(this.dispatchStopEvent("move"),this.dispatchStartEvent("run")):(this.dispatchStopEvent("run"),this.dispatchStartEvent("move"))));let a=QCt.copy(this.velocity);if(this.orientMode!=="none"&&this.isFirstPerson===!1){let g=ts.copy(a);g.y=0,a.set(0,a.y,g.length()*(this.forwardDir==="+z"?1:-1))}if(this.directionXZ.manhattanLength()>0&&this.orientMode!=="none")if(this.orientWith==="camera"&&this.path.length<=1){let g=Ca;this.camera.getWorldDirection(g);let v=jh.copy(uu).multiplyScalar(g.dot(uu));g.sub(v);let b=ts.copy(this.directionXZ);b.x*=-1,this.rot.y=g.angleTo(b)*(g.cross(b).y>0?-1:1)+this.rotationAccumWhenOrientWithCamera}else this.rot.y=(this.path.length>1?0:this.euler.y)+Math.atan2(-this.directionXZ.z,this.directionXZ.x)+Math.PI/2*(this.forwardDir==="+z"?1:-1);if(rc.setFromVector3(this.rot),this.moveMode==="walk"&&(rc.x=0),a.applyEuler(rc),o&&(bd.setFromUnitVectors(uu,this.groundNormal),a.applyQuaternion(bd)),r){let g=rc.set(0,this.vrEulerYOffset*FY,0);r.applyEuler(g),a.x+=r.x,a.z+=r.z,this.nonColliderPosOffset.elements[13]+=r.y*n}if(this.usePhysics===!0){let g=ts;this.pushedVelocity.set(0,0,0);for(let v of this.sharedGameControlGlobals.entitiesWithTransformAnim){let b=jh.setFromMatrixPosition(v.matrixWorld).sub(v.prevT).divideScalar(n).divideScalar(this.pixelsPerMeter),y=v.rigidBody.collider(0).castCollider(b,this.object.rigidBody.collider(0),Ca.copy(a).divideScalar(this.pixelsPerMeter),n,!1);b.multiplyScalar(this.pixelsPerMeter);let x=Dr.is(v)?v:v.object;if(y!==null&&this.lastHitObj!==x){let S;v instanceof ua&&(S=v);let w=this.sharedGameControlGlobals.entityToCollisionEvents[x.uuid];if(w)for(let _ of w)_.data.target==="character"&&(_.dispatch(S),x.dispatchEvent(lB));this.lastHitObj=x}if(y!==null){this.pushedVelocity.copy(b),g.copy(y.normal1).applyQuaternion(v.quaternion);break}}if(this.pushedVelocity.manhattanLength()!==0){let v=g.dot(a);v<0&&a.addScaledVector(g,-v),a.add(this.pushedVelocity)}else a.add(this.groundVelocity)}if(this.rotDirection.y=Number(this.movementState.rotPosY)-Number(this.movementState.rotNegY),this.rotDirection.x=Number(this.movementState.rotPosX)-Number(this.movementState.rotNegX),this.rotDirection.normalize(),this.rotationMode==="normal"&&(this.movementState.rotPosX||this.movementState.rotNegX)||this.rotationMode==="steer"&&(this.movementState.rotPosX||this.movementState.rotNegX)&&(this.movementState.movePosZ||this.movementState.moveNegZ||this.moveMode==="walk")?this.rotVelocityStick.x=-this.rotDirection.x*this.speedOrbit*this.rotForce:this.rotVelocityStick.x=0,this.rotationMode==="normal"&&(this.movementState.rotPosY||this.movementState.rotNegY)||this.rotationMode==="steer"&&(this.movementState.rotPosY||this.movementState.rotNegY)&&(this.movementState.movePosZ||this.movementState.moveNegZ)?this.rotVelocityStick.y=-this.rotDirection.y*this.speedOrbit*this.rotForce:this.rotVelocityStick.y=0,this.rotVelocityTarget.subVectors(this.eulerDelta.divideScalar(n),this.rotVelocityStick),this.rotVelocityTarget.manhattanLength()===0?this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotEnd)**i):this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotStart)**i),this.euler.x+=this.rotVelocity.x*n,this.euler.y+=this.rotVelocity.y*n+this.groundYRotation,this.rotVelocityTarget.y===0&&this.directionXZ.manhattanLength()===0?this.rotationAccumWhenOrientWithCamera=0:(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.rotationAccumWhenOrientWithCamera+=this.rotVelocity.y*n),this.isFirstPerson===!1&&this.orientMode!=="none"&&this.directionXZ.manhattanLength()>0){if(this.orientMode==="radial"){this.objectToCamXZ.copy(this.objectToCamXZ0).applyAxisAngle(uu,this.euler.y-this.euler0.y);let g=ts.copy(this.objectToCamXZ).normalize(),v=jh.copy(a).multiplyScalar(n);v.y=0;let b=v.sub(Ca.copy(g).multiplyScalar(v.dot(g))).cross(g).y;this.euler.y-=Math.atan2(b,this.objectToCamXZ.length())}}else this.rot.y+=this.rotVelocity.y*n+this.groundYRotation,this.rotVelocityTarget.y!==0&&(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.euler.y=this.rot.y);if(this.cameraFollow===!0&&(this.moveMode==="walk"?this.cameraXAxis==="Limit"?this.euler.x=Et.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):this.euler.x=Et.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset,this.PI_2+this.cameraPolarOffset):this.cameraXAxis==="Limit"&&(this.euler.x=Et.clamp(this.euler.x,-this.PI_2,this.PI_2))),this.moveMode==="fly"?this.rot.x=this.euler.x:this.isFirstPerson&&(t?(rc.copy(t),rc.y=0):(rc.copy(this.euler),rc.y=0),this.nonColliderRotOffset.makeRotationFromEuler(rc)),t&&(this.moveMode==="walk"?(this.rot.y=t.y,this.rot.x=0,this.rot.z=0):this.rot.setFromEuler(t),this.rot.y+=this.vrEulerYOffset*FY),lu.setFromAxisAngle(JCt,this.rot.x),bd.setFromAxisAngle(uu,this.rot.y),bd.multiply(lu),lu.setFromAxisAngle(eAt,this.rot.z),bd.multiply(lu),this.quaternion.copy(bd),this.objectRealQuat.multiplyQuaternions(this.quaternion,this.objXZQuat),this.objectRealQuat.multiply(this.objXZQuat),this.colliderWorldQuat.copy(this.objectRealQuat).multiply(this.collider.rotation),this.collisionEnabled)if(this.usePhysics){let g=ts.copy(a).multiplyScalar(n/this.pixelsPerMeter),v=null;this.didHit=!1;let b=new F;for(let y=0;y<5;y++){let x=g.length(),S=jh.copy(g).normalize();if(v=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(b),this.colliderWorldQuat,S,(u=this.object.rigidBody)==null?void 0:u.collider(0).shape,x,!1,24,void 0,void 0,this.object.rigidBody),v!==null){this.didHit=!0;let w=this.sharedGameControlGlobals.colliderToEntity.get(v.collider.handle);if(w!==this.lastHitObj&&y===0){this.lastHitObj=w;let A=this.sharedGameControlGlobals.entityToCollisionEvents[w==null?void 0:w.uuid];if(A){for(let M of A)if(M.data.target==="character"){let I=((d=this.sharedGameControlGlobals.rapierWorld)==null?void 0:d.getCollider(v.collider.handle))._parent,O;if(w.cloner){for(let T of w.cloner.children)if(T.rigidBody===I){O=T;break}}M.dispatch(O),w.dispatchEvent(lB)}}}let _=kY.set(v.normal2.x,v.normal2.y,v.normal2.z).applyQuaternion(this.colliderWorldQuat),C=LY.copy(S).multiplyScalar(v.toi).dot(_),E=v.toi;if(E===0&&(this.position.y+=this.offset*this.pixelsPerMeter),C>this.offset&&(E=v.toi*(C-this.offset)/C,b.addScaledVector(S,E)),g.copy(S).multiplyScalar(x-E),Math.acos(-_.y)>this.slopeThresh){let A=this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(b),M=jh.copy(v.witness2).applyQuaternion(this.colliderWorldQuat);M.y=0;let I=A.add(M);I.y+=this.stepThresh;let O=this.sharedGameControlGlobals.rapierWorld.castShape(I,this.colliderWorldQuat,g,(c=this.object.rigidBody)==null?void 0:c.collider(0).shape,1,!1,24,void 0,void 0,this.object.rigidBody);O!==null&&O.toi===0&&(_.y=0,_.normalize())}g.addScaledVector(_,-g.dot(_))}else{y===0&&this.directionXZ.manhattanLength()!==0&&(this.lastHitObj=null),b.add(g);break}}this.position.addScaledVector(b,this.pixelsPerMeter),(h=this.object.rigidBody)==null||h.setTranslation(Ca.copy(this.position).divideScalar(this.pixelsPerMeter),!0),(f=this.object.rigidBody)==null||f.setRotation(lu.copy(this.quaternion).premultiply(this.groundTilt).multiply(this.objXZQuat),!0)}else{let g=this.onObject?1:5,v=a.multiplyScalar(n/g);for(let b=0;b<g;b++)this.position.add(v),this.collisionAdjustment(n/g)}else this.position.addScaledVector(a,n);if(this.moveMode==="walk"&&this.onObject&&(this.velocityTarget.y=0,this.velocity.y=0),this.quaternion.premultiply(this.groundTilt).multiply(this.objXZQuat),this.object.matrix.compose(this.position,this.quaternion,this.scale),this.object.matrixWorldNeedsUpdate=!0,this.object.matrix.multiply(this.nonColliderPosOffset).multiply(this.nonColliderRotOffset),this.quaternion.premultiply(this.groundTiltInv).multiply(this.objXZQuatInv),this.cameraFollow===!0){this.updateFollowArms();let g=this.objectToTarget.add(this.position),v=this.targetToCamera.add(g);ok.lookAt(v,g,uu).setPosition(v),ok.decompose(this.targetPos,this.targetQuat,Ca),this.camera.quaternion.slerp(this.targetQuat,1-(1-this.lerpFactorRotCamera)**i),this.camera.position.lerp(this.targetPos,1-(1-this.lerpFactorPosCamera)**i),this.camera.updateMatrix(),this.camera.updateMatrixWorld(),this.cameraYAxis==="Limit"&&this.orientMode==="cartesian"&&(this.euler.y=Et.clamp(this.euler.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel)),this.euler.x=Et.clamp(this.euler.x,-this.PI_2+(this.cameraPolarOffset<0?this.cameraPolarOffset:0),this.PI_2+(this.cameraPolarOffset>0?this.cameraPolarOffset:0))}return this.eulerDelta.set(0,0,0),this.object.dispatchEvent(aAt),this.path.length<2&&this.lastPosition.distanceToSquared(this.position)<this.threshEndTranslate&&Math.abs(this.rotVelocity.x)<this.threshEndRotVel&&Math.abs(this.rotVelocity.y)<this.threshEndRotVel&&(this.camera===void 0||this.isFirstPerson||this.lastCameraPosition.distanceToSquared(this.camera.position)<this.threshEndTranslate&&8*(1-this.lastCameraQuaternion.dot(this.camera.quaternion))<this.threshEndRotate)&&(this.moveMode==="fly"||this.onObject===!0||this.collisionEnabled===!1)&&(this.navMeshPathDest===null||this.navMeshPathDest.material.opacity<-.04*((p=(m=this.navMeshPathDest)==null?void 0:m.material)==null?void 0:p.userData.opacity0))?!1:(this.camera&&(this.lastCameraPosition.copy(this.camera.position),this.lastCameraQuaternion.copy(this.camera.quaternion)),this.lastPosition.copy(this.position),this.object.dispatchEvent(oAt),!0)}updateFollowArms(){this.objectToTarget.copy(this.objectToTarget0),this.targetToCamera.copy(this.targetToCamera0);let e=lu.setFromAxisAngle(uu,this.cameraYAxis==="Limit"&&this.orientMode!=="radial"?Et.clamp(this.euler.y-this.euler0.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel):this.euler.y-this.euler0.y);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&this.objectToTarget.applyQuaternion(e);let t;this.cameraXAxis==="Limit"?t=Et.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):t=Et.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset+1e-6,this.PI_2+this.cameraPolarOffset-1e-6);let r=Ca.copy(this.cameraPolarAxis0);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&r.applyQuaternion(e);let n=bd.setFromAxisAngle(r,t);this.cameraYAxis!=="Locked"&&this.targetToCamera.applyQuaternion(e),this.cameraXAxis!=="Locked"&&this.targetToCamera.applyQuaternion(n)}groundTiltAdjustment(e){uu.angleTo(e)*180/Math.PI<15||uu.angleTo(e)*180/Math.PI>85?lu.identity():lu.setFromUnitVectors(uu,e),this.groundTilt.slerp(lu,.06),this.groundTiltInv.copy(this.groundTilt).invert()}collisionAdjustment(e){var i;let t=LY.set(0,0,0);this.object.matrix.compose(this.position,this.quaternion,this.scale);let r=ok.multiplyMatrices(this.object.matrix,this.objXZRotMat).multiply(this.collider.matrix).decompose(Ca,lu,ts).compose(Ca,lu,zY);this.sharedGameControlGlobals.entitiesWithTransformAnim.forEach(o=>{if(o===this.object||o.isDescendantOf(this.object))return;bl.makeEmpty(),o.updateMatrixWorldSVD();let a=o.matrixWorldRigid,s=NY.copy(a).invert(),l=ZCt.copy(NY).multiply(r);yo.copy(this.collider.segment),yo.start.applyMatrix4(l),yo.end.applyMatrix4(l);let u=kY.copy(this.position).applyMatrix4(s);bl.expandByPoint(yo.start),bl.expandByPoint(yo.end),bl.min.addScalar(-this.collider.radius),bl.max.addScalar(this.collider.radius),o.bvhGeometry.boundsTree.shapecast({traverseBoundsOrder(d){return d.distanceToPoint(yo.end)},intersectsBounds:d=>d.intersectsBox(bl),intersectsTriangle:d=>{let c=Ca,h=ts,f=d.closestPointToSegment(yo,c,h);if(f<this.collider.radius){let m=this.collider.radius-f,p=h.sub(c).normalize(),g=jh.copy(u);g.addScaledVector(p,m);let v=g.applyMatrix4(a).sub(this.position);t.add(v),yo.start.addScaledVector(p,m),yo.end.addScaledVector(p,m)}}})}),bl.makeEmpty(),yo.copy(this.collider.segment),yo.start.applyMatrix4(r),yo.end.applyMatrix4(r),bl.expandByPoint(yo.start),bl.expandByPoint(yo.end),bl.min.addScalar(-this.collider.radius),bl.max.addScalar(this.collider.radius),(i=this.sharedGameControlGlobals.staticMeshBVH)==null||i.shapecast({traverseBoundsOrder(o){return o.distanceToPoint(yo.end)},intersectsBounds:o=>o.intersectsBox(bl),intersectsTriangle:o=>{let a=Ca,s=ts,l=o.closestPointToSegment(yo,a,s);if(l<this.collider.radius){let u=this.collider.radius-l,d=s.sub(a).normalize();this.alignToGround&&this.groundTiltAdjustment(d),t.addScaledVector(d,u),yo.start.addScaledVector(d,u),yo.end.addScaledVector(d,u)}}}),this.onObject=Math.abs(t.y)>Math.abs(e*this.velocity.y*.25),this.onObject&&this.dispatchStopEvent("jump");let n=Math.max(0,t.length()-1e-5);t.normalize().multiplyScalar(n),this.position.add(t)}},Rce=aB;Rce.isLocked=!1;var sAt=Lo(iae());function zd(e,t){let r=new Nt;if(!e.getAttribute("position"))return r.setAttribute("position",new ft([],3)),r.setIndex([]),r;let{positions:n,triIndices:i}=AO(e.getAttribute("position"),e.getIndex());return r.setAttribute("position",new ft(n,3)),r.setIndex(i),t&&r.applyMatrix4(t),r}var lAt=new qe,uAt=new qe,nc=[[0,0,0],[0,0,0],[0,0,0]];function kce(e){let t=e.elements;nc[0][0]=t[0],nc[0][1]=t[4],nc[0][2]=t[8],nc[1][0]=t[1],nc[1][1]=t[5],nc[1][2]=t[9],nc[2][0]=t[2],nc[2][1]=t[6],nc[2][2]=t[10];let{u:r,v:n}=(0,sAt.SVD)(nc),i=lAt.set(r[0][0],r[0][1],r[0][2],0,r[1][0],r[1][1],r[1][2],0,r[2][0],r[2][1],r[2][2],0,0,0,0,1),o=uAt.set(n[0][0],n[0][1],n[0][2],0,n[1][0],n[1][1],n[1][2],0,n[2][0],n[2][1],n[2][2],0,0,0,0,1);return i.multiply(o.transpose())}var cAt=class extends Yae{constructor(){super(),this.layers.enable(3),this.layers.enable(8)}setFromCamera(e,t){t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):t.isPerspectiveCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):console.error("Raycaster: Unsupported camera type.")}intersectVisibleObjects(e,t=!0,r=[]){return e.forEach(n=>{n.visible&&this.intersectObject(n,t,r)}),r}createRaycastLineHelper(){let e=new bp({color:65280,linewidth:10}),t=new F(this.ray.origin.x,this.ray.origin.y,this.ray.origin.z),r=new F(this.ray.direction.x,this.ray.direction.y,this.ray.direction.z),n=this.camera.far-this.camera.near,i=new F().addVectors(t,r.multiplyScalar(n)),o=new Nt;return o.setFromPoints([t,i]),new oP(o,e)}},Lce=e=>e instanceof Ay||e instanceof Ey;function dAt(e,t){return e.distance-t.distance}function Nce(e,t,r){if(!(!Nd(t)||!t.visible)){bu(t)&&t.raycast(e,r);for(let n of t.children)Nce(e,n,r)}}function oE(e,t,r,n=!1){if(!n&&!r.some(o=>qP(e,o)!==void 0))return[];let i=[];return t.children.forEach(o=>Nce(e,o,i)),i.sort(dAt),i}function sB(e){let t=[];if(e.length){let r=e[0].object;Nd(r)&&t.push(r);let n=r.parent;for(;n;)Lce(n)&&t.push(n),n=n.parent}return t}function qP(e,t){if(bu(t)){if(t.visible){let r=[];return t.raycast(e,r),r.length?r[0]:void 0}}else if(Lce(t))return zce(e,t)}function zce(e,t){if(!(!Nd(t)||!t.visible)){if(bu(t)){let r=[];if(t.raycast(e,r),r.length)return r[0]}for(let r of t.children){let n=zce(e,r);if(n)return n}}}function hAt(e,t,r){return{x:(e-(r.left+window.scrollX))/r.width*2-1,y:-((t-(r.top+window.scrollY))/r.height)*2+1}}var fAt=class{constructor(e,t,r,n,i,o,a,s){this.renderer=e,this.publish=t,this.scene=r,this.getCamera=n,this.sharedAssets=i,this.requestRender=o,this.isExport=a,this.frame=s,this.raycaster=new cAt,this.raycasterNeedsUpdate=!0,this._useWindowEvents=!1,this._useWindowEvents=t.mouseEventTarget==="window",this.domElement=e.domElement,this.eventElement=this._useWindowEvents?window:e.domElement,this.domRect=this.domElement.getBoundingClientRect()}get stopRaycast(){return this.publish.stopRaycast}get page(){return this.scene.activePage}set useWindowEvents(e){this._useWindowEvents=e,this.eventElement=e?window:this.renderer.domElement}get useWindowEvents(){return this._useWindowEvents}updateDomRect(){this.domRect=this.domElement.getBoundingClientRect()}updateRaycaster(e){var n;if(!this.raycasterNeedsUpdate)return;this.raycasterNeedsUpdate=!1;let{pageX:t,pageY:r}=((n=e.touches)==null?void 0:n.length)>0?e.touches[0]:e;this.updateDomRect(),this.raycaster.setFromCamera(hAt(t,r,this.domRect),this.getCamera())}},Bce=(e=>(e[e.keydown=0]="keydown",e[e.keyup=1]="keyup",e[e.pointerdown=2]="pointerdown",e[e.pointerup=3]="pointerup",e[e.pointermove=4]="pointermove",e[e.wheel=5]="wheel",e[e.scroll=6]="scroll",e))(Bce||{}),Gu=class{constructor(e){this.eventContext=e,this.domEventsNeeded=new Set,this.hasVideoAction=!1}connect(){}disconnect(){}},l5=[["start","Start"],["keyDown","KeyDown"],["keyUp","KeyUp"],["mouseDown","MouseDown"],["mouseUp","MouseUp"],["mouseHover","MouseHover"],["collision","Collision"],["lookAt","LookAt"],["follow","Follow"],["scroll","Scroll"]],Fce=e=>{var t;return(t=l5.find(([r,n])=>n===e))==null?void 0:t[0]},f_=e=>{var t;return(t=l5.find(([r])=>r===e))==null?void 0:t[1]},pAt=(e,t)=>{let r=Fce(e);if(r){let n=new CustomEvent(r,{bubbles:!0});return Object.defineProperty(n,"target",{writable:!1,value:t}),n}},mAt=class extends Gu{constructor(e){super(e),this.objectsPerEvents=new Map,this.splineEvents={},this.onBeginEvent=r=>{var o;if(!r.eventName||!r.target||r.eventName==="Scroll")return;let n=(o=this.splineEvents[Fce(r.eventName)])==null?void 0:o[r.target.uuid];if(!n)return;r.eventName==="Scroll"&&r.deltaY!==void 0&&Object.assign(n,{deltaY:r.deltaY});let{domElement:i}=this.eventContext;i.dispatchEvent(n)};let{page:t}=this.eventContext;t.traverseEntity(r=>{var n,i;if((n=r.data)!=null&&n.events.length){for(let[o,a]of l5)if(r.data.events.some(s=>s.data.type===a&&!s.data.disabled)){this.objectsPerEvents.has(o)?(i=this.objectsPerEvents.get(o))==null||i.push(r):this.objectsPerEvents.set(o,[r]);let s={id:r.uuid,name:r.name},l=pAt(a,s),u=this.splineEvents[o];u?u[r.uuid]=l:this.splineEvents[o]={[r.uuid]:l}}}})}connect(){this.objectsPerEvents.forEach(e=>{e.forEach(t=>{t.addEventListener("beginEvent",this.onBeginEvent)})})}disconnect(){this.objectsPerEvents.forEach(e=>{e.forEach(t=>{t.removeEventListener("beginEvent",this.onBeginEvent)})})}},gAt=class{constructor(e,t,r,n,i,o){if(this.id=e,this.data=t,this.object=r,this.entered=!1,this.alreadyPlayedNonTogglingActions=new Set,this.useToggle=t.runMode==="Toggle",(t.type==="KeyDown"||t.type==="KeyUp"||t.type==="KeyPress")&&!t.key)throw new Error("Missing property");this.actions=Ka(t,t.actions,n,i,o,r)}disconnect(){To(this.actions)}dispatchHeld(e){this.actions.Create.forEach(t=>{e&&t.dispatchThrottled.cancel(),t.dispatchThrottled()})}dispatch(e=!1){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this?(t.object.currentTransitionEvent=this,t.init()):this.data.runMode==="Once"&&this.alreadyPlayedNonTogglingActions.add(t)}),this.useToggle?(this.actions.Transition.forEach(t=>{t.toggle()}),this.actions.Animation.forEach(t=>{t.toggle()}),this.actions.SwitchCamera.forEach(t=>{t.toggle()})):this.data.type==="MousePress"||this.data.type==="KeyPress"?this.entered||(this.entered=!0,this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent()),this.actions.Create.forEach(t=>t.dispatchStart())):(this.actions.Transition.some(t=>t.playing)||this.actions.Transition.forEach(t=>{this.alreadyPlayedNonTogglingActions.has(t)===!1&&t.play()}),this.actions.SwitchCamera.some(t=>t.playing)||this.actions.SwitchCamera.forEach(t=>{t.play()}),this.actions.Animation.forEach(t=>{t.play()})),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.SceneTransition.forEach(t=>{t.dispatch()}),e===!1&&this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()}),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch())}dispatchRelease(){this.entered&&(this.entered=!1,this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.Animation.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent()),this.actions.Create.forEach(e=>e.dispatchStop()))}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.SceneTransition.forEach(t=>{t.dispatch()}),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()}),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch())}},vAt=class extends Gu{constructor(e,t,r){super(e),this.useForRaycastProperty=r,this.objectsPerTypes={MouseDown:[],MouseUp:[],MousePress:[],KeyDown:[],KeyUp:[],KeyPress:[]},this.canvasMouseEvents=[],this.eventsPerObjects={MouseDown:{},MouseUp:{},MousePress:{},KeyDown:{},KeyUp:{},KeyPress:{}},this.heldKeys={},this.heldKeysPress={},this._prevObjects=[],this.sceneInterects=null,this.onCanvasRaycast=o=>{if(this.useForRaycastProperty===!0&&this.sceneInterects===null){this.eventContext.updateRaycaster(o);let{raycaster:a,page:s}=this.eventContext,l=oE(a,s,[],!0);this.sceneInterects=l,l.length&&(this.eventContext.sharedAssets.raycastProperty={x:l[0].point.x,y:l[0].point.y,z:l[0].point.z,objX:l[0].object.matrixWorld.elements[12],objY:l[0].object.matrixWorld.elements[13],objZ:l[0].object.matrixWorld.elements[14]})}},this.onCanvasMouseDown=o=>{(o.target===this.eventContext.domElement||o.target.tagName==="SPLINE-VIEWER")&&this.canvasMouseEvents.forEach(a=>{(a.data.type==="MouseDown"||a.data.type==="MousePress")&&(this.onCanvasRaycast(o),a.dispatch())})},this.onCanvasMouseUp=o=>{(o.target===this.eventContext.domElement||o.target.tagName==="SPLINE-VIEWER")&&this.canvasMouseEvents.forEach(a=>{a.data.type==="MouseUp"?(this.onCanvasRaycast(o),a.dispatch()):a.data.type==="MousePress"&&a.dispatchRelease()})},this.onMouseDown=o=>{Gt.length>1||(this.eventContext.updateRaycaster(o),this.handleMouseEvent("MouseDown"))},this.onMouseUp=o=>{Gt.length>1||(this.eventContext.updateRaycaster(o),this.handleMouseEvent("MouseUp"))},this.onMousePressDown=o=>{Gt.length>1||(this.eventContext.updateRaycaster(o),this.handleMousePressEvent())},this.onMousePressRelease=o=>{Gt.length>1||(this.eventContext.updateRaycaster(o),this.handleMousePressEvent(!0))},this.onKeyDown=o=>{this.heldKeys[o.key]||(this.handleKeyEvent(o,"KeyDown"),this.handleKeyEventHeld(o,"KeyDown",!0)),this.heldKeys[o.key]=!0},this.onKeyUp=o=>{this.handleKeyEvent(o,"KeyUp"),this.handleKeyEventHeld(o,"KeyUp",!0)},this.onKeyPressDown=o=>{this.heldKeysPress[o.key]?this.handleKeyEventHeld(o,"KeyPress"):(this.handleKeyEvent(o,"KeyPress"),this.handleKeyEventHeld(o,"KeyPress",!0)),this.heldKeysPress[o.key]=!0},this.onKeyPressUp=o=>{this.handleKeyEvent(o,"KeyPress",!0)},this.releaseHeldKey=o=>{delete this.heldKeys[o.key]},this.releaseHeldKeyPress=o=>{delete this.heldKeysPress[o.key]},this._onUserEvent=({eventName:o,target:a,reverse:s})=>{var u,d,c,h;if(!o||!a)return;let l=f_(o);l&&(l==="MouseDown"||l==="MouseUp"||l==="MousePress"?(a.dispatchEvent({type:"beginEvent",eventName:l}),(d=(u=this.eventsPerObjects[l])==null?void 0:u[a.uuid])==null||d.forEach(f=>{f.dispatchUserEvent(s)})):(l==="KeyDown"||l==="KeyUp"||l==="KeyPress")&&(a.dispatchEvent({type:"beginEvent",eventName:l}),(h=(c=this.eventsPerObjects[l])==null?void 0:c[a.uuid])==null||h.forEach(f=>{f.dispatchUserEvent()})))};let{page:n,sharedAssets:i}=this.eventContext;n.traverseEntity(o=>{var s,l;if(!((s=o.data)!=null&&s.events.length))return;let a=["MouseDown","MouseUp","MousePress","KeyDown","KeyUp","KeyPress"];for(let u of a){let d=this.eventsPerObjects[u];o.data.events.filter(({data:c})=>c.type===u&&c.disabled!==!0).forEach(({id:c,data:h})=>{try{let f=new gAt(c,h,o,n,i,t);f.actions.Video.length&&(this.hasVideoAction=!0),(h.type==="MouseDown"||h.type==="MouseUp"||h.type==="MousePress")&&(h.mode==="Canvas"||h.mode==="Window")?this.canvasMouseEvents.push(f):d[o.uuid]?d[o.uuid].push(f):d[o.uuid]=[f]}catch{}}),(l=d[o.uuid])!=null&&l.length&&this.objectsPerTypes[u].push(o)}})}connect(){var t,r,n,i,o,a;let{domElement:e}=this.eventContext;this.heldKeys={},this.heldKeysPress={},this.domEventsNeeded.clear(),e.addEventListener("pointerdown",this.onCanvasMouseDown),e.addEventListener("pointerup",this.onCanvasMouseUp),((t=this.objectsPerTypes.MouseDown)!=null&&t.length||this.useForRaycastProperty)&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseDown)),(r=this.objectsPerTypes.MouseUp)!=null&&r.length&&(this.domEventsNeeded.add("pointerup"),e.addEventListener("pointerup",this.onMouseUp)),(n=this.objectsPerTypes.MousePress)!=null&&n.length&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMousePressDown),this.domEventsNeeded.add("pointerup"),e.addEventListener("pointerup",this.onMousePressRelease)),(i=this.objectsPerTypes.KeyDown)!=null&&i.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.releaseHeldKey)),(o=this.objectsPerTypes.KeyUp)!=null&&o.length&&(this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyUp)),(a=this.objectsPerTypes.KeyPress)!=null&&a.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyPressDown),document.addEventListener("keyup",this.releaseHeldKeyPress),this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyPressUp)),Object.entries(this.objectsPerTypes).forEach(([s,l])=>{l.forEach(u=>{u.addEventListener("userEvent",this._onUserEvent)})})}disconnect(){let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),this.heldKeys={},this.heldKeysPress={},e.removeEventListener("pointerdown",this.onCanvasMouseDown),e.removeEventListener("pointerup",this.onCanvasMouseUp),e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerdown",this.onMousePressDown),e.removeEventListener("pointerup",this.onMouseUp),e.removeEventListener("pointerup",this.onMousePressRelease),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("keydown",this.onKeyPressDown),document.removeEventListener("keyup",this.onKeyPressUp),document.removeEventListener("keyup",this.releaseHeldKey),Object.values(this.eventsPerObjects).forEach(t=>{Object.values(t).forEach(r=>{r.forEach(n=>{n.disconnect()})})}),this.canvasMouseEvents.forEach(t=>{t.disconnect()}),Object.entries(this.objectsPerTypes).forEach(([t,r])=>{r.forEach(n=>{n.removeEventListener("userEvent",this._onUserEvent)})})}handleMouseEvent(e){let{stopRaycast:t,raycaster:r,page:n}=this.eventContext,i=this.objectsPerTypes[e];if(!(!i.length&&!this.useForRaycastProperty)){if(t||this.useForRaycastProperty){let o;this.sceneInterects===null?o=oE(r,n,i,this.useForRaycastProperty):(o=this.sceneInterects,this.sceneInterects=null),this.useForRaycastProperty&&o.length&&(this.eventContext.sharedAssets.raycastProperty={x:o[0].point.x,y:o[0].point.y,z:o[0].point.z,objX:o[0].object.matrixWorld.elements[12],objY:o[0].object.matrixWorld.elements[13],objZ:o[0].object.matrixWorld.elements[14]}),t&&sB(o).forEach(a=>{this.eventsPerObjects[e][a.uuid]&&this.handleObjectMouseEventDispatch(a,e)})}t||i.forEach(o=>{qP(r,o)&&this.handleObjectMouseEventDispatch(o,e)})}}handleMousePressEvent(e=!1){let t="MousePress",r=this.objectsPerTypes[t],n=[];if(r.length){if(!e){let{stopRaycast:i,raycaster:o,page:a}=this.eventContext;if(i){let s=oE(o,a,r);n=sB(s)}else r.forEach(s=>{qP(o,s)&&n.push(s)})}this._prevObjects.length&&this._prevObjects.forEach(i=>{n.includes(i)||this.handleObjectMouseEventDispatchRelease(i,t)}),n.length&&n.forEach(i=>{this.handleObjectMouseEventDispatch(i,t)}),this._prevObjects=n}}handleObjectMouseEventDispatch(e,t){var r,n;e.dispatchEvent({type:"beginEvent",eventName:t}),(n=(r=this.eventsPerObjects[t])==null?void 0:r[e.uuid])==null||n.forEach(i=>{i.dispatch()})}handleObjectMouseEventDispatchRelease(e,t){var r,n;e.dispatchEvent({type:"beginEvent",eventName:t}),(n=(r=this.eventsPerObjects[t])==null?void 0:r[e.uuid])==null||n.forEach(i=>{i.dispatchRelease()})}handleKeyEvent(e,t,r=!1){this.objectsPerTypes[t].forEach(n=>{let i=this.eventsPerObjects[t][n.uuid];i.some(({data:o})=>"key"in o&&o.key===e.key)&&n.dispatchEvent({type:"beginEvent",eventName:t}),i.forEach(o=>{"key"in o.data&&o.data.key===e.key&&(r?o.dispatchRelease():o.dispatch(!0))})})}handleKeyEventHeld(e,t,r=!1){this.objectsPerTypes[t].forEach(n=>{this.eventsPerObjects[t][n.uuid].forEach(i=>{"key"in i.data&&i.data.key===e.key&&i.dispatchHeld(r)})})}},yAt=new F,bAt=new F,jce=class{constructor(e,t,r,n,i){this.actionsIn=Ka(e,e.inActions,r,n,i,t),this.actionsOut=Ka(e,e.outActions,r,n,i,t)}disconnect(){To(this.actionsIn),To(this.actionsOut)}},xAt=class extends jce{constructor(e,t,r,n,i,o){super(t,r,n,i,o),this.id=e,this.data=t,this.object=r,this.stage="out",this.objects=[],this.onUpdateMatrixWorld=()=>{for(let h of this.objects)if(!h.visible)return;let u=yAt.setFromMatrixPosition(this.objects[0].matrixWorld),d=bAt.setFromMatrixPosition(this.objects[1].matrixWorld),c=u.distanceTo(d)<=this.distance?"in":"out";if(this.stage!==c){this.stage=c;let h=c==="in"?this.actionsIn:this.actionsOut;h.Audio.forEach(f=>f.dispatchConditional()),h.Video.forEach(f=>f.dispatchConditional()),h.Link.forEach(f=>f.dispatch()),h.Create.forEach(f=>f.dispatch()),h.Destroy.forEach(f=>f.dispatch()),h.Reset.forEach(f=>f.dispatch()),h.Transition.forEach(f=>{f.object.currentTransitionEvent!==this&&(f.object.currentTransitionEvent=this),f.init()}),h.Transition.forEach(f=>f.play()),h.Animation.forEach(f=>f.play()),h.SwitchCamera.forEach(f=>f.play()),h.SceneTransition.forEach(f=>f.dispatch()),h.SetVariable.forEach(f=>f.checkConditions()),h.SetVariable.forEach(f=>f.dispatch()),h.DynamicVariablePlay.forEach(f=>f.dispatch())}};let{distance:a,fromObject:s,toObject:l}=t.condition;this.distance=a;for(let u of[s,l]){if(!u)throw new Error("Missing property");let d=n.find(u);if(!d)throw new Error("Missing property");this.objects.push(d)}}connect(){window.setTimeout(()=>{this.objects.forEach(e=>{e.addEventListener("updateMatrixWorld",this.onUpdateMatrixWorld)}),this.onUpdateMatrixWorld()},0)}disconnect(){super.disconnect(),this.stage="out",this.objects.forEach(e=>{e.removeEventListener("updateMatrixWorld",this.onUpdateMatrixWorld)})}},wAt=class extends jce{constructor(e,t,r,n,i,o){var l;super(t,r,n,i,o),this.id=e,this.data=t,this.object=r,this.onBegin=({target:u,state:d})=>{this.toState!==d&&(this.actionsOut.Audio.forEach(c=>c.dispatchConditional()),this.actionsOut.Video.forEach(c=>c.dispatchConditional()),this.actionsOut.Link.forEach(c=>c.dispatch()),this.actionsOut.Create.forEach(c=>c.dispatch()),this.actionsOut.Destroy.forEach(c=>c.dispatch()),this.actionsOut.Reset.forEach(c=>c.dispatch()),this.actionsIn.Transition.forEach(c=>c.pause()),this.object.currentTransitionEvent=this,this.actionsOut.Transition.forEach(c=>c.play()),this.actionsOut.Animation.forEach(c=>c.play()),this.actionsIn.SwitchCamera.forEach(c=>c.pause()),this.actionsOut.SwitchCamera.forEach(c=>c.play()),this.actionsOut.SceneTransition.forEach(c=>c.dispatch()),this.actionsOut.SetVariable.forEach(c=>c.checkConditions()),this.actionsOut.SetVariable.forEach(c=>c.dispatch()),this.actionsOut.DynamicVariablePlay.forEach(c=>c.dispatch()))},this.onComplete=({target:u,state:d})=>{this.toState===d&&(this.actionsIn.Audio.forEach(c=>c.dispatchConditional()),this.actionsIn.Video.forEach(c=>c.dispatchConditional()),this.actionsIn.Link.forEach(c=>c.dispatch()),this.actionsIn.Create.forEach(c=>c.dispatch()),this.actionsIn.Destroy.forEach(c=>c.dispatch()),this.actionsIn.Reset.forEach(c=>c.dispatch()),this.actionsOut.Transition.forEach(c=>c.pause()),this.actionsOut.Transition.forEach(c=>c.pause()),this.object.currentTransitionEvent=this,this.actionsIn.Transition.forEach(c=>c.play()),this.actionsIn.Animation.forEach(c=>c.play()),this.actionsOut.SwitchCamera.forEach(c=>c.pause()),this.actionsIn.SwitchCamera.forEach(c=>c.play()),this.actionsIn.SceneTransition.forEach(c=>c.dispatch()),this.actionsIn.SetVariable.forEach(c=>c.checkConditions()),this.actionsIn.SetVariable.forEach(c=>c.dispatch()),this.actionsIn.DynamicVariablePlay.forEach(c=>c.dispatch()))};let{condition:a}=t;if(!a.object)throw new Error("Missing property");let s=n.find(a.object);if(!s)throw new Error("Missing property");if(this.toObject=s,a.state&&!((l=this.toObject.states)!=null&&l[a.state]))throw new Error("Missing property");this.toState=a.state}connect(){(this.actionsOut.Audio.length||this.actionsOut.Video.length||this.actionsOut.Create.length||this.actionsOut.Destroy.length||this.actionsOut.Transition.length||this.actionsOut.Animation.length||this.actionsOut.SwitchCamera.length||this.actionsOut.SceneTransition.length||this.actionsOut.SetVariable.length)&&this.toObject.addEventListener("beginState",this.onBegin),(this.actionsIn.Audio.length||this.actionsIn.Video.length||this.actionsOut.Create.length||this.actionsIn.Destroy.length||this.actionsIn.Transition.length||this.actionsIn.Animation.length||this.actionsIn.SwitchCamera.length||this.actionsIn.SceneTransition.length||this.actionsIn.SetVariable.length)&&this.toObject.addEventListener("completeState",this.onComplete)}disconnect(){super.disconnect(),(this.actionsOut.Audio.length||this.actionsOut.Video.length||this.actionsOut.Create.length||this.actionsOut.Destroy.length||this.actionsOut.Transition.length||this.actionsOut.Animation.length||this.actionsOut.SwitchCamera.length||this.actionsOut.SceneTransition.length||this.actionsOut.SetVariable.length||this.actionsOut.DynamicVariablePlay.length)&&this.toObject.removeEventListener("beginState",this.onBegin),(this.actionsIn.Audio.length||this.actionsIn.Video.length||this.actionsOut.Create.length||this.actionsIn.Destroy.length||this.actionsIn.Transition.length||this.actionsIn.Animation.length||this.actionsIn.SwitchCamera.length||this.actionsIn.SceneTransition.length||this.actionsIn.SetVariable.length||this.actionsIn.DynamicVariablePlay.length)&&this.toObject.removeEventListener("completeState",this.onComplete)}},SAt=class extends Gu{constructor(e,t){super(e),this.eventsPerConditions={Comparison:[],Distance:[],State:[]},this.hasVideoAction=!1;let{page:r,sharedAssets:n}=this.eventContext;r.traverseEntity(i=>{var o;if((o=i.data)!=null&&o.events.length){for(let{id:a,data:s}of i.data.events)if(!s.disabled&&s.type==="Conditional")try{let l;s.condition.type==="Comparison"||(s.condition.type==="Distance"?l=new xAt(a,s,i,r,n,t):s.condition.type==="State"&&(l=new wAt(a,s,i,r,n,t))),l&&(this.eventsPerConditions[s.condition.type].push(l),(l.actionsIn.Video.length||l.actionsOut.Video.length)&&(this.hasVideoAction=!0))}catch{}}})}connect(){super.connect(),Object.values(this.eventsPerConditions).forEach(e=>e.forEach(t=>t.connect()))}disconnect(){super.disconnect(),Object.values(this.eventsPerConditions).forEach(e=>e.forEach(t=>t.disconnect()))}},wx=new F,Uh=new F,Op=new F,jY=new Hs,_At=.01,Zr=new F,ao=new F,UY=new F,mm=new Jt,ak=new Eo,CAt=new qe,sk=new Ii,av=new F,ic=new F,sv=.2;function lk(e,t){!t||(t[0]<t[1]&&(e.x=Math.min(Math.max(e.x,t[0]),t[1])),t[2]<t[3]&&(e.y=Math.min(Math.max(e.y,t[2]),t[3])),t[4]<t[5]&&(e.z=Math.min(Math.max(e.z,t[4]),t[5])))}var AAt=function(){let e=new qe;return(t,r,n)=>{let i=t.obj;e.copy(i.hiddenMatrix),i.parent!==null&&e.premultiply(i.parent.matrixWorld),e.invert(),i.position.copy(r),t.reference==="global"&&lk(i.position,t.limits),i.position.applyMatrix4(e),t.reference==="parent"?lk(i.position,t.limits):t.reference==="local"&&(mm.copy(t.quat0).invert(),i.position.sub(t.position0),i.position.applyQuaternion(mm),lk(i.position,t.limits),mm.invert(),i.position.applyQuaternion(mm),i.position.add(t.position0)),e.multiply(n??i.matrixWorld).decompose(Zr,i.quaternion,ao),i.updateMatrix(),i.hasNonUniformScale&&(i.updateMatrixWorld(),i.updateMatrixWorldSVD()),i instanceof Ts&&Pc(i.parent)&&i.invalidateDownstreamBooleanData(!0)}}(),EAt=class{constructor(e,t,r,n,i,o){this.object=e,this.data=t,this.dropDestIds=[],this.activeIdx=null,this.wasDragEventTriggered=!1,this.resetDampingFactor=this.data.resetSpeed===0?1:8/this.data.resetSpeed+1,this.snapDampingFactor=this.data.snapSpeed===0?1:8/this.data.snapSpeed+1,this.actionsDrag=Ka(t,t.dragDropActions.drag,r,n,i,this.object),this.actionsDrop=Ka(t,t.dragDropActions.drop,r,n,i,this.object);let a=[];this.data.objects.forEach(s=>{let l=r.find(s);!l||l.data.visible!==!1&&(a.push(l),o[l.uuid]&&o[l.uuid].forEach(u=>{let d=r.find(u);!d||d.data.visible!==!1&&a.push(d)}))}),this.data.dropDestinations.forEach(s=>{let l=r.find(s);!l||l.data.visible!==!1&&(this.dropDestIds.push(l.uuid),o[l.uuid]&&o[l.uuid].forEach(u=>{let d=r.find(u);!d||d.data.visible!==!1&&this.dropDestIds.push(d.uuid)}))}),this.dragItems=a.map(s=>(this.data.planeMode==="locked"&&(s.userData.lockedPlane=!0),s.userData.worldPosition0=new F().setFromMatrixPosition(s.matrixWorld),{obj:s,fromPosition:new F().setFromMatrixPosition(s.matrixWorld),pointStart:new F,pointEnd:new F,paused:!0,currentDampingFactor:this.data.dampingFactor,reset:!1,position0:new F().copy(s.position),quat0:new Jt().copy(s.quaternion),snapped:!1,orientationMatrix:new qe,limits:this.data.limits,reference:this.data.referenceFrame}))}get activeDragItem(){return this.activeIdx!==null?this.dragItems[this.activeIdx]:null}dispose(){To(this.actionsDrag),To(this.actionsDrop),this.dragItems.forEach(e=>{e.fromPosition.copy(e.obj.userData.worldPosition0),e.pointStart.copy(e.fromPosition),e.pointEnd.copy(e.pointStart),e.obj.recursiveBBoxNeedsUpdate=!0,e.obj.userData.lockedPlane=void 0,e.obj.position.copy(e.position0),e.obj.quaternion.copy(e.quat0),e.obj.updateMatrix()})}},MAt=class extends Gu{constructor(e,t){super(e),this.eventManager=t,this.events=[],this.lastDropDestination=null,this.dragTimeout=null,this.onPointerDown=n=>{var s;if(Gt.length>1)return;this.eventContext.updateRaycaster(n);let{raycaster:i,page:o}=this.eventContext,a=o.raycastWithClones(i);if(this.lastDropDestination=null,a.length===0){this.activeEvent=null;return}for(let l of this.events){let u=0;for(let{obj:d,pointEnd:c,pointStart:h}of l.dragItems){if(d===a[0].object||d===a[0].object.object||Dr.is(d)&&d.isAncestorOf(a[0].object.uuid)){if(l.activeIdx=u,l.activeDragItem.reset=!1,l.activeDragItem.currentDampingFactor=l.data.dampingFactor,l.activeDragItem.snapped=!1,l.data.cursor==="hand"&&this.setCursor("grabbing"),this.eventManager.controlsManager.usePhysics){l.activeDragItem.obj.rigidBody&&l.activeDragItem.obj.rigidBody.setBodyType(2,!0);let f=l.activeDragItem.obj;d.hasNonUniformScale&&d.updateMatrixWorldSVD(),(f.hasNonUniformScale?f.matrixWorldRigid:f.matrixWorld).decompose(Zr,mm,ao),ak.setFromQuaternion(mm),f.prevR===void 0?(f.prevR=ak.clone(),f.prevT=Zr.clone()):(f.prevR.copy(ak),f.prevT.copy(Zr)),this.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.push(l.activeDragItem.obj)}this.calcPlaneIntersectPos(d,h,l.data.plane,l.data.referenceFrame),c.copy(h),(this.eventManager.controlsManager.usePhysics&&((s=d.data.physics)==null?void 0:s.rigidBody)==="dynamic"||l.data.drop===!1||l.data.resetOnSnapFail===!1)&&l.activeDragItem.fromPosition.setFromMatrixPosition(l.activeDragItem.obj.matrixWorld),this.activeEvent=l,this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!1);return}u++}}this.activeEvent=null},this.onPointerMove=n=>{var s,l,u,d;if(Gt.length>1)return;this.eventContext.updateRaycaster(n);let{raycaster:i,page:o}=this.eventContext,a=o.raycastWithClones(i);if(Gt.length===0){let c=!1;for(let h of this.events){for(let{obj:f}of h.dragItems)if(f===((s=a[0])==null?void 0:s.object)||f===((u=(l=a[0])==null?void 0:l.object)==null?void 0:u.object)||Dr.is(f)&&f.isAncestorOf((d=a[0])==null?void 0:d.object.uuid)){switch(c=!0,h.data.cursor){case"hand":this.setCursor("grab");break;case"move":this.setCursor("move");break}break}if(c)break}c||this.setCursor("default");return}if(this.activeEvent&&this.activeEvent.activeDragItem){let c=this.activeEvent.activeDragItem;c.snapped=!1;let h;if(this.activeEvent.data.drop&&(h=a.filter(f=>c.obj!==f.object&&!c.obj.isAncestorOf(f.object.uuid)&&!(f.object instanceof Ay)&&(this.activeEvent.data.dropOn==="all"||this.activeEvent.dropDestIds.some(m=>m===f.object.uuid||o.scene.find(m).isAncestorOf(f.object.uuid))))[0]),h){let f=UY.copy(h.face.normal).applyMatrix3(sk.getNormalMatrix(h.object.matrixWorld));if(this.activeEvent.data.snapTo==="center")c.fromPosition.setFromMatrixPosition(h.object.matrixWorld);else if(this.activeEvent.data.snapTo==="surface"){if(c.fromPosition.copy(h.point),this.activeEvent.data.snapSurfaceMode==="bbox"){Zr.copy(f).applyMatrix3(sk.setFromMatrix4(c.obj.matrixWorld).transpose());let m=c.obj;Zr.x>sv?ao.x=-m.recursiveBBox.min.x:Zr.x<-sv&&(ao.x=-m.recursiveBBox.max.x),Zr.y>sv?ao.y=-m.recursiveBBox.min.y:Zr.y<-sv&&(ao.y=-m.recursiveBBox.max.y),Zr.z>sv?ao.z=-m.recursiveBBox.min.z:Zr.z<-sv&&(ao.z=-m.recursiveBBox.max.z),ao.applyMatrix3(sk.invert())}else ao.copy(f).multiplyScalar(this.activeEvent.data.snapSurfaceOffset);c.fromPosition.add(ao)}this.activeEvent.data.autoOrient&&(Zr.set(0,1,0).cross(f),Zr.length()<1e-4&&Zr.set(-1,0,0).cross(f),ao.crossVectors(UY,Zr),c.orientationMatrix.makeBasis(Zr,ao,f)),c.pointStart.copy(c.fromPosition),c.pointEnd.copy(c.pointStart),c.currentDampingFactor=this.activeEvent.snapDampingFactor,c.snapped=!0,this.lastDropDestination!==h.object&&(this.lastDropDestination=h.object,this.activeEvent.actionsDrop.Transition.forEach(m=>{m.play()}),this.activeEvent.actionsDrop.Animation.forEach(m=>{m.play()}),this.activeEvent.actionsDrop.Audio.forEach(m=>{m.dispatchGameControl("start")}),this.activeEvent.actionsDrop.Create.forEach(m=>{m.dispatchThrottled()}))}else c.orientationMatrix.makeRotationFromQuaternion(c.quat0),this.lastDropDestination=null,c.currentDampingFactor=this.activeEvent.data.dampingFactor,this.calcPlaneIntersectPos(c.obj,c.pointEnd,this.activeEvent.data.plane,this.activeEvent.data.referenceFrame),this.activeEvent.actionsDrop.Transition.forEach(f=>{f.stop(),f.object.currentState!==null&&f.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrop.Animation.forEach(f=>{f.stop()}),this.activeEvent.actionsDrop.Audio.forEach(f=>{f.dispatchGameControl("stop")});this.activeEvent.actionsDrag.Create.forEach(f=>{f.dispatchThrottled()}),this.activeEvent.actionsDrag.SetVariable.forEach(f=>f.checkConditions()),this.activeEvent.actionsDrag.SetVariable.forEach(f=>f.dispatch()),this.activeEvent.actionsDrag.DynamicVariablePlay.forEach(f=>f.dispatch()),this.activeEvent.wasDragEventTriggered===!1&&(this.activeEvent.wasDragEventTriggered=!0,this.activeEvent.actionsDrag.Transition.forEach(f=>{f.play()}),this.activeEvent.actionsDrag.Animation.forEach(f=>{f.play()}),this.activeEvent.actionsDrag.Audio.forEach(f=>{f.dispatchGameControl("start")})),this.dragTimeout&&window.clearTimeout(this.dragTimeout),this.dragTimeout=window.setTimeout(()=>{!this.activeEvent||(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Audio.forEach(f=>{f.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Transition.forEach(f=>{f.stop(),f.object.currentState!==null&&f.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrag.Animation.forEach(f=>{f.stop()}))},500),this.updateDragItem(c),c.obj.dispatchEvent({type:"requestRender"})}},this.onPointerUp=n=>{var i;if(this.activeEvent&&this.activeEvent.activeDragItem){this.activeEvent.data.cursor==="hand"&&this.setCursor("grab");let o=((i=this.activeEvent.activeDragItem.obj.data.physics)==null?void 0:i.rigidBody)==="dynamic";this.activeEvent.activeDragItem.snapped===!1&&this.activeEvent.data.drop&&this.activeEvent.data.resetOnSnapFail&&(this.eventManager.controlsManager.usePhysics===!1||!o)&&(this.activeEvent.activeDragItem.reset=this.activeEvent.data.resetOnSnapFail,this.activeEvent.activeDragItem.paused=!1,this.activeEvent.activeDragItem.currentDampingFactor=this.activeEvent.resetDampingFactor),this.eventManager.controlsManager.usePhysics&&o&&(this.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.pop(),this.activeEvent.activeDragItem.obj.rigidBody.setBodyType(0,!0),this.activeEvent.activeDragItem.paused=!0),this.activeEvent.wasDragEventTriggered===!0&&(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Transition.forEach(a=>{a.stop(),a.object.currentState!==null&&a.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrag.Animation.forEach(a=>{a.stop()}),this.activeEvent.actionsDrag.Audio.forEach(a=>{a.dispatchGameControl("stop")}),this.activeEvent.actionsDrop.SetVariable.forEach(a=>a.checkConditions()),this.activeEvent.actionsDrop.SetVariable.forEach(a=>a.dispatch()),this.activeEvent.actionsDrop.DynamicVariablePlay.forEach(a=>a.dispatch())),this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!0)}};let r={};e.page.traverseEntity(n=>{n.component&&(r[n.component.uuid]?r[n.component.uuid].push(n.uuid):r[n.component.uuid]=[n.uuid])}),e.page.traverseEntity(n=>{var i;(i=n.data)==null||i.events.filter(o=>o.data.type==="DragDrop"&&!o.data.disabled).forEach(o=>{this.events.push(new EAt(n,o.data,e.page,e.sharedAssets,t,r))})})}connect(){if(!this.events.length)return;this.domEventsNeeded.clear(),this.domEventsNeeded.add("pointerdown");let e=this.eventContext.domElement;e.addEventListener("pointerdown",this.onPointerDown),e.addEventListener("pointermove",this.onPointerMove),e.addEventListener("pointerup",this.onPointerUp),this.domEventsNeeded.add("pointermove")}disconnect(){if(!this.events.length)return;this.domEventsNeeded.clear();let e=this.eventContext.domElement;e.removeEventListener("pointerdown",this.onPointerDown),e.removeEventListener("pointermove",this.onPointerMove),e.removeEventListener("pointerup",this.onPointerUp),this.events.forEach(t=>t.dispose())}setCursor(e){this.eventContext.domElement.style.cursor=e}onAnimationFrameDamping(){for(let e of this.events)for(let t of e.dragItems)t.paused||this.updateDragItem(t,!0)}calcPlaneIntersectPos(e,t,r,n){let{getCamera:i,raycaster:o}=this.eventContext;i().getWorldDirection(Uh),Uh.negate();let a=mm.identity();switch(n==="parent"?CAt.multiplyMatrices(e.parent.matrixWorld,e.hiddenMatrix).decompose(Zr,a,ao):n==="local"&&e.matrixWorld.decompose(Zr,a,ao),r){case"x":Zr.set(1,0,0).applyQuaternion(a),av.copy(Uh).cross(Zr),ic.copy(Zr).cross(av);break;case"y":Zr.set(0,1,0).applyQuaternion(a),av.copy(Uh).cross(Zr),ic.copy(Zr).cross(av);break;case"z":Zr.set(0,0,1).applyQuaternion(a),av.copy(Uh).cross(Zr),ic.copy(Zr).cross(av);break;case"xy":ic.set(0,0,1).applyQuaternion(a);break;case"yz":ic.set(1,0,0).applyQuaternion(a);break;case"xz":ic.set(0,1,0).applyQuaternion(a);break;case"adaptive":Uh.angleTo(ao.set(0,1,0))>Math.PI/6?(Zr.crossVectors(ao.set(0,1,0),Uh),ic.crossVectors(Zr,ao)):ic.set(0,1,0);break;default:ic.copy(Uh);break}Op.setFromMatrixPosition(e.matrixWorld);let s=e.userData.lockedPlane?e.userData.worldPosition0:Op;if(jY.setFromNormalAndCoplanarPoint(ic,s),!!o.ray.intersectPlane(jY,t)&&(r==="x"||r==="y"||r==="z")){let l=ao.subVectors(t,s).dot(Zr);t.copy(s).addScaledVector(Zr,l)}}updateDragItem(e,t=!1){var r,n;Op.setFromMatrixPosition(e.obj.matrixWorld),e.reset==="current"?wx.subVectors(e.fromPosition,Op).divideScalar(e.currentDampingFactor):e.reset==="original"?(wx.subVectors(e.obj.userData.worldPosition0,Op).divideScalar(e.currentDampingFactor),e.fromPosition.copy(e.obj.userData.worldPosition0),e.pointStart.copy(e.fromPosition),e.pointEnd.copy(e.pointStart)):wx.subVectors(e.pointEnd,e.pointStart).add(e.fromPosition).sub(Op).divideScalar(e.currentDampingFactor),e.paused=e.currentDampingFactor>1?wx.length()<_At:!0,(this.activeEvent&&this.activeEvent.data.dampingFactor===1||t)&&AAt(e,wx.add(Op),(r=this.activeEvent)!=null&&r.data.drop&&((n=this.activeEvent)!=null&&n.data.autoOrient)?e.orientationMatrix:null),e.obj.dispatchEvent({type:"beginEvent",eventName:"DragDrop"}),this.eventManager.requestRender()}},lv=new F,uk=new F,xd=new F,wd=new F,$Y=new Hs,PAt=.01,TAt={type:"requestRender"},OAt=function(){let e=new F,t=new F;return(r,n,i)=>i>0?(e.subVectors(r,n),e.length()<=i?r:t.copy(n).add(e.normalize().multiplyScalar(i))):n}(),VY=function(){let e=new qe;return(t,r)=>{t.position.copy(r),t.parent!==null&&(e.copy(t.parent.matrixWorld).invert(),t.position.applyMatrix4(e)),e.copy(t.hiddenMatrix).invert(),t.position.applyMatrix4(e),t.updateMatrix(),t.hasNonUniformScale&&(t.updateMatrixWorld(),t.updateMatrixWorldSVD()),t instanceof Ts&&Pc(t.parent)&&t.invalidateDownstreamBooleanData(!0)}}(),IAt=class{constructor(e,t,r,n,i){this.data=e,this.object=t,this.paused=!1,this.currentDampingFactor=1,this.snapComplete=!1,this.isReset=!1,this.worldPosition0=new F,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...QN.defaultData,...e,...e.resetOnPointerLeave===void 0&&{resetOnPointerLeave:!1}},e.target===void 0||e.target==="cursor"||(this.target=r.find(e.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.resetDampingFactor=80/this.data.resetSpeed+1,this.object.getWorldPosition(this.worldPosition0),this.actions=Ka(e,e.actions,r,n,i,t)}},DAt=class extends Gu{constructor(e,t){super(e),this.events=[],this.pairOfEventListeners=[],this.onMouseMove=n=>{if(!(Gt.length>1)){this.eventContext.updateRaycaster(n);for(let i of this.events)i.target===void 0&&this.updateSingleEvent(i)}},this.onMouseEnter=n=>{for(let i of this.events)i.target===void 0&&(i.isReset=!1,i.currentDampingFactor=i.data.dampingFactor)},this.onMouseLeave=n=>{for(let i of this.events)i.target===void 0&&(i.data.resetOnPointerLeave&&(i.isReset=!0,i.currentDampingFactor=i.resetDampingFactor),this.updateSingleEvent(i))},this.onTargetChange=n=>()=>{this.updateSingleEvent(n)};let{page:r}=this.eventContext;r.traverseEntity(n=>{var o,a;let i=(o=n.data)==null?void 0:o.events.find(s=>s.data.type==="Follow"&&!s.data.disabled);i&&(!r.data.globalPhysics.usePhysics||((a=n.dataPatched.physics)==null?void 0:a.rigidBody)!=="dynamic")&&this.events.push(new IAt(i.data,n,r,e.sharedAssets,t))})}connect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),Xs&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),t.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents||(e.addEventListener("pointerenter",this.onMouseEnter),e.addEventListener("pointerleave",this.onMouseLeave));for(let r of this.events)if(r.target!==void 0){let n=r.target,i=this.onTargetChange(r);this.pairOfEventListeners.push([n,i]),n.addEventListener("requestRender",i)}}disconnect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),Xs&&e.removeEventListener("pointerdown",this.onMouseMove),t.removeEventListener("pointermove",this.onMouseMove),e.removeEventListener("pointerenter",this.onMouseEnter),e.removeEventListener("pointerleave",this.onMouseLeave);for(let[r,n]of this.pairOfEventListeners)r.removeEventListener("requestRender",n);for(let r of this.events)r.paused=!0,r.isReset=!1,To(r.actions)}onAnimationFrameDamping(){for(let e of this.events)e.paused||this.updateSingleEvent(e,!0)}updateSingleEvent(e,t=!1){var a;this.events.forEach(s=>{s.actions.Create.forEach(l=>{l.dispatchThrottled()})});let{plane:r,limitDistance:n,limitDistanceEnabled:i}=e.data;if(e.object.getWorldPosition(xd),e.isReset)wd.copy(e.worldPosition0);else if(e.target)e.target.getWorldPosition(wd);else{let{getCamera:s,raycaster:l}=this.eventContext;if(r==="custom"?(s().getWorldDirection(uk),uk.negate(),lv.copy(uk)):r==="xy"?lv.set(0,0,1):r==="xz"?lv.set(0,1,0):r==="yz"&&lv.set(1,0,0),$Y.setFromNormalAndCoplanarPoint(lv,xd),!l.ray.intersectPlane($Y,wd))return}if(!e.isReset){if(wd.distanceTo(e.worldPosition0)>n&&i&&e.target)if(e.snapComplete=!1,e.data.snapDelay&&(e.delayFinished=!1,typeof window<"u"&&e.timeoutId!==null&&(window.clearTimeout(e.timeoutId),e.timeoutId=null)),e.wasOutside=!0,e.data.resetAfterDistanceLimit)wd.copy(e.worldPosition0),e.currentDampingFactor=e.resetDampingFactor;else return;else if(e.wasOutside&&(e.data.snapDelay&&typeof window<"u"&&(e.timeoutId=window.setTimeout(()=>{e.delayFinished=!0,e.paused=!1,this.updateSingleEvent(e)},e.data.snapDelay*1e3)),e.currentDampingFactor=e.data.dampingFactor,e.wasOutside=!1),e.delayFinished===!1)return}e.data.enabledTranslation[0]===!1&&(wd.x=xd.x),e.data.enabledTranslation[1]===!1&&(wd.y=xd.y),e.data.enabledTranslation[2]===!1&&(wd.z=xd.z);let o=OAt(xd,wd,e.wasOutside?0:e.data.maxDelta);if(e.currentDampingFactor>1){let s=lv.subVectors(o,xd).divideScalar(e.currentDampingFactor);xd.add(s),t&&VY(e.object,xd),e.paused=s.length()<PAt}else VY(e.object,o),e.paused=!0;(a=e.object)==null||a.dispatchEvent({type:"beginEvent",eventName:"Follow"}),e.object.dispatchEvent(TAt)}},Sx=new F,yA=new F,_x=new qe,uv=new Jt,$h=new Jt,Cx=new F,Ax=new F,Ip=new F,Sd=new F,ck=new Hs,RAt=1e-6,kAt={type:"requestRender"},LAt={type:"changeRotation"},HY=function(){let e=new qe;return function(t,r){t.parent!==null?e.multiplyMatrices(t.parent.matrixWorld,t.hiddenMatrix):e.copy(t.hiddenMatrix),r.premultiply(kce(e).invert()),t.rotation.setFromRotationMatrix(r),t.updateMatrix(),t instanceof Ts&&Pc(t.parent)&&t.invalidateDownstreamBooleanData(!0)}}(),NAt=class{constructor(e,t,r){this.object=t,this.paused=!1,this.currentDampingFactor=1,this.isReset=!1,this.worldQuaternion0=new Jt,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...ZN.defaultData,...e,...e.resetOnPointerLeave===void 0&&{resetOnPointerLeave:!1}},e.target===void 0||e.target==="cursor"||(this.target=r.find(e.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.object.getWorldQuaternion(this.worldQuaternion0),this.resetDampingFactor=80/this.data.resetSpeed+1}},zAt=class extends Gu{constructor(e){super(e),this.events=[],this.pairOfEventListeners=[],this.pairOfUserEventListeners=[],this.onMouseMove=r=>{if(!(Gt.length>1)){this._lastMouseEvent=r,this.eventContext.updateRaycaster(r);for(let n of this.events)n.target===void 0&&this.updateSingleEvent(n)}},this.onMouseEnter=r=>{for(let n of this.events)n.target===void 0&&(n.isReset=!1,n.currentDampingFactor=n.data.dampingFactor)},this.onMouseLeave=r=>{for(let n of this.events)n.target===void 0&&(n.data.resetOnPointerLeave&&(n.isReset=!0,n.currentDampingFactor=n.resetDampingFactor),this.updateSingleEvent(n))},this.onScroll=r=>{if(this._lastMouseEvent){let n=new PointerEvent("pointermove",{clientX:this._lastMouseEvent.clientX,clientY:this._lastMouseEvent.clientY,bubbles:!0,cancelable:!0,view:window});this.eventContext.eventElement.dispatchEvent(n)}},this.onTargetChange=r=>()=>{this.updateSingleEvent(r)},this.createUserEventListener=r=>({eventName:n,target:i})=>{if(!n||!i)return;let o=f_(n);o&&o==="LookAt"&&this.updateSingleEvent(r)};let{page:t}=this.eventContext;t.traverseEntity(r=>{var i,o;let n=(i=r.data)==null?void 0:i.events.find(a=>a.data.type==="LookAt"&&!a.data.disabled);n&&(!t.data.globalPhysics.usePhysics||((o=r.dataPatched.physics)==null?void 0:o.rigidBody)!=="dynamic")&&this.events.push(new NAt(n.data,r,t))})}connect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),Xs&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),t.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents?t.addEventListener("scroll",this.onScroll):(e.addEventListener("pointerenter",this.onMouseEnter),e.addEventListener("pointerleave",this.onMouseLeave));for(let r of this.events){if(r.target!==void 0){let o=this.onTargetChange(r),a=r.target;this.pairOfEventListeners.push([a,o]),a.addEventListener("requestRender",o)}let n=this.createUserEventListener(r),i=r.object;this.pairOfUserEventListeners.push([i,n]),i.addEventListener("userEvent",n)}}disconnect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),Xs&&e.removeEventListener("pointerdown",this.onMouseMove),t.removeEventListener("pointermove",this.onMouseMove),e.removeEventListener("pointerenter",this.onMouseEnter),e.removeEventListener("pointerleave",this.onMouseLeave),t.removeEventListener("scroll",this.onScroll);for(let[r,n]of this.pairOfEventListeners)r.removeEventListener("requestRender",n);for(let[r,n]of this.pairOfUserEventListeners)r.removeEventListener("userEvent",n);for(let r of this.events)r.paused=!0,r.isReset=!1}onAnimationFrameDamping(){for(let e of this.events)e.paused||this.updateSingleEvent(e)}updateSingleEvent(e){var h;let{tilt:t,axis:r,distance:n,plane:i,limitDistance:o,enabledRotation:a,limitDistanceEnabled:s}=e.data,{getCamera:l,raycaster:u}=this.eventContext,{object:d,target:c}=e;if(d.getWorldPosition(Cx),!e.isReset)if(e.target)e.target.getWorldPosition(Ax);else{if(i==="custom"?(l().getWorldDirection(yA),yA.negate(),ck.setFromNormalAndCoplanarPoint(yA,Cx)):(i==="xy"?Sx.set(0,0,1):i==="xz"?Sx.set(0,1,0):i==="yz"&&Sx.set(1,0,0),ck.setFromNormalAndCoplanarPoint(Sx,Cx)),!u.ray.intersectPlane(ck,Ax))return;n>0&&(i==="custom"||i===void 0)&&Ax.addScaledVector(yA,n)}if(e.isReset||(c?t==="target"?Ip.copy(c.up).applyMatrix4(_x.extractRotation(c.matrixWorld)).normalize():a.some(f=>f===!1)?(r==="x"?(Sd.set(0,0,1),a[2]===!1&&Sd.set(0,1,0)):r==="y"?(Sd.set(1,0,0),a[0]===!1&&Sd.set(0,0,1)):(Sd.set(0,1,0),a[1]===!1&&Sd.set(1,0,0)),Ip.copy(Sd).applyQuaternion(e.worldQuaternion0).normalize()):Ip.set(0,1,0):i==="custom"?Ip.set(0,1,0):Ip.copy(Sx)),e.isReset)$h.copy(e.worldQuaternion0);else if(Cx.distanceTo(Ax)>o&&s&&c)if(e.data.snapDelay&&(e.delayFinished=!1,typeof window<"u"&&e.timeoutId!==null&&(window.clearTimeout(e.timeoutId),e.timeoutId=null)),e.wasOutside=!0,e.data.resetAfterDistanceLimit)$h.copy(e.worldQuaternion0),e.currentDampingFactor=e.resetDampingFactor;else return;else{if(e.wasOutside&&(e.data.snapDelay&&typeof window<"u"&&(e.timeoutId=window.setTimeout(()=>{e.delayFinished=!0,e.paused=!1,this.updateSingleEvent(e)},e.data.snapDelay*1e3)),e.currentDampingFactor=e.data.dampingFactor,e.wasOutside=!1),e.delayFinished===!1)return;BAt(_x,Ax,Cx,Ip,r,Sd),$h.setFromRotationMatrix(_x),uv.setFromUnitVectors(Sd.applyQuaternion($h),Ip),a.some(f=>f===!1)&&t!=="target"&&$h.premultiply(uv).normalize()}e.currentDampingFactor>1?(d.updateWorldMatrix(!0,!1),uv.setFromRotationMatrix(kce(d.matrixWorld)),uv.slerp($h,1/e.currentDampingFactor),HY(d,_x.makeRotationFromQuaternion(uv)),e.paused=8*(1-uv.dot($h))<RAt):(HY(d,_x.makeRotationFromQuaternion($h)),e.paused=!0),(h=e.object)==null||h.dispatchEvent({type:"beginEvent",eventName:"LookAt"}),d.dispatchEvent(kAt),d.dispatchEvent(LAt)}},xl=new F,io=new F,Ci=new F;function BAt(e,t,r,n,i,o){let a=e.elements;Ci.subVectors(t,r),Ci.lengthSq()===0&&(Ci.z=1),Ci.normalize(),io.crossVectors(n,Ci),io.lengthSq()===0&&(Math.abs(n.z)===1?Ci.x+=1e-4:Ci.z+=1e-4,Ci.normalize(),io.crossVectors(n,Ci)),io.normalize(),xl.crossVectors(Ci,io),i==="x"?o.z===1?[io,xl,Ci]=[Ci,io,xl]:(io.negate(),[io,Ci]=[Ci,io]):i==="y"?o.x===1?[io,xl,Ci]=[xl,Ci,io]:(io.negate(),[xl,Ci]=[Ci,xl]):o.x===1&&(io.negate(),[io,xl]=[xl,io]),a[0]=io.x,a[4]=xl.x,a[8]=Ci.x,a[1]=io.y,a[5]=xl.y,a[9]=Ci.y,a[2]=io.z,a[6]=xl.z,a[10]=Ci.z}var FAt=class{constructor(e,t,r,n,i,o){this.id=e,this.data=t,this.object=r,this.entered=!1,this.actions=Ka(t,t.actions,n,i,o,r)}disconnect(){To(this.actions)}dispatchEnter(){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.entered||(this.entered=!0,this.actions.Transition.forEach(e=>e.playFromCurrent()),this.actions.Animation.forEach(e=>e.play()),this.actions.Create.forEach(e=>e.dispatch()),this.actions.Destroy.forEach(e=>e.dispatch()),this.actions.SwitchCamera.forEach(e=>e.playFromCurrent()),this.actions.SceneTransition.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()))}dispatchLeave(){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.entered&&(this.entered=!1,this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent()))}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.Create.forEach(t=>t.dispatch()),this.actions.Destroy.forEach(t=>t.dispatch()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.SceneTransition.forEach(t=>t.dispatch()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch())}},jAt=class extends Gu{constructor(e,t){super(e),this.eventsPerObjects={},this.objects=[],this._prevObjects=[],this.onMouseDown=i=>{Gt.length>1||(this.eventContext.updateRaycaster(i),this.handleMouseHoverEvent())},this.onMouseUp=i=>{Gt.length>1||this.handleMouseHoverEvent(!0)},this.onMouseMove=i=>{Gt.length>1||(this.eventContext.updateRaycaster(i),this.handleMouseHoverEvent())},this.onUserEvent=({eventName:i,target:o,reverse:a})=>{var l;if(!i||!o)return;let s=f_(i);s&&s==="MouseHover"&&(o.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(l=this.eventsPerObjects[o.uuid])==null||l.forEach(u=>u.dispatchUserEvent(a)))};let{page:r,sharedAssets:n}=this.eventContext;r.traverseEntity(i=>{var o,a;if(!(!i.visible||!((o=i.data)!=null&&o.events.length))){for(let{id:s,data:l}of i.data.events)if(!l.disabled&&l.type==="MouseHover")try{let u=new FAt(s,l,i,r,n,t);this.eventsPerObjects[i.uuid]?this.eventsPerObjects[i.uuid].push(u):this.eventsPerObjects[i.uuid]=[u]}catch{}(a=this.eventsPerObjects[i.uuid])!=null&&a.length&&this.objects.push(i)}})}connect(){if(!this.objects.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),Xs&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseDown),this.domEventsNeeded.add("pointerup"),e.addEventListener("pointerup",this.onMouseUp)),this.domEventsNeeded.add("pointermove"),e.addEventListener("pointermove",this.onMouseMove),this.objects.forEach(t=>{t.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if(!this.objects.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),Xs&&(e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerup",this.onMouseUp)),e.removeEventListener("pointermove",this.onMouseMove),Object.values(this.eventsPerObjects).forEach(t=>{t.forEach(r=>{r.disconnect()})}),this.objects.forEach(t=>{t.removeEventListener("userEvent",this.onUserEvent)})}handleMouseHoverEvent(e=!1){let t=[];if(!e){let{stopRaycast:r,raycaster:n,page:i}=this.eventContext;if(r){let o=oE(n,i,this.objects);t=sB(o)}else this.objects.forEach(o=>{qP(n,o)&&t.push(o)})}this._prevObjects.length&&this._prevObjects.forEach(r=>{var n;t.includes(r)||(r.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(n=this.eventsPerObjects[r.uuid])==null||n.forEach(i=>i.dispatchLeave()))}),t.length&&t.forEach(r=>{var n;r.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(n=this.eventsPerObjects[r.uuid])==null||n.forEach(i=>i.dispatchEnter())}),this._prevObjects=t}},UAt=class{constructor(e,t,r,n,i,o){this.id=e,this.data=t,this.object=r,this.scrollCounter=0,this.actions=Ka(t,t.actions,n,i,o,r)}connect(){this.scrollCounter=0}disconnect(){To(this.actions)}dispatch(e){this.actions.Transition.forEach(n=>{n.object.currentTransitionEvent!==this&&(n.object.currentTransitionEvent=this,n.init())});let t=e>0?1:-1;this.scrollCounter+=t,this.scrollCounter=Math.min(Math.max(this.scrollCounter,0),this.data.steps);let r=this.scrollCounter/this.data.steps;this.actions.Transition.forEach(n=>n.seek(r)),this.actions.Animation.forEach(n=>n.seek(t)),this.actions.Create.forEach(n=>n.dispatchThrottled()),this.actions.SetVariable.forEach(n=>n.checkConditions()),this.actions.SetVariable.forEach(n=>n.dispatch()),this.actions.DynamicVariablePlay.forEach(n=>n.dispatch())}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>{t.playFromCurrent()}),this.actions.Animation.forEach(t=>{t.playFromCurrent()})),this.actions.Create.forEach(t=>t.dispatchThrottled()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch())}},$At=class{constructor(e,t,r,n,i,o,a){this.id=e,this.data=t,this.object=r,this.domElement=o,this.eventManager=a,this.scrollStart=0,this.scrollEnd=0,this.actions=Ka(t,t.actions,n,i,a,r)}computeScrollBounds(){let e=this.domElement.getBoundingClientRect(),t=document.body,r=document.documentElement,n=window.pageYOffset||r.scrollTop||t.scrollTop,i=r.clientTop||t.clientTop||0,o=Math.round(e.top+n-i);if(this.data.startFrom==="enter"){let a=window.innerHeight,s=e.height,l=this.data.enterAnchor,u=l==="top"?a:l==="bottom"?a-s:a-s*.5;this.scrollStart=o-u}else this.scrollStart=0;this.scrollStart+=this.data.startOffset??0,this.scrollEnd=this.scrollStart+(this.data.endAfter??400),this.box=e,this.computeScroll({x:window.scrollX,y:window.scrollY})}connect(){this.computeScrollBounds()}disconnect(){To(this.actions)}handleResize(){this.computeScrollBounds()}get isInvalidBox(){return this.box===void 0||this.box.width===0&&this.box.height===0&&this.box.top===0&&this.box.bottom===0}computeScroll({x:e,y:t}){this.actions.Transition.forEach(i=>{i.object.currentTransitionEvent!==this&&(i.object.currentTransitionEvent=this,i.init())});let r=this.scrollEnd-this.scrollStart,n=Math.min(1,Math.max(0,(t-this.scrollStart)/r));this.actions.Transition.forEach(i=>i.seek(n)),this.actions.Animation.forEach(i=>i.seek(n)),this.actions.Create.forEach(i=>i.dispatchThrottled()),this.actions.SetVariable.forEach(i=>i.checkConditions()),this.actions.SetVariable.forEach(i=>i.dispatch()),this.actions.DynamicVariablePlay.forEach(i=>i.dispatch())}dispatch(e){this.isInvalidBox&&this.computeScrollBounds(),this.computeScroll(e)}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>{t.playFromCurrent()}),this.actions.Animation.forEach(t=>{t.playFromCurrent()})),this.actions.Create.forEach(t=>t.dispatchThrottled()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch())}},VAt=class extends Gu{constructor(e,t){super(e),this.wheelEventsPerObject=new Map,this.scrollEventsPerObject=new Map,this.isInview=!0,this.handleResize=()=>{[...this.scrollEventsPerObject.entries()].forEach(([a,s])=>{s.forEach(l=>l.handleResize())})},this.onScroll=a=>{if(!this.isInview)return;let s={y:window.scrollY,x:window.scrollX};[...this.scrollEventsPerObject.entries()].forEach(([l,u])=>{l.dispatchEvent({type:"beginEvent",eventName:"Scroll",scroll:s}),u.forEach(d=>d.dispatch(s))})},this.onWheel=a=>{!this.isInview||a.ctrlKey||[...this.wheelEventsPerObject.entries()].forEach(([s,l])=>{s.dispatchEvent({type:"beginEvent",eventName:"Scroll",deltaY:a.deltaY}),l.forEach(u=>u.dispatch(a.deltaY))})},this.onUserEvent=({eventName:a,target:s,reverse:l})=>{var d;if(!a||!s)return;let u=f_(a);u&&u==="Scroll"&&(s.dispatchEvent({type:"beginEvent",eventName:"Scroll"}),(d=this.wheelEventsPerObject.get(s))==null||d.forEach(c=>{c.dispatchUserEvent(l)}))};let{page:r,sharedAssets:n,domElement:i,isExport:o}=this.eventContext;r.traverseEntity(a=>{var s,l,u;if((s=a.data)!=null&&s.events.length){for(let{id:d,data:c}of a.data.events)if(!c.disabled&&c.type==="Scroll")if(c.trigger==="load"||!o){let h=new UAt(d,c,a,r,n,t);this.wheelEventsPerObject.has(a)?(l=this.wheelEventsPerObject.get(a))==null||l.push(h):this.wheelEventsPerObject.set(a,[h])}else{let h=new $At(d,c,a,r,n,i,t);this.scrollEventsPerObject.has(a)?(u=this.scrollEventsPerObject.get(a))==null||u.push(h):this.scrollEventsPerObject.set(a,[h])}}}),this.intersectionObserver=new IntersectionObserver(a=>{let s=a[0];s&&(this.isInview=s.isIntersecting)},{root:null})}connect(){this.intersectionObserver.observe(this.eventContext.domElement),[...this.wheelEventsPerObject.entries()].forEach(([e,t])=>{t.forEach(r=>r.connect()),e.addEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([e,t])=>{t.forEach(r=>r.connect()),e.addEventListener("userEvent",this.onUserEvent)}),[...this.wheelEventsPerObject.values()].some(e=>e.length)&&(this.domEventsNeeded.add("wheel"),window.addEventListener("wheel",this.onWheel)),[...this.scrollEventsPerObject.values()].some(e=>e.length)&&(this.domEventsNeeded.add("scroll"),window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.handleResize))}disconnect(){window.removeEventListener("wheel",this.onWheel),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.handleResize),this.intersectionObserver.unobserve(this.eventContext.domElement),this.domEventsNeeded.clear(),[...this.wheelEventsPerObject.entries()].forEach(([e,t])=>{t.forEach(r=>r.disconnect()),e.removeEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([e,t])=>{t.forEach(r=>r.disconnect()),e.removeEventListener("userEvent",this.onUserEvent)})}},HAt=class{constructor(e,t,r,n,i,o){this.id=e,this.data=t,this.object=r,this.actions=Ka(t,t.actions,n,i,o,r)}disconnect(){To(this.actions)}dispatch(){this.actions.Transition.forEach(e=>{e.play()}),this.actions.Animation.forEach(e=>{e.play()}),this.actions.SwitchCamera.forEach(e=>{e.play()}),this.actions.SceneTransition.forEach(e=>{e.dispatch()}),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.Create.forEach(e=>{e.dispatchFromStart()}),this.actions.Destroy.forEach(e=>{e.dispatchFromStart()})}dispatchAfter(e){this.actions.Audio.forEach(t=>{(t.interaction.data.triggerAfter??"any")===e&&(t.interaction instanceof pm?t.interaction.audioPlayer.play():t.interaction instanceof tB&&t.interaction.dispatch())}),this.actions.Video.forEach(t=>{let r=t.interaction.data.triggerAfter??"autoplay";r===e&&(t.interaction instanceof Py?t.interaction.play(r==="autoplay"):t.interaction instanceof oB&&t.interaction.dispatch())})}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.SceneTransition.forEach(t=>t.dispatch()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.interaction instanceof pm?t.interaction.audioPlayer.play():t.interaction instanceof tB&&t.interaction.dispatch()}),this.actions.Video.forEach(t=>{t.interaction instanceof Py?t.interaction.play():t.interaction instanceof oB&&t.interaction.dispatch()})}},GAt=class extends Gu{constructor(e,t){super(e),this.eventManager=t,this.eventsPerObject=new Map,this.eventsAfterPerObject=new Map,this.onMouseDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,n])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),n.forEach(i=>{i.dispatchAfter("mouseDown")})})},this.onKeyDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,n])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),n.forEach(i=>{i.dispatchAfter("keyDown")})})},this.onAny=()=>{let{domElement:r,isExport:n}=this.eventContext;(n?document:r).removeEventListener("pointerdown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([i,o])=>{i.dispatchEvent({type:"beginEvent",eventName:"Start"}),o.forEach(a=>{a.dispatchAfter("any")})})},this.onSceneTransitionAudioVideoPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,n])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),n.forEach(i=>{i.actions.Audio.forEach(o=>{o.interaction instanceof pm&&o.interaction.audioPlayer.play()}),i.actions.Video.forEach(o=>{let a=o.interaction.data.triggerAfter??"autoplay";o.interaction instanceof Py&&o.interaction.play(a==="autoplay")})})})},this.onPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,n])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),n.forEach(i=>{i.dispatchAfter("autoplay")})})},this.onUserEvent=({eventName:r,target:n,reverse:i})=>{var a,s;if(!r||!n)return;let o=f_(r);o&&o==="Start"&&(n.dispatchEvent({type:"beginEvent",eventName:"Start"}),(a=this.eventsPerObject.get(n))==null||a.forEach(l=>{l.dispatchUserEvent(i)}),(s=this.eventsAfterPerObject.get(n))==null||s.forEach(l=>{l.dispatchUserEvent(i)}))}}connect(){let{sharedAssets:e,page:t}=this.eventContext;if(t.traverseEntity(r=>{var n,i,o,a;if((n=r.data)!=null&&n.events.length)for(let{id:s,data:l}of r.data.events){if(l.disabled||l.type!=="Start")continue;let u=new HAt(s,l,r,t,e,this.eventManager);(u.actions.Transition.length||u.actions.Animation.length||u.actions.SwitchCamera.length||u.actions.Create.length||u.actions.Destroy.length||u.actions.SceneTransition.length||u.actions.SetVariable.length||u.actions.DynamicVariablePlay.length)&&(this.eventsPerObject.has(r)?(i=this.eventsPerObject.get(r))==null||i.push(u):this.eventsPerObject.set(r,[u])),u.actions.Audio.length&&(this.eventsAfterPerObject.has(r)?(o=this.eventsAfterPerObject.get(r))==null||o.push(u):this.eventsAfterPerObject.set(r,[u])),u.actions.Video.length&&(this.hasVideoAction=!0,this.eventsAfterPerObject.has(r)?(a=this.eventsAfterPerObject.get(r))==null||a.push(u):this.eventsAfterPerObject.set(r,[u]))}}),[...this.eventsAfterPerObject.values()].some(r=>r.length)){if(this.eventManager.activateCount===0){let{domElement:r,isExport:n}=this.eventContext,i=n?document:r;i.addEventListener("pointerdown",this.onMouseDown,{once:!0}),i.addEventListener("mousedown",this.onMouseDown,{once:!0}),document.addEventListener("keydown",this.onKeyDown,{once:!0}),i.addEventListener("pointerdown",this.onAny),i.addEventListener("mousedown",this.onAny),document.addEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([o,a])=>{o.addEventListener("userEvent",this.onUserEvent)})}else this.onSceneTransitionAudioVideoPlay();this.onPlay()}[...this.eventsPerObject.entries()].forEach(([r,n])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),n.forEach(i=>i.dispatch()),r.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if([...this.eventsAfterPerObject.values()].some(e=>e.length)){let{domElement:e,isExport:t}=this.eventContext,r=t?document:e;r.removeEventListener("pointerdown",this.onMouseDown),r.removeEventListener("mousedown",this.onMouseDown),document.removeEventListener("keydown",this.onKeyDown),r.removeEventListener("pointerdown",this.onAny),r.removeEventListener("mousedown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([n,i])=>{n.removeEventListener("userEvent",this.onUserEvent),i.forEach(o=>o.disconnect())})}[...this.eventsPerObject.entries()].forEach(([e,t])=>{e.removeEventListener("userEvent",this.onUserEvent),t.forEach(r=>r.disconnect())}),this.eventsPerObject.clear(),this.eventsAfterPerObject.clear()}},WAt=class{constructor(e,t,r,n,i,o){this.id=e,this.data=t,this.object=r,this.disabled=!1,this.alreadyPlayedNonTogglingActions=new Set,this.actions=Ka(t,t.actions,n,i,o,r),this.target=t.target,this.useToggle=t.runMode==="Toggle"}disconnect(){To(this.actions)}dispatch(e){this.disabled||(this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this?(t.object.currentTransitionEvent=this,t.init()):this.data.runMode==="Once"&&this.alreadyPlayedNonTogglingActions.add(t)}),this.object.dispatchEvent({type:"beginEvent",eventName:"Collision"}),this.useToggle?(this.actions.Transition.forEach(t=>{t.toggle()}),this.actions.Animation.forEach(t=>{t.toggle()})):(this.actions.Transition.forEach(t=>{this.alreadyPlayedNonTogglingActions.has(t)===!1&&t.play()}),this.actions.Animation.forEach(t=>{t.play()})),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch(e??!1)}),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()}))}},qAt=class extends Gu{constructor(e,t,r,n,i){super(e),this.sharedVariables=t,this.eventManager=r,this.needsMouse=n,this.needsRaycast=i,this.dynamicVars=[],this.variablesToWatch=[],this.prevMouseProperty=null,this.prevRaycastProperty=null,this.pauseTime=0,this.events=[],this.onFrame=o=>{this.rafId=window.requestAnimationFrame(this.onFrame);let a=new Date,s=[],l=[];for(let c=0;c<this.propertiesToWatch.length;c++){let{objectId:h,property:f,prevValue:m}=this.propertiesToWatch[c],p=this.eventContext.scene.find(h),g=ez.propertyPaths[f];if(g[0]==="width"||g[0]==="height"||g[0]==="depth")p=p.geometry.userData.parameters[g[0]];else for(let v=0;v<g.length;v++)p=p[g[v]];m===null?this.propertiesToWatch[c].prevValue=p instanceof F?p.clone():p:(p instanceof F?!p.equals(m):m!==p)&&(l.push({objId:h,property:f}),p instanceof F?this.propertiesToWatch[c].prevValue.copy(p):this.propertiesToWatch[c].prevValue=p)}for(let c=0;c<this.variablesToWatch.length;c++){let{id:h,prevValue:f}=this.variablesToWatch[c],m=this.shared.getVariable(h);m!==f&&(s.push(h),this.variablesToWatch[c].prevValue=m)}for(let c=0;c<this.dynamicVars.length;c++){let{id:h,expectedTime:f,last:m,data:p,timerSeconds:g,startValue:v}=this.dynamicVars[c],b=1e3;if((p.dynamicVariableType==="timer"||p.dynamicVariableType==="stopwatch")&&p.format==="number3decimal"?b=1:p.dynamicVariableType==="counter"?b=p.updateInterval:p.dynamicVariableType==="random"&&(b=p.isStatic?1/0:p.updateInterval),f===-1){this.dynamicVars[c].last=o,this.dynamicVars[c].expectedTime=o+b;continue}if(!((this.shared.getDynamicVariablePlayState(h)==="Stopped"||this.shared.getDynamicVariablePlayState(h)==="Restarted")&&(this.dynamicVars[c].last=o,this.dynamicVars[c].expectedTime=o+b,p.dynamicVariableType==="counter"&&this.shared.getVariable(h)!==v&&(this.shared.updateVariable(h,v),this.eventManager.requestRender()),(p.dynamicVariableType==="timer"||p.dynamicVariableType==="stopwatch")&&this.dynamicVars[c].timerSeconds!==v&&(this.dynamicVars[c].timerSeconds=v,this.shared.updateVariable(h,vu.getFormattedTimerTime(v,p)),this.eventManager.requestRender()),this.shared.getDynamicVariablePlayState(h)==="Restarted"&&this.shared.setDynamicVariablePlayState(h,"Playing"),this.shared.getDynamicVariablePlayState(h)==="Stopped"))){if(this.shared.getDynamicVariablePlayState(h)==="Paused"){this.dynamicVars[c].deltaToExpectedTime===void 0&&(this.dynamicVars[c].deltaToExpectedTime=Math.max(this.dynamicVars[c].expectedTime-o,0)),this.dynamicVars[c].last=o-(b-this.dynamicVars[c].deltaToExpectedTime),this.dynamicVars[c].expectedTime=o+this.dynamicVars[c].deltaToExpectedTime;continue}else this.dynamicVars[c].deltaToExpectedTime=void 0;if(o>=f)if(this.dynamicVars[c].last=o,this.dynamicVars[c].expectedTime+=b,p.dynamicVariableType==="random"){let y=p.min+Math.random()*(p.max-p.min),x=p.decimals;y=Math.round(y*Math.pow(10,x))/Math.pow(10,x),this.shared.updateVariable(h,y),s.push(h),this.eventManager.requestRender()}else if(p.dynamicVariableType==="counter"){if(p.increment===0)continue;let y=this.shared.getVariable(h),x=this.shared.getDynamicVariableToggleIsForward(h)??!0,S=this.shared.getVariable(h)+p.increment*(x?1:-1);p.hasEnd&&(S=p.increment>0?Et.clamp(S,v,p.endValue):Et.clamp(S,p.endValue,v),S===v&&this.shared.setDynamicVariableToggleIsForward(h,void 0),p.repeat?S===p.endValue&&(S=v):(S===v||S===p.endValue)&&this.shared.setDynamicVariablePlayState(h,"Paused")),S!==y&&(s.push(h),this.shared.updateVariable(h,S),this.eventManager.requestRender())}else if(p.dynamicVariableType==="time")this.shared.updateVariable(h,bX(a,p)),s.push(h),this.eventManager.requestRender();else{let y=Ys.isTextValue(p.endValue)?GY(p.endValue.textValue):p.endValue,x=this.shared.getDynamicVariableToggleIsForward(h)??!0,S=g+(o-m)/1e3*(p.dynamicVariableType==="timer"?-1:1)*(x?1:-1);S=Math.max(S,0),p.hasEnd&&(S=p.dynamicVariableType==="stopwatch"?Et.clamp(S,v,y):Et.clamp(S,y,v),S===v&&this.shared.setDynamicVariableToggleIsForward(h,void 0),p.repeat?Math.abs(S-y)<(p.format==="number3decimal"?1e-4:.1)&&(S=v):(Math.abs(S-v)<(p.format==="number3decimal"?1e-4:.1)||Math.abs(S-y)<(p.format==="number3decimal"?1e-4:.1))&&this.shared.setDynamicVariablePlayState(h,"Paused")),S!==g&&(s.push(h),this.dynamicVars[c].timerSeconds=S,this.shared.updateVariable(h,vu.getFormattedTimerTime(S,p)),this.eventManager.requestRender())}}}this.needsMouse&&this.shared.mouseProperty!==this.prevMouseProperty&&(this.prevMouseProperty=this.shared.mouseProperty,this.events.forEach(c=>{c.data.variableId==="mouseProperty"&&(c.dispatch(),this.eventManager.requestRender())}));let u=!1;this.shared.mouseProperty!==this.prevMouseProperty&&(this.prevMouseProperty=this.shared.mouseProperty,u=!0);let d=!1;this.shared.raycastProperty!==this.prevRaycastProperty&&(this.prevRaycastProperty=this.shared.raycastProperty,d=!0),this.events.forEach(c=>{(s.includes(c.data.variableId)||l.find(h=>h.objId===c.data.objectId&&h.property===c.data.property)||c.data.variableId==="mouseProperty"&&u||c.data.variableId==="raycastProperty"&&d)&&(c.dispatch(),this.eventManager.requestRender())})},this.onBlur=()=>{this.pause()},this.onFocus=()=>{this.resume()},e.page.traverseEntity(o=>{var a;(a=o.data)==null||a.events.filter(s=>s.data.type==="VariableChange"&&!s.data.disabled).forEach(s=>{this.events.push(new KAt(o.uuid,s.data,o,e.page,e.sharedAssets,r))})}),this.propertiesToWatch=this.events.filter(o=>o.data.variableId==="objectProperty"&&o.data.objectId!==null).map(o=>({objectId:o.data.objectId,property:o.data.property,prevValue:null})),this.shared=e.sharedAssets,this.sharedVariables.forEach(({id:o,data:a})=>{if(!("dynamicVariableType"in a)){this.events.find(l=>l.data.variableId===o)&&this.variablesToWatch.push({id:o,prevValue:this.shared.getVariable(o)});return}let s;if(a.dynamicVariableType==="timer"||a.dynamicVariableType==="stopwatch"){let l;if(Ys.isTextValue(a.value)&&Array.isArray(a.value.textValue)){let u=a.value.textValue;u.length===3?l=u[2]+u[1]*60+u[0]*3600:l=u[1]+u[0]*60}else l=a.value;s=l,this.dynamicVars.push({id:o,last:-1,expectedTime:-1,data:a,timerSeconds:l,startValue:s})}else a.dynamicVariableType==="time"&&this.shared.updateVariable(o,bX(new Date,a)),a.dynamicVariableType==="counter"&&(s=Ys.isTextValue(a.value)?GY(a.value.textValue):a.value),this.dynamicVars.push({id:o,last:-1,expectedTime:-1,data:a,startValue:s})})}pause(){this.pauseTime=Date.now()}resume(){let e=Date.now()-this.pauseTime;for(let t=0;t<this.dynamicVars.length;t++)this.dynamicVars[t].last+=e,this.dynamicVars[t].expectedTime+=e}connect(){this.rafId=window.requestAnimationFrame(this.onFrame),window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus)}disconnect(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),this.rafId&&(window.cancelAnimationFrame(this.rafId),this.rafId=void 0),this.events.forEach(e=>e.dispose())}},KAt=class{constructor(e,t,r,n,i,o){this.id=e,this.data=t,this.object=r,this.actions=Ka(t,t.actions,n,i,o,r)}dispatch(){let e=this.actions;e.Audio.forEach(t=>t.dispatchConditional()),e.Video.forEach(t=>t.dispatchConditional()),e.Create.forEach(t=>t.dispatch()),e.Destroy.forEach(t=>t.dispatch()),e.Reset.forEach(t=>t.dispatch()),e.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this),t.init()}),e.Transition.forEach(t=>t.play()),e.Animation.forEach(t=>t.play()),e.SwitchCamera.forEach(t=>t.play()),e.SceneTransition.forEach(t=>t.dispatch()),e.SetVariable.forEach(t=>t.checkConditions()),e.SetVariable.forEach(t=>t.dispatch()),e.DynamicVariablePlay.forEach(t=>t.dispatch())}dispose(){To(this.actions)}};function GY(e){return e.length===3?e[2]+e[1]*60+e[0]*3600:e[1]+e[0]*60}var XAt="https://unpkg.com/@splinetool/runtime@0.9.504/build/",YAt="https://unpkg.com/@splinetool/navmesh-wasm@0.9.504/build/",QAt=`
(async function() {
	const [wasmImport, wasmBinary] = await Promise.all([
		import('${XAt}' + 'navmesh.js'),
		fetch('${YAt}' + 'navmesh.wasm').then((res) => res.arrayBuffer()),
	]);
	const wasmModule = wasmImport.default;
	self.module = await wasmModule({ wasmBinary });
	postMessage('ready');
})();
`,ZAt=`
(async function() {
	const [wasmImport, wasmBinary] = await Promise.all([
		import(self.location.origin + '/_libraries/navmesh.js'),
		fetch(self.location.origin + '/_libraries/navmesh.wasm').then((res) => res.arrayBuffer()),
	]);
	const wasmModule = wasmImport.default;
	self.module = await wasmModule({ wasmBinary });
	postMessage('ready');
})();
`,JAt=`

onmessage = function(messageEvent) {
	const meshData = messageEvent.data;
	const positions = meshData[0];
	const offset = meshData[1];
	const indices = meshData[2];
	const indicesLength = meshData[3];
	const parameters = meshData[4];

	const module = self.module;
	const rc = new module.rcConfig();
	rc.cs = parameters.cs;
	rc.ch = parameters.ch;
	rc.borderSize = parameters.borderSize ? parameters.borderSize : 0;
	rc.tileSize = parameters.tileSize ? parameters.tileSize : 0;
	rc.walkableSlopeAngle = parameters.walkableSlopeAngle;
	rc.walkableHeight = parameters.walkableHeight;
	rc.walkableClimb = parameters.walkableClimb;
	rc.walkableRadius = parameters.walkableRadius;
	rc.maxEdgeLen = parameters.maxEdgeLen;
	rc.maxSimplificationError = parameters.maxSimplificationError;
	rc.minRegionArea = parameters.minRegionArea;
	rc.mergeRegionArea = parameters.mergeRegionArea;
	rc.maxVertsPerPoly = parameters.maxVertsPerPoly;
	rc.detailSampleDist = parameters.detailSampleDist;
	rc.detailSampleMaxError = parameters.detailSampleMaxError;

	if (!self.navMesh) {
		self.navMesh = new module.NavMesh();
	}
	self.navMesh.build(positions, offset, indices, indicesLength, rc);

	const navmeshData = navMesh.getNavmeshData();
	const arrView = new Uint8Array(module.HEAPU8.buffer, navmeshData.dataPointer, navmeshData.size);
	const ret = new Uint8Array(navmeshData.size);
	ret.set(arrView);
	navMesh.freeNavmeshData(navmeshData);

	postMessage(ret);
}
`,eEt=.001,tEt={cs:6,ch:2,walkableSlopeAngle:90,walkableHeight:20,walkableClimb:5,walkableRadius:0,maxEdgeLen:12,maxSimplificationError:1.3,minRegionArea:8,mergeRegionArea:20,maxVertsPerPoly:6,detailSampleDist:6,detailSampleMaxError:1},Uce,Ar,Fo;rvt.then(e=>{Uce=e,Ar=new e.Vec3,Fo=new e.Vec3});var rEt=new F,nEt=class{constructor(e=!1,t=!1){this.usePhysics=e,this.isExport=t,this.onPointerDown=r=>{if(Gt.length!==1)return;let{raycaster:n,page:i}=this.eventContext;this.eventContext.updateRaycaster(r);let o=i.raycastWithClones(n);if(o.length!==0){if(this.gameControl){let a=rEt.copy(this.gameControl.colliderWorldPosition);a.y-=this.gameControl.colliderHeight/2,this.gameControl.path=this.computePath(a,o[0].point)}this.eventContext.requestRender()}},this.traverseWithPhysics=(r,n)=>i=>{var h,f,m,p,g,v,b;let o;if(i instanceof Eu)if(i.objectForSample){if(i.objectForSample.dataPatched.physics.fusedBody)return;o=i.object}else return i.object.dataPatched.physics.fusedBody===!0&&i.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(i instanceof ua)o=i.object;else if(o=i,((h=o.dataPatched.cloner)==null?void 0:h.disabled)===!1&&((f=o.dataPatched.cloner)==null?void 0:f.hideBase)&&((m=o.dataPatched.physics)==null?void 0:m.fusedBody)!==!0)return!0;if(n&&!o.userData.navmesh)return;let a=o.dataPatched;if(!a.visible&&((p=a.physics)==null?void 0:p.enabled)!==!0)return!0;i.updateMatrixWorldSVD();let s=KP(a),l=o.userData.hasDestroy,u=o.userData.hasDrag,d=!1,c=!1;for(let y of a.events)y.data.disabled!==!0&&(y.data.type==="GameControl"?d=!0:y.data.type==="Follow"&&(c=!0));if(d||s||c||l||u)return!0;if(this.usePhysics&&((g=a.physics)==null?void 0:g.rigidBody)==="dynamic"){if(this.usePhysics&&((v=a.physics)!=null&&v.fusedBody))return!0}else if("geometry"in i&&i.geometry&&r.push(zd(i.geometry,i.matrixWorld)),this.usePhysics&&((b=a.physics)==null?void 0:b.fusedBody))return i.traverseObject((y,x)=>{var _,C;if(x===0)return;let S;if(y instanceof Eu)if(y.objectForSample){if(y.objectForSample.dataPatched.physics.fusedBody)return;S=y.object}else return y.object.dataPatched.physics.fusedBody===!0&&y.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(y instanceof ua)S=y.object;else if(S=y,(_=y.dataPatched.cloner)==null?void 0:_.hideBase)return!0;let w=S.dataPatched;if(!w.visible&&((C=w.physics)==null?void 0:C.enabled)!==!0)return!0;"geometry"in y&&y.geometry&&r.push(zd(y.geometry,y.matrixWorld))}),!0},this.traverseNoPhysics=(r,n)=>i=>{let o;if(i instanceof Eu)return;i instanceof ua?o=i.object:o=i;let a=o.dataPatched;if(a.physics.enabled==="visibility"?!a.visible:!a.physics.enabled)return!0;if(n&&!o.userData.navmesh)return;let s=i.geometry,l=o.userData.hasDestroy===!0,u=o.userData.hasDrag===!0;if(KP(a)||l||u||o.dataPatched.events.some(d=>d.data.disabled!==!0&&d.data.type==="GameControl"))return!0;s&&r.push(zd(s,i.matrixWorld))},this.navmeshWasm=Uce,this.navMesh=new this.navmeshWasm.NavMesh,this._workerURL=URL.createObjectURL(new Blob([(t?QAt:ZAt)+JAt])),this._worker=new Worker(this._workerURL)}init(e,t,r){this.gameControl=t,this.eventContext=r,this.resolution=e.ch,this.setDefaultQueryExtent(new F().setScalar(e.ch*e.walkableRadius*1.2)),this._worker.onmessage=()=>{this.createNavMesh(r.page,e,n=>{this.buildFromNavmeshData(n.data)})},this.eventContext.renderer.domElement.addEventListener("pointerdown",this.onPointerDown)}createNavMesh(e,t,r){t.objects.forEach(l=>{var d;let u=e.scene.find(l);u.traverseEntity(c=>{c.userData.navmesh=!0}),(d=u.cloner)==null||d.traverseObject(c=>{c.userData.navmesh=!0})});let n=[],i=(this.usePhysics?this.traverseWithPhysics:this.traverseNoPhysics)(n,t.zones==="custom");if(e.traverseChildren(i),t.objects.forEach(l=>{var d;let u=e.scene.find(l);u.traverseEntity(c=>{c.userData.navmesh=void 0}),(d=u.cloner)==null||d.traverseObject(c=>{c.userData.navmesh=void 0})}),n.length===0)return!1;let o=hm(n),{positions:a,triIndices:s}=AO(o.getAttribute("position"),o.getIndex());return this._worker.postMessage([a,a.length/3,s,s.length,{...tEt,...t}]),this._worker.onmessage=r,!0}createDebugNavGeometry(){let e,t,r=this.navMesh.getDebugNavMesh(),n=r.getTriangleCount(),i=new Uint32Array(n*3),o=new Float32Array(n*3*3);for(e=0;e<n*3;e++)i[e]=e;for(e=0;e<n;e++)for(t=0;t<3;t++){let s=r.getTriangle(e).getPoint(t);o[e*9+t*3+0]=s.x,o[e*9+t*3+1]=s.y,o[e*9+t*3+2]=s.z}let a=new Nt;return a.setIndex(new Kt(i,1)),a.setAttribute("position",new Kt(o,3)),a}getClosestPoint(e){return Ar.x=e.x,Ar.y=e.y,Ar.z=e.z,this.navMesh.getClosestPoint(Ar)}getClosestPointToRef(e,t){Ar.x=e.x,Ar.y=e.y,Ar.z=e.z;let r=this.navMesh.getClosestPoint(Ar);t.set(r.x,r.y,r.z)}getRandomPointAround(e,t){return Ar.x=e.x,Ar.y=e.y,Ar.z=e.z,this.navMesh.getRandomPointAround(Ar,t)}getRandomPointAroundToRef(e,t,r){Ar.x=e.x,Ar.y=e.y,Ar.z=e.z;let n=this.navMesh.getRandomPointAround(Ar,t);r.set(n.x,n.y,n.z)}moveAlong(e,t){return Ar.x=e.x,Ar.y=e.y,Ar.z=e.z,Fo.x=t.x,Fo.y=t.y,Fo.z=t.z,this.navMesh.moveAlong(Ar,Fo)}moveAlongToRef(e,t,r){return Ar.x=e.x,Ar.y=e.y,Ar.z=e.z,Fo.x=t.x,Fo.y=t.y,Fo.z=t.z,this.navMesh.moveAlong(Ar,Fo)}computePath(e,t){let r=this.getClosestPoint(t);Fo.x=r.x,Fo.y=r.y,Fo.z=r.z,this.getClosestPoint(e);let n=this.navMesh.computePath(Ar,Fo),i=n.getPointCount(),o=[];for(let a=0;a<i;a++){let s=n.getPoint(a);o.push(new F(s.x,s.y,s.z))}return o}createCrowd(e,t){return new iEt(this,e,t)}setDefaultQueryExtent(e){Ar.x=e.x,Ar.y=e.y,Ar.z=e.z,this.navMesh.setDefaultQueryExtent(Ar)}getDefaultQueryExtent(){return this.navMesh.getDefaultQueryExtent()}buildFromNavmeshData(e){let t=e.length*e.BYTES_PER_ELEMENT,r=this.navmeshWasm._malloc(t),n=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,r,t);n.set(e);let i=new this.navmeshWasm.NavmeshData;i.dataPointer=n.byteOffset,i.size=e.length,this.navMesh.buildFromNavmeshData(i),this.navmeshWasm._free(n.byteOffset)}getNavmeshData(){let e=this.navMesh.getNavmeshData(),t=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,e.dataPointer,e.size),r=new Uint8Array(e.size);return r.set(t),this.navMesh.freeNavmeshData(e),r}getDefaultQueryExtentToRef(e){let t=this.navMesh.getDefaultQueryExtent();e.set(t.x,t.y,t.z)}dispose(){var e;this.navMesh.destroy(),this._worker.terminate(),URL.revokeObjectURL(this._workerURL),(e=this.eventContext)==null||e.renderer.domElement.removeEventListener("pointerdown",this.onPointerDown)}addCylinderObstacle(e,t,r){return Ar.x=e.x,Ar.y=e.y,Ar.z=e.z,this.navMesh.addCylinderObstacle(Ar,t,r)}addBoxObstacle(e,t,r){return Ar.x=e.x,Ar.y=e.y,Ar.z=e.z,Fo.x=t.x,Fo.y=t.y,Fo.z=t.z,this.navMesh.addBoxObstacle(Ar,Fo,r)}removeObstacle(e){this.navMesh.removeObstacle(e)}isSupported(){return this.navmeshWasm!==void 0}},iEt=class{constructor(e,t,r){this.navmeshWasmWrapper=e,this.transforms=[],this.agents=new Array,this.reachRadii=new Array,this._agentDestinationArmed=new Array,this._agentDestination=new Array,this.crowd=new this.navmeshWasmWrapper.navmeshWasm.Crowd(t,r,this.navmeshWasmWrapper.navMesh.getNavMesh())}onReachTarget(e,t){}addAgent(e,t,r){let n=new this.navmeshWasmWrapper.navmeshWasm.dtCrowdAgentParams;n.radius=t.radius,n.height=t.height,n.maxAcceleration=t.maxAcceleration,n.maxSpeed=t.maxSpeed,n.collisionQueryRange=t.collisionQueryRange,n.pathOptimizationRange=t.pathOptimizationRange,n.separationWeight=t.separationWeight,n.updateFlags=7,n.obstacleAvoidanceType=0,n.queryFilterType=0,n.userData=0;let i=this.crowd.addAgent(new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z),n);return this.transforms.push(r),this.agents.push(i),this.reachRadii.push(t.reachRadius?t.reachRadius:t.radius),this._agentDestinationArmed.push(!1),this._agentDestination.push(new F(0,0,0)),i}getAgentPosition(e){return this.crowd.getAgentPosition(e)}getAgentPositionToRef(e,t){let r=this.crowd.getAgentPosition(e);t.set(r.x,r.y,r.z)}getAgentVelocity(e){return this.crowd.getAgentVelocity(e)}getAgentVelocityToRef(e,t){let r=this.crowd.getAgentVelocity(e);t.set(r.x,r.y,r.z)}getAgentNextTargetPath(e){return this.crowd.getAgentNextTargetPath(e)}getAgentNextTargetPathToRef(e,t){let r=this.crowd.getAgentNextTargetPath(e);t.set(r.x,r.y,r.z)}getAgentState(e){return this.crowd.getAgentState(e)}overOffmeshConnection(e){return this.crowd.overOffmeshConnection(e)}agentGoto(e,t){this.crowd.agentGoto(e,new this.navmeshWasmWrapper.navmeshWasm.Vec3(t.x,t.y,t.z));let r=this.agents.indexOf(e);r>-1&&(this._agentDestinationArmed[r]=!0,this._agentDestination[r].set(t.x,t.y,t.z))}agentTeleport(e,t){this.crowd.agentTeleport(e,new this.navmeshWasmWrapper.navmeshWasm.Vec3(t.x,t.y,t.z))}updateAgentParameters(e,t){let r=this.crowd.getAgentParameters(e);t.radius!==void 0&&(r.radius=t.radius),t.height!==void 0&&(r.height=t.height),t.maxAcceleration!==void 0&&(r.maxAcceleration=t.maxAcceleration),t.maxSpeed!==void 0&&(r.maxSpeed=t.maxSpeed),t.collisionQueryRange!==void 0&&(r.collisionQueryRange=t.collisionQueryRange),t.pathOptimizationRange!==void 0&&(r.pathOptimizationRange=t.pathOptimizationRange),t.separationWeight!==void 0&&(r.separationWeight=t.separationWeight),this.crowd.setAgentParameters(e,r)}removeAgent(e){this.crowd.removeAgent(e);let t=this.agents.indexOf(e);t>-1&&(this.agents.splice(t,1),this.transforms.splice(t,1),this.reachRadii.splice(t,1),this._agentDestinationArmed.splice(t,1),this._agentDestination.splice(t,1))}getAgents(){return this.agents}update(e){if(this.navmeshWasmWrapper.navMesh.update(),e<=eEt)return;let t=1/60,r=10;{let n=Math.floor(e/t);n>r&&(n=r),n<1&&(n=1);let i=e/n;for(let o=0;o<n;o++)this.crowd.update(i)}for(let n=0;n<this.agents.length;n++){let i=this.agents[n],o=this.getAgentPosition(i);if(this.transforms[n].copy(o),this._agentDestinationArmed[n]){let a=o.x-this._agentDestination[n].x,s=o.z-this._agentDestination[n].z,l=this.reachRadii[n],u=this._agentDestination[n].y-this.reachRadii[n],d=this._agentDestination[n].y+this.reachRadii[n],c=a*a+s*s;o.y>u&&o.y<d&&c<l*l&&(this.onReachTarget(i,this._agentDestination[n]),this._agentDestinationArmed[n]=!1)}}}setDefaultQueryExtent(e){let t=new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z);this.crowd.setDefaultQueryExtent(t)}getDefaultQueryExtent(){return this.crowd.getDefaultQueryExtent()}getDefaultQueryExtentToRef(e){let t=this.crowd.getDefaultQueryExtent();e.set(t.x,t.y,t.z)}getCorners(e){let t,r=this.crowd.getCorners(e),n=r.getPointCount(),i=[];for(t=0;t<n;t++){let o=r.getPoint(t);i.push(new F(o.x,o.y,o.z))}return i}dispose(){this.crowd.destroy()}};function oEt(e){let t=!1;return e.scene.objects.forEach(r=>{r.data.type==="Page"&&!t&&r.data.publish.gameControlObject&&aS.traverseModuleInstances(e,r.id,(n,i,o)=>{for(let a of o)a.data.type==="GameControl"&&a.data.navmesh.enabled&&(t=!0)})}),t}var aEt={type:"change"},WY={type:"changeZoom"},sEt={type:"changePan"},cv={type:"start"},dv={type:"end",changed:!0},lEt={type:"end",changed:!1},dk=new Jt,qY=new ue,uEt=2*Math.PI,cEt=1e-8,dEt=.01,hk=new F,bA=new ue,fk=new F,xA=new Jt,KY=new qe,hEt={type:"requestRender"},$ce=class extends qo{constructor(e,t,r={isPlayMode:!1,isExport:!1}){super(),this.object=e,this.domElement=t,this.options=r,this.enabled=!0,this.useKeyEvents=!0,this.enableDamping=!1,this.enableZoom=!0,this.enableRotate=!0,this.enablePan=!0,this.autoRotate=!1,this.rotationLimitsMode=0,this.panLimitsMode=0,this.rotationSoftLimit=2,this.panSoftLimit=2,this.hoverRotatePanMode=0,this.zoomLimitsEnabled=!1,this.mouseButtons=[0,5],this.mouseButtonsPlay=[3,4,5],this.touches=[null,pl.DOLLY_ROTATE,pl.PAN],this.offset=new F,this.eye=new F,this.lastPosition=new F,this.lastQuaternion=new Jt,this.current=new ue,this.overShoot=new ue,this.overRatio=new ue,this.spherical=new Kq,this.sphericalDelta=new Kq,this.panOffset=new F,this.panLeftV=new F,this.panUpV=new F,this.panV=new F,this.rotateStart=new ue,this.rotateEnd=new ue,this.rotateDelta=new ue,this.panStart=new ue,this.panEnd=new ue,this.panDelta=new ue,this.dollyStart=new ue,this.dollyEnd=new ue,this.dollyDelta=new ue,this.rotationRangeFactor=new ue,this.panRangeFactor=new ue,this.state=-1,this.zoomChanged=!1,this.isPointerDown=!1,this.isThetaFlipped=!1,this.prevScale=0,this.scale=1,this.gesture=!1,this.timer=-1,this.timerHover=-1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPhi=0,this.maxPhi=Math.PI,this.minTheta=-1/0,this.maxTheta=1/0,this.minH=0,this.maxH=Math.PI,this.minV=-1/0,this.maxV=1/0,this.autoRotateClockwise=!0,this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.resetHoverEffectOnPointerLeave=!1,this.hasChange=!1,this.useWindowEvents=!1,this.isTouchZoom=!0,this.autoRotateSpeed=2,this.dampingFactor=.125,this.zoomSpeed=2,this.rotateSpeed=1,this.panSpeed=1,this.hoverRotatePanStrength=.1,this.hoverRotateDamping=this.dampingFactor,this.thetaIsFree=!1,this.phiIsFree=!1,this.needsUpdate=!0,this.onCameraChange=n=>{this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange),this.object=n.camera,this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)},this.update=()=>{this.object.updateWorldMatrix(!0,!1),this.object.matrixWorld.decompose(fk,xA,hk),this.offset.copy(fk).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.autoRotate&&this.state===-1&&this.rotateLeft((this.autoRotateClockwise===!0?1:-1)*this.getAutoRotationAngle()),this.rotationLimitsMode!==0&&this.applyLimits(this.sphericalDelta,this.rotationLimitsMode,this.rotationSoftLimit,this.maxTheta,this.minTheta,this.maxPhi,this.minPhi,this.rotationRangeFactor),this.rotationLimitsMode!==2&&(this.spherical.phi+=this.sphericalDelta.phi),(this.rotationLimitsMode!==1||this.autoRotate===!0)&&(this.spherical.theta+=this.sphericalDelta.theta),this.spherical.radius*=this.scale,this.zoomLimitsEnabled&&(this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius))),this.panLimitsMode!==0&&(this.target.applyQuaternion(dk.copy(xA).invert()),this.panOffset.applyQuaternion(dk),this.applyLimits(this.panOffset,this.panLimitsMode,this.panSoftLimit,this.maxH,this.minH,this.maxV,this.minV,this.panRangeFactor),this.target.applyQuaternion(xA),this.panOffset.applyQuaternion(xA)),this.panLimitsMode===2&&(this.panOffset.y=0),this.panLimitsMode===1&&(this.panOffset.x=0),this.state===-1&&!this.gesture?(this.panOffset.multiplyScalar(1-this.dampingFactor),this.target.add(this.panOffset)):(this.target.add(this.panOffset),this.panOffset.set(0,0,0)),this.offset.setFromSpherical(this.spherical),fk.copy(this.target).add(this.offset),this.object.position.copy(this.target).add(this.offset),this.object.parent&&(KY.copy(this.object.parent.matrixWorld).invert(),this.object.position.applyMatrix4(KY));let n=this.spherical.phi%uEt;if(this.eye.copy(this.offset).normalize(),this.object.up.copy(hn.DEFAULT_UP).applyAxisAngle(this.eye,this.object.angleOffsetFromUp),n>0&&n>Math.PI||n<0&&n>-Math.PI?(this.object.up.negate(),this.object.lookAt(this.target),this.object.isUpVectorFlipped=!0):(this.object.lookAt(this.target),this.object.isUpVectorFlipped=!1),this.state===-1||this.enableDamping===!0){let i=this.hoverRotatePanMode===1?this.hoverRotateDamping:this.dampingFactor;this.sphericalDelta.theta*=1-i,this.sphericalDelta.phi*=1-i}else this.sphericalDelta.set(0,0,0);return this.scale=1,this.zoomChanged||this.lastPosition.distanceToSquared(this.object.position)>dEt||8*(1-this.lastQuaternion.dot(this.object.quaternion))>cEt?(this.dispatchEvent(aEt),this.object.dispatchEvent(hEt),this.lastPosition.copy(this.object.position),this.lastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0):(this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.object.wasMovedBySwitchCameraAction=!1,this.sphericalDelta.set(0,0,0),this.panOffset.set(0,0,0),!1)},this.onPointerDown=n=>{this.enabled!==!1&&(n.pointerType==="touch"||n.pointerType==="pen"&&Xs?this.onPointerDownTouch(n):this.onPointerDownMouse(n),this.state!==-1&&(this.isPointerDown=!0,this.dispatchEvent(cv),this.domElement.addEventListener("pointermove",this.onPointerMove),this.domElement.addEventListener("pointerup",this.onPointerUp),n.stopPropagation(),n.pointerType==="touch"||n.pointerType==="pen"&&Xs||this.domElement.setPointerCapture(n.pointerId)))},this.onPointerLeave=n=>{this.resetHoverEffectOnPointerLeave&&!this.useWindowEvents?(this.hoverRotatePanMode===1?(this.sphericalDelta.theta=-this.spherical.theta,this.sphericalDelta.phi=-this.spherical.phi,hk.subVectors(this.position0,this.target0),this.spherical.setFromVector3(hk),this.sphericalDelta.theta+=this.spherical.theta,this.sphericalDelta.phi+=this.spherical.phi,this.sphericalDelta.theta/=8,this.sphericalDelta.phi/=8):this.hoverRotatePanMode===2&&this.panOffset.subVectors(this.target0,this.target).divideScalar(8),this.update()):this.pointerLeaveEvent=n},this.onPointerEnter=n=>{this.resetHoverEffectOnPointerLeave||this.pointerLeaveEvent===void 0?bA.set(n.clientX-this.domElement.clientWidth/2,n.clientY-this.domElement.clientHeight/2):bA.set(n.clientX-this.pointerLeaveEvent.clientX,n.clientY-this.pointerLeaveEvent.clientY),this.hoverRotatePanMode===1?(this.rotateDelta.copy(bA).multiplyScalar(this.rotateSpeed*this.hoverRotatePanStrength).rotateAround(qY,-this.object.angleOffsetFromUp),this.rotateLeft(2*Math.PI*this.rotateDelta.x/this.domElement.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/this.domElement.clientHeight),this.rotateStart.set(n.clientX,n.clientY)):this.hoverRotatePanMode===2&&(this.panDelta.copy(bA).multiplyScalar(this.panSpeed*this.hoverRotatePanStrength),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.set(n.clientX,n.clientY)),this.update()},this.onPointerMove=n=>{this.enabled!==!1&&(this.checkRaycastLock()||(n.pointerType==="touch"||n.pointerType==="pen"&&Xs?this.onPointerMoveTouch(n):this.onPointerMoveMouse(n),n.stopPropagation()))},this.onPointerUp=n=>{this.isPointerDown=!1,Gt.length===0&&(this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)),Gt.length>1&&n.preventDefault(),this.hasChange?this.dispatchEvent(dv):this.dispatchEvent(lEt),this.state=-1,n&&(n.stopPropagation(),n.pointerType==="touch"||n.pointerType==="pen"&&Xs||this.domElement.releasePointerCapture(n.pointerId))},this.onPointerDownMouse=n=>{let i;switch(this.useKeyEvents?i=this.mouseButtons[n.button]:i=this.mouseButtonsPlay[n.button],i){case 0:if(n.altKey===!0&&!n.shiftKey&&!NC(n)){if(this.enableRotate===!1)return;this.handleMouseDownRotate(n),this.state=0}else if(this.key===" "){if(this.enablePan===!1)return;this.handleMouseDownPan(n),this.state=2}break;case 4:if(this.enablePan===!1)return;this.handleMouseDownPan(n),this.state=2;break;case 3:if(NC(n)||n.shiftKey){if(this.enablePan===!1)return;this.handleMouseDownPan(n),this.state=2}else{if(this.enableRotate===!1)return;this.handleMouseDownRotate(n),this.state=0}break;case 5:if(NC(n)||n.shiftKey){if(this.enableRotate===!1)return;this.handleMouseDownRotate(n),this.state=0}else{if(this.enablePan===!1)return;this.handleMouseDownPan(n),this.state=2}break;default:this.state=-1}},this.onPointerMoveMouse=n=>{switch(this.state){case 0:if(this.enableRotate===!1)return;this.handleMouseMoveRotate(n);break;case 1:if(this.enableZoom===!1)return;this.handleMouseMoveDolly(n);break;case 2:if(this.enablePan===!1)return;this.handleMouseMovePan(n);break}this.object.wasMovedByUser=!0},this.onPointerDownTouch=n=>{switch(Gt.length>1&&n.preventDefault(),this.touches[Gt.length-1]){case pl.ROTATE:if(this.enableRotate===!1){this.state=-1;return}this.handleTouchStartRotate(),this.state=3;break;case pl.PAN:if(this.enablePan===!1){this.state=-1;return}this.handleTouchStartPan(),this.state=4;break;case pl.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchStartDollyPan(),this.state=5;break;case pl.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchStartDollyRotate(),this.state=6;break;default:this.state=-1}},this.onPointerMoveTouch=n=>{switch(Gt.length>1&&n.preventDefault(),this.state){case 3:if(this.enableRotate===!1)return;this.handleTouchMoveRotate(n),this.update();break;case 4:if(this.enablePan===!1)return;this.handleTouchMovePan(n),this.update();break;case 5:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchMoveDollyPan(n),this.update();break;case 6:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchMoveDollyRotate(n),this.update();break;default:this.state=-1}this.object.wasMovedByUser=!0},this.dispatchEndDebounced=fU(()=>this.dispatchEvent(dv),33),this.onMouseWheel=n=>{this.enabled===!1||this.enableZoom===!1&&this.enablePan===!1||this.checkRaycastLock()||(!this.options.isExport&&this.domElement.clientHeight===document.body.clientHeight&&this.domElement.clientWidth===document.body.clientWidth&&n.preventDefault(),this.dispatchEvent(cv),this.handleMouseWheel(n),this.dispatchEndDebounced(),this.object.wasMovedByUser=!0)},this.onGesture=n=>{if(n.preventDefault(),this.enabled!==!1&&!this.checkRaycastLock()&&!kse)if(n.type==="gesturechange"){if(this.enableZoom===!1||this.isTouchZoom===!1)return;this.dispatchEvent(cv),n.scale>this.prevScale?this.dollyIn(this.getZoomScale()):n.scale<this.prevScale&&this.dollyOut(this.getZoomScale()),this.prevScale=n.scale,this.update(),this.object.wasMovedByUser=!0}else this.dispatchEvent(dv)},this.onContextMenu=n=>{n.preventDefault()},this.onTouchEnd=n=>{n.preventDefault()},this.onKeyDown=n=>{this.enabled!==!1&&(this.key=n.key,n.key===" "&&this.dispatchEvent(cv))},this.onKeyUp=n=>{this.enabled!==!1&&(this.key=void 0,this.state!==-1&&n.key==="Alt"&&this.onPointerUp(Gt[0]),n.key===" "&&this.dispatchEvent(dv))},this.onPointerHover=n=>{n.pointerType!=="mouse"||this.enabled===!1||this.state!==-1||this.hoverRotatePanMode===2&&this.isPanOverShoot||this.hoverRotatePanMode===1&&this.isRotateOverShoot||(this.isPointerDown=!0,this.hoverRotatePanMode===2?this.handleMouseMovePan(n,this.hoverRotatePanStrength):this.hoverRotatePanMode===1&&this.handleMouseMoveRotate(n,this.hoverRotatePanStrength))},this.onBeginState=()=>{this.enabled=!1,this.needsUpdate=!1},this.onCompleteState=n=>{n.isfromEntity&&this.options.isPlayMode||(this.enabled=!0,this.needsUpdate=!0,this.object.updateUp(),this.object.getTarget(this.target))},this.target=this.object.getTarget(),this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.quat0=this.object.quaternion.clone(),this.isUpVectorFlipped0=this.object.isUpVectorFlipped,this.offset.copy(this.object.position).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.addEventListenersToCamera()}dispatchEvent(e){e.type==="start"?this.hasChange=!1:this.hasChange=!0,super.dispatchEvent(e)}addEventListenersToCamera(){this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)}removeEventListenersFromCamera(){this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange)}updateUseWindowEvents(e){if(window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("pointermove",this.onPointerHover),this.useWindowEvents=e,this.hoverRotatePanMode!==0&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover)),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.hoverRotatePanMode!==0&&!this.useWindowEvents){let t=this.useWindowEvents?window:this.domElement;t.addEventListener("pointerleave",this.onPointerLeave),t.addEventListener("pointerenter",this.onPointerEnter)}}fromJSON(e,t){this.setEnableDampingSpeed(e.enableDamping),this.enablePan=e.enablePan,this.enableZoom=e.enableZoom,this.enableRotate=e.enableRotate,this.rotationLimitsMode=e.rotationLimitsMode,this.thetaIsFree=e.rotationHorizontalOffset.min===e.rotationHorizontalOffset.max&&e.rotationHorizontalOffset.min===Math.PI,this.phiIsFree=e.rotationVerticalOffset.min===e.rotationVerticalOffset.max&&e.rotationVerticalOffset.min===Math.PI,this.panLimitsMode=e.panLimitsMode,this.panSoftLimit=e.panSoftLimit,this.rotationSoftLimit=e.rotationSoftLimit,this.hoverRotatePanMode=e.hoverRotatePanMode,this.hoverRotateDamping=e.hoverRotateDamping??this.dampingFactor,this.useWindowEvents=t==="window",this.hoverRotatePanMode!==0&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover));let r=e.hoverRotatePanStrength/100;this.hoverRotatePanStrength=r**2,this.zoomLimitsEnabled=e.zoomLimitsEnabled,this.minZoom=e.zoomLimits.min,this.maxZoom=Math.max(e.zoomLimits.min,e.zoomLimits.max),this.minDistance=1e3/e.zoomLimits.max,this.maxDistance=Math.max(this.minDistance,1e3/e.zoomLimits.min),this.autoRotate=e.autoRotate,this.autoRotateSpeed=e.autoRotateSpeed,this.autoRotateClockwise=e.autoRotateClockwise;let n=this.object.getTarget().applyQuaternion(dk.copy(this.object.quaternion).invert());this.minV=-e.panVerticalOffset.min+n.y,this.maxV=e.panVerticalOffset.max+n.y,this.minH=-e.panHorizontalOffset.min+n.x,this.maxH=e.panHorizontalOffset.max+n.x,this.panRangeFactor.set(this.maxH-this.minH,this.maxV-this.minV).divideScalar(2),this.rotationRangeFactor.setScalar(Math.PI).divideScalar(4),this.minPhi=oc(this.spherical.phi-e.rotationVerticalOffset.min),this.maxPhi=oc(this.spherical.phi+e.rotationVerticalOffset.max),this.minTheta=oc(oc(this.spherical.theta)-e.rotationHorizontalOffset.min),this.maxTheta=oc(oc(this.spherical.theta)+e.rotationHorizontalOffset.max),this.isThetaFlipped=this.minTheta>this.maxTheta,e.orbitTouches===1&&(this.touches[0]=pl.ROTATE),e.panTouches===1&&(this.touches[0]=pl.PAN),e.orbitTouches===2&&(this.touches[1]=pl.DOLLY_ROTATE),e.panTouches===2&&(this.touches[1]=pl.DOLLY_PAN),e.orbitTouches===3&&(this.touches[2]=pl.ROTATE),e.panTouches===3&&(this.touches[2]=pl.PAN),this.isTouchZoom=e.isTouchZoom,this.resetHoverEffectOnPointerLeave=e.resetHoverEffectOnPointerLeave??!1}connect(){if(this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.onMouseWheel),window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("keyup",this.onKeyUp,!1),this.domElement.addEventListener("gesturestart",this.onGesture),this.domElement.addEventListener("gesturechange",this.onGesture),this.domElement.addEventListener("gestureend",this.onGesture),this.domElement.addEventListener("touchend",this.onTouchEnd),this.hoverRotatePanMode!==0&&!this.useWindowEvents){let e=this.useWindowEvents?window:this.domElement;e.addEventListener("pointerleave",this.onPointerLeave),e.addEventListener("pointerenter",this.onPointerEnter)}this.pointerLeaveEvent=void 0}dispose(){this.removeEventListenersFromCamera(),this.domElement.removeEventListener("contextmenu",this.onContextMenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.onMouseWheel),window.removeEventListener("keydown",this.onKeyDown,!1),window.removeEventListener("keyup",this.onKeyUp,!1),this.domElement.removeEventListener("pointermove",this.onPointerHover),window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("gesturestart",this.onGesture),this.domElement.removeEventListener("gesturechange",this.onGesture),this.domElement.removeEventListener("gestureend",this.onGesture),this.domElement.removeEventListener("touchend",this.onTouchEnd),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)}applyLimits(e,t,r,n,i,o,a,s){this.overShoot.set(0,0);let l,u,d;e instanceof F?(l=e.x,u=e.y,this.current.set(this.target.x,this.target.y),d=!0):(l=e.theta,u=e.phi,this.current.set(oc(this.spherical.theta),oc(this.spherical.phi)),d=!1),r===0&&(this.current.x+=l,this.current.y+=u),(t===3||t===2)&&(!d&&this.isThetaFlipped?this.current.x>n&&this.current.x<0?this.overShoot.x=n-this.current.x:this.current.x<i&&this.current.x>0&&(this.overShoot.x=i-this.current.x):this.current.x>n?this.overShoot.x=n-this.current.x:this.current.x<i&&(this.overShoot.x=i-this.current.x)),(t===3||t===1)&&(this.current.y>o?this.overShoot.y=o-this.current.y:this.current.y<a&&(this.overShoot.y=a-this.current.y)),d||(this.overShoot.x=oc(this.overShoot.x),this.overShoot.y=oc(this.overShoot.y)),r!==0?(this.overRatio.copy(this.overShoot).divide(s),this.overRatio.x=Math.min(Math.abs(this.overRatio.x),1),this.overRatio.y=Math.min(Math.abs(this.overRatio.y),1),r===1&&(this.overRatio.x=XY(Math.abs(this.overRatio.x)),this.overRatio.y=XY(Math.abs(this.overRatio.y))),this.isPointerDown||r===1?r===2&&(this.overRatio.x>.9&&!this.thetaIsFree||this.overRatio.y>.9&&!this.phiIsFree)?this.isPointerDown=!1:(l*this.overShoot.x<0&&!this.thetaIsFree&&(l*=1-this.overRatio.x),u*this.overShoot.y<0&&!this.phiIsFree&&(u*=1-this.overRatio.y)):r===2&&(!d&&(this.overRatio.x>.002&&!this.thetaIsFree||this.overRatio.y>.002&&!this.phiIsFree)||d&&(Math.abs(this.overShoot.x)>2||Math.abs(this.overShoot.y)>2)?(this.thetaIsFree||(l=this.overShoot.x*.05),this.phiIsFree||(u=this.overShoot.y*.05),d?this.isPanOverShoot=!0:this.isRotateOverShoot=!0):d?this.isPanOverShoot=!1:this.isRotateOverShoot=!1)):(l+=this.overShoot.x,u+=this.overShoot.y),e instanceof F?(e.x=l,e.y=u):(this.thetaIsFree||(e.theta=l),this.phiIsFree||(e.phi=u))}setEnableDampingSpeed(e){this.enableDamping=e,this.rotateSpeed=e===!0?.2:1}stopDamping(){this.sphericalDelta.theta=0,this.sphericalDelta.phi=0}getAutoRotationAngle(){return 2*Math.PI/60/60*this.autoRotateSpeed}getZoomScale(){return Math.pow(.95,this.zoomSpeed)}rotateLeft(e){this.sphericalDelta.theta-=e}rotateUp(e){this.sphericalDelta.phi-=e}panLeft(e,t){this.panLeftV.setFromMatrixColumn(t,0),this.panLeftV.multiplyScalar(-e),this.panOffset.add(this.panLeftV)}panUp(e,t){this.panUpV.setFromMatrixColumn(t,1),this.panUpV.multiplyScalar(e),this.panOffset.add(this.panUpV)}pan(e,t){let r=this.domElement;if(r&&this.object.isPerspectiveCamera){let n=this.object.position;this.panV.copy(n).sub(this.target);let i=this.panV.length();i*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*e*i/r.clientHeight,this.object.matrixWorld),this.panUp(2*t*i/r.clientHeight,this.object.matrixWorld)}else r&&this.object.isOrthographicCamera&&(this.panLeft(e*(this.object.right-this.object.left)/this.object.zoom/r.clientWidth,this.object.matrixWorld),this.panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/r.clientHeight,this.object.matrixWorld));this.dispatchEvent(sEt)}dollyOut(e){this.object.isPerspectiveCamera?this.scale/=e:this.object.isOrthographicCamera&&(this.object.zoom*=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(WY)}dollyIn(e){this.object.isPerspectiveCamera?this.scale*=e:this.object.isOrthographicCamera&&(this.object.zoom/=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(WY)}zoomOut(e=this.getZoomScale()){this.dispatchEvent(cv),this.dollyOut(e),this.dispatchEvent(dv)}zoomIn(e=this.getZoomScale()){this.dispatchEvent(cv),this.dollyIn(e),this.dispatchEvent(dv)}handleMouseDownRotate(e){this.rotateStart.set(e.clientX,e.clientY)}handleMouseDownDolly(e){this.dollyStart.set(e.clientX,e.clientY)}handleMouseDownPan(e){this.panStart.set(e.clientX,e.clientY)}handleMouseMoveRotate(e,t=1){e.movementX!==void 0?this.rotateDelta.set(e.movementX,e.movementY):(this.rotateEnd.set(e.clientX,e.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd)),this.rotateDelta.multiplyScalar(this.rotateSpeed*t).rotateAround(qY,-this.object.angleOffsetFromUp);let r=this.domElement,n=this.useWindowEvents?window.innerHeight:r.clientHeight,i=2*Math.PI*this.rotateDelta.x/n,o=2*Math.PI*this.rotateDelta.y/n;this.rotateLeft(i),this.rotateUp(o),this.update()}handleMouseMoveDolly(e){this.dollyEnd.set(e.clientX,e.clientY),this.dollyDelta.subVectors(this.dollyEnd,this.dollyStart),this.dollyDelta.y>0?this.dollyOut(this.getZoomScale()):this.dollyDelta.y<0&&this.dollyIn(this.getZoomScale()),this.dollyStart.copy(this.dollyEnd),this.update()}handleMouseMovePan(e,t=1){e.movementX!==void 0?this.panDelta.set(e.movementX,e.movementY):(this.panEnd.set(e.clientX,e.clientY),this.panDelta.subVectors(this.panEnd,this.panStart),this.panStart.copy(this.panEnd)),this.panDelta.multiplyScalar(this.panSpeed*t),this.pan(this.panDelta.x,this.panDelta.y),this.update()}handleMouseWheel(e){if(Qgt===!1&&NC(e)===!1&&fEt(e)===!0){if(this.enablePan===!1)return;this.gesture?(this.panDelta.set(-e.deltaX,-e.deltaY).multiplyScalar(this.panSpeed),this.panDelta.x=Math.min(Math.abs(this.panDelta.x),100)*(this.panDelta.x<0?-1:1),this.panDelta.y=Math.min(Math.abs(this.panDelta.y),100)*(this.panDelta.y<0?-1:1),e.altKey?this.pan(0,this.panDelta.y):e.shiftKey?this.pan(this.panDelta.x,0):this.pan(this.panDelta.x,this.panDelta.y),this.update()):(this.gesture=!0,this.isPointerDown=!0),window.clearTimeout(this.timer),this.timer=window.setTimeout(()=>{this.gesture=!1,this.isPointerDown=!1},30)}else{if(this.enableZoom===!1)return;e.deltaY===0?e.deltaX<0?this.dollyIn(this.getZoomScale()):e.deltaX>0&&this.dollyOut(this.getZoomScale()):e.deltaY<0?this.dollyIn(this.getZoomScale()):e.deltaY>0&&this.dollyOut(this.getZoomScale()),this.update(),this.gesture=!1,this.isPointerDown=!1}}handleTouchStartRotate(){if(Gt.length===2){let e=.5*(Gt[0].pageX+Gt[1].pageX),t=.5*(Gt[0].pageY+Gt[1].pageY);this.rotateStart.set(e,t)}else this.rotateStart.set(Gt[0].pageX,Gt[0].pageY)}handleTouchStartPan(){if(Gt.length===2){let e=.5*(Gt[0].pageX+Gt[1].pageX),t=.5*(Gt[0].pageY+Gt[1].pageY);this.panStart.set(e,t)}else this.panStart.set(Gt[0].pageX,Gt[0].pageY)}handleTouchStartDolly(){let e=Gt[0].pageX-Gt[1].pageX,t=Gt[0].pageY-Gt[1].pageY,r=Math.sqrt(e*e+t*t);this.dollyStart.set(0,r)}handleTouchStartDollyPan(){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchStartDolly(),this.enablePan&&this.handleTouchStartPan()}handleTouchStartDollyRotate(){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchStartDolly(),this.enableRotate&&this.handleTouchStartRotate()}handleTouchMoveRotate(e){if(Gt.length===2){let r=aR(e),n=.5*(e.pageX+r.x),i=.5*(e.pageY+r.y);this.rotateEnd.set(n,i)}else{if(e.pointerId!==Gt[0].pointerId)return;this.rotateEnd.set(e.pageX,e.pageY)}this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart).multiplyScalar(this.rotateSpeed);let t=this.domElement;t&&(this.rotateLeft(2*Math.PI*this.rotateDelta.x/t.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/t.clientHeight)),this.rotateStart.copy(this.rotateEnd)}handleTouchMovePan(e){if(Gt.length===2){let t=aR(e),r=.5*(e.pageX+t.x),n=.5*(e.pageY+t.y);this.panEnd.set(r,n)}else{if(e.pointerId!==Gt[0].pointerId)return;this.panEnd.set(e.pageX,e.pageY)}this.panDelta.subVectors(this.panEnd,this.panStart).multiplyScalar(this.panSpeed),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.copy(this.panEnd)}handleTouchMoveDolly(e){let t=aR(e),r=e.pageX-t.x,n=e.pageY-t.y,i=Math.sqrt(r*r+n*n);this.dollyEnd.set(0,i),this.dollyDelta.set(0,Math.pow(this.dollyEnd.y/this.dollyStart.y,this.zoomSpeed)),this.dollyOut(this.dollyDelta.y),this.dollyStart.copy(this.dollyEnd)}handleTouchMoveDollyPan(e){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchMoveDolly(e),this.enablePan&&this.handleTouchMovePan(e)}handleTouchMoveDollyRotate(e){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchMoveDolly(e),this.enableRotate&&this.handleTouchMoveRotate(e)}checkRaycastLock(){var e;if(this.object.data.raycastLock){if(this.options.isPlayMode)return!1;{let t=(e=this.options)==null?void 0:e.showCameraLock;return t&&t(),!0}}else return!1}};function oc(e){let t=Math.PI*2;for(;e<=-Math.PI;)e+=t;for(;e>Math.PI;)e-=t;return e}function XY(e){return 1-Math.pow(1-e,4)}function fEt(e){return e.wheelDeltaY===0||e.deltaY===0?yO&&e.shiftKey&&Math.abs(e.wheelDeltaX)>=120?!1:e.wheelDeltaX?e.wheelDeltaX===-3*e.deltaX||e.wheelDeltaX===-3*window.devicePixelRatio*e.deltaX:e.deltaMode===0:e.wheelDeltaY?e.wheelDeltaY===-3*e.deltaY||e.wheelDeltaY===-3*window.devicePixelRatio*e.deltaY:e.deltaMode===0}var YY=class{constructor(e,t,r,n,i,o){this.id=e,this.data=t,this.object=r,this.page=n,this.currentIntersectedObjects=[],this.disabled=!1,this.alreadyPlayedNonTogglingActions=new Set,this.actions=Ka(t,t.actions,n,i,o,r),this.target=t.target,this.useToggle=t.runMode==="Toggle",this.triggeringObjects=t.triggeringObjects.map(a=>n.scene.find(a))}isValidTriggeringObject(e){return this.target==="all"?!0:this.triggeringObjects.some(t=>t===e||t.isAncestorOf(e.uuid)||e.isAncestorOf(t.uuid))}disconnect(){To(this.actions)}dispatch(){this.disabled||this.object.destroyedInAction||(this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this?(e.object.currentTransitionEvent=this,e.init()):this.data.runMode==="Once"&&this.alreadyPlayedNonTogglingActions.add(e)}),this.object.dispatchEvent({type:"beginEvent",eventName:"Trigger"}),this.useToggle?(this.actions.Transition.forEach(e=>{e.toggle()}),this.actions.SwitchCamera.forEach(e=>{e.toggle()})):(this.actions.Transition.forEach(e=>{this.alreadyPlayedNonTogglingActions.has(e)===!1&&e.play()}),this.actions.SwitchCamera.forEach(e=>{e.play()})),this.actions.Link.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>{e.dispatch()}),this.actions.Create.forEach(e=>{e.dispatch()}),this.actions.Destroy.forEach(e=>{e.dispatch(!1)}),this.actions.Audio.forEach(e=>{e.dispatchBasic()}),this.actions.Video.forEach(e=>{e.dispatchBasic()}),this.actions.SceneTransition.forEach(e=>{e.dispatch()}),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()))}},Lr;ivt.then(e=>Lr=e);var Fi=new F,cu=new Jt,Vh=new F,pk=new Eo(0,0,0,"YXZ"),QY=new Eo(0,0,0,"XYZ"),du=new F,mk=new F,gk=new F(1,1,1),hv=new Jt,wA=new qe,ZY=new qe,pEt={type:"updateMatrix"},JY=new Jt,vk=new Ps,lB={type:"beginEvent",eventName:"Collision"},mEt={type:"beginEvent",eventName:"Trigger"};function gEt(e){if(aS.physicsEnabled(e.scene.objects))return!0;let t=!1;return e.scene.objects.traverse((r,n)=>{if(n.events){if(Array.isArray(n.events)){for(let i of n.events)if(i.data.disabled!==!0&&i.data.type==="GameControl"&&i.data.collisionEnabled){t=!0;break}}else for(let i of Object.values(n.events))if(i.disabled!==!0&&i.type==="GameControl"&&i.collisionEnabled){t=!0;break}}}),t}var KP=e=>e.states.some(t=>t.data.position!==void 0||t.data.rotation!==void 0||t.data.hiddenMatrix!==void 0||t.data.cloner!==void 0||t.data.pathSnapping!==void 0),vEt=class{constructor(e){this.eventContext=e,this.isEnabled=!1,this.gameControl=null,this.joysticks=[],this.joystickToGameControls=[],this.sharedGameControlGlobals={entitiesWithTransformAnim:[],entityToCollisionEvents:{},colliderToEntity:new Map,triggers:[],gamePads:[],createdObjects:[],nCreatedPerAction:{}},this.sensorToTriggerEvent={},this.eventManager=void 0,this.needsCollisionDetection=!1,this.initializationCounter=-1,this.rigidBodyToMesh=new Map,this.nActiveRigidBodies=0,this.collisionEvents=[],this.isExport=!1,this.processRigidBody=t=>{if(t.bodyType()!==Lr.RigidBodyType.Dynamic)return;t.isSleeping()||this.nActiveRigidBodies++;let[r,n,i]=this.rigidBodyToMesh.get(t.handle);if(Fi.copy(t.translation()).multiplyScalar(this.pixelsPerMeter),cu.copy(t.rotation()),r.matrixWorld.compose(Fi,cu,n),r.hasNonUniformScale&&r.matrixWorld.multiply(r.shearScale),r.dispatchEvent(pEt),i){let o=r.cloner;if(o&&o.objectForSample===void 0){o.matrixWorld.copy(r.matrixWorld);for(let a of o.children)a.updateMatrixWorld(!0)}for(let a of r.children)a.updateMatrixWorld(!0)}},this.accumulator=0,this.handleCollisionEvents=(t,r,n)=>{var a,s,l,u;if(n===!1)return;let i,o;if(this.sensorToTriggerEvent[t]?(i=this.sensorToTriggerEvent[t],o=this.sharedGameControlGlobals.colliderToEntity.get(r)):this.sensorToTriggerEvent[r]&&(i=this.sensorToTriggerEvent[r],o=this.sharedGameControlGlobals.colliderToEntity.get(t)),i&&o&&i.isValidTriggeringObject(o)){i.dispatch();return}for(let d=this.sharedGameControlGlobals.createdObjects.length-1;d>=0;d--){let c=this.sharedGameControlGlobals.createdObjects[d];if(c.userData.hasCollisionDestroy&&(((a=c.rigidBody)==null?void 0:a.collider(0).handle)===t||((s=c.rigidBody)==null?void 0:s.collider(0).handle)===r)){this.sharedGameControlGlobals.createdObjects.splice(d,1),c.removeFromParent(),requestAnimationFrame(()=>{var h;return(h=this.sharedGameControlGlobals.rapierWorld)==null?void 0:h.removeRigidBody(c.rigidBody)});break}}if(((l=this.gameControl)==null?void 0:l.object)===this.sharedGameControlGlobals.colliderToEntity.get(t)){let d=this.sharedGameControlGlobals.colliderToEntity.get(r),c=this.sharedGameControlGlobals.entityToCollisionEvents[d.uuid];if(c===void 0)return;for(let h of c)h.data.target==="character"&&this.dispatchCollisionEvent(h,d,r)}else if(((u=this.gameControl)==null?void 0:u.object)===this.sharedGameControlGlobals.colliderToEntity.get(r)){let d=this.sharedGameControlGlobals.colliderToEntity.get(t),c=this.sharedGameControlGlobals.entityToCollisionEvents[d.uuid];if(c===void 0)return;for(let h of c)h.data.target==="character"&&this.dispatchCollisionEvent(h,d,t)}else{let d=this.sharedGameControlGlobals.colliderToEntity.get(t),c=this.sharedGameControlGlobals.entityToCollisionEvents[d.uuid];if(c!==void 0)for(let m of c)m.data.target==="scene"&&this.dispatchCollisionEvent(m,d,t);let h=this.sharedGameControlGlobals.colliderToEntity.get(r),f=this.sharedGameControlGlobals.entityToCollisionEvents[h==null?void 0:h.uuid];if(f!==void 0)for(let m of f)m.data.target==="scene"&&this.dispatchCollisionEvent(m,h,r)}},this.isExport=e.isExport,this.sharedAssets=e.sharedAssets,this.renderer=e.renderer,this.requestRender=e.requestRender,this.domElement=this.renderer.domElement,this.pixelsPerMeter=Dce,this.gravity=this.page.data.globalPhysics.gravity}get page(){return this.eventContext.page}attachVRControllers(e){e.forEach(t=>{t.addEventListener("connected",r=>{"gamepad"in r.data&&"axes"in r.data.gamepad&&this.sharedGameControlGlobals.gamePads.push(r.data.gamepad)})})}markIsDestroyTarget(){this.page.traverseVisibleEntity(e=>{var r,n;let t=e.dataPatched;for(let i of t.events){if(i.data.disabled===!0)continue;let o=(n=(r=i.data.actions)==null?void 0:r.find(a=>a.data.type==="Destroy"))==null?void 0:n.data;if(o)for(let a of o.objects){let s=this.page.scene.find(a);s&&(s.userData.hasDestroy=!0)}}})}markIsDragObject(){this.page.traverseVisibleEntity(e=>{let t=e.dataPatched;for(let r of t.events)if(!(r.data.disabled===!0||r.data.type!=="DragDrop"))for(let n of r.data.objects){let i=this.page.scene.find(n);i&&(i.userData.hasDrag=!0)}})}initBVH(){let e=[];if(this.page.traverseChildren(t=>{var s,l;let r;if(t instanceof Eu)return;t instanceof ua?r=t.object:r=t;let n=r.dataPatched;if(((s=n.physics)==null?void 0:s.enabled)==="visibility"?!n.visible:!((l=n.physics)!=null&&l.enabled))return!0;let i=t.geometry,o=r.userData.hasDestroy===!0,a=r.userData.hasDrag===!0;if(KP(n)||o||a||r.dataPatched.events.some(u=>u.data.disabled!==!0&&u.data.type==="GameControl"))return t.updateMatrixWorldSVD(),this.addBoundsTree(t),!0;i&&e.push(zd(i,t.matrixWorld))}),e.length>0){let t=hm(e,!1);this.sharedGameControlGlobals.staticMeshBVH=new M1(t)}}addRigidBody(e,t,r){let n=[],i="geometry"in e?e.geometry:void 0,o=t.dataPatched;if((i==null?void 0:i.getAttribute("position"))!==void 0&&n.push(zd(i,e.shearScale)),o.physics.fusedBody){let a=this.gatherChildrenGeom(e,n);e.traverseObject(a),e.children.forEach(l=>l.updateMatrixWorld(!0));let s=e.cloner;s&&s.objectForSample===void 0&&o.physics.rigidBody==="dynamic"&&(s.traverseObject(a),s.children.forEach(l=>l.updateMatrixWorld(!0)))}if(n.length>0){let a,s=!r.fromCreate&&o.physics.rigidBody==="dynamic"||r.fromCreate&&r.dynamic;s?(a=Lr.RigidBodyDesc.dynamic(),a.setLinearDamping(o.physics.damping).setAngularDamping(o.physics.damping).setAdditionalMass(1e-9).setGravityScale(o.physics.gravityScale).enabledRotations(...o.physics.enabledRotation).enabledTranslations(...o.physics.enabledTranslation)):(r.hasTransformAnim||r.hasFollow||r.hasDrag)&&!r.fromCreate?(a=Lr.RigidBodyDesc.kinematicPositionBased(),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e)):a=Lr.RigidBodyDesc.fixed();let l=hm(n);(e.hasNonUniformScale?e.matrixWorldRigid:e.matrixWorld).decompose(Fi,cu,Vh),e.position0=Fi.clone().divideScalar(this.pixelsPerMeter),e.rotation0=cu.clone(),Fi.divideScalar(this.pixelsPerMeter),a.setTranslation(Fi.x,Fi.y,Fi.z).setRotation(cu),i?l==null||l.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter):l==null||l.scale(Vh.x/this.pixelsPerMeter,Vh.y/this.pixelsPerMeter,Vh.z/this.pixelsPerMeter);let u=this.sharedGameControlGlobals.rapierWorld.createRigidBody(a);s&&this.rigidBodyToMesh.set(u.handle,[e,Vh.clone(),o.physics.fusedBody]);let d=!(o.geometry===void 0||o.geometry.type==="SubdivGeometry"||o.geometry.type==="NonParametricGeometry"||o.geometry.type==="BooleanGeometry"||o.geometry.type==="VectorGeometry"||o.geometry.type==="StarGeometry"||o.geometry.type==="RectangleGeometry"||o.geometry.type==="EllipseGeometry"||o.geometry.type==="TriangleGeometry"||o.geometry.type==="TorusGeometry"||o.geometry.type==="HelixGeometry");try{this.addCollider(u,o.physics,l,t,d)}catch{try{this.addCollider(u,o.physics,l,t,!1)}catch(c){console.error(c)}}e.rigidBody=u}}addBoundsTree(e){var r,n;let t=[];if(((r=e.geometry)==null?void 0:r.getAttribute("position"))!==void 0&&((n=e.geometry)==null?void 0:n.getAttribute("position").count)>0&&t.push(zd(e.geometry,e.shearScale)),e.traverseObject(this.gatherChildrenGeom(e,t)),e.children.forEach(i=>i.updateMatrixWorld(!0)),t.length>0){let i=hm(t,!1);e.bvhGeometry=i,e.bvhGeometry.boundsTree=new M1(i),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e)}}addCollider(e,t,r,n,i=!0){var s,l;if((r==null?void 0:r.getAttribute("position").count)===0||((s=r==null?void 0:r.getIndex())==null?void 0:s.count)===0)return;let o;r&&(t.colliderType==="trimesh"?o=Lr.ColliderDesc.trimesh(r.getAttribute("position").array,r.getIndex().array):o=Lr.ColliderDesc.convexMesh(r.getAttribute("position").array,i?r.getIndex().array:void 0)),o.setFrictionCombineRule(Lr.CoefficientCombineRule.Average).setRestitutionCombineRule(Lr.CoefficientCombineRule.Average).setDensity(t.density).setFriction(t.friction).setRestitution(t.restitution);let a=this.sharedGameControlGlobals.rapierWorld.createCollider(o,e);this.sharedGameControlGlobals.colliderToEntity.set(a.handle,n),(l=this.sharedGameControlGlobals.entityToCollisionEvents[n.uuid])!=null&&l.some(u=>u.target==="scene")&&a.setActiveEvents(Lr.ActiveEvents.COLLISION_EVENTS)}gatherChildrenGeom(e,t){return(r,n)=>{var s;if(n===0)return;let i;if(r instanceof Eu)if(r.objectForSample){if(r.objectForSample.dataPatched.physics.fusedBody)return;i=r.object}else return r.object.dataPatched.physics.fusedBody===!0&&r.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(r instanceof ua)i=r.object;else if(i=r,(s=i.dataPatched.cloner)==null?void 0:s.hideBase)return!0;let o=i.dataPatched;if(o.physics.enabled==="visibility"?!o.visible:!o.physics.enabled)return!0;n===1?e.hasNonUniformScale?r.matrixWorld.multiplyMatrices(e.shearScale,r.hiddenMatrix):r.matrixWorld.copy(r.hiddenMatrix):r.matrixWorld.multiplyMatrices(r.parent.matrixWorld,r.hiddenMatrix),r.matrixWorld.multiply(r.matrix);let a=r.geometry;(a==null?void 0:a.getAttribute("position"))!==void 0&&t.push(zd(a,r.matrixWorld))}}activate(e){var h,f;if(this.isEnabled)return;this.isEnabled=!0,this.eventManager=e,this.usePhysics=this.page.data.globalPhysics.usePhysics;let t=this.page.playCamera,r=!1,n=5,i=8,o=9,a="drag",s=this.page.data.publish.gameControlObject,l=s!==null?this.page.find(s):null,u=null;if(l)for(let m of l.data.events){if(m.data.disabled||m.data.type!=="GameControl")break;let p=l;for(;this.usePhysics&&((h=p=p.parent)==null?void 0:h.parent)!==null&&!((f=p.data.physics)!=null&&f.fusedBody););m.data.collisionEnabled&&(this.needsCollisionDetection=!0),u===null&&(u=m.data)}if(this.page.traverseEntity(m=>{for(let p of m.dataPatched.events)if(p.data.disabled===!1&&p.data.type==="Trigger")return this.needsCollisionDetection=!0,!0}),l&&u){r=r||u.camera===t.uuid||l.uuid===t.uuid;let m=new Rce(l,this.renderer.domElement,u,this.eventContext.page.data.globalPhysics,this,l.uuid!==t.uuid&&u.camera===t.uuid,t,this.page,this.sharedAssets);this.gameControl=m,n=u.joystickPosLoc,i=u.joystickRotLoc,o=u.jumpTouchButtonLoc,a=u.rotByTouch,Xs&&u.touchControl&&(this.joystickToGameControls[n]="pos",u.moveMode==="walk"&&(this.joystickToGameControls[o]="jmp"),a==="joystick"&&(this.joystickToGameControls[i]="rot"))}if(this.gameControl&&this.gameControl.data.navmesh.enabled){let m=this.gameControl.data;if(!this.navigationMeshWrapper){this.navigationMeshWrapper=new nEt(this.usePhysics,this.isExport);let p;m.collider.type==="sphere"?p=m.collider.radius*2:p=m.collider.height,p=Math.floor(p/m.navmesh.ch-1),this.navigationMeshWrapper.init({...m.navmesh,walkableHeight:p},this.gameControl,this.eventContext)}}if(r===!1){let{enableRotate:m,enablePan:p,enableZoom:g,autoRotate:v,hoverRotatePanMode:b}=this.eventManager.publish.orbitControls;(m||p||g||v||b!==0)&&(this.orbitControls=new $ce(t,this.renderer.domElement,{isExport:this.isExport,isPlayMode:!0}),this.orbitControls.addEventListener("change",this.requestRender),this.orbitControls.addEventListener("end",this.requestRender),this.orbitControls.addEventListener("start",this.requestRender),this.orbitControls.fromJSON(this.eventManager.publish.orbitControls,this.eventManager.publish.mouseEventTarget),this.orbitControls.useKeyEvents=!1,this.orbitControls.addEventListenersToCamera(),this.orbitControls.connect(),this.orbitControls.update())}let d=this.renderer.domElement.width/this.renderer.getPixelRatio(),c=this.renderer.domElement.height/this.renderer.getPixelRatio();this.joystickToGameControls.forEach((m,p)=>{let g=document.body.appendChild(document.createElement("div")),[v,b,y]=this.eventManager.eventContext.publish.joystickSizeAndXYOffset[p],x=(d-5*v)/4+v,S={},w=m==="jmp",_=w?0:v;p<10?(p<5?S.top=_/2:S.bottom=_/2,S.left=_/2+p%5*x):p===10?(S.left=_/2,S.top=c/2):(S.right=_/2,S.top=c/2),S.top?S.top-=b[1]:S.bottom+=b[1],S.left?S.left+=b[0]:S.right-=b[0];for(let A in S)S[A]+="px";if(w){let A=g.appendChild(document.createElement("div"));Object.assign(A.style,S,{position:"absolute",width:v+"px",height:v+"px",backgroundColor:`rgba(255,255,255,${y==="show"?.4:0})`,zIndex:"9999",borderRadius:v+"px",border:y==="show"?"solid 2px rgba(0, 0, 0, .1)":"none",display:"flex",alignItems:"center",justifyContent:"center",touchAction:"none"});let M=v/16*16*.4;y==="show"&&(A.innerHTML=`
						<svg width="${M}" height="${v*.4}" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path d="M2 10L8 4L14 10" stroke="black" stroke-opacity="40%" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
					`),A.addEventListener("pointerdown",()=>{this.gameControl.movementState.jump=1,this.requestRender()}),A.addEventListener("touchend",I=>I.preventDefault()),this.joysticks[p]=[void 0,g];return}let C={zone:g,mode:"static",position:S,size:v};y==="hide"&&(C.restOpacity=0);let E=k_t.create(C);E.on("move",(A,M)=>{let I=this.gameControl;m==="pos"?M.force<.2?I.moveForce=0:(I.movementState.movePosZ=Math.sin(-M.angle.radian),I.movementState.movePosX=Math.cos(-M.angle.radian),M.force>1.2?I.movementState.run=1:I.movementState.run=0,M.force<.3?I.moveForce=(M.force-.2)/.1:I.moveForce=1):m==="rot"&&(M.force<.2?I.rotForce=0:(I.movementState.rotPosX=M.vector.y,I.movementState.rotPosY=-M.vector.x,M.force<.3?I.rotForce=(M.force-.2)/.1:I.rotForce=1)),this.requestRender()}),E.on("end",(A,M)=>{let I=this.gameControl;m==="pos"?(I.movementState.movePosZ=0,I.movementState.movePosX=0,I.moveForce=1):m==="rot"&&(I.movementState.rotPosX=0,I.movementState.rotPosY=0,I.rotForce=1)}),this.joysticks[p]=[E,g]}),this.markIsDestroyTarget(),this.markIsDragObject(),this.rebuildBVH(),this.initializationCounter++,window.setTimeout(()=>{this.collisionEvents.forEach(m=>m.disabled=!1)},80)}initPhysics(){var a;(a=this.sharedGameControlGlobals.rapierWorld)==null||a.free(),this.sharedGameControlGlobals.rapierWorld=new Lr.World(new Lr.Vector3(0,this.gravity,0)),this.events=new Lr.EventQueue(!0);let e=[],t=[];if(this.page.traverseChildren(s=>{var v,b,y,x;let l;if(s instanceof Eu)if(s.objectForSample){if(s.objectForSample.dataPatched.physics.fusedBody)return;l=s.object}else return s.object.dataPatched.physics.fusedBody===!0&&s.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(s instanceof ua)l=s.object;else if(l=s,((v=l.dataPatched.cloner)==null?void 0:v.disabled)===!1&&((b=l.dataPatched.cloner)==null?void 0:b.hideBase)&&((y=l.dataPatched.physics)==null?void 0:y.fusedBody)!==!0)return!0;let u=l.dataPatched,d;for(let S of u.events)S.data.disabled!==!0&&S.data.type==="GameControl"&&(d=S.data);if(!u.physics||(u.physics.enabled==="visibility"?!u.visible:!u.physics.enabled))return!0;s.updateMatrixWorldSVD();let c=KP(u),h=!1,f=l.userData.hasDestroy,m=l.userData.hasDrag,p=!1;for(let S of u.events)if(S.data.disabled!==!0){if(S.data.type==="Collision"){h=!0;let w=new WAt(S.id,S.data,l,this.page,this.sharedAssets,this.eventManager);w.disabled=!0,this.collisionEvents.push(w),this.sharedGameControlGlobals.entityToCollisionEvents[l.uuid]&&this.sharedGameControlGlobals.entityToCollisionEvents[l.uuid].every(_=>_.id!==S.id)?this.sharedGameControlGlobals.entityToCollisionEvents[l.uuid].push(w):this.sharedGameControlGlobals.entityToCollisionEvents[l.uuid]=[w]}else if(S.data.type==="Follow"){p=!0;let w=S.data.target;s.traverseVisible(_=>{_.userData.isFollowingObj=w})}}u.physics.rigidBody==="dynamic"&&u.physics.fusedBody===!1&&(s.matrixWorldFusedFalse=s.matrixWorld.clone());let g=s.geometry;if(d!==void 0){let S=Lr.RigidBodyDesc.kinematicPositionBased();(s.hasNonUniformScale?s.matrixWorldRigid:s.matrixWorld).decompose(Fi,cu,Vh),s.position0=Fi.clone().divideScalar(this.pixelsPerMeter),s.rotation0=cu.clone(),Fi.divideScalar(this.pixelsPerMeter),S.setTranslation(Fi.x,Fi.y,Fi.z).setRotation(cu);let w=this.sharedGameControlGlobals.rapierWorld.createRigidBody(S);s.rigidBody=w;let _;d.collider.type==="sphere"?_=Lr.ColliderDesc.ball(d.collider.radius/this.pixelsPerMeter):d.collider.type==="capsule"?_=Lr.ColliderDesc.capsule((d.collider.height/2-d.collider.radius)/this.pixelsPerMeter,d.collider.radius/this.pixelsPerMeter):_=Lr.ColliderDesc.cuboid(d.collider.width/this.pixelsPerMeter/2,d.collider.height/this.pixelsPerMeter/2,d.collider.depth/this.pixelsPerMeter/2),_.setFrictionCombineRule(Lr.CoefficientCombineRule.Average).setRestitutionCombineRule(Lr.CoefficientCombineRule.Average).setDensity(u.physics.density).setFriction(u.physics.friction).setRestitution(u.physics.restitution);let C=this.sharedGameControlGlobals.rapierWorld.createCollider(_,w);this.sharedGameControlGlobals.colliderToEntity.set(C.handle,l),Fi.fromArray(d.collider.position).multiply(Vh.setFromMatrixScale(l.matrixWorld)).divideScalar(this.pixelsPerMeter),C.setTranslationWrtParent(Fi);let E=new Jt().setFromEuler(new Eo().setFromVector3(new F().fromArray(d.collider.rotation)));C.setRotationWrtParent(E),C.setActiveEvents(Lr.ActiveEvents.COLLISION_EVENTS),this.generateSensorColliderDescs(l,!0)}else u.physics.rigidBody==="dynamic"||c||p||f||m||h?(this.addRigidBody(s,l,{hasFollow:p,hasTransformAnim:c,hasDrag:m}),this.generateSensorColliderDescs(l,u.physics.fusedBody)):(g&&e.push(zd(g,s.matrixWorld)),u.physics.fusedBody&&s.traverseObject((S,w)=>{var A;if(w===0)return;let _;if(S instanceof Eu)if(S.objectForSample){if(S.objectForSample.dataPatched.physics.fusedBody)return;_=S.object}else return S.object.dataPatched.physics.fusedBody===!0&&S.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(S instanceof ua)_=S.object;else if(_=S,(A=_.dataPatched.cloner)==null?void 0:A.hideBase)return!0;let C=_.dataPatched;if(C.physics.enabled==="visibility"?!C.visible:!C.physics.enabled)return!0;let E=S.geometry;(E==null?void 0:E.getAttribute("position"))!==void 0&&e.push(zd(E,S.matrixWorld))}),this.generateSensorColliderDescs(l,u.physics.fusedBody,t));if(((x=u.physics)==null?void 0:x.fusedBody)===!0||d)return!0}),e.length===0)return;let r=hm(e);r.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter);let n=Lr.RigidBodyDesc.fixed(),i=this.sharedGameControlGlobals.rapierWorld.createRigidBody(n),o=Lr.ColliderDesc.trimesh(r.getAttribute("position").array,r.getIndex().array).setFrictionCombineRule(Lr.CoefficientCombineRule.Multiply).setRestitutionCombineRule(Lr.CoefficientCombineRule.Multiply).setFriction(1).setRestitution(1);this.sharedGameControlGlobals.rapierWorld.createCollider(o,i);for(let[s,l]of t){let u=this.sharedGameControlGlobals.rapierWorld.createCollider(s,i);this.sensorToTriggerEvent[u.handle]=l}}updatePositions(){return this.nActiveRigidBodies=0,this.sharedGameControlGlobals.rapierWorld.forEachRigidBody(this.processRigidBody),this.nActiveRigidBodies>0}rebuildBVH(){this.usePhysics?this.initPhysics():(this.page.traverseEntity(e=>{for(let t of e.dataPatched.events)if(t.data.type==="Trigger"&&t.data.disabled!==!0){let r=new YY(t.id,t.data,e,this.page,this.sharedAssets,this.eventManager),n=new qe().compose(du.fromArray(t.data.position),hv.setFromEuler(QY.fromArray(t.data.rotation)),gk);if(t.data.triggerZone==="box"){let i=new ki;i.min.fromArray(t.data.size).multiplyScalar(-.5),i.max.fromArray(t.data.size).multiplyScalar(.5),this.sharedGameControlGlobals.triggers.push([i,n,e,r])}else this.sharedGameControlGlobals.triggers.push([t.data.radius,n,e,r])}}),this.needsCollisionDetection&&this.initBVH())}disconnectEvents(){this.collisionEvents.forEach(e=>e.disconnect()),this.sharedGameControlGlobals.triggers.forEach(e=>e[3].disconnect()),this.sharedGameControlGlobals.triggers.length=0}deactivate(){var e,t,r,n;if(this.isEnabled){this.isEnabled=!1,this.page.traverse(i=>{let o=i;o.matrixWorldFusedFalse&&(o.matrixWorldFusedFalse=void 0),o.rigidBody&&(o.rigidBody=void 0),o.position0&&(o.position0=void 0),o.rotation0&&(o.rotation0=void 0)}),(e=this.sharedGameControlGlobals.rapierWorld)==null||e.free(),this.sharedGameControlGlobals.rapierWorld=void 0,this.sharedGameControlGlobals.staticMeshBVH=void 0,this.accumulator=0,this.sharedGameControlGlobals.entitiesWithTransformAnim=[],this.disconnectEvents(),(t=this.gameControl)==null||t.reset(),(r=this.gameControl)==null||r.dispose(),this.gameControl=null,this.initializationCounter=-1,this.joysticks.forEach(([i,o])=>{i==null||i.destroy(),o.remove()}),this.joystickToGameControls=[],this.joysticks=[],this.orbitControls&&(this.orbitControls.dispose(),this.orbitControls=void 0),(n=this.navigationMeshWrapper)==null||n.dispose(),this.navigationMeshWrapper=void 0;for(let i of Object.values(this.sharedGameControlGlobals.entityToCollisionEvents))i.forEach(o=>o.disconnect());this.sharedGameControlGlobals.entityToCollisionEvents={},this.page.updateMatrixWorld(!0)}}update(e,t,r){if(!this.isEnabled)return!0;let n=!0;if(this.orbitControls!==void 0&&this.orbitControls.needsUpdate&&(n=!this.orbitControls.update()),this.initializationCounter>=0&&this.initializationCounter<2?(this.initializationCounter++,n=!1):this.initializationCounter===2&&this.gameControl&&(n=!this.gameControl.update(e,t,r)&&n),this.usePhysics===!1&&this.checkTrigger(),this.usePhysics){let i=.016666666666666666;if(e===0)n=this.stepPhysics()&&n;else{let o=e/1e3;o<i&&o>i*.55&&(o=i),this.accumulator+=o;let a=performance.now(),s=0,l=6;for(;this.accumulator>=i&&s<l&&(n=this.stepPhysics()&&n,this.accumulator-=i,s++,!(performance.now()-a>i*1e3)););this.accumulator=this.accumulator%i}}return n}stepPhysics(){var e;for(let t of this.sharedGameControlGlobals.entitiesWithTransformAnim){(t.hasNonUniformScale?t.matrixWorldRigid:t.matrixWorld).decompose(Fi,cu,Vh),pk.setFromQuaternion(cu);let r=t;r.prevR===void 0?(r.prevR=pk.clone(),r.prevT=Fi.clone()):(r.prevR.copy(pk),r.prevT.copy(Fi)),t.rigidBody&&(t.rigidBody.setNextKinematicTranslation(Fi.divideScalar(this.pixelsPerMeter)),t.rigidBody.setNextKinematicRotation(cu))}return this.sharedGameControlGlobals.rapierWorld.step(this.events),(e=this.events)==null||e.drainCollisionEvents(this.handleCollisionEvents),!this.updatePositions()}dispatchCollisionEvent(e,t,r){var o;let n=((o=this.sharedGameControlGlobals.rapierWorld)==null?void 0:o.getCollider(r))._parent,i;if(t.cloner){for(let a of t.cloner.children)if(a.rigidBody===n){i=a;break}}e.dispatch(i),t.dispatchEvent(lB)}updateUseWindowEvents(e){var t;(t=this.orbitControls)==null||t.updateUseWindowEvents(e)}generateSensorColliderDescs(e,t,r){let n=ZY.copy(e.matrixWorld).invert();e.traverseEntity((i,o)=>{if(t===!1&&o===1)return!0;for(let a of i.dataPatched.events)if(a.data.type==="Trigger"&&a.data.disabled!==!0){let s=new YY(a.id,a.data,i,this.page,this.sharedAssets,this.eventManager),l;if(a.data.triggerZone==="box"?l=Lr.ColliderDesc.cuboid(...a.data.size.map(u=>u/(2*this.pixelsPerMeter))):l=Lr.ColliderDesc.ball(a.data.radius/this.pixelsPerMeter),l.setDensity(0).setSensor(!0).setActiveEvents(Lr.ActiveEvents.COLLISION_EVENTS),du.fromArray(a.data.position),hv.setFromEuler(QY.fromArray(a.data.rotation)),wA.compose(du,hv,gk).premultiply(i.matrixWorld),r?(wA.decompose(du,hv,mk),l.setActiveCollisionTypes(Lr.ActiveCollisionTypes.KINEMATIC_FIXED|Lr.ActiveCollisionTypes.DYNAMIC_FIXED)):(wA.premultiply(n).decompose(du,hv,mk),e.rigidBody.bodyType()===Lr.RigidBodyType.Dynamic||(e.rigidBody.bodyType()===Lr.RigidBodyType.Fixed?l.setActiveCollisionTypes(Lr.ActiveCollisionTypes.KINEMATIC_FIXED|Lr.ActiveCollisionTypes.DYNAMIC_FIXED):l.setActiveCollisionTypes(Lr.ActiveCollisionTypes.KINEMATIC_KINEMATIC|Lr.ActiveCollisionTypes.DYNAMIC_KINEMATIC))),du.divideScalar(this.pixelsPerMeter),l.setTranslation(du.x,du.y,du.z),l.setRotation(hv),r)r.push([l,s]);else{let u=this.sharedGameControlGlobals.rapierWorld.createCollider(l,e.rigidBody);this.sensorToTriggerEvent[u.handle]=s}}})}checkTrigger(){let e;for(let t=0;t<this.sharedGameControlGlobals.triggers.length;t++){let[r,n,i,o]=this.sharedGameControlGlobals.triggers[t];for(let a=0;a<this.sharedGameControlGlobals.entitiesWithTransformAnim.length;a++){let s=this.sharedGameControlGlobals.entitiesWithTransformAnim[a];if(i===s||o.isValidTriggeringObject(Dr.is(s)?s:s.object)===!1)continue;let l=ZY.copy(i.matrixWorld).decompose(du,JY,mk).compose(du,JY,gk).multiply(n),u=wA.copy(s.matrixWorld).invert().multiply(l);r instanceof ki?e=s.bvhGeometry.boundsTree.intersectsBox(r,u):(vk.radius=r,vk.center.setFromMatrixPosition(u),e=s.bvhGeometry.boundsTree.intersectsSphere(vk)),e?o.currentIntersectedObjects.indexOf(s)===-1&&(o.currentIntersectedObjects.push(s),o.dispatch(),i.dispatchEvent(mEt)):o.currentIntersectedObjects=o.currentIntersectedObjects.filter(d=>d!==s)}}}};function yEt(e){let t=this._clip.duration,r=this._clip.start??0,n=this.loop,i=this.time+e,o=this._loopCount,a=n===D4;if(e===0)return o===-1?i:a&&(o&1)===1?t-(i-r):i;if(n===dae){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),i>=t||i<r){let s=Math.floor((i-r)/(t-r));i-=(t-r)*s,o+=Math.abs(s);let l=this.repetitions-o;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,a||(i=e>0?t:r,this.repetitions===1&&(i=t)),this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){let u=e<0;this._setEndings(u,!u,a)}else this._setEndings(!1,!1,a);this._loopCount=o,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}else this.time=i;if(a&&(o&1)===1)return t-(i-r)}return i}var eQ=!1,bEt=class{constructor(e,t,r,n){this.scene=e,this.requestRender=t,this.updateDisplayProgress=r,this.animationInspectorState=n,this.clipIdToAction={},this.activeClip=null,this.needsUpdate=!1,this.addClip=i=>{i.data.type==="Empty"&&i.data.animations&&i.data.animations.forEach((o,a)=>{let s=o[0]+"/";if(Array.isArray(i.identity)?s+=i.identity[0]:s+=i.uuid,this.clipIdToAction[s])return;let l=DN.parse(JSON.parse(o[2]));i.animations[a]=l;let u=this.mixer.clipAction(l,i);eQ===!1&&(Object.getPrototypeOf(u)._updateTime=yEt,eQ=!0),u.clampWhenFinished=!0,this.clipIdToAction[s]=u})},this.mixer=new blt(e),this.scene.traverseEntity(this.addClip)}deleteClip(e,t){let r=this.scene.find(t);if(!r)return;let n=r.animations.find(o=>o.uuid===e);if(!n)return;let i=this.clipIdToAction[e];!i||(i.stop(),this.mixer.uncacheClip(n),delete this.clipIdToAction[e],r.animations=r.animations.filter(o=>o.uuid!==e))}get isPlaying(){return Object.values(this.clipIdToAction).some(e=>e.isRunning())}playFromInspector(e){this.mixer.stopAllAction();let t=this.clipIdToAction[e];!t||(t.play(),this.activeClip=t.getClip(),this.requestRender())}onExitPlayMode(){Object.values(this.clipIdToAction).forEach(e=>{e.repetitions=1/0,e.loop=hae}),this.mixer.stopAllAction(),this.requestRender()}play(e){let t=e.clipId+"/"+e.object,r=this.clipIdToAction[t];if(r)return e&&(e.repeat>=0&&(r.repetitions=e.repeat+1),e.direction==="pingpong"&&e.repeat!==0&&(r.loop=D4)),r.play(),r.paused=!1,this.requestRender(),r}resumeFromInspector(e){let t=this.clipIdToAction[e];!t||(t.play(),t.paused=!1,this.requestRender())}pauseFromInspector(e){let t=this.clipIdToAction[e];!t||(t.paused=!0)}stop(){this.mixer.stopAllAction(),this.requestRender()}update(e){var t;if(this.needsUpdate)this.needsUpdate=!1;else if(this.isPlaying===!1||(t=this.animationInspectorState)!=null&&t.isScrubbing)return;this.mixer.update(e/1e3),this.activeClip&&this.updateDisplayProgress(Math.round(this.mixer.time/this.activeClip.duration*this.maxFrames%this.maxFrames)),this.requestRender()}get maxFrames(){var e,t;return((t=(e=this.activeClip)==null?void 0:e.tracks[0])==null?void 0:t.times.length)??0}setProgressFromInspector(e,t){if(!this.clipIdToAction[t])return;this.activeClip!==this.clipIdToAction[t].getClip()&&this.playFromInspector(t);let r=this.clipIdToAction[t].paused;this.clipIdToAction[t].paused=!1,this.mixer.setTime(Math.min(this.maxFrames?e/this.maxFrames:0,.9999)*this.activeClip.duration),this.requestRender(),r&&(this.clipIdToAction[t].paused=!0)}},yk=new WeakMap,xEt=class extends W4{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,n){let i=new RN(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,o=>{this.decodeDracoFile(o,t).catch(n)},r,n)}decodeDracoFile(e,t,r,n){let i={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:n||this.defaultAttributeTypes,useUniqueIDs:!!r};return this.decodeGeometry(e,i).then(t)}decodeGeometry(e,t){let r=JSON.stringify(t);if(yk.has(e)){let s=yk.get(e);if(s.key===r)return s.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let n,i=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(i,o).then(s=>(n=s,new Promise((l,u)=>{n._callbacks[i]={resolve:l,reject:u},n.postMessage({type:"decode",id:i,taskConfig:t,buffer:e},[e])}))).then(s=>this._createGeometry(s.geometry));return a.catch(()=>!0).then(()=>{n&&i&&this._releaseTask(n,i)}),yk.set(e,{key:r,promise:a}),a}_createGeometry(e){let t=new Nt;e.index&&t.setIndex(new Kt(e.index.array,1));for(let r=0;r<e.attributes.length;r++){let n=e.attributes[r],i=n.name,o=n.array,a=n.itemSize;t.setAttribute(i,new Kt(o,a))}return t}_loadLibrary(e,t){let r=new RN(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((n,i)=>{r.load(e,n,void 0,i)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(r=>{let n=r[0];e||(this.decoderConfig.wasmBinary=r[1]);let i=wEt.toString(),o=["/* draco decoder */",n,"","/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let n=new Worker(this.workerSourceURL);n._callbacks={},n._taskCosts={},n._taskLoad=0,n.postMessage({type:"init",decoderConfig:this.decoderConfig}),n.onmessage=function(i){let o=i.data;switch(o.type){case"decode":n._callbacks[o.id].resolve(o);break;case"error":n._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(n)}else this.workerPool.sort(function(n,i){return n._taskLoad>i._taskLoad?-1:1});let r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}};function wEt(){let e,t;onmessage=function(a){let s=a.data;switch(s.type){case"init":e=s.decoderConfig,t=new Promise(function(d){e.onModuleLoaded=function(c){d({draco:c})},DracoDecoderModule(e)});break;case"decode":let l=s.buffer,u=s.taskConfig;t.then(d=>{let c=d.draco,h=new c.Decoder,f=new c.DecoderBuffer;f.Init(new Int8Array(l),l.byteLength);try{let m=r(c,h,f,u),p=m.attributes.map(g=>g.array.buffer);m.index&&p.push(m.index.array.buffer),self.postMessage({type:"decode",id:s.id,geometry:m},p)}catch(m){console.error(m),self.postMessage({type:"error",id:s.id,error:m.message})}finally{c.destroy(f),c.destroy(h)}});break}};function r(a,s,l,u){let d=u.attributeIDs,c=u.attributeTypes,h,f,m=s.GetEncodedGeometryType(l);if(m===a.TRIANGULAR_MESH)h=new a.Mesh,f=s.DecodeBufferToMesh(l,h);else if(m===a.POINT_CLOUD)h=new a.PointCloud,f=s.DecodeBufferToPointCloud(l,h);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!f.ok()||h.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+f.error_msg());let p={index:null,attributes:[]};for(let g in d){let v=self[c[g]],b,y;if(u.useUniqueIDs)y=d[g],b=s.GetAttributeByUniqueId(h,y);else{if(y=s.GetAttributeId(h,a[d[g]]),y===-1)continue;b=s.GetAttribute(h,y)}p.attributes.push(i(a,s,h,g,v,b))}return m===a.TRIANGULAR_MESH&&(p.index=n(a,s,h)),a.destroy(h),p}function n(a,s,l){let u=l.num_faces()*3,d=u*4,c=a._malloc(d);s.GetTrianglesUInt32Array(l,d,c);let h=new Uint32Array(a.HEAPF32.buffer,c,u).slice();return a._free(c),{array:h,itemSize:1}}function i(a,s,l,u,d,c){let h=c.num_components(),f=l.num_points()*h,m=f*d.BYTES_PER_ELEMENT,p=o(a,d),g=a._malloc(m);s.GetAttributeDataArrayForAllPoints(l,c,p,m,g);let v=new d(a.HEAPF32.buffer,g,f).slice();return a._free(g),{name:u,array:v,itemSize:h}}function o(a,s){switch(s){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}}var Cf;function SEt(){return Cf||(Cf=new xEt,Cf.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.2/").preload()),Cf.decoderPending}async function _Et(e){if(Cf){let t={attributeIDs:Cf.defaultAttributeIDs,attributeTypes:Cf.defaultAttributeTypes,useUniqueIDs:!1},r;try{r=await Cf.decodeGeometry(new Int8Array(e).buffer,t)}catch(n){console.error(n)}if(r)return{index:r.index?{array:r.index.array}:void 0,attributes:Object.entries(r.attributes).map(([n,i])=>({name:n,itemSize:i.itemSize,array:i.array}))}}return null}async function CEt(e,t){let[r,n]=Kse(XN.deserialize(new Uint8Array(e)));ble(r);let i=[];r.scene.objects.traverse((o,a)=>{a.type==="Mesh"&&a.geometry.type==="NonParametricGeometry"&&a.geometry.data.draco!==void 0&&i.push(a)}),i.length&&await SEt();for(let o of i){let a=await _Et(Yi(o.geometry.data.draco));if(a){a.index&&(o.geometry.data.index={array:a.index.array,itemSize:1,normalized:!1,type:"Uint32Array"});let s={};a.attributes.forEach(({name:l,array:u,itemSize:d})=>{s[l]={array:u,itemSize:d,type:"Float32Array",normalized:!1}}),o.geometry.data.attributes=s,o.geometry.data.draco=void 0}}return t&&t(r),n.result().data}var AEt=class{constructor(e,t,r,n,i,o,a){this.id=e,this.data=t,this.dataEvent=r,this.object=n,this.stage=!1,this.actions=Ka(r,t.actions,i,o,a,n)}disconnect(){To(this.actions)}dispatchIn(){this.actions.Audio.forEach(e=>e.dispatchBasic()),this.actions.Video.forEach(e=>e.dispatchBasic()),this.actions.Create.forEach(e=>e.dispatch()),this.actions.Destroy.forEach(e=>e.dispatch()),this.actions.Reset.forEach(e=>e.dispatch()),this.actions.Link.forEach(e=>e.dispatch()),this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.actions.Transition.forEach(e=>e.toggle()),this.actions.Animation.forEach(e=>e.play()),this.actions.SwitchCamera.forEach(e=>e.play()),this.actions.SceneTransition.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch())}dispatchOut(){this.actions.Transition.forEach(e=>{e.toggle()})}},EEt=class extends Gu{constructor(e,t){super(e),this.eventManager=t,this.breakpoints=[],this.resize=(r,n)=>{this.breakpoints.forEach(i=>{let o=JN.deviceToSize(i.data.size),a=i.dataEvent.orientation==="horizontal"?r:n,s;switch(i.data.operator){case"<":s=a<o[0];break;case">":s=a>o[0];break;case"<>":s=a>o[0]&&a<o[1];break}i.stage!==s&&(i.stage=s,i.stage?i.dispatchIn():i.dispatchOut())}),this.eventContext.updateDomRect()},this.onResizeObserver=new ResizeObserver(r=>{for(let n of r){let{width:i,height:o}=n.contentRect;this.resize(i,o)}})}connect(){let{page:e,sharedAssets:t,domElement:r}=this.eventContext;this.onResizeObserver.observe(r),e.traverseEntity(n=>{var i;if(!(!n.visible||!((i=n.data)!=null&&i.events.length)))for(let{data:o}of n.data.events)o.disabled||o.type==="Resize"&&o.breakpoints.forEach(({data:a,id:s})=>{try{let l=new AEt(s,a,o,n,e,t,this.eventManager);this.breakpoints.push(l)}catch{}})})}disconnect(){this.onResizeObserver.disconnect(),this.breakpoints.forEach(e=>{e.disconnect()}),this.breakpoints=[]}},tQ=Object.keys(Bce).filter(e=>isNaN(Number(e))),MEt=class{constructor(e,t,r,n,i){this.publish=e,this.controlsManager=t,this.animationControls=r,this.eventContext=n,this.sharedVariables=i,this.isEnabled=!1,this.activateCount=0,this.needsMouse=!1,this.needsRaycast=!1,this.onResetRaycaster=()=>{this.eventContext.raycasterNeedsUpdate=!0},this.onTouchMovePreventScroll=o=>{(o.touches.length>1||this.preventTouchScroll)&&o.preventDefault()},this.onMouseWheelPreventScroll=o=>{this.preventScroll&&o.preventDefault()},this.onMouseMove=o=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(o),pressed:o.buttons>0}},this.onMouseDown=o=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(o),pressed:!0}},this.onMouseUp=o=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(o),pressed:!1}},this.getMousePosition=o=>{var u;let{domRect:a}=this.eventContext,{pageX:s,pageY:l}=((u=o.touches)==null?void 0:u.length)>0?o.touches[0]:o;return{x:s-(a.left+window.scrollX),y:l-(a.top+window.scrollY)}},this.stopRaycast=e.stopRaycast,this.preventScroll=e.preventScroll,this.preventTouchScroll=e.preventTouchScroll,this.hideCursor=e.hideCursor,this.requestRender=n.requestRender}activate(){if(this.isEnabled)return;this.isEnabled=!0,this.initializeActionsDependentStates(),this.needsMouse&&(this.eventContext.domElement.addEventListener("pointermove",this.onMouseMove),this.eventContext.domElement.addEventListener("pointerdown",this.onMouseDown)),this.handlers={Spline:new mAt(this.eventContext),DynamicVariable:new qAt(this.eventContext,this.sharedVariables,this,this.needsMouse,this.needsRaycast),Conditional:new SAt(this.eventContext,this),Start:new GAt(this.eventContext,this),Basic:new vAt(this.eventContext,this,this.needsRaycast),MouseHover:new jAt(this.eventContext,this),Scroll:new VAt(this.eventContext,this),Follow:new DAt(this.eventContext,this),DragDrop:new MAt(this.eventContext,this),LookAt:new zAt(this.eventContext),Resize:new EEt(this.eventContext,this)};let{page:e,domElement:t,eventElement:r}=this.eventContext;this.hideCursor&&(t.style.cursor="none"),e.traverseEntity(n=>{n.addEventListener("requestRender",this.requestRender)}),Object.values(this.handlers).forEach(n=>n.connect()),tQ.forEach(n=>{(Object.values(this.handlers).some(i=>i.domEventsNeeded.has(n))||n==="pointerdown"&&this.controlsManager.navigationMeshWrapper)&&(t.addEventListener(n,this.onResetRaycaster),r.addEventListener(n,this.onResetRaycaster))}),t.addEventListener("wheel",this.onMouseWheelPreventScroll),t.addEventListener("touchmove",this.onTouchMovePreventScroll),this.activateCount++}deactivate(){var r;if(!this.isEnabled)return;this.isEnabled=!1,this.eventContext.domElement.removeEventListener("pointermove",this.onMouseMove),this.eventContext.domElement.removeEventListener("pointerdown",this.onMouseDown),this.eventContext.domElement.removeEventListener("pointerup",this.onMouseUp),this.eventContext.sharedAssets.mouseProperty=null,this.eventContext.sharedAssets.raycastProperty=null;let{page:e,domElement:t}=this.eventContext;t.style.cursor="",Object.values(this.handlers).forEach(n=>n.disconnect()),(r=this.controlsManager.gameControl)==null||r.disposeActions(),this.controlsManager.disconnectEvents(),e.traverseEntity(n=>{n.removeEventListener("requestRender",this.requestRender),n.destroyedInAction=!1}),tQ.forEach(n=>{t.removeEventListener(n,this.onResetRaycaster)}),t.removeEventListener("touchmove",this.onTouchMovePreventScroll),t.removeEventListener("wheel",this.onMouseWheelPreventScroll),this.animationControls.onExitPlayMode()}get isPaused(){return this.isEnabled}pause(){this.deactivate()}resume(){this.activate()}reset(){this.deactivate(),this.activate(),this.controlsManager.page.updateMatrixWorld(!0),this.controlsManager.rebuildBVH()}updateUseWindowEvents(e){let t=this.isEnabled;t&&this.deactivate(),this.eventContext.useWindowEvents=e,t&&this.activate()}initializeActionsDependentStates(){let e=this.eventContext.sharedAssets;e.resetDynamicVariablePlayState();let t=r=>{if(r.data.type==="Conditional"&&(r.data.ifActions.forEach(t),r.data.elseActions.forEach(t)),r.data.type==="Conditional"||r.data.type==="SetVariable")for(let n of r.data.type==="Conditional"?r.data.condition:r.data.expression)"id"in n&&Array.isArray(n.id)&&(n.id[0]==="mouse"&&(this.needsMouse=!0),n.id[0]==="raycast"&&(this.needsRaycast=!0));r.data.type==="DynamicVariablePlay"&&r.data.variableId!==""&&(r.data.mode==="Play"||r.data.mode==="PlayPause"||r.data.mode==="Toggle")&&e.setDynamicVariablePlayState(r.data.variableId,"Stopped")};this.eventContext.page.traverseEntity(r=>{var n;if((n=r.data)!=null&&n.events.length){for(let i of r.data.events)if(!i.data.disabled)if(i.data.type==="VariableChange"&&(i.data.variableId==="mouseProperty"&&(this.needsMouse=!0),i.data.variableId==="raycastProperty"&&(this.needsRaycast=!0)),i.data.type==="Conditional")for(let o of["inActions","outActions"])i.data[o].forEach(t);else if(i.data.type==="DragDrop")for(let o of["drag","drop"])i.data.dragDropActions[o].forEach(t);else if(i.data.type==="GameControl")for(let o of["idle","move","jump","run"])i.data.gameActions[o].forEach(t);else if(i.data.type==="Resize")for(let o of i.data.breakpoints)o.data.actions.forEach(t);else i.data.type==="LookAt"||i.data.actions.forEach(t)}})}},PEt=class{constructor(e,t,r,n,i){this._aspect=1,this.enableResponsive=!1,this._renderer=e,this._camera=t,this._frameSize=new ue().copy(r),this._editorSize=new ue().copy(n),this._aspect=t.aspect,this._fov=i??t.fov}set frameSize(e){this._frameSize.copy(e)}updateRenderer(){!this._renderer||this._renderer.setSize(this._frameSize.x,this._frameSize.y)}updateViewport(){if(!this._renderer||!this._camera||this._camera.cameraType!=="PerspectiveCamera")return;let e=this._frameSize.x,t=this._frameSize.y,r=this._editorSize.y;this._aspect=e/t,t<=r&&(this._camera.zoom*=r/t),this._renderer.setViewport(0,0,e,t)}updateCamera(e=!0){if(this._camera)if(this._camera.cameraType==="PerspectiveCamera"){let t=this._frameSize.y,r=this._editorSize.y,n=this._fov;if(e&&t>r){let i=TEt(t,1080,2160,1,15)/100;n*=t/r,n*=1-i}this._camera.aspect=this._aspect,this._camera.fov=n,this._camera.updateProjectionMatrix()}else this._camera.setViewplaneSize(this._frameSize.x,this._frameSize.y,this.enableResponsive)}setCamera(e){this._camera=e,this._aspect=e.aspect,this._fov=e.fov}revert(){let e=window.innerWidth,t=window.innerHeight;this._renderer&&(this._renderer.setViewport(0,0,e,t),this._renderer.setSize(e,t)),this._camera&&(this._camera.aspect=e/t,this._camera.fov=this._fov,this._camera.setViewplaneSize(e,t,this.enableResponsive),this._camera.updateProjectionMatrix())}};function TEt(e,t,r,n,i){return(e-t)/(r-t)*(i-n)+n}var OEt=class{get sharedAssets(){return this.shared}constructor(e,t={}){this.shared=new jU(e.shared,t),this.scene=new XU(e.scene,this.sharedAssets),this.shared.setEntityOpContext({scene:this.scene,shared:this.shared})}reset(e,t){this.scene.clearScene(),this.sharedAssets.reset(e.shared),this.scene.resetAfterClear(e.scene,this.sharedAssets)}resetPersonalCameraFromDocumentData(){for(let e of this.scene.children)e instanceof Wf&&e.personalCamera.updateState(e.data.camera,{scene:this.scene,shared:this.shared})}dispose(){this.scene.dispose(),this.shared.dispose()}gc(){this.shared.geometryCache.startGc(),this.shared.geometryCache2.startGc(),this.scene.traverseEntity(e=>{e instanceof Ua&&e.markGeometryAsReachable(this.shared)}),this.shared.geometryCache.endGc(),this.shared.geometryCache2.endGc()}},IEt=class{constructor({x:e=10,y:t=10}){this._startTime=0;let r=document.getElementById("spe-perfs");r?this.element=r:(this.element=document.createElement("div"),document.body.appendChild(this.element),this.element.style.position="absolute",this.element.style.zIndex="10000",this.element.style.fontFamily="monospace",this.element.style.background="black",this.element.style.color="white",this.element.style.padding="10px",this.element.style.opacity="0.5",this.element.style.fontSize="11px",this.element.setAttribute("id","spe-perfs")),this.element.style.left=`${e}px`,this.element.style.top=`${t}px`}dispose(){var e;(e=this.element.parentElement)==null||e.removeChild(this.element)}start(){this._startTime=performance.now()}end(){let e=performance.now()-this._startTime;this.element.innerHTML=e.toFixed(3)+" ms"}};function DEt(e){let t;if(e.index)for(let r=0;r<e.index.array.length;r+=3)t=e.index.array[r],e.index.array[r]=e.index.array[r+2],e.index.array[r+2]=t}function D1(e){return e instanceof dS?"SubdivObject":e.geometry.type==="NonParametricGeometry"?"NonParametric":"Mesh"}function REt(e,t){let r={};return e.traverseEntity(n=>{var l;if(!n.visible||!(n instanceof Ts)||n.type!=="Mesh"||Array.isArray(n.material)||n.states&&Object.keys(n.states).length)return;let i=n.parent;for(;i;){if(i instanceof Ts&&n.states&&Object.keys(n.states).length)return;i=i.parent}let o=n.material.uuid,a=t.shared.materials[o];if(a){if(!da.isMergable(a))return}else{let u=(l=t.scene.objects.get(n.uuid))==null?void 0:l.data;if(u&&"material"in u&&typeof u.material!="string"){if(!da.isMergable(u.material))return;o=da.getHash(u.material)}}r[o]||(r[o]={});let s=r[o][D1(n)];if(s){if(s.push(n),n.cloner)for(let u of n.cloner.children)s.push(u)}else if(r[o][D1(n)]=[n],n.cloner)for(let u of n.cloner.children)r[o][D1(n)].push(u)}),r}function kEt(e){let t=0;return Object.values(e).forEach(r=>{Object.values(r).forEach(n=>{let i=n.length;i>t&&(t=i)})}),t}function LEt(e,t){let r=REt(t,e),n=kEt(r),i=new Array(n),o=0,a=new Array(n),s=0,l=new Array(n),u=0,d=new Array(n),c=0;for(let[h,f]of Object.entries(r))for(let m of Object.values(f)){if(s=0,u=0,m.forEach(g=>{g instanceof Ts&&(a[s++]=g.geometry.clone(),l[u++]=g)}),u<2)continue;for(let g=0;g<u;g++)l[g].updateWorldMatrix(!0,!1),a[g].applyMatrix4(l[g].matrixWorld),l[g].matrixWorld.determinant()<0&&DEt(a[g]);let p=hm(a.slice(0,s),!1);if(p){let g;switch(h){case"SubdivObject":{console.warn("Turning subdiv object into mesh"),g=new Fa(p,l[0].material);break}default:{g=new Fa(p,l[0].material);break}}g.castShadow=l[0].castShadow,g.receiveShadow=l[0].receiveShadow,t.add(g);let v=b=>{c=0;for(let y of b)y.children&&v(y.children),y instanceof Ts&&(Array.isArray(y.material)||r[y.material.uuid]&&r[y.material.uuid][D1(y)]&&r[y.material.uuid][D1(y)].length>1||(d[c++]=y));for(let y=0;y<c;y++)t.attach(d[y])};for(let b=0;b<u;b++){let y=l[b];v(y.children),i[o++]=y}}}for(let h=0;h<o;h++)i[h].removeFromParent()}var NEt=Lo(ltt(),1),zEt=new ue;function BEt(e){let t="The Spline Runtime only accepts .splinecode files that are generated from Spline export panel.";e.endsWith(".spline")?console.warn(t+" The .spline files are only meant to be used by the Editor."):e.endsWith(".splinecode")||console.warn(t)}var FEt=class{constructor(e,{renderOnDemand:t,renderMode:r="auto"}={}){this._viewportMode=1,this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight,this._proxyObjectCache=new Map,this._variablesCache=new Map,this._isPaused=!1,this._renderRequested=!1,this._skipRender=!1,this.time=performance.now(),this.dt=0,this.currentTAAFrame=0,this.disposed=!1,this._requestRenderAutoMode=()=>{this._skipRender=!1},this.requestRender=()=>{this._renderRequested=!0},this.render=n=>{var i,o,a,s,l,u,d,c,h,f,m,p;if(this.time=n,this._lastTime&&(this.dt=this.time-this._lastTime),this._lastTime=this.time,(i=this._perfs)==null||i.start(),!this._renderer){(o=this._perfs)==null||o.end();return}if(!this._isPaused&&(this.renderMode==="manual"&&!this._renderRequested||this.renderMode==="auto"&&this._skipRender)){(a=this._perfs)==null||a.end();return}if(this._renderRequested=!1,this._skipRender=!0,this._controls&&(this._skipRender=this._controls.update(this.dt)),this._eventManager&&((s=this._eventManager.handlers)!=null&&s.Start.hasVideoAction||(l=this._eventManager.handlers)!=null&&l.Basic.hasVideoAction||(u=this._eventManager.handlers)!=null&&u.Conditional.hasVideoAction)&&(this._skipRender=!1),(d=this._animationControls)==null||d.update(this.dt),this._skipRender?(this.currentTAAFrame++,this.currentTAAFrame<32?this._skipRender=!1:this.currentTAAFrame=0):this.currentTAAFrame=0,this._scene&&this._scene.activeCamera!==this._camera&&(this._camera=this._scene.activeCamera),(c=this._eventManager)!=null&&c.isEnabled&&(((h=this._eventManager.handlers)==null?void 0:h.Follow).onAnimationFrameDamping(),((f=this._eventManager.handlers)==null?void 0:f.LookAt).onAnimationFrameDamping(),((m=this._eventManager.handlers)==null?void 0:m.DragDrop).onAnimationFrameDamping()),this._scene&&this._camera){if(this._scene.pathConstraints.applyConstraints(this._scene),this._renderer.sceneTransitionTimeRemaining>0){this._renderer.sceneTransitionTimeRemaining-=this.dt;let g=1-this._renderer.sceneTransitionTimeRemaining/this._renderer.sceneTransitionDuration;this._renderer.pipeline.sceneTransitionPass.uniforms.mixRatio.value=g,this._skipRender=!1}else this._renderer.pipeline.sceneTransitionFromTexture=null;this._renderer.renderSplineScene(this._scene,this._camera)}this.canvas.dispatchEvent(this._renderedEvent),(p=this._perfs)==null||p.end()},this._resize=()=>{var n,i,o,a,s,l,u,d,c,h;if(this._renderer){if(this._viewportMode===1&&this._frameView&&(this._frameView.frameSize=zEt.set(this._viewportWidth,this._viewportHeight)),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._camera=(n=this._scene)==null?void 0:n.activeCamera,(u=this._scene)==null||u.updateViewPlaneSize(((o=(i=this._frameView)==null?void 0:i.frameSize)==null?void 0:o.x)??this._viewportWidth,((s=(a=this._frameView)==null?void 0:a.frameSize)==null?void 0:s.y)??this._viewportHeight,((l=this._frameView)==null?void 0:l.enableResponsive)??!1),this._camera){let f=Object.values(((d=this._data)==null?void 0:d.frames)??{})[0].preset??"fullscreen";(c=this._frameView)==null||c.setCamera(this._camera),(h=this._frameView)==null||h.updateCamera(f!=="fullscreen"),this._camera.cameraType==="PerspectiveCamera"&&(this._camera.aspect=this._viewportWidth/this._viewportHeight),this._camera.updateProjectionMatrix()}this._requestRenderAutoMode()}},this._debouncedResize=fU(this._resize,10),this.canvas=e,this.renderMode=t?"auto":r,this._renderedEvent=new CustomEvent("rendered",{bubbles:!0}),Object.defineProperty(this._renderedEvent,"target",{writable:!1,value:this}),window.location.search.includes("perfs")&&(this._perfs=new IEt({x:10,y:10})),evt(e)}async load(e,t,r){BEt(e),this.disposed=!1;let n=await(await fetch(e,r)).arrayBuffer();await this.start(n,{variables:t})}async start(e,{interactive:t=!0,variables:r}={}){var s,l,u;if(this.disposed)return;let n=await CEt(e);this._data=n,n.version&&(0,NEt.default)(n.version,"0.9.504")>0&&console.warn("Your .splinecode file is more recent than the library. Please upgrade @splinetool/runtime to the latest version."),await Promise.all([FX(n)&&kbt(),_1t(n)&&Ibt(),aS.physicsEnabled(n.scene.objects)&&ovt(),RX(n)&&c1t(),oEt(n)&&nvt()].filter(Boolean)),(s=this._eventManager)==null||s.deactivate(),(l=this._controls)==null||l.deactivate(),(u=this._scene)==null||u.dispose();let i=new OEt(n);if(i.resetPersonalCameraFromDocumentData(),this._scene=i.scene,this._sharedAssetsManager=i.sharedAssets,this._camera=this._scene.activeCamera,window.location.search.includes("merge-geometries")){let d=performance.now();LEt(n,i.scene);let c=performance.now();console.log("Merged geometries in ",c-d," ms")}FX(n)&&this._scene.traverse(d=>{Pc(d)&&d.recomputeBoolean()}),this._sharedAssetsManager.setRequestRender(()=>{var d;this._requestRenderAutoMode(),(d=this._scene)==null||d.traverse(c=>{c instanceof Eu&&c.pendingMediaLoad&&c.update()})});let o=Object.keys(n.shared.fonts).map(d=>this._sharedAssetsManager.getFont(d).loadingPromise);Promise.all(o).then(()=>{i.scene.markNeedsUpdateRendererDirty(),this._requestRenderAutoMode()}),RX(n)&&gEt(n)&&await Promise.all(o),this._scene.rewriteEventsBeforeGoToPlayMode(),s5(this._scene.activePage,this._sharedAssetsManager),this._renderer||(this._renderer=new ZSt({canvas:this.canvas,antialias:!1,alpha:!0,stencil:!1,depth:!1,powerPreference:"high-performance"}),this._renderer.hdTransmission=n.scene.publish.hdTransmission===!0,this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.pipeline.addEventListener("smaaloaded",this._requestRenderAutoMode)),this._scene.initializeSplatViewer(this._renderer),n.scene.blueNoiseTextureData!==void 0&&this._renderer.pipeline.updateBlueNoiseTexture(n.scene.blueNoiseTextureData);let a=Object.values(n.frames)[0];if(this._frameView?this._frameView.setCamera(this._camera):(a.preset==="fullscreen"?(this._viewportMode=1,this.canvas.style.display="block",this.canvas.parentElement&&(this._viewportWidth=this.canvas.parentElement.clientWidth||300,this.canvas.style.width="100%"),this.canvas.parentElement&&(this._viewportHeight=this.canvas.parentElement.clientHeight||150,this.canvas.style.height="100%")):(this._viewportMode=2,this._viewportWidth=a.size[0],this._viewportHeight=a.size[1],this.canvas.style.width=`${this._viewportWidth}px`,this.canvas.style.height=`${this._viewportHeight}px`),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._frameView=new PEt(this._renderer,this._camera,new ue(this._viewportWidth,this._viewportHeight),new ue(window.innerWidth,window.innerHeight)),this._frameView.enableResponsive=(a.allowResponsive??!1)&&a.preset==="fullscreen"),t){let d=new fAt(this._renderer,this.data.scene.publish,this._scene,()=>this._scene.activeCamera,this._sharedAssetsManager,this._requestRenderAutoMode,!0,a);this._scene.updateMatrixWorld(!0),this._controls=new vEt(d),this._animationControls=new bEt(this._scene,this._requestRenderAutoMode),this._eventManager=new MEt(n.scene.publish,this._controls,this._animationControls,d,n.shared.variables),this._eventManager.activate(),this._controls.activate(this._eventManager)}this._resize(),r!==void 0&&this.setVariables(r),this.dt===0&&(this.render(performance.now()),setTimeout(()=>{var d;(d=this._renderer)==null||d.setAnimationLoop(this.render)},0)),this._resizeObserverTimeout=setTimeout(()=>{!this._resizeObserver&&this.canvas.parentElement&&(this._resizeObserver=new ResizeObserver(()=>{this._viewportWidth=this.canvas.clientWidth,this._viewportHeight=this.canvas.clientHeight,this._debouncedResize()}),this._resizeObserver.observe(this.canvas.parentElement))},300)}setVariables(e){if(this._data!==void 0){let t=Object.entries(e);for(let[r,n]of t)this.setVariable(r,n)}}setVariable(e,t){var n;let r=this._getVariableByName(e);if(r&&!("dynamicVariableType"in r.data)){let i=t;typeof r.data.value=="number"?i=typeof t=="number"?t:typeof t=="boolean"?t===!0?1:0:parseFloat(t):typeof r.data.value=="boolean"?i=typeof t=="number"?!!t:typeof t=="boolean"?t:t.toLocaleLowerCase()==="false"?!1:!!t:typeof r.data.value!="string"&&r.data.value.textValue!==void 0&&(i=t.toString());let o=typeof i=="string"?{textValue:i}:i;(n=this._sharedAssetsManager)==null||n.updateVariable(r.id,o),this.requestRender(),this._requestRenderAutoMode()}else r===void 0?console.warn(`No variable named ${e} was found in your Spline file. Make sure to create it from Spline editor.`):"dynamicVariableType"in r.data&&console.warn(`Dynamic variables like ${e} cannot be updated from code.`)}getVariables(){let e={};return this._data&&this._data.shared.variables.forEach(t=>{e[t.data.name]===void 0&&(e[t.data.name]=this._getVariableValue(this._sharedAssetsManager.getVariable(t.id)))}),e}getVariable(e){let t=this._getVariableByName(e);if(t){let r=this._sharedAssetsManager.getVariable(t.id);return this._getVariableValue(r)}}_getVariableValue(e){return typeof e!="string"&&Ys.isTextValue(e)?Ys.getDisplayedValue(e):e}_getVariableByName(e){if(this._data){if(this._variablesCache.has(e))return this._variablesCache.get(e);let t=this._data.shared.variables.find(r=>r.data.name===e);return t&&this._variablesCache.set(e,t),t}}findObjectById(e){var r;let t=(r=this._scene)==null?void 0:r.getObjectByProperty("uuid",e);return this._createProxyObject(t)}findObjectByName(e){var r;let t=(r=this._scene)==null?void 0:r.getObjectByName(e);return this._createProxyObject(t)}getAllObjects(){var t;let e=[];return(t=this._scene)==null||t.traverseEntity(r=>{if(r.uuid!==yb&&!this._scene.isInvisibleObjects(r)&&!(r instanceof Wf)){let n=this._createProxyObject(r);n&&e.push(n)}}),e}getSplineEvents(){var e,t;return((t=(e=this._eventManager)==null?void 0:e.handlers)==null?void 0:t.Spline).splineEvents}emitEvent(e,t){var r;(r=this.findObjectById(t)||this.findObjectByName(t))==null||r.emitEvent(e)}emitEventReverse(e,t){var r;(r=this.findObjectById(t)||this.findObjectByName(t))==null||r.emitEventReverse(e)}addEventListener(e,t){this.canvas.addEventListener(e,t)}removeEventListener(e,t){this.canvas.removeEventListener(e,t)}setZoom(e){var t,r;((t=this._controls)==null?void 0:t.orbitControls)instanceof $ce&&((r=this._controls)==null||r.orbitControls.zoomOut(e))}get eventManager(){return this._eventManager}get controls(){return this._controls}setSize(e,t){this._viewportWidth=e,this._viewportHeight=t,this._viewportMode=2,this._resize()}setBackgroundColor(e){var a;let{r:t,g:r,b:n,a:i}={r:0,g:0,b:0,a:1},o=new As(t,r,n,i);try{o.setStyle(e)}catch{console.error("This is not a valid css color",e)}(a=this._scene)==null||a.activePage.setBackgroundColor(o),this._requestRenderAutoMode()}dispose(){var e,t,r,n,i,o,a;this.disposed=!0,(e=this._eventManager)==null||e.deactivate(),(t=this._scene)==null||t.dispose(),(r=this._sharedAssetsManager)==null||r.dispose(),this._proxyObjectCache.forEach(s=>{i7.unsubscribe(s)}),this._variablesCache.clear(),(n=this._renderer)==null||n.setAnimationLoop(null),(i=this._renderer)==null||i.dispose(),this._renderer=void 0,(o=this._sharedAssetsManager)==null||o.dispose(),this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=void 0),this._resizeObserverTimeout!==void 0&&clearTimeout(this._resizeObserverTimeout),this.canvas.style.width="",this.canvas.style.height="",this.canvas.removeAttribute("width"),this.canvas.removeAttribute("height"),this._frameView&&(this._frameView=void 0),(a=this._controls)==null||a.deactivate(),tvt(this.canvas)}get isStopped(){return this._isPaused}stop(){var e,t,r;this._isPaused||((e=this._renderer)==null||e.setAnimationLoop(null),this._isPaused=!0,(t=this._eventManager)==null||t.pause(),(r=this._controls)!=null&&r.orbitControls&&(this._controls.orbitControls.enabled=!1))}play(){var e,t,r;!this._isPaused||(this._isPaused=!1,(e=this._eventManager)==null||e.resume(),(t=this._controls)!=null&&t.orbitControls&&(this._controls.orbitControls.enabled=!0),(r=this._renderer)==null||r.setAnimationLoop(this.render))}setGlobalEvents(e){var t;(t=this._eventManager)==null||t.updateUseWindowEvents(e)}get data(){return this._data}_createProxyObject(e){var i;if(e==null)return;if(this._proxyObjectCache.has(e.uuid))return this._proxyObjectCache.get(e.uuid);let t;e.traverseAncestors(o=>{o instanceof Wf&&(t=o.name)});let r={name:e.name,uuid:e.uuid,visible:e.visible,intensity:e.intensity,position:e.position,rotation:e.rotation,scale:e.scale,type:e.data.type,page:t,parentUuid:e.parent instanceof Wf||e instanceof XU||(i=e.parent)==null?void 0:i.uuid,emitEvent(o){e.dispatchEvent({type:"userEvent",eventName:o})},emitEventReverse(o){e.dispatchEvent({type:"userEvent",eventName:o,reverse:!0})}},n=i7(r,(o,a)=>{var s;typeof e[o]!="object"&&((s=Object.getOwnPropertyDescriptor(e,o))!=null&&s.writable)&&(e[o]=a),this._requestRenderAutoMode(),e.updateMatrix()});return this._proxyObjectCache.set(e.uuid,n),n}};const jEt=()=>{const e=()=>{localStorage.setItem("user77","user77"),localStorage.getItem("user77")&&location.reload()};return P.useEffect(()=>{const t=document.getElementById("canvas3d");new FEt(t).load("https://prod.spline.design/KrE4T6htfYgbRN-C/scene.splinecode")},[]),B.jsx(B.Fragment,{children:B.jsxs(Eee,{display:"flex",flexDirection:"column",justifyContent:"center",height:"100vh",alignItems:"center",children:[B.jsx(vi,{fontSize:"15px",color:"#b3b6c2",letterSpacing:"2px",children:"INTRODUCE"}),B.jsx(vi,{fontSize:"35px",color:"white",fontWeight:600,children:"API RENAISSANCE"}),B.jsx(LF,{onClick:e,sx:{marginTop:"7px"},children:"CHECK THE CONSOLE"}),B.jsxs("div",{style:{height:"600px",width:"600px"},children:[B.jsx("canvas",{id:"canvas3d"})," "]})]})})};function UEt(){const[e,t]=P.useState(!1);P.useEffect(()=>{const n=localStorage.getItem("user77");t(n!==null)},[e,mCe]);const r=P.useMemo(()=>_F(yfe),[]);return B.jsx("div",{className:"app",children:B.jsx(jCe,{children:B.jsxs(ove,{theme:r,children:[B.jsx(Yxe,{}),B.jsxs(Na,{width:"100%",height:"100%",padding:"1rem 2rem 4rem 2rem",children:[B.jsx(QCe,{}),B.jsxs(kCe,{children:[B.jsx(FA,{path:"/",element:e?B.jsx(Net,{}):B.jsx(bI,{to:"login"})}),B.jsx(FA,{path:"/predictions",element:e?B.jsx(Fet,{}):B.jsx(bI,{to:"/"})}),B.jsx(FA,{path:"/login",element:e?B.jsx(bI,{to:"/"}):B.jsx(jEt,{})})]})]})]})})})}var Vce={exports:{}},Hce={};const Ns=XP(cEe),Ex=XP(cAe),$Et=XP(SAe);(function(e){var t,r,n=mu&&mu.__generator||function(Y,se){var re,oe,ce,we,Be={label:0,sent:function(){if(1&ce[0])throw ce[1];return ce[1]},trys:[],ops:[]};return we={next:Ye(0),throw:Ye(1),return:Ye(2)},typeof Symbol=="function"&&(we[Symbol.iterator]=function(){return this}),we;function Ye(Fe){return function(tt){return function(je){if(re)throw new TypeError("Generator is already executing.");for(;Be;)try{if(re=1,oe&&(ce=2&je[0]?oe.return:je[0]?oe.throw||((ce=oe.return)&&ce.call(oe),0):oe.next)&&!(ce=ce.call(oe,je[1])).done)return ce;switch(oe=0,ce&&(je=[2&je[0],ce.value]),je[0]){case 0:case 1:ce=je;break;case 4:return Be.label++,{value:je[1],done:!1};case 5:Be.label++,oe=je[1],je=[0];continue;case 7:je=Be.ops.pop(),Be.trys.pop();continue;default:if(!((ce=(ce=Be.trys).length>0&&ce[ce.length-1])||je[0]!==6&&je[0]!==2)){Be=0;continue}if(je[0]===3&&(!ce||je[1]>ce[0]&&je[1]<ce[3])){Be.label=je[1];break}if(je[0]===6&&Be.label<ce[1]){Be.label=ce[1],ce=je;break}if(ce&&Be.label<ce[2]){Be.label=ce[2],Be.ops.push(je);break}ce[2]&&Be.ops.pop(),Be.trys.pop();continue}je=se.call(Y,Be)}catch(Ne){je=[6,Ne],oe=0}finally{re=ce=0}if(5&je[0])throw je[1];return{value:je[0]?je[1]:void 0,done:!0}}([Fe,tt])}}},i=mu&&mu.__spreadArray||function(Y,se){for(var re=0,oe=se.length,ce=Y.length;re<oe;re++,ce++)Y[ce]=se[re];return Y},o=Object.create,a=Object.defineProperty,s=Object.defineProperties,l=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,h=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,p=function(Y,se,re){return se in Y?a(Y,se,{enumerable:!0,configurable:!0,writable:!0,value:re}):Y[se]=re},g=function(Y,se){for(var re in se||(se={}))f.call(se,re)&&p(Y,re,se[re]);if(c)for(var oe=0,ce=c(se);oe<ce.length;oe++)m.call(se,re=ce[oe])&&p(Y,re,se[re]);return Y},v=function(Y,se){return s(Y,u(se))},b=function(Y){return a(Y,"__esModule",{value:!0})},y=function(Y,se){var re={};for(var oe in Y)f.call(Y,oe)&&se.indexOf(oe)<0&&(re[oe]=Y[oe]);if(Y!=null&&c)for(var ce=0,we=c(Y);ce<we.length;ce++)se.indexOf(oe=we[ce])<0&&m.call(Y,oe)&&(re[oe]=Y[oe]);return re},x=function(Y){return function(se,re,oe){if(re&&typeof re=="object"||typeof re=="function")for(var ce=function(Ye){f.call(se,Ye)||Ye==="default"||a(se,Ye,{get:function(){return re[Ye]},enumerable:!(oe=l(re,Ye))||oe.enumerable})},we=0,Be=d(re);we<Be.length;we++)ce(Be[we]);return se}(b(a(Y!=null?o(h(Y)):{},"default",Y&&Y.__esModule&&"default"in Y?{get:function(){return Y.default},enumerable:!0}:{value:Y,enumerable:!0})),Y)},S=function(Y,se,re){return new Promise(function(oe,ce){var we=function(Fe){try{Ye(re.next(Fe))}catch(tt){ce(tt)}},Be=function(Fe){try{Ye(re.throw(Fe))}catch(tt){ce(tt)}},Ye=function(Fe){return Fe.done?oe(Fe.value):Promise.resolve(Fe.value).then(we,Be)};Ye((re=re.apply(Y,se)).next())})};b(e),function(Y,se){for(var re in se)a(Y,re,{get:se[re],enumerable:!0})}(e,{QueryStatus:function(){return t},buildCreateApi:function(){return Cr},copyWithStructuralSharing:function(){return C},coreModule:function(){return _e},createApi:function(){return ke},defaultSerializeQueryArgs:function(){return et},fakeBaseQuery:function(){return Mr},fetchBaseQuery:function(){return T},retry:function(){return R},setupListeners:function(){return Q},skipSelector:function(){return De},skipToken:function(){return Le}}),(r=t||(t={})).uninitialized="uninitialized",r.pending="pending",r.fulfilled="fulfilled",r.rejected="rejected";var w=function(Y){return[].concat.apply([],Y)},_=x(Ns).isPlainObject;function C(Y,se){if(Y===se||!(_(Y)&&_(se)||Array.isArray(Y)&&Array.isArray(se)))return se;for(var re=Object.keys(se),oe=Object.keys(Y),ce=re.length===oe.length,we=Array.isArray(se)?[]:{},Be=0,Ye=re;Be<Ye.length;Be++){var Fe=Ye[Be];we[Fe]=C(Y[Fe],se[Fe]),ce&&(ce=Y[Fe]===we[Fe])}return ce?Y:we}var E=x(Ns),A=function(){for(var Y=[],se=0;se<arguments.length;se++)Y[se]=arguments[se];return fetch.apply(void 0,Y)},M=function(Y){return Y.status>=200&&Y.status<=299},I=function(Y){return/ion\/(vnd\.api\+)?json/.test(Y.get("content-type")||"")};function O(Y){if(!(0,E.isPlainObject)(Y))return Y;for(var se=g({},Y),re=0,oe=Object.entries(se);re<oe.length;re++){var ce=oe[re];ce[1]===void 0&&delete se[ce[0]]}return se}function T(Y){var se=this;Y===void 0&&(Y={});var re=Y.baseUrl,oe=Y.prepareHeaders,ce=oe===void 0?function(br){return br}:oe,we=Y.fetchFn,Be=we===void 0?A:we,Ye=Y.paramsSerializer,Fe=Y.isJsonContentType,tt=Fe===void 0?I:Fe,je=Y.jsonContentType,Ne=je===void 0?"application/json":je,ut=Y.jsonReplacer,pt=Y.timeout,ot=Y.responseHandler,er=Y.validateStatus,dr=y(Y,["baseUrl","prepareHeaders","fetchFn","paramsSerializer","isJsonContentType","jsonContentType","jsonReplacer","timeout","responseHandler","validateStatus"]);return typeof fetch>"u"&&Be===A&&console.warn("Warning: `fetch` is not available. Please supply a custom `fetchFn` property to use `fetchBaseQuery` on SSR environments."),function(br,fr){return S(se,null,function(){var Gr,rr,ci,va,gn,ei,zo,Bn,ul,ud,Qt,vn,In,eo,to,ya,Fn,Fr,tn,Dn,yn,An,dt,Vt,Ot,wt,It,ar,Rt,gt,rt,xt,nt,ct,vt,Xt;return n(this,function(Ht){switch(Ht.label){case 0:return Gr=fr.signal,rr=fr.getState,ci=fr.extra,va=fr.endpoint,gn=fr.forced,ei=fr.type,ul=(Bn=typeof br=="string"?{url:br}:br).url,Qt=(ud=Bn.headers)===void 0?new Headers(dr.headers):ud,In=(vn=Bn.params)===void 0?void 0:vn,to=(eo=Bn.responseHandler)===void 0?ot??"json":eo,Fn=(ya=Bn.validateStatus)===void 0?er??M:ya,tn=(Fr=Bn.timeout)===void 0?pt:Fr,Dn=y(Bn,["url","headers","params","responseHandler","validateStatus","timeout"]),yn=g(v(g({},dr),{signal:Gr}),Dn),Qt=new Headers(O(Qt)),An=yn,[4,ce(Qt,{getState:rr,extra:ci,endpoint:va,forced:gn,type:ei})];case 1:An.headers=Ht.sent()||Qt,dt=function(At){return typeof At=="object"&&((0,E.isPlainObject)(At)||Array.isArray(At)||typeof At.toJSON=="function")},!yn.headers.has("content-type")&&dt(yn.body)&&yn.headers.set("content-type",Ne),dt(yn.body)&&tt(yn.headers)&&(yn.body=JSON.stringify(yn.body,ut)),In&&(Vt=~ul.indexOf("?")?"&":"?",Ot=Ye?Ye(In):new URLSearchParams(O(In)),ul+=Vt+Ot),ul=function(At,Pr){if(!At)return Pr;if(!Pr)return At;if(function(Qr){return new RegExp("(^|:)//").test(Qr)}(Pr))return Pr;var Yr=At.endsWith("/")||!Pr.startsWith("?")?"/":"";return At=function(Qr){return Qr.replace(/\/$/,"")}(At),""+At+Yr+function(Qr){return Qr.replace(/^\//,"")}(Pr)}(re,ul),wt=new Request(ul,yn),It=wt.clone(),zo={request:It},Rt=!1,gt=tn&&setTimeout(function(){Rt=!0,fr.abort()},tn),Ht.label=2;case 2:return Ht.trys.push([2,4,5,6]),[4,Be(wt)];case 3:return ar=Ht.sent(),[3,6];case 4:return rt=Ht.sent(),[2,{error:{status:Rt?"TIMEOUT_ERROR":"FETCH_ERROR",error:String(rt)},meta:zo}];case 5:return gt&&clearTimeout(gt),[7];case 6:xt=ar.clone(),zo.response=xt,ct="",Ht.label=7;case 7:return Ht.trys.push([7,9,,10]),[4,Promise.all([hr(ar,to).then(function(At){return nt=At},function(At){return vt=At}),xt.text().then(function(At){return ct=At},function(){})])];case 8:if(Ht.sent(),vt)throw vt;return[3,10];case 9:return Xt=Ht.sent(),[2,{error:{status:"PARSING_ERROR",originalStatus:ar.status,data:ct,error:String(Xt)},meta:zo}];case 10:return[2,Fn(ar,nt)?{data:nt,meta:zo}:{error:{status:ar.status,data:nt},meta:zo}]}})})};function hr(br,fr){return S(this,null,function(){var Gr;return n(this,function(rr){switch(rr.label){case 0:return typeof fr=="function"?[2,fr(br)]:(fr==="content-type"&&(fr=tt(br.headers)?"json":"text"),fr!=="json"?[3,2]:[4,br.text()]);case 1:return[2,(Gr=rr.sent()).length?JSON.parse(Gr):null];case 2:return[2,br.text()]}})})}}var D=function(Y,se){se===void 0&&(se=void 0),this.value=Y,this.meta=se};function N(Y,se){return Y===void 0&&(Y=0),se===void 0&&(se=5),S(this,null,function(){var re,oe;return n(this,function(ce){switch(ce.label){case 0:return re=Math.min(Y,se),oe=~~((Math.random()+.4)*(300<<re)),[4,new Promise(function(we){return setTimeout(function(Be){return we(Be)},oe)})];case 1:return ce.sent(),[2]}})})}var k={},R=Object.assign(function(Y,se){return function(re,oe,ce){return S(void 0,null,function(){var we,Be,Ye,Fe,tt,je,Ne;return n(this,function(ut){switch(ut.label){case 0:we=[5,(se||k).maxRetries,(ce||k).maxRetries].filter(function(pt){return pt!==void 0}),Be=we.slice(-1)[0],Ye=function(pt,ot,er){return er.attempt<=Be},Fe=g(g({maxRetries:Be,backoff:N,retryCondition:Ye},se),ce),tt=0,ut.label=1;case 1:ut.label=2;case 2:return ut.trys.push([2,4,,6]),[4,Y(re,oe,ce)];case 3:if((je=ut.sent()).error)throw new D(je);return[2,je];case 4:if(Ne=ut.sent(),tt++,Ne.throwImmediately){if(Ne instanceof D)return[2,Ne.value];throw Ne}return Ne instanceof D&&!Fe.retryCondition(Ne.value.error,re,{attempt:tt,baseQueryApi:oe,extraOptions:ce})?[2,Ne.value]:[4,Fe.backoff(tt,Fe.maxRetries)];case 5:return ut.sent(),[3,6];case 6:return[3,1];case 7:return[2]}})})}},{fail:function(Y){throw Object.assign(new D({error:Y}),{throwImmediately:!0})}}),z=x(Ns),j=(0,z.createAction)("__rtkq/focused"),$=(0,z.createAction)("__rtkq/unfocused"),U=(0,z.createAction)("__rtkq/online"),H=(0,z.createAction)("__rtkq/offline"),V=!1;function Q(Y,se){return se?se(Y,{onFocus:j,onFocusLost:$,onOffline:H,onOnline:U}):(re=function(){return Y(j())},oe=function(){return Y(U())},ce=function(){return Y(H())},we=function(){window.document.visibilityState==="visible"?re():Y($())},V||typeof window<"u"&&window.addEventListener&&(window.addEventListener("visibilitychange",we,!1),window.addEventListener("focus",re,!1),window.addEventListener("online",oe,!1),window.addEventListener("offline",ce,!1),V=!0),function(){window.removeEventListener("focus",re),window.removeEventListener("visibilitychange",we),window.removeEventListener("online",oe),window.removeEventListener("offline",ce),V=!1});var re,oe,ce,we}var X,ne,J=x(Ns);function W(Y){return Y.type===X.query}function te(Y,se,re,oe,ce,we){return typeof Y=="function"?Y(se,re,oe,ce).map(Z).map(we):Array.isArray(Y)?Y.map(Z).map(we):[]}function Z(Y){return typeof Y=="string"?{type:Y}:Y}(ne=X||(X={})).query="query",ne.mutation="mutation";var q=x(Ns);function ie(Y){return Y!=null}var he=Symbol("forceQueryFn"),ae=function(Y){return typeof Y[he]=="function"},be=x(Ns),ye=x(Ex),Se=x(Ns);function me(Y){return Y}function Pe(Y,se,re,oe){return te(re[Y.meta.arg.endpointName][se],(0,be.isFulfilled)(Y)?Y.payload:void 0,(0,be.isRejectedWithValue)(Y)?Y.payload:void 0,Y.meta.arg.originalArgs,"baseQueryMeta"in Y.meta?Y.meta.baseQueryMeta:void 0,oe)}var Ae=x(Ex),K=x(Ex);function G(Y,se,re){var oe=Y[se];oe&&re(oe)}function de(Y){var se;return(se="arg"in Y?Y.arg.fixedCacheKey:Y.fixedCacheKey)!=null?se:Y.requestId}function Ee(Y,se,re){var oe=Y[de(se)];oe&&re(oe)}var Me={},Le=Symbol.for("RTKQ/skipToken"),De=Le,Ce={status:t.uninitialized},pe=(0,J.createNextState)(Ce,function(){}),Ge=(0,J.createNextState)(Ce,function(){}),Ke=x(Ns),Xe=WeakMap?new WeakMap:void 0,et=function(Y){var se=Y.endpointName,re=Y.queryArgs,oe="",ce=Xe==null?void 0:Xe.get(re);if(typeof ce=="string")oe=ce;else{var we=JSON.stringify(re,function(Be,Ye){return(0,Ke.isPlainObject)(Ye)?Object.keys(Ye).sort().reduce(function(Fe,tt){return Fe[tt]=Ye[tt],Fe},{}):Ye});(0,Ke.isPlainObject)(re)&&(Xe==null||Xe.set(re,we)),oe=we}return se+"("+oe+")"},st=x(Ns),Ut=x($Et);function Cr(){for(var Y=[],se=0;se<arguments.length;se++)Y[se]=arguments[se];return function(re){var oe=(0,Ut.defaultMemoize)(function(Fe){var tt,je;return(je=re.extractRehydrationInfo)==null?void 0:je.call(re,Fe,{reducerPath:(tt=re.reducerPath)!=null?tt:"api"})}),ce=v(g({reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1},re),{extractRehydrationInfo:oe,serializeQueryArgs:function(Fe){var tt=et;if("serializeQueryArgs"in Fe.endpointDefinition){var je=Fe.endpointDefinition.serializeQueryArgs;tt=function(Ne){var ut=je(Ne);return typeof ut=="string"?ut:et(v(g({},Ne),{queryArgs:ut}))}}else re.serializeQueryArgs&&(tt=re.serializeQueryArgs);return tt(Fe)},tagTypes:i([],re.tagTypes||[])}),we={endpointDefinitions:{},batch:function(Fe){Fe()},apiUid:(0,st.nanoid)(),extractRehydrationInfo:oe,hasRehydrationInfo:(0,Ut.defaultMemoize)(function(Fe){return oe(Fe)!=null})},Be={injectEndpoints:function(Fe){for(var tt=Fe.endpoints({query:function(hr){return v(g({},hr),{type:X.query})},mutation:function(hr){return v(g({},hr),{type:X.mutation})}}),je=0,Ne=Object.entries(tt);je<Ne.length;je++){var ut=Ne[je],pt=ut[0],ot=ut[1];if(Fe.overrideExisting||!(pt in we.endpointDefinitions)){we.endpointDefinitions[pt]=ot;for(var er=0,dr=Ye;er<dr.length;er++)dr[er].injectEndpoint(pt,ot)}}return Be},enhanceEndpoints:function(Fe){var tt=Fe.addTagTypes,je=Fe.endpoints;if(tt)for(var Ne=0,ut=tt;Ne<ut.length;Ne++){var pt=ut[Ne];ce.tagTypes.includes(pt)||ce.tagTypes.push(pt)}if(je)for(var ot=0,er=Object.entries(je);ot<er.length;ot++){var dr=er[ot],hr=dr[0],br=dr[1];typeof br=="function"?br(we.endpointDefinitions[hr]):Object.assign(we.endpointDefinitions[hr]||{},br)}return Be}},Ye=Y.map(function(Fe){return Fe.init(Be,ce,we)});return Be.injectEndpoints({endpoints:re.endpoints})}}function Mr(){return function(){throw new Error("When using `fakeBaseQuery`, all queries & mutations must use the `queryFn` definition syntax.")}}var fe,Oe=x(Ns),ze=function(Y){var se=Y.reducerPath,re=Y.api,oe=Y.context,ce=Y.internalState,we=re.internalActions,Be=we.removeQueryResult,Ye=we.unsubscribeQueryResult;function Fe(Ne){var ut=ce.currentSubscriptions[Ne];return!!ut&&!function(pt){for(var ot in pt)return!1;return!0}(ut)}var tt={};function je(Ne,ut,pt,ot){var er,dr=oe.endpointDefinitions[ut],hr=(er=dr==null?void 0:dr.keepUnusedDataFor)!=null?er:ot.keepUnusedDataFor;if(hr!==1/0){var br=Math.max(0,Math.min(hr,2147482647e-3));if(!Fe(Ne)){var fr=tt[Ne];fr&&clearTimeout(fr),tt[Ne]=setTimeout(function(){Fe(Ne)||pt.dispatch(Be({queryCacheKey:Ne})),delete tt[Ne]},1e3*br)}}}return function(Ne,ut,pt){var ot;if(Ye.match(Ne)){var er=ut.getState()[se];je(gn=Ne.payload.queryCacheKey,(ot=er.queries[gn])==null?void 0:ot.endpointName,ut,er.config)}if(re.util.resetApiState.match(Ne))for(var dr=0,hr=Object.entries(tt);dr<hr.length;dr++){var br=hr[dr],fr=br[0],Gr=br[1];Gr&&clearTimeout(Gr),delete tt[fr]}if(oe.hasRehydrationInfo(Ne)){er=ut.getState()[se];for(var rr=oe.extractRehydrationInfo(Ne).queries,ci=0,va=Object.entries(rr);ci<va.length;ci++){var gn,ei=va[ci],zo=ei[1];je(gn=ei[0],zo==null?void 0:zo.endpointName,ut,er.config)}}}},Je=x(Ns),Tt=function(Y){var se=Y.reducerPath,re=Y.context,oe=Y.context.endpointDefinitions,ce=Y.mutationThunk,we=Y.api,Be=Y.assertTagType,Ye=Y.refetchQuery,Fe=we.internalActions.removeQueryResult,tt=(0,Je.isAnyOf)((0,Je.isFulfilled)(ce),(0,Je.isRejectedWithValue)(ce));function je(Ne,ut){var pt=ut.getState(),ot=pt[se],er=we.util.selectInvalidatedBy(pt,Ne);re.batch(function(){for(var dr,hr=0,br=Array.from(er.values());hr<br.length;hr++){var fr=br[hr].queryCacheKey,Gr=ot.queries[fr],rr=(dr=ot.subscriptions[fr])!=null?dr:{};Gr&&(Object.keys(rr).length===0?ut.dispatch(Fe({queryCacheKey:fr})):Gr.status!==t.uninitialized&&ut.dispatch(Ye(Gr,fr)))}})}return function(Ne,ut){tt(Ne)&&je(Pe(Ne,"invalidatesTags",oe,Be),ut),we.util.invalidateTags.match(Ne)&&je(te(Ne.payload,void 0,void 0,void 0,void 0,Be),ut)}},Zt=function(Y){var se=Y.reducerPath,re=Y.queryThunk,oe=Y.api,ce=Y.refetchQuery,we=Y.internalState,Be={};function Ye(Ne,ut){var pt=Ne.queryCacheKey,ot=ut.getState()[se].queries[pt];if(ot&&ot.status!==t.uninitialized){var er=je(we.currentSubscriptions[pt]);if(Number.isFinite(er)){var dr=Be[pt];dr!=null&&dr.timeout&&(clearTimeout(dr.timeout),dr.timeout=void 0);var hr=Date.now()+er,br=Be[pt]={nextPollTimestamp:hr,pollingInterval:er,timeout:setTimeout(function(){br.timeout=void 0,ut.dispatch(ce(ot,pt))},er)}}}}function Fe(Ne,ut){var pt=Ne.queryCacheKey,ot=ut.getState()[se].queries[pt];if(ot&&ot.status!==t.uninitialized){var er=je(we.currentSubscriptions[pt]);if(Number.isFinite(er)){var dr=Be[pt],hr=Date.now()+er;(!dr||hr<dr.nextPollTimestamp)&&Ye({queryCacheKey:pt},ut)}else tt(pt)}}function tt(Ne){var ut=Be[Ne];ut!=null&&ut.timeout&&clearTimeout(ut.timeout),delete Be[Ne]}function je(Ne){Ne===void 0&&(Ne={});var ut=Number.POSITIVE_INFINITY;for(var pt in Ne)Ne[pt].pollingInterval&&(ut=Math.min(Ne[pt].pollingInterval,ut));return ut}return function(Ne,ut){(oe.internalActions.updateSubscriptionOptions.match(Ne)||oe.internalActions.unsubscribeQueryResult.match(Ne))&&Fe(Ne.payload,ut),(re.pending.match(Ne)||re.rejected.match(Ne)&&Ne.meta.condition)&&Fe(Ne.meta.arg,ut),(re.fulfilled.match(Ne)||re.rejected.match(Ne)&&!Ne.meta.condition)&&Ye(Ne.meta.arg,ut),oe.util.resetApiState.match(Ne)&&function(){for(var pt=0,ot=Object.keys(Be);pt<ot.length;pt++)tt(ot[pt])}()}},$r=x(Ns),On=new Error("Promise never resolved before cacheEntryRemoved."),Ko=function(Y){var se=Y.api,re=Y.reducerPath,oe=Y.context,ce=Y.queryThunk,we=Y.mutationThunk,Be=(0,$r.isAsyncThunkAction)(ce),Ye=(0,$r.isAsyncThunkAction)(we),Fe=(0,$r.isFulfilled)(ce,we),tt={};function je(Ne,ut,pt,ot,er){var dr=oe.endpointDefinitions[Ne],hr=dr==null?void 0:dr.onCacheEntryAdded;if(hr){var br={},fr=new Promise(function(ei){br.cacheEntryRemoved=ei}),Gr=Promise.race([new Promise(function(ei){br.valueResolved=ei}),fr.then(function(){throw On})]);Gr.catch(function(){}),tt[pt]=br;var rr=se.endpoints[Ne].select(dr.type===X.query?ut:pt),ci=ot.dispatch(function(ei,zo,Bn){return Bn}),va=v(g({},ot),{getCacheEntry:function(){return rr(ot.getState())},requestId:er,extra:ci,updateCachedData:dr.type===X.query?function(ei){return ot.dispatch(se.util.updateQueryData(Ne,ut,ei))}:void 0,cacheDataLoaded:Gr,cacheEntryRemoved:fr}),gn=hr(ut,va);Promise.resolve(gn).catch(function(ei){if(ei!==On)throw ei})}}return function(Ne,ut,pt){var ot=function(rr){return Be(rr)?rr.meta.arg.queryCacheKey:Ye(rr)?rr.meta.requestId:se.internalActions.removeQueryResult.match(rr)?rr.payload.queryCacheKey:se.internalActions.removeMutationResult.match(rr)?de(rr.payload):""}(Ne);if(ce.pending.match(Ne)){var er=pt[re].queries[ot],dr=ut.getState()[re].queries[ot];!er&&dr&&je(Ne.meta.arg.endpointName,Ne.meta.arg.originalArgs,ot,ut,Ne.meta.requestId)}else if(we.pending.match(Ne))(dr=ut.getState()[re].mutations[ot])&&je(Ne.meta.arg.endpointName,Ne.meta.arg.originalArgs,ot,ut,Ne.meta.requestId);else if(Fe(Ne))(Gr=tt[ot])!=null&&Gr.valueResolved&&(Gr.valueResolved({data:Ne.payload,meta:Ne.meta.baseQueryMeta}),delete Gr.valueResolved);else if(se.internalActions.removeQueryResult.match(Ne)||se.internalActions.removeMutationResult.match(Ne))(Gr=tt[ot])&&(delete tt[ot],Gr.cacheEntryRemoved());else if(se.util.resetApiState.match(Ne))for(var hr=0,br=Object.entries(tt);hr<br.length;hr++){var fr=br[hr],Gr=fr[1];delete tt[fr[0]],Gr.cacheEntryRemoved()}}},Br=x(Ns),Zi=function(Y){var se=Y.api,re=Y.context,oe=Y.queryThunk,ce=Y.mutationThunk,we=(0,Br.isPending)(oe,ce),Be=(0,Br.isRejected)(oe,ce),Ye=(0,Br.isFulfilled)(oe,ce),Fe={};return function(tt,je){var Ne,ut,pt;if(we(tt)){var ot=tt.meta,er=ot.requestId,dr=ot.arg,hr=dr.endpointName,br=dr.originalArgs,fr=re.endpointDefinitions[hr],Gr=fr==null?void 0:fr.onQueryStarted;if(Gr){var rr={},ci=new Promise(function(ud,Qt){rr.resolve=ud,rr.reject=Qt});ci.catch(function(){}),Fe[er]=rr;var va=se.endpoints[hr].select(fr.type===X.query?br:er),gn=je.dispatch(function(ud,Qt,vn){return vn}),ei=v(g({},je),{getCacheEntry:function(){return va(je.getState())},requestId:er,extra:gn,updateCachedData:fr.type===X.query?function(ud){return je.dispatch(se.util.updateQueryData(hr,br,ud))}:void 0,queryFulfilled:ci});Gr(br,ei)}}else if(Ye(tt)){var zo=tt.meta,Bn=zo.baseQueryMeta;(Ne=Fe[er=zo.requestId])==null||Ne.resolve({data:tt.payload,meta:Bn}),delete Fe[er]}else if(Be(tt)){var ul=tt.meta;Bn=ul.baseQueryMeta,(pt=Fe[er=ul.requestId])==null||pt.reject({error:(ut=tt.payload)!=null?ut:tt.error,isUnhandledError:!ul.rejectedWithValue,meta:Bn}),delete Fe[er]}}},Vr=function(Y){var se=Y.api,re=Y.context.apiUid;return function(oe,ce){se.util.resetApiState.match(oe)&&ce.dispatch(se.internalActions.middlewareRegistered(re))}},Cn=x(Ex),No=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:typeof mu<"u"?mu:globalThis):function(Y){return(fe||(fe=Promise.resolve())).then(Y).catch(function(se){return setTimeout(function(){throw se},0)})};function Ji(Y){for(var se=[],re=1;re<arguments.length;re++)se[re-1]=arguments[re];Object.assign.apply(Object,i([Y],se))}var ll=x(Ex),ee=Symbol(),_e=function(){return{name:ee,init:function(Y,se,re){var oe=se.baseQuery,ce=se.reducerPath,we=se.serializeQueryArgs,Be=se.keepUnusedDataFor,Ye=se.refetchOnMountOrArgChange,Fe=se.refetchOnFocus,tt=se.refetchOnReconnect;(0,ll.enablePatches)();var je=function(Qt){return Qt};Object.assign(Y,{reducerPath:ce,endpoints:{},internalActions:{onOnline:U,onOffline:H,onFocus:j,onFocusLost:$},util:{}});var Ne=function(Qt){var vn=this,In=Qt.reducerPath,eo=Qt.baseQuery,to=Qt.context.endpointDefinitions,ya=Qt.serializeQueryArgs,Fn=Qt.api,Fr=function(dt,Vt){return S(vn,[dt,Vt],function(Ot,wt){var It,ar,Rt,gt,rt,xt,nt,ct,vt,Xt,Ht,At,Pr,Yr=wt.signal,Qr=wt.abort,Ni=wt.rejectWithValue,zi=wt.fulfillWithValue,ti=wt.dispatch,Gn=wt.getState,Is=wt.extra;return n(this,function(Wn){switch(Wn.label){case 0:It=to[Ot.endpointName],Wn.label=1;case 1:return Wn.trys.push([1,8,,13]),ar=me,Rt=void 0,gt={signal:Yr,abort:Qr,dispatch:ti,getState:Gn,extra:Is,endpoint:Ot.endpointName,type:Ot.type,forced:Ot.type==="query"?tn(Ot,Gn()):void 0},(rt=Ot.type==="query"?Ot[he]:void 0)?(Rt=rt(),[3,6]):[3,2];case 2:return It.query?[4,eo(It.query(Ot.originalArgs),gt,It.extraOptions)]:[3,4];case 3:return Rt=Wn.sent(),It.transformResponse&&(ar=It.transformResponse),[3,6];case 4:return[4,It.queryFn(Ot.originalArgs,gt,It.extraOptions,function(Bo){return eo(Bo,gt,It.extraOptions)})];case 5:Rt=Wn.sent(),Wn.label=6;case 6:if(Rt.error)throw new D(Rt.error,Rt.meta);return xt=zi,[4,ar(Rt.data,Rt.meta,Ot.originalArgs)];case 7:return[2,xt.apply(void 0,[Wn.sent(),(At={fulfilledTimeStamp:Date.now(),baseQueryMeta:Rt.meta},At[Se.SHOULD_AUTOBATCH]=!0,At)])];case 8:if(nt=Wn.sent(),!((ct=nt)instanceof D))return[3,12];vt=me,It.query&&It.transformErrorResponse&&(vt=It.transformErrorResponse),Wn.label=9;case 9:return Wn.trys.push([9,11,,12]),Xt=Ni,[4,vt(ct.value,ct.meta,Ot.originalArgs)];case 10:return[2,Xt.apply(void 0,[Wn.sent(),(Pr={baseQueryMeta:ct.meta},Pr[Se.SHOULD_AUTOBATCH]=!0,Pr)])];case 11:return Ht=Wn.sent(),ct=Ht,[3,12];case 12:throw console.error(ct),ct;case 13:return[2]}})})};function tn(dt,Vt){var Ot,wt,It,ar,Rt=(wt=(Ot=Vt[In])==null?void 0:Ot.queries)==null?void 0:wt[dt.queryCacheKey],gt=(It=Vt[In])==null?void 0:It.config.refetchOnMountOrArgChange,rt=Rt==null?void 0:Rt.fulfilledTimeStamp,xt=(ar=dt.forceRefetch)!=null?ar:dt.subscribe&&gt;return!!xt&&(xt===!0||(Number(new Date)-Number(rt))/1e3>=xt)}var Dn=(0,Se.createAsyncThunk)(In+"/executeQuery",Fr,{getPendingMeta:function(){var dt;return(dt={startedTimeStamp:Date.now()})[Se.SHOULD_AUTOBATCH]=!0,dt},condition:function(dt,Vt){var Ot,wt,It,ar=(0,Vt.getState)(),Rt=(wt=(Ot=ar[In])==null?void 0:Ot.queries)==null?void 0:wt[dt.queryCacheKey],gt=Rt==null?void 0:Rt.fulfilledTimeStamp,rt=dt.originalArgs,xt=Rt==null?void 0:Rt.originalArgs,nt=to[dt.endpointName];return!(!ae(dt)&&((Rt==null?void 0:Rt.status)==="pending"||!tn(dt,ar)&&(!W(nt)||!((It=nt==null?void 0:nt.forceRefetch)!=null&&It.call(nt,{currentArg:rt,previousArg:xt,endpointState:Rt,state:ar})))&&gt))},dispatchConditionRejection:!0}),yn=(0,Se.createAsyncThunk)(In+"/executeMutation",Fr,{getPendingMeta:function(){var dt;return(dt={startedTimeStamp:Date.now()})[Se.SHOULD_AUTOBATCH]=!0,dt}});function An(dt){return function(Vt){var Ot,wt;return((wt=(Ot=Vt==null?void 0:Vt.meta)==null?void 0:Ot.arg)==null?void 0:wt.endpointName)===dt}}return{queryThunk:Dn,mutationThunk:yn,prefetch:function(dt,Vt,Ot){return function(wt,It){var ar=function(nt){return"force"in nt}(Ot)&&Ot.force,Rt=function(nt){return"ifOlderThan"in nt}(Ot)&&Ot.ifOlderThan,gt=function(nt){return nt===void 0&&(nt=!0),Fn.endpoints[dt].initiate(Vt,{forceRefetch:nt})},rt=Fn.endpoints[dt].select(Vt)(It());if(ar)wt(gt());else if(Rt){var xt=rt==null?void 0:rt.fulfilledTimeStamp;if(!xt)return void wt(gt());(Number(new Date)-Number(new Date(xt)))/1e3>=Rt&&wt(gt())}else wt(gt(!1))}},updateQueryData:function(dt,Vt,Ot){return function(wt,It){var ar,Rt,gt=Fn.endpoints[dt].select(Vt)(It()),rt={patches:[],inversePatches:[],undo:function(){return wt(Fn.util.patchQueryData(dt,Vt,rt.inversePatches))}};if(gt.status===t.uninitialized)return rt;if("data"in gt)if((0,ye.isDraftable)(gt.data)){var xt=(0,ye.produceWithPatches)(gt.data,Ot),nt=xt[2];(ar=rt.patches).push.apply(ar,xt[1]),(Rt=rt.inversePatches).push.apply(Rt,nt)}else{var ct=Ot(gt.data);rt.patches.push({op:"replace",path:[],value:ct}),rt.inversePatches.push({op:"replace",path:[],value:gt.data})}return wt(Fn.util.patchQueryData(dt,Vt,rt.patches)),rt}},upsertQueryData:function(dt,Vt,Ot){return function(wt){var It;return wt(Fn.endpoints[dt].initiate(Vt,((It={subscribe:!1,forceRefetch:!0})[he]=function(){return{data:Ot}},It)))}},patchQueryData:function(dt,Vt,Ot){return function(wt){wt(Fn.internalActions.queryResultPatched({queryCacheKey:ya({queryArgs:Vt,endpointDefinition:to[dt],endpointName:dt}),patches:Ot}))}},buildMatchThunkActions:function(dt,Vt){return{matchPending:(0,be.isAllOf)((0,be.isPending)(dt),An(Vt)),matchFulfilled:(0,be.isAllOf)((0,be.isFulfilled)(dt),An(Vt)),matchRejected:(0,be.isAllOf)((0,be.isRejected)(dt),An(Vt))}}}}({baseQuery:oe,reducerPath:ce,context:re,api:Y,serializeQueryArgs:we}),ut=Ne.queryThunk,pt=Ne.mutationThunk,ot=Ne.patchQueryData,er=Ne.updateQueryData,dr=Ne.upsertQueryData,hr=Ne.prefetch,br=Ne.buildMatchThunkActions,fr=function(Qt){var vn=Qt.reducerPath,In=Qt.queryThunk,eo=Qt.mutationThunk,to=Qt.context,ya=to.endpointDefinitions,Fn=to.apiUid,Fr=to.extractRehydrationInfo,tn=to.hasRehydrationInfo,Dn=Qt.assertTagType,yn=Qt.config,An=(0,q.createAction)(vn+"/resetApiState"),dt=(0,q.createSlice)({name:vn+"/queries",initialState:Me,reducers:{removeQueryResult:{reducer:function(gt,rt){delete gt[rt.payload.queryCacheKey]},prepare:(0,q.prepareAutoBatched)()},queryResultPatched:function(gt,rt){var xt=rt.payload,nt=xt.patches;G(gt,xt.queryCacheKey,function(ct){ct.data=(0,K.applyPatches)(ct.data,nt.concat())})}},extraReducers:function(gt){gt.addCase(In.pending,function(rt,xt){var nt,ct=xt.meta,vt=xt.meta.arg,Xt=ae(vt);(vt.subscribe||Xt)&&(rt[nt=vt.queryCacheKey]!=null||(rt[nt]={status:t.uninitialized,endpointName:vt.endpointName})),G(rt,vt.queryCacheKey,function(Ht){Ht.status=t.pending,Ht.requestId=Xt&&Ht.requestId?Ht.requestId:ct.requestId,vt.originalArgs!==void 0&&(Ht.originalArgs=vt.originalArgs),Ht.startedTimeStamp=ct.startedTimeStamp})}).addCase(In.fulfilled,function(rt,xt){var nt=xt.meta,ct=xt.payload;G(rt,nt.arg.queryCacheKey,function(vt){var Xt;if(vt.requestId===nt.requestId||ae(nt.arg)){var Ht=ya[nt.arg.endpointName].merge;if(vt.status=t.fulfilled,Ht)if(vt.data!==void 0){var At=nt.fulfilledTimeStamp,Pr=nt.arg,Yr=nt.baseQueryMeta,Qr=nt.requestId,Ni=(0,q.createNextState)(vt.data,function(zi){return Ht(zi,ct,{arg:Pr.originalArgs,baseQueryMeta:Yr,fulfilledTimeStamp:At,requestId:Qr})});vt.data=Ni}else vt.data=ct;else vt.data=(Xt=ya[nt.arg.endpointName].structuralSharing)==null||Xt?C((0,Ae.isDraft)(vt.data)?(0,K.original)(vt.data):vt.data,ct):ct;delete vt.error,vt.fulfilledTimeStamp=nt.fulfilledTimeStamp}})}).addCase(In.rejected,function(rt,xt){var nt=xt.meta,ct=nt.condition,vt=nt.requestId,Xt=xt.error,Ht=xt.payload;G(rt,nt.arg.queryCacheKey,function(At){if(!ct){if(At.requestId!==vt)return;At.status=t.rejected,At.error=Ht??Xt}})}).addMatcher(tn,function(rt,xt){for(var nt=Fr(xt).queries,ct=0,vt=Object.entries(nt);ct<vt.length;ct++){var Xt=vt[ct],Ht=Xt[1];(Ht==null?void 0:Ht.status)!==t.fulfilled&&(Ht==null?void 0:Ht.status)!==t.rejected||(rt[Xt[0]]=Ht)}})}}),Vt=(0,q.createSlice)({name:vn+"/mutations",initialState:Me,reducers:{removeMutationResult:{reducer:function(gt,rt){var xt=de(rt.payload);xt in gt&&delete gt[xt]},prepare:(0,q.prepareAutoBatched)()}},extraReducers:function(gt){gt.addCase(eo.pending,function(rt,xt){var nt=xt.meta,ct=nt.requestId,vt=nt.arg,Xt=nt.startedTimeStamp;vt.track&&(rt[de(xt.meta)]={requestId:ct,status:t.pending,endpointName:vt.endpointName,startedTimeStamp:Xt})}).addCase(eo.fulfilled,function(rt,xt){var nt=xt.payload,ct=xt.meta;ct.arg.track&&Ee(rt,ct,function(vt){vt.requestId===ct.requestId&&(vt.status=t.fulfilled,vt.data=nt,vt.fulfilledTimeStamp=ct.fulfilledTimeStamp)})}).addCase(eo.rejected,function(rt,xt){var nt=xt.payload,ct=xt.error,vt=xt.meta;vt.arg.track&&Ee(rt,vt,function(Xt){Xt.requestId===vt.requestId&&(Xt.status=t.rejected,Xt.error=nt??ct)})}).addMatcher(tn,function(rt,xt){for(var nt=Fr(xt).mutations,ct=0,vt=Object.entries(nt);ct<vt.length;ct++){var Xt=vt[ct],Ht=Xt[0],At=Xt[1];(At==null?void 0:At.status)!==t.fulfilled&&(At==null?void 0:At.status)!==t.rejected||Ht===(At==null?void 0:At.requestId)||(rt[Ht]=At)}})}}),Ot=(0,q.createSlice)({name:vn+"/invalidation",initialState:Me,reducers:{},extraReducers:function(gt){gt.addCase(dt.actions.removeQueryResult,function(rt,xt){for(var nt=xt.payload.queryCacheKey,ct=0,vt=Object.values(rt);ct<vt.length;ct++)for(var Xt=0,Ht=Object.values(vt[ct]);Xt<Ht.length;Xt++){var At=Ht[Xt],Pr=At.indexOf(nt);Pr!==-1&&At.splice(Pr,1)}}).addMatcher(tn,function(rt,xt){for(var nt,ct,vt,Xt,Ht=Fr(xt).provided,At=0,Pr=Object.entries(Ht);At<Pr.length;At++)for(var Yr=Pr[At],Qr=Yr[0],Ni=0,zi=Object.entries(Yr[1]);Ni<zi.length;Ni++)for(var ti=zi[Ni],Gn=ti[0],Is=ti[1],Wn=(Xt=(ct=(nt=rt[Qr])!=null?nt:rt[Qr]={})[vt=Gn||"__internal_without_id"])!=null?Xt:ct[vt]=[],Bo=0,cl=Is;Bo<cl.length;Bo++){var ba=cl[Bo];Wn.includes(ba)||Wn.push(ba)}}).addMatcher((0,q.isAnyOf)((0,q.isFulfilled)(In),(0,q.isRejectedWithValue)(In)),function(rt,xt){for(var nt,ct,vt,Xt,Ht=Pe(xt,"providesTags",ya,Dn),At=xt.meta.arg.queryCacheKey,Pr=0,Yr=Object.values(rt);Pr<Yr.length;Pr++)for(var Qr=0,Ni=Object.values(Yr[Pr]);Qr<Ni.length;Qr++){var zi=Ni[Qr],ti=zi.indexOf(At);ti!==-1&&zi.splice(ti,1)}for(var Gn=0,Is=Ht;Gn<Is.length;Gn++){var Wn=Is[Gn],Bo=Wn.type,cl=Wn.id,ba=(Xt=(ct=(nt=rt[Bo])!=null?nt:rt[Bo]={})[vt=cl||"__internal_without_id"])!=null?Xt:ct[vt]=[];ba.includes(At)||ba.push(At)}})}}),wt=(0,q.createSlice)({name:vn+"/subscriptions",initialState:Me,reducers:{updateSubscriptionOptions:function(gt,rt){},unsubscribeQueryResult:function(gt,rt){},internal_probeSubscription:function(gt,rt){}}}),It=(0,q.createSlice)({name:vn+"/internalSubscriptions",initialState:Me,reducers:{subscriptionsUpdated:{reducer:function(gt,rt){return(0,K.applyPatches)(gt,rt.payload)},prepare:(0,q.prepareAutoBatched)()}}}),ar=(0,q.createSlice)({name:vn+"/config",initialState:g({online:typeof navigator>"u"||navigator.onLine===void 0||navigator.onLine,focused:typeof document>"u"||document.visibilityState!=="hidden",middlewareRegistered:!1},yn),reducers:{middlewareRegistered:function(gt,rt){gt.middlewareRegistered=gt.middlewareRegistered!=="conflict"&&Fn===rt.payload||"conflict"}},extraReducers:function(gt){gt.addCase(U,function(rt){rt.online=!0}).addCase(H,function(rt){rt.online=!1}).addCase(j,function(rt){rt.focused=!0}).addCase($,function(rt){rt.focused=!1}).addMatcher(tn,function(rt){return g({},rt)})}}),Rt=(0,q.combineReducers)({queries:dt.reducer,mutations:Vt.reducer,provided:Ot.reducer,subscriptions:It.reducer,config:ar.reducer});return{reducer:function(gt,rt){return Rt(An.match(rt)?void 0:gt,rt)},actions:v(g(g(g(g(g({},ar.actions),dt.actions),wt.actions),It.actions),Vt.actions),{unsubscribeMutationResult:Vt.actions.removeMutationResult,resetApiState:An})}}({context:re,queryThunk:ut,mutationThunk:pt,reducerPath:ce,assertTagType:je,config:{refetchOnFocus:Fe,refetchOnReconnect:tt,refetchOnMountOrArgChange:Ye,keepUnusedDataFor:Be,reducerPath:ce}}),Gr=fr.reducer,rr=fr.actions;Ji(Y.util,{patchQueryData:ot,updateQueryData:er,upsertQueryData:dr,prefetch:hr,resetApiState:rr.resetApiState}),Ji(Y.internalActions,rr);var ci=function(Qt){var vn=Qt.reducerPath,In=Qt.queryThunk,eo=Qt.api,to=Qt.context,ya=to.apiUid,Fn={invalidateTags:(0,Oe.createAction)(vn+"/invalidateTags")},Fr=[Vr,ze,Tt,Zt,Ko,Zi];return{middleware:function(Dn){var yn=!1,An=v(g({},Qt),{internalState:{currentSubscriptions:{}},refetchQuery:tn}),dt=Fr.map(function(wt){return wt(An)}),Vt=function(wt){var It=wt.api,ar=wt.queryThunk,Rt=wt.internalState,gt=It.reducerPath+"/subscriptions",rt=null,xt=!1,nt=It.internalActions,ct=nt.updateSubscriptionOptions,vt=nt.unsubscribeQueryResult;return function(Xt,Ht){var At,Pr;if(rt||(rt=JSON.parse(JSON.stringify(Rt.currentSubscriptions))),It.util.resetApiState.match(Xt))return rt=Rt.currentSubscriptions={},[!0,!1];if(It.internalActions.internal_probeSubscription.match(Xt)){var Yr=Xt.payload;return[!1,!!((At=Rt.currentSubscriptions[Yr.queryCacheKey])!=null&&At[Yr.requestId])]}var Qr=function(ti,Gn){var Is,Wn,Bo,cl,ba,Sb,u5,c5,d5;if(ct.match(Gn)){var IO=Gn.payload,p_=IO.queryCacheKey,Wu=IO.requestId;return(Is=ti==null?void 0:ti[p_])!=null&&Is[Wu]&&(ti[p_][Wu]=IO.options),!0}if(vt.match(Gn)){var h5=Gn.payload;return Wu=h5.requestId,ti[p_=h5.queryCacheKey]&&delete ti[p_][Wu],!0}if(It.internalActions.removeQueryResult.match(Gn))return delete ti[Gn.payload.queryCacheKey],!0;if(ar.pending.match(Gn)){var f5=Gn.meta;if(Wu=f5.requestId,(yg=f5.arg).subscribe)return(m_=(Bo=ti[Wn=yg.queryCacheKey])!=null?Bo:ti[Wn]={})[Wu]=(ba=(cl=yg.subscriptionOptions)!=null?cl:m_[Wu])!=null?ba:{},!0}if(ar.rejected.match(Gn)){var m_,DO=Gn.meta,yg=DO.arg;if(Wu=DO.requestId,DO.condition&&yg.subscribe)return(m_=(u5=ti[Sb=yg.queryCacheKey])!=null?u5:ti[Sb]={})[Wu]=(d5=(c5=yg.subscriptionOptions)!=null?c5:m_[Wu])!=null?d5:{},!0}return!1}(Rt.currentSubscriptions,Xt);if(Qr){xt||(No(function(){var ti=JSON.parse(JSON.stringify(Rt.currentSubscriptions)),Gn=(0,Cn.produceWithPatches)(rt,function(){return ti});Ht.next(It.internalActions.subscriptionsUpdated(Gn[1])),rt=ti,xt=!1}),xt=!0);var Ni=!!((Pr=Xt.type)!=null&&Pr.startsWith(gt)),zi=ar.rejected.match(Xt)&&Xt.meta.condition&&!!Xt.meta.arg.subscribe;return[!Ni&&!zi,!1]}return[!0,!1]}}(An),Ot=function(wt){var It=wt.reducerPath,ar=wt.context,Rt=wt.refetchQuery,gt=wt.internalState,rt=wt.api.internalActions.removeQueryResult;function xt(nt,ct){var vt=nt.getState()[It],Xt=vt.queries,Ht=gt.currentSubscriptions;ar.batch(function(){for(var At=0,Pr=Object.keys(Ht);At<Pr.length;At++){var Yr=Pr[At],Qr=Xt[Yr],Ni=Ht[Yr];Ni&&Qr&&(Object.values(Ni).some(function(zi){return zi[ct]===!0})||Object.values(Ni).every(function(zi){return zi[ct]===void 0})&&vt.config[ct])&&(Object.keys(Ni).length===0?nt.dispatch(rt({queryCacheKey:Yr})):Qr.status!==t.uninitialized&&nt.dispatch(Rt(Qr,Yr)))}})}return function(nt,ct){j.match(nt)&&xt(ct,"refetchOnFocus"),U.match(nt)&&xt(ct,"refetchOnReconnect")}}(An);return function(wt){return function(It){yn||(yn=!0,Dn.dispatch(eo.internalActions.middlewareRegistered(ya)));var ar,Rt=v(g({},Dn),{next:wt}),gt=Dn.getState(),rt=Vt(It,Rt,gt),xt=rt[1];if(ar=rt[0]?wt(It):xt,Dn.getState()[vn]&&(Ot(It,Rt,gt),function(vt){return!!vt&&typeof vt.type=="string"&&vt.type.startsWith(vn+"/")}(It)||to.hasRehydrationInfo(It)))for(var nt=0,ct=dt;nt<ct.length;nt++)(0,ct[nt])(It,Rt,gt);return ar}}},actions:Fn};function tn(Dn,yn,An){return An===void 0&&(An={}),In(g({type:"query",endpointName:Dn.endpointName,originalArgs:Dn.originalArgs,subscribe:!1,forceRefetch:!0,queryCacheKey:yn},An))}}({reducerPath:ce,context:re,queryThunk:ut,mutationThunk:pt,api:Y,assertTagType:je}),va=ci.middleware;Ji(Y.util,ci.actions),Ji(Y,{reducer:Gr,middleware:va});var gn=function(Qt){var vn=Qt.serializeQueryArgs,In=Qt.reducerPath,eo=function(Fr){return pe},to=function(Fr){return Ge};return{buildQuerySelector:function(Fr,tn){return function(Dn){var yn=vn({queryArgs:Dn,endpointDefinition:tn,endpointName:Fr});return(0,J.createSelector)(Dn===Le?eo:function(An){var dt,Vt,Ot;return(Ot=(Vt=(dt=Fn(An))==null?void 0:dt.queries)==null?void 0:Vt[yn])!=null?Ot:pe},ya)}},buildMutationSelector:function(){return function(Fr){var tn,Dn;return Dn=typeof Fr=="object"?(tn=de(Fr))!=null?tn:Le:Fr,(0,J.createSelector)(Dn===Le?to:function(yn){var An,dt,Vt;return(Vt=(dt=(An=Fn(yn))==null?void 0:An.mutations)==null?void 0:dt[Dn])!=null?Vt:Ge},ya)}},selectInvalidatedBy:function(Fr,tn){for(var Dn,yn=Fr[In],An=new Set,dt=0,Vt=tn.map(Z);dt<Vt.length;dt++){var Ot=Vt[dt],wt=yn.provided[Ot.type];if(wt)for(var It=0,ar=(Dn=Ot.id!==void 0?wt[Ot.id]:w(Object.values(wt)))!=null?Dn:[];It<ar.length;It++)An.add(ar[It])}return w(Array.from(An.values()).map(function(Rt){var gt=yn.queries[Rt];return gt?[{queryCacheKey:Rt,endpointName:gt.endpointName,originalArgs:gt.originalArgs}]:[]}))}};function ya(Fr){return g(g({},Fr),{status:tn=Fr.status,isUninitialized:tn===t.uninitialized,isLoading:tn===t.pending,isSuccess:tn===t.fulfilled,isError:tn===t.rejected});var tn}function Fn(Fr){return Fr[In]}}({serializeQueryArgs:we,reducerPath:ce}),ei=gn.buildQuerySelector,zo=gn.buildMutationSelector;Ji(Y.util,{selectInvalidatedBy:gn.selectInvalidatedBy});var Bn=function(Qt){var vn=Qt.serializeQueryArgs,In=Qt.queryThunk,eo=Qt.mutationThunk,to=Qt.api,ya=Qt.context,Fn=new Map,Fr=new Map,tn=to.internalActions,Dn=tn.unsubscribeQueryResult,yn=tn.removeMutationResult,An=tn.updateSubscriptionOptions;return{buildInitiateQuery:function(dt,Vt){var Ot=function(wt,It){var ar=It===void 0?{}:It,Rt=ar.subscribe,gt=Rt===void 0||Rt,rt=ar.forceRefetch,xt=ar.subscriptionOptions,nt=ar[he];return function(ct,vt){var Xt,Ht,At=vn({queryArgs:wt,endpointDefinition:Vt,endpointName:dt}),Pr=In(((Xt={type:"query",subscribe:gt,forceRefetch:rt,subscriptionOptions:xt,endpointName:dt,originalArgs:wt,queryCacheKey:At})[he]=nt,Xt)),Yr=to.endpoints[dt].select(wt),Qr=ct(Pr),Ni=Yr(vt()),zi=Qr.requestId,ti=Qr.abort,Gn=Ni.requestId!==zi,Is=(Ht=Fn.get(ct))==null?void 0:Ht[At],Wn=function(){return Yr(vt())},Bo=Object.assign(nt?Qr.then(Wn):Gn&&!Is?Promise.resolve(Ni):Promise.all([Is,Qr]).then(Wn),{arg:wt,requestId:zi,subscriptionOptions:xt,queryCacheKey:At,abort:ti,unwrap:function(){return S(this,null,function(){var ba;return n(this,function(Sb){switch(Sb.label){case 0:return[4,Bo];case 1:if((ba=Sb.sent()).isError)throw ba.error;return[2,ba.data]}})})},refetch:function(){return ct(Ot(wt,{subscribe:!1,forceRefetch:!0}))},unsubscribe:function(){gt&&ct(Dn({queryCacheKey:At,requestId:zi}))},updateSubscriptionOptions:function(ba){Bo.subscriptionOptions=ba,ct(An({endpointName:dt,requestId:zi,queryCacheKey:At,options:ba}))}});if(!Is&&!Gn&&!nt){var cl=Fn.get(ct)||{};cl[At]=Bo,Fn.set(ct,cl),Bo.then(function(){delete cl[At],Object.keys(cl).length||Fn.delete(ct)})}return Bo}};return Ot},buildInitiateMutation:function(dt){return function(Vt,Ot){var wt=Ot===void 0?{}:Ot,It=wt.track,ar=It===void 0||It,Rt=wt.fixedCacheKey;return function(gt,rt){var xt=eo({type:"mutation",endpointName:dt,originalArgs:Vt,track:ar,fixedCacheKey:Rt}),nt=gt(xt),ct=nt.requestId,vt=nt.abort,Xt=nt.unwrap,Ht=nt.unwrap().then(function(Qr){return{data:Qr}}).catch(function(Qr){return{error:Qr}}),At=function(){gt(yn({requestId:ct,fixedCacheKey:Rt}))},Pr=Object.assign(Ht,{arg:nt.arg,requestId:ct,abort:vt,unwrap:Xt,unsubscribe:At,reset:At}),Yr=Fr.get(gt)||{};return Fr.set(gt,Yr),Yr[ct]=Pr,Pr.then(function(){delete Yr[ct],Object.keys(Yr).length||Fr.delete(gt)}),Rt&&(Yr[Rt]=Pr,Pr.then(function(){Yr[Rt]===Pr&&(delete Yr[Rt],Object.keys(Yr).length||Fr.delete(gt))})),Pr}}},getRunningQueryThunk:function(dt,Vt){return function(Ot){var wt,It=vn({queryArgs:Vt,endpointDefinition:ya.endpointDefinitions[dt],endpointName:dt});return(wt=Fn.get(Ot))==null?void 0:wt[It]}},getRunningMutationThunk:function(dt,Vt){return function(Ot){var wt;return(wt=Fr.get(Ot))==null?void 0:wt[Vt]}},getRunningQueriesThunk:function(){return function(dt){return Object.values(Fn.get(dt)||{}).filter(ie)}},getRunningMutationsThunk:function(){return function(dt){return Object.values(Fr.get(dt)||{}).filter(ie)}},getRunningOperationPromises:function(){var dt=function(Vt){return Array.from(Vt.values()).flatMap(function(Ot){return Ot?Object.values(Ot):[]})};return i(i([],dt(Fn)),dt(Fr)).filter(ie)},removalWarning:function(){throw new Error(`This method had to be removed due to a conceptual bug in RTK.
       Please see https://github.com/reduxjs/redux-toolkit/pull/2481 for details.
       See https://redux-toolkit.js.org/rtk-query/usage/server-side-rendering for new guidance on SSR.`)}}}({queryThunk:ut,mutationThunk:pt,api:Y,serializeQueryArgs:we,context:re}),ul=Bn.buildInitiateQuery,ud=Bn.buildInitiateMutation;return Ji(Y.util,{getRunningOperationPromises:Bn.getRunningOperationPromises,getRunningOperationPromise:Bn.removalWarning,getRunningMutationThunk:Bn.getRunningMutationThunk,getRunningMutationsThunk:Bn.getRunningMutationsThunk,getRunningQueryThunk:Bn.getRunningQueryThunk,getRunningQueriesThunk:Bn.getRunningQueriesThunk}),{name:ee,injectEndpoint:function(Qt,vn){var In,eo=Y;(In=eo.endpoints)[Qt]!=null||(In[Qt]={}),W(vn)?Ji(eo.endpoints[Qt],{name:Qt,select:ei(Qt,vn),initiate:ul(Qt,vn)},br(ut,Qt)):vn.type===X.mutation&&Ji(eo.endpoints[Qt],{name:Qt,select:zo(),initiate:ud(Qt)},br(pt,Qt))}}}}},ke=Cr(_e())})(Hce);Vce.exports=Hce;var VEt=Vce.exports;function HEt(e={}){const{nonce:t,onScriptLoadSuccess:r,onScriptLoadError:n}=e,[i,o]=P.useState(!1),a=P.useRef(r);a.current=r;const s=P.useRef(n);return s.current=n,P.useEffect(()=>{const l=document.createElement("script");return l.src="https://accounts.google.com/gsi/client",l.async=!0,l.defer=!0,l.nonce=t,l.onload=()=>{var u;o(!0),(u=a.current)===null||u===void 0||u.call(a)},l.onerror=()=>{var u;o(!1),(u=s.current)===null||u===void 0||u.call(s)},document.body.appendChild(l),()=>{document.body.removeChild(l)}},[t]),i}const GEt=P.createContext(null);function WEt({clientId:e,nonce:t,onScriptLoadSuccess:r,onScriptLoadError:n,children:i}){const o=HEt({nonce:t,onScriptLoadSuccess:r,onScriptLoadError:n}),a=P.useMemo(()=>({clientId:e,scriptLoadedSuccessfully:o}),[e,o]);return le.createElement(GEt.Provider,{value:a},i)}const Gce=fte({reducer:{[VA.reducerPath]:VA.reducer},middleware:e=>e().concat(VA.middleware)});VEt.setupListeners(Gce.dispatch);bk.createRoot(document.getElementById("root")).render(B.jsx(SMe,{store:Gce,children:B.jsx(WEt,{clientId:"325860217377-l8p3m0colt3rhhm6nc7i4o66dk422eek.apps.googleusercontent.com",children:B.jsx(UEt,{})})}))});export default qEt();
